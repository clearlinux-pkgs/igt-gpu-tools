commit 7f93a2632aae7c5865823b4a2fa4cd8c2a1c0977
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Wed Oct 4 13:48:15 2017 +0300

    Update NEWS, bump version to 1.20.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 332108184493d0b58963ffe13f9b568a6fa462df
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Wed Oct 4 12:11:40 2017 +0100

    tests/perf: split array of formats descriptions
    
    The I915_OA_FORMAT_C4_B8 format has different offset on Haswell &
    Gen8. Let's split the format lists so we don't mix them.
    
    Reported-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 23a578df1df1891b943cd5c3f8c6080b5215e8d7
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Thu Aug 31 11:32:28 2017 +0100

    tests/perf: add support for Coffeelake
    
    Using the same timestamp frequency as Skylake/Kabylake.
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit f1514a6320f65a1524f36407f7f22d6fc7c7679e
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Thu Nov 3 17:27:28 2016 +0000

    tests/perf: prevent power management to kick in when necessary
    
    Some of our tests measure that the OA unit produces reports at
    expected time intervals (as configured through the PERF_OPEN
    ioctl). It turns out the power management plays a role in the decision
    of the OA unit to write reports to memory. Under normal circumstances
    we don't really mind if the unit misses one report here or there, but
    for our tests it makes pretty difficult to verify whether we've made a
    mistake in the configuration.
    
    To work around this, let's prevent power management to kick in by
    holding /dev/cpu_dma_latency opened for the following tests :
    
      - enable-disable
      - blocking
      - polling
      - buffer-fill
      - oa-exponents
    
    Many thanks to Chris Wilson for suggesting this!
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit eafaf4fb49ba7a02c11def787b5de2a14de532f2
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Wed Aug 23 16:17:04 2017 +0100

    tests/perf: estimate number of blocking/polling based on time spent
    
    Blocking & polling tests define an amount of time to spend in the test
    and then estimate the number of syscalls that should successfully
    return. The problem is that while running the test we might spend
    slightly more time than initiallly planned. This change estimates the
    number of syscalls based on time spent after the fact.
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 0e41ce59d71031a21aa9ae83e46ccd54b7601dc8
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Fri Apr 14 02:49:19 2017 +0100

    tests/perf: make buffer-fill more reliable
    
    Filling rate of the buffer must discard context switch reports as they
    do not depend upon the periodicity, instead they're a factor on the
    amount of different applications concurrently running on the system.
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Tested-by: Matthew Auld <matthew.auld@intel.com>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 55d3c3b00838f8ad103233a75c12453b9733fd37
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Fri Apr 14 02:14:20 2017 +0100

    tests/perf: make enable-disable more reliable
    
    Estimation of the amount of reports can only refer to periodic ones,
    as context switch reports completely depend on what happens on the
    system. Also generate some load to prevent clock frequency changes to
    impact our measurement.
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 4a8d621cdf876bd3774cec719fd4e92b77ff86aa
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Mon Apr 24 22:28:57 2017 -0700

    tests/perf: rework oa-exponent test
    
    New issues that were discovered while making the tests work on Gen8+ :
    
     - we need to measure timings between periodic reports and discard all
       other kind of reports
    
     - it seems periodicity of the reports can be affected outside of RC6
       (frequency change), we can detect this by looking at the amount of
       clock cycles per timestamp deltas
    
    v2: Drop some unused variables (Matthew)
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 765ba28f0d62e6b879e60bdca033b63737d2fbfb
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Fri Apr 14 03:25:05 2017 +0100

    tests/perf: remove frequency related changes
    
    Experience shows that most of the issues we face with periodicity of
    the reports produced by the OA unit are related to power management,
    not frequency.
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 457bed4c6861462ac69880a101812ec44301433a
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Mon May 1 23:40:59 2017 -0700

    tests/perf: rc6: try to guess when rc6 is disabled
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit be844d0811c5a1b2a742d1bbb01ee263c16cc9dd
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Tue Apr 25 11:02:11 2017 -0700

    tests/perf: update max buffer size for reading reports
    
    Make it clear that we're using a 16Mb buffer.
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 8697ba5451c7068aacc3360a2162dd0bb190ac3d
Author: Robert Bragg <robert@sixbynine.org>
Date:   Sun Feb 12 19:28:38 2017 +0000

    tests/perf: add per context filtering test for gen8+
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 225179e374d570ae27b318cd99f7cf6d9b17a573
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Fri Mar 31 18:29:28 2017 +0100

    tests/perf: make stream_fd a global variable
    
    When debugging unstable tests on new platforms we currently we don't
    cleanup everything well in between different tests. Since only a
    single OA stream fd can be opened at a time, having the stream_fd as a
    global variable helps us cleanup the state between tests.
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 26d0da428f6d6029ad803821ddb6bbc6ff5765a5
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Oct 3 16:11:42 2017 +0200

    lib/igt_kms: Disable crtc in legacy path when output is unset
    
    When the output is unset, but the fb is still valid we still have
    to perform a disable on the crtc.
    
    This ixes the following crash in kms_color (although previous commit
    does as well):
    
    (gdb) bt
    0  igt_output_get_mode (output=output@entry=0x0) at igt_kms.c:2828
    1  0x000055555556f0d5 in igt_primary_plane_commit_legacy(..) at igt_kms.c:2341
    2  igt_plane_commit (fail_on_error=true, s=COMMIT_LEGACY, ..) at igt_kms.c:2394
    3  igt_pipe_commit (fail_on_error=true, s=COMMIT_LEGACY, ..) at igt_kms.c:2435
    4  do_display_commit (display=0x7fffffffe5d8, s=COMMIT_LEGACY, ..) at igt_kms.c:2667
    5  0x000055555556f38e in igt_display_commit2 (display=<optimized out>, s=<optimized out>) at igt_kms.c:2777
    6  0x000055555555ef84 in run_tests_for_pipe (data=.., p=PIPE_B) at kms_color.c:1053
    7  0x000055555555f610 in __real_main1189 () at kms_color.c:1206
    8  0x000055555555cbc7 in main (argc=<optimized out>, argv=<optimized out>) at kms_color.c:1189
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 9913b582eeb5e9d52dd9963f95f875e1231f44b2
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Oct 3 16:15:44 2017 +0200

    tests/kms_color: Unset plane fb on teardown, v2.
    
    Valgrind is slightly unhappy when we leave the fb set:
    ==1804== Invalid read of size 4
    ==1804==    at 0x122F83: igt_plane_get_fb_id (igt_kms.c:2074)
    ==1804==    by 0x122F83: igt_primary_plane_commit_legacy
    (igt_kms.c:2339)
    ==1804==    by 0x122F83: igt_plane_commit (igt_kms.c:2394)
    ==1804==    by 0x122F83: igt_pipe_commit (igt_kms.c:2435)
    ==1804==    by 0x122F83: do_display_commit (igt_kms.c:2667)
    ==1804==    by 0x12338D: igt_display_commit2 (igt_kms.c:2777)
    ==1804==    by 0x112F83: run_tests_for_pipe (kms_color.c:1053)
    ==1804==    by 0x11360F: __real_main1189 (kms_color.c:1206)
    ==1804==    by 0x110BC6: main (kms_color.c:1189)
    ==1804==  Address 0x1ffeffeb20 is on thread 1's stack
    ==1804==  160 bytes below stack pointer
    
    Add the missing calls to igt_plane_set_fb, and fix the crash.
    
    Changes since v1:
    - Fix compilation!
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 7c9dccb596b6467899c993a7df5d32574c1b89b9
Author: Ausmus, James <james.ausmus@intel.com>
Date:   Wed Sep 27 16:08:27 2017 -0700

    Fix compilation on some distros
    
    Some distros (such as Gentoo) are removing the include of
    sys/sysmacros.h from sys/types.h. Explicitly include sysmacros.h in
    files where we use the minor() and major() functions.
    
    Signed-off-by: James Ausmus <james.ausmus@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 7fd0cae99630f954cfe0089b4b7e91576a353582
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 3 14:52:27 2017 +0100

    lib: Fixup __gem_create() to be 64b safe.
    
    We want to create very large objects, larger than the 2G limit imposed
    by using ints.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviwed-by: Mika Kuoppala <mika.kuoppala@linux.intel.com>

commit b26e9185645a4344e113a98428cd3c342d09d024
Author: Eric Anholt <eric@anholt.net>
Date:   Wed Sep 27 11:30:52 2017 -0700

    meson: Disable the intel overlay on non-x86 builds.
    
    It's got calls to rmb/wmb that end up not linking successfully.
    
    Signed-off-by: Eric Anholt <eric@anholt.net>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 2a74ae550842cfe216bff28725e1a24db3b56792
Author: Eric Anholt <eric@anholt.net>
Date:   Wed Sep 27 11:17:15 2017 -0700

    meson: Fix build of igt_x86-using tests on non-x86 platforms.
    
    Just stub out the features return value, and return an empty string.
    
    Signed-off-by: Eric Anholt <eric@anholt.net>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit b09047edeeab8584649e2c7ebded28dace3f6853
Author: Eric Anholt <eric@anholt.net>
Date:   Wed Sep 27 11:22:08 2017 -0700

    Fix rlim_cur compiler warnings when building on ARM.
    
    Signed-off-by: Eric Anholt <eric@anholt.net>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 0045085c632a1cf5b4e9272304ee0e61ff9a7e6f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 3 12:46:10 2017 +0100

    lib: Report the error from __gem_create()
    
    We have two style of ioctl wrappers. The principle interface does error
    checking on behalf of the caller (to avoid having lots of repetitious
    code in each test), and for the few cases where the error is important
    for the test, we also expose a double underscore version. Fix up
    __gem_create() to follow this pattern and report the negative error code
    returned by the kernel.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
    Reviewed-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>

commit 08a2f887b26c89cfb1e1b5715a23d561b75e0dab
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Sep 29 13:51:59 2017 +0300

    lib: Reduce dependency on glib
    
    In commit ebd6eb69f57b ("Make igtrc configuration common, with
    configurable suspend/resume delay") .igtrc handling was moved to
    igt_core from igt_chamelium. That made everything in IGT depend on
    GLIB by accident.
    
    In short, igt_core.h declared a variable of type GKeyFile*, requiring
    glib.h. Everything that tried to #include igt_core.h required glib.h
    to be available, by use of GLIB_CFLAGS. This "worked" so far because
    CAIRO_CFLAGS contained GLIB_CFLAGS.
    
    As the variable is only used by other stuff in lib/, stuff it in its
    own header file to leave igt_core.h without a dependency to glib.h.
    
    Also add a couple of missing #ifdef HAVE_GLIBs around.
    
    Reported-by: Felipe De Jesus Ruiz Garcia <felipe.de.jesus.ruiz.garcia@intel.com>
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 0c7e50650d0c9fa1e04b1140e065ae2cf800bd1f
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Sep 29 13:51:58 2017 +0300

    gem_exec_schedule: Add missing #include
    
    gem_exec_schedule used sigaction() without #include <signal.h>
    
    CC: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0b5d63dffce4178d64d0e9744acb346f83b90302
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Sep 29 13:51:57 2017 +0300

    kms_atomic_interruptible: Add missing #include
    
    kms_atomic_interruptible used signal() without #include <signal.h>
    
    CC: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 1e3db6500dd5c5aa2cc8cb03501b50ef17d06564
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Sep 27 18:17:53 2017 +0200

    lib/igt_kms: Commit primary plane when a modeset is forced on a pipe
    
    In between tests, some tests can do the following sequence:
    
    (pipe C configured with FB)
    igt_plane_set_fb(primary (pipe C), NULL);
    /* Clear rotation property first */
    igt_display_commit2(display, COMMIT_UNIVERSAL);
    
    /* disable pipe */
    igt_display_commit2(display, COMMIT_LEGACY);
    
    This would result in PIPE_C not being properly disabled, which
    will cause an error on the next mode. This can be seen when running
    the full kms_rotation_crc testcase without --subtest, it will fail
    on exhaust-fences because the bad-tiling subtest wasn't able to
    disable pipe C correctly.
    
    Testcase: kms_rotation_crc
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 76c7a71a13fd21fbf58ec2903c25acc980b7ddaf
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Sep 27 12:25:37 2017 +0200

    lib/igt_kms: Change output->pending_crtc_idx_mask to output->pending_pipe
    
    igt_output_set_pipe with PIPE_ANY used to mean that we bind the output
    to any pipe, but this is now a deprecated alias for PIPE_NONE, and
    means the output will be unbound.
    
    Because of this it's better to change output->pending_crtc_idx_mask to
    an enum pipe, because only a single choice may be given for a pipe.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit b5404f8435f828ca039a2e46be629b3d4c92465b
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Mon Oct 2 13:50:05 2017 +0300

    meson: Follow suit with the renaming of kms_pipe_color
    
    CC: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 1e99f8b8d2563d7f5c4e82932bab15abc5eacaef
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Sep 29 15:59:52 2017 +0300

    meson: Distribute meson build system files
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5b9b6711ad652db485ddda499710d794ee236dea
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Sep 29 15:59:51 2017 +0300

    docs: Distribute audio.txt and chamelium.txt
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 57795030c182321f732e4aa5dca405008096cb79
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Sep 29 15:59:50 2017 +0300

    lib: Handle intel_aub.h like the other stub files
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 571c25387a799e1a5d0af1d44117975e071dbbf6
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Sep 29 15:59:49 2017 +0300

    lib: Remove media_fill.c
    
    media_fill.c has been unused from around 2014 when its contents moved
    to intel_batchbuffer.c.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 74421c080b3a67bb8c3418e8198d315f68f46092
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Sep 29 15:59:48 2017 +0300

    demos: Remove final file
    
    demos/Makefile.am was left behind. Nuke it.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ba1c982e417a1c12c539d463dd59ddb7895c81ca
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Sep 29 15:59:47 2017 +0300

    benchmarks: Add ezbench.d files to dist
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c900febe274fa9d32f1e7fe82fce649cc85dce57
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Sep 29 15:59:46 2017 +0300

    benchmarks: Add wsim files to dist
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7df7e3bda6a206c15044dfd9804eddeee29d981b
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Sep 21 12:53:27 2017 +0200

    tests: Stop looking at plane private members
    
    Most of these tests have no reason to look at those members,
    so try other ways of getting the information.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 5f6806472c2d413dec850e60ef452f5d55cc9912
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Sep 21 08:36:33 2017 +0200

    igt/kms_rotation_crc: Fix flip tests for sprite plane
    
    This test was flipping the primary plane instead of the sprite plane.
    Flip the correct plane to make the test pass properly.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=102691
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>
    Tested-by: Marta Lofstedt <marta.lofstedt@intel.com>
    Acked-by: Marta Lofstedt <marta.lofstedt@intel.com>

commit 7bc1fd8638356f728f200b9377e76f286d964c7e
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Sep 21 10:48:54 2017 +0200

    tests: Rename kms_pipe_color to kms_color
    
    Rename kms_pipe_color to kms_color, and rename the invalid tests to pipe-invalid.
    To prepare for adding support for plane color management.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 09f8cb1a3758fa9868a07b83a3d3db2973d795cc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 29 09:17:43 2017 +0100

    igt/gem_sync: Sync before starting the clock
    
    Hide the initial setup cost of a new batch by performing it before we
    start the clock for measuring the execute-wait latency.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>

commit 182b1941d8e221f1f5625c53f74b09bef7d8837a
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Wed Sep 27 16:47:08 2017 +0300

    benchmarks: Actually build LIBDRM_INTEL_BENCHMARKS
    
    Adding LIBDRM_INTEL_BENCHMARKS into benchmarks_PROGRAMS had a tab
    before the assignment, making the line be inserted into the Makefile
    as is instead of being evaluated by automake.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 8c2676aeaddb45a586d287d91a98728b8c81da20
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Fri Sep 29 12:29:49 2017 +0100

    lib: Fix igt_sysfs_set_u32 return value
    
    Printf family functions return a number of bytes, not tokens,
    printed so the existing check (== 1) was wrong.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cf3e683a3650c18c89a3322c4171e1db94b5b9f8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 28 18:24:26 2017 +0100

    igt/gem_exec_nop: Measure high-priority throughput over a bg load
    
    Measure how many high priority batches we can execute whilst running a
    bg spinner.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>

commit 52657b7311b8d6180b488824fb69e3a4a49dabd2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 28 18:03:55 2017 +0100

    igt/gem_sync: Add a preemption test
    
    Check and measure how well we can submit a second high priority task
    when the engine is already busy with a low priority task and see how
    long it takes to complete (and wake up the client).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>

commit b9c883086e9aaa223d0be3894fd3f07a9734dd60
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 28 11:09:17 2017 +0100

    igt/gem_exec_schedule: Detect too slow setup in deep-*
    
    Using vgem as our cork for building the request queue limits us to 10s
    of setup (or else the fence autoexpires and we start executing too
    early). Add timeouts to the setup loops and SKIP if we cannot establish
    the workload within 10s, the machine and driver is too slow to evaluate
    the expected results.
    
    To avoid the artificial limit of 10s requires lifting the dependency on
    vgem and switching to sw_sync and explicit fencing. Just a matter of
    plumbing!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>

commit 61d11538dd53bd945a34fcdf389d5409aeeddb4f
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Thu Sep 28 18:10:48 2017 +0300

    meson: Also build kms_atomic_interruptible
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cbc1e78dfe101b26c6272eabe6942edea7fed003
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Thu Sep 28 18:10:47 2017 +0300

    meson.sh: Invoke meson correctly
    
    Either source or build directory is required as a command line
    parameter.
    
    Also use mkdir -p when creating the build directory to avoid errors
    when it already exists.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 47ae1f8cfd2d4a826331e270b33440e0bf3a6aa9
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Thu Sep 28 18:00:03 2017 +0300

    tests/gem_workarounds: Skip write only registers
    
    We have no means to check write only registers as
    this would need access through context image. For now we
    know that cnl has a one such register, 0xe5f0 which is used
    to set WaForceContextSaveRestoreNonCoherent:cnl. By inspecting
    the context image without and with workaround applied:
    
    0x0000a840: 0x0000e5f0 0xffff0800
    0x0000a840: 0x0000e5f0 0xffff0820
    
    we can conclude that the workaround setup is working right
    in this particular case.
    
    Add a write only list and add register 0xe5f0 into this list.
    This is a temporary solution until a more capable context image
    checker emerges.
    
    v2: add code comment about adhocness (Petri)
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=102943
    Cc: Oscar Mateo <oscar.mateo@intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Cc: Petri Latvala <petri.latvala@intel.com>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@linux.intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Oscar Mateo <oscar.mateo@intel.com>

commit 3df22e0d2f8934311c62e4fd84bee24b32addb58
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 8 10:46:24 2017 +0100

    benchmarks/gem_exec_fault: Update for tryhard kernels.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Matthew Auld <matthew.auld@intel.com>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 7d512a34469cd0b2f4d6eebdc915bbf0b29730ba
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 18 18:46:53 2017 +0100

    benchmarks/gem_syslatency: Apply vmpressure, measure page allocation
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>

commit 765f7b0a343af32855747a92a33f56cae79444d5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Sep 25 21:45:21 2017 +0100

    igt/gem_exec_scheduler: HAS_SCHEDULER no longer means HAS_PREEMPTION
    
    Michal wants to limit machines that can do preemption, which means that
    we no longer can assume that if we have a scheduler for execbuf, that
    implies we have preemption.
    
    v2: Try a capability mask instead
    v3: Pretty print the caps.
    v4: Not so pretty print the caps.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>

commit e917e926823b801208c4cc1178ea9f7755a7fab1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Sep 12 21:07:03 2017 +0100

    lib: Capture the error state on an unexpected hang
    
    Dump debugfs/i915_error_state to the debug channel if we detect an ERROR
    uevent. This poses a few problems, not least that it is the auxiliary
    process doing the dumping (so the output may be interleaved with the
    test, but considering a hang occurred it is likely the test is blocked)
    and the average error state is around 60k, which may prove unwieldy!
    
    On the other hand, it may prove invaluable in debugging those impossible
    to reproduce bugs.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 2885b10f99b4beeb046e75af8b8488c229f629d3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Sep 25 20:59:54 2017 +0100

    igt/gem_exec_schedule: Ignore set-priority failures on old kernels
    
    When plugging the device, we need to submit batches at highest priority
    so that they cannot be gazumped by the queued requests. On older kernels
    that do not support the user changing context priority, all contexts
    therefore have the same default priority and we can ignore the error.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Michał Winiarski <michal.winiarski@intel.com>

commit 9fe6ea91fd6e4ff3d95dfd4f46c2d3080be6a405
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Mon Sep 25 12:34:02 2017 +0300

    igt_command_line.sh: Fix bashism
    
    [[ a != b ]] is a bashism. As it's just comparing $1 to an empty
    string, use -n with a normal [ ].
    
    /bin/sh is dash in CI.
    
    v2: Also change the script to #!/bin/bash to avoid having to babysit
    bashism later.
    
    Fixes: f0243a761f1b ("tests/igt_command_line.sh: Allow testing individual tests")
    CC: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0a91a5e9624d41d23b79e2540eda111cb56d42d9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Sep 8 17:14:46 2017 +0200

    meson: Simple makefile integration
    
    Run ./meson.sh once, then you have
    
    $ make
    
    and
    
    $ make test
    
    available in the normal src root.
    
    v2:
    
    Add
    
    $ make reconfigure
    
    which is the meson equivalent to rerunning ./configure. Also takes
    some arguments if needed. Start out with --help, as usual.
    
    v3: Use ninja -C (Chris).
    
    v4: Catch more automake targets and point out what's happening
    (Petri).
    
    v5: Use EOF as heredoc marker (Arek)
    
    Cc: Petri Latvala <petri.latvala@intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c117213c06d0f47937c1f225ebead5e1fe8c7a0e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Sep 24 17:14:36 2017 +0100

    igt/gem_exec_whisper: Smoketest context priorities
    
    No complex check of reordered writes, just throwing lots of random
    priority batches with long dependency chains at the scheduler. This
    should help to smoketest preemption.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit bf1c7ee515856fdd01ea1a887d08f8d0af882dc1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 22 10:46:02 2017 +0100

    igt/gem_exec_schedule: Fix up too deep reorder-wide()
    
    Like wide(), reorder-wide() didn't check the ring size before flooding
    and so would exhaust its available space and block (causing a GPU hang
    to recover), thus failing the test. Also, since we use a new context for
    each iteration of the test, the available ring space is reduced (due to
    the overhead in setting up that context via the ring), so make sure that
    when we measure the available ring space we also use a new context.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit da553ff40e2555b9ef7989882e113ae33a7448e5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 22 10:32:44 2017 +0100

    igt/gem_exec_schedule: s/-MAX_PRIO/MIN_PRIO/
    
    Replace instances of -MAX_PRIO with MIN_PRIO for readability.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f16a799807487b6e2dcc8c7940a1a8b424f10802
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Thu Sep 21 15:52:28 2017 +0300

    igt_core: Rework igt_system()
    
    Instead of redirecting output to pipes and forking, redirect after
    forking to avoid having to carefully unredirect before logging
    anything.
    
    igt@tools_test@sysfs_l3_parity had a racy condition where it prints
    the output of intel_l3_parity prepended by [cmd], but that ended up
    being printed again prepended by [cmd] because output was redirected,
    causing outputs to appear multiple times. This patch fixes that.
    
    CC: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>

commit 51d800ffb7dcb84a2c74bd92aac854435c591c30
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Thu Sep 21 15:52:27 2017 +0300

    tools_test: Clean up and fix sysfs_l3_parity
    
    Multiple misunderstandings of the expectations of the test and some
    missed parts of the shell-to-c conversion caused a couple of issues to
    remain.
    
    First, we need to actually disable a subbank before we check that a
    subbank is disabled (invoke the tool with -d).
    
    Second, the original pipe to wc -l was to check that the tool prints
    only one line, not that it prints "at least" a line. Modify the last
    check to verify that an "is disabled" text is _not_ printed.
    
    v2: Add a TODO comment
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=101650
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>

commit 7f97a4aea42e6037c65a12a7832748c0faf17ab7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 14 14:18:07 2017 +0100

    igt/kms_cursor_legacy: Use common spinbatch
    
    Remove the local recursive spinner in favour of igt_spin_t.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit b94a17d13fb5e03bbc7ef50ce88352b37ad06c85
Author: Dhinakaran Pandiyan <dhinakaran.pandiyan@gmail.com>
Date:   Mon Sep 18 18:55:09 2017 -0700

    tests/psr: Don't strcmp CRCs that are not NULL terminated.
    
    Switched to strncmp.
    
    Signed-off-by: Dhinakaran Pandiyan <dhinakaran.pandiyan@gmail.com>
    Reviewed-by: Radhakrishna Sripada <radhakrishna.sripada@intel.com>
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 7c79e2ca1f78d1d2fd95f66fbf98daaf4e56de41
Author: Radhakrishna Sripada <radhakrishna.sripada@intel.com>
Date:   Thu Sep 21 17:21:46 2017 -0700

    igt/kms_psr_sink_crc: Fix the bug in psr_drrs subtest
    
    The substring to be matched is "DRRS Supported: Yes" and not
    "DRRS Support: No". The kernel prints the DRRS status for all active
    CRTC's. Matching for No support gives a false positive when multiple
    CRTC's are active.
    
    Fixes: 33355210a43e (igt/kms_psr_sink_crc: Add psr_drrs subtest)
    Cc: C. Ramalingam <ramalingam.c@intel.com>
    Cc: Lohith BS <lohith.bs@intel.com>
    Cc: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Cc: Dhinakaran Pandiyan <dhinakaran.pandiyan@intel.com>
    Signed-off-by: Radhakrishna Sripada <radhakrishna.sripada@intel.com>
    Reviewed-by: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 435fea5017d7a655ddb13f7897bfd628c9a5e6fb
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Sep 21 15:42:15 2017 +0300

    tests/kms_panel_fitting: Use igt_cairo_image_surface_create_from_png_file()
    
    Switch to using igt_cairo_image_surface_create_from_png_file() over the
    raw cairo version so that the test can actually find the image file
    no matter where we run it from.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 75f320c5bda480f4ea1501577247d6a807ed3bff
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Sep 21 15:39:23 2017 +0300

    lib/igt_fb: Add igt_cairo_image_surface_create_from_png()
    
    Raw usage of cairo_image_surface_create_from_png() doesn't work
    since it doesn't know about IGT_DATADIR and IGT_SRCDIR. Let's extract
    the helper from igt_paint_image() that uses igt_fopen_data() +
    cairo_image_surface_create_from_png_stream() and call it
    igt_cairo_image_surface_create_from_png().
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 3a01e58858e6068f75356e798fd90c80cccb37d6
Author: Vinay Belgaumkar <vinay.belgaumkar@intel.com>
Date:   Thu Sep 14 11:09:58 2017 -0700

    tests/gem_flink_basic: Add documentation for subtests
    
    Added the missing IGT_TEST_DESCRIPTION and some subtest
    descriptions.
    
    v2: Removed duplication, addressed comments, cc'd test author
    
    v3: Only comment abstract code, change some igt_info to igt_debug.
        Changed description to reflect this is a patch, not an RFC.
    
    Cc: Michał Winiarski <michal.winiarski@intel.com>
    Cc: Eric Anholt <eric@anholt.net>
    Cc: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Cc: Daniel Vetter <daniel.vetter@intel.com>
    
    Signed-off-by: Vinay Belgaumkar <vinay.belgaumkar@intel.com>
    Reviewed-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>

commit 4323d1bab091c2202ab1bd6786b178c23977112c
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Aug 25 13:13:52 2017 +0300

    intel-ci: Install testlist files to pkgdata dir
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Cc: Tomi Sarvela <tomi.p.sarvela@intel.com>
    Cc: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Tested-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 23b7c99c8f6b2da9f624d4f0c40fe1355d5a2dcc
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Aug 25 13:13:51 2017 +0300

    tests/Makefile.am: Install test-list*.txt to libexecdir
    
    Piglit expects test-list*.txt files to be in the same directory as the
    test binaries. Installing non-executable files to libexecdir requires
    going around some of autotools' sanity checks.
    
    This change should make 'make install':ed IGT runnable with piglit.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Cc: Tomi Sarvela <tomi.p.sarvela@intel.com>
    Cc: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Tested-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 74778b83f602f811512269ecf8ddfc08fcfdd4f0
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Thu Sep 21 14:49:00 2017 -0700

    i915_pciids: Change a KBL pci id to GT2 from GT1.5
    
    In sync with 41693fd52373 ("drm/i915/kbl: Change a KBL pci id
    to GT2 from GT1.5")
    
    "See Mesa commit 9c588ff"
    
    v2: s/DT/Mobile
    
    Cc: Anuj Phogat <anuj.phogat@gmail.com>
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Reviewed-by: Anuj Phogat <anuj.phogat@gmail.com>

commit 7c2650a1ec9a2e9c036169a2acda584a692a7050
Author: Kenneth Graunke <kenneth@whitecape.org>
Date:   Thu Sep 21 14:57:24 2017 -0700

    intel_aubdump: Support I915_EXEC_BATCH_FIRST.
    
    The batch is now on the other end of the list.
    
    Fixes issues where modern Mesa and modern kernels together start putting
    the batch at the front of the list, and intel_aubdump looks for it at
    the end of the list, causing it to interpret some other buffer as the
    batch.  Then AubLoad or aubinator see bogus data like 1.0 float as a
    GPU command and get grumpy.

commit f86dc17cfc81f53f3bf216009ffda1ac05208bcc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 7 15:24:23 2017 +0100

    igt/prime_vgem: Split out the fine-grain coherency check
    
    We don't expect every machine to be able to pass the WC/GTT coherency
    check, see
    
    kernel commit 3b5724d702ef24ee41ca008a1fab1cf94f3d31b5
    Author: Chris Wilson <chris@chris-wilson.co.uk>
    Date:   Thu Aug 18 17:16:49 2016 +0100
    
        drm/i915: Wait for writes through the GTT to land before reading back
    
        If we quickly switch from writing through the GTT to a read of the
        physical page directly with the CPU (e.g. performing relocations through
        the GTT and then running the command parser), we can observe that the
        writes are not visible to the CPU. It is not a coherency problem, as
        extensive investigations with clflush have demonstrated, but a mere
        timing issue - we have to wait for the GTT to complete it's write before
        we start our read from the CPU.
    
        The issue can be illustrated in userspace with:
    
                gtt = gem_mmap__gtt(fd, handle, 0, OBJECT_SIZE, PROT_READ | PROT_WRITE);
                cpu = gem_mmap__cpu(fd, handle, 0, OBJECT_SIZE, PROT_READ | PROT_WRITE);
                gem_set_domain(fd, handle, I915_GEM_DOMAIN_GTT, I915_GEM_DOMAIN_GTT);
    
                for (i = 0; i < OBJECT_SIZE / 64; i++) {
                        int x = 16*i + (i%16);
                        gtt[x] = i;
                        clflush(&cpu[x], sizeof(cpu[x]));
                        assert(cpu[x] == i);
                }
    
        Experimenting with that shows that this behaviour is indeed limited to
        recent Atom-class hardware.
    
    so split out the interleave coherency check from the basic
    interopability check.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=102577
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Michał Winiarski <michal.winiarski@intel.com>

commit 6e2622564dc85875ee9e2f22874f9607cf0cdd9c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Sep 8 17:14:48 2017 +0200

    meson: share the configuration_data object
    
    Suggested by Jani. And rename from config_h to plain config, to make
    it's multi-use character a bit more obvious.
    
    Cc: Jani Nikula <jani.nikula@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit fd5aa6aac2dba154689c5350280d4cba9284eee5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Sep 8 17:14:47 2017 +0200

    meson: align test-list.txt generation with automake
    
    - I forgot the chamelium tests
    - Order tests the same way in both build systems. Since testdisplay is
      special, it's easier to put that at the end in meson, so adjusted
      automake to suit.
    
    With this you can diff the 2 test lists and end up with 0 differences,
    which will be useful to CI meson vs. automake.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 1043c09ccbcba8e5c2ec5f2a358a442346348bd8
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Sep 19 13:31:13 2017 +0200

    tests/kms_cursor_legacy: Do not start collecting CRC after making FB busy
    
    Collecting CRC may force a modeset, which is a bad idea after we just
    forced a hang. The hang is intended to make sure the page flip doesn't
    complete before the cursor, making sure that works.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=102259
    Cc: Marta Lofstedt <marta.lofstedt@intel.com>
    Tested-by: Marta Lofstedt <marta.lofstedt@intel.com>
    Reviewed-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    [mlankhorst: Prevent overflow when collecting crcs, based on Villes feedback]

commit da197b5f3cb516aaaea72d0d60b0f5c1c81081dd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 15 17:05:43 2017 +0100

    igt/gem_eio: Add another variant of in-flight to avoid request coalescing
    
    Break up request coalescing by submitting a queue of requests from
    different contexts. This makes sure that we mark all ready but not yet
    submitted-to-hw requests as completed/EIO upon wedging.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Michał Winiarski <michal.winiarski@intel.com>
    Reviewed-by: Michał Winiarski <michal.winiarski@intel.com>

commit c647760f88040d591f369228fbd57dac65110b6a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Sep 13 12:41:08 2017 +0100

    igt/prime_busy: Declare the hang tests expect to cause GPU hangs
    
    Pull the two subtests together into the same subtest group as the
    fixtures were repeated for both and so we can consolidate down to one.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Mika Kuoppala <mika.kuoppala@linux.intel.com>
    Reviewed-by: Mika Kuoppala <mika.kuoppala@linux.intel.com>

commit 4b0e0bf4df7c95c34dc08b17445bb80f23060ccc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Sep 11 16:41:13 2017 +0100

    igt/gem_eio: Check wedged with inflight on the same engine
    
    Some overlap with gem_exec_fence, but confirm that light for waiting on
    a fence (both native and external), that a request queued is also
    flagged as EIO upon wedging.
    
    v2: check all ABI engines
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Michał Winiarski <michal.winiarski@intel.com>

commit 639d640a1e7340690a55515ac4e47a9328137dea
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 8 13:45:21 2017 +0100

    igt/gem_eio: Exercise wedged with native in-flight requests
    
    If we wedged one engine with unready requests to a second engine
    (blocked by waiting on requests from the first, using a dma-fence),
    check that we propagate the -EIO to those in-flight requests.
    
    v2: check all ABI engines
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Michał Winiarski <michal.winiarski@intel.com>

commit 92e457d0ffe930369d09bc83d3d3ed90c9bd6cb1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 8 11:33:15 2017 +0100

    igt/gem_eio: inflight wedged requires long plugging
    
    As our hangcheck may exceed 10s to declare the device wedged, we need to
    hold the plugging fence indefinitely. This makes using vgem as our input
    fence unusable, so resort to using sw_sync. At the same time, we can
    then check that the async result is also -EIO.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=102616
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Michał Winiarski <michal.winiarski@intel.com>

commit 6dceb6f2b28c591a1b004d11173bbea91ef4471c
Author: Radhakrishna Sripada <radhakrishna.sripada@intel.com>
Date:   Fri Sep 15 17:00:08 2017 -0700

    igt/kms_psr_sink_crc: Add psr_drrs subtest
    
    Platforms do not support psr and drrs simultaneously.
    Adding a subtest to make the check.
    
    Cc: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Radhakrishna Sripada <radhakrishna.sripada@intel.com>

commit 2e93946e4e15cb8e7e978334cb62677f9ead82fe
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Sep 15 16:54:44 2017 +0300

    meson: Fix IGT_GIT_SHA1 handling
    
    Tell meson about the dependency on version.h. Avoids the compiler
    falling over on account of IGT_GIT_SHA1 not being there.
    
    Reviewed-by: Jordan Justen <jordan.l.justen@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit e418dbba0c34233e56246ffd2152e174c7481e03
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Sep 15 16:33:00 2017 +0300

    meson: Install the (dis)assembler
    
    Install the assembler and disassemebler binaries, and the accompanying
    pkg-config file. Change libbrw into a static library since we don't want
    to install that.
    
    Reviewed-by: Jordan Justen <jordan.l.justen@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 93f72b23156589964b87bb9ca7c94c104976303c
Author: Jordan Justen <jordan.l.justen@intel.com>
Date:   Wed Sep 13 18:10:59 2017 -0700

    meson: Process intel_aubdump.in into intel_aubdump
    
    Signed-off-by: Jordan Justen <jordan.l.justen@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit c8d6c73d455a8b47cadc0ac13fb3fc90c1f0900c
Author: Jordan Justen <jordan.l.justen@intel.com>
Date:   Wed Sep 13 18:10:58 2017 -0700

    intel_aubdump.in: Set executable permissions (for meson build)
    
    Meson detects if an input file is executable, and copies that to the
    output file.
    
    Signed-off-by: Jordan Justen <jordan.l.justen@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 83f24709162452db5ab4f18130b3cd9dafd78afe
Author: Jordan Justen <jordan.l.justen@intel.com>
Date:   Wed Sep 13 18:10:56 2017 -0700

    meson: Install libigt.so
    
    Signed-off-by: Jordan Justen <jordan.l.justen@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit c17e8d5eba5fb21e25cd2ad01cb3e8bc1a1611ab
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Sep 11 19:37:57 2017 +0300

    meson: Install intel_gpu_abrt
    
    Reviewed-by: Jordan Justen <jordan.l.justen@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 1b52044eb74b74be15fb7d643c5fc76cfe200c21
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Sep 11 19:28:51 2017 +0300

    meson: Rename and install intel-gpu-overlay
    
    Autotools called the binary 'intel-gpu-overlay', let's have meson use
    that name as well. Also install it.
    
    Reviewed-by: Jordan Justen <jordan.l.justen@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 2d25aa8fcbc5bbbf5b658515e9fb41647382c5b3
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Sep 11 19:26:15 2017 +0300

    meson: Drop the 'lib' prefix from intel_aubdump.so
    
    Autotools didn't add the 'lib' prefix to the intel_aubdump.so filename.
    Coerce meson to match that.
    
    Reviewed-by: Jordan Justen <jordan.l.justen@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit a537356e83c20bf57b08362edc921a1cc31f00f8
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Sep 11 19:17:22 2017 +0300

    meson: Build and install intel_dp_compliance
    
    v2: Fix spaces vs. tabs (Jordan)
    
    Reviewed-by: Jordan Justen <jordan.l.justen@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit bfa8a8ea006681a96a72f5d7611884b835310656
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Sep 11 19:00:35 2017 +0300

    meson: Build and install intel_l3_parity
    
    v2: Fix spaces vs. tabs (Jordan)
    
    Reviewed-by: Jordan Justen <jordan.l.justen@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 6a94b7130ae8a1e12ad161dcb9b79a05dbc45968
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Sep 11 18:54:04 2017 +0300

    meson: Install test image files
    
    Reviewed-by: Jordan Justen <jordan.l.justen@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 28dd0798fa7508076a9da56d7d84a21e789315eb
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Sep 11 18:53:51 2017 +0300

    meson: Install test-list.txt
    
    Reviewed-by: Jordan Justen <jordan.l.justen@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit e63b121c7a28d1d50f9b2d0d2dac27a7d339fa36
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Sep 11 19:04:04 2017 +0300

    meson: Install intel_reg register definitions
    
    FIXME: install_subdir exclude_files knob seems to require meson 0.42+.
    Is that acceptable?
    
    v2: Fix spaces vs. tabs (Jordan)
    
    Reviewed-by: Jordan Justen <jordan.l.justen@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit cfbdcc7352b60dae0393403790bb66358cf328d5
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Sep 11 18:19:03 2017 +0300

    meson: Build and install intel_reg
    
    v2: Fix spaces vs. tabs (Jordan)
    
    Reviewed-by: Jordan Justen <jordan.l.justen@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 7c7a0151b0225391d7e2a60dce8606972614697c
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Sep 11 18:13:55 2017 +0300

    tools/intel_reg: s/PKGDATADIR/IGT_DATADIR/
    
    We use IGT_DATADIR to refer to $pkgdatadir elsewhere, so let's have
    intel_reg follow suit.
    
    Reviewed-by: Jordan Justen <jordan.l.justen@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 509ec0cd71b286177bf5a650a160404de48f82aa
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Sep 11 18:30:46 2017 +0300

    meson: Install tools
    
    Reviewed-by: Jordan Justen <jordan.l.justen@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit fba59da1339162f84e64016dedec22e639800627
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Sep 11 19:00:01 2017 +0300

    meson: Install tests into $libexecdir
    
    autotools installs the tests into $libexecdir. Make meson do the same.
    
    v2: Fix tabs vs. spaces (Jordan)
    
    Reviewed-by: Jordan Justen <jordan.l.justen@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit c718ba805208e55d675defe9b2a66852e2ae038c
Author: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
Date:   Tue Sep 12 18:44:10 2017 +0300

    lib/igt_kmod: Allow specifying libkmod config via environment variables
    
    Allow specifying the kernel module configuration via environment
    variables. This allows enumerating the subtests of the kselftest
    wrappers from sysroot directory.
    
    IGT_KMOD_CONFIG_PATHS="" \
    IGT_KMOD_DIRNAME="/path/to/sysroot/lib/modules/X.Y.Z" \
            tests/drm_mm --list-subtests
    
    Signed-off-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Petri Latvala <petri.latvala@intel.com>
    Cc: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b6ea8b204c8a18af7098326522e8acaffb19dd7a
Author: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
Date:   Thu Sep 7 09:39:40 2017 +0300

    tests/tools_test: Make sure l3_parity is supported
    
    v3: Don't pipe the output of intel_l3_parity, parse it's output
        directly. (Petri)
    
    v2: Check support before executing test.
        Skip test only if intel_l3_parity tool tells us to skip. (Petri)
    
    bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=101650
    Cc: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>
    Signed-off-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>

commit c7e116007e907f32c18cc2669e2dc4046553c8e6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Sep 11 13:23:27 2017 +0100

    igt/sw_sync: Fix up close(timeline) tests for unsignaled fences
    
    Following
    
    kernel commit ea4d5a270b57fa8d4871f372ca9b97b7697fdfda
    Author: Dominik Behr <dbehr@chromium.org>
    Date:   Thu Sep 7 16:02:46 2017 -0300
    
        dma-buf/sw_sync: force signal all unsignaled fences on dying timeline
    
        To avoid hanging userspace components that might have been waiting on the
        active fences of the destroyed timeline we need to signal with error all
        remaining fences on such timeline.
    
        This restore the default behaviour of the Android sw_sync framework, which
        Android still relies on. It was broken on the dma fence conversion a few
        years ago and never fixed.
    
    unsignaled fences are now signaled and flagged with ENOENT when the
    timeline is closed. Fixup timeline_closed_signaled to match.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=102650
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Michał Winiarski <michal.winiarski@intel.com>

commit af4158671c030c9e7f3fbe9e7e2032d145f86d4d
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Mon Sep 11 18:14:57 2017 +0100

    kms_rotation_crc: 90 degree flip test is not a stress test
    
    To the best of my recollection the page flipping test was added
    simply to start exercising page flips with 90/270 rotation.
    
    There is no need to do 60 flips which can take quite some time,
    because we do 60 flips against each pipe and each fb geometry.
    
    Also, calling this a stress test is also not matching the
    original idea of the test.
    
    v2:
    
    Several changes:
    
    1. Remove the stress from the name and reduce the number of
    flips to one only.
    
    2. Move the page flip before CRC collection for a more useful
    test.
    
    3. Add more flipping tests, for different rotation and sprite
    planes.
    
    4. Convert to table driven subtest generation.
    
    v3: Remove extended.testlist from the patch.
    
    v4:
    
    Collect a flip fb crc and check it after flip. This way we test
    not only the flip succeeded but the right image is displayed.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Katarzyna Dec <katarzyna.dec@intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk> (v3)
    Reviewed-by: Katarzyna Dec <katarzyna.dec@intel.com>

commit bbc0b3cd92d9ba8bc9053e4546fbc5152a200d34
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Aug 2 11:57:32 2017 +0200

    tests: Add kms_atomic_interruptible test, v4.
    
    This tests the various parts of atomic that I want to make
    interruptible. Running with --debug shows the stats from
    __igt_sigiter_continue, which can be used to make sure that
    we don't fall over.
    
    The default igt kms helpers use drmIoctl, which is not intercepted
    by igt_while_interruptible. Only igt_ioctl is. This means we have
    to call the ioctls manually here.
    
    Changes since v1:
    - Implement interruptible DPMS checking too.
    - Use igt_ioctl + igt_while_interruptible, instead of the signal helper
      shotgun.
    Changes since v2:
    - Bump whitespace to get rid of the weird double } at same indent.
    - Use more newlines in the call to the atomic ioctl.
    Changes since v3:
    - Fix copyright on year. (Adrinael)
    - Use do_ioctl instead of do_or_die(igt_ioctl) (ickle).
    - Add test description. (Adrinael)
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Cc: Daniel Stone <daniels@collabora.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch> #v1
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>
    [mlankhorst: Document sleep values (Adrinael)]

commit 1c6e20deb30e4fc059183f1cf3f832b500b89464
Author: Katarzyna Dec <katarzyna.dec@intel.com>
Date:   Thu Sep 7 14:15:14 2017 +0200

    pm_rps: [RFC] RPS tests documentation update
    
    Added comments in tricky places for better feature understanding.
    Added IGT_TEST_DESCRIPTION and short description for non-obvious
    subtests.
    Changed name of 'magic' checkit() function to something meaningfull.
    Changed junk struct and stuff array names.
    Made some minor coding style changes.
    
    Cc: Vinay Belgaumkar <vinay.belgaumkar@intel.com>
    Cc: Petri Latvala <petri.latvala@intel.com>
    Cc: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Vinay Belgaumkar <vinay.belgaumkar@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Signed-off: Katarzyna Dec <katarzyna.dec@intel.com>

commit f9e0154630766b63617c64255a68e5129e233a4b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 15 11:27:46 2017 +0100

    igt/gem_evict_(alignment,everything): Limit to low 4G
    
    These tests do not tell the kernel they can use the upper 48bits of
    aperture space, and cause eviction on the low 4G just as effectively
    exercising the evict code.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 4f082c35d2df545f81d202ae1a08463f6c123552
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 8 13:48:05 2017 +0100

    igt/gem_eio: Install an exithandler to unwedge the device after failure
    
    Under normal conditions, we try to repair the damage we inflict to the
    GPU, but if we fail we don't. Make sure that if the test does die, we do
    try to restore normal operation by using an atexit handler.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=102616
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 20631542ebb3f32c9d00ba0c251e08e54a73f1fd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Aug 30 10:58:07 2017 +0100

    igt/gem_flink_race: Limit name subtest to 5s
    
    At present, we try to do 1,000,000 cycles, which may be a reasonable
    estimate for detecting the race, takes 6 minutes in practice on bxt on a
    good day (as it spends more time doing rpm suspend/resume than actual work,
    and that accounts for more of the relative difference in performance
    between bxt and big core than the difference in clocks+ipc).
    
    An ideal solution would be to have a data-race detector in the kernel
    combined with a short test to exercise the different paths. Lacking the
    DRD, use a shorter test anyway. 5s is chosen simply on the basis that
    the other race subtest is also run over a 5s interval.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>

commit 8ec924498d32f51ab303a8ec9dae339919a5931c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 7 19:26:54 2017 +0100

    igt/tools_test: Remove dmesg subtest
    
    It's a silly test. If fails if there is an *ERROR* in the dmesg ringbuf,
    so it neither is testing that errors are generated as expected, and as a
    pre-check it can only see what's at the end of the dmesg and may miss
    earlier faults. As a test it just randomly fails; worse than useless.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Reviewed-by: Martin Peres <martin.peres@linux.intel.com>

commit 866970a57a9def534f4b4671b59670fb70f54141
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 5 14:36:24 2017 +0200

    meson: Bump required version to 0.40
    
    link_whole needs that, and we need that. Reported by Chris Wilson.
    
    Acked-by: Jani Nikula <jani.nikula@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 2e0b57dcd49f0b7a5ab2cd4818ee72513430c9c5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 5 14:36:23 2017 +0200

    meson: Minimal README update
    
    Acked-by: Jani Nikula <jani.nikula@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 111c5857f1b349440f42fb1ce69e525ad72a727f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 5 14:36:22 2017 +0200

    meson: igt_frame also needs pixman
    
    Oversight I noticed because I have the deps for chamelium on the other
    machine already.
    
    Acked-by: Jani Nikula <jani.nikula@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 895236c6ead83ed537d762394c9930b1e82d8dde
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 5 14:36:21 2017 +0200

    meson: add manpage support
    
    It seems like meson doesn't want you to string together targets
    like make does, but wants it all in one step. So another little
    shell script it is.
    
    Acked-by: Jani Nikula <jani.nikula@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c4614fedd97e0aea3095fac6d66eb977d35f7e42
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 5 14:36:20 2017 +0200

    meson: detect cc flags
    
    Somehow my gcc has a different idea of what no-implicit-fallthrough
    should look like than the one Eric used.
    
    Acked-by: Jani Nikula <jani.nikula@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 678f1d60e98cb76d2e59b3a6e31f26e353453a63
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Sep 5 14:36:19 2017 +0200

    meson: Use static libs to handle IGT_LOG_DOMAIN.
    
    It means that compiler errors in the .c files take you to the source
    place in your editor, not a preprocessed temporary.
    
    v2: Add the library deps, fails linking otherwise.
    
    Signed-off-by: Eric Anholt <eric@anholt.net> (v1)
    Acked-by: Jani Nikula <jani.nikula@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 21088b301387bf3239fc8799176e2a51c392ebe8
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Sep 5 14:36:18 2017 +0200

    meson: Don't build the igt audio test without gsl available.
    
    Signed-off-by: Eric Anholt <eric@anholt.net>
    Acked-by: Jani Nikula <jani.nikula@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cae05d92f74d46db4cfc19d918a8ad87d19f5dc2
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Sep 5 14:36:17 2017 +0200

    meson: Add some compiler flags to reduce warnings.
    
    These warnings are apparently new compared to the autotools build.  We
    can fix the things they complain about later, if we want.
    
    Signed-off-by: Eric Anholt <eric@anholt.net>
    Acked-by: Jani Nikula <jani.nikula@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 92709f0015147daff31a1ad180c72ed81bcdac7f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 5 14:36:16 2017 +0200

    tests/kms_plane: Appease gcc -Wempty-body
    
    Not exactly sure what's the point, but oh well.
    
    Acked-by: Jani Nikula <jani.nikula@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 94d56aa5e1bd12fd462cb65537b826bc0d0c4c66
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 5 14:36:15 2017 +0200

    lib/ioctl_wrappers: make the valgrind wrapper always emit a statement:w
    
    gcc complains otherwise about empty ; statements ...
    
    Acked-by: Jani Nikula <jani.nikula@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9a7d8509efe4ac509b082cbffa24e52a7697926c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 5 14:36:14 2017 +0200

    meson: basic build system support
    
    Why?
    
    Because it's fast.
    
    Like really, really fast.
    
    Some data (from a snb laptop, so rather lower-powered):
    
    - Incremental build after $ touch lib/igt_core.c with meson: 0.6s
      It notices that the symbol list of the libigt.so hasn't changed and
      doesn't bother re-linking the almost 300 binaries we have. make -j 6
      for the same scenario takes 44s.
    
    - Incremental build with nothing changed: make: 0.7s, meson: 0.2s This
      means stuff like --disable-git-hash is entirely pointless with
      meson, it's faster than a make ever can be (with 0.6s).
    
    - Reconfigure stage: ninja reconfigure 0.8s vs. ./configure 8.6s)
    
    - Running tests, after a full build: ninja test 6s vs. make check 24s
    
    - Full build (i.e. including ./autogen.sh respectively meson build),
      including tests, from a pristine git checkout. automake 2m49s vs.
      meson 44s.
    
    Cc: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Cc: Eric Anholt <eric@anholt.net>
    Cc: Daniel Stone <daniel@fooishbar.org>
    Acked-by: Jani Nikula <jani.nikula@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit c3863e1998a5d46492b4ec91dd411e2d561e1472
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 5 14:36:13 2017 +0200

    assembler/test: Prep work for meson
    
    Again we want to be able to run each testcase individually.
    
    Also, we need to make sure the target directory for the temp files
    exists - meson always builds with a build-dir outside of the source
    tree.
    
    Acked-by: Jani Nikula <jani.nikula@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 30db6471fc9878abdaf1bd88d4afffd1eb116dcd
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 5 18:45:42 2017 +0200

    demos: remove
    
    The igt testcase themselves contain plenty of demos, libdrm
    also contains a bunch of demos, this here just bitrots.
    
    So let's remove it.
    
    v2: Rebase.
    
    v3: Also delete demos/Makefile from configure.ac. This broke clean
    builds starting with autogen.sh.
    
    Acked-by: Jani Nikula <jani.nikula@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 842faf06932821af7bcc91ac2b6329f1d20603df
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 5 14:36:11 2017 +0200

    lib/uwildmat: Use include paths
    
    meson runs gcc from where meson.build that includes those files is,
    which means we need to add the directory ourselves.
    
    For automake it doesn't matter, so let's just do it for simplicity.
    
    Acked-by: Jani Nikula <jani.nikula@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit f0243a761f1bdea7ea314eff3c73a3a82fbb6e61
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 6 10:02:52 2017 +0200

    tests/igt_command_line.sh: Allow testing individual tests
    
    meso will use this to run the tests for all testcases in parallel, for
    great speedup!
    
    v2: Fix bugs in the conversion. Oops, I broke the automake build.
    
    v3: Try harder at being posix shell compliant.
    
    Acked-by: Jani Nikula <jani.nikula@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8c1fcc61033ebedb3bb33a969b124dd8e2eedc22
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Sep 8 11:23:15 2017 +0200

    lib: clean up header includes
    
    Just a bit of OCD, I like it when connections within library modules
    are a bit more obvious. igt.h is ok for tests, but let's use individual
    include lines for libraries consistently.
    
    Also order standard includes before igt ones.
    
    v2: Rebase.
    
    Acked-by: Jani Nikula <jani.nikula@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a3a3e0fce5f39207fb16c1de0ff2258981d25bab
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 5 14:36:08 2017 +0200

    lib: prefix frame_dump_path
    
    Just a bit of ocd for anything non-static.
    
    Acked-by: Jani Nikula <jani.nikula@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 16ea5eec38c062429dd847a679fc1e6db007d7f8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 5 14:36:06 2017 +0200

    build: remove _GNU_SOURCE from source files
    
    We are, the build system takes care of that.
    
    Reviewed-by: Eric Anholt <eric@anholt.net>
    Acked-by: Jani Nikula <jani.nikula@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 00215dd5b78cfe05838b8e39e092480f80ed6deb
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 5 14:36:05 2017 +0200

    build: use HAVE_LIBGEN_H consistently
    
    Also, we are _GNU_SOURCE, so simplify the conditions accordingly.
    
    The next patch will remove _GNU_SOURCE everywhere else.
    
    Reviewed-by: Eric Anholt <eric@anholt.net>
    Acked-by: Jani Nikula <jani.nikula@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b36f978b243b21166a58929ff4c3c66bba7ed8dd
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 5 14:36:04 2017 +0200

    build: Nuke #ifdef HAVE_CONFIG_H cargo-cult
    
    We have it. Daniel Stone said the #ifdef HAVE_CONFIG_H comes from the
    X11 transition to the modular build, where in the imake -> modular
    build transition config.h wasn't universally available. Now we just
    make this a requirement (so yeah Android better generate one too).
    
    v2: Improve commit message a bit.
    
    Reviewed-by: Eric Anholt <eric@anholt.net>
    Acked-by: Jani Nikula <jani.nikula@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 692357e240c6cbcd9bef62554c8b09bd2f5ed839
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 5 18:19:45 2017 +0200

    build: Define _GNU_SOURCE in Makefile.am
    
    In meson I want to just set this everywhere (no reason not to), and
    doing so will allow us to clean up a few things.
    
    But that means autofoo needs to follow suit.
    
    v2: Rebase.
    
    Reviewed-by: Eric Anholt <eric@anholt.net>
    Acked-by: Jani Nikula <jani.nikula@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 80447fec4ac419efe1e51ebcccc00bebcc5f9874
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Sep 7 15:35:27 2017 +0300

    tests/kms_properties: Require atomic for the atomic invalid props test
    
    The invalid props test forgot to check for atomic. Add the required
    check.
    
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit d98698cd697cd6d712c501a32855c63bb8e07a09
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Sep 7 18:10:26 2017 +0300

    tests/kms_draw_crc: Skip mmap_wc tests if the platforms doesn't support mmap_wc
    
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 5426dc0a889a859db93cd5283cabd9ea6df9d5ec
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Sep 7 19:00:55 2017 +0300

    lib/kms: Skip rather than fail when a suitable plane can't be found
    
    If the system doesn't have the plane the test wants, let's skip the
    test rather than fail it.
    
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 8114d960b0658ee65b5ae28edda3e35db91c47c2
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Sep 7 18:25:55 2017 +0300

    lib/kms: Fix the connector name strings to match what the kernel uses
    
    We depend on kmstest_connector_type_str() matching the kernel.
    Fix up the cases where we differ currently. Also add the missing
    DPI "connector" type.
    
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit cf9916c1cc21828ba846e5e23600a9f2ab51d5ee
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Sep 7 16:02:44 2017 +0300

    Fix compiler warnings about printf() arguments
    
    gem_spin_batch.c:51:13: warning: format ‘%d’ expects argument of type ‘int’, but argument 4 has type ‘long unsigned int’ [-Wformat=]
    intel_opregion_decode.c:313:9: warning: format ‘%lx’ expects argument of type ‘long unsigned int’, but argument 2 has type ‘uint64_t {aka const long long unsigned int}’ [-Wformat=]
    
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit d18fca7f6cf37a05f759135d6b872ff31113532c
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Sep 6 15:41:08 2017 +0300

    lib/sysfs: Fix fbcon rebind
    
    "echo 1 > vtconN/bind" doesn't actually do anything. Looks like the only
    way to rebind fbcon is to unbind the current console.
    
    I suppose the failure to rebind might be a kernel bug, but I can't be
    bothered to decode the vt.c spaghetti so let's just try to handle this
    in igt. For simplicity let's assume the currently bound console is the
    dummy console and unbind that when we want to rebind fbcon. That works
    for me.
    
    With rebinding not working we can't really tell wich console is going
    to get bound anyway, so there's no way to make this code really robust,
    assuming we ever had more than these two console drivers involved.
    
    Additionally Daniel Vetter pointed out:
    "We select the dummy con in i915, to be able to kick out vgacon before we                                               register fbdev. So should always be there."
    
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit d5de89eb17938484718be1144f5957f05ab44dc2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 7 20:55:58 2017 +0100

    lib/dummyload: Use -1 for all engines
    
    Random change when it was copied broke the interface I am using,
    so bring it back into line with all the other stanzas to generate
    engine[].
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e49c3feda5e379fbba58731b74beccb8f77a9b88
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 21 18:07:53 2017 +0100

    igt/gem_exec_suspend: Try to suspend with a pending GPU hang
    
    Ensure that we can suspend the GPU even if it is currently busy in an
    indefinite loop, requiring us to declare the task hung.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Michał Winiarski <michal.winiarski@intel.com>

commit 6b2dddd19aa04fec6fe8384abb0b7caa7e6031c8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jul 25 17:11:16 2017 +0100

    igt/gem_eio: i915.reset is no longer a boolean
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Michał Winiarski <michal.winiarski@intel.com>

commit acec57a34a586e4fa2a5cc0522868bcc803919c7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 3 13:23:34 2017 +0100

    igt/gem_exec_fence: Exercise syncobj API (The forgotten tests)
    
    Due to premature patch pushing, lots of tests remain outstanding.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=102417
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 976ed7c10f9c2f9b153feb57962f0fae2a88a2ee
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 24 12:16:17 2017 +0100

    igt/gem_exec_scheduler: Demonstrate priority inversion between full rings
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a380134e5e553661ffa06e92460465ec9a3de29d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jul 16 16:28:41 2017 +0100

    igt/gem_exec_schedule: Basic tests for preemption
    
    We queue N low priority hanging batches across the engines
    and check that our high priority write over takes them.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Michał Winiarski <michal.winiarski@intel.com>

commit 61f8de7d04e6b69d1cb43770bbef522311ebc3cc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jul 20 10:08:28 2017 +0100

    igt/gem_exec_schedule: Exercise reordering with many priority levels
    
    Apply a little more stress to the scheduler.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Michał Winiarski <michal.winiarski@intel.com>

commit a19ef054c5a2f3ea4aa64f01449bbb015fa88707
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 31 14:15:59 2017 +0100

    igt/gem_exec_schedule: Do not overcommit batches to the ring
    
    Measure the ring_size so we don't overfill it and block until the GPU
    hangs.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4a1c8daff2005e2cbfe980d63bc0a0fb09cb017d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jul 25 15:46:56 2017 +0100

    igt/gem_ringfill: Prime execbuf before measuring ring size
    
    Make sure that our buffers are ready and loaded to reduce the initial
    stall.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Michał Winiarski <michal.winiarski@intel.com>

commit 0d028f8fd07f0a4b46c9e4659eb3caf93a69ac11
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 28 12:55:20 2017 +0100

    igt/gem_userptr_blits: Errors from gup are permanent
    
    After triggering an error (such as trying to use userptr on a GTT
    mmaping), we store the EFAULT on the object permanently. So to test the
    error, we must sacrifice the object and recreate the userptr handle.
    We restrict the error to just one of the overlapping userptr handles to
    check the object independence.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=100596
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Michał Winiarski <michal.winiarski@intel.com>

commit e56ab79711b3fb248bf165d1601acd25a2b7529d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 22 13:47:33 2017 +0100

    igt/pm_rpm: Use libc 'ftw' rather than opencoding our own filetree walk
    
    By using ftw, we avoid the issue of having to handle directory recursion
    ourselves and can focus on the test of checking the reading a
    sysfs/debugfs does not break runtime suspend. In the process, disregard
    errors when opening the individual files as they may fail for other
    reasons.
    
    v2: Bracket the file open/close with the wait_for_suspended() tests.
    Whilst the fd is open, it may be keeping the device awake, e.g.
    i915_forcewake_user.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Tested-by: Jari Tahvanainen <jari.tahvanainen@intel.com>

commit 406bb36aae33f574da522bc4effbf028d5ebca9b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 18 11:40:50 2017 +0100

    lib: Avoid actually throttling from igt_require_gem()
    
    igt_require_gem() checks whether we can use the i915 fd for submitting
    requests by detecting a wedged driver. It was intended to be used just
    after opening DRIVER_INTEL for a gem test to provide an early skip if
    the device was unusable. However, it is also used at the start of
    library functions like igt_spin_batch_new() which may be called after
    the test has setup some state, and importantly submitted some batches.
    igt_require_gem() has the risk of then waiting on those batches, unless
    we tell it to use a clean fd.
    
    v2: Chase the /proc/self/fd/$fd link
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Michał Winiarski <michal.winiarski@intel.com>
    Reviewed-by: Michał Winiarski <michal.winiarski@intel.com>

commit dddbc2ed136f3edf007366c2e81c3f735bd29266
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Sep 6 15:34:13 2017 +0100

    lib: Disable MI_STORE_DATA_IMM for gen3 (i915g and i915gm)
    
    The early gen3 machines inherited the MI block and restrictions from
    gen2, and may only use physical addresses in conjunction with
    MI_STORE_DATA_IMM -- that makes it unusable for us from userspace, where
    we can only use virtual offsets.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 918863f8e3e8f49235fd2e4a36e11f386c06c11c
Author: Eric Anholt <eric@anholt.net>
Date:   Sat Sep 2 21:38:53 2017 -0700

    intel_display_poller: Fix truncation of a test name.
    
    Signed-off-by: Eric Anholt <eric@anholt.net>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit eac4bafcafd7d6c2ad5c1bb3493b6343379174f9
Author: Eric Anholt <eric@anholt.net>
Date:   Sat Sep 2 21:38:52 2017 -0700

    intel_watermark: Fix a warning about "const char" return being silly.
    
    Signed-off-by: Eric Anholt <eric@anholt.net>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7f92d00164330af5816e96ad964daf718d8d78c4
Author: Eric Anholt <eric@anholt.net>
Date:   Sat Sep 2 21:38:51 2017 -0700

    Use PATH_MAX to fix some sprintf-into-short-buffers warnings.
    
    Signed-off-by: Eric Anholt <eric@anholt.net>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 925900e66156e943f2418b1c7702bd16d41e348b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 5 08:39:00 2017 +0200

    Revert "intel-ci: Remove kms_psr_sink_crc@psr_basic from BAT"
    
    This reverts commit effb78b382895c19d0946c217cee3602dcd94c50.
    
    cibuglog is for filtering unstable results, we can't simply opt to not
    test PSR.
    
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 00da3d18dc05dc002302ed7bcfa575e52f1420ce
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue Sep 5 11:38:58 2017 +0100

    igt_core: Skip sync when listing subtests
    
    No need to sync filesystems when only listing subtest.
    
    Extremely marginal benefit of avoid a short stall after make
    followed by listing subtests.
    
    v2: Move sync to common_init for consolidation and simplicity.
        (Chris Wilson)
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 490b386ae36d393cdea514882a2437c6e964c13f
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Fri Sep 1 15:59:17 2017 +0300

    scripts/run-tests.sh: Use piglit's --ignore-missing
    
    Recently we added a number of chamelium tests to the fast-feedback testlist.
    
    Chemelium is build-optional - requires  `./configure --enable-chamelium`.
    
    To mitigate issue with piglit exiting abruptly due to the (possibly)
    missing test binaries, this makes it behave more gracefuly, considering
    those as simply "notrun".
    
    Cc: Petri Latvala <petri.latvala@intel.com>
    Signed-off-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6311caa0697fede771b9520ec3c68bee1c155120
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 14 11:25:53 2017 +0200

    tests/kms_frontbuffer_tracking: convert macros to functions
    
    Macros that should be C functions but aren't are really hard to
    read and confusing. Convert them over.
    
    v2: Clean up commit message and keep printing the line numbers (Paulo).
    
    v3: Actually git add (silly me).
    
    Cc: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Reviewed-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 5ce65a9a51f17e0183e3e4f8943981ee7b96cadd
Author: Katarzyna Dec <katarzyna.dec@intel.com>
Date:   Thu Aug 31 09:40:09 2017 +0200

    pm_rps: Changes in waitboost scenario
    
    CI is observing sporadical failures in pm_rps subtests. There are a
    couple of reasons. One of them is the fact that on gen6, gen7 and
    gen7.5, max frequency (as in the HW limit) is not set to RP0, but the
    value obtaind from PCODE (which may be different from RP0). Thus the
    test is operating under wrong assumptions (SOFTMAX == RP0 == BOOST which
    is simply not the case). Let's compare current frequency with BOOST
    frequency rather than SOFTMAX to get the test behaviour under control.
    
    In boost_freq function I set MAX freq to medium freqency, which ensures
    that we for sure reach BOOST frequency. This could help with failures
    with boost frequency failing to drop down.
    
    Additionally GPU reset needs to be modified so we are not dependent on
    kernel's low priority retire worker. Reset method was replaced by
    igt_force_gpu_reset() and in reset testcase we make sure that we can
    recover from hang.
    
    v2: Commit message, simplified waiting for boost to finish, drop
    noisy whitespace cleanup.
    
    v3: Removed reading from i915_rps_boost_info debugfs because it not the
    same on every kernel. Removed function waiting for boost. Instead of
    that I made sure we will reach in boost by setting MAX freq to fmid.
    
    v4: Moved proposal with making test drm master to other patch
    
    v5: Used igt_force_gpu_reset() to reset GPU. Modified "reset" testcase.
    
    v6: Comments changes and update.
    
    v7: Fixing typos
    
    v8: Fixing another typos in comments and commit msg
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Jeff Mcgee <jeff.mcgee@intel.com>
    Cc: Petri Latvala <petri.latvala@intel.com>
    Cc: Jani Saarinen <jani.saarinen@intel.com>
    Cc: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Reviewed-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@intel.com>
    Signed-off-by: Katarzyna Dec <katarzyna.dec@intel.com>

commit c2159678d283fea5615ec8e846a51cf4954ac82d
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Fri Apr 28 11:34:52 2017 -0700

    tests/perf: add Geminilake support
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 8a97c450074d8b7cbc6e576f86c0fe8a8a406fd6
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Tue Apr 11 10:55:23 2017 -0700

    tests/perf: add Kabylake support
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 5148162789d518e1bdd004b5f7cc11ffb00696e2
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Mon Aug 28 17:55:00 2017 +0300

    tests/chamelium: Let the Chamelium itself wait for a stable video input
    
    Before capturing video, the Chamelium will always wait for the video
    input to be stable (and perform the FSM if it was not). This means that
    there is no need to explicitly do it beforehand.
    
    When the receiver needs to be reset, the call will result in a timeout,
    after which the follow-up call to capture the video will perform the FSM
    that resets it. Skipping the explicit wait for video input stable allows
    the Chamelium to perform the FSM directly, which saves valuable time.
    
    Removing the associated call does not negatively impact the execution of
    the CRC and frame comparison tests either.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit 0be6d4a6601b1d8a02d607d5a95f6164c2e66067
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Tue Aug 29 18:35:38 2017 +0300

    tests/audio: Add suspend and hibernate tests for HDMI signal integrity
    
    This introduces tests for HDMI signal integrity after suspend and
    hibernate. They simply test that signal integrity is ensured before
    and after suspend or hibernate.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit 2af28e0d34e2d5b3e85070944b4e4e792ec2fed2
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Tue Aug 29 18:11:33 2017 +0300

    docs/chamelium: Explain that the Chamelium should only target one DUT
    
    This adds an explanation about why the Chamelium should only be
    connected to one target device at once to the in-tree documentation.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    [with one small style change]
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit a23ef519a6bf5b504b9ad67537339f4af4c058de
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Tue Aug 29 15:53:42 2017 +0300

    lib/igt_debugfs: Open DRM driver without master for hpd storm exit
    
    When running the full chamelium test binary, it occurs that the hpd
    storm exit handler (that restores its initial value) will fail when
    trying to acquire DRM master.
    
    This happens even though the previously-held DRM file descriptor was
    closed already.
    
    Since there is no need to get DRM master for debugfs access purposes,
    open the DRM node without requesting master to fix the issue.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit 4e4500a7a62c5583973c8da5ca366de859bbd0d1
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Wed Aug 30 16:56:09 2017 +0300

    lib/igt_aux: Allow sysfs open to fail when setting suspend/resume delay
    
    This removes the igt_require condition on the sysfs open call used to
    write the suspend/resume delay so that it is allowed to fail. Intsead,
    the code that depends on it is put in a conditional block.
    
    This allows running test binaries as a non-privileged user for e.g.
    listing the available tests with the SuspendResumeDelay parameter set
    in igtrc configuration. Sysfs access would otherwise cause it to fail.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit fc6510887f8f45e18ca267e53eb564de043bd9d6
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Wed Aug 30 13:19:57 2017 +0300

    tools: Add intel_vbt_defs.h to Makefile.sources
    
    So is will be picked up for the distributable tarball.
    
    Fixes: 09f35ea4dc06 ("tools/intel_vbt_decode: start migrating to kernel intel_vbt_defs.h")
    Signed-off-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Jani Nikula <jani.nikula@intel.com>

commit f65a718019056d2f5b1612161042fcea0b6754eb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 25 18:28:36 2017 +0100

    lib/kmod: Fix error reporting for kmod load/unload
    
    A "return -err ? err < 0 : err" managed to slip through. So if err was
    set, we returned 0 or 1 based on sign, or 0 if err was zero.
    
    If err is negative, we want treat it as an error, so report it back
    to the caller, all other values were a success, so convert those to 0.
    
    This should actually be no functional change, as all errors were
    reported as 1, and everything else as 0.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 1b6585eeb22a2787fa52b2a192d4e9539acbd9c6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 25 19:26:39 2017 +0100

    igt/vgem_basic: Load and unload the module first
    
    To ensure the module exists, first load it. Then when we try to unload
    the module (to check that our modprobe interface works), we will not get
    spurious failures due to -ENOENT (in this case meaning the module did
    not exist):
    
    (vgem_basic:18361) igt-core-DEBUG: Starting subtest: unload
    (vgem_basic:18361) igt-kmod-DEBUG: Could not remove module vgem (No such file or directory)
    Test requirement not met in function test_unload, file vgem_basic.c:331:
    Test requirement: module_unload() == 0
    Last errno: 2, No such file or directory
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 1f0f2aa0143e54a8db2dad088c03a99e78674f97
Author: Marta Lofstedt <marta.lofstedt@intel.com>
Date:   Tue Aug 29 13:32:43 2017 +0300

    tests/kms_atomic: subtest atomic_invalid_params requires CRTC
    
    Check for valid crtc is missing in igt@kms_atomic@atomic_invalid_params.
    This leads to segfault on machines where the subtest should be skipped.
    
    Signed-off-by: Marta Lofstedt <marta.lofstedt@intel.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 2cbcc0b4a06166243e0d4c177882d93077938331
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Mon Aug 28 15:13:40 2017 +0300

    tools/intel_vbt_decode: migrate backlight dumping to kernel struct
    
    Drop obsolete field dumping.
    
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 3b163c4809519c8e5baa02bcf01bd3d3efadc8eb
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Mon Aug 28 15:07:35 2017 +0300

    tools/intel_vbt_decode: migrate child device type bits decoding to kernel defs
    
    This lets us use the verbatim copy of the kernel intel_vbt_defs.h file
    after kernel commit 058727ee8d9a ("drm/i915/bios: amend edp block based
    on intel_vbt_decode").
    
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 66d88e6093a7aa682ee4baa1573dda7c7f70c3b4
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Fri Aug 25 17:15:43 2017 +0300

    tools/intel_vbt_decode: migrate edp dumping to kernel struct
    
    No functional changes.
    
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit e1db4c4e0e708f01c63fc6c790059caed8153f14
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Fri Aug 25 16:10:53 2017 +0300

    tools/intel_vbt_decode: migrate psr dumping to kernel struct
    
    No functional changes.
    
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit dff8b304e3fcf1f3fe4103113240ab7a2a92d3ca
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Fri Aug 25 12:30:20 2017 +0300

    tools/intel_vbt_decode: migrate child device dumping to kernel struct
    
    Retain the legacy definition for the obsolete child device block, at
    least for now. No functional changes.
    
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit ef52ae2cf9a52d8380a7335e5e87c495f557f8e9
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Fri Aug 25 13:51:25 2017 +0300

    tools/intel_vbt_decode: migrate timing dumping to kernel struct
    
    Adapt the dumping according to the changes, and do what the kernel does.
    
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 09f35ea4dc0656f7dcd3f2427c469822f55dcbc0
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Fri Aug 25 15:56:19 2017 +0300

    tools/intel_vbt_decode: start migrating to kernel intel_vbt_defs.h
    
    Copy over most of intel_vbt_defs.h, and use everything that matches with
    minor changes from there.
    
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 25a7117981b75fcd59d64e4b2ec82b50040c9c33
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Fri Aug 25 13:41:05 2017 +0300

    tools/intel_vbt_decode: clean up struct lvds_dvo_timing
    
    For reasons unknown, we have two copies of the struct. Deduplicate.
    
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 93d8e3a593bd79ab2228bb78283c76ef00e4e0a7
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Fri Aug 25 14:33:41 2017 +0300

    tools/intel_vbt_decode: remove unused definitions from intel_bios.h
    
    This is prep work for refactoring VBT definitions.
    
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 0450bc24872453a96baab7fa3351bef6c05fae17
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Fri Aug 25 14:12:09 2017 +0300

    tools/intel_lid: use local register definition
    
    This makes the future intel_vbt_decode refactoring easier.
    
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit bf45d253648250fc402eee02237366c8882b2053
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 22 12:10:41 2017 +0100

    igt: Add gem_close
    
    What transpired recently was that we allow a single process to create
    multiple handles to the same VMA (which I broke). Make sure we test!
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=102355
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Michał Winiarski <michal.winiarski@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d937dd7997059bc2801095ffb0c50f646da1ab01
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Mon Aug 28 11:12:05 2017 +0300

    docs: Add user documentation about audio support
    
    This introduces plain-text documentation about the audio test, aimed at
    users who wish to setup and run the audio tests.
    
    Given the contents of this documentation, it felt more relevant to make
    it part of the tree instead of the API reference.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit e12e525094db3a5b85b24ea9113672e7de455659
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Mon Aug 28 11:12:04 2017 +0300

    docs: Add user and developer documentation about Chamelium support
    
    This introduces plain-text documentation about the Chamelium aimed at
    users who wish to deploy the platform, as well as developers who wish
    to work on improving IGT support for it.
    
    Given the contents of this documentation, it felt more relevant to make
    it part of the tree instead of the API reference.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    (with one small typo fixed)
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit 73a3b0b1d973c7e55419f9a3890cd68c6ac130da
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Mon Aug 28 11:12:03 2017 +0300

    lib/igt_core: Use HTML character for documentation comment in example
    
    The gtkdoc output for the example configuration given in the file
    confuses gtkdoc because of the use of # for comments, that is
    interpreted as a headline (although it is an example block).
    
    This uses the HTML character instead to ensure the rendering is correct.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    (with one small typo fixed)
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit 60f6a12195395934f179d5ecc080353190d19a6c
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Fri Aug 25 15:03:37 2017 +0300

    tests: chamelium: Eliminate reset when preparing output
    
    Resetting the Chamelium when preparing the video output is unnecessary
    and significant increases the tests run-time. Since all video-related
    tests work just as well without it, eliminate it.
    
    This also adds a call to reset_test in the analog frame dump test, that
    was missing before, although the chamelium was still reset by the call
    to prepare_output.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit 29d488034a50cd6fbad792cae61321995f0ab51c
Author: Jason Ekstrand <jason.ekstrand@intel.com>
Date:   Wed Aug 23 09:50:17 2017 -0700

    aubdump: Log some information about the execbuf calls
    
    Reviewed-by: Scott D Phillips <scott.d.phillips@intel.com>

commit 2472bdd41ed191fab252fb01164ba90df8cbed7b
Author: Jason Ekstrand <jason.ekstrand@intel.com>
Date:   Wed Aug 23 09:40:05 2017 -0700

    aubdump: Use write_reloc for filling out the ringbuffer
    
    Reviewed-by: Scott D Phillips <scott.d.phillips@intel.com>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit 66cc8cf2bee6232c040a52ea056074d8dd27ab88
Author: Jason Ekstrand <jason.ekstrand@intel.com>
Date:   Wed Aug 23 10:05:27 2017 -0700

    aubdump: Reject execbuffer2 calls with bad BOs
    
    This is required for the supports_48b_addresses check in the Vulkan
    driver to work without messing up the resulting aub.
    
    Reviewed-by: Scott D Phillips <scott.d.phillips@intel.com>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit 37641a5032b2cb2dcdb04a28d3ac3cebd01b8363
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Tue Aug 22 15:08:49 2017 +0300

    intel-ci: Remove generic.testlist
    
    The list has been unmaintained and unused. The set of tests is a
    subset of what CI runs in sharded runs so we are running all of them
    already.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@intel.com>
    Acked-by: Tomi Sarvela <tomi.p.sarvela@intel.com>

commit 80cc54023e198165eca34450e9cc75c9cffcb072
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 23 15:30:44 2017 +0200

    lib/core: Use igt_info instead of printf
    
    igt_info doesn't add anything when printing to stdout, but so looks
    the same. But it has the upside of appending the lines also to the igt
    crashdump log, where I especially want the backtraces. Atm they're the
    only thing that doesn't end up in there, which is a bit confusing.
    
    While at it also convert the other lines - the test summary usually
    doesn't make it since the test fails before that, and the version line
    tends to scroll off the crashdump.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7552c5af1f43386424085c32bca3cbd0cb0dfe48
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Wed Aug 23 18:21:14 2017 +0300

    intel-ci: Add fast chamelium tests to the fast-feedback list
    
    This adds the fastest chamelium tests to the Intel CI fast-feedback
    list, with the objective of running in under a minute.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit c4f1f8a9cb04f5b662f299fa00e0d3cd8e55c4c5
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Wed Aug 23 18:21:13 2017 +0300

    tests/chamelium: Introduce fast CRC tests, with a single mode
    
    This introduces a fast fashion of testing display CRC, that only tests
    a single mode (the highest resolution). It drastically reduces the run
    time of the test, which is necessary for the fast-feedback test list.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit 4ee824e752548deabb610660ac019aa6c2f9101f
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Wed Aug 23 18:21:12 2017 +0300

    tests/chamelium: Introduce fast basic hpd tests, with limited toggles
    
    This introduces a fast fashion of testing basic hotplug detect, with
    only 3 toggles. It drastically reduces the run time of the test, which
    is necessary for the fast-feedback test list.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit 42b42c99cd9d1b890807ae97cbd1c593396ae051
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Tue Aug 22 11:26:58 2017 +0300

    tests/Makefile.am: Wrap audio test with dedicated conditional
    
    This uses the dedicated HAVE_AUDIO conditional, that depends on both
    ALSA and GSL, for wrapping the audio test. This makes the wrapping
    consistent with what is done for the chamelium test.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit 4524a8951348a31ae5dabfc4c69f2a835034ec3e
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Mon Aug 21 18:27:20 2017 +0300

    tests: Introduce audio tests, starting with HDMI signal integrity
    
    This introduces a new test for audio going through display connectors.
    It currently contains a single subtest for HDMI signal integrity, but
    other test cases will be added later on.
    
    The test setup consists in using an HDMI-VGA bridge that separates the
    audio out (via a 3.5 mm jack) and feeding this back to the DUT's line-in
    where it can be recorded by ALSA with controls correctly configured.
    
    The audio test makes use of the audio and ALSA igt libraries helpers.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit 1579692d6447d126552b5fb020a63b26427c9a12
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Mon Aug 21 18:27:19 2017 +0300

    lib: Add ALSA library with dedicated helpers
    
    This introduces an ALSA library, with dedicated helpers for handling
    playback and capture. It handles ALSA device identification and
    configuration as well as a run loop with callback mechanisms for feeding
    output data and handling input data.
    
    This library paves the way for testing audio going through display
    connectors, such as HDMI.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit 39cc9bf89c293c92d55aad803c08816ad922585d
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Mon Aug 21 18:27:18 2017 +0300

    lib: Add audio library with dedicated helpers
    
    This introduces an audio library, with dedicated helpers for both
    generating signals and detecting peak frequencies in a signal.
    
    This library paves the way for testing audio going through display
    connectors, such as HDMI.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit 5a17ee2c8f9013f5db852d27564b837f9f2c5a9f
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Aug 16 17:02:10 2017 +0300

    tools/intel_vbt_decode: Fix decoding of child device structure
    
    Fix decoding of the start of the child device structure. I had
    accidentally duplicated the "device class/type" member and forgot to
    include the add-in offset later. Fortunately both were two byte fields
    so they effectively cancelled each other out and thus the remainder of
    the child device structure was being decoded correctly. But of course
    anything sitting between these two fields was being decoded incorrectly.
    
    Fixes: 86a546f6f798 ("tools/intel_bios_reader: Dump out more information from the child device structure")
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Reviewed-by: Jani Nikula <jani.nikula@intel.com>

commit 103af58478e4a8aa644449e469a1cec0cd57b160
Author: Jason Ekstrand <jason.ekstrand@intel.com>
Date:   Tue Aug 15 15:35:02 2017 -0700

    tests/gem_exec_params: Update the invalid-flag subtest for FENCE_ARRAY
    
    Tests for the new flag were added in 3685dabb0ab25eb1.
    
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f978cc027cd02a6c43b54b69fab2b538bbe05330
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Aug 16 14:39:15 2017 +0100

    lib/dummyload: Pad with a few nops so that we do not completely hog the system
    
    Part of the attraction of using a recursive batch is that it is
    hard on the system (executing the "function" call is apparently
    quite expensive). However, the GPU may hog the entire system for
    a few minutes, preventing even NMI. Quite why this is so is unclear,
    but presumably it relates to the PM_INTRMSK workaround on gen6/gen7.
    If we give the system a break by having the GPU execute a few nops
    between function calls, that appears enough to keep SNB out of
    trouble.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Tomi Sarvela <tomi.p.sarvela@intel.com>
    Cc: Daniel Vetter <daniel.vetter@intel.com>
    [danvet: Add bugzilla link]
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c8811338e8a7723b5e99a303361ed97c092fc270
Author: Kelvin Gardiner <kelvin.gardiner@intel.com>
Date:   Tue Jun 27 14:04:51 2017 -0700

    intel-ci: Add fast-feedback-simulation.testlist
    
    Added an initial list of fast feedback tests for simulation
    environments.
    
    v2 (Petri): Rebase README, Add the simulation list to EXTRA_DIST.
    
    Signed-off-by: Kelvin Gardiner <kelvin.gardiner@intel.com>
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit eda8cc9f5f61e84d72615e470030ff3c3271af71
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Aug 10 14:09:14 2017 +0200

    tests/kms_mmap_write_crc: Add drmModeDirtyFB after dirtying fb
    
    The test shows the need for coherency through the dma-buf sync ioctl's,
    but forgets to call dirtyfb, without this the FB Is never updated and we
    will fail anyway.
    
    Solve this by adding a drmModeDirtyFB, I've confirmed by adding -n
    that the test will still faill without prime_sync_end anyway,
    so the test is still useful.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Cc: Marta Löfstedt <marta.lofstedt@intel.com>
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=101109
    Tested-by: Chris Wilson <chris@chris-wilson.co.uk> #llc
    Acked-by: Marta Lofstedt <marta.lofstedt@intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk> #llc

commit 8d2ad9d4d4ba35e1ca8a4989347825fa8e8c0072
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 14 22:32:00 2017 +0200

    tests/kms_flip: fix spin_batch conversion
    
    The goal of these subtests was just to delay a kms operation a little
    bit. The goal wasn't to
    - spin until the operation was completed. That results in a gpu hang,
      and gpu hangs need igt_hang for safety.
    - complete it before the operation. That's just pointless.
    
    Fix it by using the timeout support.
    
    This was all broken in the initial conversation:
    
    commit 96ec8cb3b5ec1fc2927d6cff8e09930082301d7e
    Author: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
    Date:   Sat Oct 29 01:01:05 2016 +0300
    
        igt/kms_flip: Use new igt_spin_batch
    
    Note that part of the damage was removed already in
    
    commit b0081ea9cb7d39234fd0fcc64dd56ed4f5d50b05
    Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Date:   Wed Aug 9 11:11:52 2017 +0200
    
        tests/kms_flip: Remove $engine-flip-vs-dpms/modeset
    
    But this patch also made things worse, because it remove code that
    wasn't dead yet (because it didn't remove all the dpms vs spinning
    batch tests).
    
    v2: Augment commit message and use macro for 1s-in-ns.
    
    Cc: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Cc: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
    Cc: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3685dabb0ab25eb1bc2df867f749701777153056
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 3 13:30:29 2017 +0100

    igt/gem_exec_fence: Exercise syncobj API
    
    New execbuf API allows to pass arrays of fences as handles rather than
    allocate lots of fds.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Jason Ekstrand <jason@jlekstrand.net>

commit b0081ea9cb7d39234fd0fcc64dd56ed4f5d50b05
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Aug 9 11:11:52 2017 +0200

    tests/kms_flip: Remove $engine-flip-vs-dpms/modeset
    
    This is already tested in kms_busy, and without cs flips there's no
    point in doing those tests any more.
    
    The removed tests were broken and caused GPU hangs because the spin
    batch was not unblocked correctly.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit dd0c75c1e5eeeee324005ad1ebfd5a5d24cef6fb
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Aug 2 11:51:42 2017 +0200

    lib/igt_kms: Remove vblank wait after plane update.
    
    With the conversion to atomic, this is already handled in the core.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 3ee83cf3ae37fc7456abf37fa89623a9221de381
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Mon Aug 14 12:51:52 2017 +0300

    Revert "tests/igt_command_line: Ignore subtest list for kms_ccs"
    
    The temporary workaround can now be removed with kms_ccs being fixed.
    
    This reverts commit 1385b31d9371fae02af2fd8adb0d9ea86a5bb0f2.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 3f560388deaaddaa132a5af276f82b090156dd79
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 14 11:32:07 2017 +0200

    lib/kms: Check usage of for_each_*
    
    Except for for_each_pipe_static they cannot be used outside of
    fixtures/subtest. Assert this.
    
    This will make the broken version of kms_ccs assert when run, which
    also would have made $make check fail.
    
    Cc: Daniel Stone <daniels@collabora.com>
    Cc: Jason Ekstrand <jason@jlekstrand.net>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit d41c4ccbd2f905bd82f55e37283a6d646f0a5e93
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 14 11:32:06 2017 +0200

    tests/kms_ccs: Fix subtest enumeration:
    
    - We can't enumerate planes, push that into the subtest.
    - pipe enumeration needs to use for_each_pipe_static.
    
    This fells our CI since the test enumeration/sharding happens on the build
    server, which has no gfx nor does the job run as root ...
    
    Cc: Daniel Stone <daniels@collabora.com>
    Cc: Jason Ekstrand <jason@jlekstrand.net>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 229d7d27e5a24fa8e4155ada48467b16db9486e0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 14 11:32:05 2017 +0200

    lib/kms: Add for_each_pipe_static
    
    for_each_pipe cannot be used for enumerating testcases, so provide
    something that can.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 2459b80b8da75f78baa681d4a878492715dd71f9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 14 11:32:04 2017 +0200

    lib: Add igt_can_fail()
    
    Useful to make sure folks use library helpers correctly.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 0c514b0cb876fb578afb2bb0297579bc896251d8
Author: Dave Airlie <airlied@redhat.com>
Date:   Mon Aug 14 17:07:05 2017 +1000

    configure.ac: bump libdrm requirement to 2.4.82
    
    In order to pick up syncobjs.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>
    Acked-by: Daniel Vetter <daniel.vetter@intel.com>

commit 1385b31d9371fae02af2fd8adb0d9ea86a5bb0f2
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Thu Aug 10 18:15:09 2017 +0300

    tests/igt_command_line: Ignore subtest list for kms_ccs
    
    Temporary workaround for "make check" to pass despite the issue with
    kms_ccs which do not list any subtests, even though it should.
    
    TO BE REVERTED by Daniel Stone
    
    Cc: Daniel Stone <daniels@collabora.com>
    Cc: Daniel Vetter <daniel.vetter@intel.com>
    Signed-off-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@intel.com>

commit 68e2eab2fd80494811e2e68dd8e6155b15c85833
Author: Daniel Stone <daniels@collabora.com>
Date:   Tue Aug 8 15:04:11 2017 +0100

    tests/kms_ccs: Test CCS on sprite planes
    
    Also try to test CCS on available non-primary planes. However, as there
    is not enough bandwidth to scan out both the primary and sprite planes
    when using CCS (or even Y-tiled), fall back to linear for the primary
    plane when using CCS for a sprite/cursor plane.
    
    Signed-off-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Jason Ekstrand <jason@jlekstrand.net>

commit 5c6ff1facb85fcef84ebbce1f9d9cb245041e729
Author: Daniel Stone <daniels@collabora.com>
Date:   Tue Aug 8 12:39:36 2017 +0100

    tests/kms_ccs: Split all tests into subtests
    
    Some subtests were magically doing a for-each-pipe loop. Remove that,
    and have all multi-pipe tests actually work across all pipes.
    
    Signed-off-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Jason Ekstrand <jason@jlekstrand.net>

commit 7ffe63c4d4c2c8b1204145cf32f2eb7e13fcff25
Author: Daniel Stone <daniels@collabora.com>
Date:   Tue Aug 8 13:20:19 2017 +0100

    tests/kms_ccs: Test for supported modifier
    
    Make sure the CCS modifier is supported on our plane, before we try to
    use it on that plane.
    
    Signed-off-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Jason Ekstrand <jason@jlekstrand.net>

commit a7e6fa47a9357ac692e7c0ee032aa1c6705d5565
Author: Daniel Stone <daniels@collabora.com>
Date:   Tue Aug 8 12:19:31 2017 +0100

    tests/kms_ccs: Reshuffle test name and loop
    
    In preparation for also testing sprites.
    
    Signed-off-by: Daniel Stone <daniels@collabora.com>
    Reviewed-by: Jason Ekstrand <jason@jlekstrand.net>

commit c26aa98cdedd42b294f8ccb0edb0c5d403ffb82e
Author: Daniel Stone <daniels@collabora.com>
Date:   Tue Aug 8 12:17:33 2017 +0100

    tests/kms_ccs: Paramaterize color for framebuffer
    
    Will be used in later patches.
    
    Signed-off-by: Daniel Stone <daniels@collabora.com>
    Reviewed-by: Jason Ekstrand <jason@jlekstrand.net>

commit fdb4ff3a8ac8d66d739e139b35c74c310802ecab
Author: Daniel Stone <daniels@collabora.com>
Date:   Tue Aug 8 12:10:37 2017 +0100

    tests/kms_ccs: Remove excessive FB alignment
    
    We don't need to align the framebuffer dimensions to the tile size. As
    long as the pitch is aligned to the tile width, and the BO dimensions
    can fit full tiles of both aligned pitch and aligned height, we don't
    need to claim the FB itself is larger.
    
    Signed-off-by: Daniel Stone <daniels@collabora.com>
    Reviewed-by: Jason Ekstrand <jason@jlekstrand.net>

commit 004df0efda84d45254ef92a682f3bf49bee1b045
Author: Daniel Stone <daniels@collabora.com>
Date:   Tue Aug 8 12:09:12 2017 +0100

    tests/kms_ccs: Split FB generation into helper
    
    Create a new helper for generating and rendering the framebuffer, rather
    than doing it inline with applying the configuration. This will be used
    later to generate a different plane configuration.
    
    Signed-off-by: Daniel Stone <daniels@collabora.com>
    Reviewed-by: Jason Ekstrand <jason@jlekstrand.net>

commit 5bd2aa785cce6aab893fe6328a60b915667eb1c2
Author: Daniel Stone <daniels@collabora.com>
Date:   Tue Aug 8 11:25:53 2017 +0100

    tests/kms_ccs: Convert int/bool to enum
    
    Rather than using TEST_UNCOMPRESSED / TEST_COMPRESSED as alternately
    either an int or a bool, change it to a bitfield enum.
    
    This will let us add more parameters later to control framebuffer
    generation.
    
    Signed-off-by: Daniel Stone <daniels@collabora.com>
    Reviewed-by: Jason Ekstrand <jason@jlekstrand.net>

commit c129026622accef6f54c0cfb0dc55e930cfa60b5
Author: Dave Airlie <airlied@redhat.com>
Date:   Wed Apr 12 02:12:54 2017 +0100

    igt: add syncobj_basic.
    
    Some basic sync object interface tests
    
    Reviewed-by: Jason Ekstrand <jason@jlekstrand.net>
    Signed-off-by: Dave Airlie <airlied@redhat.com>

commit 27ff12f00c94a5363f581a4353f08bfde62c59c4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Aug 7 13:36:36 2017 +0100

    lib: Remove illegal instructions from hang injection
    
    The idea behind using an illegal instruction was to hang the GPU must
    faster than simply using the recursive batch. However, we stopped doing
    so on gen8+ as the CS parser was much laxer and allowed the illegal
    command through but still interpreted the packet length (jumping over
    the recursive batch buffer start that followed). Sandybridge doesn't
    just hang the GPU when it encounters an illegal command on the BLT
    engine, it hangs the machine. That goes above and beyond testing our
    hangcheck + reset, so remove the deadly instructions.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b5959304ee825be990bbe4c212ea20f2e737ea7d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Aug 7 13:36:35 2017 +0100

    igt/gem_exec_capture: Wait for batch to execute before triggering reset
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit eeff6a1d9c4e2c195b30ad95ee36a58ef6ca3387
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Mon Aug 7 15:23:29 2017 +0300

    intel_gpu_top: Use drm_open_driver, don't need drm master
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit aa60bc6317d7fad7e03e7dce8eaa91068f21d3d2
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Mon Aug 7 18:12:19 2017 +0100

    tests/perf: fix userspace configs issues on HSW
    
    We don't have flex eu counters on HSW, so don't try to program for
    thoses.
    
    Reported-by: CI \o/
    Fixes: 609cb5e30b4 ("tests/perf: add tests to verify create/destroy userspace configs")
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit f4f7b700e117993847e3d4cadbaa0ce2b88712bb
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Aug 4 16:38:51 2017 +0200

    tests/core_auth: set rlimit
    
    Some distros have huge rlimits and then the test takes forever, or
    worse oom, or even worse, takse down the entire machine (which is
    shouldn't be able to, but oh well, oom handling in linux).
    
    Make sure we have a consistent rlimit by adjusting it manually.
    
    v2: Use the default of 1024 from everywhere except ubuntu.
    
    Cc: Tomi Sarvela <tomi.p.sarvela@intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit c22705954a11d56e61aa3dd8e72d6cd2fa945d67
Author: Gustavo Padovan <gustavo.padovan@collabora.com>
Date:   Wed Aug 2 19:54:17 2017 -0300

    tests/kms_cursor_legacy: use 'enum pipe' type instead of 'int'
    
    Signed-off-by: Gustavo Padovan <gustavo.padovan@collabora.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 79d6f77fa1ff33f198d954a3c7f1028322fcce52
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Fri Aug 4 17:23:00 2017 +0100

    tests/perf: follow up build fix
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Fixes: adcde8ac ("tests/perf: fix build where system headers don't have Gen8 formats")
    Tested-by: Matthew Auld <matthew.auld@intel.com
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>
    Reviewed-by: Daniel Stone <daniels@collabora.com>

commit d24154786d307998fb25e81e9e6aad01f3cbe49e
Author: Daniel Stone <daniels@collabora.com>
Date:   Fri Aug 4 17:08:04 2017 +0100

    tests/kms_ccs: Don't overallocate CCS surface
    
    Due to a mix-up in kernel branches being used, I'd mangled Jason's
    original CCS test to hopelessly overallocate the CCS surface size.
    Restore it back to its original.
    
    Signed-off-by: Daniel Stone <daniels@collabora.com>
    Cc: Jason Ekstrand <jason@jlekstrand.net>

commit adcde8ac7837144088f704720bac05e0e4555973
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Fri Aug 4 14:19:55 2017 +0100

    tests/perf: fix build where system headers don't have Gen8 formats
    
    v2: Use previous enum to define the new Gen8 enums (Petri)
    
    v3: Duh! (Lionel)
    
    v4: Redefine MAX oa formats value (Daniel)
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Tested-by: Daniel Stone <daniels@collabora.com>

commit 8d28ea33c7bf6c13c2add165398d6f2274bb254d
Author: Daniel Stone <daniels@collabora.com>
Date:   Fri Aug 4 14:37:24 2017 +0100

    tests/kms_properties: Don't set immutable properties
    
    If the kernel tells us it's immutable, trying to set it probably isn't
    going to succeed. There was previously a hard-coded list of immutable
    properties, keyed by name, but we can just test the flag instead, which
    is more future-proof.
    
    Fixes a failure seen with the IN_FORMATS property.
    
    v2: Remove the entire list apart from DPMS, replacing it with a test for
        immutable.
    
    Signed-off-by: Daniel Stone <daniels@collabora.com>
    Reviewed-by: Daniel Vetter <daniel.vetter@intel.com>
    Cc: Ben Widawsky <ben@bwidawsk.net>

commit a9d9354de50e7ae4a49da14925116031f8540d37
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Aug 4 14:39:54 2017 +0300

    kms_busy: Fix basic-modeset-* name format parameters
    
    Commit 37b06eb9b526df6c23ec75f7a9ecd9547fa76695 limited the used
    engines to only the default engine, dropping the engine name from
    subtest names, but left over the format parameter.
    
    Fixes: 37b06eb9b526 ("tests/kms_busy: Only test against one engine")
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Marta Lofstedt <marta.lofstedt@intel.com>
    CC: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 609cb5e30b433d065e39354df49c10db52001be0
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Thu Jul 6 12:35:36 2017 +0100

    tests/perf: add tests to verify create/destroy userspace configs
    
    v2: Add tests regarding removing configs (Matthew)
        Add tests regarding adding/removing configs without permissions
        (Matthew)
    
    v3: Add some flex registers (Matthew)
    
    v4: memset oa_config to 0 (Lionel)
        Change error code for removing unexisting config EINVAL->ENOENT (Lionel)
    
    v5: Update i915 uapi (Chris)
        Use wrappers to make assertions more readable (Chris)
    
    v6: Add whitelisting test (Lionel)
    
    v7: Add wrapper function for removing configs (Matthew)
        Fix an unfinished comment (Matthew)
    
    v8: Add EFAULT check (Lionel)
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 56bde96ea6d774e45130a75b7fc5446834256ebf
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Fri Apr 14 02:36:19 2017 +0100

    tests/perf: add utility function for checking periodic reports
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 3cf388f1610f9754f1f085d08cef1e519313b96d
Author: Robert Bragg <robert@sixbynine.org>
Date:   Tue Apr 18 21:08:46 2017 +0100

    tests/perf: update print_reports to print context ID
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit 338faaa00c9c938cb4861bb480e0666783a73312
Author: Robert Bragg <robert@sixbynine.org>
Date:   Mon Apr 24 17:34:51 2017 -0700

    tests/perf: print [un]slice freq and report reasons in debug
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit 5b34ad5221003c66829dbb932c9fe8b4198676d3
Author: Robert Bragg <robert@sixbynine.org>
Date:   Wed Feb 8 17:31:29 2017 +0000

    tests/perf: factor out oa report sanity checking
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit 3e7e5f890f2dc97e9334d61d53026fbb0715cd12
Author: Robert Bragg <robert@sixbynine.org>
Date:   Wed Feb 8 16:36:38 2017 +0000

    tests/perf: consider ctx-switch reports while polling/blocking
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit 80971283625b906aca947b5c189c5f207cc06db9
Author: Robert Bragg <robert@sixbynine.org>
Date:   Tue Feb 7 16:36:03 2017 +0000

    tests/perf: don't assume constant of 40 EUs
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit 0a2ca790212dc2823d4ef1851cfa9669bdbc7ddf
Author: Robert Bragg <robert@sixbynine.org>
Date:   Tue Feb 7 16:22:59 2017 +0000

    tests/perf: s/test_perf_ctx_mi_rpc/hsw_test_single_ctx_counters/
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit 6d4e853b87098925da2f7e4416b44a4f41390c6f
Author: Robert Bragg <robert@sixbynine.org>
Date:   Mon Feb 6 17:04:14 2017 +0000

    tests/perf: allow 10% margin matching oa/sysfs freq in test_oa_exponents
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit ac62f4ae17b0c5ed564cb32f769ff53109a137fc
Author: Robert Bragg <robert@sixbynine.org>
Date:   Mon Feb 6 16:59:23 2017 +0000

    tests/perf: avoid assumptions about oa exponent <-> freq mappings
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit 5091bb88a8f61d735913d15df781e84759641933
Author: Robert Bragg <robert@sixbynine.org>
Date:   Mon Feb 6 16:46:58 2017 +0000

    tests/perf: handling printing gen8 formats
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit 01ec424328ffb44a319901d8c293b3fd78e87985
Author: Robert Bragg <robert@sixbynine.org>
Date:   Mon Feb 6 16:26:29 2017 +0000

    tests/perf: wrap emission of MI_REPORT_PERF_COUNT
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit f1c5a02e3c5b95a79659182316af513fcff2e2b2
Author: Robert Bragg <robert@sixbynine.org>
Date:   Mon Feb 6 15:40:22 2017 +0000

    tests/perf: move timebase + oa exponent utilities up
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit 8519411b68bec168306b8be8c770f986b09f0490
Author: Robert Bragg <robert@sixbynine.org>
Date:   Tue Jan 31 14:21:59 2017 +0000

    tests/perf: generalize reading gpu ticks from reports
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit 871b69aebc85bba4758a13d16ca460fbc387f6f7
Author: Robert Bragg <robert@sixbynine.org>
Date:   Tue Jan 31 14:16:41 2017 +0000

    tests/perf: generalize checks for undefined A counters
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit 325d0d96096853e1d1190098151946a404623907
Author: Robert Bragg <robert@sixbynine.org>
Date:   Tue Jan 31 13:34:05 2017 +0000

    tests/perf: fix a counter indexing
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit b05012b663e5371db908e726bb678e3dbb92e236
Author: Robert Bragg <robert@sixbynine.org>
Date:   Tue Jan 31 13:33:30 2017 +0000

    tests/perf: add gen8 formats
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit 54202cea9b0d61ef02cef6826b5b2e9050755e4f
Author: Robert Bragg <robert@sixbynine.org>
Date:   Wed Feb 22 16:06:48 2017 +0000

    tests/perf: update init_sys_info for skl with per-gt configs
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit 77fdb259a349890d75cad9c5336b4f5bc456d592
Author: Robert Bragg <robert@sixbynine.org>
Date:   Fri Jan 27 13:14:12 2017 -0800

    tests/perf: init timestamp freq and oa format per devid
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit bfbd8468c01ffc5276fc9d436952ce66e90a66b1
Author: Robert Bragg <robert@sixbynine.org>
Date:   Mon Jan 16 19:56:18 2017 +0000

    tests/perf: improve robustness of polling/blocking tests
    
    There were a couple of problems with both of these tests that could lead
    to false negatives addressed by this patch.
    
    1) The upper limit for the number of iterations missed a +1 to consider
       that there might be a sample immediately available at the start of the
       loop.
    
    2) The tests didn't consider that a duration measured in terms of
       (end-start) ticks could be +- 1 tick since we don't know the
       fractional part of the tick counts. Our threshold for stime being <
       one tick could have a false negative for any real stime between 1 to
       10 milliseconds depending on luck.
    
    The tests now both run for a lot longer (1000 x tick duration, or
    typically 10 seconds each) so that a single tick represents a much
    smaller proportion of the total duration (0.1%) and the stime thresholds
    are now set at 1% of the total duration.
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit b4d16cd6423109a5ee52b829875c651f34eeab4d
Author: Robert Bragg <robert@sixbynine.org>
Date:   Mon Jan 16 20:17:23 2017 +0000

    tests/perf: generalize lookup for test metric set
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit d75bbbff240ca567d0c1629009e10709d7972879
Author: Jason Ekstrand <jason@jlekstrand.net>
Date:   Thu Aug 3 17:52:41 2017 -0700

    tests/kms_ccs: Fix the color/ccs surface generation
    
    Previously, the test used the old 64x64 convention that Ville introduced
    for CCS tiles and not the current 128x32 Y-tile convention.  Also, the
    original scheme for generating the CCS data was over-complicated and
    didn't work correctly because it assumed you could cut the main surface
    at an arbitrary Y coordinate.  While you clearly *can* do this (the
    hardware does), it's not a good idea for a generator in a test.  The new
    scheme, introduced here, is entirely based on the relationship between
    cache-lines in the main surface and the CCS that's documented in the
    PRM.  By keeping everything CCS cache-line aligned, our chances of
    generating correct data for an arbitrary-size surface are much higher.
    
    [daniels: Align CCS surface size to full height, per kernel
              requirements. Invert compressed/uncompressed red back so the
              top half of the display is compressed.]
    
    Fixes: d900dd85c917 ("tests/kms_ccs: Add test for render compression")
    Signed-off-by: Jason Ekstrand <jason.ekstrand@intel.com>
    Cc: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Cc: Ben Widawsky <benjamin.widawsky@intel.com>
    Cc: Daniel Stone <daniels@collabora.com>
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Reviewed-by: Ben Widawsky <ben@bwidawsk.net>
    Reviewed-by: Daniel Stone <daniels@collabora.com>
    Signed-off-by: Daniel Stone <daniels@collabora.com>

commit 398fc95920f358ae90161e76bd149c94eeddd06f
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Aug 4 12:43:51 2017 +0300

    intel-ci: Also remove extended.testlist from EXTRA_DIST
    
    Fixes: 848fc49e22c6 ("tests: delete extended.testlist")
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@intel.com>
    Acked-by: Tomi Sarvela <tomi.p.sarvela@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 37b06eb9b526df6c23ec75f7a9ecd9547fa76695
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Aug 3 19:27:32 2017 +0200

    tests/kms_busy: Only test against one engine
    
    Back when we used cs flips it made sense to go through different
    engines, since a buffer busy on an engine that we couldnt' use for
    cs flipping ended up in different paths.
    
    But with atomic we use a worker for all flips, and going through the
    combinatorial growth of engines just wastes precious machine time.
    More so the more modern the platform is.
    
    Of course gem tests should still do some diagonal testing across all
    engines, but the kms side can afford to be a bit cheaper.
    
    v2: Make it compile. Oops. Also make sure we don't break
    fast-feedback.testlist.
    
    Adding a mode where we depend upon all engines isn't really possible,
    because there's only 1 exclusive fence and that's the only thing a
    flip waits for.
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Cc: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 848fc49e22c688ea712aab4beb5028b0755ac697
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Aug 3 17:34:49 2017 +0200

    tests: delete extended.testlist
    
    This approach died, we just run everything there is (and use that to
    apply some serious darwinian pressure onto testcase to prove
    themselves).
    
    v2 (Petri): Update README
    
    Cc: Martin Peres <martin.peres@linux.intel.com>
    Cc: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Cc: Tomi Sarvela <tomi.p.sarvela@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>
    Acked-by: Tomi Sarvela <tomi.p.sarvela@intel.com>
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit 28ed1c4efe2080feb079a59650f4c01e3345b99d
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Thu Aug 3 16:34:45 2017 +0300

    configure.ac: Try to find XMLRPC with xmlrpc-c-config if pkg-config fails
    
    Debian and Ubuntu have XMLRPC packages without pkg-config files. Let's
    do automatically what the user would anyway do manually.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    CC: Daniel Vetter <daniel.vetter@intel.com>
    CC: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    CC: Lyude <lyude@redhat.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4d0f59c62991f4e96d9b36427da1b2fc5a59f7a0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Aug 3 13:41:53 2017 +0200

    tests/pm_rpm: Use the quick mode by default
    
    pm_rpm is one of the main offenders for long runtime in our full igt
    run. And hey, there's a quick option already, so make it the default.
    
    This means there's yet another way to enable stress tests, we really
    need to standardize this somehow. Or shred the stress-tests we really
    don't want/need anymore.
    
    v2: Fixup the entire help text (David).
    
    v3: Switch shortopt from 'q' to 'l', only used internal, so just for
    clarity (Arkadiusz).
    
    Cc: David Weinehall <david.weinehall@linux.intel.com>
    Cc: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Cc: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit d5cac49cca0a48a5531b6d59f3b6b716dffa3786
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Aug 3 11:33:36 2017 +0200

    tests/drv_module_reload: Fix running single tests
    
    We always need to make sure there's a working driver, hence need to
    move the -final test into the igt_fixture. This was broken in the
    conversion from the simple shell script (which didn't have any
    subtests) in
    
    commit 2fea8d26e589a9d256eca9f3d561750ecb3fb681
    Author: Marius Vlad <marius.c.vlad@intel.com>
    Date:   Thu Dec 1 14:23:57 2016 +0200
    
        tests/drv_module_reload: Convert sh script to C version.
    
    Cc: tomi.p.sarvela@intel.com
    Tested-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 8d4ddaee1371ef4f027466031cc5dd0d65593651
Author: Mika Kahola <mika.kahola@intel.com>
Date:   Wed Aug 2 16:20:55 2017 +0300

    tests/kms_plane_multiple: Fix reference CRC
    
    kms_plane_multiple wrongly expected that igt lib function would modify the
    passed igt_crc_t* object. You should use igt_crc_t** instead. This patch
    fixes this anomaly in the test.
    
    While at it, remove unnecesary struct for test data as we only need
    reference CRC here.
    
    The problem was caught by CI system and at least affects on HSW platform.
    
    V2: Don't change function that collects CRC for reference CRC
        Fix CRC pointers
        Remove unnecessary struct for holding test data
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=101907
    
    Signed-off-by: Mika Kahola <mika.kahola@intel.com>
    Reviewed-by: Marta Lofstedt <marta.lofstedt@intel.com>

commit 0fbe924227529c05712daaac78a028673b4396b2
Author: Gabriel Krisman Bertazi <krisman@collabora.co.uk>
Date:   Thu Jul 27 01:51:28 2017 -0300

    lib/igt_debugfs: Prevent compiler warning on unchecked printf format
    
    Commit 34a54192e1fb ("lib/igt_debugfs: Add extended helper to format
    crc to string") introduced the following compiler warning:
    
      igt_debugfs.c: In function ‘igt_crc_to_string_extended’:
      igt_debugfs.c:373:4: warning: format not a string literal, argument
      types not checked [-Wformat-nonliteral]
          i == (crc->n_words - 1) ? '\0' : delimiter);
    
    This patch addresses the warning while also preventing a possible bad
    memory access access if n_words is > 64.  I have no clue why we
    care about the padding size (crc_size), but since this was added
    recently, I'd rather leave it alone.
    
    Signed-off-by: Gabriel Krisman Bertazi <krisman@collabora.co.uk>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 9e8b8b0d5734371a7b50ea0087412aceb392fa39
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Thu Jul 27 17:45:28 2017 +0100

    tests/kms_pipe_color: Only test existing properties
    
    Some platforms might not have degamma or ctm support.
    We can only verify whether those properties behave properly
    if they're available.
    
    v2: reformat title (Arek)
    
    Fixes: aa55641d4 ("tests/kms_color: New test for pipe level color management")
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 6e1ccfa1430170c975f8c474b7a49be5bd121ed7
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Jul 27 14:48:59 2017 +0200

    lib/aux: Better debug output for rtcwake
    
    Printing the error code is kinda useful. Also tune down the blame
    shifting away from i915, this could very well be an i915 bug, not just
    a setup issue. Also move the notice to the require test, not the
    failure, and suggest to look into dmesg.
    
    v2: Dont print errno, igt_require/assert already do that in the
    failure case (Chris).
    
    Acked-by: tomi.p.sarvela@intel.com
    Acked-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit f145475173b6d28e550dde27cc361cfb517cbbc3
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Wed Jul 26 11:11:54 2017 +0300

    configure.ac: Disable chamelium by default and add enable argument
    
    Since the chamelium is not a very usual piece of hardware and requires
    pulling-in lots of specific dependencies, it makes sense to keep it
    disabled by default.
    
    An explicit --enable-chamelium argument is provided to enable it when
    necessary. This also leads to more predictable results than
    automatically enabling it when its dependencies are met.
    
    Finally, whether chamelium support is enabled is printed by the
    information summary at end of the configure run.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude <lyude@redhat.com>

commit 73387cf85b2110f25e6d1daa912a93d539e4c0f9
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Tue Jul 25 15:48:25 2017 +0300

    README: Add information about chamelium dependencies
    
    This adds a list of dependencies required to build chamelium support,
    so that what needs to be installed to get it going is more obvious.
    
    As done previously in the file, the list is relevant for Debian and its
    derivatives but should provide a template for other systems as well.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude <lyude@redhat.com>

commit cae92705b68eacc17f9fbc11b840d92ca9b7888e
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Tue Jul 25 15:48:23 2017 +0300

    configure.ac: Make udev a dependency for chamelium
    
    Chamelium testing has a hard dependency on udev. This makes this
    dependency explicit in configure instead of failing the build when it
    is missing.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude <lyude@redhat.com>

commit bbb0dbb04f5564a9d1e6401855ddba608ea1ae4a
Author: Praveen Paneri <praveen.paneri@intel.com>
Date:   Tue Jul 18 22:53:00 2017 +0530

    igt/kms_fbc_crc.c : Add Y-tile tests
    
    Now that we have support for Y-tiled buffers, add another
    iteration of tests for Y-tiled buffers.
    
    v3:
     - Iterate over tiling modifier instead of tiling constant (Paulo)
     - Improved logging and fixed indentation (Paulo)
    v4 (from Paulo):
     - Coding style nitpicks
     - Fix tiling_name
    
    Reviewed-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Praveen Paneri <praveen.paneri@intel.com>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit f26b59f07e81ecd7ae24e145921ee6d011daca73
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Jul 18 22:52:59 2017 +0530

    tests/kms_draw_crc: add support for Y tiling
    
    This is the program that's supposed to test lib/igt_draw. We just
    added Y tiling support for the library, so add the tests now.
    
    Reviewed-by: Praveen Paneri <praveen.paneri@intel.com>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Praveen Paneri <praveen.paneri@intel.com>

commit 10e010f59d1450da1af4a9ce4fa91b86caf4c6ae
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Jul 18 22:52:58 2017 +0530

    lib/igt_draw: add support for Y tiling
    
    Most of the patch is to change the tile/untile functions so they can
    work with Y-major tiling.
    
    v2: (Praveen) No skipping on BLT for Y-tile now as we have a fix
     for that.
    
    Reviewed-by: Praveen Paneri <praveen.paneri@intel.com>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Praveen Paneri <praveen.paneri@intel.com>

commit 4437e21f8a29ebb44cd8ca89ed76b9d784e252db
Author: Praveen Paneri <praveen.paneri@intel.com>
Date:   Tue Jul 18 22:52:57 2017 +0530

    lib/igt_fb: Add helper function for tile_to_mod
    
    igt_get_fb_tile_size function takes modifer as an argument
    This helper function will let users to convert tiling to
    modifier and use igt_get_fb_tile_size()
    
    v2: Improved code comment (Paulo)
    v3 (from Paulo): Simple rebase.
    
    Reviewed-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Praveen Paneri <praveen.paneri@intel.com>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 4bb45416a7a55d860ecaf656767ee15fe8128237
Author: Praveen Paneri <praveen.paneri@intel.com>
Date:   Tue Jul 18 22:52:56 2017 +0530

    lib/igt_fb: Let others use igt_get_fb_tile_size
    
    This function can be used by igt_draw to get accurate
    tile dimensions for all tile formats.
    
    v2: Added comments to function igt_get_fb_tile_size (Daniel)
    v3: Fixed errors in comments and coding style (Paulo)
    
    Reviewed-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Praveen Paneri <praveen.paneri@intel.com>

commit 542658a452e7fbd63071dd4be3aa22b1fcc33cf0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jul 25 13:36:17 2017 +0200

    lib/drmtest: Decode driver flags on failure
    
    I spent too much time going wtf why does this test not run until
    realizing that vgem is missing. This should help a lot for tests that
    need multiple different drm drivers.
    
    v2: Distinguish "any" and "other" (Chris).
    
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 76bce77388bcb4f1c0fc8d6245279ec50e12161a
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Thu Jul 20 17:11:52 2017 +0300

    docs: Update documentation generation with missing entries
    
    This adds missing entries for documentation generation, both for tests
    and the API reference.
    
    The list of tests is made complete and ordered alphabetically, with
    modified descriptions for consistency.
    
    More files are added to the API reference, with a minimalistic
    description block added to them when it was missing.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 9f49776fb4afd48f3f6a307f296c62c6452f229d
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jul 20 16:24:08 2017 +0200

    igt: Add debugfs_test.read_all_entries to the fast-feedback list
    
    Every time we add something to debugfs, we test on the new platform
    but forget to test that old platforms still work.
    
    The test adds at most 200 ms extra time, which is worth it considering
    how often we break debugfs.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>

commit 436f93d7e6e3eb68fb6738ad5715ffe66c87a72c
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jul 20 16:10:23 2017 +0200

    tests/debugfs_test: Fix testcases to pass
    
    emon_crash should skip if the debugfs file could not be opened the first
    time, and debugfs_test.read_all_entries should skip files that could not
    be opened, instead of returning an error.
    
    This is because in a typical IGT run there may be more debugfs files
    registered than can be opened.
    
    This is an example on f2-pnv-d510:
    $ grep -r . /sys/kernel/debug/dri/0 >/dev/null
    grep: /sys/kernel/debug/dri/0/i915_sseu_status: No such device
    grep: /sys/kernel/debug/dri/0/i915_energy_uJ: No such device
    grep: /sys/kernel/debug/dri/0/i915_sink_crc_eDP1: No such device
    grep: /sys/kernel/debug/dri/0/i915_emon_status: No such device
    grep: /sys/kernel/debug/dri/0/i915_guc_log_control: Invalid argument
    grep: /sys/kernel/debug/dri/0/i915_fbc_false_color: No such device
    grep: /sys/kernel/debug/dri/0/i915_cur_wm_latency: No such device
    grep: /sys/kernel/debug/dri/0/i915_spr_wm_latency: No such device
    grep: /sys/kernel/debug/dri/0/i915_pri_wm_latency: No such device
    grep: /sys/kernel/debug/dri/0/i915_next_seqno: Permission denied
    grep: /sys/kernel/debug/dri/0/i915_cache_sharing: No such device
    grep: /sys/kernel/debug/dri/0/i915_min_freq: No such device
    grep: /sys/kernel/debug/dri/0/i915_max_freq: No such device
    grep: /sys/kernel/debug/dri/0/i915_pipe_C_crc: No such device
    grep: /sys/kernel/debug/dri/0/i915_forcewake_user: Invalid argument
    grep: /sys/kernel/debug/dri/0/crtc-1/crc/data: Input/output error
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Cc: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
    Cc: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>

commit f8d6afa67a7e863006361e1dfde0c6d1d8cb1dda
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Wed Jul 19 16:50:37 2017 +0300

    tests/chamelium: Detect analog bridges and handle EDID accordingly
    
    Nowadays, many VGA connectors are not actually native VGA but use a
    discrete bridge to a digital connector. These bridges usually enforce
    their own EDID instead of the one supplied by the chamelium.
    
    Thus, the EDID read test for VGA is not relevant in that case and
    should be skipped. Reported modes may also go beyond what the chamelium
    can support. Thus, only supported resolutions should be tested for the
    frame dump test and others should be pruned.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude <lyude@redhat.com>

commit 493151b0768aa4ca535cef49cb7efa174a9c3a77
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Thu Jul 20 17:11:27 2017 +0300

    lib/igt_core: Split out env-related handling to common_init_env
    
    This moves the parts of the code doing env-related handling from
    common_init to a new dedicated common_init_env function, making
    common_init a bit more readable.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude <lyude@redhat.com>

commit f39be72d8c5d001981ef95bddc5e8ecd09d54b84
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Thu Jul 20 17:11:26 2017 +0300

    lib/igt_core: Move all config-related parsing to common_init_config
    
    This moves all the pieces related to config parsing to the dedicated
    function for this purpose, renamed common_init_config for consistency.
    
    It allows making the common_init function less big and more readable.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude <lyude@redhat.com>

commit e246ff0d507a7fb1ddc8a839205f030ed44c21e5
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Thu Jul 20 18:13:37 2017 +0300

    chamelium: Add support for VGA frame comparison testing
    
    This adds support for VGA frame comparison testing with the reference
    generated from cairo. The retrieved frame from the chamelium is first
    cropped, as it contains the blanking intervals, through a dedicated
    helper. Another helper function asserts that the analog frame
    matches or dump it to png if not.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude <lyude@redhat.com>

commit 8cf32fe06c8f54bca11c485ccc1cc3899f9d81db
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Thu Jul 20 18:13:36 2017 +0300

    lib/igt_frame: Add support for analog frame comparison testing
    
    This adds support for analog frame comparison check, as used in VGA.
    Since VGA uses a DAC-ADC chain, its data cannot be expected to be pixel
    perfect. Thus, it is impossible to uses a CRC check and full frames have
    to be analyzed instead. Such an analysis is implemented, based on both
    an absolute error threshold and a correlation with the expected error
    trend for a DAC-ADC chain. It was tested with a couple encoders and
    provides reliable error detection with few false positives.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude <lyude@redhat.com>

commit c42ab4d23f4bafecf51574f538db8f5142519523
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jul 18 18:00:20 2017 +0200

    CONTRIBUTING: formalize review rules
    
    There's a bunch of reasons why I think we should formalize and enforce
    our review rules for igt patches:
    
    - We have a lot of new engineers joining and review helps enormously
      with mentoring and learning. But right now only patches from
      contributors without commit rights are consistently subjected to
      review, which makes this imbalanced and removes senior contributors
      from the review pool.
    
    - We have a much bigger team and we need to make sure we're aligned on
      where igt as a tool and testsuite needs to head towards. Getting
      that alignment happens through reviewing each other's submission.
      Pushing a contentious patch and then dealing with a heated irc
      discussion is much less effective.
    
    - Finally igt becomes ever more important for our testing, making sure
      the code quality is high is important. Review helps with that.
    
    v2: Improve wording a bit (Imre).
    
    Acked-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Jani Nikula <jani.nikula@intel.com>
    Acked-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
    Acked-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Imre Deak <imre.deak@intel.com>
    Acked-by: Robert Foss <robert.foss@collabora.com>
    Acked-by: Ben Widawsky <ben@bwidawsk.net>
    Acked-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Acked-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Acked-by: Eric Anholt <eric@anholt.net>
    Acked-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Acked-by: Lyude <lyude@redhat.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit a865fee5bbfa573823f758b85116e00934083f93
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Thu Jul 20 11:07:42 2017 +0300

    lib/igt_core: Handle glib errors correctly to avoid stderr spew
    
    This adds the required error clean/free calls after calling
    configuration parsing functions. In addition to properly handling memory,
    this avoids glib spewing out error messages on stderr, which breaks the
    whole CI with this message:
    
        GLib-WARNING **: GError set over the top of a previous GError or uninitialized memory.
        This indicates a bug in someone's code. You must ensure an error is NULL before it's set.
        The overwriting error message was: Key file does not have group ?DUT?
    
    Fixes: ee31e0b5 ("Introduce common frame dumping configuration...")
    
    Cc: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Cc: Lyude <lyude@redhat.com>
    Cc: Martin Peres <martin.peres@linux.intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>

commit de99e15db60864cdb177f8fb380e79bb510ff9ea
Author: Lyude <lyude@redhat.com>
Date:   Wed Jul 19 13:46:01 2017 -0400

    igt_core: Add the rest of Paul's patch I forgot by accident
    
    Whoops, I meant to commit the entirity of Paul's patch but it appears I
    forgot to stage all of the changes to igt_core. This should have been
    included in the previous commit.
    
    Signed-off-by: Lyude <lyude@redhat.com>

commit 4c70d6e66faa177ceb072fa346b4cbe3b19330c1
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Wed Jul 19 17:58:59 2017 +0300

    configure.ac: Make glib dependency optional to preserve Android build
    
    This adds ifdef wrappers, with matching autoconf macros, to make the
    dependency on glib (used for parsing configuration) optional.
    
    This allows preserving the ability to build IGT on Android, where glib
    support is lacking.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude <lyude@redhat.com>

commit 8145888a30c3c812cd6b33fb61c9fd969ce74350
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Wed Jul 19 17:58:58 2017 +0300

    configure.ac: Enable back chamelium build by default
    
    Introducing an option for chamelium build inadvertently disabled it by
    default, according to the definition of the AC_ARG_ENABLE macro.
    
    This enables it back chamelium by default.
    
    Fixes: fd096fcc ("configure.ac: Make building chamelium an option")
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude <lyude@redhat.com>

commit 4b5ea65226235a80913c03fd89fa4d5b15c98571
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Wed Jul 19 16:46:10 2017 +0300

    tests/chamelium: Merge the crc testing functions into one
    
    This merges the two test_display_crc_single and
    test_display_crc_multiple functions into one, with a variable number of
    frames to capture. This reduces code duplication.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude <lyude@redhat.com>

commit 5e4e8295e1c89fb33cbc84de11aaa30abba6f4f9
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Wed Jul 19 16:46:09 2017 +0300

    chamelium: Dump captured and reference frames to png on crc error
    
    This adds support for dumping both the frame capture from the chamelium
    and the reference frame generated by cairo when the captured crc does
    not match the crc calculated from the reference, using common helpers.
    
    Getting a dump of the frames is quite useful in order to compare them.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude <lyude@redhat.com>

commit 34a54192e1fb25041d032d92da59d143afa67464
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Wed Jul 19 16:46:08 2017 +0300

    lib/igt_debugfs: Add extended helper to format crc to string
    
    This introduces a igt_crc_to_string_extended helper that allows
    formatting a crc to a string with a given delimiter and size to print
    per crc word.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude <lyude@redhat.com>

commit ee31e0b539c63bb52137f0585605dad3a700a7c0
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Wed Jul 19 16:46:07 2017 +0300

    Introduce common frame dumping configuration and helpers
    
    This introduces a common FrameDumpPath configuration field, as well as
    helper functions in dedicated igt_frame for writing cairo surfaces
    to png files.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude <lyude@redhat.com>

commit 7422d7540a3b9f3b46be1806c96589eaefe7cff3
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Wed Jul 19 16:46:06 2017 +0300

    lib/igt_debugfs: Introduce CRC check function, with logic made common
    
    This introduces an igt_check_crc_equal function in addition to
    igt_assert_crc_equal and makes the CRC comparison logic from the latter
    common. In particular, an igt_find_crc_mismatch function indicates
    whether there is a mistmatch and at what index, so that the calling
    functions can print the diverging values.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude <lyude@redhat.com>

commit e0802ba48505b3690939b11ec82447b700102848
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Wed Jul 19 16:46:05 2017 +0300

    chamelium: Calculate CRC from framebuffer instead of hardcoding it
    
    This introduces CRC calculation for reference frames, instead of using
    hardcoded values for them. The rendering of reference frames may differ
    from machine to machine, especially due to font rendering, and the
    frame itself may change with subsequent IGT changes.
    
    These differences would cause the CRC checks to fail on different
    setups. This allows them to pass regardless of the setup.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude <lyude@redhat.com>

commit b4ad397e1741529aade88c4421430c12f0eaf209
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Wed Jul 19 16:46:04 2017 +0300

    lib/igt_fb: Export the cairo surface instead of writing to a png
    
    This removes the igt_write_fb_to_png function (that was unused thus far)
    and exports the igt_get_cairo_surface function to grab the matching
    cairo surface. Writing to a png is now handled by the common frame
    handling code in lib/igt_frame.
    
    This also fixes how the surface is retreived in chamelium code,
    which avoids destroying it too early.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude <lyude@redhat.com>

commit fb1ddc47003ad6a683db79beeb81b6cbab1feb7c
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Tue Jul 18 18:16:27 2017 +0300

    tests/chamelium: Catch and flush hotplug uevents after each plug
    
    This adds calls to igt_hotplug_detected and igt_flush_hotplugs to catch
    and flush hotplugs from connector unplug (due to chamelium reset) and
    plug. These need to be intercepted so that they are not delayed and
    issued after resume, providing a false positive for the test result.
    
    In addition, the final hotplug uevent flush is brought closer to the
    suspend call, to decrease the likeliness of false positive.
    
    However, false positives still do happen, because it is not possible to
    make sure that the uevent caused by each connector's state change was
    caught instead of being delayed and issued at resume time.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude <lyude@redhat.com>

commit a9443945380f34b47433c2be1b163504018b6f3f
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Tue Jul 18 18:15:52 2017 +0300

    tests/chamelium: Skip suspend/resume test with unreliable hotplug event
    
    It may occur that a hotplug uevent is detected at resume, even though it
    does not indicate that an actual hotplug happened. This is the case when
    link training fails on any other connector.
    
    There is currently no way to distinguish what connector caused a hotplug
    uevent, nor what the reason for that uevent really is. This makes it
    impossible to find out whether the test actually passed or not.
    
    To circumvent this problem, the link status of each connector is
    collected before and after suspend and compared to skip the test if
    the state was good before and turned to bad after resume.
    
    This only concerns the EDID change test, where we cannot check the
    connector state (that is not supposed to have changed). For actual
    hotplug tests, the tests should be safe since they check each
    connector's state after receiving the uevent.
    
    The situation described here happens with DP-VGA bridges that fail link
    training after resume, as they need some more time to response on their
    AUX channel.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit cbc539a3285c7aca7f69399dfb6b4968cb1457fa
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Mon Jul 17 16:53:41 2017 +0300

    lib/igt_debugfs: Update documentation and cleanup
    
    The documentation was lying. The igt_crc_to_string() is threadsafe and
    does not return a pointer to an internal buffer.
    
    Actually the caller is responsible for the memory that is allocated (and
    they are for all the current cases), so let's put that in the doc too.
    
    While I was at it I got rid of strdup() in favor of an early allocation.
    
    Cc: Martin Peres <martin.peres@intel.com>
    Cc: Liviu Dudau <liviu.dudau@arm.com>
    Signed-off-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Martin Peres <martin.peres@intel.com>

commit fd096fcc3362b1178d687f08e63e198ad9d3dd67
Author: Lyude <lyude@redhat.com>
Date:   Mon Jul 17 19:38:32 2017 -0400

    configure.ac: Make building chamelium an option
    
    Originally when chamelium support got added we were expecting basically
    any distribution to already have the required dependencies for it,
    however seeing as someone made chamelium compilation conditional that
    must not actually be the case.
    
    This being said however, when compilation of the chamelium tests/libs
    was made to only build when all of the dependencies were found, nothing
    was actually added to configure.ac to give even the slightest indication
    that chamelium support wasn't going to get built. This ended up breaking
    my autocompletion for the chamelium source files, leading to a multihour
    troubleshooting session where I eventually realized that someone had
    changed building chamelium support from mandatory to automatic.
    
    For now, I'll make this conditional so that people who can't satisfy
    these dependencies can disable this and everyone else can get warnings
    to let them know that they're missing dependencies required to build
    this.
    
    Please add messages in the future to our build scripts when these things
    get changed :\.
    
    Additionally, we also add xmlrpc_util and xmlrpc_client to the
    chamelium dependencies. This isn't required older versions of libxmlrpc,
    but it seems that in newer versions they've changed which packages
    provide which symbols. It shouldn't break building with older versions
    of xmlrpc though.
    
    Signed-off-by: Lyude <lyude@redhat.com>

commit 1b4d6e506f73ba5b0cff35684f2c0b4bef930213
Author: Michel Thierry <michel.thierry@intel.com>
Date:   Wed Jun 28 11:37:33 2017 -0700

    tests/gem_reset_stats: Enforce full chip reset mode before run
    
    Platforms with per-engine reset enabled (i915.reset=2) are unlikely to
    perform a full chip reset, keeping the reset_count unmodified. In order
    to keep the expectations of this test, enforce that full GPU reset is
    enabled (i915.reset=1).
    
    Later on, we can expand the reset_stats ioctl to also return the number
    of per-engine resets and use reset_count + reset_engine_count when
    checking for the updated reset count.
    
    v2: Rebase, don't use gem_gpu_reset_type directly, since we now have
    additional helpers.
    
    Cc: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Signed-off-by: Michel Thierry <michel.thierry@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit bcb9d6f8b9f93610bf5964381431eef5c0dfa675
Author: Michel Thierry <michel.thierry@intel.com>
Date:   Wed Jun 28 11:36:54 2017 -0700

    lib: Add reset-type helper in ioctl_wrappers
    
    Soon we will have tests that are only for platforms with reset-engine
    (GEN8+), so add a helper to query the has_gpu_reset via the getparam ioctl.
    
    v2: Add more helper functions to avoid using magic numbers in tests (Arek).
    
    Cc: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Signed-off-by: Michel Thierry <michel.thierry@intel.com>
    Acked-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 4fd7a5f76dbde723a749ea8e9a8d68b73487b712
Author: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
Date:   Wed Jul 12 12:06:55 2017 +0300

    tests/debugfs_test: Add a shorter timeout when reading sysfs entries
    
    This allows us to proceed gracefully without invoking the global
    CI-level timeout especially when opening the buggy crtc-data
    file descriptor.
    
    Signed-off-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit db0e5fa6ae7b951f41b3055a6b37efedfe6d0f9a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jul 14 19:14:23 2017 +0200

    tests/drm_module_reload: Don't require hda dynamic debug
    
    I can live without those logs, and it avoids a kernel
    recompile&reboot.
    
    Reviewed-by: Dhinakaran Pandiyan <dhinakaran.pandiyan@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit a844ccbdbab9fd16c37de81281c6281bc800e97a
Author: Akash Goel <akash.goel@intel.com>
Date:   Fri Apr 28 20:07:31 2017 +0530

    lib/igt_draw: Add Y-tiling support for IGT_DRAW_BLT method
    
    v2: Moved identical code into a single function (Paulo)
    v3 (from Paulo): stay under 80 columns.
    
    Reviewed-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Akash Goel <akash.goel@intel.com>
    Signed-off-by: Praveen Paneri <praveen.paneri@intel.com>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 64362a8932ba947d3b55c9d7afc5af404bf89224
Author: Praveen Paneri <praveen.paneri@intel.com>
Date:   Fri Apr 28 20:07:33 2017 +0530

    igt/kms_frontbuffer_tracking: Add Y-tiling support
    
    Allow tests to create Y-tiled bufferes using a separate
    argument to the test without increasing the number of
    subtests.
    
    v2: Changed tiling option to string (Paulo)
    v3 (from Paulo): minor nitpicks.
    
    Reviewed-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Praveen Paneri <praveen.paneri@intel.com>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit e51518877eaf39089473396583d1aa2beba4bea8
Author: Jim Bride <jim.bride@linux.intel.com>
Date:   Tue Jul 11 15:48:27 2017 -0700

    tests/kms_frontbuffer_tracking: Fix multidraw subtest
    
    The multidraw subtest was not taking whether or not the GEM buffer had
    ever been in write-combining mode when checking for PSR state, so fix
    that.
    
    Reviewed-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Jim Bride <jim.bride@linux.intel.com>

commit 6e572cfc276874c69c37728d01be64cae268592c
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Tue Jul 11 13:51:01 2017 +0300

    igt: Add LOCAL defines for distro compatibility
    
    Each Linux distro takes a different spin on providing kernel's uapi
    headers (especialy the *drm*.h).
    
    You can get them with linux-headers, you can get them with libdrm.
    Sometime you can even get them twice, from both sources.
    
    Sometimes the headers match your kernel version, sometimes you end up
    stuck with headers matching the kernel that the given release of the
    distro came out with.
    
    This makes things harder for code that does not depend on libdrm, as we
    cannot have sane ./configure-time checks.
    
    So let's define LOCAL_ version for FENCE and EXECBUFFER2_WB defines
    until all the stable distros catch up (+/- some epsilon).
    
    Cc: Petri Latvala <petri.latvala@intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Emil Velikov <emil.l.velikov@gmail.com>

commit 4258cc8ea26208a7e9537977df5e4b8c9dcf0e74
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jul 6 07:47:47 2017 +0200

    igt/kms: Do not wait for fence completion during commit
    
    This will make the IGT tests that use fences more useful, since they can
    perform the waiting themselves when required.
    
    To celebrate, also add plane-use-after-nonblocking-unbind-fencing,
    the fence version of plane-use-after-nonblocking-unbind.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Acked-by: Gustavo Padovan <gustavo.padovan@collabora.com>

commit 1fd51add8fbfc2974a2d0a2a20ae83cd76f0a2de
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Jul 5 14:15:01 2017 +0200

    tests/kms_atomic_transition: Do not clear in-fences after atomic commit.
    
    This is already done in igt_display_commit* functions.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Acked-by: Gustavo Padovan <gustavo.padovan@collabora.com>

commit 99c4c527214668337dd4495b495ec3d6c83ee280
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Jul 5 14:13:22 2017 +0200

    tests/kms_atomic_transition: Only request fence on enabled pipes
    
    Trying to set a fence on disabled pipes will be rejected by the kernel:
    [ 1275.865029] [drm:drm_atomic_check_only [drm]] [CRTC:39:pipe B] requesting event but off
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=99911
    Acked-by: Gustavo Padovan <gustavo.padovan@collabora.com>

commit 2e6819cd722611b41f67261afd7b060902af08fe
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Jul 5 14:01:02 2017 +0200

    lib/kms: Handle fence interaction correctly WRT TEST_ONLY.
    
    All other atomic properties are reset in display_commit_changed,
    which is the right place because TEST_ONLY commits don't need to
    be reset.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Acked-by: Gustavo Padovan <gustavo.padovan@collabora.com>

commit 33fd63f5067d0850bb89f2a09f410a76cd564534
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Jul 4 14:23:53 2017 +0200

    tests/kms_atomic_transition: Add test for plane completion ordering.
    
    When a plane gets disabled, that commit has to complete before an
    atomic commit on that disabled plane only. Else for the old commit,
    new_plane_state may have been freed.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Acked-by: Gustavo Padovan <gustavo.padovan@collabora.com>

commit 5071ed7e5729150fde180880aa2160f6f57de633
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jul 8 12:19:34 2017 +0100

    igt/gem_exec_params: Exercise BATCH_FIRST
    
    Trivial test to alternate executing a batch either stored in the last
    slot (default) or the first slot (EXEC_BATCH_FIRST).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4b8e1273d36acf63ec071f015059fe5b2a8f8aac
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 7 21:28:22 2017 +0100

    igt/gem_exec_params: Update negative flags test.
    
    Negative testing ftw.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a8bfef786bf56a7b37e76c0d7f0e4363fe9e92ff
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 7 16:27:05 2017 +0100

    igt/gem_spin_batch: Add per-loop timing info
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=101717
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f877275b1361f4d31e015a69a6c0c04b6ad38baf
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Jun 30 17:51:47 2017 +0300

    tests/kms_flip: Make panning tests actually pan all the time
    
    Currently the panning tests actually stop panning when they hit the
    right edge fo the framebuffer. Let's make them ping-pong across the
    fb to make it clear that they are indeed trying to pan around all the
    time.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit b389bdb28424f7d271cbb82070116c0934eabc2f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jul 7 13:56:02 2017 +0200

    Revert "configure: Bump libdrm to 2.4.76"
    
    This reverts commit 218eb00f3bd0a0e8dd9bb184f6df1550593e8d27.
    
    Accidentally pushed I patch that wasn't meant to be.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 218eb00f3bd0a0e8dd9bb184f6df1550593e8d27
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri May 26 10:41:48 2017 +0200

    configure: Bump libdrm to 2.4.76
    
    We need this for AMDGPU_FAMILY_AI. Fixes:
    
    commit 36b92e809f378e18af980ffa5b29361bd28098cb
    Author: Chris Wilson <chris@chris-wilson.co.uk>
    Date:   Sat Apr 22 13:45:18 2017 +0100
    
        igt: Import basic amdgpu tests from libdrm
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit ebd6eb69f57b0f36a4bf9978b5c47ba4be86d261
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Tue Jul 4 16:33:19 2017 +0300

    Make igtrc configuration common, with configurable suspend/resume delay
    
    This adds support for configurable suspend/resume delay and takes the
    occasion to move igtrc configuation from igt_chamelium to igt_core.
    This way, suspend/resume delay configuration can be used for all tests.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit 80aa69fd675bce77dda751e5e5c5d651e9f08e1e
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Mon Jul 3 15:01:12 2017 +0300

    chamelium: Remove init reset duplicate in favor of per-test reset
    
    Since most tests are already doing a reset, there is no need to
    duplicate it at init time. This removes that duplicate reset and adds
    a call to reset_state where in-test resets where not done previously.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit ec91c56e2a480ce469e9f7d5a184c131442bf65a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jul 6 14:01:56 2017 +0100

    Revert "igt: Remove default from the engine list"
    
    This reverts commit d7a0b61450797a3d6644c65aebf75c2a90da1a15.

commit be87623bc6ce7262a710d4b80431c8bbc16d0a74
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jul 6 14:00:52 2017 +0100

    Revert "gem_exec_basic: Exercise the default engine selection"
    
    This reverts commit f807953c4e90870df940ecb0e4b5c51caa50167e.

commit d83911f0b856a0d3ff7ac386889aa3ea3b08101a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jul 6 14:00:20 2017 +0100

    Revert "extended.testlist: Remove some test-subtest combinations"
    
    This reverts commit 537c4849d476661409425b0e2a5ad8bce4c561eb.

commit 537c4849d476661409425b0e2a5ad8bce4c561eb
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Fri Jun 23 12:31:43 2017 +0100

    extended.testlist: Remove some test-subtest combinations
    
    For tests with attempt to hit races and such by running for
    relatively long time, it seems that it might be possible to get
    by only testing some subtest-engine combinations as long as in
    total we still exercise all engines per test.
    
    More precisely, I think that if we view our engines as fast
    (!rcs) and a little less fast (others), we group the race
    hitting tests in those two camps, we keep the same coverage
    by running each subtest against each engine group.
    
    v2: Replace individual engine gem_sync subtests with all
        variants. (Chris Wilson)
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@intel.com>

commit 6b98d90495698065cc927956d25b99bf62b9eb1c
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Fri Jun 23 12:31:42 2017 +0100

    gem_sync: Add all and store_all subtests
    
    Extended versions of the already existing short tests.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Suggested-by: Chris Wilson <chris@chris-wilson.co.uk>
    Acked-by: Daniel Vetter <daniel.vetter@intel.com>

commit f807953c4e90870df940ecb0e4b5c51caa50167e
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Fri Jun 23 12:31:41 2017 +0100

    gem_exec_basic: Exercise the default engine selection
    
    Exercise the ABI with a basic test now that we have removed the
    defaul engine alias from the engine list.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@intel.com>

commit d7a0b61450797a3d6644c65aebf75c2a90da1a15
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Fri Jun 23 12:31:40 2017 +0100

    igt: Remove default from the engine list
    
    Default is not an engine but an ABI alias for RCS. Remove it
    from the engine list to eliminate redundant subtests and test
    passes.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@intel.com>

commit 8cb5656fd46d4b4d96b85b487a15f6d9c436b104
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Tue Jul 4 16:28:58 2017 +0300

    configure.ac: Make AMDGPU depend on libdrm >= 2.4.76
    
    AMDGPU_FAMILY_AI was introduced in commit being part of libdrm 2.4.76
    release and amd_basic tests are using that define.
    
    Since the module is turned on by default this results in compilation
    failing on machines with older libdrm.
    
    Let make them fail on ./configure step instead.
    
    Cc: Leo Liu <leo.liu@amd.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Reported-by: Martin Peres <martin.peres@intel.com>
    Signed-off-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 437e0c6c17697715eb2058632beeeff0327c5f9d
Author: Michał Winiarski <michal.winiarski@intel.com>
Date:   Tue Jul 4 16:43:08 2017 +0200

    tests/gem_mocs_settings: Fix LNCFCMOCS testing and extract the subtests
    
    Testing LNCFCMOCS values on non-render engines is tricky. The values in
    those registers are lost on RC6, which means that if users of non-render
    engines want to see the proper values, they need to obtain a forcewake
    and execute something on render (relying on it to restore the values)
    before using non-render engine.
    Previous version of the test did exactly that - we were relying on the
    fact that we're taking forcewake (hidden by intel_register_access_init,
    even though the test is not doing any mmio accesses) before iterating
    through engines (and render is before other engines, so job done).
    I really hope that this is not an ABI and those registers are not used
    on non-render in any way. Let's limit testing LNCFCMOCS to render
    engine only.
    The other non-render issue is that when we're using I915_EXEC_BSD, we
    can't be sure which BSD ring we'll end up executing on. Let's
    explicitly select BSD1 and BSD2 in our tests.
    While we're here, let's also remove the duplicated code and add some
    structure by extracting moving more content into subtests.
    We're only doing tests that involve "dirtying" the registers for the
    render engine - since it's the only one that has those registers in its
    context.
    
    v2: Do not skip all BSD engines, test non-default contexts on render
    only, change names in CI extended.testlist
    
    Cc: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: David Weinehall <david.weinehall@linux.intel.com>
    Cc: Łukasz Kałamarz <lukasz.kalamarz@intel.com>
    Signed-off-by: Michał Winiarski <michal.winiarski@intel.com>
    Reviewed-by: Łukasz Kałamarz <lukasz.kalamarz@intel.com>

commit e54168931c55e53f9abbc221d56600525a8d8983
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jul 6 11:39:30 2017 +0100

    igt/core_auth: Print out the number of magics retrieved
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 91b26a7559ee58a101fc27822bfa0e6528d8b6a5
Author: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
Date:   Thu Jul 6 10:43:22 2017 +0300

    Revert "igt/debugfs_test: Skip dummy reads for crtc-n/crc/data"
    
    This reverts commit 9a6ed6c6398c2218d65392593fa43852810515cc.
    
    Test actually exposes a bug in the kernel where opening the crtc-data
    file takes a long time.
    
    Cc: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Cc: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 9a6ed6c6398c2218d65392593fa43852810515cc
Author: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
Date:   Mon Jul 3 13:19:33 2017 +0300

    igt/debugfs_test: Skip dummy reads for crtc-n/crc/data
    
    When descending thru debugfs directory. Doing this tends to
    takes forever. CRC pipe read tests for this are already
    covered under kms_pipe_crc_basic.
    
    v2: Be more verbose that the check is meant for the crtc control data
    
    Signed-off-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
    Cc: arkadiusz.hiler@intel.com
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit df66d04b80f6665d27125fce7d8992ce72473d75
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Jul 4 13:21:09 2017 +0200

    tests/debugfs_test: Allow opening CRC to fail with -EIO.
    
    This currently only happens when the power well is not enabled,
    but in theory should happen every time the file is opened when
    the CRTC is not enabled.
    
    This fixes debugfs_test@read_all_entries failing on f2-bxt-j3405.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 0d84b26008f65a339cffec9fea95d3a7e713740a
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Jul 4 12:11:10 2017 +0200

    tests/kms_atomic_transitions: Use igt_display_require_output().
    
    Use the convenience function instead of handrolling it.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 6fcc8e8b247661c7950b998e0b95141ffbd6b833
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Jun 14 10:17:31 2017 +0200

    tests/kms_cursor_crc: Fix the cursor tests to work on CHV
    
    On CHV pipe C when the cursor is visible with a negative X coordinate
    a FIFO Underrun will occur. The kernel worked around this by disallowing
    cursor updates on pipe C at negative X coordinates when the cursor is
    visible.
    
    This was done in the following kernel commit:
    commit ef8dd37af85a8f37ca3a29074647511e52c56181
    Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Date:   Fri Dec 18 19:24:39 2015 +0200
    
        drm/i915: Workaround CHV pipe C cursor fail
    
    kms_chv_cursor_fail was created to test this issue, but it also happens
    in kms_cursor_crc, so workaround it there too.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Cc: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Acked-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=97960

commit 44d9177502a614685f22965575438d1649959384
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Fri Jun 30 14:00:45 2017 -0700

    lib/i915_pciids.h: Organize cnl/cfl ids.
    
    No functional change.
    
    When CNL patches got rebased on top of cfl
    the ids ended up in the middle of CFL ids. So let's
    clean-up this mess a bit.
    
    Also remove a spurious line.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 7c4e91a41fbe01eb3595a9dcaa0bb221d9b6b058
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jun 30 15:00:52 2017 +0100

    igt/gem_exec_fence: Test EXEC_FENCE_SUBMIT
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit be2e7badd750858a499c862620768cffcac20295
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Thu Jun 29 14:16:57 2017 -0700

    lib/intel_batchbuffer: Add Gen10 support for render_copy and gpgpu_fillfunc.
    
    None of the fields we use on render_copy and gpgpu_fill has changed
    when compared to gen9. So let's reuse them.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit f03ce8855e008adbc1822975977a1cf1d826fd35
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Thu Jul 7 13:52:44 2016 -0700

    lib/instdone: Add Gen10 support.
    
    Apparently nothing changed since BDW on these instdone bits.
    So let's reuse instead of empty duplication.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit cf3bcf89453372bab70e2be3280be9473f280af1
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Wed Jan 4 15:38:07 2017 -0800

    lib/cnl: Add Cannonlake PCI IDs for Y-skus.
    
    By the Spec all CNL Y skus are 2+2, i.e. GT2.
    
    This is a copy of merged i915's
    commit 95578277cbdb ("drm/i915/cnl: Add Cannonlake PCI IDs for Y-skus.")
    
    v2: Based on Anusha's kernel clean-up.
    
    Cc: Anusha Srivatsa <anusha.srivatsa@intel.com>
    Cc: Clinton Taylor <clinton.a.taylor@intel.com>
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Reviewed-by: Clinton Taylor <clinton.a.taylor@intel.com>

commit 91fc531022203edf768fc6885c230544bd1b3621
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Wed Jan 4 15:36:05 2017 -0800

    lib/cnl: Add Cannonlake PCI IDs for U-skus.
    
    Platform enabling and its power-on are organized in different
    skus (U x Y x S x H, etc). So instead of organizing it in
    GT1 x GT2 x GT3 let's also use the platform sku.
    
    This is also the new Spec style what makes the review much
    more easy and straightforward.
    
    This is a copy of merged i915's
    commit e918d79a5d0a ("drm/i915/cnl: Add Cannonlake PCI IDs for U-skus.")
    
    v2: Based on Anusha's kernel clean-up.
    v3: Add kernel commit id for reference.
    
    Cc: Anusha Srivatsa <anusha.srivatsa@intel.com>
    Cc: Clinton Taylor <clinton.a.taylor@intel.com>
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Reviewed-by: Clinton Taylor <clinton.a.taylor@intel.com>

commit 23536e0e07493c3e2a5f5163de8c9143afe4a27f
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Wed Jan 4 15:22:36 2017 -0800

    lib/cnl: Introduce Cannonlake platform defition.
    
    Cannonlake is a Intel® Processor containing Intel® HD Graphics
    following Kabylake.
    
    It is Gen10.
    
    Let's start by adding the platform definition based on previous
    platforms.
    
    On following patches we will start adding PCI IDs and the
    platform specific changes.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit e172606b1f70dd4f2eebe71d4b653ef53a565f05
Author: Anusha Srivatsa <anusha.srivatsa@intel.com>
Date:   Wed Jun 28 23:16:15 2017 -0700

    lib/cfl: Add PCI Ids for U SKU in CFl
    
    Follow the spec and add ID for U SKU
    
    v2: Update IDs in accordance to the kernel commit:
    d29fe702c9cb682df99146d24d06e5455f043101 (Chris)
    
    Cc: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Signed-off-by: Anusha Srivatsa <anusha.srivatsa@intel.com>
    Reviewed-by: Clint Taylor <clinton.a.taylor@intel.com>

commit 2c299482351dc0253ce88a693ae70ecac81b8b31
Author: Anusha Srivatsa <anusha.srivatsa@intel.com>
Date:   Wed Jun 28 23:16:14 2017 -0700

    lib/cfl: Add PCI IDs to H SKU in CFl
    
    Follow the spec and add the ID for H SKU in
    CFL.
    
    v2: Update IDs following kernel commit:
    ccfd13215fd25a0e8c28221f3acc0dcaec11cd15 (Chris)
    
    Cc: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Signed-off-by: Anusha Srivatsa <anusha.srivatsa@intel.com>
    Reviewed-by: Clint Taylor <clinton.a.taylor@intel.com>

commit 79f16f3f2f3694685cbabafa902776ac39e3dd90
Author: Anusha Srivatsa <anusha.srivatsa@intel.com>
Date:   Wed Jun 28 23:16:13 2017 -0700

    lib/cfl: Add Coffeelake PCI IDs for S SKU.
    
    Just following the spec and adding these extra IDs.
    
    v2: update IDs following the kernel commit:
    b056f8f3d6b900e8afd19f312719160346d263b4 (Chris)
    
    Cc: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Signed-off-by: Anusha Srivatsa <anusha.srivatsa@intel.com>
    Reviewed-by: Clint Taylor <clinton.a.taylor@intel.com>

commit 68a3eb192d4653860f7336610a7ecc3bc31472d5
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Wed Jan 4 15:09:35 2017 -0800

    lib/cfl: Introduce Coffeelake platform definition.
    
    Coffeelake is a Intel® Processor containing Intel® HD Graphics
    following Kabylake.
    
    It is Gen9 graphics based platform on top of CNP PCH.
    
    On following patches we will start adding PCI IDs and the
    platform specific changes.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Reviewed-by: Clinton Taylor <clinton.a.taylor@intel.com>

commit d1baebc2fe147f702022c7ec818fb5d7b1965192
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jun 29 17:41:05 2017 +0100

    igt/gem_ctx_switch: Actually force the context-switch
    
    The intent is that during interruptible runs we always force a
    relocation between batch. This requires us to set an invalid
    presumed_offset.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0552e40727a4d95967a9f95954e6046eb3ddca5d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jun 29 17:40:10 2017 +0100

    igt/gem_cpu_reloc: Fix presumed_offset
    
    The content of the batch may no longer match the offset/presumed_offset
    pair, so force the relocation by setting reloc.presumed_offset=-1
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0aa9fd12a2f25faa9a7625a1896c31b0d257390f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jun 29 17:16:27 2017 +0100

    igt/gem_reloc_overflow: Pass the right invalid presumed_offset
    
    Several tests were passing a presumed_offset that matches the actual
    offset of the object and so were very suprised when the kernel promptly
    skipped performing the relocation (as expected).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2fd6adaf2ebdfac4a3091880d047a3feda81db49
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Wed Jun 28 13:27:59 2017 +0300

    lib/ioctl_wrappers: Fix some comments
    
    "This is a wraps" -> "This wraps"
    "hw/hardware context" -> "context"
    
    gem_context_create does not use igt_require() but igt_skip_on() so make
    the similarity note more vague and in result true.
    
    Cc: Daniel Vetter <daniel.vetter@intel.com>
    Cc: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Signed-off-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>

commit cec2d4a846c073b19ecff2c2eff917bf6c1cd7b8
Author: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
Date:   Fri Jun 23 16:01:05 2017 +0200

    lib/ioctl_wrappers: Fix function descriptions
    
    Function description incorrectly stated that gem_context_get_param
    and gem_context_set_param were freeing hw context.
    
    v2: removed additional incorrect information
    
    Signed-off-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 9120ee572f86ed6f3da088187043785d1da340c9
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Jun 28 12:49:35 2017 +0200

    tests/kms_busy: Remove gem_bo_busy checks
    
    They're not useful since GPU reset may kill off our spin batch.
    
    This used to be the case but wasn't in the kernel when I wrote this
    test. But the following commit reintroduced this behavior:
    
    commit 36703e79a982c8ce5a8e43833291f2719e92d0d1
    Author: Chris Wilson <chris@chris-wilson.co.uk>
    Date:   Thu Jun 22 11:56:25 2017 +0100
    
        drm/i915: Break modeset deadlocks on reset
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 9cb998fcaacb25d0d5cca377c498d4063f707501
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Jun 28 09:27:54 2017 +0200

    tests/kms_atomic: Add test for new DRM_MODE_PAGE_FLIP_EVENT behavior.
    
    DRM_MODE_PAGE_FLIP_EVENT is now rejected if no CRTC is affected by the
    changes. Make sure the TEST_ONLY test keeps working, and test with
    DRM_MODE_PAGE_FLIP_EVENT.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7d714b2e7221c44ffb2c538173fc249bfa7a3ac7
Author: Paul Kocialkowki <paul.kocialkowski@linux.intel.com>
Date:   Tue Jun 27 13:53:08 2017 +0300

    tests/chamelium: Reduce the simple hotplug test toggle count for VGA
    
    Since VGA hpd detection is done through RGB lines load detection and
    nowadays often goes through a bridge to some digital interface, HPD
    detection usually takes a while (up to a couple seconds).
    
    Thus, it is not as relevant to stress it as many as 15 times.
    This brings the toggle count down to 5 times, which makes the test run
    a lot faster without really changing the outcome much.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit 2b15b2df35d7be1c5a36bd77c580d07efcd8deea
Author: Paul Kocialkowki <paul.kocialkowski@linux.intel.com>
Date:   Tue Jun 27 13:53:07 2017 +0300

    tests/chamelium: Add VGA HPD toggle tests after suspend and hibernate
    
    This adds HPD toggle after suspend and hibernate testing for VGA, in the
    same fashion as currently done for DP and HDMI and includes VGA in the
    common suspend and hibernate test.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit fa8b6ee5e5547e2d757ad4f7da33ec46cab0703c
Author: Paul Kocialkowki <paul.kocialkowski@linux.intel.com>
Date:   Tue Jun 27 13:53:06 2017 +0300

    chamelium: Add support for HPD toggle scheduling instead of async pulses
    
    This adds support for the newly-introduced ScheduleHpdToggle XMLRPC
    method of the Chamelium's interface and makes use of it instead of
    starting pulses with an asynchronous call, suspending and dealing with
    the result at resume.
    
    The XMLRPC library does not guarantee that the call will be made before
    caring for its outcome and this is in fact what was happening:
    the call was being delayed until resume time, as can be seen from the
    Chamelium's logs. The quite generous timeout for HPD event detection
    would then catch the toggle, that was sent after resume.
    
    This is especially useful for testing HPD during suspend/resume.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit d1b08a89edeab5df3c1ca10cb74a5b527fee84d3
Author: Paul Kocialkowki <paul.kocialkowski@linux.intel.com>
Date:   Tue Jun 27 13:53:05 2017 +0300

    lib/igt_aux: Use provided autoresume delay for rtc wake
    
    This stores the autoresume delay provided via igt_set_autoresume_delay
    for use during suspend via rtc wake scheduling. This delay was
    previously only used for pm_test suspendm while the function suggests
    it should be applied to all autoresume cases.
    
    There is also definitely a use case for configuring the rtc wake delay,
    so this implements it.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit 8d300218439724551873b5ab46b270ecc17f290d
Author: Paul Kocialkowki <paul.kocialkowski@linux.intel.com>
Date:   Mon Jun 26 16:59:02 2017 +0300

    tests/chamelium: Use 50 ms delay to wait for connector change
    
    Using a 1 s delay seems too large for detecting a connector change, that
    may happen faster than this. Since the constraints on execution time are
    high, it is preferable to use a much smaller sleep time.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit a22b4b12cc61a842d92503951cbc2c7c607fa8dd
Author: Paul Kocialkowki <paul.kocialkowski@linux.intel.com>
Date:   Mon Jun 26 16:59:01 2017 +0300

    tests/chamelium: Check all connectors state for basic hotplug
    
    Without doing a full reprobe, hpd toggles are sent without much delay
    between them. With a VGA connector attached, the reset occurring before
    the test will toggle its state, with a delay (inherent to hpd detection
    on VGA).
    
    It often occurs that this VGA state toggle is detected in the middle of
    the current connector test, triggering a hotplug event unrelated to the
    current connector and thus causing the test to fail.
    
    Thus, the state of all connectors is checked (and waited for) before
    running the basic hotplug test.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit 6fb973cfa7bd85c9cc081857a77c3f0e8e1a9154
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 21 14:33:18 2017 +0100

    igt/vgem_basic: Test DRM_IOCTL_SETVERSION
    
    vgem is a nasty test case for various parts of the core as it is a
    virtual device with drm_device.dev == NULL; this includes drm_setversion
    for example.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ee4baf0c8d1a9d6990791dc1e468db3619d93cf0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jun 22 11:51:29 2017 +0100

    igt/gem_reloc_overflow: Fix limits for buffercount overflow
    
    It's hard to overflow a 64-bit value from a 32-bit uabi...
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 310eaeb60579110c5a8e2f31d87ec659ab66b3b8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jun 5 11:55:57 2017 +0100

    lib: Force global reset + uevents for hang detector
    
    The hang detector relies on a uevent for notification and aborting the
    test. As proposed, fine-grained resets may not produce a global uevent
    and so this hang detection becomes void. As we don't expect any hang, we
    can just reduce the reset to only a global + uevent and so maintain
    functionality, and switch back to fine-grained resets afterwards.
    
    Note that any test that requires testing fine-grained resets should
    ensure that they are enabled first as igt may leave the global
    parameters in an inconsistent state.
    
    v2: Restore fine-grained resets for explict igt_allow_hang()
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Michel Thierry <michel.thierry@intel.com>
    Reviewed-by: Michel Thierry <michel.thierry@intel.com>

commit d517ee729ddbe2bb8a5c6cc10e7ce35d73a8bd82
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Wed Jun 21 10:15:41 2017 +0300

    Revert "igt/pm_rps: Remove remaining assert on CUR <= MAX"
    
    This reverts commit ae8d240b4d742a51f99e7fbe428392041aec160b.
    
    This constrain still should be in effect, as noted by Michal Winiarski.
    
    There's no client boost in the scenario when the check happens, so CUR
    freq should never exceed the MAX.
    
    Cc: Jeff Mcgee <jeff.mcgee@intel.com>
    Cc: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Cc: Michal Winiarski <michal.winiarski@intel.com>

commit fea6f86a0ac977e2b9da8b72aabbda8e3ef89aec
Author: Paul Kocialkowki <paul.kocialkowski@linux.intel.com>
Date:   Mon Jun 19 12:39:05 2017 +0300

    tests/chamelium: Add common suspend and hibernate tests for DP and HDMI
    
    This adds two new tests: common-hpd-after-suspend and
    common-hpd-after-hibernate that are aimed at testing HPD change during
    suspend/hibernate for both DP and HDMI, at the same time.
    
    The interest in bringing this test up is to reduce the time spent in
    testing, with the downside of less precision regarding the test's
    outcome. The per-connector tests are still available to get a more
    precise idea of which connector causes a failure, when that happens.
    
    VGA is explicitly excluded from this test as there is currently no
    way of doing delayed hpd pulses for it.
    
    The generic hpd suspend/resume test code is split in a dedicated
    function, that allow testing one or all possible ports.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit d4e93774ef84ae6c4bbd104d51865ef9c802a3ae
Author: Antonio Argenziano <antonio.argenziano@intel.com>
Date:   Mon Jun 12 14:37:05 2017 -0700

    igt/gem_reset_stats: Fix pending batches status expectation
    
    Test expects pending batches to be discarded after a reset. After commit
    821ed7df6e2a ("drm/i915: Update reset path to fix incomplete requests"),
    That is no longer the case. Fixed to expect a normal execution.
    
    V2: Updated commit message (Michel Thierry)
    
    Cc: Michel Thierry <michel.thierry@intel.com>
    
    Signed-off-by: Antonio Argenziano <antonio.argenziano@intel.com>
    Reviewed-by: Michel Thierry <michel.thierry@intel.com>

commit ae8d240b4d742a51f99e7fbe428392041aec160b
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Wed Jun 14 12:44:01 2017 -0700

    igt/pm_rps: Remove remaining assert on CUR <= MAX
    
    This completes the change started by:
    
    commit 39cccab83b7c515a2b57abe679a8cb304c8933ef
    Author: Chris Wilson <chris@chris-wilson.co.uk>
    Date:   Fri May 19 09:41:40 2017 +0100
    
        igt/pm_rps: Allow CUR to be greater than MAX (overclocking)
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>
    Reviewed-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>

commit c4d4d09428f647eac758ca26596248dc9573f3b5
Author: Brian Starkey <brian.starkey@arm.com>
Date:   Fri Jun 16 15:00:06 2017 +0100

    lib/igt_kms: Fix override_mode handling
    
    Changelog:
    - v2: removed the forced overwrite of output->config.default_mode
    - v1: original submission by Brian
    
    igt_display_commit isn't refreshing all outputs anymore, which means
    that an override mode may never get picked up.
    
    Instead of forcing a reprobe to handle copying the override_mode into
    default_mode, just change igt_output_get_mode() to return the
    override_mode if it's been set, and remove the old code which would
    directly overwrite default_mode.
    
    This should be more robust, as igt_output_get_mode() will always return
    the correct mode, without needing the output to be reprobed.
    
    This change means that output->config.default_mode always contains the
    "non-overridden" default mode.
    
    Signed-off-by: Brian Starkey <brian.starkey@arm.com>
    Signed-off-by: Liviu Dudau <liviu.dudau@arm.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 31f71d62d5ffb1ab6298517c5cd5f0dac3b8a35a
Author: Gabriel Krisman Bertazi <krisman@collabora.co.uk>
Date:   Tue Jun 20 01:11:28 2017 -0300

    igt/kms_pipe_crc_basic: Skip test before system suspend
    
    Do a dummy crc read such that if there are no valid outputs for the
    pipe, it skip the test before doing a system suspend.
    
    Signed-off-by: Gabriel Krisman Bertazi <krisman@collabora.co.uk>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 4059adf21fb4c00ae5f75f28321393eec0ef1fed
Author: Gabriel Krisman Bertazi <krisman@collabora.co.uk>
Date:   Tue Jun 20 01:11:27 2017 -0300

    igt/kms_pipe_crc_basic: Print pipe name when skipping
    
    Signed-off-by: Gabriel Krisman Bertazi <krisman@collabora.co.uk>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 424013e53fd32d4085a100257745444fabf9c97a
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Jun 20 10:27:16 2017 +0200

    igt/meta_test: Add a warn subtest to make sure warnings are caught as expected.
    
    Cc: Marta Löfstedt <marta.lofstedt@intel.com>
    Cc: Petri Latvala <petri.latvala@intel.com>
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Marta Lofstedt <marta.lofstedt@intel.com>

commit 3671dfc264da055ed36786caf8abc8843e003a1b
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Jun 19 14:06:40 2017 +0200

    tests/kms_busy: Add test to reproduce the CI kms_flip killer
    
    When aborting kms_flip.render-flip-vs-modeset in CI the test hangs
    on RMFB. Make a test that simulates nonblocking stuck pageflip vs
    blocking modeset.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 1345a21886d7606b59225d3c4f5e03fa913e1ac7
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jun 15 16:24:57 2017 +0200

    tests/kms_flip: degrade warn to debug
    
    This is explicitly tested in kms_setmode.basic
    
    Suggested-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 9918014df55d0393f99a31e3c398a4b38c90bb80
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Jun 19 15:25:09 2017 +0300

    tests/kms_rmfb: Fix cursor fb size
    
    Don't use the display mode size to determine the cursor fb size. That
    will lead to a framebuffer with a stride that the cursor plane won't
    support. Just use the max cursor size as the fb size instead.
    
    This started to trip up after i915 started to actually use the cursor fb
    stride in commit 1e1bb8710e60 ("drm/i915: Use fb->pitches[0] in cursor code")
    
    Cc: Marta Löfstedt <marta.lofstedt@intel.com>
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=97975
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 2dce9ab2a4a716aa135f89f816813b229e6199c2
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Mon Jun 19 12:59:02 2017 +0300

    tests: Cleanup after .sh -> .c conversion
    
    .sh files with option parsing and other helpers are gone, as nothing
    were using them.
    
    Extended test list updates:
     * changed the already converted
     * maintained alphabetical ordering
     * igt@test_rte_check was removed from the list as it tested the sh
       library which is now gone
    
    Cc: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
    Cc: Petri Latvala <petri.latvala@intel.com>
    Signed-off-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit db54f9891f10bc90da26a6cbf198577f0ee99803
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Fri Jun 16 17:19:02 2017 +0300

    lib/igt_chamelium: Create pixman image with bytes per pixel, not bits
    
    The pixman_image_create_bits function expects bytes per pixels as fifth
    argument, not bits per pixels.
    
    This divides the PIXMAN_FORMAT_BPP macro's result by 8 to get it in
    bytes per pixels instead of bits per pixels.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit df682176524f034a1cecee457152f87e63f65113
Author: Leo (Sunpeng) Li <sunpeng.li@amd.com>
Date:   Fri Jun 9 17:13:04 2017 -0400

    tests: Rename I915_MAX_PIPES to IGT_MAX_PIPES
    
    Name should not be driver-specific.
    
    Signed-off-by: Leo (Sunpeng) Li <sunpeng.li@amd.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 597cae9b7e36b8d1f95a1102fd4aab9c2e3b18fe
Author: Leo (Sunpeng) Li <sunpeng.li@amd.com>
Date:   Fri Jun 9 17:08:53 2017 -0400

    tests: Increase value of I915_MAX_PIPES to 6
    
    Increasing max pipe count to 6 to support AMD GPU's.
    
    Since some tests' behavior depends on this value, small changes are made
    to remove this dependency:
    
    * kms_ccs: Early abort if wanted_pipe is out-of-bounds.
    * kms_concurrent: Check if pipe is within bounds first.
    * kms_pipe_color: Prevent skipping of subsequent tests by placing
        generated tests in a 'igt_subtest_group'.
    * kms_plane: Move pipe and plane index checking to subtest group level.
    
    v2: Change invalid pipe check on kmstest_pipe_name() to use
    I915_MAX_PIPE
    
    v3: Change tabs to spaces in 'enum pipe'
    
    Signed-off-by: Leo (Sunpeng) Li <sunpeng.li@amd.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Tested-by: Tomi Sarvela <tomi.p.sarvela@intel.com>

commit 8ead46cb63b0f94a4e878df623332e311ac172ac
Author: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
Date:   Fri Jun 16 14:09:56 2017 +0300

    Convert tools shell tests to C version
    
    v4: Go thru /dev/kmsg instead of dmesg | grep .... (Arek).
        Split conversion to couple of patches.
    
    Converted:
         - sysfs_l3_parity
         - test_rte_check  (same as check_drm_clients)
         - tools_test
         - ZZ_check_dmesg
    
    Signed-off-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
    Cc: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 89b93c0a92153d9f685a29ffc48331d7feb52b77
Author: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
Date:   Wed Jun 14 11:30:21 2017 +0300

    Convert debugfs shell tests to C version
    
    v4: Rename get_sysfs_entry -> read_and_discard_sysfs_entry,
        assert on null igt_sysfs_get() (Arek).
    
    v3: Drop redundant test covered by drv_hangman/basic. Descend thru
        debugfs path when reading sysfs entries (Chris).
    
    v2: Use internal igt_debugfs functions instead of cat and document
        debugfs tests.
        Convert sysfs_l3_parity properly.
        Rename redundant names in tests.
    
    Converted:
     - debugfs_emon_crash
     - debugfs_wedged
     - drv_debugfs_reader
    
    Cc: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Signed-off-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit c9cbe3b63bd7af1594150aa583dc67157607e68b
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Wed Jun 14 14:47:46 2017 +0300

    tests/chamelium: Set output pipe after mode change to refresh output
    
    This adds a call to igt_output_set_pipe in orde to refresh output via
    igt_output_refresh and ensure that mode override can take effect.
    
    Without this change, using a lower resolution during frame dumps
    series with mode changes (e.g. test_display_frame_dump) would not
    commit the mode change to the output and leave it with a framebuffer
    too small for the previously-commited resolution.
    
    This would cause the test to fail. This allows it to pass.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Lyude Paul <lyude@redhat.com>

commit 6311a19d2dcdc611a68f18eaccef7effcc0b7e72
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Jun 13 17:39:22 2017 +0200

    lib/igt_kms: Fix indent when try_commit fails.
    
    First unindent before calling check_return, else when an expected
    failure happens, the unindent never happens.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 0b8933d09978d2845744b1e70bc69acaaeb21f3c
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Jun 12 11:03:22 2017 +0200

    lib/igt_kms: Add igt_display_require_output(/on_pipe)
    
    Most KMS users open code this.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit ef48fc8233872545243e9a41df498fceedece978
Author: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
Date:   Thu Apr 13 16:18:37 2017 +0300

    igt/igt_core: Provide an option to check for the log buffer contents
    
    Signed-off-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 51f4f9f9ab320e681057bdd203445e725ad04768
Author: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
Date:   Thu Apr 13 13:43:20 2017 +0300

    lib/igt_core: Add igt_system helpers
    
    Support executing external processes with the goal of capturing its
    standard streams to the igt logging infrastructure in addition to its
    exit status.
    
    v3: Rename igt_exec -> igt_system (Chris).
    
    v2: Fix leaks on fd teardown. Make sure redirected process printout when
        > 64kb still works, like full dmesg. (Petri).
    
    Cc: Petri Latvala <petri.latvala@intel.com>
    Signed-off-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 5d494bdaec4280ff841baa4b0bdd61a0bb7816c9
Author: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
Date:   Mon Jun 12 17:39:35 2017 +0300

    tests/chamelium: Close DRM file descriptor after tests
    
    This adds a call to close the DRM file descriptor. It is reauired as IGT
    will attempt to become DRM master after running the test, resulting in a
    failure.
    
    Signed-off-by: Paul Kocialkowski <paul.kocialkowski@linux.intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit eeeb304a00166757954ab0ebbbcaa405db8c0aeb
Author: Eric Anholt <eric@anholt.net>
Date:   Wed Jun 7 16:51:21 2017 -0700

    Make autogen.sh set the default format.subjectPrefix
    
    CONTRIBUTING requests that people do this, but it's a lot easier if we
    just set it up by default for them.
    
    v2: Update CONTRIBUTING about this happening (suggested by Petri).
    
    Signed-off-by: Eric Anholt <eric@anholt.net>
    Acked-by: Petri Latvala <petri.latvala@intel.com> (v1)

commit cc9137762cfe05f5508e614c1dcedf3ff9067399
Author: Eric Anholt <eric@anholt.net>
Date:   Wed Jun 7 13:26:48 2017 -0700

    Add an editorconfig file for the basics of igt style.
    
    This makes my emacs default to consistent indentation for the project.
    
    v2: Set root mode, and Mesa's note for more information on
        editorconfig.
    
    Signed-off-by: Eric Anholt <eric@anholt.net>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit a6458241594320e87ff54a01a183dd3a071e032e
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Jun 12 10:56:01 2017 +0200

    kms_rotation_crc: Fix rotation tests on older platforms again.
    
    I've erroneously assumed the rotation tests only work on gen9+,
    and didn't test what would happen on older platforms.
    
    Add an extra testcase that tries to fill the whole screen, and only
    run that test on gen8 and lower for the primary plane.
    
    This fixes the testcases failing since the following commit:
    
    commit a7fe05b0a784a7a7c58d36842426579a6e00f5a0
    Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Date:   Tue Jun 6 16:41:12 2017 +0200
    
        tests/kms_rotation_crc: Implement stricter rotation tests
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit d0e1eb9ab4c7798c2a9e2716914805162c79f36b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jun 9 15:15:45 2017 +0100

    igt/gem_exec_await: Reduce ring-size estimate for shared ringbuffer submission
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 22e162f1e6e31afe765b25fa94931a002e055273
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jun 9 14:45:53 2017 +0100

    igt/gem_exec_fence: Limit history size for !execlists
    
    Only with execlists, is each context using a separate ring buffer and we
    can accumulate as many fences as contexts we can allocate. On the hand,
    systems with just a single ring buffer for all contexts, we can only
    allocate enough contexts/fences as to fill the ring. If we try to add to
    many we end up stuck waiting for space.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 43baec15f4d2a97fc55ca4aeb70d20ce4b292c9a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jun 5 14:01:40 2017 +0100

    benchmarks/gem_busy: Trim unused compares
    
    Keep userspace light and don't spend time testing the result if we don't
    use it.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d492abfbad687d3c5f343b836da4c7316a57ba77
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Jun 9 16:27:11 2017 +0300

    Update NEWS, bump version to 1.19.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit a493e058325d5bd34a77be3a16d646031dadcdb4
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Jun 9 15:46:07 2017 +0300

    Fix a couple of typos CLFAGS -> CFLAGS
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit 09e666d2396c4d0df362809bf5498ab61079d11e
Author: Brian Starkey <brian.starkey@arm.com>
Date:   Mon Jun 5 14:28:40 2017 +0100

    lib/igt_debugfs: Only use valid values in igt_crc_to_str()
    
    Not all elements in the crc array may be valid, so only use the valid
    ones to generate the string.
    
    Signed-off-by: Brian Starkey <brian.starkey@arm.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 4bdcd335961203c07a37aaebf6c441814a6555fa
Author: Brian Starkey <brian.starkey@arm.com>
Date:   Mon Jun 5 14:28:39 2017 +0100

    lib/igt_debugfs: Remove igt_debugfs_t
    
    It's not used anymore, so remove it.
    
    Signed-off-by: Brian Starkey <brian.starkey@arm.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit bf2a10392eaca70e18163dec40e8bbfcdb54c8ba
Author: Brian Starkey <brian.starkey@arm.com>
Date:   Mon Jun 5 14:28:37 2017 +0100

    lib/igt_kms: Fix erroneous assert
    
    In trying to fix igt_display_init() for devices without cursors, I
    actually made matters worse. Fix the assert.
    
    Fixes: 545aa3398223 lib/igt_kms: Remove redundant cursor code
    Signed-off-by: Brian Starkey <brian.starkey@arm.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit b5a899316447a357e35b1cd095bdcae98fff5bcf
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Jun 9 14:36:19 2017 +0300

    intel-ci: Document the public CI results web page
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 8648655f6f00119f5546f254ddedee6621c8a1de
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Jun 9 14:32:17 2017 +0300

    intel-ci: Have the directory included in the distributed tarballs
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit bacc37beac8ced1fb45374608080c842bdbd6ce4
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Mar 17 14:38:58 2017 +0200

    tests/Makefile.am: Only ignore generated gitignore in gitignore
    
    When generating the .gitignore file, use /.gitignore instead of
    .gitignore to not have it apply to subdirectories.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 5b13b8f91cc7a6e274d00890a9f0659b52e9ff45
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Mar 17 15:07:56 2017 +0200

    intel-ci: Add comments on test order to fast-feedback.testlist
    
    Document the test ordering choices in fast-feedback.testlist.
    
    For comments in testlists, piglit commit
    
     commit 0c535186d624071098c10003fdafe8f475ed9ae7
     Author: Petri Latvala <petri.latvala@intel.com>
     Date:   Wed Feb 1 12:57:45 2017 +0200
    
        framework/programs/run.py: Allow comments in test-list files.
    
    is required.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit b642e1d78fd1ad70cf6b726aae26150a02343c40
Author: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
Date:   Wed Jun 7 16:29:59 2017 +0200

    tests/pm_rps: Replace custom load function with dummy load
    
    Replaced custom load implementation with lib counterpart.
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Signed-off-by: Radoslaw Szwichtenberg <radoslaw.szwichtenberg@intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 9623c628c54482270f5e4f30df69c1954b105e29
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Fri Jun 9 11:51:57 2017 +0100

    media-bench.pl: Add automatic per-client target mode
    
    It is useful to be able to specify wps target relative to single
    client performance when evaluating multiple workloads.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit aa57274568158dcf5b4726b4398bf448fea79855
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Fri Jun 9 11:51:03 2017 +0100

    trace.pl: Handle multi-day uptime
    
    Handle multi-day uptime when parsing tracepoint timestamps.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit a663424e2a5ebf3c8e9ab743143e0856f978f7d6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 7 11:32:50 2017 +0100

    Revert "kms_cursor_legacy: Add a burner thread to make basic-busy-* pass."
    
    This reverts commit 7c8703fb02b248c2bcf9756bba8812bcfe7ed5d3.
    
    If we expect it to fail until we find a solution, let the hw fail and
    continue to track the known failure in CI/bugs.
    
    Cc: Martin Peres <martin.peres@linux.intel.com>
    Acked-by: Martin Peres <martin.peres@linux.intel.com>

commit 73bb3fa53e8ebb05a4e4505e2c7fd0a50b0f07c7
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Thu Jun 8 15:23:09 2017 +0300

    tests: Merge single_kernel_tests and multi_kernel_tests in the build system
    
    The separation of testcases with and without subtests in the build
    system was used in the past, but now both are handled the same
    way. Merge them together and finally forget about the difference
    between TESTS_progs and TESTS_progs_M.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit 0aaa6d1a95d8fe4dc196c3a7ca4a4a973f8a4f7e
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Thu Jun 8 15:23:08 2017 +0300

    tests/Makefile.sources: Remove unused XFAIL_TESTS
    
    The tests listed in XFAIL_TESTS have moved to lib/tests quite a while
    ago.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>

commit d1ea0c0a9cd9671adb03f77101268f938aff0f4c
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed Jun 7 17:15:55 2017 +0100

    gem_wsim: More interesting workloads
    
    These ones demonstrate fence usage and also mixing them with
    data dependencies.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 5a5be91d76879ddfc84a1a18f85a7e0099ee84ba
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed Jun 7 10:01:25 2017 +0100

    gem_wsim: Add some randomness to the 17i7 workload
    
    It was the only one with no randomness.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 65173e1aaa909ddef37321170dfb33a2992ba6f4
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Mon Jun 5 12:36:54 2017 +0100

    gem_wsim: Asymmetrical 1-to-n workloads
    
    Simulates a single decoder feeding multiple processing and
    encoding pipelines.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit c14a2602a973da42d4cfcaed68dbf1c80d47945d
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed Jun 7 11:40:43 2017 +0100

    gem_wsim: Fix heartbeats in GT2 mode
    
    VCS2 needs to be redirected to BCS in the remapping mode
    otherwise the update will get missed.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 32681f8ad2bdef07dccfce80630831fe2f005cd3
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed Jun 7 09:56:42 2017 +0100

    media-bench.pl: Add GT2 mode
    
    So gem_wsim can be driven in it.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit c5ab34670d6ff2624e45067ade545add9696a1ed
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed Jun 7 07:58:22 2017 +0100

    media-bench.pl: Verbose option
    
    For time being just displays the saturation finding steps.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 424faaa6a9144695da845ae57ce90c1d0abda8db
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Mon Jun 5 12:30:24 2017 +0100

    gem_wsim: Detect invalid duration range
    
    Maximum has to be larger than minimum and all values positive.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 7d18a707d1432cc21416aeb5d0acf5da09f9d4cd
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Mon Jun 5 12:07:51 2017 +0100

    media-bench.pl: Include gem_wsim -d in the evaluation
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 6f2e3ba386ec5179d781ec5b463ece466dffbfd6
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Mon Jun 5 11:16:59 2017 +0100

    gem_wsim: Late balancing decision mode
    
    An approximation of in kernel balancing where balancing
    decision is postponed to just before submitting the batch
    for execution.
    
    This is implemented by waiting on data dependencies in
    userspace before submitting each batch.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 8ef3b4f53bf20b5301a214e545a7648197cf2d25
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Mon Jun 5 09:14:53 2017 +0100

    media-bench.pl: Add context balancer to the list
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit ef74c0566ff8d57ff649cd9f7f1b74ba15488877
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Mon Jun 5 08:58:19 2017 +0100

    gem_wsim: Add static context balancer
    
    This one assigns VCS engines for each created context in a round-
    robin fashion. By default each client starts the assignment from
    the first engine.
    
    In global mode the engines are assigned in the round-robin fashion
    between all the clients - which is identical to the i915 behaviour.
    Important difference is that doing it from gem_wsim means the
    assignment always start from a known point so the run-to-run
    behaviour is identical and repeatable, contrary to when i915 round-
    robin assignment is used.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit dd5a378f683e23680939f5ea71697be67be58595
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Mon Jun 5 08:00:52 2017 +0100

    gem_wsim: Added missing -H help text
    
    Also check that the usage makes sense.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit d8c6cf9fc05eef415c79529f50b6e6a1487ade88
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Thu Jun 8 10:47:00 2017 +0300

    configure.ac: Define HAVE_CHAMELIUM in config.h
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit da42b17e45c1da375323293c83afae6b38e88771
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Apr 6 18:07:35 2017 -0700

    igt/vc4_dmabuf_poll: Add a test for polling to wait for dmabuf fences.
    
    This successfully catches vc4's lack of dmabuf fencing.
    
    Signed-off-by: Eric Anholt <eric@anholt.net>

commit acfed73248f1f629fc1df0794496d2be302603d9
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Wed Jun 7 12:14:04 2017 +0200

    ffs: Include strings.h
    
    ffs() was used in couple of places without explicitly including
    strings.h. On a few libc implementation this is done implicitly through
    other headers, but let's do not rely on that behavior.
    
    Signed-off-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 200d0f5d4972f78b8ed0b58cdb99c9a351a79b42
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Wed Jun 7 12:11:37 2017 +0200

    benchmarks/gem_wsim: Add LOCAL fence defines
    
    Same as in other benchmarks using them, as not every system is updated
    with libdrm having those defines.
    
    Signed-off-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 098947803ff4683f22135d36e8379fc299816eae
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Tue May 16 12:59:50 2017 +0200

    tests/gem_exec_nop: Rename signal() to fence_signal()
    
    Unfortunately <signal.h> is included through some obscure dependencies
    when using bionic, so we have a name clash on signal().
    
    Changed the test function name to fence_signal() to avoid this, but left
    the test cases names unchanged.
    
    Signed-off-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 21bfc9f181f74e6d93083fd0baf5a9b8f3230c24
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Wed Apr 19 12:50:06 2017 +0200

    tests/gem_exec_nop: Disable headless subtest on cairoless Android
    
    Currently whole igt_kms.c is disabled while compiling on Android without
    cairo, so this tests does not compile.
    
    There should be cleaner a way to disable only cairo dependant parts
    which should allow us to enable at least some of the KMS tests, but
    that's a bigger rework for another time.
    
    v2: simplified #ifs on CAIRO/ANDROID (P. Latvala)
    
    Cc: Petri Latvala <petri.latvala@intel.com>
    Signed-off-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit fcda874bfae0cd0319b13a2d90c7f4f8f979ab6c
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Tue Apr 18 15:27:43 2017 +0200

    tools/Android.mk: Fix zlib inclusion
    
    Add dependency on libz instead of doing path magic.
    
    Signed-off-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 6047b01fc6faae5181c75c21e69117e71126064c
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Fri Apr 14 15:10:20 2017 +0200

    Android.mk: Use drm stubs
    
    Use drm stubs that sit under lib/stubs.
    
    Also drop strange, nonexistent additions to LOCAL_C_INCLUDES.
    
    Signed-off-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 60c5bb538c5353259043f3136615c641711349d6
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Fri Apr 14 14:06:37 2017 +0200

    Android.mk: Filter out *.h from src files
    
    Newer Android's build system complains about unused files if we leave
    those there.
    
    Signed-off-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 53e7f53d6b040b32083bb71b72d1d4fbf8c9a575
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Wed Apr 12 09:42:47 2017 +0200

    Android.mk: Fix libkmod use
    
    On Android libkmod.h is nested under libkmod directory, so we should
    include appropriately.
    
    Also we need to link with it.
    
    Signed-off-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 4fe47f4541a2bb64f4189759bfb62155011f6061
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Wed Apr 12 12:35:54 2017 +0200

    tests/Android.mk: Add perf to skip list
    
    It does not build on Android with top libdrm.
    
    Temporary hax.
    
    Signed-off-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit f13da12764e0fa669fb6a8676e07dffa025832ce
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Wed Apr 12 09:38:56 2017 +0200

    tools/Android.mk: Add guc_logger and l3_parity skip list
    
    Those tools does not build on Android due to "Linux-only" dependencies.
    
    Let's blacklist them for now.
    
    Signed-off-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit a702b60782d713ebce9199b0007d8beb083e49fe
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Wed Apr 12 12:33:12 2017 +0200

    chamelium: Fix build issues on Android
    
    Makefile.sources are included 1:1 in Android.mk files, and are not
    parsed by automake. And yet those had some automake conditional logic.
    Moving it to .am file is enough for now.
    
    Also igt_chamelium.h included config.h without proper "HAVE_CONFIG_H"
    guard, and the file itself was included unconditionally.
    
    Signed-off-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Michal Wajdeczko <michal.wajdeczko@intel.com>

commit d7d3f4e87b827152f00bdf89a67871736672b492
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Wed Apr 12 12:24:42 2017 +0200

    lib/igt_aux: Make procps optional
    
    Android does not have procps and it's not easy to compile it as a
    dependency.
    
    We can provide alternative, "naive" implementation that just shells out
    to external commands (i.e. pkill and lsof) in case we do not have the
    library.
    
    v2: have separate functions for naive impls (J. Nikula)
    
    Cc: Jani Nikula <jani.nikula@linux.intel.com>
    Signed-off-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 86b59f8474a38b7a0e9c4cf68e32aba664878107
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Wed Apr 12 09:28:45 2017 +0200

    lib/igt_aux: Include unistd.h for gettid() on Android
    
    We define gettid() using syscall() because glibc does not provide a
    wrapper.
    
    Android's bionic got the syscall covered though.
    
    Signed-off-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 17f9e36c8e7ebc1bbdc943e064468698e48f8e49
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Wed Apr 12 09:19:50 2017 +0200

    Make conditions on HAVE_UDEV consistent
    
    We have a lot of `#ifdef HAVE_UDEV` and ` #if HAVE_UDEV` all over the
    place, but ifdef and if have a slightly different semantics.
    
    Let make it consistent by using #ifdefs only.
    
    Signed-off-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit c237e3a24b21b1f60e0cc2624ecdacc72d6d24ca
Author: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Date:   Fri Apr 14 13:36:56 2017 +0200

    tests/drm_import_export: Include {i915_,}drm.h properly
    
    Using `libdrm/` impairs compatibility with android build system and
    pkg-config manages -I for us on regular distros.
    
    Signed-off-by: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 7c8703fb02b248c2bcf9756bba8812bcfe7ed5d3
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Jun 7 11:10:06 2017 +0200

    kms_cursor_legacy: Add a burner thread to make basic-busy-* pass.
    
    This appears to be required on SNB, or else we miss a lot of interrupts.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit a39f864cea0e47085f5bca549384d54671d02674
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Jun 7 10:04:10 2017 +0200

    tests/kms_properties: Allow setting all connector properties now.
    
    i915 connector properties have been converted to atomic, so
    all properties can now be set.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 9d809cdeac9739304f3254d85dd5b8599b7a58e4
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Jun 6 17:12:20 2017 +0200

    tests/kms_rotation_crc: Keep primary plane enabled while testing.
    
    This will force less watermarks to be allcoated to the sprite plane,
    making it easy to hit a underrun!
    
    Unfortunately the FIFO underrun wasprevented by skl_plane_downscale_amount,
    but fixed with Ville's patch series.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit a7fe05b0a784a7a7c58d36842426579a6e00f5a0
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Jun 6 16:41:12 2017 +0200

    tests/kms_rotation_crc: Implement stricter rotation tests
    
    This makes kms_rotation_crc also test a case where a small strip is
    tested on the top or left side of the screen. It allows us to ensure
    more accurately that the rotation is shown correctly on the screen.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit ca23986925e285b542e659605de057a629815c77
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Jun 6 12:16:43 2017 +0200

    tests/kms_cursor_legacy: Prepare for non-square rotation tests
    
    No functional changes yet, just making sure that it works
    as expected.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit fdb85460c844a6bcf2dbab3760559b67e6b210fe
Author: Terrence Xu <terrence.xu@intel.com>
Date:   Wed Jun 14 07:36:31 2017 +0800

    Fix the mac address definition typo in tools/intel_gvtg_test.
    
    Changed the "%2X" to "%02X", to prevent padding with spaces, which
    breaks qemu command line arguments when first RANDOM is <0x10.
    
    Signed-off-by: Sarvela Tomi P <tomi.p.sarvela@intel.com>
    Signed-off-by: Terrence Xu <terrence.xu@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 750319044f0fdce1c251e040ce0741d672b31226
Author: Harry Wentland <harry.wentland@amd.com>
Date:   Mon Jun 5 14:43:19 2017 -0400

    tests/kms_setmode: Dynamic crtc/connector combinations
    
    Create crtc/connector combinations based on actual adapter
    information obtained from drmModeRes.
    
    Also set MAX_CRTCs to 6 for AMD GPUs.
    
    Signed-off-by: Harry Wentland <harry.wentland@amd.com>
    Acked-by: Alex Deucher <alexander.deucher@amd.com>

commit a0433ca1dddb83968a0f91753509526bb0240b5a
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Jun 1 21:15:45 2017 +0300

    tests/kms_cursor_crc: Test non-square cursors on IVB+
    
    IVB+ have the cursor "FBC" feature, meaning they support a
    somewhat limited form of non-square cursors. Let's test that.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 9fc445dabf788516d9f6d4956a05277bda1e7f04
Author: Lukasz Fiedorowicz <lukasz.fiedorowicz@intel.com>
Date:   Thu May 25 09:40:54 2017 +0200

    lib: Moving gem_execbuf_wr to ioctl_wrappers
    
    gem_execbuf_wr was duplicated in multiple places.
    Moving everything to lib/
    
    Signed-off-by: Lukasz Fiedorowicz <lukasz.fiedorowicz@intel.com>
    Reviewed-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit d9dcfc3a91cc197d07433cc4fbaaa76929b38e29
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Fri May 26 12:11:04 2017 +0100

    igt: Fix detection of missing flex
    
    AM_PROG_FLEX macro will set the LEX variable using the missing
    script when the flex is not present. This will confuse the
    configure.ac check, which expects the AC_PROG_FLEX behaviour,
    and will so fail to detect the missing flex:
    
            AS_IF([test x"$LEX" != "x:" -a x"$YACC" != xyacc],
                    [enable_assembler=yes],
                    [enable_assembler=no])
    
    This is because AM_PROG_LEX sets the LEX variable to
    "${SHELL} /home/sc/intel-gpu-tools/build-aux/missing flex",
    while AC_PROG_LEX would set it to ":".
    
    If for some reason we really need to keep AM_PROG_LEX,
    alternative fix could be something like this placed before
    the above AS_IF check:
    
            AC_MSG_CHECKING([checking for working flex])
            if ! eval "$LEX --version >/dev/null 2>&1"; then
                    AC_MSG_RESULT([failed])
                    LEX=:
            else
                    AC_MSG_RESULT([pass])
            fi
    
    Note the evil eval needed to recursively expand variables.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 00ce341b95c718611689ded8ccec45086186c5b7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 24 17:31:43 2017 +0100

    igt/gem_shrink: Exercise concurrent calls to i915_gem_shrink()
    
    Just recently I once again made the mistake of thinking we could do a
    plain mutex_lock() inside i915_gem_shrink(). However, such a lock is
    liable to cyclic deadlocks between multiple relcaimers. This can be
    reported by lockdep, but we need contention in the shrinker for it to
    spot this particular mistake. The easiest way to explicit cause
    contention is via concurrent calls to debugfs/i915_drop_caches whilst
    the GPU is busy.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 056765c412951b991836126412fbd6ffb8054013
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed May 24 16:20:24 2017 +0100

    media-bench.pl: More tweak to saturation point finding
    
    Plus a help text correction and calibration speed-up in
    -R and -T modes.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 26c266febe1fc97c46d25a33aaf6a1869a51c008
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue May 23 16:28:41 2017 +0100

    media-bench.pl: Support GPU aggregate idle stats
    
    Record it within this script since trace.pl added support.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit cfd15a7dc39ebc39c6235da662cddaeef38e6c36
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue May 23 16:07:52 2017 +0100

    media-bench.pl: Add option to specify workloads directly
    
    New option (-w) allows direct pass-through to gem_wsim for cases
    when heterogenous workloads, or even additional parameters to
    gem_wsim need to be tested.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 2f64c684b651993425a5d12b5cb2e7b0efc7c997
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue May 23 15:38:47 2017 +0100

    trace.pl: Option to draw the aggreate GPU busy timeline
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 1af2ae74fa7418a689e479be3e6d406b089fa5e8
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue May 23 15:09:33 2017 +0100

    trace.pl: Add aggregate GPU idle/busy stat
    
    Merge and flatten all the engine timelines to produce an
    aggregate stat.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 36cd3abd48074dffb18af90d3a450c0d6116e055
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue May 23 12:56:12 2017 +0100

    media-bench.pl: Add global balancing mode
    
    In addition:
    
     * optimize saturation point finding
     * fix wps target modes
     * always use -R, it is pointless not to
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 1c6c53c1e81cf9d91d2c3db0b67494db841a80c6
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Mon May 22 10:30:45 2017 +0100

    gem_wsim: Add global balancing mode
    
    In this mode ('-G' on the command line) all balancing operations
    are routed via the first client so the complete balancing state
    is shared. In other words the overall balancing behaviours is
    like there is only one client submitting the aggregate workload.
    
    This can help with the observed metrics and lead to better
    balancing decisions in a lot of cases.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 01959de48a142139c0ed08cf32dc677dd4965779
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Fri May 19 15:42:35 2017 +0100

    gem_wsim: Move seqno status page access to helpers
    
    Refactoring for upcoming changes.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit e329adcf00d563227645c6333c04f8ef0fc10a0d
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Fri May 19 15:33:23 2017 +0100

    gem_wsim: Move seqno allocation and query into helpers
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 255d1fcc6b1274b21c838e207aa82b8f0dbc6ece
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Fri May 19 15:13:48 2017 +0100

    gem_wsim: Convert clients to threads
    
    Will make the userspace balancing daemon simulation easier.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit a6f712176c865f924e484148440da71a182f3fde
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 23 15:46:23 2017 +0100

    igt/gem_mmap_wc: Move the require mmap-wc to the fixture
    
    Not all subtests remembered their requires, so do it from the caller and
    catch all at once.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cf279439727b0b32e268698e072045e6f98abba2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 23 15:44:40 2017 +0100

    igt/gem_exec_latency: Check for WC mmaps before use
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a25e83f3c7aa1a0a8a1774d28afb6dbda8ccbcbc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 23 12:08:59 2017 +0100

    igt/gem_exec_store: And free the new obj/reloc arrays
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c206fda29509e0805baca0a90aee64434be444f0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 23 11:44:40 2017 +0100

    igt/gem_exec_store: Exercise more patterns for MI_STORE_DWORD_IMM
    
    Check that writes to adjacent cachelines are functional.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a71597ad90354b291138be5416a78cba23a6011c
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Fri May 19 13:05:44 2017 +0100

    gem_wsim: Add missing help text for -p
    
    Document priority support in the help text.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 39cccab83b7c515a2b57abe679a8cb304c8933ef
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 19 09:41:40 2017 +0100

    igt/pm_rps: Allow CUR to be greater than MAX (overclocking)
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9ba644d95d7692de134614305955d02668e08952
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 18 14:20:48 2017 +0100

    igt/gem_exec_fence: Skip await test if store-dword is not support
    
    The request we await for is just to store a dword, if the device doesn't
    support store-dword we will do no awaits and so not actually test
    anything.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit bc7877660c7d7a733ec484e91e2096b8daf2cf0d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 18 12:11:59 2017 +0100

    lib: Refactor testing for ability to use MI_STORE_DATA_IMM
    
    Rather than have the code in multiple locations, put a copy in lib/
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 49e083a29a0942309c877ea8e9275fa985a5bf25
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 17 21:41:30 2017 +0100

    igt/gem_spin_batch: Avoid interleave throttle within open spin batches
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=101079
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8910738e25fa701fcb6a1cebdfc6c7ea7e1213f7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 17 19:55:25 2017 +0100

    wsim: Allow assigning priorities to each workload
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cb5479a767b26cd8a3729d59c2b21e50f07cd81b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 17 19:54:49 2017 +0100

    wsim: Fix reporting of workload/s for slaves
    
    Slaves just keep on running, far beyond the repeat target of their
    master.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f87eb22d43ee040d7f85c3737e344b70e05f3101
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed May 17 18:06:24 2017 +0100

    gem_wsim: Fix client exit with more than one background workload
    
    Need to close more pipe ends to support master with more than
    one background workloads.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 42e3cf129c5d7c706c510eec38ace943e70fa035
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed May 17 13:50:37 2017 +0100

    media-bench: Print score range when evaluation workloads
    
    When evaluating best balancers it is useful to be able to glance
    over the range of results for a particular workload since that
    determines the weighted scoring.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 635d2d04b008324f6499951575d5ef9d9b2f1f38
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed May 17 13:10:18 2017 +0100

    media-bench: Simplify combined scoring
    
    I am failing to come up with a smart formula which would
    have a little bit of an exponential component and take into
    consideration both total thtoughput and single client
    performance.
    
    Simply adding the two scores together might work better
    than any complications.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 77d953aa25ad6b0ba01489283cfa58ee86a2da03
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed May 17 12:34:56 2017 +0100

    media-bench: Store the trace file for later
    
    Makes sense to keep it around if a different type of analysis
    needs to be done later.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit c2a15894eae56b02849008fafc8f6785783d12b1
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed May 17 12:27:09 2017 +0100

    media-bench: Flag workloads which failed to balance
    
    Split out the flagging logic so to make it easier to read and so
    that the complete failure to balance is declared a failure
    instead of a warning.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 36d97824afb1256ecfa8381a135b6cba11dcb04f
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed May 17 12:04:09 2017 +0100

    media-bench: Fix evaluating with no balancing
    
    Code just didn't expect '<none>' as the selected balancer.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 6126b12383ab0c62c21e7298566b24ed2904a36d
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed May 17 11:50:03 2017 +0100

    media-bench: Fix scoreboard range stat
    
    It wasn't normalized as the results are.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit d99fcfd3f0f505dc6352f658c95c3adf2566b3d0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 17 10:35:57 2017 +0100

    wsim: Only require execbuf wr ioctl for FENCE_OUT
    
    Just a micro-optimisation to avoid copying back the struct to userspace
    if we aren't looking for an output.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3a264fc85fed4c56ffef4958e6dca883cac3e1f5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 16 21:31:59 2017 +0100

    igt/gem_exec_store: Add welcome screen
    
    Print out a little bit of device information on startup to help diagnose
    errors.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 987abfb832cc95c7d3c14070dd7e1ca683bda1a7
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue May 16 13:49:21 2017 +0100

    gem_wsim: Implement sw sync point support
    
    Two new workload commands are added, 'f' and 'q.<idx>' which
    enable creation and signalling of non i915 fences.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 3e622a8f9222f4a670b5365111ddf85b1fb4afa7
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue May 16 11:46:50 2017 +0100

    gem_wsync: Clearer step metadata handling
    
    Introduce an anonymous union so each step type can use its own
    name for the metadata.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit a47419f95c67665ae67b22de70346ec0a99c7b84
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue May 16 10:27:45 2017 +0100

    gem_wsim: Fence support
    
    Add sync fence dependency support to workload steps.
    
    Only one sync fence dependency per step is supported at the
    moment.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 26a5e655883f2b0a2ff903cb24e40d6e2570dbe3
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue May 16 08:11:29 2017 +0100

    gem_wsim: Simplify batch offset block a bit
    
    Just compact it a bit by avoiding the min != max check
    duplication and change get_duration to change w_step.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 0943be8987ae9ab099ee9d1a1832cf62a918ca5b
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed May 10 16:49:07 2017 +0100

    igt/media-bench.pl: Media workload analyzer
    
    The high level goal of this script is to programatically analyze
    the simulated media workloads (gem_wsim) by finding an optimal
    load balancing strategy, and also detecting any possible
    shortcomings of the same.
    
    When run without command line arguments script will run through
    both of its phases.
    
    In the first phase it will be running all the known balancers
    against the all the known workloads, and for each combination
    look for a point where aggregated system throughput cannot be
    increased by running more parallel workload instances.
    
    At that point each balancer gets a score proportional to the
    throughput achieved, which is added to the running total for the
    complete phase.
    
    Several different score boards are kept - total throughput, per
    client throughput and combined (total + per client). Weighted
    scoreboards are also kept where scores are weighted based on the
    total variance detected for a single workload. This means scores
    for workloads which respond well to being balanced will be worth
    more than of the ones which do not balance well in neither of
    the configurations.
    
    Based on the first phase a "best" balancing strategy will be
    selected based on the combined weighted scoreboard.
    
    Second phase will then proceed to profile all the selected
    workloads with this balancer and look at potential problems with
    GPU engines not being completely saturated.
    
    If none of the active engine is saturated the workload will be
    flagged, as it will if the only saturated engine is one of the
    ones which can be balanced, but the other one in the same class
    is under-utilized.
    
    Flagged workloads then need to be analyzed which can be achieved
    by looking at the html of the engine timelines which are
    generated during this phase. (These files are all put in the
    current working directory.)
    
    It is quite possible that something flagged by the script as
    suspect is completely fine and just a consequence of the
    workload in question being fundementally unbalanced.
    
    It is possible to skip directly to the second phase of the
    evaluation by using the -b command line option. This option must
    contain a string exactly as understood by gem_wsim's -b option.
    For example '-b "-b rtavg -R"'.
    
    Apart from being run with no arguments, script also supports a
    selection of command line switches to enable fine tuning.
    
    For example, also including the complete output from the script
    in order to be more illustrative:
    
    -8<---
    + scripts/media-bench.pl -n 642317 -r 2 -B rand,rtavg -W media_load_balance_hd12.wsim,media_load_balance_fhd26u7.wsim
    Workloads:
      media_load_balance_hd12.wsim
      media_load_balance_fhd26u7.wsim
    Balancers: rand,rtavg,
    Target workload duration is 2s.
    Calibration tolerance is 0.01.
    Nop calibration is 642317.
    
    Evaluating 'media_load_balance_hd12.wsim'... 2s is 990 workloads. (error=0.00750000000000006)
      Finding saturation points for 'media_load_balance_hd12.wsim'...
        rand balancer ('-b rand'): 6 clients (1412.576 wps, 235.429333333333 wps/client).
        rand balancer ('-b rand -R'): 6 clients (1419.639 wps, 236.6065 wps/client).
        rtavg balancer ('-b rtavg'): 5 clients (1430.143 wps, 286.0286 wps/client).
        rtavg balancer ('-b rtavg -H'): 5 clients (1339.775 wps, 267.955 wps/client).
        rtavg balancer ('-b rtavg -R'): 5 clients (1386.384 wps, 277.2768 wps/client).
        rtavg balancer ('-b rtavg -R -H'): 6 clients (1365.943 wps, 227.657166666667 wps/client).
      Best balancer is '-b rtavg'.
    
    Evaluating 'media_load_balance_fhd26u7.wsim'... 2s is 52 workloads. (error=0.002)
      Finding saturation points for 'media_load_balance_fhd26u7.wsim'...
        rand balancer ('-b rand'): 3 clients (46.532 wps, 15.5106666666667 wps/client).
        rand balancer ('-b rand -R'): 3 clients (46.242 wps, 15.414 wps/client).
        rtavg balancer ('-b rtavg'): 6 clients (61.232 wps, 10.2053333333333 wps/client).
        rtavg balancer ('-b rtavg -H'): 4 clients (57.608 wps, 14.402 wps/client).
        rtavg balancer ('-b rtavg -R'): 6 clients (61.793 wps, 10.2988333333333 wps/client).
        rtavg balancer ('-b rtavg -R -H'): 7 clients (60.697 wps, 8.671 wps/client).
      Best balancer is '-b rtavg -R'.
    
    Total wps rank:
    ===============
      1: '-b rtavg' (1)
      2: '-b rtavg -R' (0.989191465637926)
      3: '-b rtavg -R -H' (0.973103630772601)
      4: '-b rtavg -H' (0.938804458876241)
      5: '-b rand -R' (0.874465740398305)
      6: '-b rand' (0.874342391093453)
    
    Total weighted wps rank:
    ========================
      1: '-b rtavg -R' (1)
      2: '-b rtavg' (0.998877134022041)
      3: '-b rtavg -R -H' (0.982849160383224)
      4: '-b rtavg -H' (0.938950446314292)
      5: '-b rand' (0.80507369080098)
      6: '-b rand -R' (0.80229656623594)
    
    Per client wps rank:
    ====================
      1: '-b rtavg -H' (1)
      2: '-b rand' (0.977356849770376)
      3: '-b rand -R' (0.976222085591368)
      4: '-b rtavg' (0.888825068013012)
      5: '-b rtavg -R' (0.875653417817828)
      6: '-b rtavg -R -H' (0.726389466714194)
    
    Per client weighted wps rank:
    =============================
      1: '-b rand' (1)
      2: '-b rand -R' (0.996866139192282)
      3: '-b rtavg -H' (0.986348733324348)
      4: '-b rtavg' (0.811593544774355)
      5: '-b rtavg -R' (0.805704548552663)
      6: '-b rtavg -R -H' (0.671567075453688)
    
    Combined wps rank:
    ==================
      1: '-b rtavg' (1)
      2: '-b rtavg -R' (0.989191465637926)
      3: '-b rtavg -H' (0.972251783752137)
      4: '-b rtavg -R -H' (0.949708930404222)
      5: '-b rand' (0.914594701126905)
      6: '-b rand -R' (0.914312395840401)
    
    Combined weighted wps rank:
    ===========================
      1: '-b rtavg' (1)
      2: '-b rtavg -R' (0.995945739226824)
      3: '-b rtavg -H' (0.984347862855008)
      4: '-b rtavg -R -H' (0.956920992185625)
      5: '-b rand' (0.899001713089319)
      6: '-b rand -R' (0.896984246540919)
    
    Balancer is '-b rtavg'.
    Idleness tolerance is 2%.
    
    Profiling 'media_load_balance_hd12.wsim'...
          2s is 992 workloads. (error=0.00150000000000006)
          Saturation at 6 clients (1434.207 workloads/s).
        Pass [ 0: 0.57%, 2: 22.59%, 3: 23.30%, ]
    
    Profiling 'media_load_balance_fhd26u7.wsim'...
          2s is 52 workloads. (error=0.001)
          Saturation at 6 clients (61.823 workloads/s).
        WARN [ 0: 7.77%, 2: 0.66%, 3: 28.70%, ]
    
    Problematic workloads were:
       media_load_balance_fhd26u7.wsim -c 6 -r 52 [ 0: 7.77%, 2: 0.66%, 3: 28.70%, ]
    
    -8<---
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 2e10dc96c57373c9e5ece2a641a2012db9f07331
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue May 16 07:56:20 2017 +0100

    gem_wsim: Add append workload
    
    Used with the '-a' command line switch which follows the same
    usage as '-w' and '-W', it enables to add append workload steps
    to the end of all normal workloads.
    
    This for example allows running any workload in the real-time
    mode:
    
      gem_wsim -w <some-workload> -a p.16667
    
    Makes a workload to be run with the 60 Hz period.
    
    At the same time fix the periodic mode execution with dropped
    frames, or almost dropped frames.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit feaf779de5adb587214faa3f935360e0e4aa0c25
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Thu May 11 13:00:51 2017 +0100

    gem_wsim: Two small tidies
    
    Tidy last in the array presumed offset setting even though this
    code path is not used at the moment.
    
    Also use READ_ONCE on all fields we are trying to read from the
    status page.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 93215b00db06ba568c34a6cad194f4749bbfbc9d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat May 13 17:37:52 2017 +0100

    amdgpu/amd_cs_nop: Use a counter not seqno
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b1c5975c3688a05fd3bcdfbd21d75483f2910a49
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 24 13:19:41 2017 +0100

    igt/amd_cs_nop: Spread submissions across multiple processes
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 842e6a4301fe4917b3a38f17f0bb6627a55b5524
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat May 13 13:27:52 2017 +0100

    igt/gem_exec_nop: Restore check on available signal rings
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e10c48d9c2c8438b10d4f73e61d579eb8d59ce57
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 12 12:33:32 2017 +0100

    igt/gem_exec_nop: Include the impact of signaling a fence
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 31530827e513a5ced092bb1777b0a23a5010af2c
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Thu May 11 17:10:15 2017 +0100

    gem_wsim: Minimize startup gap
    
    Do the GPU quiesce as close as possible in time to the start of
    the workload in order to minimize the gap in engine utilization
    tracking.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 3ecd6c7f47e3b76e3010f254af76d5f6c981b557
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Thu May 11 12:59:54 2017 +0100

    igt/trace.pl: Collect perf data in quiet mode
    
    We are not interested in knowing the amount of perf data
    captures so less noise is better.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 22f22b41962051655a72ed9cb4fac112f44080d0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 11 16:29:25 2017 +0100

    wsim: Set the seqno/time stamp on each batch to every engine
    
    We need to track queue depth not just when we are asked to load balance
    but for specific engine requests so that we include those in our
    balancing.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c88c91fa8e5ae41a0201053ac4a46a722344b758
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 11 15:18:00 2017 +0100

    intel_error_decode: Tell zlib the correct amount of memory we allocated
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a355b2d6eb428f8c64ff7251a32e40d81ea4bbec
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 11 00:21:40 2017 +0100

    igt/gem_exec_reloc: Filter out unavailable addresses for !ppgtt
    
    In the old shared GTT modes, some addresses may already be in use and so
    we cannot pin our objects there. Skip placing objects to those locations
    for maximum test coverage.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1c2c593363012b60e7b64ac2f39b0afb63cd1b83
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 10 23:41:16 2017 +0100

    igt/gem_exec_reloc: Exercise relocations across the full GTT range
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1e740411ea92549eba56057f47c4572da41a8b23
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 10 18:27:14 2017 +0100

    intel_error_decode: Fix off-by-one when dumping the binary objects
    
    Include the last line to show the last bytes, important when looking for
    overflows!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 959b0c2d4a9b0b04da6f0bf26c881cc6c7006e8c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 10 15:06:44 2017 +0100

    overlay: Convert to per-context seqno tracking
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ef430bd6394b5e51d7474996b9599f726115911a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 10 14:09:16 2017 +0100

    overlay: Fixup new layout of tracepoints
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 43f6fceef90149872011bdf2aeaabcae585ec654
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 10 13:07:43 2017 +0100

    wsim: Use a loop over engines to calculate RT
    
    Simple code tidy to reduce some duplication.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 04e38c31f92d8ad538077049b5dce4a172aedc50
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 10 12:52:58 2017 +0100

    wsim: Feed qd into ewma
    
    Thinking of qd as an estimator for the speed/latency of execution,
    applying an average to produce a more stable estimation.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 70d381477b93f9acf0c041e451dacb1a130bfca7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 10 11:38:39 2017 +0100

    wsim: Switch off heartbeat by default
    
    For reasons I haven't completely fathomed, adding a heartbeat per frame
    is upsetting the qd-balancer when run with just a single client, e.g.
    ./gem_wsim -n 341724 -w wsim/media_mfe2_480p.wsim -c 1 -r 100 -b 1
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit dd7bc6dd0351e3bdeb412a9a29ce763d4cb4bf51
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 10 11:29:09 2017 +0100

    wsim: Limit the information updated during the heartbeat
    
    The heartbeat should be sent after a period of idleness, it's sole
    purpose is to update our idea of the external load. As we are sending it
    currently in the middle of a busy period, we can reduce it to just
    bumping the queue-depth and reusing the most recent clocks, so that we
    do not perturb the RT timings greatly.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 75b2b1a8dc7165b01615c25f486888032cead53d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 10 11:03:57 2017 +0100

    wsim: Limit heartbeats to sync points
    
    We only need a heartbeat if we don't have any inflight batches to those
    engine (the idea is to try and keep track of external usage). It only
    needs to be periodic, but use once a wait point for simplicity.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 36dec3d81f40cbcc48878bdfb1c7d4fe79305bae
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 10 10:57:16 2017 +0100

    wsim: Cache the heartbeat batch and location
    
    Skip having to emit a nop batch to allocation a page and retrieve its
    address from the kernel by using a persistent object.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 12e2def257484d475cddd05193a27496329688d3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 9 22:50:19 2017 +0100

    wsim: Avoid the workload_step being tracked simultaneously on multiple engines
    
    If the workload is repeated without a full barrier, we may try to add
    the step onto a new request list before we remove it from its last.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d7bc419749d2f988f5632ba51c02197982da3c25
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 9 22:33:17 2017 +0100

    wsim: Stop treating wrk->status_page as just a single uint32_t
    
    Map the whole page since we actually do use it!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f39a7c568599ddb763b6d146bb44574a355de9b7
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed May 10 12:06:05 2017 +0100

    gem_wsim: Refactor balancer selection and help text
    
    Moved it to a table of balancer structs for easier maintenance
    and less chance of partial updates.
    
    Also added qdr and rand balancers.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 251b130bec77e61cccfd785613d7eb94f3b3dcfc
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed May 10 11:11:10 2017 +0100

    gem_wsim: Fix master workload handling and stats
    
    Handling was broken in quiet mode which got expose by the
    conversion to verbosity.
    
    And I want to have the runtime stats for the master workload
    printed in the default verbosity as well.
    
    Also tidy help text adding rtavg to id and group cmd line
    options not taking any parameters together.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit c9c043dc01a435c3f00c9c806d3fd4c44ddadc43
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Wed May 10 12:22:38 2017 +0300

    Revert "Revert "lib/igt_kms: Force outputs to use full range RGB""
    
    Somehow an incorrect commit was reverted.
    
    This reverts commit cda2b91da9c5209d9b3eaac2d2c6f4778a58d4a0.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit 952a8cfaed984f623bc72e1d1c312ee3e7e202df
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Wed May 10 12:11:46 2017 +0300

    benchmarks: Make sure ewma.h and ilog2.h are bundled in dist
    
    dist tarball doesn't build otherwise, as indicated by distcheck.
    
    Fixes: 9e55cca889cd ("wsim: Add rtavg balancer")
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit 9cb1158c718e7ffe75e609258aab444adc013492
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Wed May 10 12:18:06 2017 +0300

    Revert "autotools requires headers to be listed"
    
    This reverts commit b348107351c14cc7371ca65eea067d9a88ab7048.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit cda2b91da9c5209d9b3eaac2d2c6f4778a58d4a0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 10 10:17:37 2017 +0100

    Revert "lib/igt_kms: Force outputs to use full range RGB"
    
    This reverts commit 15ffbf378c3d9b3a75ac6b6ec6d96f917e9a7637.
    
    Some how you need to put headers in the sources, but I've forgotten how
    to do in the mess of automake/Android.

commit b348107351c14cc7371ca65eea067d9a88ab7048
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 10 09:57:43 2017 +0100

    autotools requires headers to be listed
    
    Too used to kbuild where you only specify objects.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 15ffbf378c3d9b3a75ac6b6ec6d96f917e9a7637
Author: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
Date:   Tue Apr 18 15:56:17 2017 +0300

    lib/igt_kms: Force outputs to use full range RGB
    
    In at least SKL and GLK (possibly other devices too), using a cursor
    plane to scan out an fb might result in a different pipe crc than when
    using a regular plane at the same position with the same fb while using
    the CSC logic to limit the color range. The differences could be caused
    by the cursor plane being limited to 8 bpc while the regular planes
    support higher bit depths, leading to slightly different values to be
    used internally. This is evidenced by the failures happening with
    specific color values, 0.5 for example, but that's mostly speculation.
    
    To avoid misterious failures caused by limited range rgb, force all
    tests to use full range. It is still possible for tests to override this
    if necessary.
    
    v2: Add more details to the commit message.
    v3: Force all tests to use full range.
    Cc: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 5a6b9754abefeaa65694adfc045948e99f9be06d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 9 21:59:58 2017 +0100

    wsim: Compact the per-engine heartbeat into a single buffer
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 02b0f8ce754940bc3d6c5d07fa67efbcad834100
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 9 21:26:46 2017 +0100

    wsim: Convert the RT multiple reads to a latched read
    
    Use a latch value to detect read/write tearing of the individual reads.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cfd94fa1a1d67aff0ed3615f76e9b35193f0a1ec
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 9 18:53:33 2017 +0100

    wsim: Fixup breaking the read loop after the seqno advances.
    
    Oops.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cb161195753cb4a2c5ff5bb8746846d55ae32a54
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 9 17:31:27 2017 +0100

    wsim: Loop over the multiple u32 reads from the status page
    
    Use the seqno as a seqlock so that we hopefully only read a coherent set
    of results for a single update.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3b723460a785c35636cee8e672906d98215e5006
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 9 16:35:22 2017 +0100

    wsim: qd throttling now works independently of balancer->get_qd
    
    Since we are tracking the request depth outside of the balancer, we can
    apply the qd thottle unconditionally.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 012ad453d86a4401b8377b6ab2d4eaeaf731914e
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue May 9 17:28:49 2017 +0200

    tests/kms_cursor_legacy: Fix failing tests harder
    
    Also allow the initial vblank evasion to fail. This was the most
    likely cause of the test failure, so be sure to fix it too.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit d099f7d5a5b4b5b86ba751c43eb2772317a0c892
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 9 14:22:21 2017 +0100

    wsim: Introduce verbosity
    
    Slightly more fine-grained than a single on/off switch.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9e55cca889cdadbd94f4ea658b41f4cb43ab3fcb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Apr 25 15:12:50 2017 +0100

    wsim: Add rtavg balancer
    
    An improved version of the rt balancer that tracks the average latency
    on each engine, rather than the last instantaneous execution latency.
    This makes it much less sensitive to rapid changes, which is both a
    positive and a negative.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6e6ad40c61ae0a6526f726195549a1c9b62c533c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 9 12:43:13 2017 +0100

    wsim: Improve rt balancer to use history across sync points
    
    Include the next batch in our estimated run time (that is the time to
    execute the remaining queued requests plus ours). This is a better
    estimate of queue length and also provides a bit of history to guide
    judgement after a sync point.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 474bcddd6d4505e2131c1f8969289a9d4fb6a6db
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 9 15:13:09 2017 +0100

    wsim: Add a small tolerance to rt balancing
    
    Discard the low cycles when comparing queue length between engines as we
    expect a small amount of instabilty. The threshold is chosen to be
    around 50us.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7d1362ac71391c9a2d6e6766265c5afeae2c8e1a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 9 13:41:01 2017 +0100

    wsim: Send a periodic depth stamp down each queue
    
    In order to measure external load (from other clients), we need a
    periodic marker along each queue.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5be0563757bccc222cd75406bc804bdaeb97be77
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 9 10:53:39 2017 +0100

    wsim: per-engine throttling
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 62a1f544fcbb264b8b70d25ed9fb7395e109160a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 9 12:42:41 2017 +0100

    wsim: Per-client prng pool for miscellaneous randoms
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0d67d8ee678e883ba8a1e40699b73b7db2d540fe
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue May 9 11:58:55 2017 +0200

    tests/kms_cursor_legacy: Increase tolerance for failing flip-before/after-cursor.
    
    Run the test 25 times and fail if we miss too many vblanks.
    CI receives too many false positives so we have to fix it.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit b9576426b675b72cd83d98fef486bb197ab77c4f
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue May 9 10:33:00 2017 +0100

    gem_wsim: Slightly more robust workload parsing
    
    Stronger checks for some of the fields like dependencies out
    of range and invalid values.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 0e0eca3ebadcdce869c1605720b7948f8e27f091
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue May 9 10:01:22 2017 +0100

    gem_wsim: Allow symbolic balancer selection
    
    Instead of numbers passed to -b also allow strings.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 8540b918665733fbc991715e3849e60e551113c9
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue May 9 09:39:17 2017 +0100

    gem_wsim: Seed random numbers per client
    
    It makes more sense for the sequence of random batch durations
    to be different between different clients.
    
    Also add a new command line option (-S) to enable forcing the
    same sequence if so can be useful for testing.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Suggested-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7736d7ebb141b5e0bdfdcfa68001e4e00f59838d
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue May 9 09:21:03 2017 +0100

    gem_wsim: Enable initial per-workload round-robin VCS engine assignment
    
    New command option -R enables the initial VCS engine assignment
    to be round-robinned across all clients.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 81116530bd03d0d12a1754672cd1f224ac920d91
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Mon May 8 18:37:03 2017 +0100

    gem_wsim: Add RTR balancer
    
    This one flips a coin when it fails to decide where to schedule.
    
    It works well with the hd12 workload, either for one or multiple
    clients, on which other balancers fail at the moment.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 5be93cf38b4b1a29fc46dd80a586bcc1eb25e438
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon May 8 16:57:18 2017 +0100

    igt/gem_mmap_gtt: Check that userspace clflushing of the GTT mmap
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=100971
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 90a1115ec8268977304d42a84717baddb52b1b67
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Mon May 8 16:32:24 2017 +0100

    gem_wsim: More simulated transcoding workloads
    
    hd06mp2, hd12: Want many parallel clients (20+) and lets itself
    be balanced.
    
    fhd26u7, 4k12u7: Simulates either encoder or decoder with VCS1
    (HEVC) dependency and some balancing VCS usage. Needs fewer
    clients (3-6).
    
    hd01, hd17i4: Mostly RCS limited targetting maximum execution
    speed for a single client. Must not be hampered by incorrect
    balancing decisions.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 6e37f5b5c2a021249475476b7cbd8ad8a346a81c
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Mon May 8 16:14:01 2017 +0100

    gem_wsim: Fix implicit sync on last workload step
    
    Last step has to be a batch for the implicit sync to make sense.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit b56e1714137a48f5a3aab1e3e30f9f86169ac2f2
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Mon May 8 13:56:32 2017 +0100

    gem_wsim: Support VCS2 remapping
    
    This enables media balancing workloads to be ran on GT2 SKUs.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 07a8aa0d848f60768f03e63b98c14234eff780cf
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Mon May 8 13:31:50 2017 +0100

    gem_wsim: Support multiple dependencies
    
    Multiple dependencies separated by forward slashes are now supported.
    
    Some media workloads also updated to use this for better efficiency.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit b0872574d26eac7d0a8a72b9a74930bb0f94ec2d
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Fri May 5 18:55:23 2017 +0100

    gem_wsim: Simplify batch creation
    
    Put the batch in exec object array last instead of moving it
    after checking have there been any dependencies requested.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 89630938e89e718bc2f67a24712f1ecfa3897fcb
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Fri May 5 18:49:13 2017 +0100

    gem_wsim: Add some generic media workloads
    
    Workloads generated from a high level description of how
    things usually work in the transcoding world.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 862fa60cc9ead665fca4ddaa77210559b59d696b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 4 13:54:18 2017 +0100

    intel_reg: Use the drm device fd as a hint only
    
    We want intel_reg to work even when i915.ko isn't loaded, in which case
    there is debugfs to provide /debug/.../i915_forcewake, but we will
    survive without!
    
    Fixes: 301ad44cdf1b ("lib: Open debugfs files for the given DRM device")
    Reported-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c2e3d911b15b6a928e51d4dc64f0e5e2d1f07347
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Thu May 4 11:38:48 2017 +0300

    benchmarks: Add gem_wsim to .gitignore

commit 03145b720728ed667770cf83baf46a60ae764dac
Author: Oscar Mateo <oscar.mateo@intel.com>
Date:   Wed Apr 26 03:28:09 2017 -0700

    tests/pm_sseu: Re-enable the test
    
    This test got inadvertently disabled by commit 83884e97 (Restore
    "lib: Open debugfs files for the given DRM device") when the
    initialization order got changed (dbg_init before gem_init).
    
    v2:
      - The asserts on fd are useless (Petri)
      - Deinit in inverse order.
    
    Cc: Petri Latvala <petri.latvala@intel.com>
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit cbfdc33f772edf13dc55e98477512937af6bec53
Author: Gabriel Krisman Bertazi <krisman@collabora.co.uk>
Date:   Wed Apr 26 14:57:49 2017 -0300

    kms_frontbuffer_tracking: Don't poke compressing status for old cpus
    
    Commit 2804afc606f8 ("kms_frontbuffer_tracking: fix compression
    checking") removes the check whether the kernel supports reporting the
    compression status before asserting on it.  This breaks the test for
    no good reason on old CPUs (SNB and earlier) where the kernel can't
    report the compression status.  Instead, we can check if the cpu
    doesn't support reporting and adopt the same behavior as if
    --no-fbc-compression-check was used.
    
    Changes since v1:
      - Move verification to setup_fbc (Paulo)
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=100677
    Signed-off-by: Gabriel Krisman Bertazi <krisman@collabora.co.uk>
    Reviewed-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 019fa3cd4a213cc939b660e35c41424aefc8ba71
Author: Mika Kahola <mika.kahola@intel.com>
Date:   Tue Apr 11 11:16:02 2017 +0300

    tests/kms_concurrent: Concurrent and interruptible subtests for atomic
    
    This test case introduces concurrently running test cases for atomic
    modesetting.
    
    The first test or thread draws blue backround with black holes on it.
    These holes are covered by rectangular, blue planes that are placed
    randomly like in test case 'kms_plane_multiple'.
    
    The second thread changes resolution from higher to lower one and back.
    
    For: VIZ-7022
    
    v2: use igt_fork instead of pthreads to create concurrent test runs (Maarten)
    v3: use igt_display calls instead of raw drm calls for display updates (Maarten)
        Various cleanups on accessing drm connector (Maarten)
    
    Signed-off-by: Mika Kahola <mika.kahola@intel.com>
    Reviewed-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 529c0d1ca48b6e71897b57cadfb59b349cc96e6a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 26 18:19:46 2017 +0100

    Add gem_exec_await
    
    The sole purpose of this test is try and exercise
    i915_gem_request_await_object() and descendants. In particular, asking
    whether it is worth adding magic there.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 83cab8a44282641b50ec24977f23d9ca2867b02f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 27 09:22:54 2017 +0100

    igt/kms_cursor_legacy: Mark up busy tests as requiring a GPU
    
    If we can't use the GPU to make a framebuffer busy, skip the test.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b0e8b6095be8ba994d3b6eb10aaa634cb8cea569
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 27 09:18:03 2017 +0100

    igt/gem_workarounds: Mark up the requirement for an active GPU
    
    We need to use the GPU to read back the registers using GPU commands,
    ergo we need igt_require_gem() to check the GPU is alive first.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1a61cf4da0490d3a41793afa2f70833fcfed5195
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 27 09:16:53 2017 +0100

    igt/gem_render_linear_blits: Add missing igt_require_gem()
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 18909982c3a1b4987bc5befc8dfb9670b9ca5466
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue Apr 25 15:46:46 2017 +0100

    benchmarks/gem_wsim: Fix no reloc handling
    
    One copy and paste error sneaked in the no reloc changes.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Reported-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 544e9f8368a95f758887eb88b5c92a77abbd11dc
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed Feb 22 09:54:27 2017 +0000

    igt/scripts: trace.pl to parse the i915 tracepoints
    
    Given a log file created via perf with some interesting trace
    events enabled, this tool can generate the timeline graph of
    requests getting queued, their dependencies resolved, sent to
    the GPU for executing and finally completed.
    
    This can be useful when analyzing certain classes of performance
    issues. More help is available in the tool itself.
    
    The tool will also calculate some overall per engine statistics,
    like total time engine was idle and similar.
    
    v2:
     * Address missing git add.
     * Make html output optional (--html switch) and by default
       just output aggregated per engine stats to stdout.
    
    v3:
     * Added --trace option which invokes perf with the correct
       options automatically.
     * Added --avg-delay-stats which prints averages for things
       like waiting on ready, waiting on GPU and context save
       duration.
     * Fix warnings when no waits on an engine.
     * Correct help text.
    
    v4:
     * Add --squash-ctx-id to substract engine id from ctx id
       when parsing to make it easier to identify which context
       is which with new i915 ctx id allocation scheme.
     * Reconstruct request_out events where they are missing.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Harri Syrja <harri.syrja@intel.com>
    Cc: Krzysztof E Olinski <krzysztof.e.olinski@intel.com>

commit 054eb1abecd1cce2e4ee0516f3ff8a67a35dca22
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Thu Mar 30 14:32:29 2017 +0100

    benchmarks/gem_wsim: Command submission workload simulator
    
    Tool which emits batch buffers to engines with configurable
    sequences, durations, contexts, dependencies and userspace waits.
    
    Unfinished but shows promise so sending out for early feedback.
    
    v2:
     * Load workload descriptors from files. (also -w)
     * Help text.
     * Calibration control if needed. (-t)
     * NORELOC | LUT to eb flags.
     * Added sample workload to wsim/workload1.
    
    v3:
     * Multiple parallel different workloads (-w -w ...).
     * Multi-context workloads.
     * Variable (random) batch length.
     * Load balancing (round robin and queue depth estimation).
     * Workloads delays and explicit sync steps.
     * Workload frequency (period) control.
    
    v4:
     * Fixed queue-depth estimation by creating separate batches
       per engine when qd load balancing is on.
     * Dropped separate -s cmd line option. It can turn itself on
       automatically when needed.
     * Keep a single status page and lie about the write hazard
       as suggested by Chris.
     * Use batch_start_offset for controlling the batch duration.
       (Chris)
     * Set status page object cache level. (Chris)
     * Moved workload description to a README.
     * Tidied example workloads.
     * Some other cleanups and refactorings.
    
    v5:
     * Master and background workloads (-W / -w).
     * Single batch per step is enough even when balancing. (Chris)
     * Use hars_petruska_f54_1_random IGT functions and see to zero
       at start. (Chris)
     * Use WC cache domain when WC mapping. (Chris)
     * Keep seqnos 64-bytes apart in the status page. (Chris)
     * Add workload throttling and queue-depth throttling commands.
       (Chris)
    
    v6:
     * Added two more workloads.
     * Merged RT balancer from Chris.
    
    v7:
     * Merged NO_RELOC patch from Chris.
     * Added missing RT balancer to help text.
    
    TODO list:
    
     * Fence support.
     * Batch buffer caching (re-use pool).
     * Better error handling.
     * Less 1980's workload parsing.
     * More workloads.
     * Threads?
     * ... ?
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: "Rogozhkin, Dmitry V" <dmitry.v.rogozhkin@intel.com>

commit cf6f2c9be161e3ca6dd210f4d576cea52883c6bc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Apr 25 13:49:43 2017 +0100

    igt/amdgpu: Fix compiler errors
    
    amdgpu/amd_basic.c: In function ‘amdgpu_semaphore_test’:
    amdgpu/amd_basic.c:555:9: error: missing braces around initializer [-Werror=missing-braces]
      struct amdgpu_cs_request ibs_request[2] = {0};
             ^
    amdgpu/amd_basic.c:555:9: error: (near initialization for ‘ibs_request[0]’) [-Werror=missing-braces]
    amdgpu/amd_basic.c:556:9: error: missing braces around initializer [-Werror=missing-braces]
      struct amdgpu_cs_ib_info ib_info[2] = {0};
             ^
    amdgpu/amd_basic.c:556:9: error: (near initialization for ‘ib_info[0]’) [-Werror=missing-braces]
    amdgpu/amd_basic.c: In function ‘amdgpu_command_submission_multi_fence_wait_all’:
    amdgpu/amd_basic.c:1210:9: error: missing braces around initializer [-Werror=missing-braces]
      struct amdgpu_cs_request ibs_request[2] = {0};
             ^
    amdgpu/amd_basic.c:1210:9: error: (near initialization for ‘ibs_request[0]’) [-Werror=missing-braces]
    amdgpu/amd_basic.c:1212:9: error: missing braces around initializer [-Werror=missing-braces]
      struct amdgpu_cs_fence fence_status[2] = {0};
             ^
    amdgpu/amd_basic.c:1212:9: error: (near initialization for ‘fence_status[0]’) [-Werror=missing-braces]
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f53eef5448ceb1994bdceadbd6963ffb46dfb052
Author: Marta Lofstedt <marta.lofstedt@intel.com>
Date:   Tue Apr 25 16:12:55 2017 +0300

    igt/meta_test: Fix dmesg-warn test
    
    Add bracket to match with piglit dmesg filter.
    
    Signed-off-by: Marta Lofstedt <marta.lofstedt@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 91a137acc40d944fe4a008a2b88d6aec9a48a18c
Author: Jari Tahvanainen <jari.tahvanainen@intel.com>
Date:   Thu Apr 13 12:54:22 2017 +0300

    tests/feat_profile.json: legacy features list for piglit summary feature
    
    Daniel has posted empty feat_profile.json as template to be used.
    This is my understanding about the features and what tests are covering those.
    
    Usage: piglit summary feature json-filename output-directory results-directory
    
    Signed-off-by: Jari Tahvanainen <jari.tahvanainen@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@intel.com>

commit f692075db190ecbaa5d7fbc2d0362ba7ab134e9f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 24 13:20:04 2017 +0100

    igt/gem_exec_schedule: Emit wide batches of requests
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1cdffe82db194909cc51bf8592794640e996acd3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Apr 22 21:43:08 2017 +0100

    lib: spinning batches requires working GEM, so add the precheck
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d9c856aef15280f49270158e801755cca0198577
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Apr 22 21:41:45 2017 +0100

    igt/kms_frontbuffer_tracking: Declare dependency on functioning GEM
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4c19ba469ed6500985a5650d07565fe1b724e44a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Apr 22 13:55:17 2017 +0100

    igt: Add amd_prime for checking prime integration
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ffb554e17cacfd21750f4e21fb6be218f48e4d70
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Apr 22 14:46:55 2017 +0100

    igt: Add basic amd_cs_nop
    
    A bare bones test to execute nothing; a starting point to learn the
    interface and to reveal the first limitations of amdgpu.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 36b92e809f378e18af980ffa5b29361bd28098cb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Apr 22 13:45:18 2017 +0100

    igt: Import basic amdgpu tests from libdrm
    
    Simple copy and replace of the CUnit tests inside libdrm to form a basis
    for further prime integration testing.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 009a35e878c66e38d3f4b980f6cdb995d2662533
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Apr 22 11:34:22 2017 +0100

    Fix build for intel_dp_compliance
    
    Tries to use glib without setting the CFLAGS.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ac5431c9a4455173c639e77f07eed6cf78cfdc2e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Apr 22 10:58:25 2017 +0100

    igt/gem_ctx_create: Exercise all engines + context creation
    
    Minor addition to testing each engine individual, test them all at once
    with a new context.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ba075fd67df40e6ddb8287d3f67fcc1bb75d2032
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 19 22:53:32 2017 +0100

    igt/gem_exec_fence: Accumulate long history of fences
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 943020fa3c2876289c68dbbe852ad13feeb560ac
Author: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
Date:   Thu Mar 30 10:25:05 2017 +0300

    lib/tests: Add kmstest_edid_add_* selftests
    
    Sanity check the edid block generation capabilities.
    
    Cc: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>
    Signed-off-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>

commit 26e0842439bfd826a2b9dca80f9b9a57bbb0a690
Author: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
Date:   Mon Mar 27 12:48:48 2017 +0300

    tests/kms_hdmi_inject: Add test for HDMI injection capabilities.
    
    Original author: Marius Vlad. Includes fixes below.
    
    v5: Convert unit tests to lib selftest.
    
    v4: Add a unit test to make sure synthetic EDID blocks generated by
        IGT is valid (suggested by Petri).
    
    v3: Make audio injection work.
    
    Cc: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>
    Signed-off-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>

commit 3cfa6a93b66bc839038b4b2e4fd2b812ccf62c63
Author: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
Date:   Mon Mar 27 12:47:08 2017 +0300

    lib/igt_kms: Add support for 4K and audio HDMI EDID injection.
    
    Based on the initial work by Marius Vlad.
    
    v3: Bring back audio injection
    v4: Make a helper for 3d/4k/audio HDMI injection (Petri)
    
    Cc: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>
    Signed-off-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>

commit 92f6ee94cd957a55276b41b690f011dc503e17d9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 19 17:54:52 2017 +0100

    benchmarks/gem_latency: Provide LOCAL defines for old libdrm
    
    In order to bend over backwards to keep supporting Android.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f6a31ad35834b830906877400446c39132369457
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 19 13:38:32 2017 +0100

    igt/gem_exec_nop: Add some output to headless subtest
    
    Report the measurements as we make them.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b3e4273593dbebd410eaba359464ac32a7897e1f
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Thu Apr 13 12:50:35 2017 +0300

    tests/gem_spin_batch: Add multiengine test
    
    Parallel spin on all engines.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b86c70c457a996bed0bfe3ba7ec5bc551d77e9d7
Author: Marta Löfstedt <marta.lofstedt@intel.com>
Date:   Wed Apr 19 13:13:00 2017 +0300

    tests/meta_test: Add a meta test for sanity checks of CI systems
    
    The intention of this test is use it to test that the CI system
    that runs IGT is collecting the results correctly.
    
    For: VIZ-10281
    
    v2: minor edits
    
    Signed-off-by: Marta Lofstedt <marta.lofstedt@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 8e4cfb2ac60d5d00e3bd5d742c4d7e3cea190de9
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Thu Apr 13 14:11:05 2017 +0100

    igt/gem_exec_nop/headless: Verify GT performance in headless mode
    
    Check that no-op execution speed is the same in headless mode
    and with the display active.
    
    v2:
     * Set graphics mode for the test to disable blanking. (Imre)
     * Use igt stats framework as suggested by Chris.
    
    v3:
     * Rename variable names for clearer assert.
     * Simplify by using I915_EXEC_DEFAULT. (Chris Wilson)
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=100572
    Cc: Imre Deak <imre.deak@intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Acked-by: Petri Latvala <petri.latvala@intel.com>

commit ac1fe0968dedf7e6ce8885e18f8d3c68984e59d2
Author: Jason Ekstrand <jason.ekstrand@intel.com>
Date:   Fri Mar 24 16:44:11 2017 -0700

    aubdump: Don't bail if a GEM handle of 0 is passed into execbuf
    
    A gem handle of 0 can be used to check for whether or not 48-bit
    addressing is available.  This keeps aubdump from failing on you if
    you try to do the check.
    
    Reviewed-by: Rafael Antognolli <rafael.antognolli@intel.com>

commit 60568210a5616f2961a832fcb2f15daa5be918d1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 13 16:07:33 2017 +0100

    iget/gem_exec_reloc: Fix simulated relocations
    
    The contract with the kernel is that the presumed_offset matches the
    value written into the batch. In the case where we were creating a new
    object to simulate the old being relocation, we were writing some other
    value into the batch. It just happens that using GGTT read back on !llc
    was causing the original batch to migrated into the aperture, leaving a
    hole suitable for the new batch, and the kernel could therefore skip the
    relocation (causing us to complain).
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=100674
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c7eb3bd634c7af6d8a6e2235f37c628830c14e70
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 13 15:59:55 2017 +0100

    igt/gem_exec_fence: Enable hang detector
    
    Actually check for GPU hangs when not running the hanging tests.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9372ad64c4e63c111124ba95506b27ce2bb70b47
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 13 10:08:09 2017 +0100

    igt/gem_storedw_loop: Mark up with DOMAIN_WC
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ae15bfe867e7a65146e44c8e47f272a251c05be1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 13 10:08:09 2017 +0100

    igt/gem_mmap_wc: Mark up with DOMAIN_WC
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d2fe0190e0c941968905434e05cfaaaa803ee1c0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 13 10:08:09 2017 +0100

    igt/gem_cs_tlb: Mark up with DOMAIN_WC
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e9cd7d532774f451df87eb567248e3b4210492b2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 13 10:08:09 2017 +0100

    igt/gem_concurrent_blit: Mark up with DOMAIN_WC
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a6138b66e454d8b6f3e0b469e579f4692aeb3092
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 13 08:36:13 2017 +0100

    igt/gem_exec_flush: Use DOMAIN_WC for access via gem_mmap__wc
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4186a2d0e3e200663c2aa999b725e2fa77b49bf8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 13 08:36:13 2017 +0100

    igt/gem_pwrite: Use DOMAIN_WC for access via gem_mmap__wc
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=96563
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3bdafec92fae2d04cb69354ffc26e1e32ac60d65
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 13 08:18:10 2017 +0100

    igt/gem_exec_reloc: Check interactions with WC domain
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1ace3e0210400b70c60fcac11217a5b28b20b86e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Apr 12 17:08:40 2017 +0200

    tests/kms_properties: Add GET_PROPERTY ioctl sanity check
    
    I've broken this accidentally. Let's make sure this doesn't happen
    anymore. Testcases suggested by Chris.
    
    Acked-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 82fdfc65d81e08df08089c3c9cee65f9505c71e2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Apr 11 20:20:28 2017 +0100

    lib: Fix up internal engine names (again)
    
    Another day, another format. Now we include the 0-based instance number
    for all engines, and not just vcs1/2.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f0c8bd8c451ec7c8cf23f0e527a4e64d1778323b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Apr 11 14:08:51 2017 +0100

    igt/gem_exec_fence: Restrict allowing hangs to hang tests
    
    If the tests hang outside of the explicit hang tests, we want to fail
    and keep the error state for analysis.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d8b83aa82258c7ffd1fee0cd9409c01bd8b876ab
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Apr 8 15:21:56 2017 +0100

    igt/gem_seqno_wrap: Teach to skip if i915_next_seqno is no long writable
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=100592
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1dc65594110c0bcc5e6776b7c2b958252f36bb65
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Apr 8 14:47:00 2017 +0100

    tools/intel_error_decode: Dump the GuC log if available
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b259c90f1bd66ca9cad0e64ebe61e751180dee3d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Apr 8 14:43:29 2017 +0100

    tools/intel_error_decode: Don't try instruction decoding on data buffers
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 875c27ce54a7e1b4ac29dba7091b25d810b21acd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Apr 8 13:54:12 2017 +0100

    igt/gem_exec_whisper: Move the require(gen>5) out of the child
    
    Don't perform igt_require() in children, it only angers igt.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f0f6f8f3b7413f75b1d7738baa13a71d3fe867f2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Apr 8 13:51:30 2017 +0100

    igt/gem_exec_parallel: Can't run fds test on gen5
    
    gen4/5 require a master device to use the secure dispatch facility to
    use MI_STORE_DWORD -- which is only available to a single fd and so we
    can not execute in parallel across multiple fds, so skip those tests.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b1da8d89c8d13e3f0254d69c639c7f66c10e4175
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Apr 8 13:46:33 2017 +0100

    igt/prime_mmap_coherency: Reorder cache flushes to avoid excess pressure
    
    Flush the secondary buffer from the cpu cache before dirtying the cache
    for the primary to ensure a better chance of the primary buffer
    remaining in cache, causing the incoherency.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ced87bd913bfbfb8ecbe6352d87d133e5e4c81ff
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Apr 8 13:15:18 2017 +0100

    igt/pm_rpm: Use directory fd to track and read entire directories
    
    Rather than compute the temporary full path name, remember it via the dir
    fd we already have.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c3268d9a2698c7e91de48600283c701473f4c85d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Apr 8 00:32:57 2017 +0100

    tests: More require GEM markup
    
    A few more tests that use i915/gem without first checking that the GPU is
    working.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d7db79d971b8f1bb2177d14718b136789b337d39
Author: Daniel Stone <daniels@collabora.com>
Date:   Fri Apr 7 14:15:26 2017 +0100

    tests/kms_*: Use correct DRM context version
    
    DRM_EVENT_CONTEXT_VERSION is the latest context version supported by
    whatever version of libdrm is present. igt was blindly asserting it
    supported whatever version that may be, even if it actually didn't.
    
    With libdrm 2.4.78, setting a higher context version than 2 will attempt
    to call the page_flip_handler2 vfunc if it was non-NULL, which being a
    random chunk of stack memory, it might well have been.
    
    Set the version as 2, which should be bumped only with the appropriate
    version checks.
    
    Signed-off-by: Daniel Stone <daniels@collabora.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 21ab592dcde7cbfa07dcc1e0c7c824a04b8bbd4d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 7 11:47:43 2017 +0100

    lib/pipe_crc: Cache debugfs directory
    
    Keep the debugfs dir found during pipe_crc init around for the entire
    duration of the test.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5dce95fdadf99138dc6c39ad7d223a8bf7ab870d
Author: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
Date:   Fri Apr 7 11:27:03 2017 +0300

    lib/debugfs: Close dir before returning open debugs file
    
    The function igt_debugfs_open() would not close the debugfs dir before
    returning. Tests that do a lot of pipe CRC comparaions, such as
    kms_cursor_crc,  would eventually fail.
    
    (kms_cursor_crc:3853) igt-debugfs-CRITICAL: Test assertion failure function igt_pipe_crc_do_start, file igt_debugfs.c:387:
    (kms_cursor_crc:3853) igt-debugfs-CRITICAL: Failed assertion: err == 0
    (kms_cursor_crc:3853) igt-debugfs-CRITICAL: Last errno: 24, Too many open files
    (kms_cursor_crc:3853) igt-debugfs-CRITICAL: error: -24 != 0
    
    83884e97e187 ("Restore "lib: Open debugfs files for the given DRM device"")
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2cc8c6d5f811e9f16d895a15a33e7236cdcd53af
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 6 23:32:14 2017 +0100

    tools/intel_error_decode: Refactor matching known buffers
    
    Lots of repeated code, and a few missed named buffers.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 93f29f37a0df5ffdc3933c97075c111be091aaad
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 6 23:01:29 2017 +0100

    tools/intel_error_decode: Automatically open a pager
    
    A feature I've wanted for a long time, just to save typing | less every
    time. Implementation nabbed from aubinator_error_decode.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5bd718c8d68a98a1d87ddc400bb1e39e43c8e842
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 6 22:48:19 2017 +0100

    tools/intel_error_decode: Add support for user specified bo
    
    See EXEC_OBJECT_CAPTURE.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit bceec7e1d8a160226b783c6344eae8cbf4ece144
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 6 22:04:44 2017 +0100

    tools/intel_error_decode: Do ascii85 decode first
    
    The dashes "---" may occur within an ascii85 block, but only an ascii85
    block starts with ':' or '~'.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 38dc15857c4da2b5bb6d6ffaf9bafaa0bfbe215a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 5 17:09:15 2017 +0100

    igt/gem_exec_whisper: Extend test patterns with a synchronous variant
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c774395c14a40494be3a4dd0fc9ca1badfaab75a
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Mar 17 14:59:17 2017 +0200

    intel-ci: Add extended.testlist for wider testing
    
    Test list with wider coverage and longer full runtime.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit 56741cedd047f5a4bcfff50f2798685be2cfd9b8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 3 19:18:54 2017 +0100

    tests/gem_media_fill: Fixup typo
    
    Erm, there's no _em but there ia a _gem!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 537e0b848660c65b9d235f5576f29ddea3629b07
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 3 12:02:17 2017 +0100

    tests: More precautionary selfchecks to filter out broken GPUs
    
    If the driver is already wedged, trying to use GEM will only result in
    misleading failure.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9f92893b11e83ed9ec71c3084ccb57f74b18705e
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Tue Mar 21 14:07:15 2017 +0200

    lib/igt_kmod: Don't call igt_assert or igt_require without a fixture
    
    If kmod_module_new_from_name fails, igt_kselftest ends up calling
    igt_skip (through igt_require) when not in a fixture. Instead return
    normally from igt_kselftest, matching behaviour when the module
    loading is successful but it doesn't contain selftests.
    
    Also change one igt_assert to a return for the same reason.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    CC: Chris Wilson <chris@chris-wilson.co.uk>

commit 3174974759f5f1d6e2877181c117790ee4dbd68d
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Tue Mar 21 11:47:34 2017 +0200

    igt_command_line.sh: Actually check things during distcheck
    
    This script is invoked in several different ways and the directories
    to use vary depending on the invocation. The handling of test-list.txt
    has been working before, but executing the individual command line
    handling tests have just skipped everything except shell scripts. Now
    "make distcheck" checks everything "make check" does, as does
    executing the script by hand.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit fa5dc96ce3f7f7d1f51736aa75bc803a30acc4ca
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Tue Mar 21 14:05:04 2017 +0200

    igt_command_line.sh: Handle the special cases of drv_selftest and drm_mm
    
    Kernel selftest launchers use dynamic subtest enumeration. When
    running on a kernel without selftests, they output nothing from
    --list-subtests and exit with 0. Handle this specialty in the checker.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit 12dcd4125837f1725603346f1311d5038d8d7877
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Mon Mar 13 13:21:57 2017 +0200

    Update MAINTAINERS file
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit 4d78533569746ccf26293776727429f7d62dabe4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 30 15:34:36 2017 +0100

    lib: Update kernel engine names
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7e7bc018b7674bc9a91a19a8a3b949c304b2ae77
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 29 19:56:18 2017 +0100

    igt/kms_pipe_crc_basic: Use a fast hang
    
    Inject of using a hanging batch and waiting for the driver to notice,
    issue a hang/reset request directly via debugfs.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ff9c6d7225c923f7d295cf65d022aee0bc763c4a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 29 18:28:09 2017 +0100

    benchmarks/gem_exec_trace: Randomise batch duration
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit dc43fb985b85cf45f68a6af45b6fc92b42817f49
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 29 01:31:10 2017 +0100

    benchmarks/gem_exec_trace: Calibrate dummy workload
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b9d6d207a75ccc07c43be30cf7b6d1fd0957cf8e
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Mar 28 19:19:30 2017 -0400

    tools: Remove accidentally included binary intel_bios_reader
    
    The binary tools/intel_bios_reader was accidentally included
    in 3e04c5197ff965a8cd050f9c3b5213abcf437a31.
    
    This commit removes it again.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Jordan Justen <jordan.l.justen@intel.com>

commit 005502fe908ffcdafacbaf932d75c38fae98a20b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 28 16:05:28 2017 +0100

    benchmarks/gem_exec_trace: Use a constant delay
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f6256cd5f04b8e30233a4601d40c20de5e0db75f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 28 15:11:26 2017 +0100

    benchmarks/gem_exec_trace: Make the tracer threadsafe
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4bf3ca8422e2153b208b0cba791b8a45c64ac9d9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 28 13:12:24 2017 +0100

    benchmarks/gem_exec_trace: Include client wait points
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 49e09e73460b74a56b210b804f32abbcf5eab66a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 28 11:26:39 2017 +0100

    benchmarks/gem_exec_trace: Enhanced multi-context capture
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b6eea5d29c42954d3b7bb790b1d8d5decf35422e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 27 21:13:11 2017 +0100

    igt/pm_rc6_residency: Keep the sysfs directory open
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 429dd43f092cca0e1142e8b9767a43166ee70703
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 27 17:11:07 2017 +0100

    igt/gem_tiled_pread_pwrite: Use streaming loads to speed up GTT readback
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3f6ae7b193c1071a3642b36afae5ef7cfe398812
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 27 16:36:12 2017 +0100

    igt/kms_frontbuffer_tracking: Keep the debugfs dir around
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e520002792b13034bbae5d8b6d05c3ba0ccad643
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 27 16:35:42 2017 +0100

    lib/sysfs: Fix using O_WRONLY in igt_sysfs_read()!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit eb6ed462f256dd983108f1c86ddd5d3a6190624b
Author: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
Date:   Mon Mar 27 14:08:28 2017 +0300

    lib/dummyload: Handle timeout in a new thread instead of signal handler
    
    Currently, the main thread needs to wakeup to run the signal handler
    that ends a spin batch. When testing whether a function call succesfully
    waits for a batch to complete, this behavior is undesired. It actually
    invalidates the test.
    
    Fix this by spawning a new thread to handle the timeout.
    
    v2: Get rid of mutexes. (Chris)
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a27c7437e8a5c17a1bcfd22d0184c1c4185be96b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Dec 3 10:21:08 2016 +0000

    igt: Add gem_exec_capture to exercise capturing user requested buffers on hang
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e77299156606f3f3bf5610586a6a0879bdffcf11
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Mar 25 13:05:38 2017 +0000

    Replace more system("modprobe")
    
    As we have libkmod available, it is faster and safer than calling
    system().
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2297766d8101661cd03749630aeb1c60cc615da1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Mar 25 00:23:47 2017 +0000

    igt/kms_sink_crc_base: CRC is on 3 channels, not 4.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a056f7c4cd23012932ea9013967d87177219797a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Mar 25 00:11:26 2017 +0000

    lib/sysfs: stop before calling write with zero bytes
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 947f5d8037cafbff3cee0c36219a26f25c5e5204
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 24 23:56:04 2017 +0000

    igt/kms_pipe_crc_basic: Fix assertion for bad commands
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4e8b533fe82cb14dde9c730e10e77a4436c28741
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 24 23:00:06 2017 +0000

    igt/kms_sink_crc_basic: Fix debugfs error handling
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e08ed8a272fda96b8f7224985177f313c3b2ddf6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 24 20:52:44 2017 +0000

    lib/debugfs: Phase out igt_debugfs_fopen()
    
    Wrapping fdopen() proved dangerous, the underlying fd is not refcounted,
    and we must close it in the library or else we easily leak and exhaust
    all fd. Since we can't provide igt_debugfs_fopen(), move the burden onto
    the caller for those that require a stream FILE*.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 58de785468782f29e6eb1d32d47b55b3d234dfcf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 24 18:11:08 2017 +0000

    Improve utilisation of igt_debugfs_dir()
    
    As we can export igt_debugfs_dir() to cache the path to our debugfs
    directory, encourage a few more users to take advantage.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 137360f75a42042198cf00d35a54cc68660d8c90
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 23 17:09:26 2017 +0000

    lib: system() is bad, use libkmod instead
    
    For an as of yet unknown reason, calling system("modprobe") from inside
    igt/gem_wait causes kasan to spend 1-5 minutes copying the process
    pagetables. This evaporates if we replace the fork-happy call to system
    with a call to load the module using libkmod. So be it.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f22e19b38a1593b207b6044cf8fb953c5cddc2b7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 23 10:51:28 2017 +0000

    lib: Clear unrelated errno for intel_detect_and_clear_missed_interrupts
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit fe97e037eb9940f0f246a09ad9f1f7474265ea84
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 23 10:48:32 2017 +0000

    igt/gem_exec_whisper: Do context requirement check in parent
    
    Don't do igt_require() from child processes, igt doesn't like that.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b1fa6c81a59862510a0fbbb9af758ae60ca1f459
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 22 18:30:57 2017 +0000

    igt/gem_exec_reloc: Double memory requirements
    
    Worst case is that the kernel has to copy the entire incoming reloc[],
    so double the memory requirements.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 83884e97e18739e3588c6467a210838099d42073
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 21 17:16:03 2017 +0000

    Restore "lib: Open debugfs files for the given DRM device"
    
    This reverts commit 25fbae15262cf570e207e62f50e7c5233e06bc67, restoring
    commit 301ad44cdf1b868b1ab89096721da91fa8541fdc
    Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Date:   Thu Mar 2 10:37:11 2017 +0100
    
        lib: Open debugfs files for the given DRM device
    
    with fixes.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 25fbae15262cf570e207e62f50e7c5233e06bc67
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Tue Mar 21 17:57:04 2017 +0100

    Revert "lib: Open debugfs files for the given DRM device"
    
    This reverts commit 301ad44cdf1b868b1ab89096721da91fa8541fdc.
    
    When a render-only device is opened and gem_quiescent_gpu is called, we
    need to use the debugfs dir for the master device instead.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 7be509c411db2b35f6593e41222b0ad4c0e764e0
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Tue Mar 21 17:30:06 2017 +0100

    igt/kms_pipe_crc_basic: Don't assert on errno after success
    
    If errno contains left overs from previous syscalls, we'll be failing
    the assert in some successful conditions.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit ba6d0dce2c3afa26a1dd3ceed024e281395cc7ce
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 21 15:48:49 2017 +0000

    lib/debugfs: Only inspect errno after a confirmed error
    
    The contents of errno are strictly only valid after a syscall (or library
    function) reported an error.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 301ad44cdf1b868b1ab89096721da91fa8541fdc
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Thu Mar 2 10:37:11 2017 +0100

    lib: Open debugfs files for the given DRM device
    
    When opening a DRM debugfs file, locate the right path based on the
    given DRM device FD.
    
    This is needed so, in setups with more than one DRM device, any
    operations on debugfs files affect the expected DRM device.
    
    v2: - rebased and fixed new API additions
    
    v3: - updated chamelium test, which was missed previously
        - use the minor of the device for the debugfs path, not the major
        - have a proper exit handler for calling igt_hpd_storm_reset with the
          right device fd.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Reviewed-by: Robert Foss <robert.foss@collabora.com>
    Acked-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e7a0d06730f77842998368660fb45fe5c1738fda
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 21 13:12:07 2017 +0000

    igt/gem_exec_nop: Sync before measuring total elapsed time
    
    The systematic error should be lost in the millions of cycles, but
    better pedagogically correct.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2debc96208a7d433ce1a313945fe5aa1a87192c4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 21 12:10:00 2017 +0000

    igt/gem_userptr_blits: Allow use of >4GiB
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=94609
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c4dc550dbcf96ff0ad1a1ca24c77ac0a389f1f11
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 21 08:57:11 2017 +0000

    igt/gem_spin_batch: Reduce impact from slow queueing
    
    Subtract the time it takes to do a loop to submit the batch from the
    dummy load, so in theory each loop takes a constant time (100ms).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5635ea9dae4a033d0ff144d9b58e184168a8c684
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Mar 20 18:40:10 2017 +0100

    lib/igt_kms: Do not refresh all outputs in igt_display_commit
    
    Now that igt_output_set_pipe handles refreshing igt_output,
    we only have to be sure that there are no conflicting outputs
    in igt_display_commit.
    
    Reported-and-tested-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 6bdbf92423cacf39a728c39d2669eb5ddb44f1fb
Author: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
Date:   Wed Mar 1 12:57:16 2017 +0200

    intel-ci: Add initial generic testlist
    
    Similar to fast-feedback test list. The point of the generic test list is to gather
    pass-rate when running generic tests - i.e., tests that don't rely on specific GPUs.
    Again, this test list is dynamic and will either shrink or grow over time.
    
    Signed-off-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
    Cc: Petri Latvala <petri.latvala@intel.com>
    Cc: Tomi Sarvela <tomi.p.sarvela@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com

commit 5ae60a48d18f273b7c7d1a5dfca80eb4d61a0cce
Author: Mika Kahola <mika.kahola@intel.com>
Date:   Wed Mar 8 16:59:19 2017 +0200

    tests/kms_atomic: test that TEST_ONLY does not clobber state
    
    We need to make sure that TEST_ONLY really only touches the free-standing
    state objects and nothing else. Test approach here is the following:
    
    - Create a config and submit it with TEST_ONLY.
    - do dpms off/on cycle with the current config to reconfigure hw
    - read back all legacy state to make sure none of that is clobbered
    
    v2: use ATOMIC_RELAX_NONE instead of CRTC_RELAX_MODE when checking crtc or
        plane state (Maarten)
        rename subtest and function that executes this test (Maarten)
    
    Signed-off-by: Mika Kahola <mika.kahola@intel.com>
    Reviewed-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 0aef486061ff33742087f2432314d5008002b1f2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Mar 19 15:47:42 2017 +0000

    igt/kms_vblank: Exercise contention of drmWaitVblank
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5b4683603bdddd35f529e289bda0f93ab05ceedb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 17 12:40:18 2017 +0000

    igt/drv_hangman: Setting wedged is serialised
    
    So we don't need to use an artificial delay.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 073cfd7bb2d4cecbc1898d6c49aef5eca2cf7c3e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 17 11:52:51 2017 +0000

    igt/gem_exec_schedule: Never use STORE_DWORD_IMM on SNB bsd engine
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 97783c66aece1becff82cffbb6891d49e860cb0c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 16 22:47:48 2017 +0000

    igt/gem_userptr_blits: Move assert to caller
    
    Improve the error message by having the caller do the assert
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 673bf767ebba2936fd41b3e8ab57ca4d38cc7b08
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 16 22:46:30 2017 +0000

    lib: Remove requirements spam from gem_set_tiling()
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d08d2635c8a8230f2831d3a336f570aa3a38fe68
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Mar 14 19:32:08 2017 +0200

    tests/kms_cursor_legacy: make_busy() before get_vblank()
    
    VLV is a sloth and so doing anything extra between the first and last
    get_vblank() is likely to increase the chance of failing the test.
    Let's move the make_busy() stuff to happen before the first get_vblank()
    to reduce the amount of work done there.
    
    These tests are still failing quite often on my VLV, but that is mostly
    caused by igt_kms's tendency to still re-read all the connector properties
    and whatnot as part of the commit operation. I suspect that fixing that
    would eliminate most of the spurious failures.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 32c4b69a9d18ad7ec62f3e656a08f3325fb942c9
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Mar 15 14:39:03 2017 +0100

    kms_properties: Blacklist legacy link-status connector property.
    
    This will be fixed by converting all connectors to atomic, but this
    fails for now. Blacklist it just like crtc_id temporarily.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit f6eba0b5cfd93ca92007e2071b8ad4a52185e26a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 14 09:52:24 2017 +0000

    lib: Squelch a pair of ignore result warnings
    
    igt_debugfs.c: In function 'igt_drop_caches_has':
    igt_debugfs.c:890:9: warning: ignoring return value of 'fscanf', declared with attribute warn_unused_result [-Wunused-result]
       fscanf(file, "0x%" PRIx64, &mask);
             ^
      CC       igt_aux.lo
      CC       igt_gt.lo
    igt_gt.c: In function 'igt_force_gpu_reset':
    igt_gt.c:382:8: warning: ignoring return value of 'fscanf', declared with attribute warn_unused_result [-Wunused-result]
      fscanf(file, "%d", &wedged);
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 13d946ef2f92cdefc2fb5c493a14a438868d3a86
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 13 21:43:54 2017 +0000

    lib: Update i915_pciids.h
    
    Sync to
    
    commit 77a9e13b5a3c9c0cbd9e672e55970e7358a1a482
    Author: Chris Wilson <chris@chris-wilson.co.uk>
    Date:   Mon Mar 13 11:26:09 2017 +0000
    
        drm/i915: Add i810/i815 pci-ids for completeness
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2c64f11f38f44d21419dc15adc7162bd83f65664
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 13 15:58:26 2017 +0000

    igt/kms_pipe_crc_basic: Tighten timings for CRC readback
    
    The number of vblanks that pass whilst we read back the CRCs is depended
    upon CPU scheduling -- we may take longer than expected and end up
    reading more CRCs. Align the start of the loop to a vblank.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=100132
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 893e4ae2ff05368570d8d3c0fd803655322bcd9e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 13 16:53:21 2017 +0000

    igt/kms_pipe_crc_basic: Skip test before hang injection
    
    If the pipe doesn't exist, don't bother submitting a hanging batch. Do a
    basic check first before doing a crc read against a hanging batch.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 57b4d846bb5372231cd48655ad95657d2f7283c4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 13 15:03:58 2017 +0000

    Revert "lib: Add i915 and drm-mm selftest headers from the kernel"
    
    This reverts commit 5ca0da9f53023b9fcfd327a5f43bc7b0916b24b1.

commit 7a805c2f30da1d5738ff111355073286049ec903
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 13 15:00:33 2017 +0000

    Revert "Always expose IGT subtests for known kernel selftests"
    
    This reverts commit 7ab5c97924bf971a348ff4a1768da624ba2f564c.

commit bb97a0542adf2ae2adab946b2e3fee396d54063a
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Mon Mar 13 15:47:13 2017 +0200

    Update NEWS, bump version to 1.18.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit 7ab5c97924bf971a348ff4a1768da624ba2f564c
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Mar 10 16:20:33 2017 +0200

    Always expose IGT subtests for known kernel selftests
    
    Even when the running kernel does not support selftests, make subtest
    enumeration list known kselftests. The list is generated using
    selftest listing headers copied from the kernel.
    
    If the running kernel gains new selftest subtests, they are listed
    even without copying the headers over and rebuilding IGT.
    
    v2: Use correct names for the testcases
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit 5ca0da9f53023b9fcfd327a5f43bc7b0916b24b1
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Mar 10 13:18:19 2017 +0200

    lib: Add i915 and drm-mm selftest headers from the kernel
    
    Copied as of commit
    
     commit 496b575e3ccbf6fbe57a674c721af43dc8826361
     Author: Chris Wilson <chris@chris-wilson.co.uk>
     Date:   Mon Feb 13 17:15:58 2017 +0000
    
        drm/i915: Add initial selftests for hang detection and resets
    
    The headers are used to enumerate available tests when the running
    kernel does not support selftests.
    
    v2: Also add them to Makefile.sources
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit 9ac59bcc14d146400ae1b8d3df36d53cd7678991
Author: Tomi Sarvela <tomi.p.sarvela@intel.com>
Date:   Mon Mar 13 13:53:10 2017 +0200

    scripts/run-tests.sh: Support testlist files
    
    This patch passes igt scripts/run-tests.sh -T option to piglit runner
    as --test-list.
    
    Restrictions to the option usage come from the piglit side:
    - only last --test-list is processed
    - no test regex inclusions or exclusions are processed if --test-list
    exists
    
    Signed-off-by: Tomi Sarvela <tomi.p.sarvela@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 90c883ce651dc74671086fdf8229902ebde593e7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 10 20:09:26 2017 +0000

    lib: Shrink all i915 caches before measuring avail memory
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e8eb9afd4c53e67d834f520a42a641adb874a463
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 8 13:09:00 2017 +0000

    igt: Exercise the shrinker
    
    Introduce a new fork helper that spawns a process that just repeatedly
    calls i915_gem_shrink_all() and watch what happens as we try to use
    objects that have been shrunk.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit df75b388f915c813e69b3139e16c45ffe956c58b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 10 12:02:27 2017 +0000

    igt/gem_ringfill: Measure ringsize for quicker and deterministic testing
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 70eccb5cf74bf4108fcd26db9c7159f2e6bab4c2
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Wed Mar 8 16:44:35 2017 +0200

    assembler/gen8_disasm.c: Remove unused m_mask_ctrl
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit d72961ed8644f9b51461081a7869fc2b2776a18f
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Wed Mar 8 16:44:34 2017 +0200

    tests/testdisplay: Remove unused SPRITE_COLOR_KEY
    
    Unused since 99bdf4f0ff3e ("tests/testdisplay: Use cairo helpers to draw to plane")
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit bb4d605f6dc1e7438560cef91f60e75bd3900f89
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Wed Mar 8 16:44:33 2017 +0200

    tools/intel_vbt_decode: Remove unused code
    
    efp_conn() and related have been unused since 86a546f6f798
    ("tools/intel_bios_reader: Dump out more information from the child
    device structure")
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Jani Nikula <jani.nikula@intel.com>

commit 3c2d5949720584a7e94db0c28a1a95a67c31e847
Author: Jason Ekstrand <jason.ekstrand@intel.com>
Date:   Thu Mar 9 15:51:50 2017 -0800

    aubdump: Support EXECBUFFER2_WR

commit 6f50d73ed902bedd74b3f46c0f0509de8298b6b7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 9 22:39:55 2017 +0000

    igt/gem_exec_parse: add hang detection
    
    Because byt needs it...
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9759df989f18697a817d5de27021bae09bcf344e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 9 22:13:02 2017 +0000

    lib: Fix hang detector
    
    The kill/signal became mismatched in
    commit d930b6493d93 ("lib: Add basic support for valgrind annotations.")
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d592fb9d40084de0d4bd107e817233b2ac5bb1b9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 9 12:27:32 2017 +0000

    igt/evictions: Isolate the mlock check in a separate process
    
    The initial mlock() is to check we can assigned all of memory to
    ourselves -- without the kernel killing us. Move that check to an
    isolated process so that we sacrifice the child.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 76f300d4d2475249a51c538cc41989f10f8c263a
Author: Terrence Xu <terrence.xu@intel.com>
Date:   Fri Mar 10 03:34:49 2017 +0800

    Add the new tool for create GVT-g Linux guest based on KVMGT
    
    GVT-g (Intel® Graphics Virtualization Technology) is a full GPU
    virtualization solution with mediated pass-through support.
    
    This tool is for create basic Linux guest based on KVMGT with
    VFIO framework, it including create vgpu, create guest, check IP
    address, destroy guest, remove vgpu,check dmesg log, etc functions.
    
    v2: Treat this case as a free-standing tool, with detect & skip
    when it's not running on GVT-g capable platform or running without
    the required tools.
    
    v3: Make some optimizations: like "update the generate mac address
    scripts", "provide more useful information for end user", etc.
    
    v4: Miscellaneous cleanup (Petri)
    
    Signed-off-by: Terrence Xu <terrence.xu@intel.com>
    Signed-off-by: Benyu Xu <benyux.xu@intel.com>
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit 7b46ae1ba16082669dc7947b290e327a86b68afa
Author: Michał Winiarski <michal.winiarski@intel.com>
Date:   Tue Jun 30 17:01:10 2015 +0200

    tests/gem_userptr_blits: subtests for MAP_FIXED mappings of regular BO
    
    When the memory backing the userptr object is released by the user, but the
    BO itself is not closed, it's possible to trigger recursive deadlock
    caused by operations done on different BO mapped in that region.
    Testcases are simulating such behaviour by using MAP_FIXED mmap flag.
    
    Signed-off-by: Michał Winiarski <michal.winiarski@intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit fd9f3647bb4a5ead4c2e55c3cf04bd5364486c6a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 8 21:43:02 2017 +0000

    igt/gem_userptr_blits: Exercise boundary of GTT mmaps
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2a7bd7a3e33679cb4fa256c82c6ee0babf322f21
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 8 14:34:34 2017 +0000

    igt: Markup more tests that require GEM
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8fcca1967c539b33c8d69dc834ca564c0fa907fd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 8 12:22:58 2017 +0000

    igt/gem_madvise: Correct expected results
    
    Trying to execbuf with a purged object is meant to fail.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 28a2f14956f7672e303fed1f9ec85cade7bd7a56
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 8 12:22:13 2017 +0000

    igt/gem_eio: Check we succeed in unwedging the driver
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5e8fb77026d2a0d172b39a7bede0ce735f99d8f2
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Tue Mar 7 16:11:25 2017 +0200

    tests: Add gem_spin_batch
    
    Add gem_spin_batch to test that the dummyload infra
    is working properly. Can be also act as tool to force
    a single engine to be busy for controlled period of time.
    
    v2: plenty of igt-fu improvements (Chris)
    v3: nesting batches for more utilization, epsilon fun (Chris)
    v4: clear interrupts on start (Chris)
    
    Cc: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0a0eb5d48bab8df3e2fd530fb631e1478c9c9215
Author: Michel Thierry <michel.thierry@intel.com>
Date:   Mon Mar 6 14:10:57 2017 -0800

    lib/igt_gt: Remove duplicated PARAM_NO_ERROR_CAPTURE define
    
    LOCAL_CONTEXT_PARAM_NO_ERROR_CAPTURE exists in lib/ioctl_wrappers.h
    since commit 171b21d9f761 ("igt/gem_ctx_param: Update invalid parma
    number").
    
    Signed-off-by: Michel Thierry <michel.thierry@intel.com>
    Reviewed-by: Robert Foss <robert.foss@collabora.com>

commit 072bbf12707afa65cbe9c7d7ce81eb8ef5bd1d5b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 7 15:13:47 2017 +0000

    lib: Break poll loop to check for a missed signal
    
    If our parent dies, so should we. Our parent should kill us before it
    exits, but just in case we escape, wake up periodically to check upon
    our parent.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 75e032e18a70dd99fa5787a938ef2f51f515595d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 7 12:55:44 2017 +0000

    lib: Check for dead parent first in hang detector
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4b4a6d98f7fedff05e3fec947b29bf90ab151a1f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 6 09:28:32 2017 +0000

    igt/drv_missed_irq: remove redundant clear of missed interrupts
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b30ff3bd3617afd61abdb94d98dcce7ffc29282e
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Wed Mar 1 13:25:52 2017 +0200

    configure.ac: require libdrm >= 2.4.75 for I915_EXEC_FENCE_OUT
    
    I915_EXEC_FENCE_OUT was added in libdrm commit a3d715ee14b2 ("Import
    uapi/i915_drm.h from v4.10-rc5-950-g152d5750dda9") and released in
    libdrm-2.4.75.
    
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit d91fec789d48799268c5e950161993cfa10d5f0a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 1 12:44:05 2017 +0000

    igt/kms_frontbuffer_tracking: Show the crtc index (pipe) not id
    
    The pipe is of particular relevance when checking for FBC/PSR
    compatibility, and easier to understand than its KMS object id.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ef999ae40f30f11f4156c7749dac76b60188ffe7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 1 10:57:06 2017 +0000

    igt/gem_exec_latency: Measure ring size
    
    Measure the ring size and limit the number of our batches to avoid
    stalling (and livelocks) by waiting upon queued batches.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=99910
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d85411680c9e7656229be2ec33bd3bccbe2f1577
Author: Lyude <lyude@redhat.com>
Date:   Wed Feb 22 22:16:24 2017 -0500

    tests/chamelium: Don't sleep so much in basic hpd tests
    
    Now that we can just disable HPD storm detection, there's no need to
    sleep between each hotplug cycle.
    
    Signed-off-by: Lyude <lyude@redhat.com>

commit a8ea5ddc7b6896eb192163ceb4a481d680fece2f
Author: Lyude <lyude@redhat.com>
Date:   Wed Feb 22 21:16:16 2017 -0500

    lib/igt_debugfs: Add functions/tests for controlling/testing HPD storm logic
    
    Recently we added i915_hpd_storm_ctl into i915's debugfs directory,
    which allows us to control the thresholds i915 uses for detecting
    hotplug interrupt storms from userspace, along with the ability to
    entirely disable them. This adds some helper functions into IGT to
    enable making use of this feature, along with adding some chamelium
    tests for it.
    
    Signed-off-by: Lyude <lyude@redhat.com>

commit a9dcd63441648d3f556ee80b77ea4c5b0c058964
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Feb 27 13:08:41 2017 +0100

    kms_properties: Ignore CRTC_ID for the legacy case
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit eb53664b5dddfa9deaf3810eaa5937c537820a05
Author: Dorota Czaplejewicz <dorota.czaplejewicz@collabora.co.uk>
Date:   Mon Feb 27 13:47:32 2017 +0200

    tests/kms_atomic_transition: Add missing variable declaration
    
    Signed-off-by: Dorota Czaplejewicz <dorota.czaplejewicz@collabora.co.uk>
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit becafe5503a4ed6144459dca22a36a96836dd0ac
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Feb 27 11:18:02 2017 +0100

    kms_atomic_transition: Add test for primary plane togging vs vblank.
    
    When enabling atomic rmfb a bug was found where vblank waits were timing
    out. Add a testcase that tests if vblanks work regardless of primary
    plane visibility.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit d930b6493d93a6e6c2ca9a5ed468d360a9183586
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Feb 9 10:42:01 2017 +0100

    lib: Add basic support for valgrind annotations.
    
    SIGRTMAX appears to be used by valgrind now for its internal tracking,
    so avoid it in the helpers.
    
    Also add some valgrind annotations in gem_mmap, to make sure that its
    accesses are tracked correctly. I've also added gem_munmap, but there
    are a lot of places that don't use it yet in tests/.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 8f3164ff51b7ceef87ebc285c5ba9874ceee767e
Author: Mika Kahola <mika.kahola@intel.com>
Date:   Fri Feb 24 14:38:42 2017 +0200

    benchmarks/gem_latency: Fix compiler warning
    
    Fix compiler warning about I915_EXEC_FENCE_OUT definition/redefinition
    as it is defined in libdrm/i915_drm.h:890:0
    
    gem_latency.c:48:0: warning: "I915_EXEC_FENCE_OUT" redefined
     #define I915_EXEC_FENCE_OUT (1 << 17)
      ^
    In file included from ../lib/intel_batchbuffer.h:6:0,
                     from ../lib/drmtest.h:39,
                     from ../lib/igt.h:27,
                     from gem_latency.c:31:
    
    Signed-off-by: Mika Kahola <mika.kahola@intel.com>

commit 8ec8040a13657408d8b230c77f0a9c934d6e3490
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 23 09:59:01 2017 +0000

    overlay: Accommodate more engines
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d204f2d5df6d51dcfaf5e64e5a9876de753907e8
Author: Michel Thierry <michel.thierry@intel.com>
Date:   Thu Feb 23 07:27:36 2017 +0000

    igt/drv_hangman: Fix checking of strcasecmp against expectation
    
    Comparing strcasecmp against a bool promotes the bool into an integer
    and not force strcasecmp to be a bool. Since strcasecmp can return
    negative or positive values for error (not a boolean!) we need to
    convert into a boolean before comparing against our expectation.
    
    Signed-off-by: Michel Thierry <michel.thierry@intel.com>
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5d037bd140eca13e1b71b9eaea80cea766b85965
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 23 02:06:22 2017 +0000

    igt/drv_hangman: Clear the error state by actually writing to sysfs
    
    The call to igt_sysfs_set("") was trying to write the empty string, i.e.
    0 bytes and so never made it to the kernel. Use igt_sysfs_write("", 1)
    instead to send the NUL byte to the error state in order for it to be
    cleared.
    
    Reported-by: Michel Thierry <michel.thierry@intel.com>
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c5da0662d1c0dd92bbaf307b6c35449c0c598300
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 23 02:04:48 2017 +0000

    lib/sysfs: Explicit read/write length
    
    Export a couple of routines to read/write an exact length, rather than a
    strring.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a7c9add6ff823a7c5bd440422fa84a748f08db0f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 23 02:04:31 2017 +0000

    igt/gem_exec_latency: Assert the relocations are correct
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ee4e38f9350fd8c69a3b228b8caff329fcfd87be
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Feb 22 21:17:12 2017 +0000

    igt/drv_missed_irq: Enable fault injection!
    
    Fixes: 4c5ed71fa743 ("igt/drv_missed_irq: Clear pending IRQs before testing")
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=99909
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f00c678a9df652f5459cd4417f027bd19c189b75
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Feb 4 16:17:17 2017 +0000

    intel-ci: Exercise all basic relocation targets
    
    There are several possible relocation methods the kernel uses depending
    upon the placement and caching of the buffers. Lots of different code
    paths not being covered by BAT - expand the testing to cover them. Even
    though there are quite a few paths, individually they are each very
    fast.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>

commit 9518cb59abe35143f15abac2b7ffdb99820ef53c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Feb 22 15:24:54 2017 +0000

    igt: Start marking up GEM tests that require an alive GPU to function
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit af0e1c583e4235028a750551b4637c79ff482b30
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Feb 21 18:25:58 2017 +0000

    igt/gem_exec_scheduler: Fix test for context priorities
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=99893
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 545aa339822306e93bf01069175f252cd4feb579
Author: Brian Starkey <brian.starkey@arm.com>
Date:   Mon Feb 20 11:02:48 2017 +0000

    lib/igt_kms: Remove redundant cursor code
    
    The dynamic plane support means that there should never be gaps in the
    pipe->planes array. This means we should never need to move the cursor
    plane from the last slot to another.
    
    Remove the unnecessary code, and add an assert that makes sure nothing
    strange happened that broke the assignment logic.
    
    Signed-off-by: Brian Starkey <brian.starkey@arm.com>
    Reviewed-by: Robert Foss <robert.foss@collabora.com>

commit c2254c4fa68526760f8c95e72a676a708421da27
Author: Brian Starkey <brian.starkey@arm.com>
Date:   Mon Feb 20 11:02:47 2017 +0000

    lib/igt_kms: Fix memory corruption when there's no cursor plane
    
    The dynamic plane support means that if there's no cursor plane, then
    there is no space in the pipe->planes array for it, and thus assigning
    a "drm_plane-less" plane is out-of-bounds and leads to heap corruption
    and later crashes.
    
    The "drm_plane-less" cursor plane isn't included in n_planes anyway,
    which means there's no way to ever access it/know that it's there - so
    just remove it entirely.
    
    Fixes: 36656239ef96 lib/igt_kms: Implement dynamic plane count support
    Signed-off-by: Brian Starkey <brian.starkey@arm.com>
    Reviewed-by: Robert Foss <robert.foss@collabora.com>

commit 45f9bb49b153c0833c088e4fffe7273129fe8715
Author: Brian Starkey <brian.starkey@arm.com>
Date:   Mon Feb 20 11:02:46 2017 +0000

    lib/igt_kms: Fix possible out-of-bounds access
    
    If there's no primary plane, pipe->plane_primary == -1, and the assert
    meant to check that it's valid will access pipe->planes[-1].
    
    Fix that to check that pipe->plane_primary has been set instead.
    
    Fixes: 36656239ef96 lib/igt_kms: Implement dynamic plane count support
    Signed-off-by: Brian Starkey <brian.starkey@arm.com>
    Reviewed-by: Robert Foss <robert.foss@collabora.com>

commit 1ab629f0f9da4773b5590b91694a5592d21344d5
Author: Brian Starkey <brian.starkey@arm.com>
Date:   Mon Feb 20 11:02:45 2017 +0000

    lib/igt_kms: Neaten up pipe->planes[] assignment
    
    Remove a bunch of branches, functionally equivalent.
    
    Changes since v1:
     - Added back display->has_cursor_plane assignment
    
    Signed-off-by: Brian Starkey <brian.starkey@arm.com>
    Reviewed-by: Robert Foss <robert.foss@collabora.com>

commit 4cb80dbd18f182250eec62b52b79f3abf01ce815
Author: Brian Starkey <brian.starkey@arm.com>
Date:   Mon Feb 20 11:02:44 2017 +0000

    lib/igt_kms: Fix drm_plane leak
    
    In the loop looking for planes on a pipe, we always want to free up
    the drm_plane afterwards.
    
    Fixes: 36656239ef96 lib/igt_kms: Implement dynamic plane count support
    Signed-off-by: Brian Starkey <brian.starkey@arm.com>
    Reviewed-by: Robert Foss <robert.foss@collabora.com>

commit 4a9259230847d9756ab964205d350dfb8dcf508b
Author: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
Date:   Tue Feb 21 15:32:14 2017 +0200

    kms_frontbuffer_tracking: Fix badstride test skipping with atomic
    
    In the new atomic reality, the page flip in the end of the badstride
    test succeeds. That flip is to an fb which has a stride too large to
    allow FBC to be enabled. Adjust the test expectations accordingly.
    
    Cc: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Cc: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
    Reviewed-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 2210c5b0b82ed207fde1d88afc5596a8d386fcae
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 9 08:19:35 2017 +0000

    intel-ci: Test wait ioctl on a queued request
    
    Another bug found first in the wild...
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>

commit 5ef31ea1c82c2571e7f65f11fddf99fd199d6314
Author: Brian Starkey <brian.starkey@arm.com>
Date:   Fri Feb 17 15:26:54 2017 +0000

    kms_atomic_transition: Initialize pipe_crcs to avoid segfault
    
    igt_pipe_crc_new() is skipped for non-Intel devices, but the later calls
    to collect_crcs_mask() will attempt to retrieve CRC values if the
    pipe_crcs pointers are non-NULL.
    
    Zero-initialise pipe_crcs to avoid accessing garbage pointers on
    non-Intel devices.
    
    Signed-off-by: Brian Starkey <brian.starkey@arm.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 50c4f0237183fcd35a0bbb93b5c60d69217f04b4
Author: Oscar Mateo <oscar.mateo@intel.com>
Date:   Thu Feb 16 06:31:28 2017 -0800

    tools/intel_guc_logger: Fix the assert for the verbosity level
    
    I guess no one has needed to change the verbosity level of the GuC logs.
    
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>
    Reviewed-by: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
    Reviewed-by: Robert Foss <robert.foss@collabora.com>

commit f2251a9242c0ca9b3349098c5e2a8aac47952cd3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 17 09:14:10 2017 +0000

    igt/gem_exec_reloc: Do basic tests of 4/8-byte aligned reloc.offsets
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 11e31f9e5abfda8a0a51561ed01ad48c2692e320
Author: Mika Kahola <mika.kahola@intel.com>
Date:   Thu Feb 16 11:20:45 2017 +0200

    lib/igt_kms: Fix regression on kms_plane_lowres test
    
    kms_plane_lowres subtest pipe-C-tiling-none crashes when reading out
    number of crtc. This patch fixes the bug on crtc readout.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=99653
    Fixes: 9de635976c426b4c835083792c7d4d6e32aec615
           ("lib/igt_kms: Avoid depencency on static plane count")
    
    Reviewed-by: Robert Foss <robert.foss@collabora.com>
    Signed-off-by: Mika Kahola <mika.kahola@intel.com>

commit ca2ba471d630aef4315bca98df6b345bed872536
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Feb 12 21:41:08 2017 +0000

    igt/gem_wait: Expand testing to waits on write fences
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3e65f190e8a33169b20d8d3a011235d65ef0b9d3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 10 15:15:47 2017 +0000

    overlay: Check for DRI2 errors when setting up
    
    Otherwise we ignore a remote ssh connection and try to use DRI2 over it.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ae7804ddb4cad7f15e26a0eccff7cc05bf080436
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Jan 17 14:31:21 2017 +0200

    tools/intel_reg: Dump SKL AUX_DIST registers for all planes
    
    We are missing the AUX_DIST registers for pipes A and B. Add them,
    and move the pipe C AUX_DIST registers next to the AUX_OFFSET registers
    for a bit more convenience.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 0174d22e83fbf264fbe3d582839ebc414b168b18
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Mon Feb 6 15:54:02 2017 +0200

    tests/drv_suspend: Skip */crc/* in debugfs-reader
    
    Reading the CRC files in debugfs will never
    terminate. drv_suspend/debugfs-reader will leave a cat process around
    which blocks all other access to the device until manually killed if
    CRC files are not omitted.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit 69926e3f6a9f439eaa48f0fe2abfff92df63f386
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Feb 8 19:11:30 2017 +0000

    igt/gem_wait: Inject hangs again for hang-wait-*
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0aed4dffb517536cff575633fa1f049bd6393184
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Feb 8 18:10:29 2017 +0000

    igt/gem_wait: Exercise BUG_ON if wait_for_execute times out
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3d7a27e47689a1045d760fb8ab6976a60e0f3d8f
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Feb 8 15:47:45 2017 +0100

    igt_kms: Handle failure in drmModeGetConnector gracefully.
    
    This can happen when a DP-MST disappears, handle the error by printing
    a warning instead of crashing.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 8b5453b1e2af9d8bc660916a78e005fd6dab0a31
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Feb 7 16:08:10 2017 +0000

    lib/kselftests: Split up igt_kselftests()
    
    To make it easier to reuse, split up the the single function up into
    stages.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 164051347421710b8fa7fe79afec2ef1ffd97d30
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Feb 8 09:00:23 2017 +0100

    kms_flip: Handle EINTR in poll call for -interruptible tests.
    
    This fixes the following failure in kms_flip:
    (kms_flip:12099) CRITICAL: Test assertion failure function calibrate_ts, file kms_flip.c:1190:
    (kms_flip:12099) CRITICAL: Failed assertion: poll(&(struct pollfd){drm_fd, POLLIN}, 1, -1) == 1
    (kms_flip:12099) CRITICAL: Last errno: 4, Interrupted system call
    Stack trace:
      #0 [__igt_fail_assert+0xf1]
      #1 [run_test_on_crtc_set.constprop.13+0x18f3]
      #2 [run_pair+0x31f]
      #3 [main+0x463]
      #4 [__libc_start_main+0xf0]
      #5 [_start+0x29]
      #6 [<unknown>+0x29]
    Subtest 2x-plain-flip-ts-check-interruptible failed.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=99651
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit bcd7ed6142a497c979862bc3c67fed52ef966c3d
Author: Lyude <lyude@redhat.com>
Date:   Tue Feb 7 12:50:47 2017 -0500

    igt/core: Return condition result from igt_warn_on*()
    
    This allows us to be a little more flexible with how we use
    igt_warn_on() and igt_warn_on_f() by allowing us to write statements
    like this:
    
            if (igt_warn_on(scary_condition)) {
                    /* some error handling... */
            }
    
    Signed-off-by: Lyude <lyude@redhat.com>

commit f63e070b469d96be2bf470eae63a16b4a9e9cc0d
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Feb 7 17:18:12 2017 +0100

    kms_frontbuffer_tracking: Fix tests with the new atomic reality.
    
    Stride change through page flip is now allowed.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit d2964b5c4da338e4f82fd34f204a97583ef689bf
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Feb 7 17:13:11 2017 +0100

    kms_frontbuffer_tracking: Skip tests when stride is too high.
    
    On a 4k hdmi display the stride might be too high for fbc to be
    enabled, in this case skip the test entirely.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit c4b871e63ed6b194f113e326dcfe259c0b264bf1
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Feb 7 17:11:05 2017 +0100

    kms_atomic_transition: Only call unprepare_fencing when prepare_fencing is called.
    
    Else we get a null pointer deref on the other tests.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 0f1db813b1f8142e834fcae4297e489c132a65ee
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Feb 6 16:06:56 2017 +0100

    kms_busy: Neuter the hangcheck timer for the modeset-*-pipe tests.
    
    The hangcheck timer may invoke a gpu reset before we finished waiting.
    To prevent this, we disable it and re-enable it afterwards. This will
    make sure that the nonblocking modeset waits for the fb before
    doing the modeset.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit c5854989052af7d2022fb042bd7c69c2e27132ee
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Mon Feb 6 12:11:43 2017 +0200

    tests/gem_exec_reloc: Don't call igt_(dis)allow_hang outside fixtures
    
    gem_exec_reloc --list-subtests breaks otherwise.
    
    v2: use igt_subtest_group (Chris)
    
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit cc8c9608acd5b795c0cc85ca6dec4c7f697d7705
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Feb 4 19:29:57 2017 +0000

    lib/gt: Set context for contolling bannable
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9a97d50ca3008b573511e97cfca2e1090db6c2a3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Feb 4 17:46:30 2017 +0000

    igt/gem_exec_reloc: Check against hangs before relocations
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 241b78233f0b8edebdf5c291729df1a3ca2eff4d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Feb 4 17:20:33 2017 +0000

    igt: intel_gen(intel_gen()) eek
    
    Painfully obvious afterwards.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 879900ef070fcb88c425d3e669f1257d4cc8661f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Feb 4 10:03:06 2017 +0000

    igt/gem_sync: Relax gen2 filtering
    
    The most basic sync test uses a nop batch, no stores. This is safe to
    run on gen2.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 25b5a74b7f096c870bd2d0fa6e058d5f1acca45b
Author: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
Date:   Fri Feb 3 14:45:30 2017 -0800

    tests/gem_exec_params: add test for exec_fence params
    
    Added a subtest for invalid FENCE_IN usage, updated invalid-flag subtest
    and made the rsvd2 test skip when exec fences are available.
    
    Signed-off-by: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ee6a40fd01871b79a391646e15ce76bd9d5c1138
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 3 21:57:33 2017 +0000

    igt: Skip MI_STORE_DWORD_IMM on gen2
    
    On gen2 MI_STORE_DWORD_IMM operates on a physical, not virtual, address
    i.e. we can't use it.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ba0d1dcb2b6e6a5ec6cb1645988df7c8eccec5c3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 27 21:35:37 2017 +0000

    intel-ci: Minimal exercise of explicit fencing
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>

commit 33ab71c31bd9383585284abfbd04e1d93669dcae
Author: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
Date:   Fri Feb 3 11:51:33 2017 +0200

    lib/igt_kmod: Compare module names with strcmp
    
    The function igt_kmod_is_loaded() returns the wrong value when there is
    a module loaded whose name is a prefix of the name supplied as a
    parameter. For instance, if the "snd" module is loaded,
    igt_kmod_is_loaded("snd_hda_intel") will return true even if that module
    isn't loaded, thus causing drv_module_reload to fail in that scenario.
    
    Signed-off-by: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ed86fd9bb5f9a7e9a1da617ec96d2a0bdbd52e55
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Fri Feb 3 09:34:37 2017 +0100

    kms_atomic_transition: Do not use vblank->reserved.
    
    I used it for prototyping a patch locally, was never meant to be
    upstreamed without upstream support.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 6200c7efc95df6e2aafdb67aecdc341ccff3443f
Author: Mika Kahola <mika.kahola@intel.com>
Date:   Thu Feb 2 13:03:18 2017 +0200

    tests/kms_plane_multiple: Test only with maximum number of planes
    
    To be more suitable for BAT testing, let's modify the test such a way
    that it only uses the maximum number of available planes. This reduces
    the total number of subtests.
    
    v2: Fix broken kms_plane_multiple --list-subtests (Petri)
    
    Cc: Petri Latvala <petri.latvala@intel.com>
    Cc: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Robert Foss <robert.foss@collabora.com>
    Signed-off-by: Mika Kahola <mika.kahola@intel.com>

commit f8aa596d1a40bd2edaa7d9eba7cd62ff640b7541
Author: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
Date:   Mon Nov 7 10:32:49 2016 +0000

    tests/kms_atomic_transition: add in_fences tests
    
    Signed-off-by: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Brian Starkey <brian.starkey@arm.com>

commit 187ccf06414480124b6fbaf702eda1b51e4a4e41
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 31 11:43:35 2017 -0500

    tests/kms_atomic_transition: add out_fences tests
    
    Signed-off-by: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Brian Starkey <brian.starkey@arm.com>

commit f034362a2b2ee2fd64cacbfc85b926336c7525ba
Author: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
Date:   Thu Oct 27 12:41:14 2016 +0000

    tests/kms_atomic_transition: add fencing parameter to run_transition_tests
    
    Signed-off-by: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Brian Starkey <brian.starkey@arm.com>

commit bda35e312dc6f7bc35ac1309ca22a5f29d1dfcf7
Author: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
Date:   Wed Oct 26 16:18:23 2016 +0000

    tests/kms_atomic: stress possible fence settings
    
    Signed-off-by: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Brian Starkey <brian.starkey@arm.com>

commit 513846b2850554f973525a5586f56ad467f85831
Author: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
Date:   Mon Jun 20 10:24:08 2016 -0400

    lib/igt_kms: Add support for the OUT_FENCE_PTR property
    
    Add support for the OUT_FENCE_PTR property to enable setting out fences for
    atomic commits.
    
    Signed-off-by: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Brian Starkey <brian.starkey@arm.com>

commit 221848db977eb9b7f7f7ca8b62ec07c50630da46
Author: Robert Foss <robert.foss@collabora.com>
Date:   Mon Jun 20 10:24:08 2016 -0400

    lib/igt_kms: Add support for the IN_FENCE_FD property
    
    Add support for the IN_FENCE_FD property to enable setting in fences for atomic
    commits.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Brian Starkey <brian.starkey@arm.com>

commit 23e3028b1873ed3c65dae8bf4ca9199dd6353382
Author: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
Date:   Wed Oct 26 12:28:51 2016 +0000

    tests/kms_atomic: use global atomic properties definitions
    
    Signed-off-by: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Brian Starkey <brian.starkey@arm.com>

commit e707ace6f3a9a43c5660be65d414a7c90619aede
Author: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
Date:   Wed Oct 26 12:14:43 2016 +0000

    lib/igt_kms: export properties names
    
    Signed-off-by: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Brian Starkey <brian.starkey@arm.com>

commit edf4f1f2dd08e9b3229abf8931e426e7ffe54633
Author: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
Date:   Wed Oct 26 11:56:47 2016 +0000

    lib/igt_kms: move igt_kms_get_alt_edid() to the right place
    
    Signed-off-by: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Brian Starkey <brian.starkey@arm.com>

commit 23d4f2d4a62585cb4e1d951bf7e4d375ee8642cf
Author: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
Date:   Tue Oct 25 21:07:02 2016 +0000

    tests/kms_atomic_transition: use igt timeout instead of blocking
    
    If the event never arrives we can timeout and end the test.
    
    Signed-off-by: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Brian Starkey <brian.starkey@arm.com>

commit 8967235d23bc3bd0c242da9aa7384257c31c4f89
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Thu Feb 2 11:55:36 2017 +0200

    Revert "tests/kms_plane_multiple: Test only with maximum number of planes"
    
    This commit breaks kms_plane_multiple --list-subtests.
    
    This reverts commit 5da674ce4d597bba312cf423939de405d0cafed1.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit 5da674ce4d597bba312cf423939de405d0cafed1
Author: Mika Kahola <mika.kahola@intel.com>
Date:   Wed Feb 1 16:05:45 2017 +0200

    tests/kms_plane_multiple: Test only with maximum number of planes
    
    To be more suitable for BAT testing, let's modify the test such a way
    that it only uses the maximum number of available planes. This reduces
    the total number of subtests.
    
    Cc: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Robert Foss <robert.foss@collabora.com>
    Signed-off-by: Mika Kahola <mika.kahola@intel.com>

commit 808a1aa00fdbc216deb483e6ee27d247f420849c
Author: Lyude <lyude@redhat.com>
Date:   Wed Feb 1 18:17:49 2017 -0500

    tests/chamelium: Don't forget to flush in test_hpd_without_ddc()
    
    This fixes VGA HPD tests without DDC failing due to leftover hotplug
    events being received by the call to reset_state().
    
    Signed-off-by: Lyude <lyude@redhat.com>

commit 26cde2aee659d4bfdb9db8aae461e095447bd1e7
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Wed Feb 1 12:56:34 2017 +0200

    tests/chamelium: Adapt to dynamic number of planes changes
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Lyude <lyude@redhat.com>
    Reviewed-by: Robert Foss <robert.foss@collabora.com>

commit ecfa97e741649174de1567caad24672b5dc2c533
Author: Lyude <lyude@redhat.com>
Date:   Wed Feb 1 15:39:47 2017 -0500

    scripts: Set IGT_CONFIG_PATH in run-tests.sh
    
    Since we run igt under sudo, the home directory changes to that of the
    root account. This causes the chamelium tests to incorrectly search the
    root's home directory for the .igtrc file instead of the current user's
    home directory. So set IGT_CONFIG_PATH to default to $HOME/.igtrc.
    
    Signed-off-by: Lyude <lyude@redhat.com>

commit 45dbbc32f5304311b7d8e12b4ea69005fa9677f8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jan 31 15:53:59 2017 +0000

    intel-ci: Move start of gvt tests last
    
    The purpose of the current placeholder gvt is to reload the module with
    gvt enabled. As a reload, it should be last after the basic reload
    checks.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2ecbdca3ff009b1833968febe2e50b3fa4c1f44e
Author: Robert Foss <robert.foss@collabora.com>
Date:   Mon Jan 23 12:03:26 2017 -0500

    lib/igt_kms: Remove code obsoleted by dyn n_planes implementation
    
    Due to the dyn n_planes implementation some attributes and functions
    were made obsolete and cand be removed.
    
    However to keep all of the tests building the obsolete code is
    removed after all of the tests have been made compatible with the
    dyn n_planes changes.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 859f5e54194524d9dfb91e023e84627a157ae009
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Jan 18 11:28:09 2017 -0500

    tests/kms_plane_lowres: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit c85be7161110236bdf6296758a3f2f38c95d09e6
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 17 17:43:28 2017 -0500

    tests/kms_ccs: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit e3b5ca7b0c38880761479ada099e820a0e680ee4
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 20:21:47 2017 -0500

    tests/prime_mmap_kms: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit a27f831e86ea3ff6c568a692412e4fde7e67b5ae
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 20:21:26 2017 -0500

    tests/kms_vblank: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 265a3a533dd21403b21f901bcc88afa27a86bc06
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 20:19:46 2017 -0500

    tests/kms_universal_plane: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 28cc0a1042444d7375478190d3c93da4badd2f0e
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 20:19:04 2017 -0500

    tests/kms_sink_crc_basic: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 3e04c5197ff965a8cd050f9c3b5213abcf437a31
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 20:18:41 2017 -0500

    tests/kms_rotation_crc: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 70fa64cf58c2d8ef661b970c119fd96680f95839
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 20:17:25 2017 -0500

    tests/kms_rmfb: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 34e9386a0255eabe475505bff3d905b28c0d290b
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 20:16:56 2017 -0500

    tests/kms_pwrite_crc: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 934062ce8b4c2660c556bf752792fd383e7b6016
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 20:16:23 2017 -0500

    tests/kms_psr_sink_crc: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 4de16633230ffcb38ef274b42978c0e3e4993448
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 20:15:11 2017 -0500

    tests/kms_properties: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit ca20170afc6fac81744ffa0a1479fd504706ae37
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 20:14:07 2017 -0500

    tests/kms_plane_scaling: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 0239e15a048c759ea4de2f23ce9b5ecb6b4cf58d
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 20:10:43 2017 -0500

    tests/kms_plane_multiple: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit ee350e7fa9f39571315ba956d66cbe92a266463c
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 20:06:49 2017 -0500

    tests/kms_plane: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 1b066cc3aa34eee5a036089c6ecd35e583557c75
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 20:05:31 2017 -0500

    tests/kms_pipe_color: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 303937ac539e6541173b42f0528cac3271eb8084
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 20:04:55 2017 -0500

    tests/kms_panel_fitting: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 7ed33c4a50aa3cfb0c3079ac6f833a8a77714a88
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 20:00:25 2017 -0500

    tests/kms_mmio_vs_cs_flip: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 08342fef9fc5955b968823c9c167848614dd7acb
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 19:59:41 2017 -0500

    tests/kms_mmap_write_crc: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit a54cf1d5337cd7c8134992f0cb97d99933c28dd5
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 19:59:11 2017 -0500

    tests/kms_legacy_colorkey: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 77803f9601dc5c59d1ddec02c11df15ec923415b
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 19:58:08 2017 -0500

    tests/kms_flip_event_leak: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 908f5cd37cf36c82363f0fc4992a5a156b799557
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 19:57:01 2017 -0500

    tests/kms_fence_pin_leak: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 78d2951f779ace7b6d39c26da2d260e0d707cc14
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 19:56:40 2017 -0500

    tests/kms_fbc_crc: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit a786479742a0faedea55a6c40df87162dc0388dc
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 19:21:26 2017 -0500

    tests/kms_cursor_legacy: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit da67e73906f302434d51f3e1dd03e705e8ce320a
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 18:44:19 2017 -0500

    tests/kms_cursor_crc: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit d4af4f94417b07b0391b39f7a93427129f30fee9
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 18:42:39 2017 -0500

    tests/kms_crtc_background_color: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 6933e4dada99a8f4b5f364ac4f927f5919145206
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 18:41:57 2017 -0500

    tests/kms_chv_cursor_fail: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 2b405b47bb63165b9cee3a2c05a8368d7c6e17cb
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 18:31:20 2017 -0500

    tests/kms_busy: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit dd97e8d72dde5a793cb5641d7f234f6cb9a0defd
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 18:30:43 2017 -0500

    tests/kms_atomic_transition: Add support for dynamic number of planes
    
    Add changes reflecting the new support for dynamic number of planes per pipe.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 36656239ef9679059a10f812db074bee990934d3
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Jan 18 12:28:45 2017 -0500

    lib/igt_kms: Implement dynamic plane count support
    
    In upcoming drm-misc-next changes, the number of planes per pipe has
    been increased as more than one primary plane can be associated with
    a pipe.
    
    The simple fix for this would be to simply bump hardcoded value for
    number of frames per pipe.
    But a better solution would be to add support for dynamic number of
    planes per pipe to i-g-t.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 260df259ce3b7e56adbb8fd223a5de2e84774c14
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Jan 18 11:26:12 2017 -0500

    lib/igt_kms: Rename kmstest properties nplanes and plane
    
    Rename these properties to have them use the same naming convention
    as the igt_*_t structs.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 9de635976c426b4c835083792c7d4d6e32aec615
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Jan 18 12:12:54 2017 -0500

    lib/igt_kms: Avoid depencency on static plane count
    
    Rework kmstest_crtc and kmstest_plane structs and their usage
    to not depend on a static plane count.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit fdced48860ddf632536d212baad09814ce7ee08f
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Jan 18 11:25:39 2017 -0500

    lib/igt_kms: Add index property to kmstest_plane struct
    
    Add an index property which helps accessing the corresponding
    igt_plane_t structure through the igt_*_get_plane() functions.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Mika Kahola <mika.kahola@intel.com>

commit 79c6a84ca85ba76c6a67a7eb35b36237f42c427e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jan 31 11:56:08 2017 +0000

    igt/drv_hangman: Migrate to sysfs
    
    Given that we export the equivalent files between debugfs and sysfs, and
    sysfs is our ABI, use sysfs for ABI testing.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f609d1879355bae7747584a91b4b12e8dc502aef
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Jan 24 16:24:59 2017 +0200

    tools: rename intel_bios_reader to intel_vbt_decode
    
    After all these years intel_bios_reader and intel_bios_dumper still
    manage to confuse me. Read or dump, which one decodes. Rename
    intel_bios_reader to intel_vbt_decode to be in line with the naming of
    all the other tools (particularly the closely related
    intel_opregion_decode tool) that decode previously gathered or dumped
    information.
    
    Acked-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 44023a2d8bddbbc6e89f05b69ab4f1a6a0079b7d
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Jan 31 13:31:57 2017 +0100

    kms_rotation_crc: Make tests pass.
    
    Some tests were failing to set size after rotation, which resulted in
    some tests failing.
    
    Another reason was that the test assumed that vdisplay < hdisplay, this
    is not the case for a 4k DP-MST display, which runs in 1920x2160 mode.
    
    The vtcon switching test was also bogus and caused failures. It's not
    always true and even on a system with fbcon I was seeing a test failure
    because the vt never switched.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit ba7c39caa215e499df93ca45c1dfd592c71b8163
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 18 09:53:41 2017 +0000

    intel-ci: Add multiple ringfill for execlists
    
    Execlists introduces a new wrinkle to filling rings, in that each
    context has an independent set of rings. Add the subtest that exercises
    filling multiple execlist rings (for the same engine) to BAT.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>

commit 7b9499f7e28be49a3db031b4431c9baefe12c951
Author: Robert Foss <robert.foss@collabora.com>
Date:   Mon Jan 30 10:09:42 2017 -0500

    lib/drmtest: Add comment explaining DRIVER_ANY excluding DRIVER_VGEM
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Eric Engestrom <eric.engestrom@imgtec.com>

commit 956affe2c6fcf05ec9189712e23d64f57540ccba
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Mon Jan 30 11:23:48 2017 +0200

    intel-ci: Remove igt@gem_exec_reloc@basic-noreloc
    
    The test was removed.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit 311e75d17d795aa09a7916805985769d3d226abb
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Jan 24 12:20:27 2017 +0200

    intel_bios_reader: print more VBT and BDB header info
    
    Add more info and realign accordingly.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 56cbe6b2f7654dc80ee4c8ffbf46a3c437459827
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Jan 24 12:07:01 2017 +0200

    intel_bios_reader: be more informative about unknown blocks
    
    We don't know how to decode all blocks, make it clear this is not an
    error.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit cb55d6c9e69161fdb217d32b660f13d280a711af
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Jan 24 11:59:06 2017 +0200

    intel_bios_reader: add hex dumping of headers
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 295cd2c3b7430c6283c161d3296875d5dd73211a
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Jan 24 11:48:55 2017 +0200

    intel_bios_reader: abstract a more generic hex dumper
    
    Let us reuse the dumper for headers.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 42b80a137600956750e242bba8a53f66ebe1fcef
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Jan 24 11:56:25 2017 +0200

    intel_bios_reader: add more structured printout of headers
    
    Make the different parts of the VBT stand out better in the output.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit a2fa75ca7ac5b2d8af8f1856981d9a73725440fd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 27 13:32:38 2017 +0000

    lib: Fix emission of MI_BB_START for gen3 and before
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 86361171b7948b8ff99360627ade0acef0882a3d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 27 12:32:07 2017 +0000

    igt/gem_busy: Add diagnostics for missed hangcheck
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 37c80354ff029209d62b8ee9a2d79e8d57230c0b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 27 12:31:11 2017 +0000

    Only build chamelium if its dependencies are met
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2cbb005dc4565e72ee0faaac6cdb5ad4e89e6b6f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 27 09:35:59 2017 +0000

    igt: Bump ioctl numbers for gem_exec_async and gem_exec_fence
    
    A small amount of drift between proposal and final.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a79231ba04abbb62e0bd72a822085c2eb1809dfd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 26 13:11:34 2017 +0000

    igt/gem_exec_reloc: Unify the wc/cpu mmap checks for reloc
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c99f8b7a361b465a931b5f49ccc182921d74373e
Author: Lyude <lyude@redhat.com>
Date:   Tue Oct 18 14:12:09 2016 -0400

    Add support for hotplug testing with the Chamelium
    
    For the purpose of testing things such as hotplugging and bad monitors,
    the ChromeOS team ended up designing a neat little device known as the
    Chamelium. More information on this can be found here:
    
            https://www.chromium.org/chromium-os/testing/chamelium
    
    This adds support for a couple of things to intel-gpu-tools:
     - igt library functions for connecting to udev and monitoring it for
       hotplug events, loosely based off of the unfinished hotplugging
       implementation in testdisplay
     - Library functions for controlling the chamelium in tests using
       xmlrpc. A couple of RPC calls were ommitted here, mainly because they
       didn't seem very useful for our needs (yet)
     - A set of functions for doing CRC checks and frame comparisons in
       tests
     - A set of basic tests using the Chamelium library.
    
    Cc: Tomeu Vizoso <tomeu@tomeuvizoso.net>
    Signed-off-by: Lyude <lyude@redhat.com>
    
    Changes since v1:
    - Don't try to guess connector mappings, have the user specify them
      manually using a configuration file
    - Open DRM fd using DRIVER_ANY, not DRIVER_INTEL
    - Lower the hotplug timeout a little bit, since 30 seconds was leftover
      from debugging these tests anyway
    - Don't try to keep track of the original state of the chamelium ports,
      and just leave them plugged in after each run. This makes more sense
      to me, since I'd imagine in automated testing setups using chameliums
      that all of the extra monitors will probably be provided by the
      Chamelium to begin with, so keeping them plugged in would make sure
      tests running afterwards that require >1 monitor don't get skipped.
    - Add wait_for_connector() to the chamelium tests. After some more
      testing, I found that depending on the system some tests would throw
      false negatives due to us not waiting long enough for the system to
      detect that we connected something to it. This mainly happened with
      VGA connectors, since their lack of HPD makes them take significantly
      longer for the hardware to notice. wait_for_connector() fixes this by
      continually reprobing the status of the desired connector (without
      relying on a hpd event happening, since that might never come) until
      we get what we want, or we time out and fail.
    - Use kmstest_get_property() for retrieving EDIDs instead of doing it by
      hand
    - Don't hardcode PIPE_A for bringing up the display, use kmstest to find
      an appropriate CRTC to use.
    Changes since v2:
    - Fix incorrect usage of the list helpers when recording new EDIDs
    - Add missing documentation
    - Make sure documentation actually appears
    - Since we finally got video capture working, add CRC functions and fix
      the ones we couldn't actually test before
    - In the exit handler, reset the xmlrpc env so we can properly reset the
      Chamelium even after an RPC error
    - Make sure compiling without Chamelium support still works
    Changes since v3:
    - Change the config file name from .igt_chamelium_rc to .igtrc
    - Remove chamelium global context
    - Get rid of define_common_connector_tests()
    - Get rid of connector list, expose connectors as opaque objects and
      provide helpers for accessing their attributes
    - Get rid of configure.ac option for Chamelium
    - Add tests for CRC functions
    - Add frame dumping functions + tests
    - Add FSM handling to chamelium_rpc()
    - Use LIBUDEV_LIBS in automake, not UDEV_LIBS
    - Documentation fixes
    - Improve debugging output some more
    - Remove skip_without_suspend_support, we no longer need to check for
      suspend support before calling things
    - Remove unnessecary malloc() checks with igt_assert()
    - Don't use igt_require in chamelium_init, leave it up to the caller
      whether or not to abort when failing to initialize the chamelium
    - Use igt_assert_eq for making assertions about connector's statuses
    - Define suspend/resume delay for tests as constant

commit 3bd89da289fae2c98f0daaeba4d98ecf19289552
Author: Lyude <lyude@redhat.com>
Date:   Thu Jan 5 13:01:18 2017 -0500

    igt_kms: Add kmstest_set_connector_broadcast_rgb()
    
    A simple helper that checks whether or not the given connector has the
    "Broadcast RGB" prop, and if so sets it to the given mode. Required for
    working with the Chamelium since the Chamelium EDIDs enable limited
    color ranges by default on i915 and break frame dump comparisons/CRCs.
    
    Cc: Tomeu Vizoso <tomeu@tomeuvizoso.net>
    Signed-off-by: Lyude <lyude@redhat.com>

commit 528cdaf063546d0a32cfad6d215db62111054619
Author: Lyude <lyude@redhat.com>
Date:   Thu Dec 29 19:25:31 2016 -0500

    igt_kms: Add igt_output_from_connector()
    
    A simple helper for getting the igt_output_t struct corresponding to the
    given DRM connector id.
    
    Cc: Tomeu Vizoso <tomeu@tomeuvizoso.net>
    Signed-off-by: Lyude <lyude@redhat.com>

commit 6adb7b3737297a32bef50ffb270b83fc314cca6b
Author: Lyude <lyude@redhat.com>
Date:   Thu Nov 17 10:06:09 2016 -0500

    igt_kms: Add helpers for watching for sysfs hotplug events
    
    This adds some basic helpers for connecting to udev and watching for
    sysfs hotplug events.
    
    Cc: Tomeu Vizoso <tomeu@tomeuvizoso.net>
    Signed-off-by: Lyude <lyude@redhat.com>
    
    Changes since v1:
    - Remove unused arg from documentation
    Changes since v2:
    - Make udev_monitor explicit so that we can use this for detecting FSMs
      from the Chamelium in rpc calls

commit c2ddb81c460f95e0074c43687e4bb45fe893198f
Author: Lyude <lyude@redhat.com>
Date:   Fri Nov 4 16:27:12 2016 -0400

    igt_aux: Add igt_set_autoresume_delay()
    
    The default autoresume delay is about 5 seconds. It's possible on a
    system that's not very fast this might not be a long enough time, since
    an asynchronous hotplug event we scheduled on the chamelium that was
    intended to happen during suspend could happen before we actually manage
    to suspend. So, add a function that allows us to increase the autoresume
    time to ensure this never happens during suspend/resume tests with the
    chamelium.
    
    Cc: Tomeu Vizoso <tomeu@tomeuvizoso.net>
    Signed-off-by: Lyude <lyude@redhat.com>
    
    Changes since v1:
    - Use igt_require, not assert

commit 24bfa3e89da0e3cbd7f752ac0bfe4c47d006ded7
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jan 26 11:35:50 2017 +0100

    kms_busy: Add extended tests that force a hang.
    
    The intel driver adds a timeout to each atomic update of 10s for
    the new fb.
    
    Make sure this works as intended, and also test what happens when
    hanging the old framebuffer, with and without modeset. The driver
    waits indefinitely on the old framebuffer, but another blocking
    update will wait at most 10 seconds for it.
    
    Abuse this fact in a testcase. For added bonus also add some tests
    that make sure this works on older gens that perform a display
    reset during gpu reset.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 35afbb0e3bfda8fdb9bbb2b981af7c661ebdf440
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Jan 24 16:04:46 2017 +0100

    lib/igt_kms.c: Always set pipe_changed.
    
    The pipe may be reset when doing a modeset in a fork,
    changing it back after the fork exited caused the output
    not to be updated.
    
    This resulted in a -EINVAL when doing atomic commit.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit ce9783325933905a4a2f69047583a3c855e424de
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 26 08:57:29 2017 +0000

    igt/gem_exec_reloc: Pre-emptive defence against gpu relocations
    
    If we do relocations on the gpu, then we have to wait for the gpu to
    finish writing to the buffer before the relocations are complete.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9f3369750ca82e952018276b80e196908795ee74
Author: Navare, Manasi D <manasi.d.navare@intel.com>
Date:   Mon Jan 23 18:48:53 2017 -0800

    tools: Add intel_dp_compliance for DisplayPort 1.2 compliance automation
    
    This is the userspace component of the Displayport Compliance
    testing software required for compliance testing of the I915
    Display Port driver. This must be running in order to successfully
    complete Display Port compliance testing. This app and the kernel
    code that accompanies it has been written to satify the requirements
    of the Displayport Link CTS 1.2 rev1.1 specification from VESA.
    Note that this application does not support eDP compliance testing.
    This utility has an automation support for the Link training tests
    (4.3.1.1. - 4.3.2.3), EDID tests (4.2.2.3
    - 4.2.2.6) and Video Pattern generation tests (4.3.3.1) from CTS
    specification 1.2 Rev 1.1.
    
    This tool has the support for responding to the hotplug uevents
    sent by compliance testting unit after each test.
    
    The Linux DUT running this utility must be in text (console) mode
    and cannot have any other display manager running. Since this uses
    sysfs nodes for kernel interaction, this utility should be run as
    Root. Once this user application is up and running, waiting for
    test requests, the test appliance software on the windows host
    can now be used to execute the compliance tests.
    
    This app is based on some prior work done in April 2015 (by
    Todd Previte <tprevite@gmail.com>)
    
    v2:
    * Add mode unset on hotplug uevent on disconnect (Manasi Navare)
    
    v3:
    Made capitalization consistent
    Reduced line lengths
    Added return value checks
    Changed how GLib is linked
    Fixed build warnings
    
    v4:
    * Conditionally build this tool if UDEV is present (Petri Latvala)
    * igt_warn and info cleanup to remove \r
    * Add intel_dp_compliance to tools/.gitignore
    * Change the year in copyright statements to current (Petri Latvala)
    
    Cc: Petri Latvala <petri.latvala@intel.com>
    Cc: Marius Vlad <marius.c.vlad@intel.com>
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Manasi Navare <manasi.d.navare@intel.com>
    Signed-off-by: Dhinakaran Pandiyan <dhinakaran.pandiyan@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit fa45f588b78cc19896859abd1cffc23847370769
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 18 09:53:41 2017 +0000

    intel-ci: Add reloading module without any display
    
    A quick test to exercise one module paramter that should disable a chunk
    of code usually run at startup and shutdown.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>

commit da0b6abeb74acb0309d9906774cd928c59a992e9
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Jan 23 16:37:01 2017 +0100

    kms_cursor_legacy: Allow for an extra vblank wait in atomic-transitions tests
    
    This is required for ILK style watermark programming, which currently
    inserts an extra vblank wait. This allows the tests to pass on those
    platforms.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 9fbf72b7d5c6d1093b197abf706a3c5d57a1efc1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jan 22 18:24:37 2017 +0000

    igt/gem_exec_nop: Watch interprocess switching
    
    Like a lightweight unchecking gem_exec_whisper, but the simplicity helps
    looking for driver overhead and stressing the ordering.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1689580e85210d8eef23937062911bba6a344997
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jan 21 15:46:21 2017 +0000

    igt/gem_ringfill: Restore secure dispatch for ctg/ilk
    
    Cantiga, Ironlake had early ppgtt hw and so marked MI_STORE_DATA_IMM as
    a privileged command, even when ppgtt is not enabled.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 610ec44183cd17104d45ed51cf190bed03e4a8b1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jan 21 15:23:21 2017 +0000

    Revert "lib/igt_kms: Add missing function declaration"
    
    This reverts commit ac1d818ba12f9893a7aa481a7c050e7833dbed34.
    
    Just one declaration of kms_pipe_to_index(). It was not missing after
    all.

commit 779216e414857e6370b407f01124a02f16a8ebcf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jan 21 10:27:11 2017 +0000

    igt/gem_busy: Start converting over to igt_spin_batch
    
    Easy one first.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 817d57f7dc3c6e4d168ce60330d422673e145a24
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 20 17:17:42 2017 +0000

    igt/gem_exec_nop: Watch inter-ring synchronisation overhead
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3b453f758b5c17064f8524ef45faab538bfef8f9
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jan 10 13:33:41 2017 -0500

    lib/igt_kms: Fixed typo
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 900f1d4de71bb65443a5251f9e95a14633c6edcb
Author: Robert Foss <robert.foss@collabora.com>
Date:   Mon Jan 16 10:53:58 2017 -0500

    lib/igt_kms: Set free'd pointer to NULL
    
    Avoid double free's by setting the free'd pointer to NULL after
    free.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit b1f931b0c3be12d52d9b15627eb1b2fb2efdd467
Author: Robert Foss <robert.foss@collabora.com>
Date:   Fri Jan 6 09:28:50 2017 +0000

    lib/igt_debugfs: Prevent buffer overflow
    
    buf array may overflow with when writing '\0' if
    MAX_LINE_LEN bytes are read during read().
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit ac1d818ba12f9893a7aa481a7c050e7833dbed34
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Jan 18 11:35:08 2017 -0500

    lib/igt_kms: Add missing function declaration
    
    Add missing declaration for kmstest_pipe_to_index to header.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 725edb3b432c208230f1f4055b81f69da9a61ca1
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Jan 18 10:15:24 2017 -0500

    lib/igt_kms: Check memory allocations for failures
    
    Add missing descriptive igt_assert_t calls to calloc'd memory.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 8d14370a3954a2691398f40e3a20aa0adcc8cd14
Author: Mika Kahola <mika.kahola@intel.com>
Date:   Mon Jan 16 13:53:40 2017 +0200

    tests/kms_plane_multiple: Cleanup in favor of library functions
    
    Cleaunup by replacing get_vblank() function with library function
    kmstest_get_vblank().
    
    Cc: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    
    Reviewed-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Signed-off-by: Mika Kahola <mika.kahola@intel.com>

commit 834bea0d808402c3e143a44942c4206e7f9f0bb7
Author: Mika Kahola <mika.kahola@intel.com>
Date:   Mon Jan 16 14:39:19 2017 +0200

    tests/kms_plane_multiple: Relax atomic commit time requirement
    
    Relax required time to atomic commits from 1 vblank to 2 vblanks.
    
    v2: Increase MAX_CRCS to 2 (Maarten)
    
    Reference: Issues seen on BYT CI tests
    
    Cc: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    
    Signed-off-by: Mika Kahola <mika.kahola@intel.com>

commit 792c64f6b00696285f39f8c409d29506cde703cb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 19 11:06:31 2017 +0000

    igt/gem_ringfill: Restrict BIT(22) to gen2/3 as it changed meaning on gen4+
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b123d58597325bda8d0a3e5613a2aac60cddaaa4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 19 09:22:30 2017 +0000

    lib/dummyload: Prefer WC mmaps
    
    WC mmaps have fewer coherency issues than GTT mmaps, important for timely
    closure.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 25d73dd7ab73dadcc618a7c3d81c150a57a10ba6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 18 20:48:55 2017 +0000

    igt/gem_ringfill: Drop SECURE dispatch for gen2/3
    
    It's not required, and fails completely without the master fd (i.e. on
    the new newfd tests).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 74d0912396af0bfab1d2c90f609abc42c3e8990b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 18 09:53:41 2017 +0000

    intel-ci: Do module reload last
    
    We want to run the initial set of tests under "pristine startup"
    conditions - so that our tests see the hardware as close to the
    condition we normally would after booting. This means that we want to
    avoid reloading the module until the very last set of tests.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>

commit 10cc01e1eea8f9bd64eeba083869b79d6dab1170
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 18 18:14:35 2017 +0000

    igt/gem_ringfill: Fill multiple execlist rings
    
    On execlists, there is a ring per engine per context. So create a few
    contexts (fd) and spam them.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5b8a1ba36e9a99fd2674e9bfa1bb7f6f039c2c7c
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Jan 18 10:41:37 2017 +0100

    kms_cursor_legacy: Use cursor movement instead of hiding for 2x tests
    
    This forces the cursor fastpath to be used. While at it, add -atomic
    versions of the test to compare legacy pageflip vs atomic.
    
    The nonblocking modeset test is changed slightly, due to cdclk changes
    the page flip may be stalled so it's not useful to test it. Just test
    that a queued page flip + nonblocking modeset works as intended and
    there is no kernel spew.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 7a2a3b1c26a6f6011185dbc04ca95f8f6eb3e93d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 18 09:49:22 2017 +0000

    igt/drv_module_reload: Exercise disable_display parameter
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 396601872ae2e8a8ee9c98569b04ea2078f0adb5
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Jan 17 17:07:52 2017 +0100

    kms_cursor_legacy: Make the 2x tests slightly more useful.
    
    Trying to run as many cursor updates during a nonblocking modeset won't
    work, because both crtc's might be involved in the modeset. Instead
    try to run as many cursor updates on both crtc's at the same time,
    while trying to queue page flips in between.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit a36e627b767c52d25b442f3c7327475132fd888b
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Jan 16 13:35:39 2017 +0100

    kms_cursor_legacy: fallback to xrgb if argb for sprite plane is unavailable
    
    This fixes the test on older platforms that don't have ARGB support.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit c79e6d828f539af5139050e1c361b2675a2ad12c
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Jan 16 11:35:43 2017 +0100

    kms_plane: Use for_each_valid_output_on_pipe.
    
    This is better because some outputs may not be used on all pipes. This
    correctly causes some tests to skip on CHV/VLV when there is no output
    for a given pipe.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit c401f46516e8d5ed8db775e74d993b91935998b0
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Jan 16 11:32:49 2017 +0100

    kms_pipe_b_c_ivb: Use for_each_pipe_with_valid_output.
    
    This will cause multiple calls to igt_output_set_pipe, but that's
    harmless. This function should be used since not all outputs may be
    used on pipe B and C.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit c460b41dc1c76092e09a5381797d626f3dd8bd44
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jan 15 21:13:43 2017 +0000

    igt/gem_exec_latency: Measure after forced queuing
    
    Force the first write to be queued and so exercise a different exec
    path.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 12e34d8c909a6bd203722a92a019693fec779db6
Author: Mika Kahola <mika.kahola@intel.com>
Date:   Wed Nov 23 11:19:37 2016 +0200

    tests/kms_plane_lowres: Plane visibility after atomic modesets
    
    Testcase for plane visibility after atomic modesets. The idea of the test
    is the following:
    
     - draw a blue screen with high resolution
     - enable a yellow plane, visible, in lower-left corner
     - set a new lower resolution mode (1024x768) that makes plane invisible
     - check from debugfs 'i915_display_info' that the plane is invisible
     - switch back to higher resolution mode
     - check from debugfs 'i915_display_info' that the plane is visible again
     - repeat number of iterations, default 64
    
    v2: allow test to be run on non-Intel drivers (Daniel)
        moved test for plane visibility to as helper function (Daniel)
        moved get_vblank() function to be part of helper functions (Daniel)
        rename 'tiling' parameter as 'modifier' (Daniel)
        select a mode from a list so that the plane should be invisible.
        use default 1024x768 mode only as a fallback if decent mode has not
        been found (Daniel)
        add tiling MODE_NONE (Daniel)
    
    v3: draw as many overlay planes as the platform supports + cursor plane
        on top of each other on lower-left corner
        skip the test if i915_display_info file is not available
        test plane visibility with igt_assert_plane_visibility() function
        drop option for multiple test iterations (Daniel Vetter)
    
    v4: switch 'for_each_connected_output()' to
        'for_each_valid_output_on_pipe()'
        skip Y and Yf tiling for generations older than 9 (Maarten)
    
    Cc: Daniel Stone <daniel@fooishbar.org>
    Cc: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    
    Reviewed-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Signed-off-by: Mika Kahola <mika.kahola@intel.com>

commit ef8cff635c8cee75a623753237c5e774a7b0b95f
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jan 12 16:08:30 2017 +0100

    kms_universal_plane: Skip tests if there are no valid outputs for the pipe
    
    The tests shouldn't pass if nothing has been tested.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit dea85f65b58e5045315503a39162e118383ceaba
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jan 12 13:51:14 2017 +0100

    kms_plane_multiple: Use for_each_valid_output_on_pipe
    
    Not all outputs are valid on all pipes.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit c7195c44fea2648011aabdcd15afb7236995c4c1
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Jan 11 10:07:38 2017 +0100

    tests: Add test for tv load detection
    
    The test is that kernel load detection works as intended,
    and doesn't cause any vblank spam.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Tested-by: Lyude <cpaul@redhat.com>

commit 04cd372ff4df23c70908b2783fa9feaa4eeefb3c
Author: Mika Kahola <mika.kahola@intel.com>
Date:   Thu Jan 12 12:52:49 2017 +0200

    tests/kms_plane_multiple: Change number of iterations
    
    In CI system, the default 64 iterations of this test may cause CRC overflow
    warnings in dmesg when debugfs is enabled in kernel config. To keep dmesg
    warning noise in minimum, let's run this test only once by default.
    
    Reviewed-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Signed-off-by: Mika Kahola <mika.kahola@intel.com>

commit ba237f97c9632234b4f161c1bbca8a26477b06eb
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Jan 10 10:50:50 2017 +0100

    lib/igt_kms: Remove output->valid again
    
    This time add an explicit variable force_reprobe, which is set to true
    on initial probe and might be set again (in a future patch) after a
    hpd event.
    
    Acked-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit e2eefcc88f148d84082e79f13284e9dddbad9174
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jan 7 14:51:35 2017 +0000

    Revert "lib/igt_kms: Remove output->valid"
    
    This reverts commit 20258f2353a266f8fe19e7392eb282e58dd87f6a.
    
    This completely breaks igt running on bare hardware where it is required
    that igt probes the connectors before use.
    
    Cc: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 9c4114ec5d8700815eb1f400b99add4f26070568
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Dec 21 16:37:46 2016 +0000

    lib: Always unbind the fbcon around igt
    
    The fbcon imposes unpredictable latencies on tests - each drmIoctl has
    been observed to trigger two 650us calls to console_unlock() as it
    flushes printk buffer for the DRM_DEBUG around the ioctl. This makes
    tests such as gem_wait fail as they expect the ioctl to be spent on the
    operation under test not clogged up by the console.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=99130
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d6353c5761b8a28fee7f83740d052287d6634068
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Thu Jan 5 11:03:46 2017 -0200

    kms_frontbuffer_tracking: fix sink CRC detection regression
    
    Don't forget to mark the CRC as not supported if there are no eDP
    panels.
    
    Regression introduced by:
    
        commit 8aa7ea4f84b0e1384b78f4cc9b136ea5b641055a
        Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
            kms_frontbuffer_tracking: refactor sink CRC reliability handling
    
    v2 (from Paulo):
     - Convert Petri's email patch to an actual git patch
     - Add an extra assertion, just in case
     - Add Petri's s-o-b tag (authorized via IRC)
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit aeb4e1341b778e75ef0511087a9c4ad7ab1ff114
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jan 5 15:53:01 2017 +0100

    kms_pipe_color: Use for_each_valid_output_on_pipe.
    
    And skip when no valid output is found.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 4e9524d2b8edee8e15ceb93ec14190232d66fce3
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jan 5 15:23:06 2017 +0100

    kms_ccs: Fix testcase.
    
    Use for_each_pipe_with_valid_output, and iterate correctly over all
    crtc's.
    
    pipe-*-crc-* didn't show up in the test list either because display is
    not initialized, fix that one too.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 20258f2353a266f8fe19e7392eb282e58dd87f6a
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jan 5 14:20:40 2017 +0100

    lib/igt_kms: Remove output->valid
    
    None of the tests depend on it any longer, so it's time to kill. :)
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit eeffa25c0c464dddf49891c3bf8049c9e4ba5555
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jan 5 14:13:34 2017 +0100

    kms_rotation_crc: Stop looking at output->valid
    
    Use the proper iterator macros to prevent ever having an invalid config.
    
    For the record, this test seemed to have bitrotten and doesn't currently
    pass. This might have happened when fixing atomic commit support,
    but it definitely needs some love.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit bf511f3f7ebfec1cd19e94c6f463d96f420432b4
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jan 5 14:13:34 2017 +0100

    kms_pipe_crc_basic: Stop looking at output->valid
    
    Use the proper iterator macros to prevent ever having an invalid config.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit cc65dbc902daf6b5667aa1924584a91653f47d13
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jan 5 14:13:34 2017 +0100

    kms_mmio_vs_cs_flip: Stop looking at output->valid
    
    Use the proper iterator macros to prevent ever having an invalid config.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 63d6e48ced2ae31cb1a6bcd3ecac47bb0eeb0792
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jan 5 14:13:34 2017 +0100

    kms_mmap_write_crc: Stop looking at output->valid
    
    Use the proper iterator macros to prevent ever having an invalid config.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 9d22af79367ff0464ce55c8e73574103475977f4
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jan 5 14:13:34 2017 +0100

    kms_flip_event_leak: Stop looking at output->valid
    
    Use the proper iterator macros to prevent ever having an invalid config.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit f792e193d9f527b3c7dd86a2eb9eb24bd9d1756a
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jan 5 14:13:34 2017 +0100

    kms_fence_pin_leak: Stop looking at output->valid
    
    Use the proper iterator macros to prevent ever having an invalid config.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 57a903300987cdb1318a3f4085d7f6eb1dce1c44
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jan 5 14:13:34 2017 +0100

    kms_fbc_crc: Stop looking at output->valid
    
    Use the proper iterator macros to prevent ever having an invalid config.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit a546b67ea8019c9acdf78b63ed3b241456ae2979
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jan 5 14:13:34 2017 +0100

    kms_cursor_crc: Stop looking at output->valid
    
    Use the proper iterator macros to prevent ever having an invalid config.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 9688fdb47e0206792553225be2ac8ae63fe6a854
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jan 5 14:10:49 2017 +0100

    kms_chv_cursor_fail:  Stop looking at output->valid.
    
    Use the proper iterator macros to prevent ever having an invalid config.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 5bef56d52b0e226a54318960044a4dd877e3b6aa
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jan 5 14:07:39 2017 +0100

    kms_pwrite_crc: Stop looking at output->valid.
    
    Use the proper iterator macros to prevent ever having an invalid config.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit eb66123f9bf71f3562323f021929dd909e1d4611
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jan 5 14:04:31 2017 +0100

    prime_mmap_kms: Stop looking at output->valid.
    
    Use the proper iterator macros to prevent ever having an invalid config.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 9c45933358a919ecfd1cac4e70e527de9aac51b1
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jan 5 14:02:46 2017 +0100

    kms_vblank: Stop looking at output->valid.
    
    Use the proper iterator macros to prevent ever having an invalid config.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 74724476981c7258aa9b3cb96298bcf8a50c854a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 5 11:43:15 2017 +0000

    tests: Add gem_exec_reuse
    
    Exploratory test into behaviour when reusing bo between batches.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 23df765a19c2e34d79b08ee17bff9e89e68f566c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 4 23:25:13 2017 +0000

    igt/gem_mmap_gtt: Tiled access to the incomplete last row is undefined
    
    Trying to read/write into the last tiled row is invalid since we do not
    allocate sufficient pages for the writes to map to (hence they get
    lost).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 807b1605b693c81421a79a7d29bdde27f6423f00
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 4 18:32:25 2017 +0000

    igt/gem_mmap_gtt: Check read/writes across a GPU reset
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=99274
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2804afc606f8bec2b4552e0776e44cea25abb31d
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Dec 22 18:42:08 2016 -0200

    kms_frontbuffer_tracking: fix compression checking
    
    Ever since Kernel's "drm/i915: don't report compression when fbc is
    disabled" we've been wrongly assuming that the Kernel doesn't support
    compression information due to the fact that it doesn't print that
    specific line when FBC is not active. Fix this by just assuming that
    the Kernel supports it, allowing us to kill some more code.
    
    With this change, running a brand new kms_frontbuffer_tracking on
    super old Kernels will result in failures, but I suppose that's fine
    for IGT.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 37be8f6d44eea71f9947a1e4d41d8ba1e66b7cfe
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Dec 22 18:42:07 2016 -0200

    kms_frontbuffer_tracking: destroy all FBs from all formats
    
    Don't just destroy the ones from the default format.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 8aa7ea4f84b0e1384b78f4cc9b136ea5b641055a
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Dec 22 18:42:06 2016 -0200

    kms_frontbuffer_tracking: refactor sink CRC reliability handling
    
    What I'm currently seeing is that sometimes the first check during
    setup_sink_crc() returns valid sink CRC, but then the subsequent
    checks return ETIMEDOUT. In these cases, we keep getting flooded by
    messages saying that our sink CRC is unreliable and that the results
    differ. This is annoying for the FBC tests where sink CRC is not
    mandatory.
    
    Since this case shows it's useless to try to check for sink CRC
    reliability before the actual tests, refactor the code in a way that
    if at any point we detect that sink CRC is unreliable we'll mark it as
    such and stop flooding the logs. For the tests where it's mandatory
    we'll still keep the same SKIP behavior.
    
    This refactor also allows us to just call get_sink_crc() in the
    setup_sink_crc() function instead of having to reimplement the same
    logic.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit b97f5241139a29457d8fabd429b751e6a3247181
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Dec 22 18:42:05 2016 -0200

    kms_frontbuffer_tracking: move more code to get_sink_crc()
    
    Make it check for the supported flag and decide what to do. This
    change will make the next patches much easier, and it's probably
    better to move more sink CRC logic to the sink CRC function.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 90aed5f22e55a8f8652f2316900b19bf4f1bab77
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Dec 22 18:42:04 2016 -0200

    kms_frontbuffer_tracking: fix sink CRC assertion
    
    If we already detected an error, don't try to assert the size of what
    we didn't read.
    
    In machines where the sink CRC is unreliable, this was failing tests
    where the sink CRC is not mandatory (FBC tests). With this change we
    won't fail anymore, we'll just print error messages saying that the
    sink CRC is unreliable.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit f42b26881fa013230a165495adfd3030d5c14cc1
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Dec 22 18:42:03 2016 -0200

    tests/kms_draw_crc: remove unnecessary mode unset calls
    
    I couldn't think of a reason why we would need to unset the CRTCs
    before doing the modesets on this test, so remove all the mode unset
    calls.
    
    Before:
    $ time -p sudo ./kms_draw_crc
    real 44.74
    $ time -p for i in $(sudo ./kms_draw_crc --list-subtests); do sudo
    ./kms_draw_crc --run-subtest $i; done
    real 121.61
    
    After:
    $ time -p sudo ./kms_draw_crc
    real 7.40
    $ time -p for i in $(sudo ./kms_draw_crc --list-subtests); do sudo
    ./kms_draw_crc --run-subtest $i; done
    real 14.32
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit fe0ab43df2cd2585a71321cfccf40c364d92cfee
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 4 17:26:09 2017 +0000

    configure: Include ax_gcc_func_attribute.m4
    
    From the GNU archives:
      http://www.gnu.org/software/autoconf-archive/ax_gcc_func_attribute.html
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d900dd85c91726f5e2ce9a2263338e9cdf687e56
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Tue Dec 6 16:06:50 2016 +0100

    tests/kms_ccs: Add test for render compression
    
    Add a few subtests that check that lossless compressed render targets
    are properly displayed. Also test a few error conditions.
    
    Cc: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Cc: Ben Widawsky <ben@bwidawsk.net>
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Acked-by: Ben Widawsky <ben@bwidawsk.net>

commit a3f0d75d19aa252d3896af4763d6a9a5172f8814
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jan 3 14:57:25 2017 +0000

    igt/gem_exec_fence: Check sync_file->status after the fence is signaled
    
    After the fence is signaled, the status feed reports whether or not the
    request completed successfully. We set this to -EIO if a hang was
    detected.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 31811f4b6c5a95de82e47ddf1f37739c3b2cfc58
Author: Lyude <lyude@redhat.com>
Date:   Wed Dec 21 14:00:54 2016 -0500

    igt_core: add igt_constructor
    
    This is a simple macro for executing a block of code at the beginning of
    intel-gpu-tools, before any tests have been ran. Useful for
    initialization of global resources used in IGT libraries.
    
    Signed-off-by: Lyude <lyude@redhat.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    
    Changes since v1:
     - Add the line number into the name of the constructor function so that
       multiple constructors may be used per-file.

commit c7c581a6843644343c15e964eddacab4a6c77769
Author: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
Date:   Tue Dec 20 13:51:01 2016 +0200

    lib/intel_chipset: Add geminilake platform definition
    
    Signed-off-by: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 770fd185eb7c878d7d1e16af4aa4f456a264d148
Author: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
Date:   Tue Dec 20 13:45:25 2016 +0200

    lib/i915_pciids.h: Update to latest version wich includes GLK ids
    
    Copy the include/drm/i915_pciids.h file from following kernel commit,
    which includes Geminilake PCI IDs.
    
    commit 8363e3c3947d0e22955f94a6a87e4f17ce5087b4
    Author: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
    Date:   Thu Nov 10 17:23:08 2016 +0200
    
        drm/i915/glk: Add Geminilake PCI IDs
    
    Signed-off-by: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit e5e8b7cecc5a03f4db5ec4a63e9bea28fd125e9b
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Jan 3 11:31:04 2017 +0100

    kms_cursor_legacy: Eliminate cursor update variations.
    
    Nail the cursor update thread to a single cpu, and run a idle busy loop
    on the same cpu. This will force it to the highest cpu speed, which will
    eliminate cpu speed variations and allows the test to pass.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 5a9d0a366010513b1827bc0f141facaa7c5e3cb9
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Fri Dec 23 10:12:17 2016 +0200

    README: add libkmod-dev and libprocps-dev to dependencies
    
    The list is perpetually out of date, but giving an idea of what the
    dependencies are is helpful.
    
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 8f39310fa7484829f0899860b1677a0f75898edf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jan 2 11:23:33 2017 +0000

    lib: Wrap conversion from u64 to pointers
    
    The opposite direction of to_user_pointer() is from_user_pointer().
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 39858a1e752f8f26250171e8658388f0853c176c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jan 2 11:05:21 2017 +0000

    lib: Mass conversion to to_user_pointer()
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4de67b26788c60c19254c3e69e151ee200453895
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jan 2 11:05:21 2017 +0000

    igt: Mass conversion to to_user_pointer()
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0517d877b65bade23332cba0828acae7ae5fccb9
Author: Robert Foss <robert.foss@collabora.com>
Date:   Mon Jan 2 05:25:55 2017 -0500

    lib/ioctl_wrappers.h: Fix to_user_pointer() helper
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 091a452489ac184bbc4d0d23ce6a255abc0f4631
Author: Robert Foss <robert.foss@collabora.com>
Date:   Mon Jan 2 05:07:10 2017 -0500

    lib/ioctl_wrappers.h: Add to_user_pointer() helper
    
    Add to_user_pointer() helper function which helps cast
    pointers properly when being used with ioctls.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit dbee0832c586596d60ae1dc3eef92e3638af94d3
Author: Robert Foss <robert.foss@collabora.com>
Date:   Mon Dec 19 05:19:10 2016 -0500

    tests/perf: Fix pointer length compilation errors on 32-bit systems
    
    Fix pointer length compilations errors on 32-bit systems.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cdee645274804fac643df58da59cfc93460b7910
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 30 21:39:40 2016 +0000

    igt/kms_addfb_basic: Try changing tiling on the framebuffer [addfb2]
    
    If we request the object to be tiled with the same tiling as it
    currently has, the kernel may spot the no-op and report success.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 550e8accb2358a98f066c9b2460d8137bc130ba1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 30 21:39:40 2016 +0000

    igt/kms_addfb_basic: Try changing tiling on the framebuffer
    
    If we request the object to be tiled with the same tiling as it
    currently has, the kernel may spot the no-op and report success.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 23ae7f2134da3a4666f721c09920121e7f64a3d5
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Dec 28 15:57:26 2016 +0100

    intel-ci: Remove non-existing test from the list.
    
    This test was removed in
    
    commit 7baf4eef259742c9e76bd43d3e1a3849a208abbc
    Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Date:   Wed Dec 21 18:26:54 2016 +0100
    
        kms_cursor_legacy: Make tests less strict.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 6eb02cf7099134dc8d97bf309a0f7605049c2d52
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Dec 27 13:59:31 2016 +0100

    kms_cursor_legacy: Remove extra /2.
    
    Kept in the previous commit by accident.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit ad71861b0d19df544f236c99db0162559cdc59c8
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Dec 27 13:50:31 2016 +0100

    kms_cursor_legacy: Run cursor updates only for a quarter of the time.
    
    Because in the ideal case we currently wait 50% of the time for every frame,
    on some machines cpu scaling gets in the way when we idle a lot and will
    cause the machine to throttle to a lower cpu speed. This causes a
    failure because we may end up missing vblanks.
    
    Work around this by only running for 1/4th of the time at max speed,
    even on low cpu speeds it will be less likely to run into issues then.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 502483a39c70d2d3eb5c181133ba1048bbcc8baf
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Dec 21 14:11:36 2016 +0200

    tools/intel_display_poller: Add gen9+ support
    
    All the registers we care about should be the same for all
    bdw+ platforms, so let's just use the bdw path for gen9+.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 53996d5effdb478a3796460db181d9a31e1c60f1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 23 09:52:37 2016 +0000

    stubs/intel_bufmgr: Suppress GCC compilation warnings
    
    GCC likes to complain that every function here dies in an assert and
    doesn't return, which is very true but not one we wish to optimise for.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a3556f495f36e92381f35327cca41d426cfae5a6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Dec 21 16:37:07 2016 +0000

    lib: Kick all fbcon
    
    i915 may not be the only, nor the first, vtcon framebuffer device - we
    need to check them all!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e6d52317724eaa7314f7d8e53b313f5a5676ecdf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 22 18:05:16 2016 +0000

    lib/selftest: Query module parameter for error code.
    
    "Live" selftesting of i915.ko happens during device probing which eats
    the error code and does not propagate it back to module loading.
    Workaround this by writing the error code back to the module parameter
    and probing it after a "successful" install.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit bc000862e8c6f05a2d960a5a300e1e1d6c8c7026
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Dec 22 10:54:37 2016 +0100

    kms_cursor_legacy: Reduce runtime of cursor-vs-flip.
    
    This was running for 150 seconds before, reduce it to 25.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 7baf4eef259742c9e76bd43d3e1a3849a208abbc
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Dec 21 18:26:54 2016 +0100

    kms_cursor_legacy: Make tests less strict.
    
    Some tests may wait a vblank on master. Instead of
    failing the tests, allow them to succeed if 1 vblank
    passed.
    
    Also no longer warn if a page flip is missed, change it to
    info instead. As long as no more than 25% of the vblanks are
    missed the tests will pass.
    
    Also fix nonblocking modeset vs cursor, which needs an array
    of cursor argument. This was a nice buffer overrun before.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 5eae2f9495059de6ffa906998dec153ab2725d63
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Dec 13 18:56:13 2016 +0200

    tools/intel_display_poller: Allow the tool to be used without i915 loaded
    
    We don't need the drm fd to find out the PCI device ID. So let's drop
    the drm stuff, which allows the tool to work without i915 loaded.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit fec5cbad4a77d680da5ebb7b0dfd49b737dcc47f
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Dec 13 18:48:21 2016 +0200

    lib/debugfs: Check if debufs is already mounted before attempting to mount it
    
    mount("/sys/kernel/debug") will return an error if something is already
    mounted there. So let's check for that before calling mount(). This
    allows many of the tools (eg. intel_reg) to work even when no drm
    drivers are loaded since the earlier "/sys/kernel/debug/dri" & co.
    path checks will fail in that case and we will fall back to attempting
    to mount debugfs ourselves.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 107283ee6f26fdcc847e77a250e4cc29f24333ad
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Dec 13 19:05:02 2016 +0200

    tools/intel_reg: Dump some interesting CCK regs on VLV/CHV
    
    CCK houses various important clock related registers. Let's
    dump those as well.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit d07a3c8c7a5758b9590e10eff25d3fb7c26f41a7
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Dec 13 17:40:03 2016 +0200

    tools/intel_bios_reader: Dump the DSI video transfer mode and pixel overlap
    
    Knowing how were trasmitting the data is pretty important, so let's
    dump out the video transfer mode and pixel overlap for DSI.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 38bffd9c698aaa7f48212bf4b9e2dd9da90496f3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Dec 17 14:49:23 2016 +0000

    lib/sw_sync: Use timeline/fence instead of generic fd
    
    whilst we may be passing around file descriptions, using fence or
    timeline as appropriate is more descriptive.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 03bc7397194c171287252fce92d5c43611347a69
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Dec 17 12:42:19 2016 +0000

    lib/sw_sync: Rename sync_fence_create()
    
    It takes a sw_sync_timeline and returns a fence (it is a factory), so
    call it sw_sync_timeline_create_fence() for better self-documentation.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 70f0700e60d66f8b25e33c8f5efe57cb3d4eb534
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Dec 17 12:36:21 2016 +0000

    lib/sw_sync: Indicate that sync_merge() operates and create a sync_fence
    
    Improvements to self-documentating API that matches the rest of sw_sync.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 20fffe7e4209220c63ec45e9b459224833831989
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Dec 17 12:27:14 2016 +0000

    lib/sw_sync: Bring sync_wait() API into line
    
    igt likes to return kernel-esque negative errno where we can, and
    indicate that we expect to operate on a sync_fence, otherwise it is
    merely a grandiose poll().
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 471ce7663d57ba7d2135ad9eb9e68f571c698626
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Dec 17 11:56:13 2016 +0000

    tests/perf: Remove duplicate NSEC_PER_SEC define
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 63a2f5db634c220cefb1c0d1a8ed459b6adecd25
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Dec 17 11:54:16 2016 +0000

    lib/sw_sync: Provide compatiblity stubs for old headers
    
    Common practice for igt when providing tests for new features in
    unreleased kernels is to include a complete set of uABI stubs. Lack of
    such compatability breaks compilation on current distributions' kernel
    headers.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 68c59ce95443e8b1bd477a1baed0f08e89a645f9
Author: Lyude <lyude@redhat.com>
Date:   Sat Dec 17 05:50:13 2016 -0500

    igt_kms: Use const parameters for igt_assert_crc_equal
    
    Since we're not modifying these anywhere, let's make them const so as to
    not break code doing comparisons against compile-time CRCs.
    
    Signed-off-by: Lyude <lyude@redhat.com>
    Tested-by: Robert Foss <robert.foss@collabora.com>

commit 1ee803a790090c306765fe1b598b9d8d0a91e2b3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Dec 17 11:10:35 2016 +0000

    lib/igt_kmod: kmod already supplies a cooked error code
    
    kmod already does the err = -errno for us.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 270d782c39655ad9fdb72b5324f48f275ffef386
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 16 19:36:10 2016 +0000

    igt/drv_selftest: Rename late to live selftests
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit bb7ea5b5c07eb1b89338fb324618fe50fb94667e
Author: Robert Bragg <robert@sixbynine.org>
Date:   Tue Feb 9 19:15:45 2016 +0000

    igt/perf: add i915 perf stream tests for Haswell
    
    This bumps the libdrm_intel version required to 2.4.74 for the
    drm_intel_context_get_id api used in these tests.
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 3acbd1da17e4e9f6679b5c0294ac52754241ab10
Author: Robert Bragg <robert@sixbynine.org>
Date:   Tue Nov 22 12:49:32 2016 +0000

    stubs/drm: Add drm_intel_gem_context_get_id stub
    
    The plan is to use this api in i915-perf tests so this adds the
    corresponding stub in case libdrm was built with libdrm_intel disabled.
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 69a90fbc2c844819f1f0b30ca7b3e8a74c5b4b47
Author: Robert Bragg <robert@sixbynine.org>
Date:   Tue Nov 22 16:40:23 2016 +0000

    igt/gem_exec_parse: generalise test_lri + debug info
    
    This further generalises the description passed to test_lri so we only
    need one loop over the entries with test_lri deducing the exected errno
    and value based on whether the register is marked as whitelisted and
    depending on the current command parser version.
    
    Each tested register LRI now gets its own subtest like:
    igt_subtest_f("test-lri-%s", reg_name)
    
    The test_lri helper now also double checks that the initial
    intel_register_write() takes before issuing the LRI.
    
    In case of a failure the test_lri helper now uses igt_debug to log the
    register name, address and value being tested.
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a56a1f6e30ca49a50d4e8c896608ba605ee1f2fd
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Thu Sep 8 09:31:09 2016 +0200

    lib/debugfs: Support new generic ABI for CRC capture
    
    The kernel has now a new debugfs ABI that can also allow capturing frame
    CRCs for drivers other than i915.
    
    Add alternative codepaths so the new ABI is used if the kernel is recent
    enough, and fall back to the legacy ABI if not.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Reviewed-by: Robert Foss <robert.foss@collabora.com>

commit 40769d7925d9b28cc7e71564e2378aebf20efbf8
Author: Daniel Stone <daniels@collabora.com>
Date:   Wed Dec 14 04:21:20 2016 -0500

    igt/kms_atomic: Match CRTC harder for special planes
    
    Our heuristic for finding planes was previously matching the type, and
    ensuring that the plane was valid for that CRTC. However, VC4 now has
    primary/cursor planes which can wander multiple CRTCs, so we could pick
    a PRIMARY plane which was not the kernel's idea of crtc->primary,
    causing plane_primary_legacy to fail; ditto for cursor.
    
    Make find_plane try harder, by preferring to return planes which are
    already on the requested CRTC.
    
    Signed-off-by: Daniel Stone <daniels@collabora.com>
    Reported-by: Robert Foss <robert.foss@collabora.com>
    Signed-off-by: Robert Foss <robert.foss@collabora.com>

commit f83ec418c40a428a96019f250f680d69e66588f9
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Dec 7 15:07:54 2016 -0500

    tests/sw_sync: Add subtest test_sync_busy_unixsocket
    
    Add subtest test_sync_busy_fork which increments the timeline in a forked child
    process, where the timeline fd has been sent through a UNIX socket.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 51720a7c00c9621430135c695eb9d85668d1ace1
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Dec 7 15:07:53 2016 -0500

    tests/sw_sync: Add subtest test_sync_busy_fork
    
    Add subtest test_sync_busy_fork which increments the timeline in a forked child
    process.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 5a2c2f80947c94cfc4a829eaeb9175274a2a16ee
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Dec 7 15:07:52 2016 -0500

    tests/sw_sync: Add subtest test_sync_merge_invalid
    
    Add subtest test_sync_merge_invalid that tests merging invalid fences.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit a9c7f552e8717609e9bf26b781a54172837a2148
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Dec 7 15:07:51 2016 -0500

    tests/sw_sync: Add igt_require check for sw_sync feature
    
    Make sure that this test is skipped if the sw_sync feature is missing from
    the host system.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 2c16b0b5c88367fe398d4a973f1c8255ddc36b56
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Dec 7 15:07:50 2016 -0500

    lib/sw_sync: Add igt_require_sw_sync to enable skipping on no sw_sync support
    
    Add igt_require_sw_sync to provide tests to skip if sw_sync support isn't
    available on the host machine.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 6e836088bc52a288bd649ae7903d776a811e4884
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Dec 7 15:07:49 2016 -0500

    tests/sw_sync: Add subtest test_timeline_closed_signaled
    
    Add subtest test_timeline_closed_signaled that verifies that a signaled fence
    stays signaled after its timeline has been closed.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 5312aef7533783a15ac432e633edfdb9b55058f0
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Dec 7 15:07:48 2016 -0500

    tests/sw_sync: Add subtest test_timeline_closed
    
    This subtest verifies that the fences of a timeline are not signalled when
    a timelne is closed.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 99331e269d35f786ad7b305012afb242d9b44ead
Author: Rafael Antognolli <rafael.antognolli@intel.com>
Date:   Wed Dec 7 15:07:47 2016 -0500

    tests/sw_sync: Add subtest test_sync_expired_merge
    
    This test creates an already expired fence, then creates a merged fence
    out of that expired one (passed twice to the merge operation), and
    finally closes the merged fence. It shows that if the refcounts are
    wrong on the original expired fence, it might get freed while still in
    use. Usually a kernel panick will follow.
    
    Signed-off-by: Rafael Antognolli <rafael.antognolli@intel.com>
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit b0f07a34a8c543f680f6e94efd992a5a9ed55422
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Dec 7 15:07:46 2016 -0500

    tests/sw_sync: Add subtest test_sync_multi_producer_single_consumer
    
    This subtest runs a single consumer thread and multiple producer thread that
    are synchronized using multiple timelines.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Eric Engestrom <eric@engestrom.ch>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 1b499752dababa296900438c21b91c03f616a2da
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Dec 7 15:07:45 2016 -0500

    tests/sw_sync: Add subtest test_sync_multi_timeline_wait
    
    This subtest verifies that waiting, timing out on a wait and that counting
    fences in various states works.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Eric Engestrom <eric@engestrom.ch>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit be6f9d5472b3866fe67dc2c06f69361a9bf578d6
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Dec 7 15:07:44 2016 -0500

    tests/sw_sync: Add subtest test_sync_random_merge
    
    This subtest verifies that creating many timelines and merging random fences
    from each timeline with eachother results in merged fences that are fully
    functional.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Eric Engestrom <eric@engestrom.ch>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit a1d591cae0686cb830b4d30399998c567e8eb7f9
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Dec 7 15:07:43 2016 -0500

    tests/sw_sync: Add subtest test_sync_multi_consumer_producer
    
    This test verifies that stressing the kernel by creating multiple
    consumer/producer threads that wait on a single timeline to be incremented
    by another conumer/producer thread does not fail.
    And that the order amongst the threads is maintained.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Eric Engestrom <eric@engestrom.ch>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 28539a89edec0bf3e0d2a510b4c79465dcf0c2c0
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Dec 7 15:07:42 2016 -0500

    tests/sw_sync: Add subtest test_sync_multi_consumer
    
    This subtest verifies the access ordering of multiple consumer threads.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Eric Engestrom <eric@engestrom.ch>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 62cb831919ff3f98246f9312005898c86aa19bb2
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Dec 7 15:07:41 2016 -0500

    tests/sw_sync: Add subtest test_sync_merge_same
    
    This subtest verifies merging a fence with itself does not fail.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Eric Engestrom <eric@engestrom.ch>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit a79b90543c413dfc5a4cc0f573cb16220ee98a9b
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Dec 7 15:07:40 2016 -0500

    tests/sw_sync: Add subtest test_sync_merge
    
    Add subtest test_sync_merge that tests merging fences and the validity of the
    resulting merged fence.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Eric Engestrom <eric@engestrom.ch>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit add14edc8f7d511ccc48ccd693c963f751e24ede
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Dec 7 15:07:39 2016 -0500

    tests/sw_sync: Add subtest test_sync_busy
    
    This subtest verifies that waiting on fences works properly.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Eric Engestrom <eric@engestrom.ch>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 71c8169440669944f72f8f7be7fcacfed574e4b4
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Dec 7 15:07:38 2016 -0500

    tests/sw_sync: Add subtest test_alloc_merge_fence
    
    This subtest verifies that merging two fences works in the simples possible
    case.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Eric Engestrom <eric@engestrom.ch>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit cb5fa4725e3ed06c9723f50b81746651aea8dbaa
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Dec 7 15:07:37 2016 -0500

    tests/sw_sync: Add subtest test_alloc_fence_invalid_timeline
    
    This subtests tests that creating fences on negative timelines fail.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Eric Engestrom <eric@engestrom.ch>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit b7bb0556a71eeca04de9dba8cd8044c439187f39
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Dec 7 15:07:36 2016 -0500

    tests/sw_sync: Add subtest test_alloc_fence
    
    Add subtest alloc_fence that verifies that it's possible to allocate a fence
    on a timeline.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Eric Engestrom <eric@engestrom.ch>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit fb5ef0ebc32a935ef6a4d6d593754316bbf88889
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Dec 7 15:07:35 2016 -0500

    test/sw_sync: Add sw_sync test
    
    Add initial tests for sw_sync.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Signed-off-by: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
    Reviewed-by: Eric Engestrom <eric@engestrom.ch>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 95286bedc62efb1b8720f54198991a4e6b82e812
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Dec 7 15:07:34 2016 -0500

    lib/sw_sync: Add helper functions for managing synchronization primitives
    
    Base functions to help testing the Sync File Framework (explicit fencing
    mechanism ported from Android).
    These functions allow you to create, use and destroy timelines and fences.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Signed-off-by: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
    Reviewed-by: Eric Engestrom <eric@engestrom.ch>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 3ccce99281eaef560334300bb025b770b49ed9b1
Author: Lyude <lyude@redhat.com>
Date:   Mon Dec 12 13:25:39 2016 -0500

    igt_kms: Dynamically allocate igt_display->pipes
    
    Many GPUs have more then 3 pipes available, so hard limiting this to
    I915_MAX_PIPES prevents us from using anything that relies on
    igt_display_init() on non-intel systems (since we end up writing out of
    bounds and seg faulting). Fix this by dynamically allocating
    igt_display->pipes using the number of pipes we've detected on the GPU.
    
    Signed-off-by: Lyude <lyude@redhat.com>
    Reviewed-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>

commit 6e716b7f5768bb0218d2b5934472ed462560f13b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Dec 13 13:41:21 2016 +0000

    lib/kselftest: Apply the filter to the test name
    
    The filter needs to skip the embedded test number as well.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2e2a7d0852abcdacacfb3ba18c38a09f746b20fe
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Dec 13 12:27:47 2016 +0000

    lib/kselftest: Parse embedded test number from parameter
    
    Order the tests by an embedded test number from the parameter string.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cd0dc8b3b113a204d3cad4e483816e72dad127ed
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Dec 13 10:47:15 2016 +0000

    lib: Allow permutation of the first two elements in the aray
    
    Spotted-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 80baeb023223e7948ebfa22ebb4d3b706b4bc550
Author: Lyude <lyude@redhat.com>
Date:   Wed Dec 7 19:02:04 2016 -0500

    igt_kms: Remove support for drivers with <1 drm_plane
    
    We've had support for universal planes since kernel version 3.15, so
    there's not really a good reason to try supporting drivers that lack
    plane support now. As well, the current has_universal_planes logic is
    broken anyway as it makes the assumption that having display planes
    always means we have both a primary plane and a cursor plane (this isn't
    true on radeon/amdgpu and nouveau).
    
    So, remove this, and just check for whether or not we have a cursor
    plane.
    
    Signed-off-by: Lyude <lyude@redhat.com>
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4f0866610a4300d2d740b75122ea3b92e0134c08
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Dec 8 10:56:13 2016 +0100

    tests/kms_cursor_legacy: Change crc tests to use cursor movement instead of cursor hiding
    
    This way the tests will pass with the legacy cursor hack.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit bcef70f7e43160b4b7cca0a1ce9c64a7fc0d1e32
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Dec 7 13:09:48 2016 +0000

    Revert "lib/kselftests: Eliminate ENOTTY hack"
    
    This reverts commit 721866d83907c8ade5d20121418261d715b145ed.
    
    Still required for late tests as ->probe() is not allowed to return 1,
    but must return a negative error code.

commit 721866d83907c8ade5d20121418261d715b145ed
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Dec 7 12:58:17 2016 +0000

    lib/kselftests: Eliminate ENOTTY hack
    
    Returning a positive value from module loading does not get interpretted
    as an error, so we can forgo passing a proxy value of -ENOTTY.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3e2a75330bb02525fd55e389df9d2be7c9ce154f
Author: Mika Kahola <mika.kahola@intel.com>
Date:   Tue Nov 29 15:45:23 2016 +0200

    tests/kms_plane_multiple: Fix CRC based atomic correctness test
    
    Fixes issues on kms_plane_multiple i-g-t test found when running CI tests
    
    v1:
     - don't use tiling for cursor plane (Ville)
     - for y/yf tiling check that the platform is at least GEN9 (Ville)
    
    Cc: Ville Syrjala <ville.syrjala@linux.intel.com>
    Cc: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Signed-off-by: Mika Kahola <mika.kahola@intel.com>

commit 1e6fc785331b807bec65773681a5efc5a1e1f226
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Tue Dec 6 15:41:26 2016 +0100

    lib: Use igt_assert_eq in CHECK_RETURN
    
    So that debug logs contain the unexpected value.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Reviewed-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>

commit ae49296e067d1c9c5a5d9002de0a0d02911182b0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Dec 7 11:16:54 2016 +0000

    igt/drv_selftest: Adapt to mock/late split
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 81677444e62d11bc690bb23ae580893bf2445483
Author: Lyude <lyude@redhat.com>
Date:   Mon Nov 21 17:32:39 2016 -0500

    igt_kms: Don't require intel hardware for kmstest_force_connector
    
    Due to the unconditional call to intel_get_drm_devid() in
    kmstest_force_connector(), trying to use this function on anything that
    isn't intel hardware results in the current fixture being skipped. So,
    don't try to get the devid in kmstest_force_connector() unless we're on
    an Intel chipset.
    
    Signed-off-by: Lyude <lyude@redhat.com>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 570d161b01801759255a857845f6360daf23c930
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Dec 6 12:26:01 2016 +0000

    igt/kms_flip: Poll before reading from nonblocking drm_fd
    
    If we run the full testsuite, the drm_fd is set to nonblocking - so we
    have to explicitly wait using poll rather than rely on a blocking read
    for the vblank event.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 32eed6906ed17e79bf39e4b956400d1b68dd274a
Author: Dorota Czaplejewicz <dorota.czaplejewicz@collabora.co.uk>
Date:   Wed Nov 30 17:06:32 2016 +0100

    igt/kms_flip.c: Fix timings check
    
    Adjust the description and constants in the timing check to match each other.
    Relax the timing constraint to prevent false positives in vblank interval checking.

commit 66ce6285500b4e2fb0031270f7680e6d32ff750c
Author: Dorota Czaplejewicz <dorota.czaplejewicz@collabora.co.uk>
Date:   Wed Nov 30 17:05:34 2016 +0100

    igt/kms_setmode.c: Tweak timings check constants
    
    Add explanations of the checks and note the way the constants were derived.
    Tweak the constants to reflect their purpose better.

commit 901c2bb97e6c7acf4f7ca9f310bc958e6492ddcf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 2 21:55:18 2016 +0000

    lib/igt_kmod: Update the prefix match string length
    
    Not only do you need to change the prefix string, but you also need to
    update its length.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 31a34fb8692cac647fdc9a3d04f297d1b3c9bf98
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 2 17:50:26 2016 +0000

    lib/igt_kmod: s/subtest__/igt__/ for kernel parameters
    
    Use igt__ to detect kernel parameters indicating subtests.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cd1de41fd96a9d49018e314fc5fe50f8de4534d6
Author: Feceoru, Gabriel <gabriel.feceoru@intel.com>
Date:   Fri Nov 27 16:56:43 2015 +0200

    tests: Add feature list file for piglit 'summary feature'
    
    This is a placeholder for the feature list file.
    
    This needs to be filled in by feature owners with the feature name
    and the corresponding tests regex.
    
    Please refer to this piglit commit for more info on this feature.
    
        commit f16d011db75b08ceae241e7370599146691340ab
        Author: Feceoru, Gabriel <gabriel.feceoru@intel.com>
        Date:   Tue Nov 3 17:50:41 2015 +0200
    
            framework: Add support for feature readiness.
    
    v2:
     - Moved the file to tests directory
     - Replaced the example with a real feature
    
    Signed-off-by: Gabriel Feceoru <gabriel.feceoru@intel.com>

commit e631bb54d263614d687645e6295739e06d4a2353
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Dec 2 17:50:29 2016 +0200

    Update NEWS, bump version to 1.17.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit f9e5fe7e1df20e7c398083a36a338c51507c8812
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Dec 2 11:00:36 2016 +0200

    tools: Add intel_gem_info to .gitignore
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit 2e66e8db86d876b28d0f526682875084e9a935b6
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Thu Dec 1 14:23:58 2016 +0200

    tests/kms_sysfs_edid_timing: Convert sh to C version.
    
    The debug output for a HSW machine with two connectors (VGA and HDMI):
    
    DEBUG: card0-VGA-1: mean.max 12896229,00ns, 12896,23us, 12,90ms, mean.avg 12785055,80ns, 12785,06us, 12,79ms
    WARNING: card0-VGA-1: probe time exceed 10ms, max=12,90ms, avg=12,79ms
    DEBUG: card0-HDMI-A-1: mean.max 781433,00ns, 781,43us, 0,78ms, mean.avg 706643,20ns, 706,64us, 0,71ms
    
    v4:
    - do not include the time opening the fd (Chris Wilson)
    - include output from debug (Chris Wilson)
    
    v3:
    - use igt_mean for accounting (Chris Wilson)
    - make it Intel-agnostic when searching for connectors (Chris Wilson)
    
    v2:
    - don't read cached values (Chris Wilson)
    - warn on per connector, and fail per mean (Chris Wilson)
    
    These are synthetic: 10ms per connector, and 50ms for all.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>

commit 2fea8d26e589a9d256eca9f3d561750ecb3fb681
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Thu Dec 1 14:23:57 2016 +0200

    tests/drv_module_reload: Convert sh script to C version.
    
    v5:
    - reword gem_info to gem_sanitychecks (Chris Wilson)
    - remove subgroups/subtests for gem_exec_store and gem_sanitycheck
    (Chris Wilson)
    
    v4:
    - adjust test to make use of lib/igt_kmod
    - replaced SW_FINISH with SET_CACHEING (Chris Wilson)
    
    v3:
    - fix passing boolean value as flags to igt_kmod_unload().
    
    v2:
    - embedded gem_alive and gem_exec_store into test (Chris Wilson)
    - int main() to igt_main (Chris Wilson)
    - moved tests/gem_alive -> tools/gem_info (Chris Wilson)
    - added to intel-ci/fast-feedback.testlist (Petri Latvala)
    - added hda_dynamic_debug() (Petri Latvala)
    - renamed from tests/drv_module_reload_basic to tests/drv_module_reload
    (all subtests are basic and have been added to fast-feedback.testlist)
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>

commit b7e51f995c35ac4d74923654e641efe93fc307ba
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 2 09:56:44 2016 +0000

    lib/igt_kmod: Squelch the igt assert for a module with no subtests
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8bb6135fa50c81abe77b80cf08fc8b45445160e3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 1 21:53:48 2016 +0000

    igt: Add kselftest runner for i915
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7a06e13ba1e3b2ac79699e835fde9652eac6f71f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 1 21:49:43 2016 +0000

    lib/igt_kmod: Adopt igt_kselftests()
    
    Extract the automagic kselftest runner from tests/drm_mm.c to the new
    lib/igt_kmod.c
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f4361523cb35b95417eda3a0957d312127204c34
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Thu Dec 1 14:23:56 2016 +0200

    lib/igt_gvt: Make use of libkmod helpers and fix reading gvt parameter.
    
    v2:
    - use igt_sysfs_get_boolean() to get gvt status (Chris Wilson)
    - do not hard-fail when i915 module could not be loaded/unloaded (Chris
    Wilson)
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 0268d73b0b267c6f5acdd4bf40ae917b3afff96c
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Thu Dec 1 21:45:47 2016 +0000

    lib/igt_kmod: New library to support driver loading/unloading and additional helpers.
    
    lib/igt_aux: Added igt_pkill and igt_lsof helper.
    lib/igt_kmod: Added load/unload kmod helpers.
    
    v7:
    - document the case where leaving stray fd from drm_open_driver()
    might fail reloading the driver.
    - list also current opened files from /dev/dri in case we could not
    unload the driver.
    - convert igt_info to igt_warn (Chris Wilson)
    - added KMOD_|PROCPS CFLAGS (Chris Wilson)
    
    v6:
    - include latest modifications from tests/drv_module_reload:
    display all loaded modules and list information about opened
    files by processes (Petri Latvala)
    
    v5:
    - added igt_i915_driver_{load/unload}.
    - added kick_snd_hda_intel() to match current
    tests/drv_module_reload_basic and integrated into
    igt_i915_driver_load/unload.
    - added gtk-doc section for lib/igt_kmod
    
    v4:
    - decided to split libkmod helpers into their own file as there's
    another user lib/igt_gvt or tests/gvt_basic.
    - fixed some gtk-doc documentation.
    
    v3:
    - return -errno (igt_pkill()) in case of failure (Cris Wilson)
    - return bool for igt_kmod_is_loaded(), replaced strncasecmp with strncmp
    (Chris Wilson)
    
    v2:
    - Renamed libkmod helpers (Chris Wilson)
    - Removed SIGTERM/SIGKILL case where we repeatedly tried to terminate the
    process: just call kill(2) once (Chris Wilson)
    - Removed redundant check in igt_kmod_unload(), igt_module_in_use() (Chris
    Wilson)
    - Pass flags to igt_kmod_unload() from the caller (Chris Wilson)
    - Removed useless function igt_kill() which acts just as kill(2) (Chris
    Wilson)
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 4d8f3b2c8034f1bdf64d65d484e5d5cd18410fb7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 1 15:29:45 2016 +0000

    lib/igt_dummyload: Don't clear a signal if we haven't installed the timeout
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cdd30a3d77e3ddd67fee28a2d16ed85e700c6bc0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 1 15:28:49 2016 +0000

    lib/dummyload: Don't clear the same signal twice
    
    Now that the signal is disable on spin_batch_end, we don't need to do
    the same from the signal handler if we have a match.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3e7a4e064e82f803a2be978541b3f1c181cbbbd3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 1 15:15:40 2016 +0000

    igt/kms_busy: Add more information about the state of the bo
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 893f4e0dd667c6080e220c541ff33fb2a04d5516
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 1 15:22:23 2016 +0000

    Revert "igt_dummyload: Don't clear handler for invalid signal"
    
    This reverts commit 32d38ea2f6c3e07d38bc65f8cf2df1e0c0fe1c6b.

commit 0a7d1f7efe0813fd35ab5dcced3219f951b1218c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 1 15:21:06 2016 +0000

    lib/dummyload: Clear the right signal afterwards
    
    If the signal handler fires after we delete the busybatch, it would walk
    the list and find no match. Then attempt to use the list_head as its
    info->signo. Use the passed in sig instead.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 32d38ea2f6c3e07d38bc65f8cf2df1e0c0fe1c6b
Author: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
Date:   Thu Dec 1 15:42:24 2016 +0200

    igt_dummyload: Don't clear handler for invalid signal
    
    Signed-off-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>

commit 39d2eda23342e5a473563cf1c954246eb07529c7
Author: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
Date:   Thu Dec 1 12:50:19 2016 +0200

    igt/kms_flip: Fix set_dpms called with an idle bo
    
    Signed-off-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1c7a50a07b9978fc6add73fec797979d9cf121f8
Author: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
Date:   Thu Dec 1 12:36:53 2016 +0200

    igt_dummyload: clear signal handler on the desructor as well
    
    Fixes an issue when calling igt_spin_batch_set_timeout and then
    tearing down the spinner right away before it has the chance
    to timeout, causes the associated signal handler to linger. Make
    sure to remove the handler on the destructor.
    
    Signed-off-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit dc3fcd99e96f6714b5bd4614d8aeb113816d7ba9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Nov 30 19:37:37 2016 +0000

    Silence a bunch of "const discard" warnings
    
    A few warnings of the form:
    
    gem_mmap_gtt.c: In function ‘copy_wc_page’:
    gem_mmap_gtt.c:480:16: warning: initialization discards ‘const’ qualifier from pointer target type [enabled by default]
       __m128i *S = (const __m128i *)src;
    
    are no more.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d20b870eed83addf4735fd6deaaf9b3cfa0b457d
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Tue Nov 29 12:06:31 2016 -0800

    lib/igt_aux.h: Cast is confusing old gcc
    
    I noticed in some machines igt compilation was breaking
    after igt_dummyload was introduced.
    
    I don't know exactly why, but it seems this cast seems to let
    old gcc a bit confused. Without the cast everything works
    properly.
    
    Compilation Error log:
      CC       igt_dummyload.lo
    In file included from igt.h:30:0,
                     from igt_dummyload.c:25:
    igt_aux.h:288:39: error: initializer element is not constant
     #define __IGT_INIT_LIST(name) (struct igt_list){ &(name), &(name) }
                                           ^
    igt_aux.h:289:47: note: in expansion of macro ‘__IGT_INIT_LIST’
     #define IGT_LIST(name) struct igt_list name = __IGT_INIT_LIST(name);
                                                   ^
    igt_dummyload.c:50:8: note: in expansion of macro ‘IGT_LIST’
     static IGT_LIST(spin_list);
            ^
    make[4]: *** [igt_dummyload.lo] Error 1
    
    Cc: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Reviewed-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>

commit 9639577ca6f3793469b31b9231b6fee7efe5cab0
Author: Kristian H. Kristensen <hoegsberg@gmail.com>
Date:   Tue Nov 29 17:14:13 2016 -0800

    assembler: RSQ is a math function
    
    Signed-off-by: Kristian H. Kristensen <hoegsberg@gmail.com>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit 5444a9a604c0a51e6c892d9baff412511ac87b02
Author: Kristian H. Kristensen <hoegsberg@gmail.com>
Date:   Tue Nov 29 17:13:17 2016 -0800

    assembler: Set 3src options before sources
    
    Setting the 3src sources will assert align16, but that doesn't get set
    until we call set_instruction_options(). Call that before setting
    sources.
    
    Signed-off-by: Kristian H. Kristensen <hoegsberg@gmail.com>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit ee7c9368710d3fcc1937ebf20942b67015551cf5
Author: Kristian H. Kristensen <hoegsberg@gmail.com>
Date:   Tue Nov 29 17:09:47 2016 -0800

    assembler: Fix assert when setting 3src sources
    
    We need to map the type to the 3src encoding before comparing to
    insn->bits1.da3src.src_reg_type, which is 3src encoded.
    
    Signed-off-by: Kristian H. Kristensen <hoegsberg@gmail.com>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit cb214ef824c59082fd5b66c23c45174305d793dc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Nov 29 14:49:26 2016 +0000

    igt/drv_hangman: Promote nsec calc to u64
    
    100 * 1 billion needs a 64bit intermediate
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit bc849885ddaf0964da7cc981856ccab561c5b7a9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Nov 29 14:44:46 2016 +0000

    igt/gem_gtt_speed: Spare clang the embarrassment
    
    Clang pretends to be GCC and then dies on GCC pragma.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e6d19e8f713760aa265c4cad1e028dcfa9f9104e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Nov 29 14:40:55 2016 +0000

    igt/drv_missed_irq: Initialise expect_rings before use
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit fd893f4cbbce94d3321364fe8e752e1ba4ed19fc
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Nov 29 14:27:47 2016 +0100

    kms_atomic_transition: Only run tests on valid pipes.
    
    Fixes hangs on systems with less pipes, oops!
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 0eef0402cf6d5ce4cc03ce026e0e5a829c56b13c
Author: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
Date:   Fri Nov 11 19:25:21 2016 +0200

    igt/kms_busy.c: Use new igt_spin_batch
    
    v7: Adapt to api rename
    v8: Tidy up finish_fb_busy (Chris Wilson)
    v10: Adapt to api rename
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Signed-off-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>

commit 96ec8cb3b5ec1fc2927d6cff8e09930082301d7e
Author: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
Date:   Sat Oct 29 01:01:05 2016 +0300

    igt/kms_flip: Use new igt_spin_batch
    
    v7: Reuse NSEC_PER_SEC defines
    v8: Don't wait on the fb, it must be busy. Exit the spin batch
        when flip is queued (Chris Wilson)
    v10: Adapt to api rename
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Signed-off-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>

commit b7b249911be88bcaad27c86f156061e3940145d8
Author: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
Date:   Fri Oct 28 19:59:24 2016 +0300

    igt/gem_wait: Use new igt_spin_batch
    
    v7: Adapt to api rename
    v8: Restore sanitycheck wait on the recursive batch and
        avoid using C99 locals (Chris Wilson)
    v9: Explicitly quit the batch instead of timing out right away
    v10: Adapt to api rename
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Signed-off-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>

commit 35fa2ca73b6b9682d0f3366b0cb4e82ac6c340ec
Author: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
Date:   Tue Oct 11 21:30:08 2016 +0300

    lib: add igt_dummyload
    
    A lot of igt testcases need some GPU workload to make sure a race
    window is big enough. Unfortunately having a fixed amount of
    workload leads to spurious test failures or overly long runtimes
    on some fast/slow platforms. This library contains functionality
    to submit GPU workloads that should consume exactly a specific
    amount of time.
    
    Since v14: Since we are using multiple signals, walk list of batches
    to terminate a batch to avoid using a single global batch. Cycle signals
    between SIGRTMIN and SIGRTMAX properly.
    
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Cc: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: tomeu@tomeuvizoso.net
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Signed-off-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>

commit d57ae360b32c4edfb88e9a0400ec5ec3a3e6959f
Author: Lyude <lyude@redhat.com>
Date:   Mon Nov 21 13:43:36 2016 -0500

    igt_aux: Add some list helpers from wayland
    
    Since we're going to be using lists for keeping track of EDIDs we've
    allocated on the chamelium, add some generic list helpers from the
    wayland project.
    
    Signed-off-by: Lyude <lyude@redhat.com>
    
    Changes since v1:
    - Rename list helpers to be more like those from the Linux kernel
    
    v2: Make the api compatible with the kernel as well.

commit d529a5748f28bafd2aa74a1166e391c9468bf49d
Author: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
Date:   Wed Nov 16 21:38:20 2016 +0200

    lib: Make signal helper definitions reusable
    
    Lots of test cases are re-declaring this.
    
    v2: Remove definition in benchmarks/gem_syslatency.c
    
    Signed-off-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>

commit f2428552bbc43f8aa5714554b6cdf162d21e5303
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Nov 29 11:46:50 2016 +0100

    kms_atomic_transition: Fix compile
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit dde585fbb8f1f9b3977e2a8f26697aa60a79aa8b
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Nov 29 11:38:09 2016 +0100

    kms_atomic_transition: Add test timeout to run_modeset_tests
    
    This fixes the hang on kms_atomic_transitions.1x-modeset-transitions.
    Underlying cause still needs more looking at..
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit e6b929f1e88b6508dca4a92354b0db8bc8869e5d
Author: Jason Ekstrand <jason.ekstrand@intel.com>
Date:   Wed Nov 23 17:44:47 2016 -0800

    aubdump: Add a PCI-ID= entry to the AUB file comment
    
    Reviewed-by: Jordan Justen <jordan.l.justen@intel.com>

commit 2758871e7d650dae8ef115ab1ae7005b7dd8f0c2
Author: Jason Ekstrand <jason.ekstrand@intel.com>
Date:   Wed Nov 23 17:44:08 2016 -0800

    aubdump: Set the application name
    
    This will help with identifying aub files
    
    Reviewed-by: Jordan Justen <jordan.l.justen@intel.com>

commit 16cd4118877d4df7c2e6fe4879de8021e95b1877
Author: Jason Ekstrand <jason.ekstrand@intel.com>
Date:   Wed Nov 23 16:40:00 2016 -0800

    Revert "aubdump: Bump the GTT size to 256MB"
    
    This reverts commit c6191a41f6c858cbdd4280e9ffcc91170e87ebeb.  It turns out
    that having a GTT that large causes the simulator massive headaches.
    
    Reviewed-by: Jordan Justen <jordan.l.justen@intel.com>

commit d072258551119d07356e6f5728392bda2f3727a9
Author: Mika Kahola <mika.kahola@intel.com>
Date:   Tue Nov 8 15:56:13 2016 +0200

    tests/kms_plane_multiple: CRC based atomic correctness test
    
    This is a testcase with multiple planes. The idea here is the following
    
     - draw a uniform frame with blue color
     - grab crc for reference
     - put planes randomly on top with the same blue color
     - punch holes with black color into the primary framebuffer
     - ideally the planes should cover these holes so that the output is the
       identical to reference crc
     - composite all with one ioctl call
     - grab crc and verify that the reference crc is equal
     - repeat this for several iterations to maximize coverage
    
    v7: Unify reference crc grabbing for atomic and legacy tests (Maarten)
    
    v6: Rename test_planes() to prepare_planes() (Maarten)
        When grabbing reference crc, keep framebuffer and crc enabled for
        atomic mode setting. (Maarten)
        Fix crc collection for legacy modesetting (Maarten)
    
    v5: Remove limit for max number of iterations and add possibility to
        loop forever (Daniel)
        Remove IN_RANGE() macro (Maarten)
        Remove log file and show random number seed on screen instead (Maarten)
        Split legacy and atomic plane tests on own functions (Maarten)
        remove test_atomic() function and pass test mode info as
        parameter (Maarten)
        Use bigger rectangle size (256x256) for non-cursor planes and
        smaller (128x128) size for cursor plane (Maarten)
    
    v4: For atomic test enable crc capturing before entering into a
        iteration loop. After each iteration, check that page flip
        didn't take no more than 1 vblank, fetch all crc's and check
        the values.
    
        Introduce new command line parameter for the number of iterations.
        The test run from 1 to 256 iterations.
    
    v3: Cleanup by removing separate plane array
        For atomic, pass DRM_MODE_PAGE_FLIP_EVENT
        Grab crc by using igt_pipe_crc_get_crc instead of igt_pipe_crc_collect_crc
        Rename nplanes variable to max_planes
        To optimize test execution, run iterations after the modeset
    
    v2: Keep a logfile on random number seeds per subtest that are not skipped
        due to unmet test requirements
    
    Signed-off-by: Mika Kahola <mika.kahola@intel.com>
    Reviewed-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 56f1bd6a672f561fce6f7ea987c7fb25df00717b
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Nov 28 12:36:02 2016 +0100

    kms_panel_fitting: Add some more tests for fastset testing.
    
    Instead of only testing native resolution to a scaled resolution,
    test the following sequence:
    
    Native -> scaled -> scaled (different) -> native.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 7797517f91f4d08b11fe3763a2bcd0e088e373c9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Nov 27 11:56:10 2016 +0000

    igt/kms_setmode: Skip unconnected connectors
    
    Assuming that we can program any random unconnected output to a mode is
    nowadays false.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=98547
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2021ef63be41a4b68d11ffa111508055182c40e1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Nov 26 16:13:13 2016 +0000

    igt: Add kselftest runner for drm_mm
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit eaa1c907e9abf8350273f6dbfd2d3115b52ba272
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Nov 22 12:37:02 2016 +0000

    igt/kms_setmode: Adjust timing assertion from percentage to scanline
    
    The target is that we report the vblank time accurate to within a
    scanline (limit of the hw with which we can reliably compensate).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 17ad08e9e0db2b04adaddb6a25594b8b25a0fcbd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Nov 17 13:47:19 2016 +0000

    intel_ci: Add gem_exec_reloc/basic-softpin to BAT
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Petri Latvala <petri.latvala@intel.com>

commit 75e2e1e2c7f926c983eb27105527801c3e145389
Author: Imre Deak <imre.deak@intel.com>
Date:   Mon Oct 17 15:39:04 2016 +0300

    intel-ci: Add gem_exec_suspend/S4-devices to BAT
    
    Add basic-s4-devices subtests to BAT. At the same time remove basic-s4
    from the list, which is atm implicitly disabled via HIBERNATION=n in
    kconfig. We would need at least basic S4 coverage provided by
    basic-s4-devices, which requires HIBERNATION=y.
    
    v2 (Petri): Don't add s3-devices
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit 78d19c8869c8c1f8073592ce5668fd5fea8130d9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Nov 24 09:47:12 2016 +0000

    igt/gem_seqno_wrap: Tidy assertion failure message for reading i915_next_seqno
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f683929e8f1597ebc2ef5834564114ffea6f1594
Author: Kenneth Graunke <kenneth@whitecape.org>
Date:   Wed Nov 23 15:53:33 2016 -0800

    aubdump: Fix intel_aubdump -o <filename>
    
    This looks like a mistake in 1f43677f895a88ae880b35f9b18cc7e6869d0ca6.
    
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit 3ce1bc0c0e378090e74ba84ad1e2530b659310dd
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Nov 23 16:08:44 2016 +0100

    kms_atomic_transition: Respect limits for sprite planes on earlier platforms.
    
    Usually there is a maximum amount of width/height that a sprite
    plane can have, and on earlier platforms alpha sprite planes are
    usually unsupported.
    
    In case of SKL+ and VLV/CHV this is handled by only setting a maximum
    width, but on earlier platforms there's a hardware limitation for
    stride, width and height. Handle this by starting from cursor
    dimensions, and then increase width to max, followed by height to max.
    
    If the TEST_ONLY commit fails immediately with -EINVAL with cursor
    width/height in ARGB format, assume that ARGB is unsupported and
    fallback to XRGB. If that fails too fail the test.
    
    This should allow tests to pass on all earlier platforms too.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit cddf9960788103e472a53416c77323a2399396a8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Nov 22 17:20:59 2016 +0000

    igt/gem_mmap_gtt: Silence compile warning for !sse4.1
    
    gem_mmap_gtt.c: In function ‘test_huge_copy’:
    gem_mmap_gtt.c:589:4: warning: passing argument 2 of ‘copy_wc_page’ from incompatible pointer type [enabled by default]
        copy_wc_page(page, a + PAGE_SIZE*i);
        ^
    gem_mmap_gtt.c:503:13: note: expected ‘const uint32_t *’ but argument is of type ‘char *’
     static void copy_wc_page(uint32_t *dst, const uint32_t *src)
                 ^
    gem_mmap_gtt.c:601:4: warning: passing argument 2 of ‘copy_wc_page’ from incompatible pointer type [enabled by default]
        copy_wc_page(page, b + PAGE_SIZE*i);
        ^
    gem_mmap_gtt.c:503:13: note: expected ‘const uint32_t *’ but argument is of type ‘char *’
     static void copy_wc_page(uint32_t *dst, const uint32_t *src)
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1634c14c58b5e5fa3c3b4cef64e9f9196ea74f31
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Tue Nov 22 16:52:25 2016 +0000

    tests: kms_pipe_color: remove unused variable
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit c459a3d798bea7af30e8c0c9bcd2e4285730ce47
Author: Jason Ekstrand <jason.ekstrand@intel.com>
Date:   Tue Nov 22 08:29:33 2016 -0800

    aubdump: Bump the GTT size to 256MB
    
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit 106b0ba68c77fa97449e10637e5eaca8bbfdb786
Author: Francisco Jerez <currojerez@riseup.net>
Date:   Tue Nov 15 21:59:57 2016 -0800

    aubdump: Fix GTT setup for Gen8+
    
    Gen8+ have 64 bit GTT entries, so we need to allocate twice as much
    space for the GTT table in order to cover the same number of GTT
    pages.  Fixes sporadic page-fault crashes on the simulator.
    
    Reviewed-by: Jason Ekstrand <jason@jlekstrand.net>

commit a5788706852d0d02d6b9b7510daa1ffce083d4d5
Author: Jason Ekstrand <jason@jlekstrand.net>
Date:   Fri Nov 18 11:51:26 2016 -0800

    aubdump: Handle 48-bit relocations properly
    
    aubdump was only writing 32-bits regardless of platform.  This is fine if
    the client being dumped leaves the top 32 bits zero since the aubdump GTT
    is fairly small.  However, if the client does store something in the upper
    32 bits, this results in an invalid relocation.
    
    Cc: Kristian Høgsberg <krh@bitplanet.net>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit 59cdcf1febdbeb1c00dccb30940089f6877d6c1d
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Nov 2 13:38:48 2016 +0100

    kms_cursor_legacy: Add nonblocking modeset vs cursor update test.
    
    In case of a nonblocking modeset, the cursor update should block for
    the modeset to finish.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 40a3ada61d5c85969a35ba1f3ab41a1fcbe72a45
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Nov 18 13:55:21 2016 +0000

    igt/gem_eio: Apply the cork to the execbuf
    
    git add failure, I pushed the incomplete test.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 789e93f19c8a45d67ef28d218d4730f05f7063ec
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Nov 18 09:40:09 2016 +0000

    igt/gem_exec_reloc: Don't execute an empty object for basic-softpin
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9bbf642dc1f1b661ea970c8c3f66b1a4f8eaef44
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Nov 18 08:50:33 2016 +0000

    igt/gem_eio: Add inflight test
    
    Since we can submit requests after becoming wedged, we need to test that
    we do handle that correctly.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e9443b3d2680fd3462bd4229eeeb6dd6975bba1e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Nov 17 13:44:55 2016 +0000

    igt/gem_exec_reloc: Trivial test for softpin ABI
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c37cdf6b95a2e132c812623cc4b4b7e30923edf8
Author: Robert Bragg <robert@sixbynine.org>
Date:   Wed Nov 9 15:11:39 2016 +0000

    igt/gem_exec_parse: check oacontrol lri bad for >= v9
    
    OACONTROL is no longer white listed in the command parser so this checks
    at attempted LRI will be disallowed and (more importantly) checks that
    userspace doesn't get an EINVAL error for an attempted OACONTROL LRI.
    This is important becase Mesa application attempt OACONTROL LRIs while
    initializing and will abort for any execbuf error.
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit b6f1f403ded0ace29ed20e99bcac111b131bc7ef
Author: Robert Bragg <robert@sixbynine.org>
Date:   Tue Nov 8 22:53:31 2016 +0000

    igt/gem_exec_parse: update registers test for v >= 8
    
    This combines some parts of the recently added store_lri test with the
    registers test to be able to first load a distinguishable value before
    the LRI and explicitly read back the register to determine if the
    command succeeded or was a NOOP.
    
    For now though we won't look at OACONTROL without checking for version 9
    of the command parser.
    
    This updates the 'bad' test to check the OASTATUS2 register so that we
    can explicitly read back from the register to check it becomes a NOOP.
    
    This adds a struct test_lri for associating a mask with the init/test
    values so we ignore things like hw status bits that might interfere
    with the result.
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 9dd41d64fd49c1738059524625fc02e2de384798
Author: Robert Bragg <robert@sixbynine.org>
Date:   Tue Nov 8 22:52:22 2016 +0000

    igt/gem_exec_parse: update hsw_load_register_reg for v >= 8
    
    This updates the checking of disallowed loads to set a distinguishable
    value before the load and explicitly check the load was a NOOP by
    reading back the final value.
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 3a43ceb0a14bb09b0813564ad686b9b1ee869726
Author: Robert Bragg <robert@sixbynine.org>
Date:   Tue Nov 8 14:07:55 2016 +0000

    igt/gem_exec_parse: update cmd-crossing-page for >= v8
    
    Since an access violation won't return an error to userspace for v >= 8
    of the command parser this updates the cmd-crossing-page test to
    explicitly read back from SO_WRITE_OFFSET[0] to see that the command
    wasn't squashed to a NOOP.
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 263c46ba1d718523d110a3dbf58bb7dffb3d7f66
Author: Robert Bragg <robert@sixbynine.org>
Date:   Tue Nov 8 14:02:40 2016 +0000

    igt/gem_exec_parse: update bitmasks test for v >=8
    
    With v8 of the command parser (where we won't get an EINVAL for an
    access violation) this updates the bitmasks test to explicitly confirm
    that the command became a NOOP by reading back from where the QW_WRITE
    would have otherwise landed.
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 2547fad7d5d029987483672e1dfc23ee316318a3
Author: Robert Bragg <robert@sixbynine.org>
Date:   Tue Nov 8 13:29:31 2016 +0000

    igt/gem_exec_parse: make basic-rejected version agnostic
    
    This adapts the basic-rejected test to focus on invalid commands that
    will result in an EINVAL errno being returned to userspace even with the
    upcoming version 8 parser change to stop reporting access violations as
    EINVAL errors.
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 86ccc6b03112a34da6ed777c96779222d3144246
Author: Robert Bragg <robert@sixbynine.org>
Date:   Tue Nov 8 13:14:38 2016 +0000

    igt/gem_exec_parse: req. v < 9 for oacontrol tracking test
    
    This limits testing the oacontrol tracking (required pairing of oa
    enable/disable per batch buffer) to version <= 8 of the command parser.
    
    Version 9 of the command parser removes all special handling for
    OACONTROL which is now going to be managed by i915-perf and not
    programmed from userspace.
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit b9359a29af6f61a52159aefd9557eea945dd13e1
Author: Robert Bragg <robert@sixbynine.org>
Date:   Mon Nov 14 16:55:01 2016 +0000

    igt/gem_exec_parse: init global parser_version in fixture
    
    This adds a static global int parser_version that can be referenced by
    all subtests without needing multiple GETPARAM requests.
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 93132a8fd9f1b9b326949da0d7b74a0d3915ecce
Author: Robert Bragg <robert@sixbynine.org>
Date:   Mon Nov 14 16:50:58 2016 +0000

    igt/gem_exec_parse: make global vars local to main()
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 2c9f5b92cbe34cf51ec52cd21b87437e941a471a
Author: Robert Bragg <robert@sixbynine.org>
Date:   Mon Nov 7 13:37:12 2016 +0000

    igt/gem_exec_parse: update hsw_load_register_reg
    
    This generalises hsw_load_register_reg to loop through an array of
    allowed and disallowed registers and to use the exec_batch[_patched]
    utilities.
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 7fcded9c87b689158b5616ba16e9fb603cf1947c
Author: Robert Bragg <robert@sixbynine.org>
Date:   Fri Nov 4 16:31:11 2016 +0000

    igt/gem_exec_parse: move hsw_load_register_reg down
    
    No functional change, just moving hsw_load_regster_reg test code down
    below the execbuf utilities in preparation for updating to use them.
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 1e2579ae7bacaca747f6b8f42d6071dcefa06f20
Author: Robert Bragg <robert@sixbynine.org>
Date:   Fri Nov 4 13:46:13 2016 +0000

    igt/gem_exec_parse: some minor cleanups
    
    This normalizes the execbuf utilities in this file to all use memset to
    clear obj, reloc and execbuf structures and set them up in the same
    order. As I was debugging some unpredictable test failures I was getting
    unsure that all these structures were being fully initialized.
    
    The same I915_GEM_DOMAIN_COMMAND domain is now used with all relocs.
    
    The register/command defines have been moved to the top of the file to
    be available to all tests/utilities.
    
    The handle + fd variables are now static.
    
    Signed-off-by: Robert Bragg <robert@sixbynine.org>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 474fae6d12e9c58b1eb14fc86a5326396fee5d89
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Tue Nov 15 13:52:52 2016 +0200

    lib: Add missing include for sync()
    
    Commit 721d8747e3a2 added sync() calls to igt_main and
    igt_simple_main, making self-tests fail to build. #including unistd.h
    in igt_core.h fixes that.
    
    Fixes: 721d8747e3a2 ("igt: Add a test for reordering execbufs")
    CC: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 49f44c7171a0520f1fe86f6a43c0bea7a09576b1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Nov 14 21:24:52 2016 +0000

    igt/gem_exec_schedule: Update param for final
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 773ac7cc60357b91a5747217b926cca7ef71a5c1
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Tue Nov 8 12:31:06 2016 +0200

    lib: substitute cxt BAN_PERIOD with BANNABLE
    
    Context BAN_PERIOD will get depracated so subsitute it with BANNABLE
    property. Make ctx param test to accept both variants for now
    until kernel changes have landed, to not break BAT.
    
    v2: check against - EINVAL on get/set ban as it can return -EPERM
    v3: better naming for get/set (Chris)
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 1af5605a35a82932c13711675bfa5f034f7920fa
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Fri Nov 11 14:17:50 2016 +0100

    lib: Pass I915_TILING_NONE if Yf or Ys
    
    The kernel expects that BOs for framebuffers with
    I915_FORMAT_MOD_Yf_TILED will have I915_TILING_NONE.
    
    Fixes: 050c00d53f39 ("lib: Pass I915_TILING_Y to the kernel if Yf or Ys")
    Cc: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 5e0509f629032bd7b4efa45b15ff13359d5314dc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Nov 10 09:56:03 2016 +0000

    igt/gem_mmap_gtt: Swap thrash copy
    
    Copy between two objects that together just exceed physical memory
    causing ping-pong on every page. Not for the faint hearted.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f485466ca88716bd8a7d8001654ee1a4eaa5260e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Nov 10 09:31:45 2016 +0000

    igt/gem_mmap_gtt: Add forked contention to the mmap copies
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b37aad82b2d662770ad55ab594b74048509b0692
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Nov 10 08:03:30 2016 +0000

    igt/kms_frontbuffer_tracking: Drop unsynchronized pageflip test
    
    A raw pageflip is nonblocking and asynchronous, but
    kms_frontbuffer_tracking persumed that it was synchronous and completed
    before the funtion returns. It doesn't, so the CRC could be sampled
    before the flip completed.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit 050c00d53f391aa41931229ffe230e4872a5cb4f
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Thu Nov 10 10:28:51 2016 +0100

    lib: Pass I915_TILING_Y to the kernel if Yf or Ys
    
    GEM_SET_TILING doesn't care about Yf or Ys, so just pass Y.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit ae6496307c3ebe6409eb9b9f60355516faeefa88
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Thu Nov 10 10:25:24 2016 +0100

    lib: Pass tiling constant where that's expected
    
    We were passing in two places a framebuffer modifier constant instead of
    a tiling constant.
    
    Also adds igt_fb_mod_to_tiling so tests can do that by themselves.
    
    Cc: Tvrtko Ursulin <tursulin@ursulin.net>
    Fixes: 8a1a38661f56 ("lib: Add igt_create_bo_with_dimensions")
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit d0795466cdc983c6bf0af257af081b5f12d58c6e
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Mon Sep 19 11:25:26 2016 -0400

    tests: kms_pipe_color: fix ctm tests
    
    Some of the Intel platforms have odd numbers of LUT entries and we
    need to tests a couple of values around the expected result. Bring
    back the CRC equal function we need that doesn't trigger an assert
    right away, while we still assert if we can't find a correct result in
    the outter loop.
    
    v2: update Fixes field (Jani)
    
    v3: Use memcmp (Ville)
    
    v4: missing signed-off
    
    bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=97691
    Fixes: 582ce4cd19c6 ("lib/debugs: nuke igt_crc_equal again")
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit 7f7530df3d84559d3cac33ff831fcf442a264206
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Thu Oct 6 16:11:48 2016 +0100

    aubdump: add --command option to stream aubdump to another program
    
    This comes handy if you want to look at your application output without
    having to save it into a file. For example, use this with aubinator from
    Mesa :
    
    $ intel_aubdump -c '/path/to/aubinator --gen=hsw' my_gl_app
    
    v2: Fix handling empty command line option
    
    v3: Fix command line concatenation (again...)
    
    v4: Use execvp (Petri)
        Indentation (Petri)
        Allow recording to a file and stream to an external application (Lionel)
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Sirisha Gandikota <Sirisha.Gandikota@intel.com>

commit 1f43677f895a88ae880b35f9b18cc7e6869d0ca6
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Thu Oct 6 15:30:24 2016 +0100

    tools: intel_aubdump: pass configuration through file descriptor
    
    This makes parsing options less complicated and easier to extend.
    
    v2: Fix device id parsing (atoi -> sscanf) (Sirisha)
        Combine with previous commit moving init function (Sirisha)
    
    v3: Fix behavior change between bash 4.3 & 4.4 in <<< with \n characters
        (Lionel)
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Sirisha Gandikota <Sirisha.Gandikota@intel.com>

commit 31a00b1cfa90e8834c028a4cac8c2fd51ae7ee69
Author: Emil Velikov <emil.velikov@collabora.com>
Date:   Wed Oct 26 17:18:47 2016 +0100

    configure.ac: correctly manage DRM_INTEL_{CFLAGS, LIBS}
    
    Currently the latter is only set when using --enable-intel.
    
    Whereas for the CFLAGS: if we "enable" PKG_CHECK_MODULES sets the
    variable, while for "disable" we do it locally. In either case the
    CFLAGS is not propagated through, this one can get build issues
    regardless of the actual state of the toggle.
    
    v2: Add -I for the include directive and correctly propagate
    $(top_srcdir).
    
    Cc: Brian Starkey <brian.starkey@arm.com>
    Cc: Robert Foss <robert.foss@collabora.com>
    Reported-by: Brian Starkey <brian.starkey@arm.com>
    Signed-off-by: Emil Velikov <emil.velikov@collabora.com>
    Reviewed-by: Robert Foss <robert.foss@collabora.com>
    Tested-by: Brian Starkey <brian.starkey@arm.com>

commit 8db658c0d0eea431ebf267e3ea5218cc1b979a9e
Author: Emil Velikov <emil.velikov@collabora.com>
Date:   Thu Oct 27 10:38:38 2016 +0100

    lib: use the local intel_aub.h file
    
    File is provided by the libdrm_intel package which is optional. Since we
    already have a local copy of the file, we might as well use it ;-)
    
    v2: Move the file alongside intel_bufmgr.h and use it in the
    disable-intel case.
    
    Cc: Brian Starkey <brian.starkey@arm.com>
    Reported-by: Brian Starkey <brian.starkey@arm.com>
    Signed-off-by: Emil Velikov <emil.velikov@collabora.com>
    Tested-by: Brian Starkey <brian.starkey@arm.com>

commit a0b774ff6371b00c4dcd90bd4059ab85a527a2c8
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Wed Nov 9 15:15:43 2016 +0100

    Revert "lib: use the local intel_aub.h file"
    
    Emil prefers if the approach in v2 is used (it was sent around the time
    v1 had been applied).
    
    This reverts commit 438c8d7c688780337d271016d84a69aab0474097.

commit cfc8d6903f91c787630eef2676fcad93d62e1bff
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Feb 29 21:15:01 2016 +0000

    igt/gem_exec_parse: Exercise lots of different allocation sizes
    
    Try and exercise the batch-pool vs shrinker.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6ba1f98707756eada82328cd2739a3b815382715
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Nov 9 09:33:13 2016 +0000

    igt/gem_exec_reloc: Reduce being interrupted to a warn
    
    If the relocation is incomplete and we take the slow path, we fill the
    reloc.presumed_offset with -1. This shouldn't happen for the basic
    tests, at least not on the most recent kernels, yet can happen in older
    kernels. Just reduce the failure to a warn.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 721d8747e3a2ae78b4fad33d32e4b4796c90a2af
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 27 11:32:47 2016 +0100

    igt: Add a test for reordering execbufs
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 874a2072251d94f7e6c6565932cc36b7df2dfc6b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 29 23:31:34 2016 +0100

    igt: Add exerciser for execbuf fence-out <-> fence-in
    
    When execbuf2 supports explicit fencing with sync_file in/out fences
    (via a fence-fd), we can control execution via the fence.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b521706275bd2c13341b964b5feb2de3eb64d323
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jun 17 10:54:34 2016 +0100

    igt: Add test case for EXEC_OBJECT_ASYNC
    
    The intention behind EXEC_OBJECT_ASYNC is to instruct the kernel to
    ignore implicit fences on the object but still maintain them for the GEM
    API. The user is expected to provide explicit fencing to maintain
    correct ordering of rendering.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c425d13827a1aab919aee9b6f9e8056c37d7b2c9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Nov 7 10:31:16 2016 +0000

    igt/gem_mmap_gtt: Use SSE4.1 streaming to speed up per-pixel checks
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3d65fb87982b6ac38b0ecde812d0fd56640c519d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Nov 4 15:01:26 2016 +0000

    igt/gem_exec_reloc: Check we write the full 64bit relocation
    
    Recently a patch ran successfully through BAT that broke 64bit
    relocations on a couple of machines. Oops. So lets add a very fast set
    of tests to check basic relocation handling.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0db7649c11f63dc659a4c800a1791e3af22986be
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Fri Sep 30 12:19:12 2016 +0300

    benchmarks: Add prime_lookup to .gitignore
    
    Also re-sort the file.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit 553fca66e4ebaaa4d517233ff8456f7ba3dcf7da
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Tue Oct 25 11:44:43 2016 +0300

    tools: Add intel_guc_logger to .gitignore
    
    Also re-sort the file.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit 8760d86024492a723db1abff785c57e09bd74ae4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Nov 1 10:42:20 2016 +0000

    igt/kms_flip: Use the computed vblank interval for TS checking
    
    Since the modeline may differ from actual hardware timings, do not rely
    upon it but instead measure the actual and verify that it does not
    change across the various flip/vblank configurations.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c8963f30aa8b713f5e689219afc38b455117714c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Nov 1 10:38:24 2016 +0000

    igt/kms_flip: Mark frame_time() as coming from the mode
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 94c6cbdf3793e555777c35574cec404ce7b8d81c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Oct 30 08:33:06 2016 +0000

    igt/gem_ctx_create: Exercise allocating as many contexts as we can
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit bd429cdc082748f1284ad987a867b502e5c8009f
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Mon Oct 31 10:42:25 2016 +0200

    tests: add more debugs on failure to unload snd_hda_intel
    
    List open files under sound devices.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit fb957183105b08f058af331efe9f41ffc4128c6f
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Mon Oct 31 10:33:00 2016 +0200

    tests: do snd_hda_intel unbind before unload in module reload test
    
    Try to make sure the snd_hda_intel module is not in use, and can be
    unloaded.
    
    v2: unbind all cards (Libin)
    
    Cc: Keqiao Zhang <keqiao.zhang@intel.com>
    Cc: Libin Yang <libin.yang@intel.com>
    Reviewed-by: Libin Yang <libin.yang@intel.com>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 5bfbbeab3b739ca5989f93b3d22a37cee5f79c4a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 13 14:59:13 2016 +0100

    intel-ci: CI is missing any wait tests in BAT
    
    Add the two basic gem_wait tests to the fast list, together they take a
    total of 1s (when correctly functioning).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Acked-by: Petri Latvala <petri.latvala@intel.com>

commit 1cecc961cc9c77337a77f7334744cc5d07539b8d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 19 20:24:46 2016 +0100

    igt: drop gem_storedw_loop from BAT
    
    The inter-engine synchronisation (with and without semaphores) is
    equally exercised by gem_sync, so leave gem_storedw_loop out of the
    "quick" set.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Acked-by: Petri Latvala <petri.latvala@intel.com>

commit a8d774bc9b1a95454b287a011b04be09124686af
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Thu Oct 27 10:21:05 2016 +0200

    lib/drmtest: Test for equivalence with DRIVER_ANY
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Fixes: 9921aff583ac ("lib/drmtest: Take DRIVER_ANY into account when opening the DRM device")
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 438c8d7c688780337d271016d84a69aab0474097
Author: Emil Velikov <emil.velikov@collabora.com>
Date:   Wed Oct 26 17:48:39 2016 +0100

    lib: use the local intel_aub.h file
    
    File is provided by the libdrm_intel package which is optional. Since we
    already have a local copy of the file, we might as well use it ;-)
    
    Cc: Brian Starkey <brian.starkey@arm.com>
    Reported-by: Brian Starkey <brian.starkey@arm.com>
    Signed-off-by: Emil Velikov <emil.l.velikov@gmail.com>
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9921aff583acfcde3b79c133faa0644804d67ebc
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Mon Oct 17 10:05:20 2016 +0200

    lib/drmtest: Take DRIVER_ANY into account when opening the DRM device
    
    __drm_open_driver was changed to bail out on VGEM devices unless they
    are explicitly asked for (DRIVER_VGEM). But with that change we lost
    support for DRIVER_ANY.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Fixes: 7ce63894854d ("lib: Support opening vGEM device")
    Cc: Chris Wilson <chris@chris-wilson.co.uk>

commit 37c9be1db3966e1fee87ec3942da25980201ee1b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Oct 24 11:06:00 2016 +0100

    igt/kms_setmode: Test that the vblank interval matches the dotclock
    
    As we allow userspace to set the dotclock, we should try to respect it!
    Userpsace will try to set its frametimings based upon the dotclock, so
    ideally it should match the measured vblank interval.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 128d27a01cce753f19e82844fead910f10ec13b3
Author: Akash Goel <akash.goel@intel.com>
Date:   Tue Oct 25 11:38:22 2016 +0300

    This patch provides a test utility which helps capture GuC firmware logs and
    then dump them to file.
    The logs are pulled from a debugfs file '/sys/kernel/debug/dri/guc_log' and
    by default stored into a file 'guc_log_dump.dat'. The name, including the
    location, of the output file can be changed through a command line argument.
    
    The utility goes into an infinite loop where it waits for the arrival of new
    logs and as soon as new set of logs are produced it captures them in its local
    buffer which is then flushed out to the file on disk.
    Any time when logging needs to be ended, User can stop this utility (CTRL+C).
    
    Before entering into a loop, it first discards whatever logs are present in
    the debugfs file.
    This way User can first launch this utility and then start a workload/activity
    for which GuC firmware logs are to be actually captured and keep running the
    utility for as long as its needed, like once the workload is over this utility
    can be forcefully stopped.
    
    If the logging wasn't enabled on GuC side by the Driver at boot time, utility
    will first enable the logging and later on when it is stopped (CTRL+C) it will
    also pause the logging on GuC side.
    
    v2:
    - Use combination of alarm system call & SIGALRM signal to run the utility
      for required duration. (Tvrtko)
    - Fix inconsistencies, do minor cleanup and refactoring. (Tvrtko)
    
    v3:
    - Fix discrepancy for the output file command line option and update the
      Usage/help string.
    
    v4:
    - Update the exit condition for flusher thread, now will exit only after
      the capture loop is over and not when the flag to stop logging is set.
      This handles a corner case, due to which the dump of last captured buffer
      was getting missed.
    - Add a newline character at the end of assert messages.
    - Avoid the assert for the case, which occurs very rarely, when there are no
      bytes read from the relay file.
    
    Cc: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
    Signed-off-by: Akash Goel <akash.goel@intel.com>
    Reviewed-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com> (v3)

commit 1df15aff40282afc5bdb111550beb218a53f615e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Oct 24 09:35:17 2016 +0100

    igt/kms_flip: Calibrate timestamp errors
    
    We assert that the interval between a vblank and a flip corresponds with
    the computed frametime derived from the modeline. However, historically
    the dotclock is unreliable (in error of about 1%) for VBT supplied data
    about LVDS panels - the situation looks to be much improved with eDP at
    least. The simple fact that we cannot rely on the manufacturer's supplied
    modeline causes us to fail the test. So before we claim a driver failure,
    do a calibration pass and check for inconsistencies with the modeline.
    
    v2: Refine the failure message when skipping
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 364f9eca192de94bd250ba63f0d418d993896ee7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Oct 22 09:30:21 2016 +0100

    igt/kms_setmode: Clear all connectors before starting the test
    
    Before we start trying random combinations of connectors and CRTCs, we
    should first ensure we have a blank slate so that if we only change a
    subset of the CRTC we do not conflict with a residual setup on the other
    CRTC.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 93437cba7fc87755dd27b4acdc021107301fbe8c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Oct 22 10:46:41 2016 +0100

    igt/gem_mmap_gtt: Document the "expected" behaviour
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=9431
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 79de3ddc1564d414a49e5d179fb3bf5577955e8e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 19 11:46:00 2016 +0100

    igt/kms_flip: Print more information to debug for flip timing checks
    
    We have a cantiga that doesn't pass
    igt@kms_flip@basic-flip-vs-wf_vblank, and so knowing why is off the
    upmost priority! Before the assertions print the values we are about to
    test in greater detail.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=98352
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b85e5a90862197b478d4f60cb0778fea71820de2
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Oct 18 10:07:04 2016 +0300

    tests: debug log lsmod on module unload failure
    
    It's a bit verbose, but should only happen on errors. This should help
    debug the snd_hda_intel unload issues.
    
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit c2fb6b80c951ba45012560e0a6e43aa7e169cb2f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 21 12:55:09 2016 +0100

    igt/drv_hangman: Skip format expectations for compressed output
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=98361
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6939e0cbff3cfed4c2afd9ac6936cabeeb022e1a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 21 10:52:47 2016 +0100

    igt/gem_exec_parse: Double check hw validation
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 800aedb69b3aefbbd0576834917c06e1addfe769
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 20 10:02:38 2016 +0100

    igt/drv_hangman: Use manual error-state generation
    
    For the basic error state, we only desire that an error state be created
    following a hang. For that purpose, we do not need a real hang (slow
    6-12s) but can inject one instead (fast <1s).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f7408bfa7a2255080ad70916b6643886c863acc5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 19 23:22:48 2016 +0100

    igt/kms_frontbuffer_tracking: Don't fail if there is no hw overlay
    
    Not all hw or kernels supply an overlay plane, so don't assert it's
    presence and just skip the test instead in its absence.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9261e1d61f81e868a1de820fbd118bfef332c132
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 19 22:57:50 2016 +0100

    igt/gem_exec_flush: Seed a GGTT mappable address
    
    Given aperture fragmentation execution with a fresh object would bind it
    outside of the mappable aperture. On earlier gen, execbuf uses the global
    GTT and so a subsequent pwrite would be move the idle object into the
    mappable aperture, invalidating the existing reloc.presumed_offset - which
    are supposed to be accurate as we pass NORELOC.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=98109
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2c12a7a4ae791c4f88927337a42a218aab76518b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 19 15:30:26 2016 +0100

    igt/gem_tiled_pread_basic: Only print the erroneous location
    
    Emitting a debug message for every pixel tested takes us from 0.4s to 20s
    on an old Core2.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e27626898b87a1602e6af6f7effcacf772ead491
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 19 14:07:25 2016 +0100

    igt: Check the physical swizzle status
    
    The kernel tries to hide L-shaped memory with asymmetric swizzling from
    userspace by reporting lies through the get-tiling interface. Check for
    these lies by comparing the reported swizzle with the actual swizzle,
    and only run swizzling tests where we know the underlying physical
    swizzling.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 27d30707410c4a89480effa75bb6792331ca3342
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 18 12:37:20 2016 +0100

    drmtest: Install exithandler for i915, even in multidriver tests
    
    If we opened the driver multiple times, we would not flush i915 if it
    was opened second. The persistence of one test state into a second can
    upset third parties, e.g. prime_vgem upsetting vgem_basic (due to
    references from i915.ko to vgem.ko preventing module unload).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>

commit f7fe18ad10d228a203588a7427d3681da874f993
Author: Imre Deak <imre.deak@intel.com>
Date:   Fri Oct 14 17:51:14 2016 +0300

    lib/igt_aux: Improve documentation for igt_system_suspend_autoresume()
    
    While at it fix the order of states for consistency.
    
    Suggested by Daniel.
    
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 69b29f87eda6178998254ddf54f005d2bddedd7c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 18 10:23:49 2016 +0100

    igt: Trim timeouts for basic GEM tests
    
    It's a compromise between detecting an unlikely timing error in one
    test and being able to run a broader selection of tests. I hope this is
    wise.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 54f8a3f7cf12eea484a0b0641718ced559959f53
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Oct 15 21:46:47 2016 +0100

    tools/l3_parity: Skip on ivb with only a single slice
    
    The l3_parity tool requires multiple banks and fails on ivb which has no
    l3_parity_slice_1.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=97565
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cd87b4004fbe091e70798337f34152f197deb8da
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 30 21:10:41 2016 +0100

    benchmarks/gem_blt: Directly compare the cmdparser
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit acd5d3d3657b04a47418a95d9301835e6d64c86c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 14 18:32:51 2016 +0100

    lib/sysfs: Use a fallback for builtin modules
    
    A builtin modules does not have a sysfs/device/module symlink, so be
    creative.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7dcf7bf0be339c3e6cfd5b403e624654653b5c63
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Thu Oct 13 12:46:34 2016 +0300

    tests: enable hda dynamic debug for module reload test
    
    Hopefully, this will provide more clues for figuring out why
    snd_hda_intel unload fails sporadically.
    
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit daeb7f45257c4eea91a94b5eb34810441660c42c
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Thu Oct 13 12:31:47 2016 +0300

    tests: add facility to enable/disable hda dynamic debug in script based tests
    
    Test scripts can call hda_dynamic_debug_enable and
    hda_dynamic_debug_disable to enable/disable snd_hda_intel and
    snd_hda_core debug messages. The dynamic debug will be disabled
    automatically at test end by the exit handler.
    
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 790b896898aeacc7c8325ca386599867af6e8fdc
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Thu Oct 13 12:16:20 2016 +0300

    tests: add more checks for finding the debugfs in script based tests
    
    While at it, make debugfs_path point at the debugfs root, not
    dri. This'll be handy in future work.
    
    Reviewed-by: Petri Latvala <petri.latvala@intel.com>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 230df2dc2ac60e30b76612ee6f1429f165323472
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Fri Oct 14 12:52:00 2016 +0300

    tests: prefix IGT kernel log messages with [IGT]
    
    Make the IGT logging stand out better and easier to grep.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 171b21d9f761da5865f66cb55cbb5eb875a41b92
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 13 22:46:47 2016 +0100

    igt/gem_ctx_param: Update invalid parma number
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=97108
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7b349f32babd206a4cffcdc6b056e05c2a2f1ec9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 13 22:44:08 2016 +0100

    igt/gem_ctx_param: Tidy error messages
    
    Avoid macro expansion inside the asserts so that the error messages are
    readable.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit dc27c73c7d0e146944fdb9bf680cd60eed503c99
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 13 16:32:24 2016 +0100

    igt/gem_wait: munmap the batch along all paths
    
    Move the munmap() to the common path to ensure it is released at the end
    of each test.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 764d66832640fbe6ae9d320073bd07c2af4de322
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Oct 12 19:03:49 2016 +0300

    build: Fix assmebler/etc. tools build for 32bit x86
    
    Match the i?86 pattern when looking for an x86 to catch 32bit build
    systems as well.
    
    Cc: Daniel Stone <daniels@collabora.com>
    Cc: Eric Anholt <eric@anholt.net>
    Fixes: bccc0ec6a3fd ("build: Disable x86-specific utilities on non-x86")
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Reviewed-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>

commit bbb950302f7c8405faa9c8018541501ee7bd335f
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Oct 4 18:09:57 2016 +0300

    tests/gem_exec_suspend: Add basic S3/S4-devices subtests
    
    Add a new subtest that performs suspend-to-mem and -disk, but instead of
    doing the full sequence it suspends/resumes only devices. A failed S3/4
    subtest and a successful S3/4-devices subtest would indicate a kernel core
    or BIOS problem as opposed to some issue in the driver.
    
    v2:
    - Add a new basic-S3-devices subtest too. (Chris)
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 022e6f8ae7c853e221eb9d8344cf1aa27c5fbe57
Author: Imre Deak <imre.deak@intel.com>
Date:   Fri Sep 30 17:28:53 2016 +0300

    lib/igt_aux: Add support for various system suspend/resume options
    
    To have a more accurate idea about any suspend/resume issues we can
    perform the s/r until various phases in the s/r sequence. This way we
    can isolate the given problem as being a device driver, kernel core or
    BIOS related issue. Actual subtests using these new s/r phases will be
    added as follow-up.
    
    While at it also add the freeze suspend target, it's something we also
    would need to test.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit e442481c9cf35a1c509b836cf076bae597296200
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 13 11:04:40 2016 +0100

    lib/igt_gt: Use /sys/.../error instead of /debug/.../i915_error_state
    
    The stable path is via sys, but we only have to use this should the
    kernel be ignoring our request to ignore simulated hangs.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 48c028a9477eec84eb67a9469b5b9bf18ebf5a48
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 13 09:29:31 2016 +0100

    igt/gem_exec_big: Secure dispatch is run through the GGTT, limit it such
    
    An interesting complication arises using machines with different
    aperture sizes and special execbuf modes like secure dispatch which uses
    the smaller global aperture. In order to avoid false positives from the
    test, we need to make sure that the secure dispatch is capable of being
    run before submitting.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=88392
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9c2be694164cd654e4e15cdd9f15da7127ad6176
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 12 14:41:46 2016 +0100

    igt/gem_wait: Use explicit timers
    
    Rather than guestimating a workload that should take a certain amount of
    time, use a sigitimer to terminate a batch (and so complete the wait)
    after an exact amount of time. And in the process expand testing to
    cover multiple rings and hangcheck.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d21094516d2e93468b5d24904a334cb48cc2852f
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Wed Oct 12 15:51:23 2016 +0300

    intel-ci: Remove vgem_reload_basic
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit effb78b382895c19d0946c217cee3602dcd94c50
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Wed Oct 12 14:49:17 2016 +0300

    intel-ci: Remove kms_psr_sink_crc@psr_basic from BAT
    
    The test is producing a lot of CI noise.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit cb0624dd60c8014b1ca510ca2b040c4d1c3189fd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 12 12:49:39 2016 +0100

    And remove vgem_reload_basic form Makefile.sources
    
    Reported-by: https://jenkins.freedesktop.org/job/IGT-ARM/210/
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit eb63c574cd2b1cb53ef453ad6610efdd9b8f63d9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 12 12:28:19 2016 +0100

    Remove igt/vgem_reload_basic
    
    This is superseded by vgem_basic/unload
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit dcab15929646c972040269f58609d60778ada11f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 11 11:31:38 2016 +0200

    lib/chipset: Properly skip on non-Intel
    
    Random drive-by I noticed while hacking on piglit.
    
    Acked-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit af3c45d0cede8678796c82eba4191f552eddde59
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Oct 10 11:17:00 2016 +0100

    igt/gem_ctx_thrash: Include with-execlists indicator
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3dfa47c1a996b32869caae98f2909850b2635481
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Oct 10 11:15:22 2016 +0100

    igt/gem_ctx_thrash: Update context size estimates
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e88caecc21119d35c035020756923b6e02503d48
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Oct 10 08:28:39 2016 +0100

    igt/gem_ctx_threads: Repeat threads until timeout
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 48a9e1e1553d37067ea2199e00aa51a356e7fa68
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Oct 6 16:25:51 2016 +0300

    tools/intel_reg: Return SUCCESS after a succesful dump
    
    No reason why 'intel_reg dump' can't declare success after a succesful
    dumping. Spotted after fixing tools_test to use the right tool :)
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit fcc3fa08648398bbfbc859f60445a450f9bf3d12
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Oct 6 16:22:20 2016 +0300

    tests/tools_test: Fix it up for intel_reg
    
    intel_reg_read and intel_reg_dumper are no more. Switch over to intel_reg.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit abeb7237fba2d40783c04e9f9ff1ee9ef44978ed
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Oct 6 16:14:02 2016 +0300

    tests/vgem_reload_basic: Leave breadcrumbs in dmesg
    
    Source drm_lib.sh instead of drm_getopt.sh so that we get the
    "executing", and "exiting" breadcrumbs in dmesg.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 8c545a3668aaa155b106531a7274a33fa40daee7
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Oct 6 13:11:16 2016 +0300

    tests: Leave basic breadcrumbs in dmesg for shell script based tests
    
    Leave the normal "executing" and "exiting" breadcrumbs into dmesg when
    running the test.
    
    v2: s/$1/$@/ (Jani)
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 51b759002436ff3148ab1fc56999760919bfc008
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Oct 6 16:09:45 2016 +0300

    tests: Use bash for debugfs_wedged and drm_lib.sh
    
    debugfs_wedged and drm_lib.sh are already using bashism so switch over
    to using #!/bin/bash instead of #!/bin/sh.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 903076c7df321167b882e125eec4f75ad0830075
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Thu Oct 6 08:58:58 2016 +0300

    tests: Add explicit test lists for CI use.
    
    See tests/intel-ci/README for rationale and explanation.
    
    v2: Use the current BAT set for fast-feedback.testlist first
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>

commit 954923cdf7b416750bd56625454245da8e1143a5
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Oct 6 12:52:53 2016 +0200

    kms_cursor_legacy: Split out the busy crc test.
    
    It's more readable like this, and with the ifs it was a completely
    separate test anyway.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 125e27ef21f80bcd0fdf3b7a7e4326e79b86a07d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 5 17:25:20 2016 +0100

    igt/gem_exec_whisper: Tweaking the global seqno is not multiuser safe
    
    If we want to advance the seqno, we need to coordinate with all possible
    users. The kernel doesn't want to do that for a lowlevel debug feature,
    so it's up to userspace not to shoot itself in the foot.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 18cd796cf6fb5f18c2616a17f0510765b961de13
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 5 19:31:27 2016 +0100

    igt/kms_cursor_legacy: Deduplicate make_busy()
    
    make_busy() already existed!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4ef3fe91ad6106b5e32058a007f925220d0e1321
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Oct 5 15:51:00 2016 +0200

    kms_cursor_legacy: Add cursor update vs busy page flip test.
    
    This is a test for the issue exposed by 97888, we perform a busy
    bo update followed by a cursor update.
    
    The page flip and cursor update should complete without hanging,
    and the new fb should not be flipped yet as a result of the cursor
    update.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 323cc9f6d95ae066cdde3cdd096aa2e4997f421e
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Oct 5 14:17:04 2016 +0200

    Revert "tests/kms_psr_sink_crc: commit before querying mode"
    
    This reverts commit e4a1727efa617e32428c7e7c59abbb08cc97e16f.
    
    This hack should no longer be needed with the previous commit applied.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit d8518f3b7e9dcdd8a77f4e48021afd3c37e24d25
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Oct 5 13:39:29 2016 +0200

    igt_kms: Refresh output when setting pipe.
    
    We still allow duplicates at this point, but when commit is called only
    one output per display is allowed.
    
    This fixes tests like kms_psr_sink_crc, which expect a valid pipe.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 8abe91985b30f8a26cdcb6816d2393956f171ea5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 5 14:40:16 2016 +0100

    igt/vgem_basic: Allow mmap() to persist without the vgem module loaded
    
    Since vgem doesn't have any callbacks from shmemfs to its, we don't need
    to keep the module around to service a pagefault when only using the
    shmemfs facilities. Adjust the test to try to unload and check the mmap
    for access.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d2adbdf8fc6f77ef27ee5f5bb8b0191ed27e05b2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 4 13:50:50 2016 +0100

    igt/kms_cursor_legacy: Check that a busy flip doesn't block the cursor
    
    Suggested-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 37f436e472b5bcb99b217cd6c2e2ea75b3e24798
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Mon Oct 3 12:31:18 2016 +0300

    Update MAINTAINERS file
    
    Add myself, remove Daniel by request.
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>
    Acked-by: Jani Nikula <jani.nikula@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@intel.com>

commit 832dfbc6e9045b016cc8bd42575c6f3c7be0b051
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Mon Oct 3 17:00:01 2016 +0300

    igt/drv_module_reload_basic: let intel_ips removal errors through
    
    Only try removing intel_ips if it's actually loaded, and let the errors
    through to the logs if removal fails.
    
    Reviewed-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 2085e1476e6e9dbe6fe4c67d5aeed26d290f6d54
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Mon Oct 3 17:00:01 2016 +0300

    igt/drv_module_reload_basic: let snd_hda_intel removal errors through
    
    Only try removing snd_hda_intel if it's actually loaded, and let the
    errors through to the logs if removal fails. This is a clue if i915
    removal fails later.
    
    Reviewed-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 8f3cf597e498e147bede782a6d759400092c640e
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Mon Oct 3 16:48:54 2016 +0300

    igt/drv_module_reload_basic: add helper for checking module reloaded
    
    Add a helper for checking whether a module is reloaded, using
    lsmod. Also make the grep stricter than before.
    
    Reviewed-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 1a76d88905995d123ad252087228f6d310c51bdd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Oct 1 16:50:51 2016 +0100

    igt/gem_exec_whisper: Hang injection
    
    Now will even more evilness.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 91d3780aa5a3a2fc742d9f1f6d429e90012b5c4f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 30 17:41:01 2016 +0100

    igt/gem_userptr_blits: Tidy up the debug spam
    
    igt_subtest_group { /* to the request */ }
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=97934

commit 2b5a2615475e902aba91d31a8426516b401c43b4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 30 17:43:30 2016 +0100

    overlay: Silence compiler warning for unused i81x_info
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cfbd09d6a64eea63a935ad72908bbc36be8b6724
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 30 13:41:30 2016 +0100

    igt/vgem: Add a basic test for handling of module unload
    
    We found a bug where a dmabuf did not keep the module alive (and so when
    i915 tried to use it later, it exploded).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1dd7ce8749788a311614fada842016b8683ac6b9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 30 09:08:24 2016 +0100

    benchmarks/gem_blt: Remove () causing integer overflow
    
    In the middle of a line of double calculations is (int * int) and a
    potential overflow.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d16318ade57a75455f2130c1396d100e351e1ecd
Author: Petri Latvala <petri.latvala@intel.com>
Date:   Tue Sep 27 12:22:12 2016 +0300

    lib: Do two writes to /proc/sys/vm/drop_caches again
    
    The drop_caches sysctl has a max value of 4, so writing 7 to it just
    fails. Avoid the earlier two-writes problem by opening the fd twice.
    
    v2: Don't lseek(), open() twice. (Chris)
    
    Signed-off-by: Petri Latvala <petri.latvala@intel.com>

commit 823ee3e4887d7265afddff9aeafa7843566b3167
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Sep 26 13:25:13 2016 +0100

    benchmarks: Add prime_lookup microbenchmark
    
    Just a silly benchmark to stress prime_fd_to_handle and
    prime_handle_to_fd.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a23769cae6310436338a468ce93175d1c02ead1b
Author: Liu Ying <gnuiyl@gmail.com>
Date:   Mon Sep 12 15:11:54 2016 +0800

    kms_atomic: plane_primary: Allow modeset if atomic check returns -EINVAL
    
    Allowing modeset may prevent the test case from failing in case the atomic
    check phase finds the userspace doesn't allow modeset for the commit and
    returns -EINVAL.  A real case is to run the test case on imx-drm which
    requires a full modeset when we change an active plane's configuration,
    e.g., pixel format and stride.
    
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Cc: Marius Vlad <marius.c.vlad@intel.com>
    Cc: Micah Fedke <micah.fedke@collabora.com>
    Cc: Daniel Stone <daniels@collabora.com>
    Signed-off-by: Liu Ying <gnuiyl@gmail.com>

commit b7096c690142474647d79071d0c3c978bed69a29
Author: Liu Ying <gnuiyl@gmail.com>
Date:   Mon Sep 12 15:11:53 2016 +0800

    kms_atomic: Expose atomic commit flags to crtc_commit_atomic()
    
    This patch exposes atomic commit flags to crtc_commit_atomic()
    so that users of the macro may control the flags.
    
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Cc: Marius Vlad <marius.c.vlad@intel.com>
    Cc: Micah Fedke <micah.fedke@collabora.com>
    Cc: Daniel Stone <daniels@collabora.com>
    Signed-off-by: Liu Ying <gnuiyl@gmail.com>

commit 8e4ce75542a958ed62dcc5f1f80d92767e0187c8
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Sep 12 13:34:53 2016 +0300

    tools/intel_bios_reader: Dump PSR block from VBT
    
    Decode the PSR block (9) from VBT. Looks like the same block ID may have
    been used for something else in the past, so a version check is also
    needed.
    
    The wakeup times part is still up in the air due to the spec not knowing
    what it's saying, but let's do something that makes at least some sense
    given the VBTs currently out there in the wild.
    
    v2: Actually dump out tp2/3 wakeup time
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 94ca170e9e6943931261398b9987a7101565125f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Sep 26 09:23:42 2016 +0100

    igt/gem_concurrent_blit: Only set the pixels to be compared (GTT paths)
    
    Just to tidy a discrepancy where doing the compare using the GTT (i.e. a
    readback) is now faster than setting the contents initially (as the
    readback only checks one pixel per page, do the same for setting the
    object).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 32b20211adf231b41dd5af8efc561bcf7d960da6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Sep 25 09:11:21 2016 +0100

    benchmarks: Add some missing .gitignore binaries
    
    benchmarks/ doesn't have the same automagic .gitignore so add the
    missing ones.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c7f6ecc258b3787bb428f0f7e3a0e3a34ac9f46f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Sep 25 09:09:02 2016 +0100

    igt/gem_concurrent_blit: Limit number of reads for dmabufs
    
    vgem provides WC mmap on its dmabufs, so reading and comparing these is
    slow. We can employ a similar w/a to the other WC mmaps (i.e. mmap__gtt
    or mmap__wc) and only check one pixel per page. This will speed up those
    tests, but I don't know if it makes detecting coherency issues more or
    less likely. :|
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit bca3ab2275283a3fc28f6129700d1c7b32e57312
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 23 07:39:57 2016 +0100

    igt/gem_concurrent_all: Leave bufmgr destroyed before forking
    
    Otherwise we inherit the bufmgr and fd across the fork, try to clean it
    up in the child (affecting the parent's device), then try to clean it up
    in the parent (triggering warns).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8ad24eeacb56dbbe1948c41250d03cfcd7383ca8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Sep 21 12:48:14 2016 +0100

    igt/prime_vgem: Initialise pfd for both parent/child
    
    commit 4337091f6af6 moved the initialisation of the pollfd into the
    child, forgetting that it was also used in the parent as a sanity check.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=97885
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 75cba294ae78743df9f563aa08b9f2997955a856
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Mon Sep 19 18:38:56 2016 +0300

    lib/igt_core: Print stacktrace in initialization/fixture blocks.
    
    Likely candidate for this behaviour is the igt_fixture block. Seen in the CI by
    running tests/kms_psr_sink_crc which is causing segfaults in the fixture block.
    
    While at it fix some minor printing bugs.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>
    CC: Chris Wilson <chris@chris-wilson.co.uk>

commit 89e3a94f1ddf8123c3423606df566572164e9271
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Sep 20 11:30:33 2016 +0100

    lib: Add igt_primes.h to SOURCES
    
    Not as automagic as kbuild :(
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e4a1727efa617e32428c7e7c59abbb08cc97e16f
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Thu Aug 11 12:05:12 2016 +0300

    tests/kms_psr_sink_crc: commit before querying mode
    
    Commit to a mode before querying it.
    
    Tested-by: Rodrigo Vivi <rodrigo.vivi@intel.com>
    References: https://bugs.freedesktop.org/show_bug.cgi?id=97172
    Cc: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 9690d0aeedff96ebf761252966aa19471ac93bc1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 6 21:50:12 2016 +0100

    lib: Add support for DROP_FREED in igt_drop_caches_set()
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 200237acac00f24730b0c5b4362936b6c510b0ed
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Wed Jun 29 13:06:17 2016 +0300

    tools/intel_reg: add kabylake register spec file
    
    Just do whatever skylake does.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 5cbb714fbf3669f23a8238ada8b45b584961566b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 16 11:43:30 2016 +0100

    lib: Export igt_debugfs_mount()
    
    Not everything we want from debugfs is under debugfs/dri. But we do want
    to share the code to find the debugfs mount point (and mount it if is
    not found).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c79f47310e835ee031c1e8e50db1697c45113347
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 16 11:17:52 2016 +0100

    lib: Add an iterator to generate primes
    
    Primes are useful as input sources since they should not fall into any
    patterns that may be optimised by the drivers.
    
    An example of use this in a test driver:
    
            uint32_t seqno, inc, count;
    
            seqno = inc = count = 0;
            do {
                    inc = igt_next_prime_number(inc);
                    if (seqno + inc < seqno)
                            break;
                    seqno += inc;
                    /* igt_assert_eq(test_inc(inc), seqno); */
                    count++;
            } while (1);
            printf("count=%u, seqno=%u, last=%u\n", count, seqno, inc);
    
    and prints "count=27878, seqno=4294845817, last=323381", or for simply
    generating the set of the first N prime numbers, use
    
            for_each_prime_number(prime, 100)
                    printf("%lu ", prime);
    
    which prints
    
    1 2 3 5 7 11 13 17 19 23 29 31 37 41 43 47 53 59 61 64 67 71 73 79 83 89
    97 101 103 107 109 113 127 131 137 139 149 151 157 163 167 173 179 181
    191 193 197 199 211 223 227 229 233 239 241 251 257 263 269 271 277 281
    283 293 307 311 313 317 331 337 347 349 353 359 367 373 379 383 389 397
    401 409 419 421 431 433 439 443 449 457 461 463 467 479 487 491 499 503
    509 521
    
    Note that 1 is included in the set of prime numbers for convenience
    above. Mathematicians beware!
    
    The set of primes is computed using the Sieve of Eratosthenes, which
    basically just keeps a list of all multiples - any number not in list is
    therefore prime. As a bitmask of all integers is kept, it can be quite
    memory intensive for very large primes. A fallback to "trial division"
    is available just in case, but for large primes that is much slower.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 53b52f4bc8fc544346053fd6986e4b3851fd96d4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Sep 14 22:14:22 2016 +0100

    lib/kms: Probe connectors from igt_enable_connectors()
    
    This fixes a failure when running kms_flip after booting on a bare
    system as nothing will have probed the connectors before hand.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 237cb8913c9741719ca902fd281a0bcf4fa2069f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Sep 13 11:37:41 2016 +0100

    igt/kms_cursor_legacy: Reduce flip/cursor ordering to basics
    
    The essence of the basic test is that neither the cursor nor the
    nonblocking flip stall the application of the next.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0a1fc45e862d4d5e4e9cba2b5c600588327f8f02
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Sep 13 11:13:14 2016 +0100

    igt/gem_busy: Prevent banning when running multiple hang tests
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c947bfe563fe16bcad8b7b53b98e32de5aa0d7a6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Sep 13 10:43:04 2016 +0100

    igt/gem_busy: Actually flag the hang tests to cause a GPU hang
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3e585fe1651c2f2b3f3ef89ccc5c91a25e1450e9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Sep 13 10:15:00 2016 +0100

    igt/gem_busy: Replace extended busy-ioctl testing in bat with simpler tests
    
    And replace with basic testing that rendering first is detected as being
    busy, and then will automatically retire.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 587753b38b93c04c551732636ae7093aa9df84b0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Sep 12 16:06:48 2016 +0100

    igt/gem_exec_whisper: Add competing child processes
    
    Execute the test in parallel in order to exercise a failure condition in
    reordering requests.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f565b6c797d1213e66ec62f0bac230f6e8273825
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 8 20:59:55 2016 +0100

    igt/gem_exec_nop: Show more timing details
    
    Min, average, exclude the post-exec sync time.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5c81016cd250babd4e2a764af9fde8c83a320357
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 8 19:06:54 2016 +0100

    igt/gem_exec_latency: Initial sketch for measuring execbuf cost in GPU cycles
    
    Similar to benchmarks/gem_latency, but looking more at the dispatch cost
    rather than wakeup cost, and looking for inter-engine costs. Still
    probably better as a perf test.
    
    ivb over the years:
    
    IGT-Version: 1.16-gebee919 (x86_64) (Linux: 3.10-3-amd64 x86_64)
    render: dispatch latency: 50.90, execution latency: 57.29 (target 4.64)
    bsd: dispatch latency: 41.45, execution latency: 41.43 (target 4.75)
    blt: dispatch latency: 41.02, execution latency: 41.00 (target 4.99)
    
    IGT-Version: 1.16-gebee919 (x86_64) (Linux: 4.8.0-rc5+ x86_64)
    render: dispatch latency: 12.61, execution latency: 15.44 (target 1.71)
    bsd: dispatch latency: 12.08, execution latency: 12.07 (target 1.80)
    blt: dispatch latency: 12.59, execution latency: 12.58 (target 1.85)
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8bde63fe23587194667f39e27ea92f9f046fb0db
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 8 15:34:09 2016 +0100

    igt/gem_ctx_switch: Increase execution weight
    
    Add a heavier batch of (1M nops) in order to stress a context switch
    onto a busy engine. (The immediate goal is try and fill the GuC
    workqueue, but it seems like the lightweight test was enough anyway, as
    well as gem_exec_nop.)
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 61b19a4b8f68d4cf82382f7776c740311b9d0be0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 8 14:50:32 2016 +0100

    igt/gem_exec_nop: Refine the target calculation
    
    The ideal execution time cannot be faster than the fastest ring! If all
    other rings were infinitely fast, the seed would be max/nengine. Given
    each is finite, this puts a floor on the ideal execution time.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4cce7155c09dbd6c262dc0251dacc99ff3267be7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 8 13:43:17 2016 +0100

    igt/gem_exec_nop: Check submitting nops to each engine in parallel
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a0eebbddecaac3b11eca09b1d37e2c0b7be37d04
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 8 13:29:31 2016 +0100

    igt/gem_exec_nop: Relax assertion for parallel execution
    
    In an ideal world, we should be able to execute on every engine in
    parallel and the single limiting factor would be how fast the GPU can
    execute. Due to the serialisation in execbuf, we would lockstep with
    execution to the slowest engine and so would execute the same number of
    cycles on each. However in CI, we are limited by how fast the driver is,
    particularly under invasive debugging. This makes asserting that the
    average time == max/nengine impossible, and reveals that the assertion is
    impossible to meet under general condition. It's an impractical
    regression test. Therefore we relax the assertion to only detect should
    something critically fail. Worst case behaviour is presumed that each
    ring runs sequentially, and so running N rings in parallel should take no
    longer than running N rings serially. (Pathologically it can be even
    slower if no batching on the rings occur).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6ae6aaf2e96e0de89f9bcb125dbc5f6410e884b7
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Sep 8 12:19:35 2016 +0200

    kms_properties: Invalid atomic properties should return -ENOENT
    
    This was already tested by kms_atomic when passing object id's as
    properties to set.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 4fb21789eb0f04a61033c85d2888db0e904716c2
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Sep 7 17:00:39 2016 +0200

    kms_cursor_legacy: Add cursor crc tests.
    
    On skylake there's a add_all_affected_planes call that will make
    atomic commit use the old cursor state. Add a test that first does
    a page flip then cursor update to expose the issue. The test currently
    fails on the vblank wait, but that's a common issue affecting all the
    tests.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit e4d74f2981a8a48f31674ea51b5b58287ce01c13
Author: marius vlad <marius.c.vlad@intel.com>
Date:   Wed Sep 7 12:59:45 2016 +0300

    demo/Makefile.source: Compile intel_sprite_on when HAVE_LIBDRM_INTEL.
    
    Introduced with commit cd86866dec.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>
    Reviewed-by: Robert Foss <robert.foss@collabora.com>

commit 367d418e74295c07e13e5b84b319379cd404594e
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Tue Sep 6 15:55:41 2016 +0100

    benchmarks/gem_busy: Fix compile error
    
    The benchmark was failing with:
    gem_busy.c:158:8: error: implicit declaration of function 'intel_gen'
    is invalid in C99 [-Werror,-Wimplicit-function-declaration]
    gen = intel_gen(intel_get_drm_devid(fd));
    
    The root cause was due to the local lib directory not being specified
    in benchmarks/Android.mk, resulting in intel_chipset.h from drm being
    used instead.
    
    This patch adds the lib path to the LOCAL_C_INCLUDES
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 38302c25fd8d6130a5d17e7047395283b007c54e
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Sep 7 10:47:40 2016 +0200

    kms_properties: Add invalid property test.
    
    This will attempt to set any property from any type to each mode object,
    to ensure that only enumerated properties can ever set to a mode object.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 6bd4208cc4a47271d83b36a43d434a8f7fcf8ecb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Sep 4 20:00:09 2016 +0100

    benchmarks/gem_busy: Merge all the sync_file fences together
    
    Instead of causing each engine to execute serially (and so only testing
    on fence underneath the sync_file) merge them all together (as we do for
    the other interfaces).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f92e47f4014ac5e9b115bf43ad40fde5182ad636
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 2 17:25:55 2016 +0100

    benchmarks/gem_latency: Measure fence wakeup latencies
    
    Useful for comparing the cost of explict fences versus implicit.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a28e9e38a9efc6daf5a08d60d29adcd3e328fe6f
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Fri Sep 2 17:27:08 2016 +0300

    Updated NEWS, and bumped version to 1.16.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 8da2b548bd7b18a2e11ed6d722f01c4c8887dfe9
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Fri Sep 2 14:34:46 2016 +0300

    lib/igt_core: Wrap print_backtrace_sig_safe() with HAVE_LIBUNWIND.
    
    Reported-by: Petri Latvala <petri.latvala@intel.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit c1d427b0d764c919a34fe0b2249d941649e31216
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 1 21:26:29 2016 +0100

    igt/pm_rps: Remove reliance on guessing the busy workload
    
    Create an unbounded batch in order to ensure that the workload doesn't
    disappear before the wait and so we should be given the RPS waitboost.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=97564
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 768f6cc854f5d04a067c8c64297563655b8e54f9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 1 20:41:11 2016 +0100

    igt/gem_ctx_bad_exec: Begone invalid negative test
    
    Stop looking for an error for a valid combination.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=97562
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 652ad3e549810f32b39f24b13023a050667e738a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 1 13:57:31 2016 +0100

    igt/prime_vgem: Simplify inter-process flip checks
    
    Avoid having both the child and parent do the same "did the flip"
    happen check with each looking for the same event on the same fd. The
    problem being that the child may fall asleep and by the time it wakes up
    to do its check, the parent has already eaten the event. So leave the
    checking that the flip does occur to the parent.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 225a88bb6bc1fa826b880ddc8ab257e3a76a82e9
Author: marius vlad <marius.c.vlad@intel.com>
Date:   Wed Aug 24 11:42:17 2016 +0300

    tests/Makefile.am: Add -Wno-unused-result to tests
    
    Removes useless warnings if a caller of a function
    does not use its returned value(s). Mostly aesthetic.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>
    CC: Chris Wilson <chris@chris-wilson.co.uk>
    CC: Daniel Vetter <daniel@ffwll.ch>

commit 1ae41a505ff8dc62e03a7638daad2f5cca5dd104
Author: marius vlad <marius.c.vlad@intel.com>
Date:   Wed Aug 24 11:44:07 2016 +0300

    lib/igt_core: Print stacktrace when receiving one of the crash signals.
    
    While at it add SIGFPE as a crash signal.
    
    v3: Remove calls to igt_assert_eq() as these are not async-safe. As one
    user of this method remove the function pointer and recursive call.
    (Chris Wilson)
    v2: Added some helpers to avoid printf() inside a signal handler.
    (Chris Wilson)
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit c538c2c637b763c63d694f095f01c07ff67aa18c
Author: marius vlad <marius.c.vlad@intel.com>
Date:   Sat Aug 20 18:32:01 2016 +0300

    lib/intel_chipset: Fix compilation when enabling the debugger.
    
    Add IS_SANDYBRIDGE() macro used by debugger/eudb.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>
    CC: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 75e7a3a8d255a4b925e24939e771af3e7cdf15dc
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Wed Aug 31 19:59:02 2016 +0300

    autotools/: Allow check target to be invoked w/o the need to issue a build.
    
    We need to have the test list generated before running the check target.
    Migrated igt_command_line.sh to tests/ from lib/tests/, which allows to
    building the tests and execute the script.
    
    This would allow cleaning followed by a make check.
    
    Also assembler/ directory needs also to be adjusted in order for this
    to work.
    
    Kept the possibility to invoke tests/igt_command_line.sh to determine
    which test is failing.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>
    Url: https://patchwork.freedesktop.org/series/6539/
    Reviewed-By: Chris Wilson <chris@chris-wilson.co.uk>

commit 7213c3e09621d9708a87d26cda4b1b71fe73d206
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Aug 24 09:24:33 2016 +0100

    lib: Make igt_command_line.sh selftest standalone
    
    Allow the casual user to run igt_command_line.sh to discover what make
    check is complaining about.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit db97b69c5c134be35177c8d1fd502ca90d5f304a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 30 14:35:36 2016 +0100

    prime_vgem: Fix fence flipping
    
    On the move to doing front/back flips, I managed to completely break the
    test by forgetting to pass the fence to be signaled.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 96e1eacc0402e6d03fa6ec9f7b48ff2f53241222
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Aug 29 19:16:41 2016 +0100

    benchmarks/gem_busy: Measure polling of sync_file
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a063199626fa53361146130c0fd1cdfb2adf1320
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Aug 29 17:17:49 2016 +0100

    lib: Avoid using 2 writes to /proc/sys/vm/drop_caches
    
    As the second write is ignored (leading to lack of memory freeing and
    spuriously failing tests), just do everything from the one write.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 572a770f997cae6c3bcb76577e6eac61baa0afa3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Aug 28 20:43:41 2016 +0100

    benchmarks/gem_busy: Compare using wait-ioctl for busyness check
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 93b8ad80f2691ae15dea78401db2b32d8cef7354
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Aug 28 16:45:22 2016 +0100

    benchmarks/gem_busy: Exercise the busy ioctl
    
    And include poll(dmabuf) for comparison.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9d5e393da3f58c4d7bbdb61c96b01416e043836f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 26 20:48:08 2016 +0100

    igt/kms_flip: There's no such thing as bo-too-big
    
    Since we can now use the entire global GTT for display, we can handle
    framebuffers that no longer fit into the mappable aperture. Update the
    kms_flip/bo-too-big expectations.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=97502
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c1e0e30a4ad0658b159d2e7fc605ad4925edfcb0
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Aug 25 09:14:49 2016 +0200

    tests: Add kms_properties test.
    
    This is a simple test that only tries to set the current property
    values back.
    
    It exposes the issue that some connector properties only work when
    set through the legacy path, because i915 doesn't handle atomic
    connector properties yet. The other way around is true too:
    The atomic CRTC_ID connector property cannot be set through legacy
    means yet. This causes the connector tests to fail on i915.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit e511fab23723b66844a010101d6ed08a29698a23
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Aug 25 09:08:34 2016 +0200

    igt_kms: Populate more members of connectors.
    
    It's possible to make use of disconnected connectors, for example
    when overriding the mode or testing connector properties that don't
    need it to be connected. Support this by zeroing the mode in that
    case. We still return false, but this is ignored by commit.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 3a3c0fa74ed40d544f16d4c32b9db0081fbf02ce
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Aug 24 14:55:25 2016 +0100

    igt/kms_cursor_legacy: Reduce scope of basic-cursor-vs-flip
    
    Since we are experiencing too much noise in BAT from what just looks
    like scheduling delays in inspecting the vblank, reduce the basic test
    to the fundamentla: check that the cursor ioctl following the nonblocking
    flip/modeset occurs within the same vblank. Hopefully, CI + debug builds
    are fast enough to do get-vblank; flip; cursor; get-vblank within a
    single vblank period.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Imre Deak <imre.deak@intel.com>
    Cc: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 65a9987c41defb084561a35988aacab89931187c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Aug 24 09:16:31 2016 +0100

    igt/kms_busy: Fix subtest enumeration
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1105d9f8d64cc41e48a6d7316807548f4fa4e9ad
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 23 18:03:51 2016 +0100

    igt/kms_cursor_legacy: Add missing newline
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1b17be55af26e05784b923eab0d91532c8c06a6a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 23 11:27:45 2016 +0100

    lib/kms: Force connector probing on first use
    
    In order for igt to run completely standalone, it must coldplug
    connectors on first use by forcing the probe.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 76541f49100ef66df19a07fed726ffc56fd18e70
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 23 16:51:38 2016 +0100

    Revert "tests/gem_sync: Skip basic-store-each sub-test on BDW."
    
    This reverts commit 38f84e30e699451cac6c7b45cd603e67b1287f15.

commit a688634959c0fc7cbe8be8b478ea9d13c72f4650
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 23 14:03:01 2016 +0100

    igt/prime_vgem: Test both front/back flip
    
    Check that we neither stall nor flip too early given active front/back
    buffers.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4337091f6af6f7880783ee95eedc7e2f1c6d386c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 23 13:17:23 2016 +0100

    igt/prime_vgem: Detect when the call to pageflip blocks
    
    Identify whether it is the nonblockling page-flip request that blocks or
    the event is fired too early.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2e190c323f3bca511f4f03cda6d71b015f21d29b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 23 13:08:39 2016 +0100

    igt/prime_vgem: Perform connector probe on startup
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit fb292f458ec0bc73fa2ba870b4e8a2260b9218d6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 23 09:33:19 2016 +0100

    Split out the kms tests from gem_busy to avoid the cairo dependency
    
    Make kms_busy a separate set of tests so that gem_busy is kept within
    the core set and not thrown out from Android due to the cairo dependency
    of rendering the fb.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f749a2d6881d44f5580349cfb6821b3a68aae135
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Aug 22 19:18:37 2016 +0100

    igt/gem_busy: Test flipping on a still active buffer
    
    Flips should wait until all rendering is complete to a framebuffer
    before applying.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cb42b0d0789f86a214b821bc171979e082952649
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Aug 22 15:59:05 2016 +0100

    Revert "tests/prime_vgem: Remove BAT sub-tests that cause intermittent fails."
    
    This reverts commit 5188745c4b531d09508cf0897fb90a3634299283.

commit b5ac73a85c92ac647fce0cbc151a210477e2cd68
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Aug 22 11:47:51 2016 +0200

    kms_atomic_transition: Add modeset tests for all plane combinations.
    
    With the new patch series by Lyude for fixing SKL watermarks it was
    shown that watermarks for disabled planes may not be updated
    correctly on modeset. Ensure that this is tested by doing a test
    similar to plane-all-transition, but with modesets!
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit b0658ce76557d4ce00be7252aa60d1b59d8980f6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 19 12:36:51 2016 +0100

    igt/gem_ppgtt: Remember to flush operations before assertion
    
    We have to flush any queued operations before making an assertion such
    as the VMA being removed from the ppgtt.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d28050605d0d8a4757c2ab3239a50de4f4557241
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 18 13:56:18 2016 +0100

    lib: Preallocate framebuffers
    
    So for reasons unfathomable CRC appear to be miscalculated when the
    plane is not in the mappable aperture. Worrisome, but for now
    preallocate space in the mappable region for the new framebuffer and
    design some specific tests to explore the issue further.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 39b019dda75b069273ec00689667344627de97c0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Aug 17 14:33:45 2016 +0100

    igt/gem_exec_big: Check walking backwards through the obj
    
    Test slightly less predictable access to the relocation buffer.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 013942478838137988e82e5c17970b64a4344409
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Jul 25 16:05:58 2016 -0700

    vc4: Add a test for BO lookup failure error path.
    
    Causes an oops in the current kernel.
    
    Signed-off-by: Eric Anholt <eric@anholt.net>

commit a147ef2634b2453db914012eaeafed00cb5ea790
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Aug 10 16:44:21 2016 +0200

    kms_atomic_transition: Add nonblocking tests for plane transitions
    
    There is a potential race between place transitions and nonblocking
    modesets, so try nonblocking tests for those too.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 58f8b19cbffe290fec19efdf2ab61693693b2b64
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Aug 10 13:13:43 2016 +0200

    kms_atomic_transition: Add modeset tests too.
    
    Try a series of tests in which we try to enable any combination of
    crtc enabled.
    
    {1,2,3}x-modeset-transitions will run any combination of enabled
    crtc's to and from the number being tested. Any lower amount is
    skipped.
    
    Extra -nonblocking tests are added, which perform the same modeset
    tests with nonblocking commit.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit aaf46cb1d16fc5babd60e0a5eaf392304c506d26
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Aug 10 13:13:19 2016 +0200

    kms_cursor_legacy: Try vrefresh amount of flips in cursor-vs-flip
    
    When vrefresh is 30 the tests run for twice as long, set it to
    vrefresh to make the tests just as long anywhere
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit dba966770d331ca5399fb4da7a50be0765138a7e
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Aug 1 14:44:17 2016 +0200

    kms_cursor_legacy: Add tests for nonblocking modesets vs legacy cursor
    
    This probably won't pass by design on platforms that need to reallocate
    global resources like watermarks on gen9+, but it's a good test anyway.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 235da38eee8ca585f3a0e585ec1dd52fbc110ad5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Aug 10 14:34:21 2016 +0100

    intel_error_decode: Skip inflation for uncompressed ascii85 streams
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ddb1995cf73e7daac8abee1305944460c0da636a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Aug 10 14:49:10 2016 +0100

    intel_error_decode: Fix build
    
    Fixes f984bc7de204 ("tools/Makefile: Don't build tools that depend on
    libdrm_intel")
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 904aa908b0afb7fedad9c8349474277066e2130d
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Thu Aug 4 15:37:23 2016 +0100

    gem_largeobject: Fix for clang compiler
    
    The clang compiler generates a build error for binaries with >128MB
    data segments because "The gap between stack and binary is only
    guarenteed to be 128MB on x86_64"
    
    Simple solution is to allocate the required memory from the heap.
    
    [v2: moved malloc to after skip_on_simulation]
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 48df4f23b3066d546c271997490f6e3acea70c02
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 9 19:01:05 2016 +0100

    igt/gem_busy: Stress test gem_busy() vs gem_close()
    
    When doing lockless lookups using gem_busy(), one of the largest
    complications is ensuring that the bo doesn't disappear as we read it.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9afd5458a40427996067460dfcc605a9cf5086a3
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Aug 5 13:36:42 2016 +0300

    lib: Fix typo  s/huma-readable/human-readable/
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit f712671e0b6860924c9cca54293e01402511d2ef
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Aug 5 10:12:46 2016 +0300

    tools/intel_reg: Dump DP_BUFTRANS registers on ILK-IVB
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 40a052dc5db105cac936cc8cd9022713894c3d9a
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Aug 5 11:26:20 2016 +0300

    tools/intel_reg: Dump fence registers on ILK
    
    Currently ILK doesn't get its fences dumped. Let's fix that.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit ed29d030bde3d8db592990e9fc87a8c9e29fc829
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Aug 5 11:20:35 2016 +0300

    tools/intel_reg: Don't reuse stale decoded results for later registers
    
    In case the ->debug_output() function skips decoding the register it
    just returns, which means the caller will reuse whatever it already has
    in the tmp buffer as the decoded result for this result. What it usually
    has in there is the decoded result of some previous register.
    
    Showing incorrect decoded results is no good, so let's allow
    ->debug_output() to actually return how many bytes it wrote, and the
    caller can then skip showing the decoded results if zero bytes
    were produced.
    
    We'll make a variant of snprintf() that's safe to call without having to
    check the return value for the case when it didn't have enough space to
    do its work, that is, make it return 0 in case no bytes were written.
    
    v2: Document the _DEBUGSTRING() funcion (Jani)
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Reviewed-by: Jani Nikula <jani.nikula@intel.com>

commit 4c5ed71fa7439bea4121f229a18b897fe0715f5c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 5 13:32:26 2016 +0100

    igt/drv_missed_irq: Clear pending IRQs before testing
    
    Upon starting, the IIR may contain stale user interrupts which then
    trigger a wakeup when another interrupt occurs (e.g. execlists context
    switch). This spurious wakeup causes the waiter to unstick and proceed -
    preventing the missed interupt test from suceeeding.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 37657f5251f0f08d4e06618834be52480b2455f5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 5 12:28:44 2016 +0100

    igt/drv_missed_irq: Coordinate child/parent
    
    In the child, make sure the parent is about to sleep before allowing the
    GPU to complete. In theory, we are created as an inferior process on the
    same CPU and the scheduler shouldn't be executing the child before the
    parent, but seems to anyway.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b9e2db934b262fe541e4800854f320bce59b34de
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 5 09:37:00 2016 +0100

    igt/gem_madvise: Quick fixup of expectation around mmap()
    
    We don't do any santiy checking at the point of crating the mmap(), that
    is deferred until the pointer is actually dereferenced (as the state of
    the object may well change between mmap and pagefault).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit db636a7a392aa657de89bdc7ea9a15f56596751c
Author: Matt Roper <matthew.d.roper@intel.com>
Date:   Wed Aug 3 09:15:41 2016 -0700

    igt_kms: Use proper panning coordinates for legacy primary plane updates
    
    A copy/paste error resulted in us using src_x for both the x and y
    panning coordinates; make sure we use src_y instead for the appropriate
    parameter.
    
    Fixes: 0e29ce3265b ("igt_kms: Remove pan members from igt_plane, v2.")
    Cc: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
    Reviewed-by: Bob Paauwe <bob.j.paauwe@intel.com>

commit f8ec780c4def36acb82db7d7010b97221e3d3eef
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 4 20:39:38 2016 +0100

    Revert "tests/prime_busy: Remove unstable sub-test from BAT/add flag to bring them back when they're stable to be run in CI."
    
    This reverts commit 860b3c14f9e98face626e6ca025daf22844dd156.

commit cb5d6033a0fd5f45c6e32584ab2d8eed08e6386b
Author: Peter Antoine <peter.antoine@intel.com>
Date:   Thu Aug 4 14:39:26 2016 +0100

    igt/gem_mocs_settings: adding RC6 tests
    
    This change adds a RC6 test for the MOCS. The MOCS registers are loaded
    and saved as part of the RC6 cycle but not all the registers are
    saved/restored. This tests that those registers are correctly restored.
    
    Signed-off-by: Peter Antoine <peter.antoine@intel.com>

commit 0dbff43cf683ccfb4603078c67273b10a6f16591
Author: Peter Antoine <peter.antoine@intel.com>
Date:   Thu Aug 4 14:39:25 2016 +0100

    igt/gem_mocs_settings: Remove direct register tests
    
    On some platforms the MOCS values are not always saved and restored
    on RC6 enter/exit. The rational is that the context with restore
    these values. On these platforms the test will fail as it tests the
    values by directly reading the MOCS registers.
    
    So this change removes the direct testing of the values.
    
    Signed-off-by: Peter Antoine <peter.antoine@intel.com>

commit 48754ccdb4170b2dfdd45e243f98e04695270dc1
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Jul 27 13:17:47 2016 -0400

    lib/Makefile: Replace automake specific names of listings in Makefile.sources
    
    Replace the automake specific variable names for listings in Makefile.sources
    with something not automake specific.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Emil Velikov <emil.velikov@collabora.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e2e57eeda187f211ddad07e45e0fca6404edc5dd
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Jul 27 13:17:46 2016 -0400

    lib/tests/Makefile: Replace automake specific names of listings in Makefile.sources
    
    Replace the automake specific names of listings with something that isn't
    automake specific.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Emil Velikov <emil.velikov@collabora.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 21d0193dc6d68ea003ffcd1a81c0080a032fa84c
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Jul 27 13:17:45 2016 -0400

    tools/Makefile: Replace automake specific name of listings in Makfile.sources
    
    Replace the automake specific names of listings in Makefile.sources with
    something not automake specific.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Emil Velikov <emil.velikov@collabora.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0c15c7f515f7581c22b413f6b3818fe0453b14db
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Jul 27 13:17:44 2016 -0400

    benchmarks/Makefile: Replace automake specific name of listing in Makfile.sources
    
    Replace the automake specific name of listings in Makefile.sources
    with something not automake specific.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Emil Velikov <emil.velikov@collabora.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit dc99604fdca78f324af086cce29c1bd25a2addf2
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Jul 27 13:17:43 2016 -0400

    demos/Makefile: Replace automake specific name of listing in Makfile.sources
    
    Replace the automake specific name of listings in Makefile.sources
    with something not automake specific.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Emil Velikov <emil.velikov@collabora.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6e89ee8f20fddc6621eb5326ae3b7a75faa749b9
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Jul 27 13:17:42 2016 -0400

    lib/stubs: Add stubs for intel_bufmgr
    
    This patch provides stubs for functionality otherwise provided by intel_bufmgr.
    
    The stubbed functions all fail with a call to igt_require_f(false,"").
    Defines and enums have been copied from libdrm_intel.
    
    Due to the stubbed tests failing with an igt_require_f() call, these stubs are
    not well suited for non-tests, since tools/benchmarks/etc 'skipping'
    execution is unhelpful.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Emil Velikov <emil.velikov@collabora.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cd86866dec7ead650a1811259d9207060034482f
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Jul 27 13:17:41 2016 -0400

    demos/Makefile: Don't build tools that depend on libdrm_intel
    
    Use the HAS_INTEL automake flag to avoid building tools that won't
    compile unless libdrm_intel is available in the build system.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Emil Velikov <emil.velikov@collabora.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b8084d2ab3b9114bbdc8bca48bae1db563b7998a
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Jul 27 13:17:40 2016 -0400

    tools/Makefile: Format whitespace
    
    Harmonize tabs/spaces etc.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Emil Velikov <emil.velikov@collabora.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f984bc7de204aa029a59e89faa90b32b3fc6d5e1
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Jul 27 13:17:39 2016 -0400

    tools/Makefile: Don't build tools that depend on libdrm_intel
    
    Use the HAS_INTEL automake flag to avoid building tools that won't
    compile unless libdrm_intel is available in the build system.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Emil Velikov <emil.velikov@collabora.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f6b9f961aaca1a255e833564a7d50a079d9e51b2
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Jul 27 13:17:38 2016 -0400

    benchmarks/Makefile: Don't build benchmarks that depend on libdrm_intel
    
    Use the HAS_INTEL automake flag to avoid building benchmarks that won't
    compile unless libdrm_intel is available in the build system.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Emil Velikov <emil.velikov@collabora.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8680b48ac85abacb9114a9cd98c72cb47f750e89
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Jul 27 13:17:37 2016 -0400

    Enable HAVE_LIBDRM_INTEL unconditionally for Android
    
    Always set HAVE_LIBDRM_INTEL to true for Android targets.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Emil Velikov <emil.velikov@collabora.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5bde1483346503fbb858ea04b0f48a00630f3041
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Jul 27 13:17:36 2016 -0400

    configure.ac: Harmonize HAVE_XXX flag for all drm platforms to HAVE_LIBDRM_XXX
    
    Replace the automake flag HAVE_XXX for VC4/NOUVEAU with HAVE_LIBDRM_XXX in
    order for the flags to be more descriptive and also follow the same convention
    as HAVE_LIBDRM_INTEL.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Emil Velikov <emil.velikov@collabora.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0fbab814cad28ce661f30d685c147e28d5779ab4
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Jul 27 13:17:35 2016 -0400

    configure.ac: Test for libdrm_intel and build for it if present
    
    Test for libdrm_intel and build for it if present.
    Also expose the HAVE_INTEL #define to allow code to be conditionally
    compiled.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Emil Velikov <emil.velikov@collabora.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 12f052b5604fffb852bf66250b89fec56641733c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Aug 1 12:58:13 2016 +0100

    igt/gem_mmap_gtt/wc: Reduce test runtime
    
    Add a new iterator macro to run for a specified number of milliseconds.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 29eac70683fb15188c595e6e7e7fdb4085a7eb06
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Aug 1 12:23:09 2016 +0100

    igt/gem_mmap_gtt: Ignore effects of CPU caches for comparing WB
    
    When measuring WB performance we have the issue that it allows CPU
    caching which is many times faster than main memory!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6ff15ce8a7bc1b219d4f62f02a7270b563eb7247
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Aug 1 11:41:45 2016 +0100

    igt/gem_mmap_gtt: Add a test to detect non-WC access
    
    WC access through the GTT should be much faster for writes than reads.
    Indeed, we expect writes to be close to WB performance (for large
    sequential transfers) and reads to be only equivalent to UC.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b8ea7ad8c43bcbb0e1d69e29eb4637be5ba10db8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 29 18:29:45 2016 +0100

    igt/gem_ctx_create: Watch context creation versus memory hogs
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 53b4dfdf157b38e459f5c0a6d30a3356b158a127
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 29 14:51:34 2016 +0100

    tests: Skip if we cannot reserve infinite fd for ourselves
    
    A few tests rely on being able to allocate an "infinite" number of fd,
    but current assert instead of skip on more restrictive kernels.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=97125
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5c1036200871511fea4535e2e4c1519c78fc86ac
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jul 28 14:43:22 2016 +0100

    igt/gem_busy: Don't run hang tests under the hangchecker
    
    When deliberately hanging the GPU, don't report FAIL if we detect a GPU
    hang!
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=97106
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b2e8d2c46dbb014592134387281881a3fe3fd6da
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jul 27 23:21:45 2016 +0100

    igt/gem_concurrent_blit: More subtest grouping
    
    To stop igt from tripping over itself with the combinatorial explosion
    and skips.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d199ad8c7e7e016da1cda7e104a2f048d88168ce
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jul 27 23:19:41 2016 +0100

    igt/gem_concurrent_all: Fix up copy sizes
    
    The copy size passed to the CPU copy routines were only for a single row
    not the full bo.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9315399e6d0f99ef52a2b14385ce0bc1f2fac1b8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 27 14:34:59 2016 +0200

    docs: minimal docs for igt_vgem.c
    
    Feeling somewhat lazy right now ;-)
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ded9958cd1dd49e2204a94d39ff55019fd89befb
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 27 14:32:15 2016 +0200

    lib: Update ioctl_wrappers functions
    
    We probably should nuke a bunch of the local_ defines again ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1dfe84852859f191fd218613b6384af62b46f734
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 27 14:28:35 2016 +0200

    lib: Update igt_chipset docs
    
    gtkdoc can't handle aliasing, so let's rename the intel_device_info
    function.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c57991ff20717335450f3fffa017370d2ca50cca
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 27 14:23:26 2016 +0200

    docs: pull in VC4 docs
    
    We have them, let's use them.
    
    Cc: Eric Anholt <eric@anholt.net>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6d63c886f290ce37224ed8660eb66679f915b9d5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 27 14:16:07 2016 +0200

    lib: Update igt_core docs
    
    Just missing comment for igt_log_level.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4755804c56ffe16440edf5e9874234b4ed1c733d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 27 14:04:17 2016 +0200

    lib: Update docs for igt_stats
    
    Unfortunately gtkdoc refuses to acknowledge static inlines, so need
    to nuke them. It probably gets confused by that static ...
    
    Also unamed unions confuse gtk-doc, move everything else public up.
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1260564c191a2e2de44b3ffb66ff68e72cd031dd
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 27 13:56:08 2016 +0200

    lib: update docs for igt_pm
    
    - Move all the pm helpers into igt_pm.c. No idea why that wasn't done
      in the original commit that created igt_pm.c.
    - Add missing docs where needed.
    
    Cc: David Weinehall <david.weinehall@intel.com>
    Cc: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 45cbdbc178dc232534a9bd047864f95029f53d6e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 27 13:54:06 2016 +0200

    lib: Update docs for igt_fb
    
    - Again match names of paramaters
    - structs need a typedef to work in gtk-doc
    - gtk-doc doesn't know about unsigned, expects unsigned int instead
    
    Cc: Paulo Zanoni <paulo.r.zanoni@intel.com
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 582ce4cd19c627606047b1a8fdd987c4dc07353c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 27 13:17:38 2016 +0200

    lib/debugs: nuke igt_crc_equal again
    
    This was intentionally left out of the abi since CRC have fairly low
    entropy and can't be reliably compared for inequality in testcases.
    
    Spotted while fixing up warnigns in docs, but given that igt_assert_crc_equal
    has a big comment explaining why only the positive assert exists I'm not
    sure all those docs are all that useful :(
    
    Cc: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Cc: Matt Roper <matthew.d.roper@intel.com>
    Cc: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 734ae3ebcfc0eacd988325e9c399cc7b8ad0220c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 27 13:12:12 2016 +0200

    lib: update docs for igt_debugfs
    
    - gtk-doc requires that the names in comments match the ones in the header
      declaration.
    - igt_debugfs_dir works together with igt_sysfs_get().
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 430c1345d8a00d9c95a8e0852a61de67116143e5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 27 13:07:39 2016 +0200

    lib: Update docs for igt_sysfs.c
    
    Need to actually put it into the master .xml. Also rename the parameter
    names in the source with the ones in the header files to avoid confusion.
    gtkdoc requires that the names in the comment matches with the header.
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2d672a107e8e37e3d9968daec5e4abddd1b66abc
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Jul 27 15:33:12 2016 +0200

    lib/igt_kms: Add some more documentation to some common kms functions.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit c4cbc4dbf371ac29f0a0588883094a1a70aa7274
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Jul 27 14:48:04 2016 +0200

    tests/gen3_mixed_blits: Fix misleading indentation.
    
    Caught by a gcc warning.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 9ed1af68138a793d6819932eda69243337231549
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Jul 27 14:12:40 2016 +0200

    lib/igt_kms: Move doc header to start of the file
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 9654d51eff06a983e5009305d3566f5af6ebc2ff
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Jul 25 10:53:54 2016 +0200

    kms_cursor_legacy: Add test for unrelated cursor updates.
    
    Add a test that first shows the cursor on the first display, then
    shows it on the second display. This exposes the watermark issues on
    SKL.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 69aa8a4bba8005c4cd6f594558d9db4fdf125663
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Jul 19 13:07:32 2016 +0200

    kms_cursor_legacy: Add a wider variety of tests.
    
    Add -varying-size, where we change the size of the cursor between
    64x64 to maxw x maxh, atomic-transitions, which alternates between
    a full-screen sprite plane and a full-screen primary plane,
    toggle, which toggles cursor visibility and
    make sure cursor moves between updates. This is a visual indicator of
    the tests working as intended.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 29516cd9173cfca013c54c1593fde029c55ce293
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Jul 18 11:47:06 2016 +0200

    kms_cursor_legacy: Make sure BAT runs when pipe A cannot be used.
    
    This can happen on CHV, where you only have a output on pipe C.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit cf84a94a7426b494bd8c78071cbe6ecc350f413a
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Jul 18 11:04:27 2016 +0200

    kms_cursor_legacy: Use igt_display for modesets.
    
    This lets us pick a nice testing pattern while the test runs and makes
    sure that the cursor updates don't get nooped. It also tests the
    atomic modeset path, if available.
    
    Also make sure cursorX-vs-flipX has 2 separate connected outputs,
    else the test is worthless.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 6b9858758a266c0fe10336b1eb2e29896796a6fd
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Jul 13 14:59:02 2016 +0200

    kms_cursor_legacy: Use igt_display_t instead of handrolling everything.
    
    No real changes yet, only replaced output validation with
    for_each_valid_output_on_pipe.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit fd1d69d022fda520338424f2d43888d116b34135
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Jul 12 12:24:05 2016 +0200

    kms_cursor_legacy: Enable tests for !intel drivers.
    
    Apart from gem_create nothing depends on i915, so use the dumb api
    instead.
    
    Suggested-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 1b8d8bc6870870e7033df830f66edfcaab59056d
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Jul 12 11:55:26 2016 +0200

    kms_cursor_legacy: Reorganize test execution
    
    Rename single-A-bo to pipe-A-single-bo, single-all-bo to
    pipe-all-single-bo, and ensure that test requirements are met.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Acked-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3817052c9a6359526a71e743e48140a93d4805d7
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Jul 5 14:55:52 2016 +0200

    kms_panel_fitting: Add tests for fastboot.
    
    This is a small testcase to ensure fastboot works as intended.
    When I removed the pipe updates in intel_update_pipe_config
    the test started failing, so I think it's useful to keep.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 11eeb47a60750bc55d07fce769e78b32fe8c776b
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Jul 5 15:09:56 2016 +0200

    igt_kms: Allow disabling previous override mode
    
    By passing a null argument.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 826150fa43dc85a29915ccaba68a12531843609e
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Jul 5 14:52:20 2016 +0200

    igt_kms: Add more apis for panel fitting test.
    
    igt_output_set_scaling_mode is a simple way to update scaling mode,
    igt_display_(try_)commit_atomic will allow you to call drmAtomicCommit
    with custom flags, like TEST_ONLY, EVENT, NONBLOCKING or without
    ALLOW_MODESET.
    
    This is useful when you only want to do any of those things, for events
    it can be useful to set the user_data pointer too, so export that to
    users.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit ad3b209b606d2c69e0ac39edc441854a9f457d3a
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Jul 25 13:09:49 2016 +0200

    kms_atomic_transition: run correctly when hitting hw limits
    
    On CHV with a 4K hdmi display it's possible to hit the wm upper
    limit, 1 rgb primary plane + 2 full size rgb secondary planes
    will hit a HW limit. To fix this try halving the horizontal width
    until we're below HW limits. This requires a kernel patch to make
    sure that the kernel considers actual width in wm calculations,
    but without it we get FIFO underruns anyway.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 5a3c0d646bb55a65165768b8bfe08c122e49d6fc
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Jul 4 11:07:48 2016 +0200

    tests: Add kms_atomic_transition
    
    This is meant as a stress test, to ensure that all combinations of
    atomic transitions work correctly. This could be useful for other
    drivers too, so I kept it generic. For i915 this will mainly be a
    stress test on watermark calculations.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 665e818ce692531ccc66c07bd18eb52eae2ef7eb
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jun 30 13:53:47 2016 +0200

    tests: Add kms_rmfb test.
    
    This tests rmfb and last close behavior. In those cases the framebuffers
    should be removed from the crtc.
    
    If atomic modeset is supported, we do it all in one nice atomic commit too.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit c7d4dabad186d84f6371fa7bebf626f7ed2fc9f8
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jun 30 12:33:47 2016 +0200

    igt_kms: Add modeset support to atomic commits.
    
    Add the correct properties, add pipe_changed and mode_changed and go!
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Ander Conselvan de Oliveira <conselvan2@gmail.com>

commit b61dc538ea7eb3876e5a8c94b710ea41aa941ca0
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jun 30 11:59:13 2016 +0200

    igt_kms: Clear all _changed members centrally, v2.
    
    This will make it easier to support TEST_ONLY commits.
    
    Changes since v1:
    - Fix color_mgmt_changed and background_changed being cleared
      for legacy too. (anderco)
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 0e29ce3265b40ae965cd14dfa4765a21ff50d5b7
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jun 30 11:32:10 2016 +0200

    igt_kms: Remove pan members from igt_plane, v2.
    
    They're duplicates with src_x/y, so just use those.
    
    Changes since v1:
    - Fix order of parameters in calls to igt_fb_set_position.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Ander Conselvan de Oliveira <conselvan2@gmail.com>

commit 9f45ea116539f6c1ad8cd11cd627f091d63baa4b
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jun 30 10:24:28 2016 +0200

    igt_kms: Handle atomic pipe properties better.
    
    Move properties to the pipe, they don't belong in the output
    and make atomic commit use the pipes for crtc properties.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Ander Conselvan de Oliveira <conselvan2@gmail.com>

commit 5a63668766ac7645f6f019deb1e9fc7f2d8f2fa5
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jun 30 09:18:49 2016 +0200

    igt_kms: Change PIPE_ANY behavior to mean unassigned, v2.
    
    None of the tests requires that a output bound to PIPE_ANY is assigned,
    so don't do it. Fix the display commit to iterate over crtc's instead
    oof outputs to properly disable pipes without outputs.
    
    This also means that output->valid is only set after connecting a
    output to a pipe, so no longer depend on it in for_each_connected_output
    and similar macros.
    
    New code should use PIPE_NONE to avoid confusion, PIPE_ANY is a
    deprecated alias, and will be removed.
    
    Changes since v1:
    - Split out the property changes.
    - Split out the commit changes.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Ander Conselvan de Oliveira <conselvan2@gmail.com>

commit e33c51e1b9f06decca6b8c0640b460934cf3c27d
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Jul 25 15:24:29 2016 +0200

    igt_kms: Use pipes for committing, not outputs
    
    This can be split off from the PIPE_ANY -> PIPE_NONE commit by
    making small changes to how igt_pipe_get_output works, next
    commit restores the behavior.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Ander Conselvan de Oliveira <conselvan2@gmail.com>

commit a8e23215c65444a7a25a9871e7959cb6f76dda0d
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Jul 25 15:14:54 2016 +0200

    igt_kms: Assign pipe properties in pipe init
    
    This is a small change required for changing PIPE_ANY to
    PIPE_NONE, but it's a standalone change, so make it a separate commit.
    
    Suggested-and-reviewed-by: Ander Conselvan de Oliveira <conselvan2@gmail.com>
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 5af520a1a0aec04b020ad808fdb90de49bd0e27b
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Jul 5 12:53:05 2016 +0200

    tests/kms: Clean up more users of unassigned pipes.
    
    Use for_each_pipe_with_valid_output instead.
    
    This may increase test time slightly on the affected tests, because now
    outputs will be tested on every pipe instead of the first pipe. This
    will increase test coverage to all usable pipes though, so it shouldn't
    be an issue.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Ander Conselvan de Oliveira <conselvan2@gmail.com>

commit 0794ebefe1b9a1590f218b4055a83685ad8cb7eb
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jun 30 07:43:36 2016 +0200

    igt_kms: Make PIPE_ANY a alias for PIPE_NONE
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Ander Conselvan de Oliveira <conselvan2@gmail.com>

commit bcc41aede3b6ac54278ffc0951e7b61a733d4c69
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Jul 20 09:55:43 2016 +0200

    kms_sink_crc_basic: Use for_each_pipe_with_valid_output to find a valid config.
    
    PIPE_ANY was used here to assign the first valid pipe, this will no
    longer be allowed, so explicitly set it.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Ander Conselvan de Oliveira <conselvan2@gmail.com>

commit cd8859507fb738fa1761268309ee5d6732a68eac
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jun 30 07:41:44 2016 +0200

    kms_psr_sink_crc: Use for_each_pipe_with_valid_output to find a valid config, v2.
    
    This is the only time PIPE_ANY was used to mean something other than
    unassign this output from a pipe. Without this PIPE_ANY can be aliased
    to PIPE_NONE.
    
    Changes since v1:
    - Remove DRM_MODE_CONNECTED check, it's implied.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Ander Conselvan de Oliveira <conselvan2@gmail.com>

commit 7d5449d65e05dd2542cdf2401a6264124dd81765
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jun 30 07:10:18 2016 +0200

    igt_kms: Find optimal encoder only after selecting pipe
    
    This will allow us to find a matching encoder based on a pipe only.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Ander Conselvan de Oliveira <conselvan2@gmail.com>

commit d23aa709f71f7788e36b4820ffc5533fbef0e342
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Jun 30 06:59:03 2016 +0200

    igt_kms: Remove kmstest_connector_config.crtc_idx
    
    This is the same as using config.pipe because the order of crtcs will
    never change.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Ander Conselvan de Oliveira <conselvan2@gmail.com>

commit 8b0dd38681d60522e47561d0bcbeb1827eb5688c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 25 12:47:19 2016 +0100

    intel_chipset: Fixup HAS_PCH_SPLIT() to exclude Atoms
    
    The Atoms do not have the PCH split, exclude them from HAS_PCH_SPLIT().
    At the time, I was planning to add the feature flag and make
    intel_pch_type() useful, but for now take the simple option of expanding
    th predicate.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 38f84e30e699451cac6c7b45cd603e67b1287f15
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Mon Jul 25 14:09:04 2016 +0300

    tests/gem_sync: Skip basic-store-each sub-test on BDW.
    
    Causes too much noise in CI, so skip it for now.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 860b3c14f9e98face626e6ca025daf22844dd156
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Sun Jul 24 16:38:08 2016 +0300

    tests/prime_busy: Remove unstable sub-test from BAT/add flag to bring them back when they're stable to be run in CI.
    
    The following BAT are causing problems:
    
    prime_busy@basic-after-default, fails on all platforms
    since it was added, and it sometimes hangs BSW machine
    prime_busy@basic-before-default, fails on all platforms
    since it was added.
    prime_busy@basic-wait-after-default, fails on all platforms
    since it was added, and it sometimes hangs BSW machine
    prime_busy@basic-wait-before-default, fails on all platforms
    since it was added.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 5188745c4b531d09508cf0897fb90a3634299283
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Mon Jul 25 10:57:25 2016 +0300

    tests/prime_vgem: Remove BAT sub-tests that cause intermittent fails.
    
    The following tests are causing problems in CI:
    
    prime_vgem@basic-fence-flip, fails intermittently on a HSW and SKL
    prime_vgem@basic-fence-wait-default, fails on all platforms since it
    was added
    prime_vgem@basic-sync-default, fails on all platforms since it was
    added, and it sometimes hangs BYT machine
    prime_vgem@basic-busy-default, fails on all platforms since it was
    added
    prime_vgem@basic-wait-default, fails on all platforms since it was
    added, and it sometimes hangs BYT machine
    
    Add a flag to enable them when they get stable enough.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit e3abb2001b9bb9faa2b7217d615daf60c94f42a7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 22 18:03:30 2016 +0100

    lib/sysfs: Provide scanf/printf wrappers
    
    In order to avoid having to build and parse whole strings, use the
    FILE stream interface.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b64d10cd9d9e9638acebae5e1199bd1be52aed39
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 22 17:53:51 2016 +0100

    lib/sysfs: Provide a convenience function for reading a bool
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2e1275371efe83c34332bfcd75af3ba1c36c9fc1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 22 14:27:08 2016 +0100

    overlay: Fix -G (--geometry) parsing
    
    For shortops to getops_long() you have to remember to specify them.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c6e26e47e139ba38fd746daa36ca982908b46840
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 22 12:58:54 2016 +0100

    igt/gem_exec_nop: Display submission mechanism
    
    Useful for confirmation when testing.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5d233babe7a99467c658e18c9091f4475dfd5b06
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Apr 26 15:35:32 2016 +0300

    igt/gem_mocs_settings: Adjust the expected value for the third BXT entry
    
    Adjust the third MOCS entry value based on the corresponding change in
    the kernel.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 250f0470009f600619be73d2e6bb890a2325041c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jul 19 18:33:27 2016 +0100

    lib: __drm_open_driver() needs to report the error
    
    The __ prefixed functions are there to report the error and should not
    automatically skip, which is handled by the normal unprefixed variant.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1c62e60d72469882e3a36820b23a45305cfdf492
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Tue Jul 19 15:53:05 2016 +0300

    tests/gem_workarounds: Fix assertion of num of regs
    
    As we now allow zero as number of workarounds for older gens,
    without lri workarounds, change the assert to allow equality.
    Also move it out from loop.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 4d034675083ccd8fd06c1861a30a8981b4e66078
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jul 19 10:54:54 2016 +0100

    igt/prime_vgem: Test set-domain on foriegn dma-bufs
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2cc78a986bb818307b4c5484769adaa13d5e21e8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jul 19 10:50:51 2016 +0100

    igt/prime_vgem: Replace arbitray delay with backchat from child
    
    Wait until the child tells us they are running (and have verified the
    initial buffer state) before modifing the vgem buffer and then signaling
    the child.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ec194975e46821c5a6198d9486d3aa9be9a83aec
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jul 19 10:30:54 2016 +0100

    igt/prime_vgem/fence-read: Insert a delay
    
    Ensure that the child does need to sleep before the vgem is written.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e7ed4ef77f9bbb5b93a1d57cb601c28dcb5786ad
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 18 11:38:09 2016 +0100

    igt/gem_concurrent_blit: Hook up vgem dmabuf
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8cca110eacb8248d81c755b120b3d9717fd533d1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 18 10:25:24 2016 +0100

    igt/prime_vgem: Check for fence wait before gem_read()
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3d8f55c3e0b4545a6385a44094a70e68e071a49c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 18 10:04:51 2016 +0100

    igt/vgem_slow: Test for the expected -ETIMEDOUT upon fence timeout
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ee5d5c47c44183f3ab7d6493c0e7c41556e34e73
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Wed Jul 13 15:54:18 2016 +0300

    tests/gem_workarounds: rename read to basic-read for CI
    
    This is very quick test (<0.01s) and ensures that the basic
    support is in place. And also reminds to tackle the workarounds
    in early phases for platform enabling.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 90be05d74b0b5db64442848af530a88ffb4569ae
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 15 10:46:45 2016 +0100

    Convert function target attributes to pragma
    
    We need to not only cover the function in the target=sse4.1 but the
    include as well.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Damien Lespiau <damien.lespiau@intel.com>

commit c8ab577cbdeb5480f000f55ed2decae7b7932197
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 15 09:01:59 2016 +0100

    igt/vgem_slow/nohang: Test fence autotimeout
    
    To protect the kernel against unscrupulous fence users, fences should
    automatically signal after a timeout.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2ed42d3c4dc180ddbb99b1292f8656ca52d1d90e
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Jun 21 17:52:37 2016 +0300

    tools/intel_bios_reader: Dump out more of the eDP block
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 86a546f6f798b53af93cf10b4aa24e1d79b07cc4
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Feb 29 21:35:39 2016 +0200

    tools/intel_bios_reader: Dump out more information from the child device structure
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit cdee98060a377b9586b520248c2be89e24ae7bdf
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Feb 29 20:31:05 2016 +0200

    tools/intel_bios_reader: Dump more bits for general bit definitions block (1)
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit bd49df80641ed8ff2f76254fe3c621b18d607074
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jul 14 15:18:13 2016 +0100

    lib/intel_device_info: One spelling mistake less
    
    A spelling fix patch must always include one mistake. What does that
    mean when the patch only contains a single change?
    
    Even though I had the bspec open, I still managed to confuse a 'li' for
    'll'
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f4316135042b48d979507a7eba7bfd92d290f3c3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jul 14 11:49:38 2016 +0100

    lib/intel_device_info: Fix a couple of misspellings.
    
    aaglelake, the Scottish version.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 360e967b442b88d2cd4c525389cb1b60f8ef4480
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Thu Jul 14 13:24:28 2016 +0300

    Bump libdrm-intel dependency library to a newer version that support softpin.
    
    Required by commit 2603b98ca (aubdump: Support softpin bos).
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>
    CC: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>

commit be3bf60f7f5c2f16931c0a1ba60a3a19c3d2e000
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Jun 29 07:22:52 2016 -0400

    lib/igt_kms: Fix different order of properties and their name strings
    
    igt_crtc_prop_names and igt_atomic_crtc_properties have different orders of
    properties, which is fixed in this patch.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 93256e3e548c14117afb7e8178f56b0e0f520d10
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 22 07:21:09 2016 +0100

    vgem: Add basic dma-buf fence interop
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 36ffa375d33e4e0b9ce05e8d62df04cda8591903
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jul 12 21:49:19 2016 +0100

    igt/pm_rps: Avoid inadvertent waitboosting
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 22779a7a1ae8e9b0676b55e973d600671dd74f1c
Author: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
Date:   Thu Jun 30 18:29:47 2016 -0300

    lib/drmtest: add virtio_gpu support
    
    Support the virtio GPU on drmtest.
    
    Signed-off-by: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 66d0e665739def028c12a50b201b987e4fb513d0
Author: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
Date:   Thu Jun 30 18:29:46 2016 -0300

    lib/drmtest: Fix igt_skip message
    
    Now other gpus are supported too.
    
    Signed-off-by: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 51f12d426d6b8a054afa0696276a9dad9561ff5b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 11 13:22:55 2016 +0100

    igt/gem_exec_flush: Test movntqda reads from WC
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9c2575e708a3aec0fd0ccfcbfb8704beb440b140
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 11 12:53:04 2016 +0100

    igt/gem_gtt_speed: Measure the benefit of movntqda
    
    Suggested-by: Akash Goel <akash.goel@intel.com>
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 545fe0fe04635e62216f452f659a5a40469d3190
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 11 12:39:01 2016 +0100

    lib; Add x86 cpuid based feature detection
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2038b2470d83fc13e238dd884ee1b5676dd04385
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jul 9 10:30:23 2016 +0100

    igt/pm_rpm: Fix requirement for external modules
    
    Don't just fail, skip gracefully if an external module is unavailable.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 97fa5c87cf610137b85178634868358d87cbd388
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jul 9 10:07:25 2016 +0100

    igt/gem_busy: Include a hangcheck
    
    Ensure that we eventually report idle if we call gem_busy() in a tight
    loop on a hanging batch.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2962c5164878ca09dcee4627db1433f7489d0b13
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jul 9 09:04:05 2016 +0100

    lib/debugfs: Adjust path creation for opening /debugfs/.../dir/%d
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 611d1e53dbf58d6bec4e140476065f40f6e181fe
Author: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>
Date:   Fri Jul 8 17:27:22 2016 -0700

    aubdump: Only close aub file if we opened it

commit 2603b98cab0378f791e4f0d8049dc3cd9b54c209
Author: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>
Date:   Fri Jul 8 17:25:53 2016 -0700

    aubdump: Support softpin bos

commit e28120d10e929953c4c14c376c023ca670baa889
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jul 7 07:06:00 2016 +0100

    igt/prime_busy: Check the busy status is cleared upon a hang
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a2880c7146777a9d030ee198d2bfb79a81b2c8a5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jul 6 09:27:00 2016 +0100

    igt/gem_sync: Fix uninitialised variable 'n'
    
    Not a good day.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2202b064d8089db1092903771bafc7272719a6fe
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jul 5 21:28:21 2016 +0100

    igt/gem_sync: Fix many_store() for printing out a single engine
    
    The name for a single engine was unset, oops.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3ef6913e0fc1c5540bbe32263fde25c2331a8545
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jul 5 15:40:44 2016 +0100

    igt/gem_sync: Try and race the bottom-half
    
    In light of a bug in intel_breadcrumbs where we missed the interrupt
    when a new bottom half was installed and raced with the old bottom half
    being signaled, try and recreate that race.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8a0b93743646312f49e1eebfaf41495875ffbdf2
Author: jim.bride@linux.intel.com <jim.bride@linux.intel.com>
Date:   Wed Jun 15 10:48:32 2016 -0700

    demos/intel_sprite_on: Fix connector iteration bug
    
    Instead of looping until the first disconnected port is found,
    now go through all possible connectors, drawing the sprite on
    any connected display.
    
    v2: Print a message if we don't find any valid connectors.
    
    Signed-off-by: Jim Bride <jim.bride@linux.intel.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit e73e398536a6415b28840a2f83bfbd50aa413b2b
Author: Mike Frysinger <vapier@gentoo.org>
Date:   Wed Jun 22 07:08:03 2016 -0400

    configure: update bugzilla URL
    
    Signed-off-by: Mike Frysinger <vapier@gentoo.org>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 8875bb13e0669054cc57bb44ece5267fa8f8d2f3
Author: Robert Foss <robert.foss@collabora.com>
Date:   Mon Jun 27 06:58:24 2016 -0400

    lib/igt_gt: Fix unused variable warning for non-x86 targets
    
    Moved variable declaration inside #if case to avoid unused variable warnings
    on non-x86 targets.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 5bed7622ad78c4a75bdd13d438509671d8061c68
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed May 18 20:07:09 2016 -0400

    kms_flip: Change __wait_for_vblank to use helper function.
    
    Change __wait_for_vblank() to use kmstest_get_vbl_flag() helper function.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 8a4e62b947ec325af9d6eb8f00cba2d6ed8a59c0
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed May 18 20:07:08 2016 -0400

    igt_kms: Change igt_wait_for_vblank to use helper function.
    
    Change igt_wait_for_vblank() to use kmstest_get_vbl_flag() helper function.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit ba86514759c607e3ef4099382f9f119d2e7a5db9
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed May 18 20:07:07 2016 -0400

    kms_vblank: Switch from using crtc0 statically to explicitly setting mode.
    
    Previously crtc0 was statically used for VBLANK tests, but
    that assumption is not valid for the VC4 platform.
    Instead we're now explicitly setting the mode.
    
    Also add support for testing all connected connectors during
    the same test.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 7ead45c28c8870685bbfd219b967f035df85242b
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Mon Jul 4 16:52:46 2016 +0300

    Added function kmstest_get_vbl_flag() to igt_kms.
    
    This function formats a pipe_id into the format expected by DRM while
    processing DRM_IOCTL_WAIT_VBLANK.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit c77b1fbdaaf790aa78cad24e2c823207de681b56
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed May 18 20:07:05 2016 -0400

    lib/igt_kms: Switch to verbose assert.
    
    Switch igt_assert to igt_assert_lte to provide more diagnostic
    information.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 235ff7af4fbb75552fd0130055f4e3b2d31783d5
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed May 18 20:07:04 2016 -0400

    lib/igt_kms: Fix plane counting in igt_display_init.
    
    Fix issue where the plane counting fails due to the number and
    configuration of planes being unlike the intel configuration.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 556a59ed64c17c41d96a7ef8f50f8c742b9f04b9
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed May 18 20:07:03 2016 -0400

    lib/igt_kms: Add support for up to 10 planes.
    
    Increase the number of planes supported to 10.
    
    kmstest_plane_name only previously supported 4 planes,
    this patch adds support for up to 10 planes.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit f73b41e1ba6009a44c0c05aad8815004d9842cbe
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Mon Jul 4 15:58:20 2016 +0300

    tests/gvt_basic: Add a placeholder test to please check/distcheck.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>
    Acked-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d33c89c4d91c2298e11d624bcb8d20f82a3a8e61
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Mon Jul 4 15:32:02 2016 +0300

    overlay/Makefile.am: Remove i915_pciids.h from overlay sources
    
    Commit d308bb082d429eb25 (lib: Start weaning off defunct
    intel_chipset.h) moved i915_pciids.h to lib/ from overlay/ and
    now is packaged by lib/.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>
    Acked-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d2c6196aaad63653596899d2aec40120c7194c71
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 4 12:37:32 2016 +0100

    igt/gem_sync: Extend with store synchronisation
    
    Currently gem_sync exploits read-read optimisation to wait upon multiple
    rings simultaneously. But at the moment, gem_exec_flush is showing
    sporadic missed interrupts on bdw/skl and yet gem_sync is not. This is
    some subtlety in the timing, perhaps caused by the extra write. This set
    of tests tries to exercise that by using a write batch - which also
    means we exercise inter-ring synchronisation (like gem_storedw_loop).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c2893a90365d101d0a07de8bd5b882d53817bb19
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 4 08:38:48 2016 +0100

    lib: Enable squelching of simulated error states
    
    If the error state just contains the hanging batch, and we are not
    verifying the error capture, tell the kernel to ignore it.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 376b813e7c60826357034f4ea40ffada514fbdc3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jul 3 09:42:38 2016 +0100

    igt/gem_exec_gttfill: Reduce overhead in setting up filler batches
    
    Since all the batches start with the same content, we can reuse the same
    buf to fill them.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3e765840129a17b462565f7b48dfe9d9792b292f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jul 2 11:51:29 2016 +0100

    igt/gem_exec_whisper: Preallocate locations in GTT for whisper
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 76bc11bd3c5eae50165c35edc17473e69e432fdf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 18 18:30:37 2016 +0000

    lib/igt_aux: Framework for measuring latency in raising signals
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0f1584ed6bdf92189c5324430dda2c83077012cb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 1 10:55:40 2016 +0100

    igt/prime_busy: Promote the test for dma-buf implicit fences as basic
    
    This is a requirement for interoperability that we fail.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1681df8a21f5f3e4d342b0b28f593d71dfb90a64
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 29 12:25:08 2016 +0100

    intel_chipset: Remove unused PCI_CHIP ids
    
    These are now taken from i915_pciids.h. However, some of the older ids
    are still used explicitly for per-devid information, and so are not yet
    removable.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2aa3dc83399a16588ba06ec1718ed709f55bb8d9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 29 12:11:28 2016 +0100

    intel_chipset: Replace lookup of GT size with computation
    
    Instead of a large if-chain for matching devid to GT, we can just
    compute it directly from the encoded devid.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e63f1544ff033f8b8b5e83e16cb0e60e65a04c7d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 29 11:06:09 2016 +0100

    intel_chipset: Convert IS_G4X to device info
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 755fc0c8c3961fd22eff28e368f115101e9dab1d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 29 11:06:09 2016 +0100

    intel_chipset: Convert IS_915, IS_945 to device info
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 37eec6dae6de794ed318c9f7ab615848d8b10820
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 29 11:06:09 2016 +0100

    intel_chipset: Convert IS_PINEVIEW to device info
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 83faf2b5fb2937d2b1a3c79c2802e4fce91d8652
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 29 11:06:09 2016 +0100

    intel_chipset: Convert IS_IRONLAKE to device info
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c85efb1b239213f5b993c6b92a0226ca3f1ede8e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 29 11:06:09 2016 +0100

    intel_chipset: Convert IS_IVYBRIDGE to device info
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0ce61c6bd12307c4cb4d85a5baaab466ce102dcd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 29 11:06:09 2016 +0100

    intel_chipset: Convert IS_VALLEYVIEW to device info
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 314be9a8a99c6d89b0c909cb4523ecf5812a7381
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 29 11:06:09 2016 +0100

    intel_chipset: Convert IS_HASWELL to device info
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6d5f11565ad5de4ae068e2f9bd725e16299935fd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 29 11:06:09 2016 +0100

    intel_chipset: Convert IS_BROADWELL to device info
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2fc5945776301d8886cd05163aea9514334fa5e0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 29 11:06:09 2016 +0100

    intel_chipset: Convert IS_CHERRYVIEW to device info
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f17d633cd483b703d517091d3d567df8705739b6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 29 11:06:09 2016 +0100

    intel_chipset: Convert IS_SKYLAKE to device info
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1d03a5085b4d1f4104fe300bd18cbea4976632bd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 29 11:06:09 2016 +0100

    intel_chipset: Convert IS_BROXTON to device info
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2a74eb5994257a1cfddb59f341f638fe81566af1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 29 11:06:09 2016 +0100

    intel_chipset: Convert IS_BROADWATER, IS_CRESTLINE to device info
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5679105766d0213df09d27edaed069048f3df1aa
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 29 11:19:09 2016 +0100

    intel_chipset: Convert IS_965 to use intel_gen()
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit fa3bbcf9b7870d106efbf8f1c6706c7cda7e44d5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 29 11:16:24 2016 +0100

    intel_chipset: Convert IS_MOBILE to intel_device_info
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d308bb082d429eb25dfd2844bcbafe722660a1ff
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 29 08:28:58 2016 +0100

    lib: Start weaning off defunct intel_chipset.h
    
    Several years ago we made the plan of only having one canonical source
    for i915_pciids.h, the kernel and everyone importing their definitions
    from that. For consistency, we style the intel_device_info after the
    kernel, most notably using a generation mask and a per-codename bitfield.
    
    This first step converts looking up the generation for a devid tree from
    a massive if(devid)-chain to a (cached) table lookup.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0404de4f223c108cf181f6c9a26fdc84fc608fc5
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Jun 29 15:56:28 2016 +0200

    Revert "igt_kms: Add modeset support for atomic style commits."
    
    This reverts commit 4a1859781f154513f19cd6392e04f50dbe6c030a.
    
    This commit wasn't ready yet, should never have been committed.

commit b99b15fb2a8cac72d03ab3b04299501381397708
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Jun 29 14:58:02 2016 +0200

    tests: Remove kms_rmfb.c
    
    Accidentally added as part of another patch.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 4a1859781f154513f19cd6392e04f50dbe6c030a
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Jun 28 14:28:20 2016 +0200

    igt_kms: Add modeset support for atomic style commits.
    
    All pipes are now updated in the loop first, before connectors
    are read out. The mode_id and active crtc properties are added,
    and crtc_id for connectors. These are required to do a modeset,
    and the behavior during atomic commits is changed slightly too.
    
    A lot of code will do the following:
    - Init.
    - igt_output_set_pipe(output, pipe);
    - commit.
    
    Since legacy setcrtc and atomic commit differ, there are some
    differences in how we commit pipes and connectors too.
    
    For atomic we set output->crtc during igt_output_set_pipe,
    and use it in atomic commit. This may be set to NULL, in which
    case the output is disconnected from the crtc. Unlike legacy
    we won't attempt to bind all connectors to all pipes, only
    the ones that were explicitly set.
    
    As a test, convert kms_rmfb.c
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit d31b9b307f164668ddd23da6bef619c002e75a14
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Jun 13 15:43:15 2016 +0200

    tests/kms_rmfb: Use for_each_pipe_with_valid_output.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit be13126cc861b886720bfbffe8edeb60f10fdb94
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Jun 13 15:27:22 2016 +0200

    lib/igt_kms: Add for_each_pipe_with_valid_output and for_each_valid_output_on_pipe.
    
    There are a lot of places where we do either
    
    for_each_pipe {
            igt_subtest_f(... "-pipe-C", pipe_name())
                    for_each_connected_output()
                            /* Run subtest */
    }
    
    or:
    igt_subtest_f(...) {
            for_each_pipe()
                    for_each_connected_output()
                            /* Run subtest */
    }
    
    The former should be replaced with for_each_valid_output_on_pipe,
    the latter with for_each_pipe_with_valid_output.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 3916465bb935fc80c4fe9a7e20d848fcb0aba5b0
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Jun 8 13:23:27 2016 +0200

    tests/kms_chv_cursor_fail: Run the tests with fewer steps.
    
    This reduces the runtime of the tests from ~200s on my 30 fps 4k panel
    to 10s.
    
    Cc: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 5c7106ce427f8ad8023f184a4c7c6c908ecd39b8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 29 08:25:36 2016 +0100

    overlay: sync i915_pciids.h
    
    Syncing to
    
    commit a922eb8d4581c883c37ce6e12dca9ff2cb1ea723
    Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Date:   Thu Jun 23 14:50:36 2016 -0700
    
        drm/i915: Removing PCI IDs that are no longer listed as Kabylake.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 13fa7da2b528ff803e0e5921e572429978e85a05
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Mon Jun 27 17:07:51 2016 -0700

    lib/intel_chipset: Removing PCI IDs that are no longer listed as Kabylake.
    
    This is unusual. Usually IDs listed on early stages of platform
    definition are kept there as reserved for later use.
    
    However these IDs here are not listed anymore in any of steppings
    and devices IDs tables for Kabylake on configurations overview
    section of BSpec.
    
    So it is better removing them before they become used in any
    other future platform.
    
    It reflects kernel:
    commit a922eb8d4581c883c37ce6e12dca9ff2cb1ea723
    Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Date:   Thu Jun 23 14:50:36 2016 -0700
    
        drm/i915: Removing PCI IDs that are no longer listed as Kabylake.
    
    v2: Rebase.
    
    Reviewed-by: Dhinakaran Pandiyan <dhinakaran.pandiyan@intel.com>
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 09dc3171a1b3c375efd800a7cb5024a613144689
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Thu Jun 23 14:11:58 2016 -0700

    lib/intel_chipset: Add more Kabylake PCI IDs.
    
    The spec has been updated adding new PCI IDs.
    
    In parity with kernel:
    commit 33d9391d3020e069dca98fa87a604c037beb2b9e
    Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Date:   Thu Jun 23 14:50:35 2016 -0700
    
        drm/i915: Add more Kabylake PCI IDs.
    
    v2: Avoid using "H" instead of HALO to keep names uniform - DK.
    
    Reviewed-by: Dhinakaran Pandiyan <dhinakaran.pandiyan@intel.com>
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit ba58793e98bcf68088bf45975260422d721dbc8b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jun 24 08:31:07 2016 +0100

    lib: Fix reporting of debugfs mountpoint
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 362da34efcafc21bc1d6117d54cf85dd1edb30c7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jun 24 08:30:09 2016 +0100

    lib: Suppress kmsg on exit for unknown programmes
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e1c3cde5b00ad003cad99abc1a507878e854e3f7
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue Jun 28 10:01:48 2016 +0100

    lib: Avoid running gem_quiescent_gpu() on non-Intel hardware
    
    When opening the device, we first ensure the device is idle. However,
    performing GEM operations on !i915 is bad behaviour, so don't.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>

commit 88c1f7c00c42cea436d4fb0248a289289b8b2ca1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jun 23 22:53:23 2016 +0100

    igt/kms_cursor_legacy: Check that cursor updates do not stall flips
    
    A similar expectation as to the current test that flips do not stall
    cursor updates.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 838d0775043774e61f3aa3a7d8ea440a71d521c0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jun 21 12:14:14 2016 +0100

    igt: Add basic framework for GVT-g testing
    
    We don't do anything yet other than try to load the module. Initial
    sanity checks to come.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Zhi Wang <zhi.a.wang@intel.com>

commit d86d6eb281ba99fca1bb39ad3dc05c5681dded5d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jun 23 21:07:36 2016 +0100

    Silence compiler warnings for expected and handled error conditions
    
    Silly compiler emitting warnings that just cause people to break code
    attempting to silence the compiler.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit bdad74d461979a64af5633ca6909d9835d5fafbe
Author: marius vlad <marius.c.vlad@intel.com>
Date:   Mon May 16 13:39:10 2016 +0300

    assembler/: Fix lex warnings for %empty and %nonassoc.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>
    Acked-by: Damien Lespiau <damien.lespiau@intel.com>

commit 68c5d538c64c042106632a1a6d36aba62700decf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 22 09:10:33 2016 +0100

    igt/vgem_basic: Check multiple clients can open /dev/dri/<vgem>
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8453d4bb7a901c6a7601fc8a13b47701cbb38db4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 22 20:49:41 2016 +0100

    igt/kms_cursor_legacy: Replace synchronous pageflip
    
    Aparently we never supported that mode of operation. Maybe in the future
    we will, but for now just use the vblank wait to align ourselves with
    the vblank.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 987e1d56505b676530ecc667792c0f3c69b78f76
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 22 18:23:17 2016 +0100

    igt/kms_cursor_legacy: Detect pageflip errors
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4dd67c386398edac89936200b82b4dd7a1488acb
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Jun 15 16:46:29 2016 +0300

    tests/kms_flip: Check that the last vs. current seq/ts are consistent
    
    Let's make sure the ts vs. seq difference between the current and last
    events match.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit f909d88d659c57287006dfcb8c26cf8bfed1516f
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Jun 15 17:07:02 2016 +0300

    tests/kms_flip: Print the expected diff between two events
    
    To aid in diagnosing failures, print out the expected time
    difference between the two events.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 4be39bbda5dd6678e8618aaef6804ad8d8c982bf
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Jun 15 16:43:20 2016 +0300

    tests/kms_flip: Account for diff.tv_secs in jitter check
    
    Include diff.tv_secs in the jitter comparison.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit bebccd097a6d7cf5515111fb7dab07cdc76d3017
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Jun 15 17:01:38 2016 +0300

    tests/kms_flip: Use USEC_PER_SEC
    
    Replace some opencoded numbers with USEC_PER_SEC, and
    print the usec_diff with 6 decimal digits to make things
    more consistent.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 7ad329021f5f7d643cc6aade1c54a6bca805bd98
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Jun 15 16:38:06 2016 +0300

    tests/kms_flip: Constify some function arguments
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 174087d6718bef9ed1c9f7b167ec5704b2b18362
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Jun 15 16:35:53 2016 +0300

    tests/kms_flip: Print timestamps in a consistent form
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 162d456b6020caceab053540a9cf38ad03a0b0d6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 22 15:41:23 2016 +0100

    igt/kms_cursor_legacy: Add a rudimentary test to detect stalled cursors
    
    A common problem when trying to unify legacy and atomic is the breaking
    of existing non-blocking, asynchronous userspace. The most trivial
    example is a cursor that stalls for a pageflip.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 853b4d6098007e05864fdf442f7d8a331aaf51ed
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 22 16:09:14 2016 +0100

    igt/vgem_reload_basic: Do a modprobe dry-run first
    
    Skip if the vgem module is not present, but still fail if we fail to
    load it.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2ae46218056682a50df5bb200f5490f8e3093362
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Wed Jun 22 12:43:06 2016 +0300

    tests/drm_getopt.sh: Make it executable as CI does a copy of
    tests using executable permission.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 1f4b21ca7d1d5782e532cb7f681bc60cac82ff85
Author: marius vlad <marius.c.vlad@intel.com>
Date:   Tue Jun 21 15:34:07 2016 +0300

    tests/drm_lib.sh: Extract fake getopt options so it can sourced into tests that require it.
    
    This should allow tests/vgem_reload_basic to pass check target and it
    doesn't depend of i915 being present.
    
    v2: Do not source drm_lib.sh, only fake getopt parsing
    option to again access to --list-subtests option (Chris)
    
    v3: Forget to place the script in Makefile.sources, otherwise
    distcheck will not copy it.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>
    [Chris: Replace exit 1 with exit $IGT_EXIT_FAILURE]
    CC: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1b81253dd0d91191ceccd946961d8c53f4bcbd7d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jun 21 08:52:42 2016 +0100

    lib: Suppress error messages from failure to load driver modules
    
    Pass -s switch to modprobe so that we don't litter stderr with the error
    message for a missing module - the load failure is sufficient.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 85d6566c4e61348e4c9ede606c4937912f62e652
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jun 21 08:34:04 2016 +0100

    igt/gem_close_race: Complete conversion to drm_open_driver()
    
    commit e63a0681d95a ("tests/gem_close_race: Use drm_open_driver helper")
    left a few raw open() behind. Eliminate them as well!
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=96605
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5b558c58a5d72710e1ace61c35f022fc8e3146de
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jun 20 23:19:18 2016 +0100

    igt/prime_vgem: Speed up implicit fence failure
    
    Close the batch before asserting so that we don't have to wait for a
    hang after a failure.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a153f95393515c11a76f87145d91e2fa4f1ff568
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jun 20 21:50:07 2016 +0100

    igt/prime_vgem: Insert a WCB flush between distinct mmappings
    
    Since we use distinct WC addresses for the same page, we need to flush
    the WCB after the write in order to see it from the other mmaping.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5020029c1907fd2d999d34cfcba3704d8bbcea13
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jun 20 20:11:37 2016 +0100

    igt/prime_vgem: Add a tight coherency check between vgem/gtt mmap
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e4c24c048d8310955d984f24cec8e0dd5128e110
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jun 20 19:37:24 2016 +0100

    lib/debugfs: Fix probe path for opening i915 debugfs dir
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8deba38a3af34354680984186bdc80cfc6734138
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jun 20 19:21:26 2016 +0100

    igt/vgem_basic: Exercise opening sysfs/debugfs
    
    For fun, debugfs/.../names currently explodes, so lets capture that and
    make sure that basic access to debugfs does no harm.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0e1f5e3e796ae383daeb8f1aa394ce5f030e7bb9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jun 20 13:27:17 2016 +0100

    benchmarks: Add vgem mmap speed test
    
    Primarily to check that we have the WC read/write disparity.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c344044ab681566d36a49a0456666a32bac3419a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jun 18 00:42:19 2016 +0100

    igt: Add basic exercise of vGEM
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7ce63894854d8dafc0cf1f5450e5c1d32ac18150
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jun 18 00:17:06 2016 +0100

    lib: Support opening vGEM device
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1295629354ef5b9c8b4265a0d19fa57ac63b621d
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Apr 4 11:14:49 2016 -0300

    kms_frontbuffer_tracking: properly handle mixing GTT and WC mmaps
    
    The new Kernel behavior is that whenever a buffer has ever been WC
    mmapped, the GTT mmaps will be treated as CPU operations. Because of
    this, if we don't issue the dirty_fb IOCTL after doing frontbuffer
    rendering with the GTT mmaps, FBC will remain disabled. Luckily, the
    only subtest that does this sort of mix is the multidraw subtest.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 990f4578fce0f2186956489a7dbf228cbe48dcda
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Feb 24 18:29:16 2016 -0300

    kms_frontbuffer_tracking: recreate the FBs at every subtest
    
    This patch was originally written because of a workaround we were
    planning to merge. Later we improved the workaround so it wouldn't
    need this patch anymore. Then later we gave up on the workaround, but
    decided to go with a plan that would cause GTT mmap writes to
    invalidate FBC in case the frontbuffer ever had a WC mmap. So now we
    need the patch again because we don't want a subtest that involves an
    WC mmap to change the behavior of other unrelated subtests that use
    GTT mmaps.
    
    Even if we don't go with the current planned Kernel patch, merging
    this should be worth in order to avoid future related problems.
    
    v2: New commit message.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit dc466efa976e2c2e0e9ff858e73c147acf6588ac
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Feb 24 18:24:26 2016 -0300

    kms_frontbuffer_tracking: prefer the BLT drawing method
    
    A recent Kernel fix changed the way GTT and WC mmaps behave during
    frontbuffer drawing. This, added with the fact that GTT mmaps are
    special cases for PSR, suggests that maybe we should move to BLT
    drawing in places where we can, in order to simplify things a little
    bit.
    
    v2: New commit message.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 001d665080c1be7d8fe97b557d7b6102175956b7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jun 17 15:19:44 2016 +0100

    igt: Replace drv_missed_irq_hang script with a C-equivalent
    
    In order to control some of the finer detail of detecting when we missed
    an interrupt, replace the shell script with C.
    
    This version submits a hanging batch and uses a child process to unhang
    it, whilst the parent sleeps. As the child process is prevented from
    running whilst the parent is alive (as the child is a low priority
    normal process whereas the parent is a RT process), the child can only
    unhang the parent after i915_wait_request() has spun up and tried to
    enable the interrupt. In contrast, the shell script guessed a workload
    that should take long enough for the i915_spin_request() to miss the
    completion, but that was not guaranteed. Furthermore, from C we can
    trigger a missed interrupt on each engine.
    
    A minor convenience of the C version is that we don't have to worry
    about install paths to find the binaries underneath.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=88437
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit be21fc064b6d9ded5ccae7205204c0d5a03cf9e5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jun 17 16:04:09 2016 +0200

    tests: Push igt_fork/stop_hang_detector into fixtures
    
    It access hardware, hence why the simple igt_only_list_subtests()
    check from igt_fork/stop_signal_helper() isn't enough.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit e63a0681d95a7288faff19a624548f96dbc73341
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jun 17 15:43:24 2016 +0200

    tests/gem_close_race: Use drm_open_driver helper
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 87a1dcade8335f56bd4808804046bb067d826eae
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jun 14 16:58:08 2016 +0100

    igt: Add a test case for polling dma-buf fences
    
    This tests that we are adding our requests to the dma-buf reservation
    object, both in exclusive (write) and shared (read) mode.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 144856ec41bfc637c76cc30cc038a05d1589b397
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jun 10 10:05:23 2016 +0100

    igt/gem_shrink: Redirect all allocations through GEM
    
    Rewrite calloc() to use a GEM object for its backing storage, so we
    increase stress on GEM and hopefully reduce the likelihood of an early
    failure before hitting oom.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit bc570aad9b20de5f48c00a8b958b8868739f2b42
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Wed Jun 8 15:59:04 2016 +0300

    igt/gem_reset_stats: Add time constraints on hang detection
    
    Make sure that injected hang is detected below time threshold.
    This ensures that we fail if hang was of no-progress type instead
    of a stuck engine.
    
    v2: use igt_seconds_elapsed() (Chris)
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b5ef40e6e580c2f2f342f2334d694d4c84e6c9c4
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Wed Jun 8 15:50:50 2016 +0300

    lib/gt: Omit illegal instruction on hang injection with gen 8+
    
    0xffffffff as an illegal command confuses the command execution
    on gen9 so that the next BB start will get ignored, causing a runaway
    head past the bb end. This delays the hang detection substantially
    as hangcheck then observes only a non progressing seqno.
    
    Omit the bad instruction on gen8+ and rely on the chained batch
    loop to cause a deterministic hang. Make the chained bb start
    to jump straight into bb start, omitting the MI_NOOP or the bad
    instruction on subsequent passes. This makes the acthd sampling
    to hit more reliably to the same value, as the loop is smaller,
    making the head appear to be 'more stuck'.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=92715
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Reviewed-by: Chris Wilson <chris at chris-wilson.co.uk>

commit ede48704bac49d3175731b2a041135a510fe98b9
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Jun 8 13:18:27 2016 +0200

    tests/kms_chv_cursor_fail: Remove extra igt_pipe_crc_start.
    
    There is a extra call to igt_pipe_crc_start that is not matched to any
    stop. Because of this the exit handler tries to reset the crc source on
    exit while the pipe disabled. This causes fails with -EIO:
    
    (kms_chv_cursor_fail:2643) igt-debugfs-CRITICAL: Test assertion failure
    function igt_pipe_crc_pipe_off, file igt_debugfs.c:364:
    (kms_chv_cursor_fail:2643) igt-debugfs-CRITICAL: Failed assertion:
    write(fd, buf, strlen(buf)) == strlen(buf)
    (kms_chv_cursor_fail:2643) igt-debugfs-CRITICAL: Last errno: 5, EIO
    (kms_chv_cursor_fail:2643) igt-debugfs-CRITICAL: error: -1 != 11
    Stack trace:
      #0 [__igt_fail_assert+0xf1]
      #1 [igt_pipe_crc_pipe_off+0xe4]
      #2 [pipe_crc_exit_handler+0x35]
      #3 [igt_atexit_handler+0x4c]
      #4 [__libc_secure_getenv+0x112]
      #5 [exit+0x15]
      #6 [igt_exit+0xd6]
      #7 [main+0x1ee]
      #8 [__libc_start_main+0xf0]
      #9 [_start+0x29]
      #10 [<unknown>+0x29]
    
    Cc: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Acked-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit efa40415e87584e0f35ff299d4f05d839f506663
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue May 24 20:44:11 2016 +0300

    tests: Add kms_invalid_dotclock
    
    Add a test that makes sure every modeset gets rejected by the kernel if
    the requested dotclock is beyond the hardware capabilities.
    
    For now we just test the preferred mode for each connector, should
    perhaps test them all to be more sure everything is getting rejected.
    
    We also skip the test on connectros that have a fixed mode as the kernel
    will ignore most of the user timings. We should make the kernel more
    strict I think, to at least check that the user gets roughly the refresh
    rate they requeted.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit beef31a02679a914e2c101e60308511d396201fc
Author: Ankitprasad Sharma <ankitprasad.r.sharma@intel.com>
Date:   Mon Jun 6 14:52:42 2016 +0530

    igt/gem_stolen: Check for available stolen memory size
    
    Check for available stolen memory size before attempting to run
    the stolen memory tests. This way we make sure that we do not
    create objects from stolen memory without knowing the available size.
    
    This checks if the kernel supports creation of stolen backed objects
    before doing any operation on stolen backed objects.
    
    Also correcting the CREATE_VERSION ioctl number in getparam ioctl,
    due to kernel changes added in between.
    
    v2: Removed size argument for checking stolen memory availability (Tvrtko)
    
    Signed-off-by: Ankitprasad Sharma <ankitprasad.r.sharma@intel.com>
    Reviewed-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 293aa16a12f9e553c0dd767addd27d34c4739b39
Author: Ankitprasad Sharma <ankitprasad.r.sharma@intel.com>
Date:   Fri Jun 3 14:21:30 2016 +0530

    igt/gem_stolen: Fix for no_mmap subtest
    
    no_mmap subtest is expected to fail, but calling gem_mmap__cpu
    will assert the returned value itself, which makes test fail.
    Replacing gem_mmap__cpu by __gem_mmap__cpu and checking the
    returned value.
    
    Signed-off-by: Ankitprasad Sharma <ankitprasad.r.sharma@intel.com>
    Reviewed-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 2d7d1ad381206cf01db0816d6e404d01cb1a094c
Author: Ankitprasad Sharma <ankitprasad.r.sharma@intel.com>
Date:   Fri Jun 3 14:21:29 2016 +0530

    igt/gem_stolen: Verify contents of stolen-backed objects across hibernation
    
    This patch verifies if the contents of the stolen backed object were
    preserved across hibernation. This is to validate kernel changes related
    to moving stolen-backed objects to shmem on hibernation.
    
    v2: Added comment, Use igt_assert_eq() instead of igt_assert(), Made loops
    more readable (Tvrtko)
    
    v3: Corrected assertion (Tvrtko)
    
    Signed-off-by: Ankitprasad Sharma <ankitprasad.r.sharma@intel.com>
    Reviewed-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 047c999482335c48eda6a10144a9fb0861e93a1e
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Tue Jun 7 10:18:34 2016 +0200

    igt/kms_cursor_legacy: wrap __builtin_ia32_pause inside cpu_relax
    
    So that we can add an alternative implementation for the other arches.
    This is basically what the kernel does.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 56b220b32fa56efe6ba5a13b7e08a490ad566934
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Apr 22 20:47:17 2016 +0200

    tests/core_prop_blob: Add invalid tests to set fb props
    
    There's no properties on fb modeset objects, bug bugs in the
    kernel when trying to use those ioctls in such an invalid way.
    
    Cc: Dave Airlie <airlied@gmail.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ec26d970825ad54a69478c65b854879e6aaafc37
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Apr 22 20:47:05 2016 +0200

    tests/kms_addfb_basic: Add invalid tests to set fb props
    
    There's no properties on fb modeset objects, bug bugs in the
    kernel when trying to use those ioctls in such an invalid way.
    
    Cc: Dave Airlie <airlied@gmail.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f5d370cbd6c4fbd3bdf9ec0ea0addb4e42b30c1d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jun 4 21:25:17 2016 +0100

    igt/kms_cursor_legacy: Add background RT threads
    
    Saturate the CPUs with background RT threads to soak up any spare CPU
    not taken by testing threads.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7b34c51ff604fd6417928a0a9a0f6be7727e9eac
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jun 4 16:12:28 2016 +0100

    igt/gem_exec_whisper: Another twist on engine interchange
    
    Slightly less extreme than switching engines between commands, switch
    engines between pixels. This helps contrast the request amalgamation in
    execlists.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d2a810ed2d6d1aab310cb6c16131fe7a0e436bba
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jun 4 08:48:33 2016 +0100

    igt/gem_ctx_thrash: Scale estimated usage by execlists.num_engines
    
    Since with execlists we use a context per-engine, we consume a lot more
    space than we were currently estimating. Enough to hit oom on some
    machines.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=94145
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ce6adbee8fef10186e6ac184828e99d1ebc7e908
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jun 3 20:11:12 2016 +0100

    igt/gem_mmap_gtt: Exercise differing tile sizes
    
    Importantly this verifies that we pick a partial alignment/size
    suitable for the tile.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 05ca171aa9a6902614241f9685de2f62f30126d8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jun 3 10:43:09 2016 +0100

    benchmarks/gem_exec_nop: Extend submission to check write inter-engine sync
    
    Currently, we look at the throughput for submitting a read batch to a
    single engine or any. The kernel optimises for this by allowing multiple
    engine to read at the same time, but writes are exclusive to a single
    engine. So lets try to measure the impact of inserting the barriers
    between writes on different engines.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 32940a071c9344a0bf8e8e3226ea66f5feceee30
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Fri Jun 3 20:51:10 2016 +0300

    Introduced by 0e11befe442. openat(2) is used in igt_sysfs_set() w/ a
    relative path.  Fix by passing the correct dirfd.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>
    CC: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-By: Chris Wilson <chris@chris-wilson.co.uk>

commit 54577e7a83f5bfc2e97245badd043f78d5c8ee4f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jun 2 15:00:14 2016 +0100

    Mark up a few more execbuf tests with automatic fail for missed-interrupts
    
    Too many interrupts missed being ignored.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0e11befe4426c2accb1f350a63ae99022179c41b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 26 15:06:30 2016 +0100

    lib: Override the connector status using the sysfs status attribute
    
    There are two paths to force enable a connector, via debugfs and via
    sysfs. sysfs has the advantage of being a stable interface and of
    updating the connector after application (allowing us to not force a
    reprobe from userspace).
    
    v2: Don't assume Intel only
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit b3082ae7069bf75d87c7136db7ea0b0b444b4b27
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 26 15:05:38 2016 +0100

    lib: Add simple sysfs accessors
    
    igt_sysfs_set() for setting an attribute via sysfs, igt_sysfs_get() for
    reading.
    
    v2: Lots of little bugs in igt_sysfs_get()
    v3: Pass device to open, stop assuming Intel rules.
    v4: Test opening and reading!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3ce58b6f9502329d03207a786301d077e7f0cf6c
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Tue May 31 18:33:24 2016 +0300

    Updated NEWS, and bumped to 1.15.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 7be235c1247a8cf51f55938ef05cb41708924b8f
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Fri Apr 22 11:08:45 2016 +0200

    lib: Actually use provided size when creating BO
    
    When reworking igt_create_fb_with_bo_size to use
    igt_create_bo_with_dimensions, we mistakenly stopped acknowledging
    non-zero size parameters.
    
    To fix this, we move the core of the code to create_bo_for_fb and teach
    it to use the GEM APIs when a size is passed.
    
    igt_create_bo_with_dimensions ends up calling just create_bo_for_fb with
    a zero size because now the later is more generic than the former.
    
    Also, create_bo_for_fb now returns the handle of the BO that was
    created, as there's no point anymore in having it be a parameter passed
    by reference.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 303b380d728bc870c399ba46525854d323f894e7
Author: Matt Roper <matthew.d.roper@intel.com>
Date:   Thu May 26 16:02:05 2016 -0700

    igt_core: Search "." as final fallback for igt_fopen_data()
    
    Some validation teams seem to run tests out of source directories that
    have been nfs mounted or rsync'd to different locations on the target
    machine.  This causes the igt_srcdir that the tests were built with to
    be invalid on the machine the tests get run on.  Add the current
    directory as a final fallback for data file searches.
    
    Reference: https://bugs.freedesktop.org/show_bug.cgi?id=92248
    Cc: Humberto Israel Perez Rodriguez <humberto.i.perez.rodriguez@intel.com>
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 04b8f0e025d92b7b8f08a14c22ebe0686b9ba5ea
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 25 14:53:34 2016 +0100

    igt/kms_cursor_legacy: Fixup !fixture
    
    igt_fixture and its byzantine requirements
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cce2ff084eeb0e2f95d56b2b1d8b74515c589a9e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 25 08:34:25 2016 +0100

    igt/kms_cursor_legacy: Stress each CRTC individually as well
    
    Just to compare handling of plane->mutexes
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c74e07121085bb9d1957e8e8795a2464e43bd592
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 24 16:24:15 2016 +0100

    igt/kms_cursor_legacy: Show basic stats of iterations per child
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit dab6b6b62dce6baf041ea5387af197626737c8a2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 24 16:14:32 2016 +0100

    igt/kms_cursor_legacy: Add uncontended cursor updates
    
    Looking at the uncontended cases reveals a major contention cliff.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2da624e28ce7485a1c67e7650355b5273d88d690
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Tue May 24 15:32:35 2016 +0100

    tests/Android.mk: Update cairo dependant test list
    
    drm_read
    gem_exec_blt
    prime_mmap_kms
    Have cairo dependency through igt_kms.c so add to skip_tests_list
    to fix android build errors.
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>
    Reviewed-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 9c67adfe88786cb0a1f4fcc4ff11cdaeeaa617cb
Author: Feceoru, Gabriel <gabriel.feceoru@intel.com>
Date:   Tue May 17 15:05:47 2016 +0300

    tests: Moved gem_concurrent_blit back to the normal set
    
    Repairing the damage I caused not reading properly Daniel's comment in:
    https://patchwork.freedesktop.org/patch/81600/
    
    Leaving gem_concurrent_all only in the EXTRA set
    
    Cc: Daniel Vetter <daniel.vetter@intel.com>
    Cc: Marius Vlad <marius.c.vlad@intel.com>
    Acked-By: Daniel Vetter <daniel.vetter@intel.com>
    Signed-off-by: Gabriel Feceoru <gabriel.feceoru@intel.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit e4e18ddc59155ba30b2df30cc9dfd18767b03cec
Author: Robert Foss <robert.foss@collabora.com>
Date:   Fri May 20 18:59:30 2016 -0400

    tests/gem_render_tiled_blits: Switched to new aliases of intel specific functions.
    
    Switched from drm_XXX aliases drm_intel_XXX aliases for symbols where that
    switch is possible.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Emil Velikov <emil.velikov@collabora.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 29f080d5fb942badc8f02d459bc9174a23e9ee7c
Author: Robert Foss <robert.foss@collabora.com>
Date:   Fri May 20 18:59:29 2016 -0400

    tests/gem_ppgtt: Switched to new aliases of intel specific functions.
    
    Switched from drm_XXX aliases drm_intel_XXX aliases for symbols where that
    switch is possible.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Emil Velikov <emil.velikov@collabora.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bd860da689fbd810d68da3b1bca67f81e9b720b7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 24 08:31:22 2016 +0100

    igt/kms_cursor_legacy: Give each child a different CRTC access pattern
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9579e5447aa304d0b8d36688b8d0da0c97ca284a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon May 23 21:56:01 2016 +0100

    test: Add legacy cursor stress test
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f68735773c7b6597cf416c89c21e3be38c58f864
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon May 23 10:40:24 2016 +0200

    lib/crc: Update doc for igt_pipe_crc_get_crcs
    
    Noticed while discussing CRC tests with Ville that this was totally
    wrong.
    
    v2: Ville pointed out that it only does not block when opened using
    igt_pipe_crc_new_nonblocking. Still different from
    igt_pipe_crc_collect_crc, which will always block.
    
    v3: Fix type (Ville).
    
    Cc: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Acked-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit a56cacc924109447b166f495122fd005b3b44b24
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat May 21 20:58:58 2016 +0100

    igt/gem_exec_gttfill: qword writes require an extra bit on bdw+
    
    Set bit 21 to enable qword writes for Broadwell.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 415398a778e60354492d2adad2c3952133f8c6da
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 20 22:06:09 2016 +0100

    lib/gt: Replace hanging instruction
    
    First try an illegal instruction before the infinite loop to try and
    trigger a gpu hang more gracefully as the infinite loop is causing some
    older machines issues as the GPU hogs the entire systems and makes the
    machine laggy, unresponsive for long periods.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a7d58541977f7922b04ecd13159e186d1086c312
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 20 20:56:29 2016 +0100

    igt/gem_exec_gttfill: Limit to using 4GiB of GTT
    
    Since we do not use the allow-48b GTT per-object flag, even on
    Broadwell+ we will be constrained to 4GiB of usage GTT.
    
    Also only do a single pass for BAT as suggested by Marius Vlad.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2b4c35efb132168933ba6660fcf556a033b0b17b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 20 11:20:49 2016 +0100

    igt/gem_exec_whisper: Exclude from BAT
    
    At its heart gem_exec_whisper is a race detector between submission
    between multiple rings and the execution. It is made even more
    unreliable by debug kernels making it nigh impossible to submit batches
    faster than the GPU can execute. As such, it's relevance for BAT is
    dubious.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit fbf5edb7ec527d807edcf5deb0af17c6d763f08a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 20 11:19:17 2016 +0100

    igt/gem_sync: Drop individual engines from BAT
    
    Rely on testing every engine in parallel to detect the most common
    synchronisation problems ("missed interrupt syndrome") for BAT.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit bde2aeea008910bb38361ff92285f0d9df9f1c1e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 19 16:59:37 2016 +0100

    benchmarks/gem_exec_fault: Reset alignment to 0
    
    Oops, because -nightly doesn't handle 64bit alignments correctly, this
    was not working quite as expected.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 096056594cd6c58151b6bff8625f678e057dd7a8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 19 16:12:34 2016 +0100

    igt/gem_exec_gttfill: Exclude the page allocation from the timeout
    
    Since we want to focus on the issue of running with a full-gtt, and part
    of that is in handling the eviction, do a warm-up pass before we start
    the clock that allocates the objects and fills the gtt.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 99c015af48f55b63df26e3c45bbff4d3c1fcb54b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 19 15:20:38 2016 +0100

    benchmarks: Add gem_exec_fault
    
    If we specify an unobtainable alignment (e.g, 63bits) the kernel will
    eviction the object from the GTT and fail to rebind it. We can use this,
    to measure how long it takes to move objects around in the GTT by
    running execbuf followed by the unbind. For small objects, this will be
    dominated by the nop execution time, but for larger objects this will be
    ratelimited by how fast we can rewrite the PTE.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit dc8cf567a830e9fc1557693115740cfc52fa8406
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 19 14:32:56 2016 +0100

    igt/gem_cs_prefetch: Remove from BAT
    
    With the introduction of gem_exec_gttfill, we have a basic test that
    fulfils the role that I was using gem_cs_prefetch for (stressing the
    allotment of the full GTT) without the requirement for carefully
    checking for a prefetch layout bug.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 51fcf03952ee416703c449acb13ec37cec2be00b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 19 12:26:59 2016 +0100

    tests: Add gem_exec_gttfill
    
    This is an attempt to emulate the stressful nature of gem_cs_prefetch
    without being as slow i.e. without trying to detect the GPU prefetch
    issues and just emphasive the basic correctness in handling enough
    batches to fill the GTT similar to gem_ringfill aims to fill a ring.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 12fd590b5ccf9683e72830b88a6baf87fa27fb68
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Thu May 19 10:49:29 2016 +0200

    build: Skip configure step if is NOCONFIGURE set
    
    Allow users of autogen.sh to skip the call to configure, which is needed
    when building out of tree.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 7aee5110f0ac355674cfc07055eb08784314547f
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Fri May 6 15:36:23 2016 +0200

    tests/testdisplay: Open DRM device with DRIVER_ANY
    
    So that this test can be run in drivers other than i915.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 99bdf4f0ff3e2000afb4bf71f4a73e4589946050
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Fri May 6 15:36:22 2016 +0200

    tests/testdisplay: Use cairo helpers to draw to plane
    
    Paint the color key with cairo, so the test doesn't have to map the BO
    by itself, which depends on the driver being tested.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit a1b0ed1dc48ea209b2a3a07a2d24245ad2cd1948
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 19 11:35:14 2016 +0100

    igt/gem_exec_flush: Exclude -before- subtests from BAT
    
    The *-before-* tests were designed to detect a potential issue with long
    speculative prefetches that would load the map[] before we have even
    called execbuf(). As CPUs get smarter and able to look ahead further we
    are starting to see failures and as we know the code is deliberately
    buggy exclude the tests from BAT. (I want to keep the tests in the full
    suite so that we can record which processors are affected, and look for
    related issues.)
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=95378
    References: https://bugs.freedesktop.org/show_bug.cgi?id=95488
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4dc4ebf3ee5445e0888c6a793961b7840a6d5dd8
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue May 17 14:41:23 2016 +0300

    lib/igt_kms: move gtk-doc comments next to the definition
    
    Now that we have actual functions for kms_test_*_str since
    
    commit 2d432fc5773df17f04283f4780dab161dd2e1c85
    Author: Jani Nikula <jani.nikula@intel.com>
    Date:   Wed May 11 12:42:06 2016 +0300
    
        lib/igt_aux: define actual functions for kmstest_*_str
    
    move also the gtk-doc comments next to the definitions, for consistency.
    
    Acked-by: Daniel Vetter <daniel@ffwll.ch>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 5cc3175ca5a0374c17bd201ba5a35ef4ff076003
Author: Feceoru, Gabriel <gabriel.feceoru@intel.com>
Date:   Fri May 13 14:45:09 2016 +0300

    tests/kms_flip: Adjust tolerance when counting frames
    
    basic-flip-vs-wf_vblank subtest sometimes fails asserting counted frames to
    be aproximately equal with the estimated number.
    
    This is a false negative, one of the reasons being the precision lost when
    truncating a fractional number.
    
    Fixed this by using floating point arithmetic.
    
    Cc: Jani Nikula <jani.nikula@intel.com>
    Cc: Daniel Vetter <daniel.vetter@intel.com>
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=95380 [mvlad]
    Signed-off-by: Gabriel Feceoru <gabriel.feceoru@intel.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit c785a89ee61807d2e8d76847481225e649aa5aec
Author: marius vlad <marius.c.vlad@intel.com>
Date:   Mon May 16 13:36:48 2016 +0300

    autotools/: Allow building tests/gem_concurrent_{all, blit}
    
    Introduced by a633ad03c6 (tests: Separate tests with lots of subtests).
    
    v2: Fix commit typo (Jani Nikula).
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit b88bce40a25d2393a51298f0d699e66491975cc9
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Fri May 13 16:53:57 2016 +0300

    tests/gem_evict_everything: use uint64_t in subtest params
    
    Use large enough datatype so that we get the accurate
    mem requirements and thus skips on 48bit ppgtt.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=94146
    Acked-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 1dd3ff00148776961b20c6970916181b8482ae41
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Thu May 12 15:35:37 2016 +0300

    tools/intel_bios_reader: print errors to stderr, return EXIT_FAILURE
    
    Be consistent with exit status and printing errors to stderr.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 4daac359fd896ac29007aba2659c34e88dfcbcdd
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Thu May 12 15:25:13 2016 +0300

    tools/intel_bios_reader: clean up VBT/BDB header dumping
    
    Make the output nicer. Do not print the header if a specific block is
    requested.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit f482e234d4f481d1ff886523e77922dcac87dee5
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Thu May 12 14:28:50 2016 +0300

    tools/intel_bios_reader: abstract header information dumping
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit e380239dc838f1e8a2ebcc9ddac556e3842ea195
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 13 10:30:05 2016 +0100

    igt/gem_reset_stats: Fix pending batch count for bans
    
    Since 9ba9af2ea4 ("lib: Skip execution in gem_has_ring()"), we no longer
    do a double execbuf for each hang, as the gem_require_ring() check now
    does a dummy execution that does not contribuee to the pending batch
    count.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit fb6129797ab8fc97a39e89990ccd3d9247ccf313
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 13 09:49:29 2016 +0100

    igt/gem_exec_flush: Include a bit of information about the test setup
    
    When reading reports, it is much easier for the test to tell us how it
    will be run than try and remember the configuration of a random machine.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ec779458b22de6355343b28bd636a1092882c217
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Wed May 4 20:35:18 2016 +0300

    tools/intel_bios_reader: add help
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit be5864ee1d9765d00a342b34f3e87836d7e509e3
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue May 3 15:40:13 2016 +0300

    man: update intel_bios_reader man page
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit b4f96db92d1469f8b41f82557b198c838803e9a1
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue May 3 12:48:38 2016 +0300

    tools/intel_bios_reader: free the block returned by find_section
    
    Since we no longer store pointers to previous blocks, we can free them.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 96647f1845a8b17584883395eda209523fbf6088
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue May 3 12:36:32 2016 +0300

    tools/intel_bios_reader: add --all-panels option to dump all panels
    
    Only dump the one matching panel_type by default. Cleans up the output,
    and allows the users to get more verbose output if he so chooses.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 1c33231d9daf71282ca85d0c66a4d717e3aa0397
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue May 3 12:26:22 2016 +0300

    tools/intel_bios_reader: add support for dumping only specific section
    
    Now that the parsers for blocks don't depend on the dump ordering, we
    can also choose to dump specific sections only.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit b0a8b08b84908350a461ff20a483faf45f348ec3
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue May 3 12:17:16 2016 +0300

    tools/intel_bios_reader: add --hexdump option to dump hex, disable by default
    
    The hex dump is useful, just not by default.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit eb416de99e6284ae8e6a331a1031a8a1c4f46e24
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue May 3 12:10:21 2016 +0300

    tools/intel_bios_reader: dump the blocks in numerical order
    
    All parsers fetch the information they need without ordering
    constraints, so dump all in numerical order. This also makes it
    unnecessary to track already dumped blocks.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 21467dc5e48ff32892e3f390aaba3f72bc5c532f
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue May 3 12:07:30 2016 +0300

    tools/intel_bios_reader: let the user specify panel type on the command line
    
    On some systems the VBT panel type may be overridden in the opregion,
    and we can't necessarily get at that. Let the user specify it on the
    command line.
    
    As a byproduct, the section parsing order no longer matters.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 17ae0a6d6b7c4aba359875988e2a896cf4943751
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue May 3 11:52:12 2016 +0300

    tools/intel_bios_reader: drop dependencies on lvds block parsing
    
    Don't mandate a specific ordering on the parsing of the blocks.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit b6ccc55f074241341af5ee025d86d3d05c263180
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Thu May 12 14:02:05 2016 +0300

    tools/intel_bios_reader: move devid to context too
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 3a81cf510fd0a5ee1b93ea343abc30533833b9d5
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue May 3 11:44:32 2016 +0300

    tools/intel_bios_reader: move more globals to struct context
    
    It's just good hygiene.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 76a0462439b4186ceb590b3479eb7a7f6acae995
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Mon May 2 18:33:19 2016 +0300

    tools/intel_bios_reader: pass around a context pointer instead of bdb_header
    
    Allow putting stuff in there instead of a global. A bit like passing
    dev_priv in the kernel.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 474e58eb18be6c8f75a526819edf460105ad2e46
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue May 3 11:31:36 2016 +0300

    tools/intel_bios_reader: drop silly tv_present variable and printout
    
    There's no point in dumping a fixed value.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit c6ccbb5b870e45622a96d6e489100ad9ea2fdab5
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue May 3 11:30:40 2016 +0300

    tools/intel_bios_reader: drop unused lvds_support variable
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 4d4b1c22cfcd841ebb751a1170e6d1f8096b16a0
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Mon May 2 18:15:55 2016 +0300

    tools/intel_bios_reader: add --devid parameter
    
    Not sure it's a great idea to do platform specific parsing of the BIOS,
    but at least make it possible to pass in the devid on the command line
    and not just the environment.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 8a06cc12382dc999a32198d4fdf37a1e5ba6c436
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue May 3 11:29:43 2016 +0300

    tools/intel_bios_reader: add command line option parsing and --file parameter
    
    Keep positional parameter support for entering filename for backwards
    compatibility.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 1272b9cd20895533f765ed030fe57282ece6ae48
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue May 3 11:29:25 2016 +0300

    tools/intel_bios_reader: make VBIOS non-global
    
    No need for it to be global.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 88648205e3a884e04362a502b1793a2cd3f8ab83
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed May 11 17:07:26 2016 +0200

    lib/igt_aux: Polish docs for igt_timeout
    
    Add docs, rename parameter and rename the macro to igt_do_timeout to
    make it clear it works like a loop.
    
    v2: Rename instead to igt_until_timeout (Chris).
    
    Acked-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit d7050f9f79fee8fb7c790f355c984d9e5141e1c5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed May 11 17:06:28 2016 +0200

    lib/igt_aux: Polish docs for igt_interruptible
    
    - Give __ prefix to internal funcstion and structs, only
      igt_interruptible is used by tests.
    
    - Move docs to igt_interruptible and adjust.
    
    - Explain more clearly how the timeout is getting doubled each
      iteration until no more interruptions happen. Also rename the
      argument to give it a more meaningful name in the docs.
    
    - Link from other functions to this one for cross-referencing.
    
    - Rename to igt_do_interruptible to make it clearer it's a loop,
      inspired by do {} while () loops.
    
    v2: Rename instead to igt_while_interruptible and fix typos (Chris).
    And add gtk-doc for igt_ioctl, too.
    
    Acked-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 701d8fdb363443453c4b613e9180f75ad36a7321
Author: marius vlad <marius.c.vlad@intel.com>
Date:   Tue May 10 17:32:15 2016 +0300

    benchmarks/, overlay/, demos/, tools/, tests/: Add optional Werror.
    
    v2: Initially added Werror by default. Make it optional so it doesn't
    break android build and (potential) distros maintaing the package
    (Hinted by Damien Lespiau).
    
    --enable-werror will enable -Werror compiler flag.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>
    Acked-by: Damien Lespiau <damien.lespiau@intel.com>

commit 2d432fc5773df17f04283f4780dab161dd2e1c85
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Wed May 11 12:42:06 2016 +0300

    lib/igt_aux: define actual functions for kmstest_*_str
    
    Macro generated function definitions considered harmful. You can't find
    them with code search tools or grep. There may be places where such
    things might be useful, but this is not it.
    
    Define actual functions for kmstest_encoder_type_str(),
    kmstest_connector_status_str() and kmstest_connector_type_str(). While
    at it, make the arrays static const.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit dfe896489c32aab316ae92f54ae251df21a7c411
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Wed May 11 12:42:05 2016 +0300

    lib/igt_aux: update encoder and type names
    
    Virtual, DSI, DP MST.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit c39ab952e5fdd5d921d41d825eeadaf7ec70dd6a
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Mon May 2 18:21:47 2016 +0300

    tools/intel_bios_reader: drop unused macros
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit cc247550603173a37ff6f55ee6cbd65e74ff7dc7
Author: marius vlad <marius.c.vlad@intel.com>
Date:   Mon May 9 16:23:11 2016 +0300

    tests/{gem_ctx_switch, gem_exec_create}: Fix shadow declaration of child variable.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ef8fc998a74b7a858542e87c69334be8d6a527d0
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Mon May 9 14:43:20 2016 +0300

    tests/prime_mmap_kms: Fix white-space.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit c2a2ab61948252078bdf8c84f272890522961adc
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Mon May 9 14:37:30 2016 +0300

    NEWS: Update news.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 122f34c3901b40ae1ae8a12c0d482b84a60efc81
Author: Tiago Vignatti <tiago.vignatti@intel.com>
Date:   Fri May 6 16:51:29 2016 -0300

    prime_mmap_kms: show case dma-buf new API and processes restrictions
    
    dma-buf new API consists of:
    
    - mmap(dma_buf_fd, ...): the ability to map a dma-buf file-descriptor of a
    graphics buffer to the userspace, and more importantly, to actually write on
    the mapped pointer (which was not possible before). It’s worth noting that the
    Direct Rendering Manager (DRM) and the hardware driver implementation are
    fundamentally important to safely export the graphics handle to be mapped.
    
    - ioctl(dma_buf_fd, DMA_BUF_IOCTL_SYNC, &args): cache coherency management in
    cases where the CPU and GPU devices are being accessed through dma-buf at the
    same time. Coherency markers, which forward directly to existing dma-buf
    device drivers vfunc hooks, are exposed to the userspace through the
    DMA_BUF_IOCTL_SYNC ioctl and have to be used before and after the mapped area
    is accessed. This is fundamentally important in hardware architectures where
    the graphics engine and the CPU cores don't share caches but also important in
    other type of hardware where the memory hierarchy is (most of the time)
    coherent. More details can be found in this patch set:
    
    http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=c11e391da2a8fe973c3c2398452000bed505851e
    
    v2: use uint32_t for color type, increment the variable and add
    --interactive-debug=paint
    v3: use igt_display_commit() to mode set the crtc so the rectangle is shown
    painted; also added Testcase description on the beginning of the file.
    v4: remove crtc actually which seems superfluous; add a igt_skip_on in case
    support for dma-buf mmap is nonexistent.
    
    Signed-off-by: Tiago Vignatti <tiago.vignatti@intel.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit f942e42815ad81901dbccd984d0f8a4775826be7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun May 8 20:58:26 2016 +0100

    benchmarks/gem_latency: Revert to unsafe mmio access on gen7
    
    In theory, we need to only worry about concurrent mmio writes to the
    same cacheline. So far, disabling the spinlock hasn't hung the machine.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 049150307889a1870cf961e18b964ffa70ae1b59
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun May 8 14:42:10 2016 +0100

    benchmarks/gem_blt: Add forked variants
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 76f3b3103710a912e691cb56745a38a869dd2fa5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun May 8 14:42:10 2016 +0100

    benchmarks/gem_exec_nop: Add forked variants
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0a67950a73d4c9180d7c55b66d4cfc0f1a96e42e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun May 8 14:35:08 2016 +0100

    benchmarks/gem_create: Report combined concurrent allocation rate
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8ceab4f2166e6510df1614c360cb1828cbb4c160
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 5 14:53:12 2016 +0100

    igt/gem_exec_parse: Simple exercise for MI_LOAD_REGISTER_REG
    
    Command parser version 7 introduces the ability to copy between
    regsiters from the Haswell RCS with MI_LOAD_REGISTER_REG. This provides
    a quick smoketest of that ability.
    
    v2: Add some negative tests as well
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6ec897c6102a20b93ec8c8e5245d3bf61dde511e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat May 7 21:26:56 2016 +0100

    benchmarks: Add some contention tests for object/context creation
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4b0f3bfc2edd4228ec469327ab9fe53e8b9722e9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat May 7 21:06:50 2016 +0100

    igt: Add a few more forked variants of basic tests
    
    Check contention for context and object creation.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b1083e59bd90b212d85d8fc34f5715c10cefe88e
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Fri Apr 15 14:58:26 2016 +0200

    tests/kms_addfb_basic: Move tiling tests into their own groups
    
    So those subtests that require tiling don't cause unrelated subtests to
    be skipped.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit aa2867249da1d54fd8d28c899db1f20d1a670b79
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 6 11:53:07 2016 +0100

    igt/gem_exec_flush: Add some commentary about clflush testing
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a10ef457ca778e1a560bc7635c0d1726ed191e6d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 6 11:41:06 2016 +0100

    igt/gem_exec_flush: Flush before each use
    
    After we inspect map[i], we must flush again before checking map[i] for
    the xor pass.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2c3144aaee6547c70720b80b7f00c0be8bb7c214
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 6 10:46:50 2016 +0100

    igt/gem_exec_flush: Add a WC mmapping of the target buffer
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 93ab767511cb7a82fded43f2ee181dd9cf6d588c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 6 10:42:28 2016 +0100

    igt/gem_exec_flush: Test cacheline invalidation before execbuf
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5f7835c878735ee78df680d46a66a70eecd90210
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 6 09:06:49 2016 +0100

    igt/gem_exec_flush: Restrict BAT batch testing
    
    Only do one mode of batch writing for BAT, and hope that is sufficient
    to route out all the coherency problems when doing the cmdparser and
    when not. We still have the full set for non-BAT, just less of a
    smokescreen.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b4b2ac346c92fcfad9bc33ff6cc27849ce6240bc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 4 16:43:59 2016 +0100

    igt/gem_exec_flush: Halve the number of BAT tests, but double their runtime
    
    On the CI machines, the coherency tests are flip-flopping on byt/bsw.
    Undesirable as they should always fail (until we have a good w/a).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a263a043ecd53a1c15848c51a7b3232878391130
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 4 13:51:58 2016 +0100

    igt/gem_exec_flush: Also check flushing before the cmdparser
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8adb5a07f2a3c7eadd9704b83692f72070ef946c
Author: Feceoru, Gabriel <gabriel.feceoru@intel.com>
Date:   Fri Feb 26 14:59:03 2016 +0200

    tests/kms_plane: Skip the test when configuration couldn't be applied
    
    This could happen when the selected pipe cannot be used with the connected
    port due do HW constrains.
    
    v2: Apply review comment (Marius)
    
    bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=86763
    Signed-off-by: Gabriel Feceoru <gabriel.feceoru@intel.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 26bec97c21bbff761231e350dfea47f1a02e2e99
Author: Feceoru, Gabriel <gabriel.feceoru@intel.com>
Date:   Fri Feb 26 13:21:15 2016 +0200

    lib/igt_kms: Add fail exit branch in do_display_commit()
    
    On Cherryview PIPE_C can only be connected to PORT_D (bspec).
    The driver properly reports the crtc_mask for the encoder, however the
    mismatch between pipe and port is not reported back to the test.
    
    Add support for detecting this case so the test can be skipped.
    
    v2: Apply review comments (Marius)
    
    Signed-off-by: Gabriel Feceoru <gabriel.feceoru@intel.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 11a2b0dc8a7bc6224ec3ca34d2f617de8e54b652
Author: Feceoru, Gabriel <gabriel.feceoru@intel.com>
Date:   Fri Feb 19 14:34:51 2016 +0200

    tests/kms_plane: Skip on no connected outputs
    
    When no display is connected all kms_plane subtests pass although
    no testing is done.
    
    Change it by reporting the subtests as skipped.
    
    Signed-off-by: Gabriel Feceoru <gabriel.feceoru@intel.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 786d584624556103e784c021d103db1f8232bd35
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue May 3 17:34:05 2016 +0300

    man: add .gitignore with defs.rst
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 6102e2eca949b6827def000407224f3c30a37204
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 3 21:12:12 2016 +0100

    igt/gem_exec_flush: Give even batch write a unique value
    
    One property lost in the expansion for various coherency checks was
    ensuring that every time we overwrote the batch it had a unique value
    (to ensure that the GPU was seeing the latest value).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7b7503fb6ccbe7fd05f712c3e286b42c30b084d7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 3 17:03:49 2016 +0100

    igt/gem_exec_flush: Stress a few more synchronisation paths for execbuf
    
    Look at handling of multiple batches within the buffer and avoiding as
    much synchronisation as possible.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ec83ef916779d837efb29d8978cfbb8b690c6ce1
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue May 3 10:40:22 2016 -0400

    kms_panel_fitting: Enable connectors with "scaling mode" property set.
    
    Enable testing on all connectors that have the "scaling mode"
    property set.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=93012
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 2254aff17eca95ab570947701c79690965705f60
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue May 3 10:40:21 2016 -0400

    kms_panel_fitting: Enabled test on non-Intel hardware.
    
    Switched from DRIVER_INTEL to DRIVER_ANY to enable test
    on all hardware.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 0fee72d8100ebdf4907d8c36c95f6d03273def56
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue May 3 10:40:20 2016 -0400

    kms_panel_fitting: Switched DRM format to a hardware agnostic alternative.
    
    Changed the DRM format to LOCAL_DRM_FORMAT_MOD_NONE since it
    is hardware agnostic.
    
    Also fixed formatting/tabs.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit a9c0943fa2009721cf368977bd7c7c74e29b3b08
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue May 3 10:40:19 2016 -0400

    kms_panel_fitting: Remove un-used variable.
    
    ref_crc is never assigned or read, and can be safely
    removed.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit e2e56a903970b672a9fde7c1b4e044a5950daefd
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue May 3 10:40:18 2016 -0400

    kms_panel_fitting: Remove un-read variable pipe_crc.
    
    pipe_crc in data_t is assigned an allocated memory space and
    then later free'd. But it is never used for any comparisons.
    It should therefore be safe to remove pipe_crc and the crc
    requirement.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 761ac544e7fd3f708b04a7b7853416716753c101
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue May 3 10:40:17 2016 -0400

    kms_panel_fitting: Remove un-read variable.
    
    Remove devid from data_t since it is never read.
    Also remove one assignment to devid.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 26afcfc002c369f6dd5e3dfa95f10b29396fd1a8
Author: Robert Foss <robert.foss@collabora.com>
Date:   Tue May 3 10:40:16 2016 -0400

    kms_panel_fitting: skips if there's a non-eDP display connected. Fix it.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=93012
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit a1e38c52c618b6c08ccce78d3ca315c62000096f
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Fri Apr 22 13:00:01 2016 +0300

    tests/kms_sink_crc_basic: clean up assert_color and provide more details
    
    We can simply sscanf the crc in one go. Also split up the igt asserts to
    get better details about what went wrong.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 18170d211c10595eef850138fce598fec2a89a17
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Wed Nov 18 12:52:40 2015 +0200

    tests: limit pm_backlight actual brightness tolerance between 0 and max
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 7afd94ed62176961ea8a90f8b07c276b5afaf2d8
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Wed Nov 18 12:28:06 2015 +0200

    tests: add context param to pm_backlight tests
    
    We'll be adding more context for the subtests than just the max
    brightness.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 77a76ba09acc1cf2e6fa16b9038460ecac81404d
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Wed Nov 18 12:46:53 2015 +0200

    tests: use igt_assert_lte to verify pm_backlight test results
    
    Gives out better diagnostics than just igt_asssert.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit f201495575a36b2c2202a45c34dd304cb40d7d3f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 3 11:04:00 2016 +0100

    lib: compute exitcode first
    
    Before we print the exitcode to the debug/kmsg logs, we should inspect
    what its final value will be. For example, in the case of running
    multiple subtests which all happen to be skipped, igt_exitcode is 0, but
    the final exit code will be 77.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Tested-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 9f2621e1b5301f33c676a99c52879d3c6984b524
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 3 09:10:52 2016 +0100

    igt/gem_exec_flush: Test continuously rewriting the batch
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d654aa0d091c0d7ccb7c8b13d00460ad6ce99714
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 3 08:37:54 2016 +0100

    igt/gem_ringfill: Avoid CPU -> GTT -> CPU transition
    
    Avoid the second pair of full clflushes when setting up the batch.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3edaa1d347e5c91058a5dfab821e57beb5217ccc
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Fri Apr 29 17:55:29 2016 +0300

    tools/intel_reg_decode: drop confusing use of IS_965()
    
    Unlike in the kernel driver coding style, IS_965() matches the platform
    and all subsequent ones. Replace IS_965() with suitable but less
    confusing alternatives.
    
    Most occurences are on code paths that only get called for gens 2, 3 and
    4, so replace those with IS_GEN4(). In the one other call site just flip
    the condition to check for gens 2 and 3 instead.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit c038518438e85f5f91a8608b062f8353d9b6dede
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Fri Apr 29 17:43:58 2016 +0300

    lib/intel_chipset: drop unused IS_9XX()
    
    It's also confusing as the style differs from the kernel (exact platform
    in the kernel vs. the platform and any later ones in igt).
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit e279954f1eb2c5cf9234ebbc3c1de201013ca422
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Mon Apr 25 14:21:22 2016 -0700

    tools: Add missing Kabylake codename strings.
    
    No functional change and no change in the current format.
    Just introducing the missing Kabylake name strings.
    
    v2: Duh! forgot the ")"...
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit d9025d3298d8cb647b754e7f5d5e95e3dca67244
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon May 2 18:55:24 2016 +0100

    igt/gem_exec_flush: Match gem_set_domain to pointer access
    
    When using the kernel set-domain cache management, we need to set the
    domain as appropriate for our pointer access. In this case we access the
    buffer through a CPU mmap, and so we must request access via the CPU
    domain.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 22e6157d383c5fe1115ed05aab3909c77feb8856
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon May 2 16:08:46 2016 +0100

    igt/gem_exec_flush: Immediately repeat the same cacheline
    
    When looking at a pair of GPU writes, where we want to make sure that
    the clean cacheline is invalidated automatically, we want to reuse that
    cacheline whilst we know it remains valid (i.e. repeat the test using a
    new value to the same location).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cf07aa2fc6a50b2fd2ff8bd2d0953818bee33690
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon May 2 15:35:56 2016 +0100

    lib: Fixup u64 multiply for computing nanoseconds
    
    32bit builds ran into a silly multiplication issue when computing
    elapsed nanoseconds of more than 2s...
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6862b33d50f771538f439691c1f9c10e7bc01630
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon May 2 14:49:17 2016 +0100

    igt/gem_exec_flush: Move assertions out of interruptible loops
    
    Since the value in the bo may be altered by the test, we only want to
    repeat phases of the test to avoid breaking the test itself.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 47825918733b3761f640ec9e1b8743da0932de9f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon May 2 14:42:54 2016 +0100

    lib: Tweak calibration of initial settimer delay
    
    If we assume that the first settimer and clock_gettime() itself have
    appreciable overhead, try to exclude those from the calibration delay.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 92a95888410d0d0c4be2bdc74f30367e07207cfd
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Apr 25 23:21:34 2016 +0300

    tools/intel_watermark: Dump linetime watermarks on hsw/bdw
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 7c70d2fca25e5630b2fa2fb25da5dc953ce3c6e1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon May 2 13:22:45 2016 +0100

    igt/gem_exec_flush: Mark mmap-wc dependency
    
    Add a requirement for mmap-wc so that failure on older kernels is explained.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5715089c5139221cb6a0bfda2352cf8e5c416b32
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon May 2 09:20:00 2016 +0100

    benchmarks/gem_latency: Report throughput
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 691b76a84bd0f49130ae80e85b5b7553a2e1d9ba
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon May 2 09:15:23 2016 +0100

    igt/gem_exec_flush: Use a cacheline stride
    
    Look at different cachelines on each pass, otherwise each group of 16
    flush the same cachline.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 805a05caaeb529732cbc01b2f3a9b6fc6e7cb3da
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon May 2 09:01:48 2016 +0100

    igt/gem_exec_flush: Add interruptible testing
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 16c9edb464bdf076ab9ae4219c02106d326855d4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon May 2 08:57:29 2016 +0100

    igt/gem_exec_flush: Add basic set-domain checks
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f3532cab978ec715cce8eeb8c4e355dbcf53a374
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun May 1 21:45:00 2016 +0100

    igt/gem_exec_flush: For good measure, check pread/pwrite
    
    As a point of comparison, test the pread/pwrite interface as well.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7d08913aeb80cc609678e6b73a836af9f1aa0da2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun May 1 16:39:14 2016 +0100

    lib: Enable clflush for 32bit x86 builds
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 89f354e0a5008f7a51a785c52c1d25a32b052c26
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun May 1 15:34:56 2016 +0100

    igt/gem_exec_flush: Use subtest groups to tidy requirement checking
    
    We can make the requirement testing and reporting tidier by using
    igt_subtest_group.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a0d6645d45a282834c0d169a44e8a68d8fe37b17
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun May 1 15:14:37 2016 +0100

    igt/gem_exec_flush: Add a read-only variation
    
    Alternate between two values written by the GPU so that we can look for
    stale cachelines without having to overwrite the value with the CPU.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b4817052080fdc85e2376a5d63dafd8238e95d67
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun May 1 09:07:29 2016 +0100

    lib: Apply magic clflush serialisation
    
    On Baytrail, Braswell and Atoms beyond we see an issue where the mfence
    is insufficient to force the cacheline to be coherent (i.e. such that
    writes from the GPU are visible by the CPU after the call to clflush). A
    second clflush is ordered with an earlier clflush to the same address
    and this appears sufficient to give the coherency required for GPU/CPU
    interop.
    
    Testcase: igt/gem_exec_flush
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Akash Goel <akash.goel@intel.com>

commit ef3f61a6d304c5bcec1ea892f292a0cf2c9062cc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 29 20:00:25 2016 +0100

    tests: Add gem_exec_flush
    
    A basic check that the execbuf flushes writes from the batch and that
    they are coherent afterwards.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1aebeeb440b2c418ff8c3e057e57826647a152b7
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed Apr 27 15:58:24 2016 +0100

    igt_kms: Fix use after free in kmstest_get_pipe_from_crtc_id
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 79f804e8d89937b16247f6a6b30657e70a9ff722
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 27 17:59:40 2016 +0100

    benchmark/gem_latency: sync startup correctly
    
    When waiting for the producers to start, use the cond/mutex of the
    Nth producer and not always the first.
    
    Spotted-by: "Goel, Akash" <akash.goel@intel.com>
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4a62f0b43f12c68d86e77fd0529c0f18e6a78ba1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 27 17:58:15 2016 +0100

    igt: Add gem_exec_parallel
    
    Attempt to fill buffers using many clients working in parallel.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit abc8aa40dec9c875f4eb65d7cdd842940224e9e4
Author: marius vlad <marius.c.vlad@intel.com>
Date:   Tue Apr 26 17:30:59 2016 +0300

    tests/gem_close_race: Add igt_fixture block for igt_stop_hang_detector.
    
    igt_fork_hang_detector() was called from a igt_fixture block, while its
    counterpart (igt_stop_hang_detector) was called normally, causing
    SIGTERM to be sent when running under check target.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 102943d1bab55e789ffc14f84cdc2567e5916c8c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 25 18:35:49 2016 +0100

    igt/gem_busy: Avoid BSD emission on gen6
    
    Remember to skip using BSD on gen6, unless you want to kill the machine.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=95134
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 81864b55b0d3023711a090e75c68e4ea4a185ba2
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Apr 20 12:25:52 2016 -0400

    core_getversion: Only verify major version for i915.
    
    This change mirrors the change in drm made by krh@redhat.com
    on "Mon Apr 6 17:18:17 2009" on the drm branch intel_on_all_hw.
    
    The assert(major < 1) is only needed for the legacy intel driver.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Reviewed-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4aeed6e8295cd4961ecc47d44334943ad08d73af
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Apr 20 12:25:51 2016 -0400

    core_getversion: Switched from igt_assert to assert helpers.
    
    Switched to assert helpers to enable better error output.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    [tomeu: fix test of major version to be lte]
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Reviewed-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8753f7769202607ecfd3d2705728ab7665e62864
Author: marius vlad <marius.c.vlad@intel.com>
Date:   Mon Apr 25 15:25:00 2016 +0300

    tests/gem_busy: Fix passing invalid fd for basic-parallel-* tests.
    
    Caught by check target.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit b7135575e7dfb7b610afeb08ac2b70f50d28c79e
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Mon Apr 18 09:53:47 2016 +0200

    tests/kms_flip_event_leak: Open DRM device with DRIVER_ANY
    
    So that this test can be run in drivers other than i915.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Series-version: 1
    Series-to: intel-gfx
    Series-cc: padovan, daniels, marcheu, seanpaul, xexaxo, fedkem, mvlad, danvet
    Series-prefix: i-g-t
    Cover-letter:
    Make more tests generic
    Hi,
    
    these patches allow a few more tests to run on drivers other than i915,
    mainly by removing the last usage of
    DRM_IOCTL_I915_GET_PIPE_FROM_CRTC_ID and removing superfluous dependencies
    on bufmgr and tiled BOs.
    
    Thanks,
    
    Tomeu
    END

commit 0b741cec0ebfb4b772768aeb2f711b1eb34397a8
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Mon Apr 18 09:53:27 2016 +0200

    tests/kms_flip_event_leak: Use non-tiled formats
    
    As the test doesn't actually need tiled BOs, drop the tiled formats so
    the test can run on drivers other than i915.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 857b8b47d1ca2745ae0856548f5521463175b132
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Thu Apr 14 10:39:23 2016 +0200

    tests/kms_flip: Open DRM device with DRIVER_ANY
    
    So that this test can be run in drivers other than i915.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 52a5518c3eda09e50277e4f731e0383923dddbb1
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Thu Apr 14 10:38:23 2016 +0200

    tests/kms_flip: Move bufmgr requirement into subtests
    
    Because bufmgr is currently a i915-only thing and it's only needed in a
    subset of the subtests, require it only in the subtests that actually
    need it so that the other subtests aren't skipped without a reason.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 39eb7043e63bb30e5e3c375a4577103c88235d2f
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Fri Mar 25 10:58:42 2016 +0100

    tests/kms_flip: Create tiled BOs only when needed
    
    Because attempts to create a tiled BO will cause a igt_require call to
    fail on drivers that don't support tiling, do so in the subtest that
    actually needs it so that other subtests aren't skipped without reason.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 331585573cf0c2a061ad5527b2226f448815e093
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Wed Mar 23 11:53:46 2016 +0100

    tests/kms_render: Move dependency on i915 into subtest
    
    Batchbuffers are only needed in the subtest that does the blit on the
    GPU, so move that dependency into it so the other subtest can be ran on
    !i915.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit a8be527172022d3a12196505ee6a78bee852da94
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Fri Feb 26 09:55:48 2016 +0100

    tests/drm_read: Drop DRM_IOCTL_I915_GET_PIPE_FROM_CRTC_ID
    
    So the test runs on other drivers, drop the usage of the i915-specific
    DRM_IOCTL_I915_GET_PIPE_FROM_CRTC_ID ioctl.
    
    Wait for a vblank event on pipe0 and if we get it, then the test can
    proceed (code copied from kms_vblank).
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit 90a7e3bae5987d1b5fb7fe4d5413bde2b9755bca
Author: marius vlad <marius.c.vlad@intel.com>
Date:   Wed Apr 20 20:49:56 2016 +0300

    lib/igt_aux: Half the timeout for suspend to RAM and a third for suspend to disk.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 660147488e3391c1b0c887ee199860fc2a2ca8af
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Fri Apr 22 16:16:15 2016 +0100

    kms_flip: Shorten basic tests a bit
    
    Seems like an overkill for a basic test to keep flipping for
    a full minute. Dial it down a bit.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 14f7959038c6a79a3a409c420f33d00902497daa
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 25 10:56:37 2016 +0100

    igt/gem_close_race: Restore threads test to BAT status
    
    Let's try it again because it would have caught a bug in a patch I sent
    to the ml...
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=95048
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 13cfccd665703a4ca830fe33ea1152cdecf71331
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 25 09:16:20 2016 +0100

    igt/gem_busy: Test parallel execution
    
    Parallel but not concurrent!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1e9a3acfd4cf6fd5b17505c79fd72fda19a5c356
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 22 19:08:10 2016 +0100

    igt/gem_busy: Discard the indirect batchbuffers
    
    The stack of batchbuffers is myth. In general there are only 2 levels of
    stack for HEAD (ringbuffer, batchbuffer) and chaining up the batch
    buffer just updates the lowest level of the stack. A BATCH_BUFFER_END at
    any depth then returns to the ring.
    
    So be creative and modify the batch buffer on the fly...
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 71f41532873b026d26ef458b5fd5a31a1862e0fc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 22 16:55:29 2016 +0100

    igt/gem_exec_nop: Apply missed interrupt detection
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2f859537b59907a3e0a082c1cb6f6dfb8e99b616
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 22 16:37:35 2016 +0100

    igt/gem_close_race: Import the scratch
    
    Rather than create a new scratch buffer every pass, import the original
    as this provides stress upon less commonly trod paths (i.e. handling
    objects with many vma) as well as many objects in general.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 757b9be460e06c8466f6c49ab7f0d7ff234b5b54
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 22 16:02:12 2016 +0100

    igt/gem_close_race: Avoid using threads, use signals instead
    
    Emulate the behaviour of the second thread killing fd at random by
    having a signal fire at a random time instead. Only one thread and so we
    do not have the issue of accessing another valid handle on another fd
    and so executing a blank buffer - triggering GPU hangs.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=95048
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d9dca5f12a3f4f88f30f2134cc13376f56549912
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Apr 21 17:48:53 2016 +0200

    lib/igt_kms: Move IGT_MAX_PLANES into the igt_plane enum
    
    Makes sure we automatically extend that when adding more planes.
    Inspired by a patch from Robert Foss who extended the max, but forgot
    all about the enum.
    
    While at it, also fix up the whitespace damage.
    
    Cc: robert.foss@collabora.com
    Acked-by: robert.foss@collabora.com
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit ea7dac11b736df2292fdaf112d157937546adf5f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 22 08:25:04 2016 +0100

    scripts: Add a simple trybot driver
    
    Basic script that may prove useful to others to send a pile of patches
    to intel-gfx-trybot@
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit de4f3ab4187dc24a6b379418ff44d84e65fe9cb2
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Thu Apr 21 20:46:27 2016 +0300

    tests/gem_close_race: Remove basic-threads from BAT.
    
    Currently this test causes some machines to hang and segfaults on others.
    Rename it for now until we figure out the root cause.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=95048
    Acked-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 27372851c8cdec29b198bc9ec8e21f83cd1ec083
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Apr 20 21:10:58 2016 +0300

    lib: Pass format instead of bpp to create_bo_for_fb()
    
    create_bo_for_fb() expects the drm format as a parameter since
    commit 8a1a38661f56 ("lib: Add igt_create_bo_with_dimensions")
    but not all callers were updated. Fix that up.
    
    Cc: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Fixes: 8a1a38661f56 ("lib: Add igt_create_bo_with_dimensions")
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=93328
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Reviewed-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>

commit f650aa2dd640a4a8941bae90fbd85c83da5fbb1c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 20 18:35:37 2016 +0100

    igt/gem_close_race: Batify
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ed6fb66a50b35efc7e879deb23742d3da31b81be
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Wed Apr 20 20:03:53 2016 +0300

    NEWS: COMMIT_ATOMIC landed a while ago and a test that makes use of it.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 8b8d7aaffd35be7f4f81623165f26c21b83dfa54
Author: pvishwak <pratik.vishwakarma@intel.com>
Date:   Mon Apr 11 11:24:56 2016 +0530

    tests/kms_rotation_crc: Adding rotation tests using COMMIT_ATOMIC path
    
    Modified kms_rotation_crc to follow COMMIT_ATOMIC path if ATOMIC support is
    available from driver. If ATOMIC support is not present, tests
    will follow COMMIT_UNIVERSAL path.
    
    v2: (Marius)
            Updated commit message
            https://patchwork.freedesktop.org/patch/76040/
    
    v3: (Marius)
            Added description in commit message
            https://patchwork.freedesktop.org/patch/79492/
    
    Signed-off-by: Pratik Vishwakarma <pratik.vishwakarma@intel.com>
    [mcvlad: Re-worked a little comment description]
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit a256df9dc6337fb8f10df5e1033ac36352c1f6a7
Author: Robert Foss <robert.foss@collabora.com>
Date:   Wed Apr 20 10:11:04 2016 -0400

    kms_atomic: Fix crtc_id comparison failing.
    
    Fixed ctrc_id comparison failing due to bad initialization of
    crtc variable.
    
    Signed-off-by: Robert Foss <robert.foss@collabora.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 213b073aad4d4a2e87697e11b98add1efee4408c
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Wed Apr 20 18:41:24 2016 +0300

    NEWS: Updated info about tests/tests-list.txt.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit a633ad03c6a0e96eecfd4933ea0dffb68ed40e07
Author: Feceoru, Gabriel <gabriel.feceoru@intel.com>
Date:   Wed Apr 20 17:21:58 2016 +0300

    tests: Separate tests with lots of subtests
    
    Currently, when trying to run i-g-t tests with piglit, it takes up
    to 20s until the first test is executed.
    The main reason is that gem_concurrent_all has ~500k subtests,
    overkilling piglit.
    
    This patch separates gem_concurrent_* tests from the rest of the tests,
    creating two files test-list.txt and test-list-full.txt.
    The piglit can now enumerate the i-g-t tests within a decent few seconds.
    The second list could be used when trying to execute specific these tests.
    
    v2: Rebased
    
    Signed-off-by: Gabriel Feceoru <gabriel.feceoru@intel.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 3450cba30efb554db9de080735fc6a74acca5d4c
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Fri Apr 15 14:00:04 2016 +0200

    lib: Declare loop variable as volatile before setjmp
    
    The variable used as loop counter in the igt_fixture macro had
    unspecified value from the setjmp(3) man page quoted below. Because of
    that, in certain circumstances and with -O2 and -Os, the initialization
    of that variable would be eliminated and the compiler would complain of
    uninitialized usage. Below can be found a snippet that reproduces the
    problem with GCC 5.3.1 and 4.9.3 and the errors as printed by 5.3.1.
    
    "The compiler may optimize variables into registers, and longjmp() may
    restore the values of other registers in addition to the stack pointer
    and program  counter. Consequently, the values of automatic variables
    are unspecified after a call to longjmp() if they meet all the following
    criteria:
    
    ·  they are local to the function that made the corresponding setjmp(3)
    call;
    
    ·  their values are changed between the calls to setjmp(3) and
    longjmp(); and
    
    ·  they are not declared as volatile."
    
    static void test(void)
    {
            igt_subtest_group {
                    igt_fixture {
                    }
    
                    igt_subtest("foo") {
                    }
    
                    igt_fixture {
                    }
            }
    }
    
    In file included from lib/intel_batchbuffer.h:8:0,
                     from lib/drmtest.h:39,
                     from lib/igt.h:27,
                     from tests/kms_addfb_basic.c:28:
    tests/kms_addfb_basic.c: In function 'tiling_tests.isra.0':
    lib/igt_core.h:110:43: warning: '__tmpint245' is used uninitialized in
    this function [-Wuninitialized]
     #define igt_fixture for (int igt_tokencat(__tmpint,__LINE__) = 0; \
                                               ^
    lib/igt_core.h:110:43: note: '__tmpint245' was declared here
     #define igt_fixture for (int igt_tokencat(__tmpint,__LINE__) = 0; \
                                               ^
    lib/igt_core.h:148:31: note: in definition of macro '__igt_tokencat2'
     #define __igt_tokencat2(x, y) x ## y
                                   ^
    lib/igt_core.h:110:30: note: in expansion of macro 'igt_tokencat'
     #define igt_fixture for (int igt_tokencat(__tmpint,__LINE__) = 0; \
                                  ^
    tests/kms_addfb_basic.c:245:3: note: in expansion of macro 'igt_fixture'
       igt_fixture {
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit be354f444e03edb7b73c8393762e90fc503d03b6
Author: Micah Fedke <micah.fedke@collabora.co.uk>
Date:   Wed Mar 9 16:57:37 2016 +0100

    lib: update kmstest_get_pipe_from_crtc_id
    
    This function uses an intel-specific ioctl to fetch a mapping between pipes and
    crtc ids, but this technique is outdated as the crtc id is now always
    equivalent to its index in the array of crtcs returned by the kernel.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f8af3565bd9d79c16c48bc017d3698b4c19bed4f
Author: marius vlad <marius.c.vlad@intel.com>
Date:   Mon Feb 8 19:12:58 2016 +0200

    tests/kms_pipe_crc_basic: Don't suspend the machine if the pipe is not present.
    
    suspend-read-crc-pipe will perform a suspend and then skip the test in case the
    pipe is not present or is fused w/ another pipe.  Skip the test before doing
    the suspend.
    
    v2: Somehow the subject was trimmed.
    
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit e3e00bae23ce3687f7e465d67318fca54f84f0ab
Author: Bob Paauwe <bob.j.paauwe@intel.com>
Date:   Mon Apr 11 10:41:35 2016 -0700

    ksm_pipe_color: Set legacy gamma values inside loop.
    
    When testing multple outputs, make sure to set the gamma values before
    testing the output.  Otherwise we're testing using the gamma values
    that were reset after last output was tested.  Without this, the first
    output passes, but each output after that will fail.
    
    Signed-off-by: Bob Paauwe <bob.j.paauwe@intel.com>
    Reviewed-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 459ff6b7e24dc0bda5d45b41afdf1fe9aaafc936
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 20 07:49:02 2016 +0100

    igt/gem_concurrent_blit: Ensure we only shrink the child buffers
    
    As we reuse the parent arrays under the assumption that the child uses
    fewer buffers, make sure that is true.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 87acd98a2c89f058719332dd18e6824bc7e64580
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Tue Apr 19 19:49:43 2016 +0300

    NEWS: a newer version of piglit is required.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 203591ba877922fa05c89e64511fd77f0f516089
Author: Feceoru, Gabriel <gabriel.feceoru@intel.com>
Date:   Mon Mar 7 17:16:25 2016 +0200

    scripts: Adapt run-tests.sh to the piglit changes
    
    Piglit changed its behaviour to prevent overwriting the results
    directory unless explicitly specified with -o
    
    Added -o flag in run-tests.sh to keep user experience.
    
    Signed-off-by: Gabriel Feceoru <gabriel.feceoru@intel.com>
    Acked-by: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 77b8a5bfd386b8cec1b5df55f6d28a130a0356f9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 18 10:26:05 2016 +0100

    igt/gem_exec_nop: Fix time units for assertion printf
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ca4f42ba1748e350a992c72a964a8849dc3b7516
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 18 10:24:26 2016 +0100

    igt/gem_ctx_param: Relabel
    
    Checking parameters is not interesting for BAT, it is a simple ABI test
    that only provides coverage of the CONTEXT_GETPARAM and CONTEXT_SETPARAM
    ioctls, and no deeper.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7bd2ac6642248fdd865e7b32a1b4f20bda992e27
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Apr 16 17:15:38 2016 +0100

    gem_exec_lut_handle: Fix presumed_offset to force relocation on full-ppgtt
    
    If the object is at offset 0, quite likely using full-ppgtt, then the
    presumed_offset set also to 0 causes the relocation to be skipped.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c84853ba32a7f49a4606ff6aa91f6bc81217054b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 14 12:25:52 2016 +0100

    igt/gem_mocs_settings: Check for pollution of default contexts
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cfb9e8ec29be5233134b954a4dfbb21643fac41c
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Fri Apr 15 10:11:43 2016 +0100

    igt/drv_module_reload_basic: Do not require snd-hda-intel
    
    Recent refactoring has made absence of snd-hda-intel a test
    failure do the respective modprobe being at the end of a
    reload function now.
    
    Only fail in this case if module was previously unloaded.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit da3ae5c8619f437d9bc8a954b98896a6afdef045
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Fri Apr 15 11:50:21 2016 +0200

    tests/kms_addfb_basic: Set tiling in addfb25 subtest
    
    When moving the call to gem_set_tiling into the subtests, the one needed
    by addfb25-framebuffer-vs-set-tiling was left out.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Reviewed-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit e0145eabbaf25c34ac4c443c88ef39e6e89efb6f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 15 09:45:45 2016 +0100

    igt/gem_pwrite: Add backwards/random access patterns
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4233b59608ce655298228b8b606aed0461c7af77
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 15 10:39:36 2016 +0100

    igt/gem_busy: Slow down the writer
    
    Add a few more (128) loops to the page full of MI_STORE_DWORD in an
    attempt to try and slow down the execution to the point where a
    full-debug kernel can beat the GPU.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 082fb26ce92442493543104d06af3a86382a4a8b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 15 10:57:33 2016 +0100

    igt/gem_exec_nop: Correct %3.f typo
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7bd4f918c46135762e14c359a5b3c6340364082c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 14 17:03:07 2016 +0100

    igt/gem_exec_nop: Explain the parallel execution assertion
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 286992102ee1028a3cb70a4b536ff4ad1650df3f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 19 15:14:19 2016 +0100

    lib: Fix doc warnings for real!
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit f4718c2b6c264c1825cde5213f61965e78c19c9d
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Wed Feb 24 10:47:09 2016 +0100

    tests: Open any driver
    
    For those tests that now pass on drivers other than i915, call
    drm_open_driver_master with DRIVER_ANY.
    
    Also do so from igt_enable_connectors.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Reviewed-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 17a5d7168d4a4e5cdce6afa7ca125c4e60ebfb3f
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Wed Feb 24 10:49:14 2016 +0100

    kms_addfb_basic: Get intel gen from within subtest
    
    Because determining the Intel GFX generation requires a call to
    DRM_IOCTL_I915_GETPARAM, move the code that requires it to a subtest
    that can be skipped on drivers other than i915.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Reviewed-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6694b6a6699ae3414ad27c7a5271fffdc9d33710
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Tue Mar 1 16:21:13 2016 +0100

    kms_addfb_basic: Move calls to gem_set_tiling to the subtests
    
    So they don't cause unrelated subtests to be skipped when testing
    drivers other than i915.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Reviewed-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b2671e8e70bc541284f4ad77a3ca204c195bb163
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Tue Mar 1 16:07:47 2016 +0100

    kms_addfb_basic: Split tiling_tests off
    
    Move tests requiring tiled BOs to the end so they don't cause unrelated
    subtests to be skipped when testing drivers with only dumb buffer
    support.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Reviewed-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c94a828f151686faab5bfa2fe0955cd440cead16
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Wed Feb 24 10:39:47 2016 +0100

    kms_addfb_basic: move tiling functionality into each subtest
    
    Because calls to gem_set_tiling will cause the subtest to be skipped on
    drivers other than i915, move them to each subtest that needs them so
    the other subtests aren't skipped as well.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Reviewed-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit decbf5a3b11878b93caaddda7c738b866939c1e2
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Wed Feb 24 10:38:25 2016 +0100

    kms_addfb_basic: call igt_create_bo_with_dimensions
    
    Many tests can do their work on drivers other than i915 and even with
    just dumb buffers, so call igt_create_bo_with_dimensions instead of
    gem_create which will paper out the differences and call the proper
    ioctls or cause the subtest to be skipped if that's not possible.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Reviewed-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8a1a38661f5693409ad92b7ce60189dc52fe4ff6
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Wed Feb 24 09:04:04 2016 +0100

    lib: Add igt_create_bo_with_dimensions
    
    igt_create_bo_with_dimensions() is intended to abstract differences
    between drivers in buffer object creation.
    
    The driver-specific ioctls will be called if the driver that is being
    tested can satisfy the needs of the calling subtest, or it will be
    skipped otherwise.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Reviewed-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 89b3ffe02c2a308c4663b6781ac1302c221932c2
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Wed Feb 24 09:04:41 2016 +0100

    lib: Map dumb buffers
    
    If a buffer object is dumb, call DRM_IOCTL_MODE_MAP_DUMB when mapping
    it. Also, don't call DRM_IOCTL_I915_GEM_SET_DOMAIN on dumb buffers.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Reviewed-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a2d5b348ee0f9b51ef3b38393ce91ddbefbfaacb
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Mon Mar 7 16:25:43 2016 +0100

    lib: Add igt_dirty_fb
    
    Just wraps drmModeDirtyFB and for now invalidates the whole FB.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Reviewed-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit fb66a5df937b44b594f17a30663938250c759b35
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Mon Mar 7 16:37:36 2016 +0100

    lib: Add helper kmstest_dumb_map_buffer
    
    Which basically just calls DRM_IOCTL_MODE_MAP_DUMB and is similar to
    gem_mmap__gtt().
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Reviewed-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit dc84e7d6ada3c4dbf07a5cfafdbdd597ab03c635
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Wed Mar 2 13:39:44 2016 +0100

    lib: Add wrapper for DRM_IOCTL_MODE_CREATE_DUMB
    
    In order to test drivers that don't have support for proper buffer
    objects, add a wrapper for creating dumb buffer objects that will be
    called from the lib code for those subtests that don't need to care.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Reviewed-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 85a1d45c4a93753f73c32b6b52bcb4de5c42354e
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Wed Feb 24 08:39:53 2016 +0100

    lib: Call intel_get_drm_devid only from intel code
    
    It only makes sense when testing the i915 driver, so don't call it
    otherwise.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Reviewed-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 644f364da22f486ef0ab5f50e71d0b6802302a44
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Thu Feb 18 14:23:25 2016 +0100

    lib: Assert we are on i915 from intel_get_drm_devid
    
    I915_PARAM_CHIPSET_ID is a i915-only thing, so if a subtest ends up
    calling it when testing another driver, the subtest (or the library)
    needs to be fixed.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Reviewed-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e0e3a063ae3680ad1848dcf16d54f51c8d1f459a
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Thu Feb 18 14:25:43 2016 +0100

    lib: Expose is_i915_device
    
    Lib and test code can use this function to avoid i915-specific behavior
    when running on other drivers.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Reviewed-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6755757e9f71918949ac02e6971d97fa662c1ba2
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Tue Feb 9 10:17:18 2016 +0100

    lib: Have gem_set_tiling require intel
    
    Before calling a i915-specific IOCTL, require i915.
    
    This allows us to skip subtests that are specific to that driver, though
    what should eventually happen is that tests don't generally call
    gem_set_tiling directly but go through an abstraction layer that
    constructs the buffer object in a driver-specific way.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Reviewed-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3fee80efcfb41cc7f25afa968bb38e68faa6c34c
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Tue Feb 9 10:16:51 2016 +0100

    lib: add igt_require_intel
    
    Add function that requires that the driver we are talking to is i915.
    
    This allows us to skip subtests that are specific to that driver.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Reviewed-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0eadf638e4e11394adcb574b986f5dea077d4a4c
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Tue Mar 8 09:18:45 2016 +0100

    lib: Rename is_intel to has_known_intel_chipset
    
    As it reflects more clearly what the function actually does.
    
    Suggested-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Reviewed-by: Daniel Stone <daniels@collabora.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e609955067b628c85297665e233b56da2c64c48d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 14 10:15:26 2016 +0100

    igt/gem_ctx_create: Broaden per-engine testing
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 30769516984f404a54a60e7815a20de2a88b8d2a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Apr 12 16:50:34 2016 +0100

    igt/gem_exec_create: Add a "leak" test
    
    Don't close the objects, but just mark them as unneded.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 539abffc3e73b462479e2763739786c55d784a00
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Apr 12 13:14:05 2016 +0100

    igt: Add a basic test to stress allocation of batches
    
    Run for 20s and don't expect to crash from memory exhaustion or sillies.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8af67d1980a1251bd8efb51d4a31062084fe8e03
Author: Peter Antoine <peter.antoine@intel.com>
Date:   Mon Apr 11 17:50:09 2016 +0100

    test/gem_mocs_settings: Testing MOCS register settings
    
    The MOCS registers were added in Gen9 and define the caching policy.
    The registers are split into two sets. The first set controls the
    EDRAM policy and have a set for each engine, the second set controls
    the L3 policy. The two sets use the same index.
    
    The RCS registers and the L3CC registers are stored in the RCS context.
    
    The test checks that the registers are correct by checking the values by
    directly reading them via MMIO, then again it tests them by reading them
    from within a batch buffer. RCS engine is tested last as it programs the
    registers via a batch buffer and this will invalidate the test for
    workloads that don't use the render ring or don't run a render batch
    first.
    
    v2: Reorganised the structure.
        Added more tests. (Chris Wilson)
    v3: Fixed a few bugs. (Chris Wilson)
    v4: More Tidy-ups.    (Chris Wilson)
        SKL does does not have a snoop bit. (Peter Antoine)
    
    Signed-off-by: Peter Antoine <peter.antoine@intel.com>

commit d6a85f042cf0ac7f297189ef48f85caf972515a9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 11 12:52:48 2016 +0100

    igt/gem_busy: fix compaction of multiple store commands
    
    Missed increment of the batch offset between commands.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9e7e7c38a0fe48a64eb946fd4449283e01039573
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 11 09:17:33 2016 +0100

    igt/gem_concurrent_blit: Tweak num_buffers to just exceed target
    
    Remember that we allocate and use twice as many buffers as specified (we
    have a num_buffers array of src and dst) and so adjust the computation
    such that the combined allocation matches the target.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4a3fa3532a3d6605d0ce08b13b224bbf1807ee03
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 11 07:40:11 2016 +0100

    lib: Tidy presentations of pread/pwrite failures
    
    Make the assertion failure message readable if gem_read or gem_write
    fail.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c46f3c341caebfbe114aaafa412173db419083e9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 10 20:44:58 2016 +0100

    igt/gem_concurrent_blit: Purge the libdrm caches before cloning
    
    When forking, the entire VM is cloned including the VMA backed by GEM
    objects from the libdrm buffer cache. This is not only slow, but can also
    cause the system to exceed the maximum number of VMA and premature test
    failure.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e8bcd678a6e570ccda0d694939d17285fb394da2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 10 18:40:26 2016 +0100

    igt/gem_shrink: Fix execution object offset
    
    An off-by-one caused us to execute the blank object rather than the
    batch.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=94801
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 645c95400ccfd743a17b4ab90488cea7eb316776
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 11 21:43:11 2015 +0000

    lib: Remove defunct stop_rings
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1ba9717e6eda2bdd6f1f9e5d1f8e8138cbb3edd1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 11 21:32:32 2015 +0000

    igt/kms_flip: Convert over to real hang injection
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7f05d31c39b2e195cc50c976a15b5dd0e0c29203
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 11 21:23:09 2015 +0000

    igt/kms_pipe_crc_basic: Replace stop_rings with igt_hang_ring
    
    We can inject a real GPU hang for greater effect!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit eaf7f46cdc0b743dc22d81003f6efa8a0c9031f7
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Apr 5 20:45:42 2016 +0300

    tests/pm_rps: Increase timeouts to 15 seconds
    
    My BSW takes ~12 seconds to go back to idle after high load, so the
    current 10s timeouts are too short. Bump them up to 15s.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit fd7fef66013092f0fb2b9f52a0de0c4de65cc839
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Mar 8 23:21:09 2016 +0200

    tools/intel_reg: Add extra pipe B registers for CHV
    
    CHV pipe B has some extra features (programmable sprite CSC,
    primary plane windowing, primary plane scaler, fancier blending).
    Add all the relevant registers to the "quickdump" register list.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 78a97fe1575616519e755be1ff72029c6d7fcbd7
Author: Matt Roper <matthew.d.roper@intel.com>
Date:   Mon Apr 4 13:54:41 2016 -0700

    kms_atomic: Skip rather than fail on non-atomic drivers
    
    i915 does not yet support the atomic modesetting interface by default;
    at the moment it must be turned on explicitly via an
    'i915.nuclear_pageflip' kernel command line option.  We should skip
    (rather than fail) this IGT test when running on kernels that don't
    advertise support for atomic modesetting.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=93014
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
    Reviewed-by: Daniel Stone <daniels@collabora.com>

commit cd8da3f65d6d6956b50e4629cb43d3a8d55faab3
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Tue Apr 5 14:13:53 2016 +0100

    lib: kms: move framebuffer scanout offset/size to plane
    
    This fixes potential crashes when the framebuffer is unset from a
    given plane.
    
    v2: s/with/within/ typo in header
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Cc: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Cc: Marius Vlad <marius.c.vlad@intel.com>
    Cc: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Reviewed-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 54b8a1f2d3b1651448645c89dda278536406cbda
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Apr 5 15:00:23 2016 +0300

    tools/intel_reg: Fix builtin register spec for gen4
    
    Actually use the builtin register spec on gen4. Makes intel_reg dump
    actually do something on gen4.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Reviewed-by: Matthew Auld <matthew.auld@intel.com>

commit 9cff3be12731bf73bee15a545bee50377f307f55
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 4 16:24:47 2016 +0100

    igt/gem_shrink: Reduce oom spam
    
    Since we are deliberately going to fail the mmap() allocation, don't
    assert.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7a977554cb85c79b470312028712c4dad1626f84
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 4 15:03:10 2016 +0100

    igt/gem_shrink: Fix leak in userptr, add another
    
    Hitting oom from userptr because we had N threads all consuming all of
    memory, wasn't the intention but the bugs it found were useful!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1a501723029ac519aca0f7c633cda0133ac5141a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 3 16:45:22 2016 +0100

    benchmarks: Include my ezbench test runners
    
    Just a set of scripts to integrate these benchmarks with ezbench. They
    need to be revised to plugin into latest version of ezbench.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit eac26718e62a0c7cb5506f2cf188a4cac4794726
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 3 16:44:27 2016 +0100

    benchmarks/gem_latency: Add a -C switch to measure impact of cmdparser
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit bd292436ed0bbc06552fc77c2f10bd02a4d7c797
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 3 09:51:49 2016 +0100

    lib: Avoid assertion if sig_ioctl is unsed from a child accidentally
    
    The timer is tied to the creator thread, i.e. it is not inheritable
    across fork() or clone()/pthread_create(). Using it thus causes an
    assertion failure in the test after the one that aborts (and so on until
    we perform an interruptible test correctly) - one mistake snowballs. We
    can stop the snowball by doing an initial check and diverting back to
    drmIoctl().
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cb12d05e79aedaf4f1873b1262b7eeb127e87e80
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 3 09:47:58 2016 +0100

    lib: Don't report the last errno inside the async GPU hang detector
    
    Since the last errno doesn't correspond with the signal, reporting it
    when we detect the GPU hang is confusing.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8833648b5c29f77a876fa08829f0facf38f08982
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Apr 2 17:22:46 2016 +0100

    igt/gem_shrink: Exercise with userptr stress
    
    Add additional mempressure in the form of userptr.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 88bfe6ac417f3eb52e9915047ebf7443bc91c828
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Apr 2 16:37:20 2016 +0100

    igt/gem_shrink: Add pread/pwrite stress
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d081953e67b3e15d9dc32a68b1248bb81e586bc5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 11 21:41:58 2015 +0000

    igt/pm_rps: Trigger a real GPU reset
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3dd5fe8ab294075c558d4f4bd9a74077decfb8c7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 1 20:07:13 2016 +0100

    igt/gem_exec_reloc: Exercise read-only relocation arrays
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit aec81019e1140aa043761e07e36d8ba3245ab66b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 1 16:52:37 2016 +0100

    igt/gem_busy: Try to slow down execution
    
    With lockdep enabled, the driver overhead is enormous and we need to
    slow down the GPU to compenstate (otherwise the GPU is already idle when
    we expect busyness). So do more work per batch.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 92ee3cc1f69af8b6c94b93463fe9dcf484b484b9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 1 14:58:18 2016 +0100

    igt/gem_busy: Cap number of tries to create busy rings
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0f5b03fa3801a8b6dcf72d4f402ff89d9863f180
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 1 13:19:07 2016 +0100

    igt/gem_busy: Use a boatload of store-dwords to force ring busyness
    
    A little more inelegant as we can't control the delay very well, but it
    should prove more vesatile and broaden the test coverge (and still be
    quick enough for basic).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c89e8dbfd8d8cebe56f68869c6b9b30ef7356889
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 29 17:21:18 2016 +0100

    lib: Ignore udev failure to report an event
    
    Fixes gem_exec_suspend complaining that the hang detector spontaneously
    combusts.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2b804c33e7511a3036b5f86d6b8a8ae806120c10
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 29 17:19:31 2016 +0100

    lib: Tidy error message for a helper process who unexpectedly dies
    
    Transform
    
    gem_exec_suspend: igt_core.c:1429: igt_stop_helper: Assertion `(((signed char) ((((__extension__ (((union { __typeof(status) __in; int __i; }) { .__in = (status) }).__i))) & 0x7f) + 1) >> 1) > 0) && (((__extension__ (((union { __typeof(status) __in; int __i; }) { .__in = (status) }).__i))) & 0x7f) == (proc->use_SIGKILL ? 9 : 15)' failed.
    
    into
    
    (gem_exec_suspend:16589) igt-core-DEBUG: Helper died too early with status=0
    gem_exec_suspend: igt_core.c:1437: igt_stop_helper: Assertion `helper_was_alive(proc, status)' failed.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0bd117fa66d80a0285e860e22a973353f731ed2d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 29 13:52:24 2016 +0100

    igt/gem_exec_suspend: Add basic selftest
    
    The selftest is already before the suspend/hibernate tests, but to be
    clear also run it first (it only takes a millisecond) by itself.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e56de3c900edbcce831b756e8e850f89836614b1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 29 10:53:37 2016 +0100

    igt/gem_exec_store: Exercise write ordering
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 41a26b5152a5f7fa87a13c3bb70a50acc2e45668
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 28 16:26:01 2016 +0100

    igt/gem_exec_nop: Relax parallel assertion for short rings
    
    On bdw, the render ring becomes full and limits dispatch across all rings.
    Adjust the expected latency to take this into account.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 870c774b866c62e9fa5b0de94364b2c044968ed3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 28 15:29:46 2016 +0100

    igt/gem_exec_nop: Add expectancy of independent execution between engines
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 633854e8f4f752478fc7d6ccc55fe36b0e828d79
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Mar 26 10:55:46 2016 +0000

    igt/gem_ctx_switch: Add basic test for context switching
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1a722fa6cf87ae12fc1b3446fe30c200a0201752
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Mar 26 10:54:43 2016 +0000

    igt/gem_exec_whisper: Add simple interruptible pass
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5dcb0263489f3009cb9b65f531771d516baa131d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Mar 26 09:48:16 2016 +0000

    igt/gem_exec_whisper: Check for inconsistent reloc offset vs object offset
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3fd9b910d20335cea5a675c1181f4942ddaa0bdd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 25 20:27:34 2016 +0000

    igt/gem_sync: Add a basic test to wait upon a batch on all rings
    
    Execute the batch concurrently on all rings and then wait (as opposed to
    executing a different batch on each engine).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9d61a685e982aa544ca802fe1758aa19ea9987cc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 25 18:22:54 2016 +0000

    igt/gem: Add GPU hang detection to basic tests
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 98dcf2f0dcf7097a9404c0598ade4fc94cffeaac
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 25 00:50:45 2016 +0000

    igt/gem_concurrent_blit: Relax maxfiles restrictions
    
    Only fail the dmabuf tests if we cannot prep the system to support
    "unlimited" fd.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4e2a785e2412f148693b993d1a29d62f48da4937
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 23 12:37:38 2016 +0000

    benchmarks/gem_exec_nop: Include a measurement across all rings
    
    For sync, it really is just the average latency across all rings, but
    for continuous we can expect to see the effect of concurrent dispatch
    across rings. Hopefully.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6867b87b73f3fc0d70d5b64efce7ec096007dd20
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 24 07:57:30 2016 +0000

    igt/gem_concurrent_blit: Enable hang detection
    
    When we aren't deliberately injecting hangs, we don't expect to see any
    GPU hang. Detect them and fail early.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 756f3e0cb7e7d7351e3eb955ca782a438c6aa887
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 22 11:33:41 2016 +0000

    lib: Add a GPU error detector
    
    If we listen to the uevents from the kernel, we can detect when the GPU
    hangs. This requires us to fork a helper process to do so and send a
    signal back to the parent.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit eb572106b4721dcfb6bf873ae40c5200f5369039
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 23 10:01:10 2016 +0000

    igt/gem_shrink: Consume all of total ram in each process
    
    "Leak" the objects from each test until each process has allocated
    enough objects to consume all of RAM.
    
    Doing so from each process not only ensures we do stress the allocation
    paths, but also obsoletes the separate purgeable helper.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a9436e6693ddb3d3e76027b7ad43733900fa0466
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 23 09:53:34 2016 +0000

    igt/gem_shrink: Include a shrinker vs GPU hang
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 54ec3782dcdb7949756615ef7aa8f9f330bc87c7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 23 09:37:43 2016 +0000

    tests: Add gem_shrink
    
    This test exercise purely to exercise the shrinker under some common
    stress (i.e. paths leading to i915_gem_object_get_pages()). We try to
    fill the entirely of memory split amongst many processes so that each
    individual process only consumes a small fraction of RAM (less than the
    mappable aperture) and a single process should not be individually
    blamed.
    
    Based on an idea to have a seperate set of memory stress tests by Piotr
    Luc.
    
    Cc: Piotr Luc <piotr.luc@intel.com>
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7fc5256f56a5a76596aeab5fc47dd1f4cf80ae98
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Fri Mar 18 17:33:05 2016 +0000

    test/kms_pipe_color: add test to verify legacy ioctl resets GAMMA_LUT
    
    The GAMMA_LUT/DEGAMMA_LUT/CTM properties must be updated when the
    legacy ioctl is triggered to ensure the new properties do not impact
    older userspace code.
    
    v2: Add checks verifying the content of CTM & DEGAMMA_LUT properties
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>

commit aa55641d4fdfb3ba7f6259d2b1ba7c56a0d4df13
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Fri Mar 18 17:33:04 2016 +0000

    tests/kms_color: New test for pipe level color management
    
    This test enables testing of :
    
         * degamma LUTs
         * csc matrix
         * gamma LUTs
         * legacy gamma LUTs
    
    v2: turn assert into require to skip on platform not supporting color
        management
    
    v3: add invalid blob ids tests
    
    v4: Try to match CRC results against several values around the
        expected result for platforms with odd LUT items
    
    v5: Fix running tests with multiple screens
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>

commit c7e9be2302ab3dea289edc86b8c63e22d668fe2b
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Fri Mar 18 17:33:03 2016 +0000

    lib: add crc comparison function without an assert
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>

commit a511310244ed82391a45a438b0d7126a8f9c974b
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Fri Mar 18 17:33:02 2016 +0000

    lib: fb: add igt_paint_color_gradient_range
    
    This is a helper to draw a gradient between 2 colors.
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>

commit 1716625e1e77c4e42afa3ed7afe4151ae787258d
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Fri Mar 18 17:33:01 2016 +0000

    lib: kms: add helpers for color management properties on pipes
    
    v2: Rename CTM_MATRIX property to CTM
    
    v3: Add support for atomic commits
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>

commit 59b5487625b537f15533e163728053a6e56a7c57
Author: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
Date:   Fri Mar 18 17:33:00 2016 +0000

    lib: kms: add crtc_id to igt_pipe_t
    
    Signed-off-by: Lionel Landwerlin <lionel.g.landwerlin@intel.com>
    Reviewed-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>

commit 8520037e5479c1b9ca20a560bbc695d2969d4e1b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 21 16:09:56 2016 +0000

    lib: Measure the cost of calling timer_settimer() for sigiter
    
    We wish to delay the first signal from the igt_sigiter_ioctl
    sufficiently to skip over the timer_settime() and into the drmIoctl
    kernel context before firing. If we fire too early, we will think that
    the ioctl doesn't respond to signals and ignore it in future. If we fire
    too late, we won't probe the ioctl for signal handling at all. Let's try
    measuring the timer_settime() call time as a first approximation.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f1a3d0d96f8cd281446d5a79e11a29173057e730
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 21 14:27:15 2016 +0000

    igt/gem_ringfill: Fix basic- reversal
    
    Rushed flipping around the logic to add basic- and forgot to apply the
    corrected patch.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 87a4d8ab64a858d71b73d7c1dd5f8f3ba3506fb6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 21 14:34:18 2016 +0000

    igt/gem_ringfill: Fine-tune list of BAT tests
    
    Drop -bomb as with forking * interruptible repeating, it takes too long
    to include in the BAT.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a43f40741ba84ab84db0e3ebd76b0d72484dfd95
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 21 12:18:11 2016 +0000

    igt/gem_exec_suspend: Add BAT runs
    
    Add a couple of all-engine busy tests in order to exercise coherency and
    general bugs across suspend. (In particular, I expect this to trigger a
    fresh case of lockdeps on Braswell, as well as the usual battery of
    missing rpm references. This is an exerciser for my lockless-suspend
    patches.)
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a03ee8f6c899c5c3731b8c3e26908754f23ab378
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 21 11:59:34 2016 +0000

    igt/gem_exec_suspend: Allow suspend testing on gen6
    
    Filter out the request to execute on gen6/bsd to prevent skips.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d5e550f5c61b205727aab3f8fe914e590fcd1cb4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 21 11:58:21 2016 +0000

    igt/gem_exec_whisper: Tweak migration logging
    
    reloc.presumed_offset == -1 => implies we hit the fallback path and not
    that we strictly needed to patch the relocation.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit fcb4cfa520ab987c46b588564b2a057b40e6b02f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Mar 20 11:38:26 2016 +0000

    igt/gem_concurrent_all: Inject a hang onto all rings
    
    Also test a hang across all rings, rather than just one engine.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3b22b89dd89245b9d174365b43ff53cfb995f210
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 21 11:00:52 2016 +0000

    igt/gem_exec_whisper: Prevent MI_STORE_DWORD on gen6/bsd again
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c19b049d9c2ea54e248c064171f4c5c419e4252b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Mar 20 11:13:30 2016 +0000

    igt/gem_concurent_blit: Prevent a memleak if we assert whilst creating buffers
    
    Assume that we may halt partway through buffers_create() and so be
    careful to clear up the partial state in buffers_destroy().
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3d8af56ed2f08e57e58944c1baf8dc15fafa3f27
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Mar 20 10:49:54 2016 +0000

    igt/gem_concurrent_blit: Reset process limits to allow dmabuf tests
    
    Since dmabuf requires an actual fd for every object, we need to increase
    the number of files our process is allowed.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 82e9113bfbc342d3f839797471a7eab16ec40548
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Mar 19 15:55:22 2016 +0000

    lib/igt_aux: Refine decision to stop signal injection
    
    The goal of injecting signals into the ioctl() is to trigger an EINTR.
    If we did not succeed on the last pass, we are not going to on the next
    or subsequent passes either.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f338e9834ccf96f4eb66e33435866abfd1f55883
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Mar 19 13:10:17 2016 +0000

    igt/gem_concurrent_blit: Enable quicker interruptible testing
    
    v2: Because I managed to push the wrong version.
    
    Make --list-subtests happer by creating the name before the igt_fixture,
    not inside it.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1abbd6974013a5ed1f6db1bbcdd492fef610af02
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Mar 19 15:04:24 2016 +0000

    igt/gem_softpin: Convert to igt_interruptible
    
    Convert the fixed time interruptible tests to igt_interruptible() for a
    speed improvement.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 22674ae88bb1302a3d6326d908f593e46e3564c1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Mar 19 14:57:10 2016 +0000

    igt/prime_mmap_coherency: Speed up interruptible testing
    
    Use the new fangled igt_interruptible() to limit the number of passes we
    require when performing signal injection.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 83cfed8c396a0a5b08c498829fe68d2b10af8425
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Mar 19 14:21:34 2016 +0000

    igt/gem_exec_whisper: Add interruptibles tests
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 87cad37c7849800b0e17ac55431ad3c1131739d4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Mar 19 13:13:06 2016 +0000

    igt/gem_ringfill: Use igt_sigiter to focus the interruptible testing
    
    Use the igt_sigiter interface to repeat the ringfill testing for as much
    as is required to exercise all potential injection sites.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e85613b47c3ca40eeecd436dab3d6c660298d559
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Mar 19 14:01:38 2016 +0000

    igt/gem_concurrent_blit: dmabuf requires twice the number of files
    
    In order to keep the dmabuf mmap around whilst we keep the object alive,
    we need a file descriptor for each. Check that the VFS supports that
    many fd.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c2248efbca452d1c657ace1b51aa6308504d0c7f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Mar 19 13:10:17 2016 +0000

    igt/gem_concurrent_blit: Enable quicker interruptible testing
    
    Use the igt_sigiter interface to only repeat the -interruptible tests
    when we can make further progress with another change at injecting a
    signal.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d54561086189d3bc83403d0ae19a389d0a68f89d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Mar 19 13:04:02 2016 +0000

    lib/igt_aux: Divert ioctls for signal injection
    
    To simplify and speed up running interruptible tests, use a custom
    ioctl() function that control the signaling and detect when we need no
    more iterations to trigger an interruption.
    
    We use a realtime timer to inject the signal after a certain delay,
    increasing the delay on every loop to try and exercise different code
    paths within the function. The first delay is very short such that we
    hopefully enter the kernel with a pending signal.
    
    Clients should use
    
    struct igt_sigiter iter = {};
    while (igt_sigiter_repeat(&iter, enable_interrupts=true))
            do_test()
    
    to automatically repeat the test until we can inject no more signals
    into the ioctls. This is condensed into a macro
    
    igt_interruptible(enable_interrupts=true)
            do_test();
    
    for convenience.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c1fed522ae98b7c74700521f7b3e0368f0f0948e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Mar 19 13:00:29 2016 +0000

    lib: Replace drmIoctl() with a layer of indirection
    
    Insted of calling drmIoctl() directly, call igt_ioctl() instead. In the
    normal scenario this is function pointer that calls drmIoctl() (so no
    penalty), but allows us to divert ioctls into our own routines for
    nefarious purposes. One such purpose will be to control interrupt
    generation into the ioctl, to be able to detect when we successfully
    interrupt the ioctl and when we no longer need more interrupts.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4e4f5b4fdca7ea2a9da79fe5b0266d1d31908e1c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 19 12:15:47 2016 +0100

    lib/tests: More igt_subtest_group checks
    
    ... for some cases discussed with Chris on irc. We seem to get them all
    right.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 483d1c0a239a49fbf2384c94092c530c8de61fdc
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 19 12:12:47 2016 +0100

    lib: Fix some doc warnings
    
    Cc: Marius Vlad <marius.c.vlad@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9665073c339d587e6a96884c0de0bb7f8c84f21a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 18 21:55:00 2016 +0100

    tests/gem_concurrent_blt|all: Use igt_subtest_group
    
    Looks tidy again, and doesn't break igt assumptions.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 72d04b8453bf74b1fcd73f898c13398db4abc381
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 18 21:46:54 2016 +0100

    lib: Add igt_subtest_group
    
    Useful for creating common setup code in igt_fixture which is only
    needed by a subset of tests. And since I'm a good citizen it comes
    with a library testcase/example included.
    
    v2: Make testcase nastier to ensure a subtest group SKIPS when it's
    parent is skipping already. I accidentally got this right, but let's
    make sure.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f129ee8a39eaaa2b9a8c97d845309e372af00ce9
Author: Tiago Vignatti <tiago.vignatti@intel.com>
Date:   Fri Mar 18 15:08:56 2016 -0300

    prime_mmap_coherency: Add return error tests for prime sync ioctl
    
    This patch adds ioctl-errors subtest to be used for exercising prime sync ioctl
    errors.
    
    The subtest constantly interrupts via signals a function doing concurrent blit
    to stress out the right usage of prime_sync_*, making sure these ioctl errors
    are handled accordingly. Important to note that in case of failure (e.g. in a
    case where the ioctl wouldn't try again in a return error) this test does not
    reliably catch the problem with 100% of accuracy.
    
    v2: fix prime sync direction when reading mmap'ed file.
    v3: change the upper bound using time rather than loops
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Tiago Vignatti <tiago.vignatti@intel.com>
    [ickle: fix memleak, run for longer]

commit dbc74dd99097adc2bd32cd5945186791a8d2d806
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Thu Mar 17 14:37:39 2016 -0700

    intel: Adding missing Broxton PCI IDs.
    
    These IDs were already part of the kernel since:
    
    kernel commit 985dd4360fdf2533fe48a33a4a2094f2e4718dc0
    Author: Imre Deak <imre.deak@intel.com>
    Date:   Thu Jan 28 16:04:12 2016 +0200
    
         drm/i915/bxt: update list of PCIIDs
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Reviewed-by: Arun Siluvery <arun.siluvery@linux.intel.com>

commit 5d669bf1ddfb0f16162d91a6a47cf36855bc513e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 18 14:44:53 2016 +0000

    igt/gem_concurent_blit: Exercise different object sizes
    
    Searching for coherency problems that may arise with
    smaller-then-cache/large-then-cache objects.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 95090bb50befda15f27c9c5e74991625dd5b40f0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 18 11:49:23 2016 +0000

    lib/ioctl_wrappers: Explain a couple of igt_require(ret == 0)
    
    Use more verbose igt_require(), here assocaited with SET_CACHING, such
    that the requirements are explained in the debug/failure log.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a8a685f877c013c3e5b1f33a5e2201aa436eeffc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 18 11:32:04 2016 +0000

    lib/intel_os: Squelch dmesg spam when purging VM caches
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4eba8e22fa738ddf2cd8c367a1a36ee03f20fec7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 18 10:44:31 2016 +0000

    igt/gem_concurrent_all: struct buffers for all
    
    Now that we started packaging all parameters in one handy struct, pass
    them everywhere. This allows us to pass along requirements so that we
    can perform the checks inside each indvidual subtest and so not anger
    the igt gods.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit dcb39b5270b5ff4d91a595ae05c9e74528bce546
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 18 09:04:07 2016 +0000

    igt/gem_softpin: Repeat tests with signal interruptions
    
    For the long running tests probing error conditions, throwing in the
    signal interruptions is a good idea.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 34098b71fa1b365ffb0c12fb84ebb7aa26c8f300
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 17 09:53:45 2016 +0000

    lib/igt_gt: Handle SIGINT whilst writing to i915_error_state
    
    Becareful in case we try and eat the error state whilst interrupts are
    being sent and repeat the write() until we finish uninterrupted.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=94573
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5df2de7e14ec320223825db7a5a29a1ac7253ba6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 15 09:52:57 2016 +0000

    igt/gem_exec_whisper: Move testing of "default" engine to standalone
    
    Exclude the symbolic "default" engine from the interengine sync testing,
    and move it onto the standalone testing.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c8d5c353bf7eca652fd3a6ad6cd151d3127d2de5
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Mar 7 19:38:30 2016 +0200

    tests/pm_rps: Fix assert for sysfs writes
    
    fprintf() returns a negative value on error. Fix the assert
    to catch that.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit f651493a6bcea77b0c8ffe2e4f986bd167d6cb92
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Mar 15 23:13:43 2016 +0200

    igt/drv_module_reload_basic: Pass correct inject_load_failure module option
    
    The latest version of the inject_load_failure module option expects the
    number of the checkpoint where the failure should be injected, so adjust
    the test accordingly.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 431f6c49189470763c34f82cc4f688a967310f52
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Thu Feb 11 12:32:40 2016 +0200

    tests/gem_evict_alignment: use uint64_t in eviction memory parameters
    
    With large apertures we need to use uint64_t for
    counts and sizes. commit 0e2071411a4d4e1488a821daf522dffde2809e03
    paved way for this but forgot to change the subtest parameters.
    
    v2: Pass correctly to the copy() also (Chris)
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=93849
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 0e2e880e04e344b62c76bc3d12a3f596ae0233cd
Author: Mayuresh Gharpure <mayuresh.s.gharpure@intel.com>
Date:   Fri Mar 11 13:55:29 2016 +0530

    lib/igt_kms: Add COMMIT_ATOMIC to igt_display_commit2()
    
    Co-Author : Marius Vlad <marius.c.vlad@intel.com>
    Co-Author : Pratik Vishwakarma <pratik.vishwakarma@intel.com>
    
    So far we have had only two commit styles, COMMIT_LEGACY
    and COMMIT_UNIVERSAL. This patch adds another commit style
    COMMIT_ATOMIC which makes use of drmModeAtomicCommit()
    
    v2: (Marius)
            i)Set CRTC_ID to zero while disabling plane
            ii)Modified the log message in igt_atomic_prepare_plane_commit
            https://patchwork.freedesktop.org/patch/71945/
    
    v3: (Marius)Set FB_ID to zero while disabling plane
            https://patchwork.freedesktop.org/patch/72179/
    
    v4: (Maarten) Corrected the typo in commit message
            https://patchwork.freedesktop.org/patch/72598/
    
    v5: Added check for DRM_CLIENT_CAP_ATOMIC in igt_display_init
        (Marius)
            i)Removed unused props from igt_display_init
            ii)Removed unused ret. Changed function to void
            iii)Declare the variable before checking if we have
            DRM_CLIENT_CAP_ATOMIC.
            https://patchwork.freedesktop.org/patch/73505/
    
    v6: (Jani) Corrected typo in commit message
    
    v7: Added is_atomic check for DRM_CLIENT_CAP_ATOMIC in
            igt_display_init and igt_atomic_commit
    
    v8: (Matthew Auld) Replaced for loops by for_each_connected_output and
            for_each_plane_on_pipe
        (Lionel) Populate properties only if the value has changed
            Remove the resetting of values in disable case
            Note : I've used Maarten's diff patch
    
    v9: (Lionel) Added resetting of rotation property
    
    v10: (Marius) Modified the macro declaration to avoid shadow declaration
            warning, also removed one unused variable
    
    Signed-off-by: Mayuresh Gharpure <mayuresh.s.gharpure@intel.com>
    Signed-off-by: Pratik Vishwakarma <pratik.vishwakarma@intel.com>
    Signed-off-by: Mayuresh Gharpure <mayuresh.s.gharpure@intel.com>
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 314fa179c8718a8d0b383c31576cf145e05bf657
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 15 09:44:48 2016 +0000

    igt/gem_bad_reloc: Rename conflicting negative-reloc-blt
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 488dc3b1acf825c1db9750b1158de56b50e7b4ff
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 15 09:16:30 2016 +0000

    igt/gem_exec_whisper: Beware PIN_HIGH
    
    Certain kernels/gen like to move execbuf around for relocations,
    disrupting our prewritten batches. Be more careful and try and keep the
    relocation/execobjects accurate.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1430eb065f110c899ce7f097a002cb1efe33212d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 14 20:40:53 2016 +0000

    igt/gem_bad_reloc: Fix handling of 64bit relocations
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=94537
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f0d5874bd824b4b452607e055fc86b38a399acf8
Author: Imre Deak <imre.deak@intel.com>
Date:   Mon Mar 14 17:17:12 2016 +0200

    drv_module_reload_basic: skip alive check after load failure injection
    
    After loading the module with load failure injection enabled don't try
    check the alive state. Also limit the number of failure points to
    existing ones, to reduce the run time of the test.
    
    v2:
    - make VT binding/snd module loading part of reload and VT bind fail
      silently (Chris)
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 772393e806791c9af1c050262c92300c9565e823
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 14 14:31:36 2016 +0000

    igt/gem_exec_nop: Decrease BAT timing
    
    For basic, since CI doesn't hit the same hard lockup on Braswell that is
    possible without hpet, stop running for so long!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2fdf5ac917aad95e9e4ca251b0c35cfa005c2b69
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 14 13:41:15 2016 +0000

    igt/gem_exec_whisper: Exercise rings individually
    
    Not as stressful as testing inter-ring synchronisation, but it does
    allow inspecting the simpler testcases if need be.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5459374120fd1c7d89ec50e2c59df23a126b5dcb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 14 14:00:32 2016 +0000

    lib: Remove dead gem_get_num_rings()
    
    No users so time to die.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5acda10e7f794cf136f2daebcf4ca66a0ae9324b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 14 13:59:18 2016 +0000

    igt/gem_exec_reloc: Exercise updating relocations of an active object
    
    Supersedes gem_dummy_reloc_loop.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e5abd779cfa1135bdb7218f7b069eb60b553f6da
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 14 13:36:56 2016 +0000

    tests/gem_ring_sync_loop: Exercise all rings
    
    Fix the engine selection to exercise all possible rings and in doing so
    completely obsoletes gem_multi_bsd_sync_loop.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3d9bcd080498052e73021efdb1e38b5107c0fcc8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 14 13:24:54 2016 +0000

    lib: Remove unused gem_has_enable_ring()
    
    No one uses this nor should they as it just gem_get_param() in disguise
    and they are better feature queries for whether individual execution
    engines are functional.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8f6ed9e692647a50b19c7838d09d6b6335005ef7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Mar 12 11:20:03 2016 +0000

    igt/gem_exec_whisper: Persistent relocation support
    
    The goal is to test interengine synchronisation so remove any likelihood
    that we introduce synchronisation for performing relocations.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f14d56c42d9e43df2790465aba6a2ea2593418fc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 11 21:25:48 2016 +0000

    igt/drv_module_reload_basic: Rinse and repeat with addition module parameters
    
    An idea for testing failure paths along module load is to use a parameter
    to perform fault injection. This rudimentary framework should get us
    started.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9eacbd2acd19aa91d9a21029957799f66cc8fef3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 11 14:31:56 2016 +0000

    igt/gem_exec_whisper: Test submission between fds
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6291678f316405ddd6885831701b7512228218b2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 11 14:16:13 2016 +0000

    igt/gem_exec_whisper: Stop passing NO_RELOC
    
    We don't preserve the execobj.offset nor set the right values into the
    batches between iterations.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d99db0990e6b6aae43bcda13dc0f6e46335cffa8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 11 12:01:55 2016 +0000

    igt/gem_exec_whisper: Don't forget that 0 is a valid address on full-ppgtt
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d264c73929e95f5dfb26235b8e6e9af7dca4b701
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Thu Mar 10 14:27:05 2016 +0000

    benchmarks/gem_syslatency: Add extra android guard to attr_setaffinity_np
    
    Android defines __USE_GNU but does not provide pthread_attr_setaffinity_np()
    so added an extra guard arround pthread_attr_setaffinity_np().
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>

commit 5615ab2a9dceaf101e1faa0fa132ef1dadbabc04
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 11 10:48:47 2016 +0000

    tests: Add gem_exec_whisper
    
    A more complicated store variant to stress inter-engine dependencies
    (i.e. semaphores and sync). We write a control value from one batch into
    the next and then execute it. This is repeated a few times with each
    execution happening on a different engine (so the kernel has to
    serialise operations between engines) until we finally write the value
    out into our scratch buffer where we can check the result, just like a
    Chinese whisper.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3e2443f8386166dbd2586af1d454b766182f04b3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 10 11:50:53 2016 +0000

    igt/gem_exec_nop: Fix logical inversion for checking of valid execbuf
    
    Only if the trial __gem_execbuf reports an error do we want to remove
    the fancy LUT flags.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 544ba6ca88e9ff01fd9f308252f5e08679b275da
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 10 12:25:59 2016 +0000

    benchmarks/gem_syslatency: Guard setaffinity_np
    
    pthread_setaffinity_np is a GNU extensions, so add some __USE_GNU
    ifdeffry and hope for the best if unavailable.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 778f0796e8afd977ac2f455f2a71c62683ff2006
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 10 10:40:05 2016 +0000

    igt/gem_reloc_overflow: 32bit compilation warning
    
    gem_reloc_overflow.c: In function ‘__real_main365’:
    gem_reloc_overflow.c:384:3: warning: format ‘%lu’ expects argument of type ‘long unsigned int’, but argument 6 has type ‘size_t’ [-Wformat=]
       igt_require_f(mlock(reloc, reloc_size) == 0,
       ^
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5ec85f5bf8969e46cd70cffccaafb62078355414
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 10 10:36:24 2016 +0000

    igt/gem_concurrent_blit: 32bit compilation warning
    
    gem_concurrent_all.c: In function ‘__real_main1556’:
    gem_concurrent_all.c:1642:4: warning: format ‘%ld’ expects argument of type ‘long int’, but argument 4 has type ‘uint64_t’ [-Wformat=]
        igt_debug("Pinning %ld MiB\n", pin_sz);
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit eb59497a83323b9fd02e24ae21a78d795d220351
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 10 10:35:37 2016 +0000

    igt/drv_hangman: 32bit compilation warning
    
    drv_hangman.c: In function ‘hangcheck_unterminated’:
    drv_hangman.c:290:27: warning: integer overflow in expression [-Woverflow]
      int64_t timeout_ns = 100 * NSEC_PER_SEC; /* 100 seconds */
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3e0d9ef02cc38ab8b121acfa99ff205305aa4442
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 10 10:14:25 2016 +0000

    benchmarks/gem_syslatency: Subtract the clock_gettime() overhead
    
    Since clock_gettime() should be a fixed overhead that adds to the
    latency result, subtract it from the result.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2a41c4b18391c2cd9094101edcdfdb6811313399
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 10 09:27:32 2016 +0000

    benchmarks/gem_syslatency: Prevent CPU sleeps (C-states)
    
    In order to keep the latency as low as possible for the idle load, we
    need to keep the CPU awake. Otherwise we end up with the busy workload
    having lower latency than the idle workload!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c084c2b88b1ef6a1453de8a24b7a4cf01a82e0d2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 10 08:40:06 2016 +0000

    benchmarks/gem_syslatency: Measure unloaded latency
    
    Also useful to know how much worse than baseline the latency is when the
    gem load is applied. For slower systems, presenting in nanoseconds makes
    it hard to read, so switch to microseconds for output.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6cd15fb930793f441eaa829bd087ac34e644e492
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 9 22:39:16 2016 +0000

    benchmarks: Add gem_syslatency
    
    Instead of measuring the wakeup latency of a GEM client, we turn the
    tables here and ask what is the wakeup latency of a normal process
    competing with GEM. In particular, a realtime process that expects
    deterministic latency.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0aacdac56fc3179b1fe6bc28bb1a3beb64c64619
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 9 21:06:16 2016 +0000

    igt/gem_exec_nop: Only combine unique rings
    
    Ignore the default ring as that is purely symbolic. On BSD2 systems it
    is similarly useful to ignore the symbolic BSD ring.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e1ca201fe9ac23e187aeaf5143d9720042aead88
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 9 14:49:27 2016 +0100

    tests/gem_reloc_overflow: Add missing igt_fixture
    
    Boom when running with --list on non-intel machines or as non-root.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 598deeda52c068257812d077937f0592be867e4f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 9 14:44:45 2016 +0100

    lib: remove saved_sig_mask
    
    Oversight from the exit handler cleanup, spotted by Chris Wilson.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit c684065be080d446018f5fc34de647d8e39d04e0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 9 11:35:50 2016 +0000

    igt/gem_exec_store: The simplest batch that does something!
    
    A very simple, the simplest!, batch that can execution on any known
    engine that just writes a value into memory.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 93824f0cd09f7f7fec6366504c46b3ede5223436
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Feb 18 13:37:16 2016 +0100

    lib: Unit test for exit handler
    
    Checks that
    - exit handlers are run only once, even when registered multiple
      times.
    - run in reverse order
    - actually run for all ways a test could exit.
    
    This is prep work to extend exit handlers to also work in a subtest
    aware way.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 78f2ea3bc8ff450ea675919bcd1f3fc5747b8ee8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Feb 18 00:24:33 2016 +0100

    lib/igt_core: remove igt_disable/enable_exit_handlers
    
    No longer needed, and also not really a safe idea.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 926bcc56f97a5a3bea8d058f2c56bc575eaf024c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Feb 18 00:22:38 2016 +0100

    gitignore: Add .dirstamp
    
    autofu apparently adds these files for non-recoursive make. Fallout
    from the uwildmat addition.
    
    While at it also exclude stuff generated by make distcheck
    
    Cc: Derek Morton <derek.j.morton@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit c644c551777a1867b45bd4bc0f83fa333ac5af29
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Feb 18 00:17:11 2016 +0100

    tests/kms_mmap_write_crc: Use the right fork helpers
    
    For a background task the fork helpers are more appropriate, since we
    can explicitly cancel children. Also, anything that does real work is
    supposed to be in fixtures.
    
    Cc: Tiago Vignatti <tiago.vignatti@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>
    
    --
    Tiago, can you pls check that I haven't broken anythig?
    
    Thanks, Daniel

commit 771dbb06b52247ce86222b0d88c7ee48616c7a22
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Feb 17 18:33:50 2016 +0100

    lib/igt_kms: Don't disable exit handlers around set_vt_mode
    
    This was originally added to work around a race, but then that's
    broken now. And set_vt_mode generally never results in a test binary
    crash, so overkill.
    
    I want to get rid of this interface since I spotted some abuse.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 74761382b3cf4093da4d10a7b92d25721ad92fc7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 8 14:10:56 2016 +0000

    benchmarks/gem_latency: Replace igt_stats with igt_mean
    
    Use a simpler statically allocated struct for computing the mean as
    otherwise we many run out of memeory!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3a7325e4989352c7a3150628e0f941573dffbf62
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 8 11:43:31 2016 +0000

    igt/gem_exec_nop: Add a basic test
    
    Demonstrate how trivial it is to lockup Braswell, at least my N3050 nuc,
    by saturating the interrupt handler with a few requests.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=93467
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1985459b095cb463d434b6be91a464998ff538d9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 4 21:06:40 2016 +0000

    igt/gem_ringfill: Check full rings across suspend/hibernate
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d8842d385cf4cc7928b478d45274320620bfdcc7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 4 20:28:28 2016 +0000

    igt/gem_exec_suspend: Check with both cached/uncached objects
    
    Keep an eye on domain tracking for both cached/uncached objects across
    suspend.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 697c3f5550d8a58901c010635ecb7a76a524d296
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 4 10:19:38 2016 +0000

    lib: Magic for_each_engine() macro to iterate over available engines
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 60eafc548911d8625d20443a203c5aff3662c39a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 4 09:40:51 2016 +0000

    igt/gem_exec_suspend: Do pre/post suspend double checks
    
    Check that the system operates normally before and after the suspend (as
    well as across the suspend). The goal is to isolate the breakage to the
    subtest.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9ba9af2ea4306796cbb72c76bc0de05a0fb14c6b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 4 20:38:16 2016 +0000

    lib: Skip execution in gem_has_ring()
    
    By looking for a particular error we can avoid actually executing
    anything when testing whether the kernel supports an individual ring.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0501dcfd0fd93709366db43d37c0aba09aab81b4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 4 15:35:24 2016 +0000

    lib: Flush all possible rings
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 310f99ceb86a13d10665cd7c7861bfd1cbeff8ed
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 4 15:03:42 2016 +0000

    lib: Flush BSD2 as well when available
    
    When flushing work and idling the GPU, we need to flush all engines,
    including the forgotten BSD2.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2d2b61e1608433733de3d04a492d0d85a93933cd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 7 15:34:02 2016 +0000

    igt/gem_reloc_overflow: Fix errno tests for "overflow"
    
    The execbuffer2 ABI is not strictly limited to a total of UINT32_MAX
    entries, rather each object can have a maximum of UINT32_MAX relocation
    entries and the current implementation imposes that the total must be
    allocable in a contiguous buffer when necessary (i.e as large as the
    kernel can conceivably allocate). This is not an ABI constraint per-se,
    just an implementation issue.
    
    Whilst updating the limits for 64bit kernels, review usable of
    ioctl-wrappers (i.e. use __gem_execbuf now available) and include a
    batch of more tests to explore the boundary conditions of the maximum
    relocation size. Note that rather than guess the reloc-max, it would be
    better if we queried it. Also it is of vital importance that when
    constructing a test to fail in a particular fashion, it must not include
    any other error (e.g. we were passing in relocation arrays with invalid
    target handle and domains when looking for a potential overflow across
    multiple objects).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ec1ac2e2e952778c204374a6d186ec40951bc256
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 7 14:01:18 2016 +0000

    igt/pm_rpm: Wait for PCI D3
    
    The transition to PCI device state D3 is not instantaneous and only
    started when runtime suspended. Allow the driver/hardware a little bit
    of time to complete the transition before declaring a test failure.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=93123
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 174a06b129d63a09486dd9ee8d6368cbf46a64c1
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Fri Mar 4 14:39:06 2016 +0000

    gem_ppgtt: Fix flink-and-exit-vma-leak for engine->last_context
    
    Now that engines keep references on the last executed contexts,
    to fix this test we need to execute an unrelated context last to
    ensure the one we are interested in is free to be cleaned up when
    we expect it to be.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit afa38a4d454c4d7058e56fd84d5b9fe42dad1ee2
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Mon Mar 7 12:59:55 2016 +0200

    tests/kms_setmode: Fix compilation warnings.
    
    kms_setmode.c:384:30: warning: declaration of ‘drm_fd’ shadows a global
    declaration [-Wshadow]
    
    kms_setmode.c:45:12: note: shadowed declaration is here static int drm_fd;
    
    kms_setmode.c:391:38: warning: passing argument 8 of ‘drmModeSetCrtc’
    discards ‘const’ qualifier from pointer target type
    [-Wdiscarded-qualifiers] ids, crtc->connector_count, &crtc->mode);
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit b33a78b9b1bb5e0f718dfaf44497b07bd468372f
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Feb 23 16:23:26 2016 +0100

    tests/kms_setmode: Add tests when not stealing encoders on same crtc.
    
    Excercise connector stealing harder. There is a border case in atomic currently where
    encoder stealing is not prevented on the same crtc when the encoder is not reassigned.
    
    The following testcase excercises that path and causes a OOPS on my system with nightly.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 364d3785bfa240a56c350970d4523c5e59390184
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Mar 4 18:48:24 2016 -0300

    tests/kms_draw_crc: remove hardcoded PIPE_A
    
    The test used to assume pipe A was being used for everything, and we
    tried to fix this in commit "tests: fix CRTC assignment for a few
    tests", but the pipe CRC code was forgotten.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 55fa16b6547ee9b0f305fee8bf14338626f91dfa
Author: Gabriel Feceoru <gabriel.feceoru@intel.com>
Date:   Fri Mar 4 12:02:14 2016 +0200

    kms_frontbuffer_tracking: Remove hardcoded PIPE_A
    
    Use the pipe which is given from the possible_crcs for that connected port
    instead.
    
    On BSW there are constrains for the crtc<-->connector, this fix make this test
    passing on BSW.
    
    v2 (from Paulo): bikeshed the blank lines.
    
    Signed-off-by: Gabriel Feceoru <gabriel.feceoru@intel.com>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 5267f2447146b1d8fc555f0d8253bd8eb215f39b
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Feb 24 17:34:00 2016 -0300

    kms_frontbuffer_tracking: add missing igt_remove_fb calls
    
    Let's be good citizens and properly handle our garbage.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit d8bf28f0cbe990d5b1906c686cdaa76c74b1cffd
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Feb 26 11:27:20 2016 -0300

    tests: fix CRTC assignment for a few tests
    
    All the tests I wrote always assumed that every connector supported
    CRTC 0. This is not the case for BSW and possibly others, so fix the
    tests before the CI reports more failures.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 9751e602b7e10310b011586fe16d7eea2cfb9026
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Feb 26 09:54:43 2016 -0300

    kms_frontbuffer_tracking: try harder to find suitable connectors
    
    Instead of just giving preference to an eDP primary connector, give
    preference to one that's eDP and supports pipe A, then try lesser
    optimal combinations later.
    
    We could try to make our test suite use different sets of connectors
    when testing FBC and PSR, but that would require some rework, and we
    would still be helpless when testing the combination of FBC+PSR.
    
    Also notice that we still hardcode pipe A for the primary connector,
    regardless of whether it supports it. This will be solved in the next
    commits.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 1d5dbbf844852d520b40e6cdf7cddf53b8f72b47
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Feb 26 09:12:21 2016 -0300

    kms_frontbuffer_tracking: extract find_connector function
    
    We're going to make our search for connnectors a little more
    complicated, so extract the function since we're going to call it a
    few more times.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit b1388963313ba701816cef7b7e470709ba50b5d3
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Feb 26 08:57:31 2016 -0300

    kms_frontbuffer_tracking: don't pass the crtc idx to init_mode_params
    
    We already pass the crtc id, so use the id to retrieve the index.
    We'll change the way we pass the crtc id in the next commits, so we'll
    have to call a function to calculate the index based on the id at that
    point. Do the change now in order to avoid big commits later.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit c6279ec4bbbc628bf8d759d17528d32d5469db61
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Feb 26 08:54:57 2016 -0300

    lib/igt_kms: add kmstest_get_crtc_idx
    
    Move it from pm_rpm.c to lib/igt_kms and remove the hardcoded version
    from kms_frontbuffer_tracking. I'm also planning to add other callers.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit b6b130c5ebb82145000eed0b16f951d844e8a126
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Mar 1 12:57:25 2016 +0200

    man: update intel_reg.rst to be more in line with the others
    
    Use the definitions and formatting used in other man pages, etc.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit cc7387f17ce5750fc640355d94ed60b6936c2d7b
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Mar 1 12:57:48 2016 +0200

    man: rewrite manual pages in reStructuredText
    
    intel_reg.rst was the first man page written in reStructuredText. Follow
    suit with the rest of the man pages.
    
    Add a generated defs.rst include file for definitions such as
    intel-gpu-tools version. This replaces the MAN_SUBSTS sed script
    substitutions from xorg-macros for old man pages.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 037bc69fde7e66511781ebd3fb3f712056fc1ff2
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Feb 12 21:28:54 2016 +0200

    lib/igt_fb: Fix gen2 and 915 Y tile sizes
    
    gen2 tile dimensions are 128x32 for both X and Y tiling
    915 tile dimensions are 512x8 for both X and Y tiling
    
    Fix igt_get_fb_tile_size() to return the correct Y tile dimensions
    for these platforms. X tile was fine already.
    
    Cc: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 0c0287322069cfac97011b6d24d906a10cfd6b25
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Feb 12 21:15:07 2016 +0200

    lib/igt_kms: Fix igt_fb_set_size() debug message
    
    The debug message in igt_fb_set_size() was copy pasted
    from igt_fb_set_position() and not adjusted to say the
    right thing. Fix it up.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 7499b913b340c56f9d566cc13300d305385eea96
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 3 11:51:18 2016 +0000

    lib/igt_gt: Replace asm clflush/mfence with __builtin_ia32 variants
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4133c7f85bbb89684c326b0ab178c7c11b09df22
Author: David Weinehall <david.weinehall@linux.intel.com>
Date:   Wed Mar 2 19:01:28 2016 +0200

    tests/pm_rpm: Fix CRASH on machines that lack LLC
    
    On machines that lack an LLC the pm-caching subtest will
    terminate with sigbus and thus CRASH during the
    I915_CACHING_CACHED iteration. To work around this we reset
    the caching to I915_CACHING_NONE before doing memory access.
    
    v2: Various improvements based on feedback from Chris Wilson
    
    v3: Fix incorrect Signed-off-by: line
    
    v4: Further improvements based on feedback from Chris Wilson
    
    Signed-off-by: David Weinehall <david.weinehall@linux.intel.com>
    Reviewed-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit cb4589af094cd839ab50d4ca9836d5d6a65e063c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 3 10:15:35 2016 +0000

    lib: Tidy testing for rtcwake
    
    When performing a dummy-run of rtcwake, hide the output as it doesn't
    print anything useful (just when it will wake up).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit af22497ac99d77f4d1d70372d9039c4dc0905995
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 3 10:11:54 2016 +0000

    igt/gem_softpin: Check norelocations hold versus suspend/resume
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 95fbf7efed07a58edf39f28b3ad485b8792e4548
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 3 09:05:13 2016 +0000

    igt/gem_exec_basic: Check that we don't write into the const execbuf arg
    
    For good measure, also check that we can read the args from a GTT
    mmaping.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a25983e0b12c99bb49ce8e83d40f46bf1aed8298
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 2 16:35:40 2016 +0000

    igt/gem_exec_suspend: Exercise simple exec-and-read across suspend
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 18d0b1efb8759000d7ccb82334ea823b9857dfc9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 2 14:12:12 2016 +0000

    lib/igt_fb: Fix domain tracking for GTT cairo surfaces
    
    If we create a cairo surface using a GTT mmaping, then we need to use
    the GTT access domain. cairo surfaces created with a blit temporary (for
    unfenced surfaces) still use the CPU domain.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5533f22c354af2efd137a2f711d2e1ec86d70cb2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 2 13:57:35 2016 +0000

    lib: Show the command that fails when suspending
    
    Include the system("") in the debug output for the assertion failure.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a3de0bc9df07918d08298d954127f07085a086e5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 2 10:11:14 2016 +0000

    tests/drv_missed_irq_hang: Wait harder
    
    Improve the busy-load for triggering a wait-on-interrupt and check for
    extraneous missed-interrupts before and after our tests.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=88437
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 02befb8b03f8c052394670f9988571429d13b227
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 2 09:19:28 2016 +0000

    igt/gem_ctx_create: Exercise implicit per-fd context creation
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit fbe92a222ecffbb848147509674b4c12377d7a4d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 1 21:18:51 2016 +0000

    igt/gem_ctx_create: Exercise a trivial allocation failure
    
    Trying to allocate and use lots of contexts with execlists and !llc end
    ups in faliure very quickly.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1112abe5ece9b2a991c9af2d11b6943784e0e657
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Tue Mar 1 18:01:33 2016 +0200

    Bump again to 1.14, as Chris managed to push before I got chance to do a
    release. Modified REAMDE to include link for doing releases.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit f3751d53bda785810acf85692e809627360252bf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 1 15:06:43 2016 +0000

    benchmarks/gem_blt: Measure the throughput of synchronous copies
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b59bcb811a402c716302f61ca8d4d9af6a967807
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Tue Mar 1 17:03:55 2016 +0200

    NEWS: Updates and bump release to 1.14.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 95ca7644dbed799744b877d3b451d86c286627fe
Author: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
Date:   Tue Mar 1 11:01:33 2016 +0000

    tests/drv_hangman: test for acthd increasing through invalid VM space
    
    The hangcheck logic will not flag an hang if acthd keeps increasing.
    However, if a malformed batch jumps to an invalid offset in the ppgtt it
    can potentially continue executing through the whole address space
    without triggering the hangcheck mechanism.
    
    This patch adds a test to simulate the issue. I've kept the test running
    for more than 10 minutes before killing it on a BDW and no hang occurred.
    I've sampled i915_hangcheck_info a few times during the run and got the
    following:
    
    Hangcheck active, fires in 468ms
    render ring:
            seqno = fffff55e [current fffff55e]
            ACTHD = 0x47df685ecc [current 0x4926b81d90]
            max ACTHD = 0x47df685ecc
            score = 0
            action = 2
            instdone read = 0xffd7ffff 0xffffffff 0xffffffff 0xffffffff
            instdone accu = 0x00000000 0x00000000 0x00000000 0x00000000
    
    Hangcheck active, fires in 424ms
    render ring:
            seqno = fffff55e [current fffff55e]
            ACTHD = 0x6c953d3a34 [current 0x6de5e76fa4]
            max ACTHD = 0x6c953d3a34
            score = 0
            action = 2
            instdone read = 0xffd7ffff 0xffffffff 0xffffffff 0xffffffff
            instdone accu = 0x00000000 0x00000000 0x00000000 0x00000000
    
    Hangcheck active, fires in 1692ms
    render ring:
            seqno = fffff55e [current fffff55e]
            ACTHD = 0x1f49b0366dc [current 0x1f4dcbd88ec]
            max ACTHD = 0x1f49b0366dc
            score = 0
            action = 2
            instdone read = 0xffd7ffff 0xffffffff 0xffffffff 0xffffffff
            instdone accu = 0x00000000 0x00000000 0x00000000 0x00000000
    
    v2: use the new gem_wait() function (Chris)
    
    v3: switch to unterminated batch and rename test, remove redundant
        check, update test requirements (Chris), update top comment
    
    v4: force gpu reset if the hang detection fails (Mika)
    
    Cc: Mika Kuoppala <mika.kuoppala@linux.intel.com>
    Cc: Arun Siluvery <arun.siluvery@linux.intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
    [Mika: removed batch_len=8]
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 03c7f84eb1c95b9761bbff3c9fcaed8472c3c6fb
Author: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
Date:   Tue Mar 1 11:01:32 2016 +0000

    lib: move i915_wedged_set to ig_gt.c
    
    Upcoming tests will call it to recover from bad states caused by
    hangcheck bugs.the function was renamed to igt_force_gpu_reset to have a
    naming closer to other hang-related functions in the same file.
    
    The value written to the debugfs has also been changed to -1; this makes
    no differences with the current implementation but copes with upcoming
    TDR changes (still under discussion) that should allow the resetting of
    a mask of rings.
    
    Signed-off-by: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 094e0cbabb9615c87d8e813a91f158fe439b536d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 1 13:22:03 2016 +0000

    igt/gem_concurrent_blit: Deglobalify num_buffers
    
    More num_buffers onto the local struct passed down into the tests to
    avoid the issue with having to modify the global value inside the tests
    leading to hilarity if the test asserts.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit aed69b56d4c63a19594440be6679307b2781ae2c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 25 21:43:01 2016 +0000

    lib: Add read/write direction support for dmabuf synchronisation
    
    Allow read-only synchronisation on dmabuf mmaps, useful to allow
    concurrent read-read testing between the CPU and GPU.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 925e5e1caef9b56bd53df457735514b644c7a399
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Feb 29 15:33:26 2016 +0000

    lib: Check required number of surfaces against VFS file limits
    
    If we want to create more file handles than VFS supports (itself often a
    memory limited value), report that we can not create that many objects
    via intel_require_memory().
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a508fc86224887c413d99e55b524f3b03a073ed5
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Mon Feb 29 10:04:31 2016 +0100

    tests/kms_force_connector_basic: Disable all crtc's for load-detect.
    
    Load detection requires a inactive crtc to run. The CI igt tests are
    failing, so ensure there is at least 1 inactive crtc.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 754876378d6c9b2775e8c07b4d16f9878c55949f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 26 22:11:10 2016 +0000

    igt/gem_sync: Enforce a timeout of 20s
    
    The sync test is supposed to complete in 10s. But some bugs cause it to
    run very, very slowly. As a defence against those, terminate the test if
    we wait for more than 20s.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3482925454da8c107f720448d24789ce6bf884c4
Author: Matt Roper <matthew.d.roper@intel.com>
Date:   Fri Feb 26 08:46:30 2016 -0800

    kms_atomic: drop unnecessary connector looping from plane_primary test
    
    Local variable num_connectors is never initialized before being
    auto-incremented in the loop.  If we wind up with a non-zero garbage
    value, it will lead us to try to write to an out-of-bounds array index.
    We should probably initialize it to zero before use.
    
    However on closer inspection, the plane_primary test doesn't actually
    wind up using the connector list or number of connectors, so just remove
    the whole block of code; it was probably brought in by accident as part
    of a copy-paste operation.
    
    Cc: Daniel Stone <daniels@collabora.com>
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>

commit 405b3478d1ac28141a334fe42e2908f2ea59e976
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 26 12:47:33 2016 +0000

    igt/drv_hangman: Tidy up assertion failure message
    
    Because
    
    (drv_hangman:6035) CRITICAL: Failed assertion: !((__extension__
    (__builtin_constant_p (l) && ((__builtin_constant_p (tmp) && strlen
    (tmp) < ((size_t) (l))) || (__builtin_constant_p (s) && strlen (s) <
    ((size_t) (l)))) ? __extension__ ({ size_t __s1_len, __s2_len;
    (__builtin_constant_p (tmp) && __builtin_constant_p (s) && (__s1_len =
    strlen (tmp), __s2_len = strlen (s), (!((size_t)(const void *)((tmp) +
    1) - (size_t)(const void *)(tmp) == 1) || __s1_len >= 4) &&
    (!((size_t)(const void *)((s) + 1) - (size_t)(const void *)(s) == 1) ||
    __s2_len >= 4)) ? __builtin_strcmp (tmp, s) : (__builtin_constant_p
    (tmp) && ((size_t)(const void *)((tmp) + 1) - (size_t)(const void
    *)(tmp) == 1) && (__s1_len = strlen (tmp), __s1_len < 4) ?
    (__builtin_constant_p (s) && ((size_t)(const void *)((s) + 1) -
    (size_t)(const void *)(s) == 1) ? __builtin_strcmp (tmp, s) :
    (__extension__ ({ const unsigned char *__s2 = (const unsigned char *)
    (const char *) (s); int __result = (((const unsigned char *) (const char
    *) (tmp))[0] - __s2[0]); if (__s1_len > 0 && __result == 0) { __result =
    (((const unsigned char *) (const char *) (tmp))[1] - __s2[1]); if
    (__s1_len > 1 && __result == 0) { __result = (((const unsigned char *)
    (const char *) (tmp))[2] - __s2[2]); if (__s1_len > 2 && __result == 0)
    __result = (((const unsigned char *) (const char *) (tmp))[3] -
    __s2[3]); } } __result; }))) : (__builtin_constant_p (s) &&
    ((size_t)(const void *)((s) + 1) - (size_t)(const void *)(s) == 1) &&
    (__s2_len = strlen (s), __s2_len < 4) ? (__builtin_constant_p (tmp) &&
    ((size_t)(const void *)((tmp) + 1) - (size_t)(const void *)(tmp) == 1) ?
    __builtin_strcmp (tmp, s) : (- (__extension__ ({ const unsigned char
    *__s2 = (const unsigned char *) (const char *) (tmp); int __result =
    (((const unsigned char *) (const char *) (s))[0] - __s2[0]); if
    (__s2_len > 0 && __result == 0) { __result = (((const unsigned char *)
    (const char *) (s))[1] - __s2[1]); if (__s2_len > 1 && __result == 0) {
    __result = (((const unsigned char *) (const char *) (s))[2] - __s2[2]);
    if (__s2_len > 2 && __result == 0) __result = (((const unsigned char *)
    (const char *) (s))[3] - __s2[3]); } } __result; })))) :
    __builtin_strcmp (tmp, s)))); }) : strncmp (tmp, s, l))) == 0)
    
    is a little hard to understand at a glance.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 430439541cc1ee6003569bf4b906e5095541e542
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 26 10:06:51 2016 +0000

    igt/gem_sync: Test across all rings simultaneously
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0667cf56691e9f72685e36ce506790d8e279183a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 26 09:09:51 2016 +0000

    igt/gem_sync: Add some forked variants
    
    Repeat the synchronisation test with a few competing processes.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d627e30c9e7be7c8ab03fe486ce7ab0d68b5c33c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 25 19:54:47 2016 +0000

    igt/gem_concurrent_blit: Pretend tests exist
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cf569c216b7b53c2a2f78d9e76a0ea093184c27b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 25 17:58:24 2016 +0000

    igt/gem_concurrent_blit: Add dmabuf exercisers
    
    Create and use dmabuf mmaps as well to ensure correct synchronisation
    between concurrent rendering and CPU access.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f27d295fe3a1ca005dfa0fbfd81d6808b1f5ca47
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Feb 23 17:45:49 2016 +0000

    lib: Move gem_wait() to ioctl-wrappers
    
    We intend to use gem_wait() in more tests than gem_wait.c, so move the
    simple ioctl wrapper into the core.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit babcf40f29d9e9cce5d0739b1784eb94fe91bd26
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Feb 15 15:00:16 2016 -0200

    kms_frontbuffer_tracking: add basic subtest
    
    This test executes one of each of the very basic operations with
    whatever features are enabled by default in the Kernel, without
    checking their statuses: we only care about the CRCs. Although it's
    completely redundant, it will be ran by the CI so we can spot
    regressions both in the specific features and in the frontbuffer
    tracking subsystem.
    
    We're not checking sink CRCs since they're still unreliable and we
    don't want false negatives in the CI.
    
    It takes 5 seconds to run this test on my machines.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit b87188795e9fda89c7e376726283a63817e83c60
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Feb 15 12:15:14 2016 -0200

    kms_frontbuffer_tracking: don't fail fbc-farfromfence on SKL
    
    SKL doesn't do the same dspaddr_offset magic as the older gens, so FBC
    may not be enabled on fbc-farfromfence. This is not a bug since FBC is
    just disabled, and this is the expected case of the current Kernel, so
    let's not fail the test.
    
    If/once we land the proper infrastructure to fix this in the Kernel we
    may revert this commit.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 556535400c0b3058569d7df13fcdea826bdeb875
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 19 10:31:44 2016 +0000

    igt/gem_exec_reloc: Check WC mmaps as well
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 15deba45756eeeacca2ad83ac931606986f8d669
Author: David Weinehall <david.weinehall@linux.intel.com>
Date:   Thu Feb 18 13:08:46 2016 +0200

    lib/igt_pm: Lib for power management
    
    Move power management related code to a separate library.
    Initially this is done only for workarounds that apply to external
    components.  Modify the users of such workarounds accordingly.
    This currently involves HD audio and SATA link power management.
    For SATA link PM there's also code to save the previous settings,
    to allow for resetting the values after we've finished testing.
    
    Signed-off-by: David Weinehall <david.weinehall@intel.com>
    Reviewed-by: Marius Vlad <marius.c.vlad@intel.com>
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 16038908de5ef491c8c795ae48ed880de235c532
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 18 10:35:10 2016 +0000

    lib: Restore gem_available_aperture_size()
    
    Missed an error whilst rebasing and trying to modify the previous patch
    to keep this function intact... Instead, I now have to add this patch to
    restore gem_available_aperture_size() and its one usage.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 391b32c3822993a6dd5874d2898b0c16b8eb9d03
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 5 18:35:21 2016 +0000

    igt: Report the global GTT size
    
    For many tests, the relevant aperture is not the ppGTT but the internal
    global GTT managed by the kernel. Use this limit appropriately.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e85c530eab9ef20b2708ff36bfc6f6fa3990e1f4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 18 10:27:07 2016 +0000

    igt: Mark gem_cs_tlb/gem_cs_prefetch as a pair of basic GTT layout tests
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3990dd87b60bf8092671cb3c536666936b460b0c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Feb 16 14:42:04 2016 +0000

    igt/gem_ctx_thrash: Combine context thrashing with a render test
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3b12d9e6dc115939ddd110c7a7f7ad319b731524
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 5 11:46:41 2016 +0000

    igt/gem_ctx_thrash: Double number of threads/proceesses
    
    Slightly increase the stress by doubling the number of contending
    threads and the number of times we try and use each ctx/fd.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ef724ab2bba7a51113542c0bc9e77d34e8935c60
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Thu Feb 4 12:06:57 2016 +0000

    lib/igt_core.c: Expand --run-subtest functionality.
    
    Added extended wildcard support when specifying --run-subtest.
    
    Wildcard format is as specified in rfc3977 and the uwildmat() implementation
    is taken from libinn.
    See https://tools.ietf.org/html/rfc3977#section-4 for a description of
    allowed wildcard expressions.
    
    v2: Use comma as list separator (Ville Syrjala)
    support both ^ and ! as not operators (Dave Gordon)
    
    v3: Updated to use uwildmat() (Dave Gordon)
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>
    [danvet: Fixup whitespace. Add #include <stdint.h>. Run lint.]
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0a45d6ba1371bb879f55d9f75d893552c2f71c97
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Fri Feb 12 15:26:10 2016 +0200

    tests/prime_mmap: Encapsulate check_for_dma_buf_mmap() in igt_fixture.
    
    This unbreaks distcheck target that in turn runs each test with --list-subtests.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit 42c7dd1255cd1e37298b76d38ea9962e76efd63a
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Sun Feb 14 19:14:48 2016 +0200

    Update MAINTAINERS file.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>

commit c5c1270f0f0f892f0e2a14c789e85f09f79ef1a6
Author: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>
Date:   Sat Feb 13 12:37:34 2016 -0800

    aubdump: Add a get_bo() lookup function
    
    We'll use this instead of accessing the bo array directly and add a few
    sanity checks.

commit 68a064ec64dab22d353dcde0b3208fa067abed51
Author: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>
Date:   Sat Feb 13 12:34:22 2016 -0800

    aubdump: Don't use .so constructors for initializing
    
    This doesn't seem to work when mixed with constructors in other shared
    objects or other creative uses of the linker. Let's stick with a simpler
    mechanism, where we look up the libc functions when our hooks are called
    for the first time.

commit a3506b52199d2ac8dbc358fbb562f700f1d9ded4
Author: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>
Date:   Sat Feb 13 12:33:30 2016 -0800

    aubdump: Raise SIGTRAP on failure

commit ca3d355846c0b9746d2d6892bd0a4c1413b2abab
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 12 16:38:04 2016 +0000

    igt/gem_userptr_blits: Flip sign on error check
    
    Following conversion to __gem_execbuf() we need to consider that it
    returns -errno when checking the result.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=94117
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ed40329c30b50c69b25c38fa728151ab9dae00cb
Author: Tiago Vignatti <tiago.vignatti@intel.com>
Date:   Tue Dec 8 19:37:32 2015 -0200

    tests: Add prime_mmap_coherency for cache coherency tests
    
    Different than kms_mmap_write_crc that captures the coherency issues within the
    scanout mapped buffer, this one is meant for test dma-buf mmap on !llc
    platforms mostly and provoke coherency bugs so we know where we need the sync
    ioctls.
    
    I tested this with !llc and llc platforms, BTY and IVY respectively.
    
    Signed-off-by: Tiago Vignatti <tiago.vignatti@intel.com>
    Reviewed-by: Stéphane Marchesin <marcheu@chromium.org>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 7c89c9d7346ca940a4c5d2828ac0c85921fa52c3
Author: Tiago Vignatti <tiago.vignatti@intel.com>
Date:   Mon Aug 10 13:28:37 2015 -0300

    tests: Add kms_mmap_write_crc for cache coherency tests
    
    This program can be used to detect when CPU writes in the dma-buf mapped object
    don't land in scanout due cache incoherency.
    
    Although this seems a problem inherently of non-LCC machines ("Atom"), this
    particular test catches a cache dirt on scanout on LLC machines as well. It's
    inspired in Ville's kms_pwrite_crc.c and can be used also to test the
    correctness of the driver's begin_cpu_access and end_cpu_access (which requires
    i915 implementation.
    
    To see the need for flush, one has to run using '-n' option to not call the
    sync ioctls which, via a rather simple CPU hog the system will trashes the
    caches, while the test will catch the coherency issue. If you now suppress
    '-n', then things should just work like expected.
    
    I tested this with !llc and llc platforms, BTY and IVY respectively.
    
    v2: use prime_handle_to_fd_for_mmap instead.
    v3: merge end_cpu_access() patch with this and provide options to disable sync.
    v4: use library's prime_sync_{start,end} instead.
    v7: use CPU hog instead and use testing rounds to catch the sync problems.
    
    Signed-off-by: Tiago Vignatti <tiago.vignatti@intel.com>
    Reviewed-by: Stéphane Marchesin <marcheu@chromium.org>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 35debab2d9690aa6c26528358e882168e90dcb2b
Author: Tiago Vignatti <tiago.vignatti@intel.com>
Date:   Fri Dec 11 18:50:35 2015 -0200

    lib: Add prime_sync_start and prime_sync_end helpers
    
    This patch adds dma-buf mmap synchronization ioctls that can be used by tests
    for cache coherency management e.g. when CPU and GPU domains are being accessed
    through dma-buf at the same time.
    
    v7: add sync invalid flags test.
    
    Signed-off-by: Tiago Vignatti <tiago.vignatti@intel.com>
    Reviewed-by: Stéphane Marchesin <marcheu@chromium.org>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 4edfa09ae4c184177389e339c57d090914936421
Author: Tiago Vignatti <tiago.vignatti@intel.com>
Date:   Wed Jul 29 18:26:29 2015 -0300

    prime_mmap: Add basic tests to write in a bo using CPU
    
    This patch adds test_correct_cpu_write, which maps the texture buffer through a
    prime fd and then writes directly to it using the CPU. It stresses the driver
    to guarantee cache synchronization among the different domains.
    
    This test also adds test_forked_cpu_write, which creates the GEM bo in one
    process and pass the prime handle of the it to another process, which in turn
    uses the handle only to map and write. Roughly speaking this test simulates
    Chrome OS  architecture, where the Web content ("unpriviledged process") maps
    and CPU-draws a buffer, which was previously allocated in the GPU process
    ("priviledged process").
    
    This requires kernel modifications (Daniel Thompson's "drm: prime: Honour
    O_RDWR during prime-handle-to-fd") and therefore prime_handle_to_fd_for_mmap is
    added to fail in case these lack. Also, upcoming tests (e.g. next patch) are
    going to use it as well, so make it public and available in the lib.
    
    v2: adds prime_handle_to_fd_with_mmap for skipping test in older kernels and
    test for invalid flags.
    
    Signed-off-by: Tiago Vignatti <tiago.vignatti@intel.com>
    Reviewed-by: Stéphane Marchesin <marcheu@chromium.org>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit e0efeb97a970fbbd5adaeef472bf9f78777c6cb4
Author: Rob Bradford <rob@linux.intel.com>
Date:   Wed Jul 29 17:23:58 2015 -0300

    prime_mmap: Add new test for calling mmap() on dma-buf fds
    
    This test has the following subtests:
     - test_correct for correctness of the data
     - test_map_unmap checks for mapping idempotency
     - test_reprime checks for dma-buf creation idempotency
     - test_forked checks for multiprocess access
     - test_refcounting checks for buffer reference counting
     - test_dup checks that dup()ing the fd works
     - test_userptr make sure it fails when mmaping due the lack of obj->base.filp
       in a userptr.
     - test_errors checks the error return values for failures
     - test_aperture_limit tests multiple buffer creation at the gtt aperture
       limit
    
    v2 (Tiago): Removed pattern_check(), which was walking through a useless
    iterator. Removed superfluous PROT_WRITE from gem_mmap, in test_correct().
    Added binary file to .gitignore
    v3 (Tiago): squash patch "prime_mmap: Test for userptr mmap" into this one.
    v4 (Tiago): use synchronized userptr for testing. Add test for buffer
    overlapping.
    
    Signed-off-by: Rob Bradford <rob@linux.intel.com>
    Signed-off-by: Tiago Vignatti <tiago.vignatti@intel.com>
    Reviewed-by: Stéphane Marchesin <marcheu@chromium.org>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit e1f663b543e89a58746b0d0bebb7bab30d325e1c
Author: Tiago Vignatti <tiago.vignatti@intel.com>
Date:   Wed Aug 12 15:57:12 2015 -0300

    lib: Add gem_userptr and __gem_userptr helpers
    
    This patch moves userptr definitions and helpers implementation that were
    locally in gem_userptr_benchmark and gem_userptr_blits to the library, so other
    tests can make use of them as well. There's no functional changes.
    
    v2: added __ function to differentiate when errors want to be handled back in
    the caller; bring gem_userptr_sync back to gem_userptr_blits; added gtkdoc.
    v8: remove local_i915_gem_userptr from gem_concurrent_all.c to use the global
    helpers instead.
    
    Signed-off-by: Tiago Vignatti <tiago.vignatti@intel.com>
    Reviewed-by: Stéphane Marchesin <marcheu@chromium.org>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 7670e286f5043d04af0cd1e6df1f092b5bcaf09e
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Feb 11 12:46:24 2016 +0100

    kms_force_connector_basic: Add force-load-detect test
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0e388f409a9cbbcbd9a8fd5cfa4df1e0d09599cc
Author: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
Date:   Mon Feb 1 14:24:37 2016 +0000

    tests/gem_exec_params: test all valid execution flags
    
    The control subtest has been extended to check the execution flags for
    all the rings that are present in the HW.
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2629f3aeef9989297da9bdd2c8dcb607e0bbfcea
Author: Tomeu Vizoso <tomeu.vizoso@collabora.com>
Date:   Tue Feb 9 15:45:37 2016 +0100

    lib: Fix build when vc4 headers are present
    
    Automake seems to not like variable assignments indented with tabs.
    
    Signed-off-by: Tomeu Vizoso <tomeu.vizoso@collabora.com>
    Fixes: 9e5478dc4345 ("lib: Only compile igt_vc4 is we have it")
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9e5478dc4345ec8747c4e109ba4f739a26b9341f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Feb 9 09:44:00 2016 +0100

    lib: Only compile igt_vc4 is we have it
    
    Unbreaks compilation fail.
    
    Also appease gcc in gem_exec_basic because.
    
    Cc: Eric Anholt <eric@anholt.net>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 467a9fac9bbb6385c0372a6c6a0f1d2f891984e9
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Jan 25 10:36:12 2016 -0800

    igt/vc4_wait_bo: Add tests with rendering performed.
    
    These caught an unexpected bug with clear colors (we'd get the last
    executed clear's color in our new BO), while failing to catch the bug
    I'd been hoping to find all along.
    
    Signed-off-by: Eric Anholt <eric@anholt.net>
    Reviewed-by: Daniel Stone <daniels@collabora.com>

commit e7e094f444ac59ee93b96d9021d8c11d51fecd59
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Jan 25 13:13:09 2016 -0800

    igt/vc4_create_bo: Test various paths in BO creation.
    
    create-bo-0 fails on the current kernel, and it's something I want to
    fix.
    
    v2: Use do_ioctl_err().
    
    Signed-off-by: Eric Anholt <eric@anholt.net>
    Reviewed-by: Daniel Stone <daniels@collabora.com>

commit 59f98997ab315465a052ed11e43ed7f6b0ec708a
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Jan 25 13:15:36 2016 -0800

    igt: Add a helper function for creating VC4 BOs.
    
    v2: Use do_ioctl().
    
    Signed-off-by: Eric Anholt <eric@anholt.net>
    Reviewed-by: Daniel Stone <daniels@collabora.com>

commit b8badc243630e88f243b66c20599cfd035286382
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Jan 25 10:01:35 2016 -0800

    igt: Add a helper function for mapping VC4 BOs.
    
    v2: Use do_ioctl().
    
    Signed-off-by: Eric Anholt <eric@anholt.net>
    Reviewed-by: Daniel Stone <daniels@collabora.com>

commit 4880e13d04c005c1d7918b4499be45704dea9aca
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Jan 22 18:04:29 2016 -0800

    igt: Add a helper function for getting a VC4 BO that's been drawn to.
    
    v2: Use do_ioctl().
    
    Signed-off-by: Eric Anholt <eric@anholt.net>
    Reviewed-by: Daniel Stone <daniels@collabora.com>

commit 7f421acb60793f5b25a8af5f668197331ba09d2a
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Jan 22 17:37:46 2016 -0800

    igt/vc4_wait_bo: Add a test for VC4's wait-for-BO ioctl.
    
    The pad subtest fails currently.
    
    v2: Use do_ioctl() and do_ioctl_err().
    
    Signed-off-by: Eric Anholt <eric@anholt.net>
    Reviewed-by: Daniel Stone <daniels@collabora.com>

commit d333a0ed69937cefdfe9b9937f6d9556e1c2238d
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Jan 22 17:18:29 2016 -0800

    igt/vc4_wait_seqno: Add a test for VC4's wait-for-seqno ioctl.
    
    v2: Use do_ioctl_err().
    
    Signed-off-by: Eric Anholt <eric@anholt.net>
    Reviewed-by: Daniel Stone <daniels@collabora.com>

commit 3f83f07039753131f01dbc09f312ffd61c088e31
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Jan 22 17:18:56 2016 -0800

    igt: Add support for DRIVER_VC4 flags on tests.
    
    Signed-off-by: Eric Anholt <eric@anholt.net>
    Reviewed-by: Daniel Stone <daniels@collabora.com>

commit ceca9ef8d0a9fb64c1a4da11381f13adb6eca303
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Jan 25 11:40:15 2016 -0800

    configure.ac: Test for libdrm_vc4 and build vc4 tests based on it.
    
    Signed-off-by: Eric Anholt <eric@anholt.net>
    Reviewed-by: Daniel Stone <daniels@collabora.com>

commit 8d441ee491ad91d67a650d99cc1bcd3ccbb9b662
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Feb 8 12:01:48 2016 +0000

    list-workarounds: Fix python 2 print statement
    
    That script is a python 3 script, so we can't use the python 2 print
    statement, it's a function now.
    
    I missed it in the review because reviewing a diff without additional
    context gives you a partial story.
    
    Cc: Sameer Kibey <sameer.kibey@intel.com>
    Cc: Dylan Baker <baker.dylan.c@gmail.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit fb9df0e5102253ab5b1017fc5347209727552831
Author: Kibey, Sameer <sameer.kibey@intel.com>
Date:   Fri Feb 5 13:55:19 2016 -0800

    list-workarounds: Extend the script to Mesa
    
    Updated the list-workarounds script so that it
    can parse Mesa directory if provided. Moved the
    common code to a separate function to allow
    reuse for both kernel and mesa.
    
    The new command line is:
    Usage: list-workarounds [options] path-to-kernel
           -k path-to-kernel -m path-to-mesa
    
    The legacy usage is retained to avoid breaking
    backwards compatibility. New parameters -k and
    -m are added for the new behavior.
    
    Either kernel or mesa or both paths can be specified.
    If path-to-mesa is invalid, error is reported.
    
    Signed-off-by: Sameer Kibey <sameer.kibey@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>

commit 6b3c832cfb0f9a4bd4e6784e0d0c70788937537b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 11 21:34:42 2015 +0000

    igt/gem_workarounds: Convert to real GPU hang injection
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6f7372f6644bed5b615d24bedc06fa84488e3c39
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 5 15:55:40 2016 +0000

    igt/gem_exec_alignment: Fix off-by-one in buffer objects
    
    When reducing the buffer count to fit into the aperture whilst aligned,
    remember to adjust the pointer so that the batch is the last object!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b081257d749b536de857952037ad3d9bbe40ddad
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 5 15:33:23 2016 +0000

    igt/gem_exec_alignment: Mark batch buffer as also requiring 48B
    
    If we completely fill the lower 4G of address space with our alignment
    objects, then we also need to mark the batch as requiring high-address.
    Though the kernel should be reordering in this case...
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ffbc59a3ef9b0d4347c43fd03681bbbd9d0e43d8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 5 11:16:18 2016 +0000

    lib: Silence a common debug message when creating a context
    
    In context tests, we may create thousands of contexts, the noise from
    each requirement passing drowning out the real information. Let's only
    do the requirement test (to detect if contexts are meant to be supported
    or plain broken) only on the error path.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e7faf33ec791b78b2bf1ebb81be228364c3439c4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 4 22:18:33 2016 +0000

    igt/gem_ctx_thrash: Rewrite to avoid extraneous allocations
    
    The goal of the test is to exercise what happens when we fill the Global
    GTT with the contexts. To that end, we only need to allocate 2/4GiB of
    context objects, and can forgo filling each context with buffers.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=94005
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0e96238bf35959f933b545d2ec85ada6b769cf8b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 4 17:41:05 2016 +0000

    igt/gem_userptr_blits: Limit amount of mlocked surfaces
    
    When testing surface eviction we don't need that many surfaces as we
    mlock surplus memory. Reducing the number of surfaces speeds up the test
    and prevents a couple of integer overflow bugs.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=94004
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7b5a81858193d775c08892b5072019488d7cdb0f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Dec 12 18:56:53 2015 +0000

    igt/gem_reset_stats: Convert from stop-rings to real hang injection
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9cc2b1336b60392b834e099ce3a3eb8ea723e29a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 11 13:40:11 2015 +0000

    igt/gem_ctx_exec: Convert from stop-rings to a real GPU hang/reset
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 38fe49d9a80a45ca529adaf8bbbba63e271ad30d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 4 11:17:42 2016 +0000

    tests/drv_hangman: Convert to using central list of engines
    
    Rather than encoding our own list of engines, use the common one for
    greater coverage.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 01e467a6312184f963b82c9004b6d7ce09961cc2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 1 11:29:51 2016 +0000

    igt/drv_hangman: Make the batchbuffer check more robust
    
    All the external viewer expects of the GPU error capture is to extract
    the exact batch that triggered the hang. Everything else is internal
    detail to aide in post-mortem debugging of the kernel driver (i.e.
    subject to change) and not of the userspace portion (under control of
    the test).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0753057446da0c74843c8a1000f589797da9388d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 11 13:27:49 2015 +0000

    igt/drv_hangman: Inject a true hang
    
    Wean drv_hangman off the atrocious stop_rings and use a real GPU hang
    instead.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8f6957a05a5176037d72d9a4c7d17c9bf8ac8f11
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 27 17:14:57 2016 +0000

    igt/gem_ringfill: Add exercising the default-ring to basic testing
    
    ringfill generates a few very common errors when submitting requests,
    and historically these have been where we have had many implementation
    bugs, repeated over and over again.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 348742ec0da6f2dff68bcdce02debc8d8538cf02
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 29 10:45:43 2016 +0000

    igt/gem_streaming_writes: Set bb start alignment to 64b for Ironlake
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3992babd985e1c70e216cdc42aab3e8872c07ad8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 28 22:01:37 2016 +0000

    igt/gem_busy: Refactor to use gem_require_ring()
    
    Now that gem_require_ring() does the right thing with BSD1/BSD2 we can
    use it to our advantage here.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3005665ead7b88607269e034f03742d5771dd924
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Jan 25 19:36:25 2016 -0200

    tools/intel_residency: use setitimer instead of {,u}alarm
    
    It seems that Android doesn't have ualarm(). Let's use setitimer()
    instead.
    
    The tool still won't compile on Android due to igt_fb requiring Cairo,
    but we're supposed to solve this in another patch since our igt_fb
    calls don't actually require Cairo.
    
    Reported-by: Derek Morton <derek.j.morton@intel.com>
    Tested-by: Derek Morton <derek.j.morton@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit ec5deb218de44cdd698a4cdb3e79b63854de15c0
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Jan 6 18:53:17 2016 -0200

    tests/pm_rpm: find an appropriate CRTC instead of hardcoding CRTC 0
    
    BSW does not allow CRTC 0 to be used on every connector, so we need to
    write code to actually find a suitable CRTC.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=93124
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 84157ad1b43117798e88c664bf1c82f7421cb770
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Jan 6 14:45:34 2016 -0200

    tests/pm_rpm: remove POWER_DIR definition
    
    Unused ever since we moved some code from pm_rpm.c to lib/. This is
    currently defined inside igt_aux.c.
    
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 7ca55f433c1e1fa722a46d1303524579581d6037
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Jan 26 10:52:29 2016 -0200

    tests/igt_fb: rename igt_get_all_formats to igt_get_all_cairo_formats
    
    I recently had this discussion with Daniel where I didn't want to use
    igt_drm_format_to_bpp() because it uses the format_desc array, and
    igt_fb currently assumes that all the format_desc formats have a
    matching valid Cairo format, so I wouldn't be able to easily add
    formats such as ARGB2101010.
    
    The function that has the assumption mentioned above is
    igt_get_all_formats: its current users call igt_get_all_formats, and
    then call cairo-dependent functions, such as igt_get_cairo_ctx on the
    returned formats.
    
    In order to document the current behavior and prevent any problems in
    case we start adding new formats without matching Cairo versions to
    format_desc, rename igt_get_all_formats to igt_get_all_cairo_formats
    and make it explicitly check for CAIRO_FORMAT_INVALID.
    
    Requested-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 55229f173e00947ecc05747a9038289940e30340
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Jan 26 10:40:43 2016 -0200

    lib/igt_fb: fix igt_get_all_formats documentation
    
    We give the callers a const pointer to a static variable that we reuse
    between multiple calls: they're not supposed to free it, and they
    don't free it today.
    
    Fix the documentation and leave the still reachable pointer instead of
    reworking the function and its callers.
    
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 12c1eb653fcf26ad3483478e497e09333422d7cd
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Jan 25 21:17:50 2016 -0200

    lib/igt_draw: use igt_drm_format_to_bpp()
    
    Don't reimplement the function.
    
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 0432201e6d85e84cdaf5b4b82404345014f93316
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Nov 30 17:10:43 2015 -0200

    kms_frontbuffer_tracking: standardize the used FB sizes
    
    We want to make sure that both tiled and untiled buffers have the same
    size for the same width/height/format. This will allow better control
    over the failure paths exercised by our tests: when we try to flip
    from tiled to untiled, we'll be sure that we won't execute the error
    path that checks for buffer sizes.
    
    v2: Use the new igt_calc_fb_size() instead of implementing our own
    size calculation (Daniel).
    v3: We can now use igt_drm_format_to_bpp() (Daniel).
    
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 096e020743b7e5500e36c4be73512ca548955829
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Jan 25 21:04:37 2016 -0200

    kms_frontbuffer_tracking: use igt_drm_format_to_bpp()
    
    The only format from fb_get_bpp() not supported by
    igt_drm_format_to_bpp() is ARGB2101010, but we don't really use it in
    kms_frontbuffer_tracking, so we can do the switch.
    
    Adding ARGB2101010 to igt_fb won't be that simple since there's no
    equivalent Cairo format, and igt_fb users assume that all formats
    known by igt_fb have equivalent Cairo formats.
    
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit be6f3fadaf2c45972f7a9830baa6fd35f4d755a6
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Nov 27 12:13:41 2015 -0200

    lib/igt_fb: make the automatic buffer sizes/strides smaller
    
    The big motivation behind this patch is that the current power-of-two
    granularity from igt_fb is way too big. There was more than one
    occasion where I had to work around this problem on
    kms_frontbuffer_tracking, and during my last workaround I was
    requested to just make igt_fb use more minimal buffers.
    
    I also need to export the size computation function so I won't need to
    reimplement it inside kms_frontbuffer_tracking.
    
    v2:
     - Fix the Yf sizes (Ville).
     - Don't change the Gen 2/3 behavior for both tiled and non-tiled.
    v3:
     - Edit the commit message, clarify that v1 was wrongly treating gen
       2/3 non-tiled as tiled (Chris).
    
    Requested-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit d63e72f0ad281f295b058a572741b995a5a0f64a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 28 17:02:11 2016 +0000

    igt/gem_cs_tlb: Increase BB start alignment to 64bytes
    
    Ironlake requires 64byte alignment for its MI_BATCH_BUFFER_START.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 89f81e039636c1fe8a4df846c769bbab7de609dc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 28 16:21:17 2016 +0000

    igt: More MI_STORE_DWORD fixes for gen5
    
    A few other tests I have updated recently to use MI_STORE_DWORD also need
    the magic bit for gen4/5.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3ec8b1d28e8d5ac924bd8f2e28baa31445bc5279
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 28 13:59:57 2016 +0000

    igt/gem_ringfill: Set MI_MEM_VIRTUAL flag for gen<6
    
    bit22 of MI_STORE_DWORD is confusing as the meaning changed between
    physical/virtual addressing in early gen and GTT/ppGTT in later gen. It
    looks like gen4 and gen5 still need the flag.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit eaa03678b00179da89f194113c0740c033857c1c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 28 13:44:19 2016 +0000

    lib: Hide BSD1/BSD2 rings on hardware without BSD2
    
    The kernel happily lets us run on I915_EXEC_BSD2 even with such hardware
    existing. Sigh.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 506d683da138a7b90f5e338d522012f00d3145e9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 28 11:46:21 2016 +0000

    tests: Add gem_exec_reloc
    
    The first steps towards basic relocation handling. In today's edition,
    we ask how well does the kernel fare if we pass it relocations via
    mmappings of our buffer objects.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d18d1eca811fff9871bb619558aee48568fc1b4d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 27 20:22:13 2016 +0000

    igt/gem_reset_stats: Convert residual calllers of gem_exec() to gem_execbuf()
    
    Missed from e3b68bb66683ad4cb4c80df904a3a21c98a2b6c2 due to rebasing
    fun.
    
    gem_reset_stats.c: In function 'inject_hang_ring':
    gem_reset_stats.c:227:19: error: implicit declaration of function 'gem_exec' [-Werror=implicit-function-declaration]
    gem_reset_stats.c:227:2: warning: nested extern declaration of 'gem_exec' [-Wnested-externs]
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a1b47ef6ae6b92be4de0cf87f1ad2ee84029f8b7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 27 19:44:16 2016 +0000

    igt/gem_concurrent_blit: Disable libdrm buffer cache for child inheritance
    
    It just ends up with buffer leaks all over. On the flip side, it does
    allow us to inherit the bufmgr directly without worry of stomping over
    the aliased entries (and causing double closes).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 37f4da0d981f7990e9183be2eab2197d092fb701
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 27 13:02:35 2016 +0000

    igt/gem_concurrent_all: Pass buffer data down
    
    In order reduce the number of parameters being passed everywhere, whilst
    simultaneously making more information available to the lower levels,
    pass the struct buffers around.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5dea5deffc31e833a7cff1f70d29e49a5152fd3e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 27 18:22:28 2016 +0000

    igt/gem_cs_prefetch: Check each ring
    
    Since each engine has its own ring, each is subject to CS prefetching
    and has its own layout that needs probing.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit de70769cc0a24d4d594aaa4c1f99b4a3fc8f05fe
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 27 16:28:35 2016 +0000

    Add I915_EXEC_DEFAULT to list of known engines
    
    I dropped this from the list of rings for some tests when refactoring to
    a common array. Almost all of the tests should be run over the default
    exec engine to ensure ABI backwards compatiblity.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d1308990842fec5f523c129951a5c649d817be81
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 27 14:17:53 2016 +0000

    igt/gem_sync: Use common array of rings
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit dd6b45235b5f1eea9b37e686460fdf1a1c56f431
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 27 14:17:53 2016 +0000

    igt/gem_ringfill: Use common array of rings
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8cd52893346c647e475e801c5f5267f2f2b75ebe
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 27 14:17:53 2016 +0000

    igt/gem_cs_tlb: Use common array of rings
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7e0853c9c717f8e1ce6ed7f0d2fa6bd973bd0f6a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 27 14:17:53 2016 +0000

    igt/gem_exec_nop: Use common array of rings
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b09ef449af3ad8dcb0af19c48d716104ce18d76e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 27 14:17:53 2016 +0000

    igt/gem_storedw_loop: Use common array of rings
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 01acd70762a17df2f889d4b6a4161c3540a8ce00
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 27 13:08:35 2016 +0000

    igt: Add gem_exec_basic
    
    Extremely basic check that we can dispatch an execbuf on every ring.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 04f5215f00962f746c5bd1aa7bdbcaf62280f235
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 27 14:07:27 2016 +0000

    Extract array of execution engines
    
    A few tests wish to execute on every engine, so centralise the array of
    known engines.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b7f150b606bc27199a007dab8d248d9510967173
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 27 14:30:24 2016 +0000

    lib: Query the kernel for support of a particular exec id
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e3b68bb66683ad4cb4c80df904a3a21c98a2b6c2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jan 23 09:44:19 2016 +0000

    lib: Share common __gem_execbuf()
    
    An oft-repeated function to check EXECBUFFER2 for a particular fail
    condition.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 711398e82af469394559105a4f4c6dc21f582ffe
Author: Gabriel Feceoru <gabriel.feceoru@intel.com>
Date:   Tue Jan 26 19:40:58 2016 +0200

    igt/gem_ringfill: Allow listing subtests in gem_ringfill
    
    Moved gem_quiescent_gpu() call to the run path.
    
    Signed-off-by: Gabriel Feceoru <gabriel.feceoru@intel.com>
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 336235c0a8554ccd3d276718ba5bacf811da3e49
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Wed Jan 27 13:30:52 2016 +0100

    gem_ringfill: fix typo in test name
    
    Missing a r!
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 5f6ebb2cb7c4ddd30e6efbcb896996d00d0016ca
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 27 11:30:43 2016 +0000

    igt/gem_concurrent_blit: Tighter scoping of buffers variable
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a64f31b31e7dcaa5c75792ecb0956c7abcaef3dd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 27 11:19:26 2016 +0000

    igt/gem_concurrent_blit: Close userptr handle after importing into bufmgr
    
    The bufmgr import creates a new handle from a name for the userptr - we
    can discard our original handle immediately.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6f75990af0e8867ddbb10efaddb3f14333766a3f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 27 11:17:03 2016 +0000

    igt/gem_concurrent_blit: Tidy blt-fill using gem wrappers
    
    Replace the open-coded ioctls with the thin gem wrappers.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3598fff994a0446376c1a2689921730a55f0d2aa
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Tue Jan 26 13:04:42 2016 +0000

    tests/Android.mk: Make intel_residency CAIRO dependant
    
    intel_residency has a cairo dependency through igt_fb.c. Remove it
    if ANDROID_HAS_CAIRO is not defined.
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit e28acefc5c22b41e3f141ca959c8f96cd16feb47
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Thu Jan 14 14:03:53 2016 -0800

    lib/igt_kms, tests/testdisplay: allow probing of new connector modes
    
    Fixup some fallout from the connector probing changes so testdisplay -m
    will pick up newly hotplugged displays correctly.
    
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org.

commit e2c9a023f2f76db04b94dae64e14ad37e0210b46
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jan 26 09:03:46 2016 +0000

    igt/gem_exec_alignment: Reduce GTT usage if !full-ppgtt
    
    If we have to share the GTT with others, we cannot rely on being able to
    fill it and have to factor in some slack for others.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 49b13378812df0b53a77df733e24b4a29ca8650e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jan 26 08:54:46 2016 +0000

    igt/gem_exec_alignment: Actually check aligned locations after many
    
    As well as ensuring the kernel doesn't simply crash when asked to do
    lots of objects, check it actually aligns them.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ea3331d1201fa04904d87698055b84fa29f23869
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Jan 25 19:51:21 2016 +0000

    igt: Disable igt_clflush_range() implementation on ARM builds
    
    Daniel has suggested that I put vc4 testing into igt, since it's got
    the piglit integration and KMS coverage already.  This gets the ccore
    building so that I can start writing tests.
    
    Signed-off-by: Eric Anholt <eric@anholt.net>
    Reviewed-by: Daniel Stone <daniels@collabora.com>

commit bccc0ec6a3fdae880e14770c2ff5770fb86ea6fc
Author: Daniel Stone <daniels@collabora.com>
Date:   Mon Jan 25 18:33:12 2016 +0000

    build: Disable x86-specific utilities on non-x86
    
    Some bits can't be built on non-x86 architectures, mostly because they
    require x86-specific assembly primitives. Disable these by default on
    non-x86 architectures.
    
    Signed-off-by: Daniel Stone <daniels@collabora.com>
    Reviewed-by: Eric Anholt <eric@anholt.net>

commit e6ca4bd7cd911c2a422fd6961970fc5df2b071a0
Author: Michał Winiarski <michal.winiarski@intel.com>
Date:   Mon Jan 25 19:35:02 2016 +0100

    lib/ioctl_wrappers: Add gem_has_softpin
    
    We can move it from softpin test into lib, and since softpin support is
    highly unlikely to go away in-between getparam ioctl calls, let's just
    do a single call and store the value.
    
    v2: rebase
    
    Signed-off-by: Michał Winiarski <michal.winiarski@intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 52b5d5016edfac14ca99c01fc7c2800eccbe11c0
Author: Michał Winiarski <michal.winiarski@intel.com>
Date:   Mon Jan 25 19:35:01 2016 +0100

    lib/ioctl_wrappers: Add gem_gtt_type exposing raw HAS_ALIASING_PPGTT param
    
    No functional changes.
    While I'm here, let's also rename gem_uses_aliasing_ppgtt (since it's
    being used to indicate if we are using ANY kind of ppgtt) and introduce
    gem_uses_full_ppgtt to drop some unnecessary code from tests that were
    previously calling getparam directly instead of using ioctl wrapper.
    
    v2: drop gem_uses_full_48b_ppgtt since it's no longer used anywhere,
        s/48b/64b (Chris)
    v3: rebase
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Michał Winiarski <michal.winiarski@intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0e2071411a4d4e1488a821daf522dffde2809e03
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jan 25 13:51:00 2016 +0000

    Promote eviction memory sizes and buffer counts to uint64_t
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=93849
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit beb936f1888d3dcd18907097dfac09ef639036ab
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Nov 27 08:38:39 2015 -0200

    tools: add intel_residency
    
    After the recent discussions regarding the effects of the vblank
    disabling policies on PC state residencies, I started running some
    experiments to reevaluate some non-intuitive conclusions I had
    reached. In order to help me do this, I decided to write this tool.
    
    The idea is very simple: the tool puts the system on an screen-on idle
    state, checks which PC state residency is the deepest we can reach,
    measures its residency, then does some not-so-idle tests and measures
    the residencies. You can use the tool to compare different Kernel
    trees and you can also use the tool to compare enabled vs disabled
    features.
    
    It's obvious that these cases do not represent real-world use cases of
    our driver, but they are already enough to highlight differences
    between the many patches I wrote. I was even able to catch a bug in
    one of my patches by spotting an unexpected regression in the
    residencies.
    
    I've been using this tool for FBC, but I expect it to also be useful
    for PSR, DRRS and similar features. I've been measuring the effects of
    different optimizations I wrote, and I've also been measuring the FBC
    vs no-FBC cases.
    
    It is also important to highlight that if your system is not properly
    configured for efficient power savings the tool may not be able to
    show differences between the results. On my Broadwell machine, for
    example, if I don't run "powertop --auto-tune" before running the
    tool, I get PC2 as the deepest state, and 90%+ residency for every
    workload. After properly configuring the machine, I get PC7 as the
    deepest state, which is the expected.
    
    So far I only tested this tool on BDW and SKL, and it may hit some
    unexpected assertions for older platforms.
    
    I only implemented the cases that are immediately useful for me, but
    we may also expand the tool in the future. We can add more important
    workloads. We can add support for screen-off cases, so we can compare
    the effects of runtime PM and other screen-off features. There's a lot
    we can do, but none of this is on my current priority list.
    
    And remember: /usr/bin/paste is your friend when comparing results.
    
    v2:
      - Be more idle at setup_idle().
      - Improve printing for /usr/bin/paste usage.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 9bf4e19125597ed11a23027270f5ecb3099b5ea9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jan 24 15:34:08 2016 +0000

    igt/gem_softpin: Keep last_handle around to vary hole generation
    
    If we don't close the handle from the last pass, we don't free up the
    previous pass's vma immediately, changing the hole allocation.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c5b0293ca301ea643529d92b7e47f916ec59a762
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jan 23 18:10:46 2016 +0000

    igt/gem_softpin: Exercise snoop+uncached abutting
    
    snooped objects are not allowed to abutt uncached objects on older gen
    (!llc and global GTT) or else the GPU may hang if it prefetches across a
    page boundary into a different memory type (i.e. CS reading from snoop).
    The kernel should be checking the alignment rules as normal.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d4a05bc009e0634e06df7fb65d3fe4c5a10e3319
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jan 23 09:07:12 2016 +0000

    igt/gem_concurrent_blit: Switch to a shared mmap for userptr
    
    If we use a MAP_SHARED mmaping for the our backing storage for userptr,
    then it will be inherited across the fork with the same address. ideal
    for continuity testing of children.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 69ecedea735425cfb9a5d7dfcaa5840393553fd1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 22 22:14:33 2016 +0000

    igt/gem_concurrent_blit: Allocate a private batch cache for the child
    
    We have to avoid the COW alias for the intel_bufmgr and intel_batch
    cache as the child may close the object (in its local cache) leaving an
    alias in the parent cache pointing to a stale object.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3eae640b817fc506aafafb417e432b521517ed1a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 22 19:52:51 2016 +0000

    igt/gem_concurrent_blit: Disable userptr+child tests
    
    The issue here is that the pointer inherited upon the child is
    copied-on-write, i.e. the pointer is private to each process, but the
    handle is shared. This means that writes and reads in the child are
    going to a different set of pages than the GPU's object - the test is
    simply broken. To overcome this we would need to mmap the shared buffer
    into the child.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4645630d3e7d1dcc8050e5f7da42318747002944
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 22 19:29:07 2016 +0000

    igt/gem_concurrent_blit: Check inheritance of buffers
    
    The current forked modes recreate their handles in the children and just
    look at any complications arising from contention. This mode looks at
    inheriting the fd+handles from the parent into the child and seeing if
    we can use them within the child.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 512f846f377ee97c90467ccd121519586263993f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 22 19:26:50 2016 +0000

    igt/gem_ringfill: Mark the write object as EXEC_OBJECT_WRITE
    
    After setting the flag for NORELOC (to avoid having to pay the cost of
    validating the relocations on every pass), we need to make sure that
    we set EXEC_OBJECT_WRITE so that we do track the outstanding writes.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 291ff6bcf1678192c1cc59728e1f69797962372a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 22 19:01:02 2016 +0000

    igt/gem_ringfill: Disable MI_STORE_DATA_IMM on BSD/gen6
    
    It's broken, avoid at all costs.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0091e6787cf4da668068f82d58f7169516acbc1f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 22 18:02:50 2016 +0000

    igt/gem_userptr_blits: Exercise applying relocations to a userptr bo
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5b675f7b2f6487548a91c01eb9a7e36e808617b4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 22 17:33:40 2016 +0000

    lib: Refactor common detection of missed interrupts
    
    As we have the same function in a few places to read the
    debugfs/i915_ring_missed_irq file, move it to the core.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e0ee36141ed1747f68580559a7cbfbeba902f05c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 22 17:28:54 2016 +0000

    igt/gem_softpin: Fix MI_STORE_DATA_IMM for gen3
    
    We need both a secure batch and to flag it to use the virtual GTT
    address.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit fbb0f636bd8ac898145b52961f5f7996f01ddc08
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 22 17:25:08 2016 +0000

    igt: Fix use MI_STORE_DATA_IMM on gen3
    
    For the older gen, MI_STORE_DATA_IMM is a privileged command so we need
    to set the "secure" batch flag, and we also need to instruct the command
    to use the GTT virtual address.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4a3a8263427db6e1d2779a092ab6fc035e8aca3f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 13 14:02:50 2016 +0000

    lib: Print memory requirements as MiB
    
    Since we need a lot of memory, trim off the less significant digits for
    easier human consumption.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e180bec7bc16e727cea2f99aeff10b642f7778be
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 22 15:00:11 2016 +0000

    igt/gem_ringfill: Reduce ringfill to just filling the rings
    
    The objective of this test is to check how the driver handles a full
    ring. To that end we need only submit enough work to fill the ring by
    submitting work faster than the GPU can execute it. If we are more
    careful in our batch construction, we can feed them much faster and
    achieve the same results much quicker.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c4bcffcd109bfee6b70a60f2309d9acd881f7aec
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 22 15:27:24 2016 +0000

    igt/gem_exec_alignment: Tweaks count for large alignments
    
    We can fit a few more objects in at high alignment, so do so.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit bd9842eadead0dc17f176f2c7124ab365264c945
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 22 00:26:56 2016 +0000

    igt/gem_cs_tlb: Use softpin to remove GTT layout assumptions
    
    With softpin we can explicitly manage the layout of the objects to be
    executed, deliberately forcing the reuse of active pages in an attempt
    to spot misbehaviour in the CS TLBs. Being explicit allows us to
    eliminate a lot of the CPU overhead between execbuf, hopefully
    increasing the likelihood of a conflict.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0143d4f3379b60650e4951f167822fcc76bb24d9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 21 09:53:50 2016 +0000

    igt/gem_concurrent_blit: Add userptr backing storage tests
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a4493a54f348e547027eff3cb1607805f39f955d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 21 09:19:02 2016 +0000

    igt/gem_softpin: Fix MI_STORE_DWORD_IMM for gen2-3
    
    Before gen4, MI_STORE_DWORD was just 3 dwords long (cmd, offset, value).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 19642c604bb0c987e6e0069974042a98d128b9fc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 11 13:27:49 2015 +0000

    lib: Expand igt_hang_ring() to select target context and various options
    
    Some potential callers want to inject a hang into a particular context,
    some want to trigger an actual ban and others may or may not want to
    capture the associated error state. Expand the hang injection interface
    to suit all.
    
    v2: Disable the new kernel API, but push to provide a missing piece of
    infrastucture to unbreak compilation.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 92caf138f2d878429f91397120e215dcb524efac
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Dec 16 09:23:56 2015 +0000

    tests: Drop the superfluous igt_require_hang_ring()
    
    As the hang injection now itself checks for validity before use, the
    tests don't need to do so themselves. Except in certain situations! If
    the test forks, it should do requirement checks before the fork (so that
    we don't anger the igt gods) and if the test plays around i915.reset
    then it needs to do an early igt_require_hang_ring() that is not
    affected by the changes to i915.reset.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a2eb63720b939d58a39cc7e5ef5ad2204fec260a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 11 21:24:21 2015 +0000

    lib: Always double check igt_require_hang_ring() on use
    
    If we move the igt_require() into the hang injector, this makes simple
    test cases even more convenient. More complex test cases can always do
    their own precursory check before settting up the test.
    
    However, this does embed the assumption that the first context we are
    called from is safe (i.e no i915.enable_hangcheck/i915.reset
    interferrence).
    
    v2: A couple of environment variables to skip hang testing or to force
    hang injection even if the GPU cannot be reset.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 47b61378426002c0f71644c65c73477265a5751d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 8 10:40:33 2016 +0000

    igt/gem_partial_pwrite_pread: Fix range computation
    
    The range we chose to overwrite in the target had an off-by-one error
    that could cause it to compute a size that went past the end of the
    buffer (and so trigger EINVAL). Fortuituously with our seed this did not
    occur. Whilst changing the range calculation, update the error logging
    to include the range information.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6bada3e2d494e0823a31773e916c62bd36facbe7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 13 16:47:21 2016 +0000

    igt/gem_softpin: Remove false dependencies on esoteric features
    
    For softpinning, we do not require either userptr or extended ppgtt, so
    remove those requirements and make the tests work universally. (Certain
    ABI tests require large GTT, or per-process GTT.)
    
    In the process, make the tests more extensive - validate overlapping
    handling more careful, explicitly test no-relocation support, validate
    more ABI handling. And for fun, cause a kernel GPF.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ad9b78f443be71c093d56e513f58442f46da496b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jan 19 23:59:33 2016 +0000

    igt/gem_exec_alignment: Convert to subtests
    
    Allow both parts (single, many) to be run independently.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 28c33c6f90016f494d387ff8e886632ad3b5dfc6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jan 19 21:11:28 2016 +0000

    igt/gem_exec_alignment: Fix off-by-one in evalation of find_last_bit()
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6cf9d911ab0887f481f25351ab480d44cf044e07
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jan 19 21:02:40 2016 +0000

    igt/gem_exec_alignment: Remember to require 48b objects!
    
    In order to actually use the high space we need to set the can-use-48bit
    flag.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 167fb9e7b2d77c6b672384f880988b386129d964
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jan 19 16:52:32 2016 +0000

    igt/gem_exec_alignment: Test multiple objects with alignment as well
    
    Compute the largest alignment for the most number of objects we can create,
    then trying an execbuf with them.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e7bdc5c91692fba3f74aea4dc6ec662c98d1fec3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jan 19 13:44:09 2016 +0000

    igt/gem_exec_alignment: Test all possible pot alignments
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit de45ceb6678724d2c6a5ce4b0b614071e72b4f32
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jan 16 00:35:20 2016 +0000

    igt/gem_ring_sync_loop: Be explicit!
    
    The test just aims to execute batches on alternating rings with a write
    target such that every batch must be executed after the previous
    completes. This stresses the inter-ring synchronisation, which is
    interrupt driven if the gpu does not support semaphores, and so is a
    good stress tests for detecting "missed interrupt syndrome". Make that
    detection explicit.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a8f0963af5c217210f333790385a3d753794f6ad
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 13 15:06:41 2016 +0000

    igt/gem_storedw_loop: Add a few more iterations
    
    Whilst still keeping the runtime down, extend the pipeline slightly.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e2b9dfd0aa4295ecbd8d7c8ab3f58fa43514cf61
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 13 14:57:47 2016 +0000

    igt/gem_storedw_loop: Remove libdrm crutches
    
    Make the behaviour of the test more explicit wrt to the handle management,
    mmap and domain handling.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 38790b77d562a3b1cf31996aff160081d276796f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jan 11 14:12:54 2016 +0000

    igt/gem_cs_prefetch: Replace explicit sync with implicit sync
    
    We can trade off the explicit sync (presumably to avoid some resource
    starvation issue?) with the implicit sync of having to perform a
    relocation. Using an implicit sync helps stress core kernel code,
    besides being much faster!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a6090c71918ae4c0a54eda133081dbd1e6fe8018
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 8 16:32:29 2016 +0000

    igt/gem_mmap_wc: Test cpu mmap vs wc mmap coherency
    
    Similar to the cpu mmap vs gtt mmap coherency test.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 571b876544933c4c6cab16065b1ade76246a7f55
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 8 11:51:56 2016 +0000

    gem_concurrent_all: Add a "quick" tiny pass
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1c61c0f75097983d1a19e03e2c6dfd631307d1ef
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 8 10:51:09 2016 +0000

    gem_concurrent_blit: Add a pread/pwrite variant to only set part of the buffer
    
    The idea is to check partial cacheline reads/writes.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 42291f25100cd01653b3fb3a2a1fbe6975e9c1bf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 7 11:19:26 2016 +0000

    gem_concurrent_blit: Don't call igt_require() outside of a subtest/fixture
    
    gem_concurrent_blit tries to ensure that it doesn't try and run a test
    that would grind the system to a halt, i.e. unexpectedly cause swap
    thrashing. It currently calls intel_require_memory(), but outside of
    the subtest (as the tests use fork, it cannot do requirement testing
    within the test children) - but intel_require_memory() calls
    igt_require() and triggers and abort. Wrapping that initial require
    within an igt_fixture() stops the abort(), but also prevents any further
    testing.
    
    This patch restructures the requirement checking to ordinary conditions,
    which though allowing the test to run, also prevents listing of subtests
    on machines which cannot handle them.

commit 51e965f299284b3c9b96ac5e384ddeb22bd8d1fd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jan 17 16:21:01 2016 +0000

    tests: Add basic gem_sync test
    
    A very basic test of functionality, execute a nop and wait for it to
    complete. It should be very effective at stimulating the "missed
    interrupt syndrome" on all devices.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 136d6c796141b9b9fc9c96fe57dc2352c5224548
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jan 16 17:49:46 2016 +0000

    igt/gem_streaming_writes: Set the initial CPU write domain
    
    Remove one assumption from the test and amek the domain management
    explict - when we write through the CPU to construction the batch, mark
    it as having been written.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 59adb00129acd1f9aff76edd19f7774876149d4f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 15 13:34:39 2016 +0000

    tests: Add gem_busy
    
    Exercise the busy-ioctl and verify it reports the right active engines
    using the execbuffer notation.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 825482a25c3efd82ad4630169d62248b06be4bc0
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Mon Jan 11 13:32:04 2016 +0000

    tools/Android.mk: Add zlib support
    
    IGT does not build for Android due to a zlib dependency being added
    to intel_error_decode.c in a recent patch.
    This patch fixes the error by updating the Android makefile to add
    the path to the zlib library and using any LDFLAGS specified in
    Makefile.sources.
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit fe7a42bff6c09cda864021d291a842ffd563e30e
Author: Mika Kahola <mika.kahola@intel.com>
Date:   Fri Jan 15 10:24:55 2016 +0200

    tools/intel_bios_reader: Fix typo on dump info
    
    Fix typo on intel_bios_reader.c
    
    Signed-off-by: Mika Kahola <mika.kahola@intel.com>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 480479d7dce38715ca82741fce047a9eca06e8cc
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Thu Jan 14 17:43:06 2016 +0200

    intel_bios_reader: dump MIPI sequence block v3
    
    Similar to what's done in kernel. It's a bit artificial that the parsing
    and dumping are two separate steps in the userspace tool, but it's
    easier to follow and debug the code when both the kernel and userspace
    are similar.
    
    v2: don't segfault so much on dumping null pointers
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 70dc8c85f1ba543b6f6ef16c49718b68d7dafba8
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Thu Jan 14 16:41:53 2016 +0200

    intel_bios_reader: port the sequence block parsing from kernel
    
    Reuse the same code as kernel. Also parses v3, although does not
    actually dump that stuff yet.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 7d1a37282b39026fe55fd9aee637d914b237a4f7
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Thu Jan 14 16:24:11 2016 +0200

    intel_bios_reader: port find_panel_sequence_block from kernel
    
    No need to reinvent wheels, reuse the code from kernel.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit b26393489ef8cba34773d3132c33c18b08d835bd
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Thu Jan 14 16:08:55 2016 +0200

    intel_bios_reader: make the VBT pointers more const
    
    In const we trust.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit d9588c891d0dd252230b363c02ca962eed1d2303
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Thu Jan 14 15:48:13 2016 +0200

    intel_bios_reader: fix size handling for 32-bit block size
    
    The MIPI DSI sequence block v3+ has a separate block size field.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 2e2fffa7a5e0debb1ea2cc70b46c4818b48b0d53
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Thu Jan 14 15:27:50 2016 +0200

    intel_bios_reader: pass bdb pointer around instead of having as global
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 065d73619f33c3ac92c80d06b7a48992406940cf
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Jan 8 20:37:51 2016 +0200

    tests/kms_chv_cursor_fail: Skip when the pipe doesn't exist
    
    Looks like I fumbled things when I made kms_chv_cursor_fail iterate
    over all pipes. It fails to check that the pipe actually exists, and
    so fails on < 3 pipe platforms. Add the necessary checks to skip
    on non-existing pipes.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit cd658a7c6bca74eb897a8ae87751029793f0c4f4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 7 09:04:03 2016 +0000

    core/sighelper: Interrupt everyone in the process group
    
    Some stress tests create both the signal helper and a lot of competing
    processes. In these tests, the parent is just waiting upon the children,
    and the intention is not to keep waking up the waiting parent, but to
    keep interrupting the children (as we hope to trigger races in our
    kernel code). kill(-pid) sends the signal to all members of the process
    group, not just the target pid.
    
    We also switch from using SIGUSR1 to SIGCONT to paper over a race
    condition when forking children that saw the default signal action being
    run (and thus killing the child).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 05ac611358e61f914d99e00e1738f2ff9cfb05d4
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Fri Jan 8 07:40:45 2016 -0800

    kms_psr_sink_crc: Simplify debugfs reading.
    
    Let's start using igt_debugfs_read helper so we
    can change the debugfs interface at anytime.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit f1bb20eb7c4fa5f8b98bfd9876adc69c250e9bea
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Dec 14 00:54:33 2015 +0200

    tests/kms_flip: Increase TEST_TS_CONT max seq difference to 150
    
    During suspend tests we can exceed the current 100 frame difference
    in sequence numbers. Bump the limit to 150 frames.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 39aecb05d5c608cb7916fe376341de1828945167
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Dec 14 00:55:11 2015 +0200

    tests/kms_pipe_crc_basic: Use igt_assert_eq() to see the failing frame counts
    
    Use igt_assert_eq() to compare the frame numbers during the frame
    sequence tests so that we'll see exactly what the bad frame counts
    are when the test fails.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 7ff8223d44b875e0eec02f32b9fce8baeca689a3
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Sun Dec 13 06:58:40 2015 +0200

    tests/gem_mmap_gtt: Make the small-bo tiling tests work on old platforms
    
    Several factors conspire against us when trying to execute
    the tiled small-bo tests:
    - pre-gen4 require power of two fences, with natural alignment
    - the entire gtt may be mappable
    - we put a guard page at the end of gtt
    
    What all that means is that when we try to use a tiled object half
    the size of the mappable area, we can only fit it in the first half
    of the gtt. That leads to a SIGBUS when we try to fault in the
    object when there's already something (eg. fbdev) occupying the
    first half of gtt.
    
    So in order to make the tests run on old machines, let's further
    halve the object size when things look too tight.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 21022f076d4047348f377a1938079c046de13f42
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Sun Dec 13 06:54:06 2015 +0200

    tests/gem_mmap_gtt: Add progress indicators
    
    Some of the copy tests take a while, so let the user know how
    far along we are via a progress indicator.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 86382de3fb17582470b32bd955ad31be201b7304
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Sun Dec 13 06:53:28 2015 +0200

    tests/gem_mmap_gtt: Deal with tile sizes on gen2/3
    
    Gen2/3 platforms have some unusual tile dimensions. Account
    for them to make the test work correctly.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 1ecd91a8c6575c663492eee81cd48c8d1cb36914
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Sun Dec 13 00:04:43 2015 +0200

    Fix a bunch of printf types
    
    igt_kms.c: In function ‘igt_crtc_set_background’:
    igt_kms.c:1940:2: warning: format ‘%lu’ expects argument of type ‘long unsigned int’, but argument 5 has type ‘uint64_t’ [-Wformat=]
      LOG(display, "%s.%d: crtc_set_background(%lu)\n",
      ^
    intel_firmware_decode.c: In function ‘csr_open’:
    intel_firmware_decode.c:169:2: warning: format ‘%zd’ expects argument of type ‘signed size_t’, but argument 3 has type ‘__off_t’ [-Wformat=]
      printf("Firmware: %s (%zd bytes)\n", filename, st.st_size);
      ^
    intel_gpu_top.c: In function ‘main’:
    intel_gpu_top.c:683:10: warning: format ‘%lu’ expects argument of type ‘long unsigned int’, but argument 3 has type ‘uint64_t’ [-Wformat=]
              stats[i] - last_stats[i]);
              ^
    hsw_compute_wrpll.c: In function ‘main’:
    hsw_compute_wrpll.c:644:3: warning: format ‘%li’ expects argument of type ‘long int’, but argument 7 has type ‘long long int’ [-Wformat=]
       igt_fail_on_f(ref->r2 != r2 || ref->n2 != n2 || ref->p != p,
       ^
    gem_gtt_hog.c: In function ‘__real_main155’:
    gem_gtt_hog.c:177:2: warning: format ‘%lu’ expects argument of type ‘long unsigned int’, but argument 4 has type ‘unsigned int’ [-Wformat=]
      igt_info("Time to execute %lu children:  %7.3fms\n",
      ^
    kms_flip.c: In function ‘run_test_step’:
    kms_flip.c:985:3: warning: format ‘%u’ expects argument of type ‘unsigned int’, but argument 10 has type ‘__time_t’ [-Wformat=]
       igt_assert_f(end - start > 0.9 * frame_time(o) &&
       ^
    kms_flip.c:985:3: warning: format ‘%u’ expects argument of type ‘unsigned int’, but argument 11 has type ‘__suseconds_t’ [-Wformat=]
    kms_frontbuffer_tracking.c: In function ‘setup_sink_crc’:
    kms_frontbuffer_tracking.c:1364:3: warning: format ‘%ld’ expects argument of type ‘long int’, but argument 4 has type ‘ssize_t’ [-Wformat=]
       igt_info("Unexpected sink CRC error, rc=:%ld errno:%d %s\n",
       ^
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit a7882a31cb9f516b6068a81221c0fdaf7e9d4073
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Dec 18 14:21:27 2015 +0200

    tests/kms_chv_cursor_fail: Add a test to exercise CHV pipe C cursor fail
    
    The test tries to anger CHV pipe C cursor by walking the edges of the
    screen while moving the cursor across the screen edge.
    
    The actual hw issue only occurs on pipe C, and only on the left screen
    edge. The testcase can walk all the edges though, and on all pipes, just
    so I could make sure the failure doesn't occur there.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit a7a2c76a806e7aa93c7e8c998465a8cb63dbaa37
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Dec 18 16:10:34 2015 +0200

    tests/kms_pipe_crc_basic: Add tests for O_NONBLOCK CRC reads
    
    v2: Rebased due to __attribute__((warn_unused_result))
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 909074503012a11fc631118cd3180b4a1c27646e
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Dec 18 14:35:05 2015 +0200

    lib: Add igt_pipe_crc_new_nonblock()
    
    Add support for reading the CRC in non-blocking mode. Useful for tests
    that want to start the CRC capture, then do a bunch of operations, then
    collect however many CRCs that got generated. The current
    igt_pipe_crc_new() + igt_pipe_crc_get_crcs() method would block until
    it gets the requested number of CRCs, whreas in non-blocking mode we
    can just read as many as got generated thus far.
    
    v2: __attribute__((warn_unused_result)), document the
        new igt_pipe_crc_get_crcs() return value (Daniel)
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 5b113d323dde18ef3bbae2f57d613be4ab7eb267
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Dec 17 01:39:31 2015 +0200

    lib: Extract some common fb create+fill methods into helpers
    
    Several tests do one or more of the following:
    * igt_create_fb() + igt_paint_test_pattern()
    * igt_create_color_fb() + igt_paint_test_pattern()
    * igt_create_fb() + igt_paint_image()
    
    Extract them into new helpers: igt_create_pattern_fb(),
    igt_create_color_pattern_fb(), igt_create_image_fb().
    
    v2: Fix typos, and improve API docs (Thomas)
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 7cb35109645e6495f67981b9930587c1ddfe4f90
Author: Michel Thierry <michel.thierry@intel.com>
Date:   Wed Jan 6 15:00:39 2016 +0000

    tests/gem_softpin: Use offset addresses in canonical form
    
    i915 validates that requested offset is in canonical form, so tests need
    to convert the offsets as required.
    
    Also add test to verify non-canonical 48-bit address will be rejected.
    
    v2: Use sign_extend64 for converting to canonical form (Tvrtko)
    
    Cc: Vinay Belgaumkar <vinay.belgaumkar@intel.com>
    Cc: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
    Reviewed-by: Vinay Belgaumkar <vinay.belgaumkar@intel.com>
    Signed-off-by: Michel Thierry <michel.thierry@intel.com>

commit fca862cdd3a1152a64f062caff4475478e2bd50a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 7 10:54:30 2016 +0000

    igt/gem_mmap_gtt: Add a test to exercise coherency between GTT/CPU
    
    This checks whether a write through the GTT is immediately visible to
    the CPU.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8528b484e8cf9d8e9c627f99e283285726967f74
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Wed Dec 23 15:34:48 2015 +0000

    igt_core: Fix logging to display extended line
    
    line[strlen(line)] will always evaluate to NULL so line_continuation
    was always true. That prevented the program name, pid and log level
    ever being printed.
    Changed to [strlen(line) - 1] so the last character before the null
    terminator is compared with '\n' to determine line_continuation.
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 51bb53663e2d0c57e9e40c1961d67ddc1e086be5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 6 10:19:03 2016 +0000

    benchmarks/gem_latency: Allow setting an infinite time
    
    Well, 24000 years.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3c1362f0a6a930f874b7533cb0a03ba9177278b4
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Tue Jan 5 15:19:13 2016 +0100

    tests: Bump pageflip wait timeout to 50 ms.
    
    The default is too low for panels that are 30 fps or lower.
    Bump the timeout to 50 ms to prevent spurious errors on those
    displays.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 1d6e5d3197eebf682e218a34c56139f2df4ea090
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jan 3 13:44:17 2016 +0000

    igt/gem_concurrent_all: Preparatory work for testing different create flags
    
    In order to do concurrency checks using different allocation functions,
    we need to hook those functions up to gem_concurrent_all. So let's add
    another layer of combinations! The actual enabling for create2-ioctl
    will come in the future.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e21368c53a23ccf62dc6651bda9591c1dbbb39c4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jan 2 16:07:34 2016 +0000

    benchmarks/gem_mmap: Convert to run over a fixed period
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9b902344149f87a7abce4b0b08792db2cd4d424d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jan 2 15:19:27 2016 +0000

    benchmarks/gem_exec_nop: Convert to running for a fixed time
    
    Like the previous patch to gem_exec_ctx, retrict gem_exec_nop to running
    for a fixed length of time, rather than over a range of different
    execution counts. In order to retain some measurement of that range,
    allow measuring individual execution versus continuous dispatch.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6953899beb5ef7311429ebf77faca02b564de473
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jan 2 12:10:14 2016 +0000

    benchmarks/gem_exec_ctx: Run for a fixed time
    
    Rather than investigate the curve for dispatch latency, just run for a
    fixed time and report an average latency. Instead offer two modes,
    average single dispatch latency, average continuous dispatch latency.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 276fb3d3f4bc0214454fe172106efce71c7b0ff0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 1 13:29:23 2016 +0000

    benchmarks/gem_exec_ctx: Fix fd switching between default contexts
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit bb35716d25999260c2cc491ed832a9a39f204dcb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 31 21:34:27 2015 +0000

    intel_error_decode: Update address parsing for 64bit offsets
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8f9df28a82f49681cc9bcfa70dd7369af56b3f70
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Nov 5 11:24:49 2014 +0000

    intel_error_decode: Fix decode headers for HW context
    
    As we didn't recognise the different buffer type, we confused it with
    whatever we last decoded (i.e. the render ring buffer).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d4c3cd4d04ab7f317d3429708d19cd5fc4d0f5fa
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 31 11:27:21 2014 +0000

    intel_error_decode: Inflate compressed error state
    
    Recent kernels compress the active objects using zlib + ascii85
    encoding. This adapts the tool to decompress those inplace.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3d5b50b4f0784faf565a781e1ab151ac4e5370f8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Dec 29 13:51:08 2015 +0000

    benchmarks/gem_blt: Estimate memory bandwidth to improve test runtime
    
    If we autotune the workload to only take 0.1s and then repeat the
    measurements over 2s, we can bound the benchmark runtime. (Roughly of
    course! Sometimes the dispartity between main memory CPU bandwidth, and
    GPU execution bandwidth throws off the runtime, but that's the purpose
    of the benchmark!)
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9764247dc57036e1d1c73b2f69411906504a8288
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Mon Dec 21 16:50:47 2015 +0200

    intel_bios_reader: add dumping of i2c element in mipi sequence
    
    Due to the clever way the whole sequence block is specified without
    forward compatibility, it's not possible to dump most blocks without
    this.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit cb89add9793b04288cb332a0d17dd8d8d6f09680
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Mon Dec 21 16:36:32 2015 +0200

    intel_bios_reader: improve element dumpers
    
    Try to print something useful and helpful for the user.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 9c4aa072f071d4cfe1513a723419f43e43fe3293
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Mon Dec 21 16:18:20 2015 +0200

    intel_bios_reader: rewrite the mipi sequence block dumping
    
    Simplify things a lot, make it correct, don't pass random pointers to
    free() on errors, etc.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 68cfe4ba575064c798ef9857781fa4969319e876
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Mon Dec 21 15:51:10 2015 +0200

    intel_bios_reader: check mipi sequence block version
    
    Bail out on v3+, we don't support that just yet.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit bdf7b1c0eb753268f9059615ec92efee693abb77
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Mon Dec 21 15:22:08 2015 +0200

    intel_opregion_decode: add new ASLE fields
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit fa24ce6b9606fac69234f27550de19f5c07cdcc3
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Dec 21 16:50:16 2015 +0000

    docs: add igt_edid_template.h to IGNORE_HFILES
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 1b9085b9795c588d5503439c8e23ed780e927730
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Dec 21 16:24:45 2015 +0000

    benchmarks/gem_latency: Hide spinlocks for android
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 23aa051369c2b930d35359a5c06fae5290c06291
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Dec 18 19:25:47 2015 +0200

    lib: Use igt_assert_eq() to check for crc component count
    
    It's nice to see just how many components the crc claims to have
    when the count don't match what we expect.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 793aff199f21cdb4136e39f227ced5553eec04dc
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Dec 18 19:25:45 2015 +0200

    lib: Make 'extra_long_opts' const
    
    The extra_long_opts passed to igt_*_parse_opts() isn't modified,
    so let's make it const.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a1d465a3c542d965a56e794590b3f00095a1db62
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Dec 21 12:53:21 2015 +0000

    benchmarks/gem_latency: Serialise mmio reads
    
    The joy of our hardware; don't let two threads attempt to read the same
    register at the same time.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3ebce37b65ddb292161498ac4f6a07e3667c9b03
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Dec 21 09:57:52 2015 +0000

    benchmarks/gem_latency: Guard against inferior pthreads.h
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3cc8f957f1c443f012b292dbb5d81acb59dffb25
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Dec 20 15:18:56 2015 +0000

    benchmarks/gem_latency: Measure CPU usage
    
    Try and gauge the amount of CPU time used for each dispatch/wait cycle.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a91ee853b1a1e733c0d4e291d8fc3008a9ac232f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Dec 20 14:55:42 2015 +0000

    benchmarks/gem_latency: Measure effect of using RealTime priority
    
    Allow the producers to be set with maximum RT priority to verify that
    the waiters are not exhibiting priorty-inversion.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 27e093dd1fe3c49389c302f1f3234a0769fd75dc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Dec 19 17:05:32 2015 +0000

    benchmarks/gem_latency: Use RCS on Sandybridge
    
    Reading BCS_TIMESTAMP just returns 0...
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c0942bf52866d3182cf2e6dcf7c6960098420aeb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Dec 19 16:27:19 2015 +0000

    benchmarks/gem_latency: Rearrange thread cancellation
    
    Try a different pattern to cascade the cancellation from producers to
    their consumers in order to avoid one potential deadlock.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8ea61ec1ff96c4303f6de49def142f134a7243a0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Dec 19 16:14:03 2015 +0000

    benchmarks/gem_latency: Tweak workload
    
    Do the workload before the nop, so that if combining both, there is a
    better chance for the spurious interrupts. Emit just one workload batch
    (use the nops to generate spurious interrupts) and apply the factor to
    the number of copies to make inside the workload - the intention is that
    this gives sufficient time for all producers to run concurrently.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit db011021a1c9c40e4fc3ec7a8c31bfee7b9fb623
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Dec 19 14:51:08 2015 +0000

    benchmarks/gem_latency: Add output field specifier
    
    Just to make it easier to integrate into ezbench.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 646cab4c0c73dce310ff8020ffb96272647780ba
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Dec 19 12:07:26 2015 +0000

    benchmarks/gem_latency: Split the nop/work/latency measurement
    
    Split the distinct phases (generate interrupts, busywork, measure
    latency) into separate batches for finer control.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e37a4c80922aaeb79a419a7d7f96b0ac4c6ffb88
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Dec 19 11:36:37 2015 +0000

    benchmarks/gem_latency: Add time control
    
    Allow the user to choose a time to run for, default 10s
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2ef368acfa5c3863543663f03c3eb26fba93cca6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Dec 19 11:36:37 2015 +0000

    benchmarks/gem_latency: Add nop dispatch latency measurement
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1db5b05243c0d0e84af4fc2845fc320aa5787436
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Dec 19 10:52:12 2015 +0000

    benchmarks/gem_latency: Expose the workload factor
    
    Allow the user to select how many batches each producer submits before
    waiting.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6dbe0a301223f177ef80078c5ffdbf8575a8bae1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Dec 19 10:46:06 2015 +0000

    benchmarks/gem_latency: Measure whole execution throughput
    
    Knowing how long it takes to execute the workload (and how that scales)
    is interesting to put the latency figures into perspective.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2f74892ebd4d23b352e2e089e9b74c950f3864b8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Dec 19 10:31:49 2015 +0000

    benchmarks/gem_latency: Fix for !LLC
    
    Late last night I forgot I had only added the llc CPU mmaping and not
    the !llc GTT mapping for byt/bsw.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 39bad606c5e24dbb144f01e5d889f8a31c294d22
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 18 20:51:57 2015 +0000

    benchmarks: Remove gem_wait
    
    Superseded by gem_latency.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c9da0b5221cfd7dd2f22bbc5bcddf73d31214e2e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 18 14:45:03 2015 +0000

    benchmark: Measure of latency of producers -> consumers, gem_latency
    
    The goal is measure how long it takes for clients waiting on results to
    wakeup after a buffer completes, and in doing so ensure scalibilty of
    the kernel to large number of clients.
    
    We spawn a number of producers. Each producer submits a busyload to the
    system and records in the GPU the BCS timestamp of when the batch
    completes. Then each producer spawns a number of waiters, who wait upon
    the batch completion and measure the current BCS timestamp register and
    compare against the recorded value.
    
    By varying the number of producers and consumers, we can study different
    aspects of the design, in particular how many wakeups the kernel does
    for each interrupt (end of batch). The more wakeups on each batch, the
    longer it takes for any one client to finish.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8bf09f3d12f5a8d984f084f116b195925dca571b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 17 09:16:42 2015 +0000

    tests/gem_concurrent_all: Add a couple more sanitycheck patterns
    
    As always, the goal is to quickly stress a variety of workloads that
    often lead to kernel bugs.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 04bd964527bf1962d3fd94f863161f5828eba767
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Dec 16 19:51:08 2015 +0000

    igt/gem_exec_nop: Restore SLOW_QUICK loop terminator
    
    The upper bound for SLOW_QUICK was added for the benefit of the slow
    simulator, not because, as I wrongly thought, of the latency
    measurements.
    
    SLOW_QUICK was added in
    
    commit d1e862324b747a0ab5d985eaa6830076817231c5
    Author: Damien Lespiau <damien.lespiau@intel.com>
    Date:   Mon Mar 25 20:06:20 2013 +0000
    
        tests: Instrument tests run in simulation to run quickly
    
    and dropped in
    
    commit 89bcdb9022fb7a1f66635b9f2546356ad0c0761a
    Author: Chris Wilson <chris@chris-wilson.co.uk>
    Date:   Tue Dec 8 13:42:50 2015 +0000
    
        igt/gem_exec_nop: Remove nop latency measurements
    
    Reported-by: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a012e44b6a68b12e676a4ef48bebe97206fbeb1c
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Dec 7 15:12:15 2015 +0000

    tests: remove .gitignore and add a Makefile rule to create it
    
    v2: generate the .gitignore file with the default target
    v3: remove the .gitignore file
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 40798efd859e26386d32ec61272c210685b6a204
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Dec 16 13:13:58 2015 +0000

    tests/gem_eio: New ABI - no EIO even from wait_ioctl
    
    So there's 3 competing proposals for what wait_ioctl should do wrt
    -EIO:
    
    - return -EIO when the gpu is wedged. Not terribly useful for
      userspace since it might race with a hang and then there's no
      guarantee that a subsequent execbuf won't end up in an -EIO.
      Terminally wedge really can only be reliably signalled at execbuf
      time, and userspace needs to cope with that (or decide not to
      bother).
    
    - EIO for any obj that suffered from a reset. This means big internal
      reorginazation in the kernel since currently we track reset stats
      per-ctx and not on the obj. That's also what arb robustness wants.
      We could do this, but this feels like new ABI territory with the
      usual userspace requirements and high hurdles.
    
    - No -EIO at all. Consistent with set_domain_ioctl and simplest to
      implement. Which is what this patch does.
    
    We can always opt to change this later on if there's a real need.
    
    To make the test really exercise this do a full wedged gpu hang, to
    make sure -EIO doesn't leak out at all.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3953d2dd22ea1c87aa77e3a9415aaf767d2ec3ed
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Mon Dec 14 09:59:17 2015 +0000

    gem_flink_race/prime_self_import: Improve test reliability
    
    gem_flink_race and prime_self_import have subtests which read the
    number of open gem objects from debugfs to determine if objects have
    leaked during the test. However the test can fail sporadically if
    the number of gem objects changes due to other process activity.
    This patch introduces a change to check the number of gem objects
    several times to filter out any fluctuations.
    
    v2: Moved the common code to a library and made the loop android
    specific (Daniel Vetter)
    v3: Renamed get_stable_obj_count -> igt_get_stable_obj_count
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 5a8d063e42c7b5843a0f069d4c2216f8f4fb81fe
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Thu Dec 10 16:54:40 2015 +0200

    tests/gem_softpin: Fix compiler warning on 32bit systems
    
    We get build error as we try to cast from ptr to integer
    of different size on 32 bit platforms. Use unsigned long
    as the cast, it will work with both 32 and 64 bit
    systems.
    
    Cc: Vinay Belgaumkar <vinay.belgaumkar@intel.com>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Reviewed-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Reviewed-by: Vinay Belgaumkar <vinay.belgaumkar@intel.com>

commit 14f70a861b66f8a62a53911cf587fadeebca5957
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Dec 13 12:46:47 2015 +0000

    igt/gem_read_read_speed: Tweak to show comparison against write-write
    
    Since we hold an exclusive write lock we expect 2 writes to happen
    serially, but we expect 2 reads to happen in parallel. Expand the testing
    to demonstrate this effect (i.e. we expect read-read to be roughly 2x
    faster than write-write for small copies on big core.)
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 866a6f2c41da8505cf868a9d83301cddd41cc9fb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Dec 12 18:56:37 2015 +0000

    tests/gem_pread,gem_pwrite: Fix compiler warnings
    
    Many warnings of the form
    
    gem_pread.c: In function ‘main’:
    gem_pread.c:128:8: warning: assignment discards ‘const’ qualifier from
    pointer target type [-Wdiscarded-qualifiers]
        bps = bytes_per_sec(buf, object_size/usecs*1e6);
    
    Regression from
    commit 48c945322b4c5f6443758143cccb9c4c04da4aaa
    Author: Ankitprasad Sharma <ankitprasad.r.sharma@intel.com>
    Date:   Wed Dec 2 14:54:51 2015 +0530
    
        igt/gem_pread: Support to verify pread/pwrite for non-shmem backed obj
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2d08e9e9a1fd05b0d7bf824f3ca98de820c7d615
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 11 09:25:03 2015 +0000

    igt/gem_concurrent_all: Expand testing to cover different memory regimes
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6672da5e8f430c65901adf1294647f0f4659bc54
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Dec 10 12:29:14 2015 +0100

    Revert "igt: s/basic/sanitycheck/ on prior smoketesting"
    
    This reverts commit 4f5efc5c844f6fe69209982463f9220f8f3951ed.
    
    There was a bit a misunderstanding on IRC between Chris&me. We want
    basic tests as sanity test to be run in the BAT CI. It's just unfortunate
    that right now we have fairly limited ability to absorb new ones, both
    because of a pile of existing bugs in the kernel and because the CI
    infrastructure is still being scaled out.
    
    The idea was just to remove the BAT tests added yesterday, not all of
    the ones we've had for a while longer.
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Grumpily-acked-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4f5efc5c844f6fe69209982463f9220f8f3951ed
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 10 10:02:46 2015 +0000

    igt: s/basic/sanitycheck/ on prior smoketesting
    
    In times past, I added "basic" variants of tests just to ensure that the
    general principle of operation was sound before proceeding on to the
    main test (which typically looked at thrashing, i.e. were long and
    tedious and pointless if the test didn't even work in the normal
    situation). Since "basic" now collides with BAT, rename my trivial tests
    to "sanitycheck".
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 197db8607d910c7d5252c1d928b715ff4c4c28ce
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Dec 9 20:54:10 2015 +0000

    igt/gem_concurrent_blit: Explicitly check for "missed interrupts"
    
    As the concurrency tests are a good source of stress for
    i915_wait_request() (the tests are primarily designed to ensure that GPU
    activity of one form or another is completed before access by third
    parties), one of the common form of errors we can detect are the
    "missing interrupts" (i.e. where the waits do not terminate because of a
    race between the interrupt and the seqno write). Add an explicit check
    for this error and flag it as a definite fail - which also helps narrow
    it down to certain subtests when run as a batch.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4cc40ad4fe80f4d107e8e4279b0b07243b91f77c
Author: Bob Paauwe <bob.j.paauwe@intel.com>
Date:   Mon Dec 7 13:53:35 2015 -0800

    igt/test/pm_rps: load GPU to force not-idle to idle transition.
    
    When changing the sysfs GT min frequency, the kernel won't
    automatcilly drop the GT frequency to idle unless the GPU
    transitions from busy to idle.
    
    Load the GPU after increasing the GT min frequency to force
    a busy to idle transition. This matches the behavior when
    decreasing the GT min frequency.
    
    Signed-off-by: Bob Paauwe <bob.j.paauwe@intel.com>
    Reviewed-by: Imre Deak <imre.deak@intel.com>

commit 4aa1b99a121a6cb843f463af64cbd92942f809e0
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Tue Dec 8 00:11:21 2015 -0800

    kms_psr_sink_crc: Add BAT test for PSR active.
    
    It takes from 2 to 5 seconds to run.
    
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 4a004d9cb36ff845aebb8590b8bb08c460620a72
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Mon Dec 7 01:26:17 2015 -0800

    kms_psr_sink_crc: Reduce our time out for PSR active.
    
    Using same timeout value as kms_fronbuffer_tracking and for
    same reasons exposed at 'commit 83582f9b ("kms_frontbuffer_tracking:
     Increase the time we wait for PSR.")'
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit be2d5188f6fa14e80847fe51ab546902f2483e35
Author: Vinay Belgaumkar <vinay.belgaumkar@intel.com>
Date:   Tue Dec 8 11:57:19 2015 +0000

    tests/gem_softpin: New tests for softpin feature
    
    These tests exercise the userptr ioctl to create shared buffers
    between CPU and GPU. They contain error and normal usage scenarios.
    They also contain a couple of stress tests which copy buffers between
    CPU and GPU. These tests rely on the softpin patch in order to pin buffers
    to a certain VA.
    
    Caveat: These tests were designed to run on 64-bit system. Future work
    includes adding logic to ensure these tests can run on 32-bit systems with
    PPGTT support. Some tests are currently disabled for 32-bit systems for that
    reason.
    
    v2: Added cc and signed-off-by fields
    
    v3: Fixed review comments, added helper functions. Removed userptr error
    scenarios covered by existing userptr tests. Modified stress test to have
    100K buffers, it now runs for ~30 mins, checks every element has been written
    to correctly, and pins buffers at different VMAs.
    
    v4: Changed name to gem_softpin
    
    v5: More fixes. Removed the file based tests, will move them to userptr tests.
    Added a function that validates appropriate PPGTT support before running tests.
    Optimized stack space and memory footprint in stress test. Removed the eviction
    test, will add it back after verifying proper functionality.
    
    v6: Split basic test into userptr and bo
    Fixed some coding style issues.
    
    v7: Enhanced invalid vma pinning test to verify 32-bit PPGTT functionality.
    Enabled the test for 32-bit PPGTT systems, and verify pinning fails above
    32-bit addresses. Enhanced the high adress pinning test to ensure pinning
    fails when EXEC_OBJECT_PINNED flag is not used. Some more cosmetic fixes to
    close buffer handles. Changed userptr function to used synchronized operations.
    
    v8: Minor change to high address pinning test as per comment.
    
    v9: Skip the tests if softpin support is not present.
    
    v10: Removed trailing white spaces.
    
    v11: Keep alphabetical order in Makefile and gitignore; update error code
    returned while trying to pin above the max vm size (EINVAL); test attempt
    to pin above 4GB without the support 48b flag.
    
    Cc: Michel Thierry <michel.thierry@intel.com>
    Cc: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Vinay Belgaumkar <vinay.belgaumkar@intel.com>
    Signed-off-by: Michel Thierry <michel.thierry@intel.com> (v11)
    Reviewed-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 89bcdb9022fb7a1f66635b9f2546356ad0c0761a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Dec 8 13:42:50 2015 +0000

    igt/gem_exec_nop: Remove nop latency measurements
    
    Since commit c8beadb811bdc2b9c21f95144852f3e55867b546
    Author: Derek Morton <derek.j.morton@intel.com>
    Date:   Wed Nov 11 14:46:58 2015 +0000
    
        tests/gem_exec_nop: Improved test run time
    
    the stablity of the measurement regressed and it is once again no longer
    a reliable metric for detecting regressions. Give up.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Derek Morton <derek.j.morton@intel.com>

commit 870548b6533318b10c414663ea4ad2af01bab8b9
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Dec 4 15:49:30 2015 +0200

    tests/kms_force_connector_basic: Add prune-stale-modes subtest
    
    Add a new subtest that makes sure old stale modes get pruned from the
    connector's mode list when the EDID changes.
    
    v2: s/drmModeGetConnector/drmModeGetConnectorCurrent/ since
        kmstest_force_edid() already takes care of doing the heavier
        call for us (Daniel)
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b0f4df31baf3ddda72a276f3b2b03ae8363d0843
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Dec 3 19:01:21 2015 +0200

    lib/kms: Turn base_edid into a template
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 7bd31d090e78d87076f736071a9302aa349164e2
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Tue Nov 3 10:02:14 2015 -0800

    kms_psr_sink_crc: Add suspend/resume sub test.
    
    Although kms_frontbuffer_tracking already has psr-suspend testcase
    this one here can complement it by testing different combination
    and mainly covering 2 different cases individually:
    
    1. wait-for-psr, suspend-resume tehn run 1 operation.
    
    2. suspend-resume, wait-for-psr then run 1 operation.
    
    v2: Remove no-suspend option since this should be done with piglit
    if necessary for now.
    
    v3: argh! remove remaining no-suspend checks...
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 63980babcf9a104b12a726953cbe7d946a0aadd2
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Tue Nov 3 09:37:56 2015 -0800

    kms_psr_sink_crc: Fix no-psr option.
    
    commit 75b286e821 ("tests/kms_psr_sink_crc: test even
    if PSR is disabled by default")' force PSR enabling without
    respecting the no-psr (running-with-psr-disabled) option.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit e6848c5839f5506fbc4a496da3815403668e00d7
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Thu Dec 3 08:27:08 2015 -0800

    kms_frontbuffer_tracking: Skip on unreliable CRC.
    
    Even with all sink crc re-works we still have platforms
    where after 6 vblanks it is unable to calculate the
    sink crc. But if we don't get the sink crc it isn't true
    that test failed, but that we have no ways to say test
    passed or failed.
    
    So let's print a message and move forward in case sink crc
    cannot help us to know if the screen has been updated.
    
    v2: Also include a message on setup_sink_crc and also
    only skip when it is mandatory, i.e. when running for PSR.
    
    Acked-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit ea3806badee7dcb7677edcfe35c17499c1b0f377
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Thu Dec 3 08:25:38 2015 -0800

    kms_frontbuffer_tracking: Make sink crc mandatory only for PSR.
    
    Unfortunately Sink CRC is not 100% reliable for all platforms.
    So we cannot block FBC tests nor skip them when we are getting
    unreliable Sink CRC results, or not getting them at all.
    
    Acked-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit d074b44ab6a7ac14cc36b1dc98df5bcf73c82f95
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Mon Nov 2 15:54:06 2015 -0800

    kms_frontbuffer_tracking: Increase the time we wait for PSR.
    
    With commit (drm/i915: Delay first PSR activation.) in kernel
    PSR might take a bit longer to really activate after the modeset.
    The first PSR activation after modeset is taking 5 times the panel
    power cycle delay time, which is 600ms for our machines here.
    So timeout here needs to be a minimum of 3s. However let's use
    5s as the safe value in case we find machines with higher power
    cycle delay.
    
    Since we do a lot of assert(psr_disabled), this commit is increasing
    the time it takes to run the whole set of PSR tests by a few minutes,
    which had been reduced by commit f4db3b18841
    ("kms_frontbuffer_tracking: reduce the PSR wait timeout to 2s").
    
    Reviewed-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 8b22e051e8306a8ee5e78862b403f01cc5b683ec
Author: Bob Paauwe <bob.j.paauwe@intel.com>
Date:   Thu Dec 3 16:28:00 2015 -0800

    igt/pm_rps: current freq < user specified min is not a fail (v3)
    
    Since commit
    
      commit aed242ff7ebb697e4dff912bd4dc7ec7192f7581
      Author: Chris Wilson <chris@chris-wilson.co.uk>
      Date:   Wed Mar 18 09:48:21 2015 +0000
    
          drm/i915: Relax RPS contraints to allows setting minfreq on idle
    
    it is now possible that the current frequency will drop be the user
    specified minimum frequency to the "idle" or RPn frequency. Update the
     pm_rps tests to reflect that droping below the user specified minimum
    is no longer considered a failure.
    
    v2: Add check RPn <= current freq. (Me)
    v3: Use RPn instead of MIN frequency in idle check (Imre)
    Signed-off-by: Bob Paauwe <bob.j.paauwe@intel.com>
    Reviewed-by: Imre Deak <imre.deak@intel.com>

commit 6cf72724e225524cd0a4352ba829ffc578f40a4d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Dec 3 07:45:36 2015 +0100

    tests/drv_hangman: Open drm fd before doing anything
    
    This way we correctly auto-skip instead of falling over the
    lack of i915 debugfs files first and fail the testcase due to
    that.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ee0808982f40130d29691c37505dafcbf45f9da5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Dec 3 07:45:35 2015 +0100

    tests/drm_lib.sh: Skip when i915 debugfs wasn't found
    
    Instead of failing. We might want to move this into i915 tests
    eventually, but this is good for now.
    
    v2: Use the correct exit code (Derek) and use the new symbolic values
    Thomas added.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d8d1eab318f2f22c9199dcefc2b7b96ba4793cdc
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Dec 3 07:45:34 2015 +0100

    lib: igt_fork_hang_helper must be run in fixtures
    
    Because it opens an intel-specific drm fd. Fixes crashes when running
    igt on no-intel.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 39e44dfa4c0ba2f979dab5ea81074343de0ad2cb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 4 10:22:16 2015 +0000

    benchmarks/gem_exec_nop: Flush retirement lists before executing
    
    wait-ioctl skips a couple of side-effects of retiring, so provoke them
    using set-domain before we sleep.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 839a1426ce2a8510cdf0e648b06f28e7c33b64b6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Dec 1 11:24:20 2015 +0100

    tests/kms_force_connector: Include in BAT set
    
    Forcing connector state is a basic piece of our test infrastructure
    that we use in all the kms_ tests. It allows us to run tests even if
    no outputs are connected.
    
    They're also really fast, so perfect candidates for inclusion into the
    BAT set.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit db4f83ca5da29673ab9210e4322156518047130d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Dec 1 11:24:19 2015 +0100

    lib/kms+tests: Use cached connector state
    
    Speeds up testcases except for those where we want to exercise the
    probing itself. The only exceptions left where we do a full probe are
    
    - pm_rpm: We use it to make sure the kernel doesn't get things wrong
      with power domains, so we really want to exercise the full probe
      paths. And there the only place really is the specific validation
      done with the data gathered by get_drm_info.
    
    - kmstest_force_ functions: Newer kernels should be better at
      re-probing state when the force sysfs fields change, but better safe
      than sorry.
    
    v2: I also consolidated the start_n_modes and start_connectors while
    at it - move one of the fixup hunks to this patch that accidentally
    got misplaced (Thomas).
    
    Cc: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit cdb398b5b9a6a1895bbc8213f88bc9e45795db23
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Dec 1 11:24:18 2015 +0100

    tests/kms_force_connector: Fixes
    
    The edid we inject stayed the same, but the kernel started to list
    more modes for it. No idea whether that's the right thing here since
    I'm not really an EDID expert. But then again the testcase wants to
    check that the injection works, not validate the kernel's parser.
    
    v2: Only check the preferred mode for more future-proofing (Thomas).
    
    v3: Clarify commit message (Jani).
    
    Cc: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 02cdd9899dbf56ae8b9ae8ee2b83e2afcd479193
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Dec 3 11:36:02 2015 +0000

    tests: add exit value constants for shell script tests
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 8a58734c110375793306fc10a31d5b17e816471b
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Dec 3 11:12:38 2015 +0000

    tests: replace drm_open_any in gem_create and gem_stolen
    
    drm_open_any has been replaced by drm_open_driver.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 67d32c210dab272f02d6b4e19a54451a3e0231e5
Author: Ankitprasad Sharma <ankitprasad.r.sharma@intel.com>
Date:   Wed Dec 2 14:54:52 2015 +0530

    igt/gem_create: Test to validate parameters for GEM_CREATE ioctl
    
    This test validates the two parameters (size and flags) GEM_CREATE ioctl.
    
    v2: Added IGT_TEST_DESCRIPTION (Thomas Wood)
    
    v3: Removed use of hard coded values, updated comments (Tvrtko)
    
    v4: Removed over-use of macros, updated with multiples of PAGE_SIZE (Tvrtko)
    
    Signed-off-by: Ankitprasad Sharma <ankitprasad.r.sharma@intel.com>
    Reviewed-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 48c945322b4c5f6443758143cccb9c4c04da4aaa
Author: Ankitprasad Sharma <ankitprasad.r.sharma@intel.com>
Date:   Wed Dec 2 14:54:51 2015 +0530

    igt/gem_pread: Support to verify pread/pwrite for non-shmem backed obj
    
    This patch adds support to verify pread/pwrite for non-shmem backed
    objects. It also shows the pread/pwrite speed.
    It also tests speeds for pread with and without user side page faults
    
    v2: Fixed Rebase conflicts (Ankit)
    
    v3: Precalculating values to avoid redundant function calls (Dave)
    Replaced igt_subtest by igt_subtest_f, added asserts for mmap, corrected
    indentation (Tvrtko)
    
    v4: Updated data types to avoid redundant type conversions (Tvrtko)
    Corrected pagefault-pread time calculation (Ankit)
    
    Signed-off-by: Ankitprasad Sharma <ankitprasad.r.sharma@intel.com>
    Reviewed-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 70c3be83a0638cb65518ad2536719996d1f5a40c
Author: Ankitprasad Sharma <ankitprasad.r.sharma@intel.com>
Date:   Wed Dec 2 14:54:50 2015 +0530

    igt/gem_stolen: Verifying extended gem_create ioctl
    
    This patch adds the testcases for verifying the new extended
    gem_create ioctl. By means of this extended ioctl, memory
    placement of the GEM object can be specified, i.e. either
    shmem or stolen memory.
    These testcases include functional tests and interface tests for
    testing the gem_create ioctl call for stolen memory placement
    
    v2: Testing pread/pwrite functionality for stolen backed objects,
    added local struct for extended gem_create and gem_get_aperture,
    until headers catch up (Chris)
    
    v3: Removed get_aperture related functions, extended gem_pread
    to compare speeds for user pages with and without page faults,
    unexposed local_gem_create struct, changed gem_create_stolen
    usage (Chris)
    
    v4: Splitting patch to remove changes from gem_pread/gem_pwrite
    to another patch (Ankit)
    
    v5: Fixed Rebase conflicts (Ankit)
        Added IGT_TEST_DESCRIPTION (Thomas Wood)
    
    v6: Added __gem_create_stolen for user to handle error, updated
    gem_create_stolen to align with gem_create function, corrected
    fill_purge test (out of bound access), added testcase to validate
    allocating of more than 32 bit sized buffers (Tvrtko)
    
    v7: Removed unused variables, Corrected comments & formatting (Tvrtko)
    
    Signed-off-by: Ankitprasad Sharma <ankitprasad.r.sharma@intel.com>
    Reviewed-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 2db78a4995a8ee298ae0cd68879baf80407a0e5e
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Dec 2 16:46:39 2015 +0000

    Update version to 1.13 and add the release date
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 17c6b5caf37bccd4a38d7d310cb53ea23a23b5f8
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Dec 2 16:45:42 2015 +0000

    NEWS: Updates
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 498fb6205e62c34495ea5ef09a9c156b9cf61f2f
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Dec 2 16:35:50 2015 +0000

    docs: remove references to tests/NAMING-CONVENTION
    
    The tests/NAMING-CONVENTION file has been removed and its contents is
    now included in the API documentation.
    
    Reported-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 97bf3f9a55dbe20614479cbce63c0966f8e25df1
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Dec 2 10:49:03 2015 +0000

    tests/core_setmaster_vs_auth: add test description macro
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 66dc90ed658fe345d98ef0f287df383c3b2f4a2c
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Dec 2 10:46:33 2015 +0000

    tests/core_setmaster_vs_auth: use igt_simple_main
    
    This test has no subtests, so should use igt_simple_main.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit b3ff11232681ab615794c293de8abfebb8921ad7
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Dec 1 15:12:07 2015 +0000

    docs: exclude gpgpu_fill.h
    
    gpgpu_fill.h is only used internally by the library.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 0874c770eb016c26c148323b7b7b3a7c2d829441
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Dec 1 15:07:10 2015 +0000

    docs: document intel_pipe_crc_source enum values
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 683316cb886dced1674876f21c782836fe40f9ff
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Nov 30 16:36:16 2015 +0000

    docs: add missing documentation for drm open functions
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 0394844a478e500740389e2cbbf2fdee0c4054c7
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Nov 30 15:35:46 2015 +0000

    tests/gem_request_retire: add test description
    
    Cc: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 72b6bec370451ae722ddc1c5457f4cfa6a55b188
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Wed Nov 25 10:50:31 2015 +0200

    tests: fix ddx_intel_after_fbdev to use intel_reg
    
    intel_reg_dumper is gone, replaced by 'intel_reg dump'.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 4fe60a6e1c1f2a8853d57c19c6c16be408d1cd19
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Wed Nov 25 10:46:40 2015 +0200

    tools: fix intel_gpu_abrt to use intel_reg
    
    intel_reg_dumper is gone, replaced by 'intel_reg dump'.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 96d3658d0be9479168586f01101a493aa030c9d4
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Wed Nov 25 10:25:44 2015 +0200

    scripts: remove display_debug.sh as obsolete
    
    The script uses the obsoleted and removed intel_reg_read tool. Rather
    than mechanically fix this to use intel_reg, observe that the hardcoded
    register offsets are platform specific. A quick glance suggests they are
    for PCH split platforms with FDI, and as such useful only on a minority
    of platforms. Remove the script as obsolete.
    
    If the need for such a script arises, it should be based around using
    'intel_reg dump' with display-only register spec files.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 5830a7a04be49516e947eaefb47c2d214da9d2ab
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Dec 1 18:33:17 2015 +0100

    tests: Add core_setmaster_vs_auth.c
    
    Embarrasingly I noticed that I need to git add the file when resolving
    the conflict and manually applying my patch. But then I added the
    wrong file ... Reported by Thomas Wood.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 80546d45762a7b1e20885c557a08a41ef6d7fc10
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Dec 1 17:37:40 2015 +0100

    tests/pm_rpm: Don't compare edid blob IDs
    
    The kernel is free to allocate blob ids however it wants to. And also
    to reallocate them whenever it sees fit. The only thing we are allowed
    to compare is the length and the actual date.
    
    Removing this bogus check makes drm-resources-equal on my snb.
    
    Cc: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=90546
    Reviewed-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 8133295d02730dfc800d974e673dcb4b07460911
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Dec 1 08:44:00 2015 +0100

    tests: add core_setmaster_vs_auth
    
    Tests that master state isn't leaked to new masters by checking
    that auth magics for the old master don't work any more.
    
    Based upon a simple test program provided by Thomas.
    
    v2: Use comment Thomas suggested on intel-gfx.
    
    Cc: Thomas Hellstrom <thellstrom@vmware.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 92e83cb379cd36c72ce1a254a1b80320b21a3ae1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Nov 30 16:03:46 2015 +0100

    tests: Rename drm_auth to core_auth
    
    It really is a core drm testcase and not a libdrm testcase. While at it
    also make it generic, since it is.
    
    Cc: Daniel Stone <daniels@collabora.com>
    Acked-by: Daniel Stone <daniels@collabora.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3b75839b795c3e206316f4423b1f9ae01c91d64c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Dec 1 13:33:13 2015 +0000

    lib: gem_set_caching() use drmIoctl() rather than ioctl()
    
    gem_set_caching() tries to be clever and detect when the ioctl isn't
    supported (thereby skipping the test). However, it forget that we may be
    acting on active objects and be subject to the usual EAGAIN/EINTR
    errors. We can use the drmIoctl() to wrap the raw ioctl() in order to
    get the automatic restart on the interrupted syscall.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4cfcea4056ab78a8097b41e26748c940936cd411
Author: Marius Vlad <marius.c.vlad@intel.com>
Date:   Fri Nov 27 20:08:33 2015 +0200

    tests/pm_rpm tests for set_caching and set_tiling ioctl(s)
    
    v4: re-bind the gem objects each time before calling
    disable_all_screens_and_wait().
    
    v3: Use smaller sizes when allocating gem objects for caching tests.
    
    v2: use mmap to gtt instead off cpu and various style-changes.
    
    Signed-off-by: Marius Vlad <marius.c.vlad@intel.com>
    Reviewed-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit d2a17f4bc4d466ac19fd00ae7fe7998d6626460e
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Oct 30 18:05:58 2015 -0200

    kms_frontbuffer_tracking: add tilingchange subtest
    
    During the review of a recent FBC patch, Ville pointed a problem that
    happens when we use the page flip IOCTL to switch between buffers that
    have different tiling formats. This test should catch the problem
    introduced by that patch - which was not merged, by the way, so the
    test should be passing.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 98bb8428b2939311015b45ca59d7d9c65949c9bf
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Nov 5 17:54:31 2015 -0200

    kms_frontbuffer_tracking: assert the stride changes at stridechange()
    
    We use igt_create_fb(), which decides the stride by itself: there's no
    guarantee that making a buffer 512 pixels bigger is going to make its
    stride change.
    
    I had a fix for this problem that was supposed to be applied before
    this patch, but due to a rework request I'm changing the order of the
    patches, so we should expect to hit this assertion for now. At least
    the root cause of the problem is clear now.
    
    v2: Update the commit message due to the patch order changing.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit f23ea58f1fbb7075d08bdbd85523d12270ce46a2
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Oct 30 17:56:29 2015 -0200

    kms_frontbuffer_tracking: expand badstride and stridechange
    
    Make those subtests try to change the stride using multiple APIs so we
    can catch errors that affect full modesets, fast modesets and page
    flips.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 340599c986ac84b3ed4e24188eca1b599caeb238
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Oct 30 18:55:52 2015 -0200

    kms_frontbuffer_tracking: move flip_type to struct test_mode
    
    Handle it just like we handle t->format. IMHO, it's better.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit b4c58857e5059cd4df5ce6298fd1897ea859ba6c
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Oct 30 17:37:10 2015 -0200

    kms_frontbuffer_tracking: do page flips using the planes API
    
    Add a new FLIP_PLANES enum so we can do "page flips" using it too. The
    goal is to exercise the fast modeset paths on the Kernel.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit d63413771fc9bc77e89dacecbc1bae6192444000
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Nov 5 16:39:00 2015 -0200

    lib/igt_fb: also pass the stride to igt_create_fb_with_bo_size()
    
    If the caller is going to specify a custom size, it's likely that he
    will also specify a custom stride. The automatic stride picked by
    create_bo_for_fb() is too huge for tiled buffers, so if the caller
    wants smaller buffers, then he'll need a smaller stride too, otherwise
    the Kernel will reject the addfb IOCTL due to stride * height being
    bigger than the size.
    
    I want to make tests/kms_frontbuffer_tracking use
    igt_create_fb_with_bo_size() so I can provide smaller buffers that
    will fit into the CFB. I'm also planning to make all frontbuffers with
    the same width/height/format have the same stride and size regardless
    of tiling method so I can exercise specific code paths.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 1c68a71acc1f9ddd98bc1bd6ff1da700442c21aa
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Nov 5 16:24:06 2015 -0200

    lib/igt_fb: fix open-coded ALIGN()
    
    Maybe this will help someone's life in the future.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit cb7dd5d401acceb62197eddf3cc6f0860c49faa3
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Nov 5 16:18:55 2015 -0200

    lib/igt_fb: fix igt_create_fb_with_bo_size() documentation
    
    If we pass zero as the bo_size we won't get the minimum needed size,
    we'll just get a size that works. The size is decided by
    create_bo_for_fb(). The selected size is really not minimal for tiled
    objects.
    
    We'll implement support for minimum size later.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 5cfc4e7967f76cdc92364014c8bf896ab6afa6bc
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Nov 5 10:42:49 2015 -0200

    lib/igt_fb: fix fb->size when provided by the user
    
    I want to have a little more control over the size of the buffers in
    kms_frontbuffer_tracking, so I decided to start calling
    igt_create_fb_with_bo_size() instead of igt_create_fb(). The problem
    is that create_bo_for_fb() returns its own calculated size as size_ret
    instead of the actual used size.
    
    So we fix this by returning the actual size, the one used in
    gem_create instead of the calculated size that's not used anywhere.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit d44100ed233db46085b626c1d493856ca1900eab
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Nov 27 09:56:09 2015 +0000

    benchmarks/gem_exec_ctx: Measure switching between fds
    
    Switching between fds also involves a context switch, include it amongst
    the measurements.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 26507f3e21fe14b0fe5b3daec73c26f37bb2189a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Nov 20 16:38:52 2015 +0000

    igt/gem_cs_prefetch: Convert to intel_require_memory()
    
    Replace the open-coded memory check with intel_require_memory.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e10ba6b51c028ce945605d1f720c598c93e8ad8f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Nov 25 14:19:15 2015 +0000

    igt/drm_read: Clear O_NONBLOCK between tests
    
    Ensure that O_NONBLOCK isn't accidentally set when we want a nonblocking
    file descroptor.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 32329b2e7dd9b6b69a397da0356bd1ebc6a45901
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Wed Nov 25 15:00:50 2015 +0200

    tests/drm_import_export: Always loop with mutex held
    
    We assume that lock is held on start of the loop scope.
    Some paths continuing inside loop didn't adhere to this
    assumption, causing segfault on unlocking an already
    unlocked mutex. Fix this by re-aquiring lock always.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=93013
    Cc: Michał Winiarski <michal.winiarski@intel.com>
    Cc: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Reviewed-by: Michał Winiarski <michal.winiarski@intel.com>

commit 3b1a55874d151c8044b0168de4b6d9351ced69d4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Nov 25 10:46:53 2015 +0000

    igt/drm_read: Check handling of pagefault on destination buffer
    
    In theory, this should force i915_gem_fault() when we first use the
    buffer (and not at mmap time) and so prevent a __copy_to_user_inatomic()
    from writting to the buffer.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d84e62478bf2c34d610467a98826d64c321b839b
Author: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
Date:   Fri Nov 20 13:57:11 2015 +0200

    lib/igt_core: Prefer CLOCK_MONOTONIC_RAW
    
    CLOCK_MONOTONIC_RAW is not affected by NTP, so it should be THE clock
    used for timing execution of tests.
    
    When fetching either the starting or ending time of a test, show the
    time as -1.000s.
    
    v6:
    - Whitespace corrections (Chris)
    
    v5:
    - Do not use C99 style comments (Chris)
    
    v4:
    - Introduce time_valid macro (Chris)
    - Reduce amount of boilerplate code for calculating elapsed time
    
    v3:
    - Do not exit directly from handler (Chris)
    - Show elapsed time as -1 if it is not calculable
    
    v2:
    - Cache the used clock (Chris)
    - Do not change the clock during execution
    - Spit out and error if monotonic time can not be read
    
    Cc: Thomas Wood <thomas.wood@intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 4bc68b1baa8ad288a695eedf4e1638e07e5ab9a1
Author: Wayne Boyer <wayne.boyer@intel.com>
Date:   Fri Nov 13 13:40:24 2015 -0800

    lib/kbl: Add Kabylake GT4 PCI IDs
    
    Add the Kabylake GT4 PCI IDs as defined in this kernel patch.
    
        commit 8b10c0cf21ec84618d4bf02c73c0543500ece68d
        Author: Deepak S <deepak.s@intel.com>
        Date:   Wed Oct 28 12:21:12 2015 -0700
            drm/i915/kbl: Add Kabylake GT4 PCI ID
    
    Signed-off-by: Wayne Boyer <wayne.boyer@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 526a63ec6bfa4dfedb9ae27284b604ec37132a16
Author: Wayne Boyer <wayne.boyer@intel.com>
Date:   Fri Nov 13 13:40:23 2015 -0800

    lib/kbl: move KBL check from IS_SKYLAKE() to IS_GEN9()
    
    Remove the KBL check from IS_SKYLAKE() following the kernel definition.
    Then, add the KBL check to IS_GEN9().
    
    The idea is to avoid confusion.  On the kernel side, the mix of SKY
    and KBL was nacked so the platforms are split.
    
    Signed-off-by: Wayne Boyer <wayne.boyer@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit b088e305750c9df7b5d3a16f01fd2a7dba22177f
Author: Matt Turner <mattst88@gmail.com>
Date:   Fri Nov 13 16:45:13 2015 -0800

    tools/aubdump: Link with -ldl.
    
    aubdump.c uses dlsym(), so it needs to link with -ldl. Otherwise:
    
    /bin/sh: symbol lookup error: /usr/lib64/intel_aubdump.so: undefined symbol: dlsym
    
    Signed-off-by: Matt Turner <mattst88@gmail.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit dcdf21beb8fb40c4061e7dbcf0a021c6513d5090
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Thu Nov 19 15:02:15 2015 +0000

    igt/gem_request_retire: Provoke context destruction with active VMAs
    
    Test designed to trigger the
    WARN_ON(!list_empty(&ppgtt->base.active_list))
    in i915_gem_context_clean.
    
    v2:
    Simplify execbuf building and the test itself. Cleanup code. (Chris Wilson)
    
    v3:
    Removed asserts done by the helpers already. (Chris Wilson)
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b68a6428db3d1a31d7662c03eb86a7b4cd4e37be
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Nov 22 20:50:31 2015 +0000

    benchmarks: Add a set-domain benchmark
    
    Benchmark the overhead of changing from GTT to CPU domains and vice
    versa. Effectively this measures the cost of a clflush, and how well the
    driver can avoid them.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 59f076a0898ce4c226bcc116d429f685009b268c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Nov 20 11:23:37 2015 +0000

    drmtest: Use standard gem_execbuf() calls in gem_quiescent_gpu()
    
    Now that we have better ioctl wrappers, let's make us of them. The
    advantage should be in improved error reporting in case
    gem_quiescent_gpu() ever fails.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b718f50f92cf7ed825c90ff54940cb155d110a2c
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Fri Nov 6 13:52:53 2015 +0200

    lib: Add Skylake Intel Graphics GT4 PCI IDs
    
    Add Skylake Intel Graphics GT4 PCI IDs.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>

commit 8a8717eee305b2a9f58b9f5c31adc2a8847361bf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Nov 18 12:49:24 2015 +0000

    overlay: Show power consumption without i915-pmu
    
    The power metter was not showing up due to an erroneous check for a
    failure to open the i915 perf interface.
    
    Reported-by: Marius Vlad <marius.c.vlad@intel.com>
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 938b9306be240ada0e592f2bf59f428c6e0e5717
Author: Vivek Kasireddy <vivek.kasireddy@intel.com>
Date:   Wed Nov 4 16:10:15 2015 -0800

    igt/kms_rotation_crc: Add a new subtest to exhaustively test for fence leaks (v3)
    
    In this subtest, as a first step, MAX_FENCES+1 number of framebuffers are
    created backed up by objects that have multiple GGTT views (normal and
    rotated). Next, we have the i915 driver instantiate a normal view followed
    by a rotated view. We continue doing the above MAX_FENCES + 1 times.
    
    v2:
    - Add a igt_require() to check if there is enough GTT space left for
      MAX_FENCES+1 framebuffers. (Tvrtko)
    - Make data2 local to test_plane_rotation_exhaust_fences(). (Tvrtko)
    - If there is a failure, deallocate all the previously allocated
      framebuffers before asserting.
    
    v3: Close the gem handle if set_tiling or addfb fails. (Tvrtko)
    
    Cc: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Vivek Kasireddy <vivek.kasireddy@intel.com>
    Reviewed-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 92a803ffb0c8a3e68dc8bac207c34a4ed78b724f
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Sun Nov 15 15:40:02 2015 +0200

    tests/kms_3d: Use XRGB8888 instead of ARGB8888
    
    We don't allow ARGB8888 anymore on primary planes on most platforms,
    so use XRGB8888 instead as the format.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit cba86e980f60b1e15f6a59c8fa60fa54288361da
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Sun Nov 15 14:24:46 2015 +0200

    tests/kms_3d: Use igt_assert_eq()
    
    Would be nice to see how many stereo modes we managed to extract from
    the EDID if it doesn't match the expected 13. So use igt_assert_eq()
    which prints the real count on failure.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit e42936d86b52c6804da41755df7155cafded5eb2
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Nov 11 18:19:06 2015 +0200

    tests/kms_addfb_basic: Add clobbered-modifier subtest
    
    Make sure the kernel doesn't clobber the modifiers when the user didn't
    pass any.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 4d8983bcdff43e95897031d7e1fef24170df5235
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Nov 11 20:25:11 2015 +0200

    lib/kms: Pass fb_id=0 to setcrtc in kmstest_unset_all_crtcs()
    
    The setcrtc ioctl ignores the fb_id when there's no mode specified.
    So passing -1 doens't make much sense. When there is a more, -1 means
    to preserve the current fb.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 29cd8a092e09bc72535d83d55b5800c3aa21440a
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Nov 11 15:07:00 2015 +0200

    tests/kms_flip: Add a note that the test was skipped when modeset fails
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit a09880d1c38343148e824b6a54db3046fb32986d
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Nov 10 19:22:11 2015 +0200

    tests/kms_flip: Modeset pipes in reverse order
    
    To make more multi-pipe tests run on IVB, do the modesets in the reverse
    order (ie. pipe C first, pipe A last). This way pipe B can't reserve the
    2 shared FDI lanes before pipe C is set up.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 5bb87dc0e563fe9fd54dde7b38732d28c3d2fa2e
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Nov 10 19:31:33 2015 +0200

    tests/kms_flip: Disable all pipes before each test
    
    Currently kms_flip leaks the state of the pipes from one subtest to the
    next. Meaning a single pipe test can actually have two or more pipes
    actually up and running, and similarly a two pipe test can have three
    pipes running.
    
    This is particularly nasty on IVB since one of the pipes still running
    but not actually part of the test maybe have reserved the shared FDI
    lanes, thus preventing one of the pipes taking part in the test from
    being enabled.
    
    To avoid such problems explicitly disable all pipes before each
    subtests.
    
    v2: Use kmstest_unset_all_crtcs() (Paulo)
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 2f894820ac216c9aef8db3008acb2492cae3bce1
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Nov 10 19:07:20 2015 +0200

    tests/kms_flip: Use human readable pipe and connector names
    
    Print the pipes and connectors in a human readable form instead of using
    the integer IDs.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit c8beadb811bdc2b9c21f95144852f3e55867b546
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Wed Nov 11 14:46:58 2015 +0000

    tests/gem_exec_nop: Improved test run time
    
    Reduced the Sleep period to 200mS and reduced the repetition count to 7
    to decrease the test run time significantly.
    
    v2: Changed uS to us
    v3: removed the output formatting change as the issue will be addressed
    in a seperate patch from Thomas Wood.
    v4: mS -> ms
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 464424dcee9b22cf66bd33f5be5e93397aa15e24
Author: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date:   Thu Nov 12 13:33:42 2015 +0100

    tests/kms_setmode: Handle MST correctly.
    
    There is a MST encoder for each crtc, and each MST connector
    will be connected to the encoder bound to that crtc.
    
    This breaks the kms_setmode assertion that is only 1 encoder per
    connector, so make an exception to that rule for displayport.
    
    Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

commit 4c14aa18c18f578825253769e97901bc963b40d2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Nov 12 10:50:17 2015 +0000

    benchmarks/gem_blt: Fixup a couple of non-llc foibles
    
    When extending the batch for multiple copies, we need to remember to
    flag it as being in the CPU write domain so that the new values get
    flushed out to main memory before execution. We also have to be careful
    not to specify NO_RELOC for the extended batch as the execobjects will
    have been updated but we write the wrong presumed offsets. Subsequent
    iterations will be correct and we can tell the kernel then to skip the
    relocations entirely.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 143a2160583a3223ebfc1fd1376a23cec1b81484
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Nov 12 09:29:07 2015 +0000

    igt/gem_mmap_gtt: Require SET_TILING to work before doing large tiled tests
    
    Older generations are more limited in how much they can fence, and the
    limits is enforced in the SET_TILING ioctl. So if it reports an EINVAL,
    we cannot perform the tiled test and may just skip it instead.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0c26652911986e2b1f666f662459a9e240428dc6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Nov 11 16:37:16 2015 +0000

    igt/gem_concurrent_all: Add testcases that split the copying across rings
    
    More inter-ring concurrency tests.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 790f1f804b062c47fb1bf686bfa3b0f2e69ee947
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Nov 9 17:17:24 2015 +0000

    lib: add a environment variable to control output
    
    Disable output of terminal control characters and progress meters when
    IGT_PLAIN_OUTPUT is set in the environment.
    
    Cc: Derek Morton <derek.j.morton@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit fca7b1b5fd2d61dfec6a612f1a2798270d1f8a4e
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Oct 29 17:01:17 2015 +0000

    lib: highlight subtest results on terminals
    
    Make subtest results easier to identify by making them bold when the output
    is a terminal.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 3dce57a699e1481bbe7b2e4c52a7643654e2da19
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Nov 10 14:16:00 2015 +0000

    tests/kms_force_connector: reset connectors and edid on exit
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit a8f63574307b0914214256a04939799bde2cffb9
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Nov 3 11:02:23 2015 +0000

    tests/kms_force_connector: clear forced edid in reset
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 5652985a54849176a6b07a481b61fc72df3a6b09
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Oct 29 16:38:57 2015 +0000

    tests/kms_force_connector: use comparison macros
    
    Use the comparison macros to make debug output clearer.
    
    v2: fix incorrect comparison
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit d01433900906017f16034b60c710cae9581e7755
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Nov 2 17:04:20 2015 +0000

    tests/kms_force_connector: add an option to reset connector force states
    
    v2: add missing igt_exit call and fix reset_connectors definition
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 01e1fca5828004954cdb1757409edd99d4b790c3
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Nov 2 15:50:27 2015 +0000

    tests/kms_force_connector: skip if the required connector is connected
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 2e5a43d29613fcb9e780b9c804d86b578bc8d56b
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Nov 2 15:48:52 2015 +0000

    lib: add documentation for igt_display_init/fini
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 5570060d331c0942405503a4398864241c1c55ef
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Nov 2 15:39:12 2015 +0000

    tests/kms_force_connector: free the display struct when no longer needed
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit e9ed1a37fcbb6c3f08bc714cdf5851202f532125
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Nov 2 10:29:23 2015 +0000

    tests/kms_fbc_crc: ensure context is initialized correctly
    
    Initialization was included in commit a976d7e (tests/kms_fbc_crc:
    refactor context handling code), but won't be executed since it is
    declared before the first label within a switch statement.
    
    kms_fbc_crc.c:178:2: warning: ‘context’ may be used uninitialized in this function [-Wmaybe-uninitialized]
      rendercopy(batch, context,
      ^
    kms_fbc_crc.c:271:22: note: ‘context’ was declared here
       drm_intel_context *context = NULL;
    
                          ^
    Cc: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>
    Reviewed-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 0986b432f874db0f263958fa07feb1a83ba1bae4
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Nov 2 10:20:15 2015 +0000

    lib: add PIPE_ANY to the pipe enum
    
    This avoids compiler warnings about invalid enum values.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 2643793255084362e02bb1ca2ab5031de2d5dc59
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Nov 2 10:18:27 2015 +0000

    Fix comparison of unsigned integers
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 52a393a3116f91157bc62d735db297d027d8724b
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Nov 2 10:16:16 2015 +0000

    tests: remove duplicate struct member initializers
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 24b7bbc7267a58d44173682da64d4dd9d32134ec
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Nov 2 10:02:51 2015 +0000

    tests: remove unnecessary igt_exit calls
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 36b8143c224b47f743d8881514bb348b9ee1d102
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Nov 2 10:02:08 2015 +0000

    Add missing noreturn attribute to various functions
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 3bc3ab27eac6eace4c90c8da92b4e7570110263b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Nov 10 14:04:17 2015 +0000

    benchmarks: Add README
    
    Add a README to introduce the ezbench.sh benchmark runner.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5cabb8c543d42c2473d11c3e6cb65bf5746b4cae
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Nov 10 13:40:40 2015 +0000

    benchmarks/gem_blt: Report peak throughput
    
    Report the highest throughput measured from a large set of runs to
    improve sensitivity.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3b0e3360811aa39bb6b5368bbcbfa62ffdc3d266
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Nov 9 20:37:07 2015 +0000

    lib: Add missing #include <stdbool.h>
    
    A forgotten fixup to allow instdone.h to compile.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 70ee5084213c27733f723a7d3f597764bba38dcf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Nov 9 08:58:59 2015 +0000

    lib: Make instdone initialisation fail gracefully
    
    Just report that we don't recognise the chipset rather than explode.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 134e32378a242e846a6e553ad80317a4a56b13b9
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Thu Nov 5 16:56:11 2015 -0800

    igt/intel_aubdump: Use the right ring
    
    This prevents the simulator from barfing when it sees commands from another
    ring. I've been using this locally for a very long time.
    
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>
    Reviewed-by: Kristian Høgsberg <krh@bitplanet.net>

commit bc37e0297c38348cd4e47b1dacc376bd94725ec2
Author: Daniel Stone <daniels@collabora.com>
Date:   Wed Jul 8 13:23:27 2015 +0000

    kms_atomic: Add basic atomic modesetting tests
    
    Add tests for KMS atomic modesetting, to exercise the basic interface
    and test failure/corner cases. Should ensure coherency between the
    legacy and atomic interfaces.
    
    v2: New patch.
    v3: Disable connector checking for now, as it was causing GPU hangs on
        newer kernels.
    v4: Rebase.
    v5: Use do_ioctl or do_ioctl_err consistently. Use igt_assert_*()
        helper macros rather than igt_assert() directly.
        Move assertions into helper/check functions. Define atomic commit
        helper.
    v6: Use do_ioctl_err, and define macros to move errors to
        actual callsite, rather than helper functions.
    
    Co-authored-by: Micah Fedke <micah.fedke@collabora.com>
    Signed-off-by: Daniel Stone <daniels@collabora.com>

commit b7a555e997ec43ed005f6b22707dd698e0147f64
Author: Daniel Stone <daniels@collabora.com>
Date:   Tue Oct 20 22:36:13 2015 +0100

    tests/core_prop_blob: Add multiple blobs per connection
    
    This should hit the bug fixed in:
        commit 8731b269f01e16193390c7276e70530366b8d626
        Author: Maneet Singh <mmaneetsingh@nvidia.com>
        Date:   Thu Oct 8 10:10:24 2015 -0400
    
            drm: Correct arguments to list_tail_add in create blob ioctl
    
            Arguments passed to list_add_tail were reversed resulting in deletion
            of old blob property everytime the new one is added.
    
            Fixes
    
            commit e2f5d2ea479b9b2619965d43db70939589afe43a
            Author: Daniel Stone <daniels@collabora.com>
            Date:   Fri May 22 13:34:51 2015 +0100
    
                drm/mode: Add user blob-creation ioctl
    
            Signed-off-by: Maneet Singh <mmaneetsingh@nvidia.com>
            [seanpaul tweaked commit subject a little]
            Signed-off-by: Sean Paul <seanpaul@chromium.org>
            Cc: stable@kernel.org # v4.2
            Reviewed-by: Daniel Stone <daniels@collabora.com>
            Reviewed-by: Jani Nikula <jani.nikula@intel.com>
            Signed-off-by: Dave Airlie <airlied@gmail.com>
    
    which was introduced with the initial blob support in:
        commit e2f5d2ea479b9b2619965d43db70939589afe43a
        Author: Daniel Stone <daniels@collabora.com>
        Date:   Fri May 22 13:34:51 2015 +0100
    
            drm/mode: Add user blob-creation ioctl
    
            Add an ioctl which allows users to create blob properties from supplied
            data. Currently this only supports modes, creating a drm_display_mode from
            the userspace drm_mode_modeinfo.
    
            v2: Removed size/type checks.
                Rebased on new patches to allow error propagation from create_blob,
                as well as avoiding double-allocation.
    
            Signed-off-by: Daniel Stone <daniels@collabora.com>
            Reviewed-by: Maarten Lankhorst <maarten.lankhorst@intel.com>
            Tested-by: Sean Paul <seanpaul@chromium.org>
            Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    
    Signed-off-by: Daniel Stone <daniels@collabora.com>

commit de7ccdd083579c82a1be0c028acf38617fb8c2ca
Author: Daniel Stone <daniels@collabora.com>
Date:   Thu Oct 1 14:16:48 2015 +0100

    tests: Run igt.cocci
    
    Signed-off-by: Daniel Stone <daniels@collabora.com>

commit f735015ed36f1e188d1107fd6b0969801df17c86
Author: Daniel Stone <daniels@collabora.com>
Date:   Wed Oct 7 17:16:44 2015 +0100

    lib/tests: Add igt_assert_*() self-tests
    
    Make sure our igt_assert variants are doing something that looks vaguely
    like the right thing.
    
    Signed-off-by: Daniel Stone <daniels@collabora.com>

commit f40a984413a9c06e5d382b248ba79ac7c17d2531
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Nov 3 16:43:48 2015 +0000

    igt/gem_userptr_blits: Correct the number of objects required
    
    Since we allocate 2 times count number of objects, that is the number of
    objects we should be using when checking for sufficient RAM to use for
    the test.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=92799
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ce65232cf5039798045767c65f2110f3b2a8ffd0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 30 15:50:12 2015 +0000

    benchmarks/gem_wait: Remove pthread_cancel()
    
    Apparently the pthread shim on Android doesn't have pthread cancellation,
    so use the plain old volatile to terminate the CPU hogs.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9024a72d29150f05e2ad62aa088d19a662bbf815
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 30 15:01:33 2015 +0000

    benchmark/gem_wait: poc for benchmarking i915_wait_request overhead
    
    One scenario under recent discussion is that of having a thundering herd
    in i915_wait_request - where the overhead of waking up every waiter for
    every batchbuffer was significantly impacting customer throughput. This
    benchmark tries to replicate something to that effect by having a large
    number of consumers generating a busy load (a large copy followed by
    lots of small copies to generate lots of interrupts) and tries to wait
    upon all the consumers concurrenctly (to reproduce the thundering herd
    effect). To measure the overhead, we have a bunch of cpu hogs - less
    kernel overhead in waiting should allow more CPU throughput.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit fe548fab0a63f95b729f0df4137753212e75375e
Author: Vivek Kasireddy <vivek.kasireddy@intel.com>
Date:   Thu Oct 22 18:34:03 2015 -0700

    igt/kms_rotation_crc: Add a subtest to validate Y-tiled obj + Y fb modifier (v3)
    
    The main goal of this subtest is to trigger the following warning in
    the function i915_gem_object_get_fence():
            if (WARN_ON(!obj->map_and_fenceable))
    
    To trigger this warning, the subtest first creates a Y-tiled object and
    an associated framebuffer with the Y-fb modifier. Furthermore, to
    prevent the map_and_fenceable from being set, we make sure that
    the object does not have a normal VMA by refraining from rendering to the
    object and by setting the rotation property upfront before calling commit.
    
    v2: Do not call paint_squares and just use one output.
    
    v3: Convert an if condition to igt_require and move the plane rotation
    requirement further up before the fb allocation.
    
    Cc: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Vivek Kasireddy <vivek.kasireddy@intel.com>
    Reviewed-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a2c67866fb447a5d00abb3061b0d735df30fd40c
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Oct 20 18:46:26 2015 -0200

    kms_frontbuffer_tracking: remove opt.only_feature
    
    That option is not needed anymore since:
    
    commit 982934625ac67234c6d85c6cf29a5a487e54d4f0
    Author: Thomas Wood <thomas.wood@intel.com>
    Date:   Wed Sep 16 14:36:24 2015 +0100
        lib: allow wildcard matching when specifying subtests
    
    In fact, using "--run-subtest 'fbc-*'" is better than using --fbc-only
    due to how SKIPs are handled. In the former, only the tests matching
    the expression are tried, so the number of SKIPs only contains the
    number of tests on the specified pattern that were skipped. If you
    used --fbc-only, all the non-fbc tests would count as SKIPs, so it
    would be harder to know which of the tests marked as skipped were
    actual FBC tests.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit efc2e39a458317d02e9f72b9eb277347c858ca59
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Oct 20 16:16:04 2015 -0200

    kms_frontbuffer_tracking: add stridechange subtest
    
    This is a corner case not exercised by the other subtests. The test is
    expected to pass both with the current Kernel tree and with the
    patches that are on the mailing list.
    
    The patches currently on the mailing list change how the CFB is
    allocated, and this subtest is designed to make sure everything still
    works as expected.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 196179a2bcab12da8b35d730d8fb0e8cf2c10a87
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Oct 20 16:02:52 2015 -0200

    kms_frontbuffer_tracking: add flag to not assert feature status
    
    This will be used by the stridechange subtest.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit a4697fc8baf1d3f61531ec164b9b9cbae37583ed
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Oct 19 11:14:44 2015 -0200

    kms_frontbuffer_tracking: unset crtcs after getting the base blue CRC
    
    This fixes the failures for cases where you use --run-subtest to run
    single subtests that don't use any drawing patterns.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 3660bd4e9c79105bfd6f10442772660b61549792
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Oct 22 19:55:38 2015 +0300

    tests/kms_flip: Dump the timestamps, counters, etc. with higher debug levels
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 75cf16e5854e232b5d3caba0bfb063d76866a6e4
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Oct 16 22:43:04 2013 +0300

    tests/kms_flip: Improve the accuracy of out frame time calculation
    
    Don't use the rounded vrefresh info to predict the frame duration.
    Instead calculate if from the clock.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 8a17af80e0732cb6ce5e7348dcb2d56a7b870e1d
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Oct 22 18:44:56 2015 +0300

    lib: Skip suspend/hibernate tests if the system doesn't support them
    
    Do a dry run with rtcwake first to determine if the system even supports
    the intended suspend state. If not, skip the test.
    
    Fixes a bunch of stuff on my BYT FFRD8 that doesn't support S3.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 47db6fbd99f1c8b127269b124948da7049298963
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Oct 22 18:38:50 2015 +0300

    tests/kms_pipe_crc_basic: Skip invalid pipe/port combos
    
    Don't try to test invaliud pipe/port combos. Fixes the test on
    VLV w/ DSI since the pipe<->DSI port mapping is fixed. Should also
    fix other platforms with similar restrictions.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 46ec33e847eef3292a2f3b4f4a037cfb161cfeee
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 20 14:40:50 2015 +0100

    igt/gem_concurrent_all: Add snoop concurrency tests
    
    Another caching mode worth exploring for bad flushing behaviour.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5ec54d8a2165f5095ec70b9bdb9ae583fead39c2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Oct 19 11:36:17 2015 +0100

    Update CONTEXT_PARAM for GTT_SIZE reporting
    
    Add the new PARAM identifier for reporting the context's GTT size.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a22719358d8fc7d4261829847e1ace042575a723
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 14 14:17:55 2015 +0100

    lib: Fix querying context GTT size
    
    We need a new ioctl to find the correct GTT size to use when submitting
    execbuffers (as opposed to wishing to know the global GTT size).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cd99ddead3815aacaa483f27548a3f5e1a7d9353
Author: Matt Roper <matthew.d.roper@intel.com>
Date:   Thu Oct 15 16:54:32 2015 -0700

    kms_cursor_crc: Add test for unthrottled cursor movement
    
    We've had  bugs in the past that caused cursor updates to be synced to
    vblank, resulting in sluggish cursor movement.  Add a test to try to
    make sure we don't regress and reintroduce these bugs.
    
    Cc: kalyan.kondapally@intel.com
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit e3ac13e16a4a1311e8e73f242e878d74c2063341
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 16 11:01:42 2015 +0100

    tests/gem_pwrite_snooped: Fix use of GCC pragmas
    
    Apparently GCC treats the #pragma directive as a code block and so we
    returned unconditionally from memchr_inv() on the first byte fubaring
    the test.
    
    commit b04691b3e8e62bd105f0f4d8d3b9e7da187f0c90
    Author: Thomas Wood <thomas.wood@intel.com>
    Date:   Tue Sep 8 11:16:46 2015 +0100
    
        tests/gem_pwrite_snooped: disable const cast warning
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=92227
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0ab76a22d111b903cd3ee0ba8d20dfeb34608361
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Wed Oct 14 17:32:58 2015 +0100

    benchmarks/gem_blt: Include igt.h in gem_blt.c
    
    To fix a build error on android
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit f050dc663d6a24e2ad0441ee3f7066ebee5e3f8c
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Wed Oct 14 17:23:00 2015 +0100

    tests/core_prop_blob: Fix core_prop_blob for android
    
    core_prop_blob was using ioctls not in the android kernel. Added a
    igt_require_propblob() function and local defines/structures so the
    test will compile and skip on kernels where the feature is unsupported.
    
    v2: moved igt_require_propblob() to core_prop_blob.c (Daniel Vetter)
    Moved gem_blt.c to a seperate patch (Thomas Wood)
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>
    [Thomas: fix compiler warning]
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 061a38fca0474ef5e20a5fa5ff086fcc4c4181a6
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed Oct 7 12:18:52 2015 +0100

    kms_rotation_crc: Exercise page flips with 90 degree rotation
    
    Do some page flipping on the rotated plane just to exercise
    that code path.
    
    v2: Actually render to flip fb and fixed flip counter.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Sonika Jindal <sonika.jindal@intel.com>
    Cc: Arun R Murthy <arun.r.murthy@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 1a593d2a5dfa1bd006742828338953358113cb6f
Author: Matt Roper <matthew.d.roper@intel.com>
Date:   Tue Oct 6 17:04:49 2015 -0700

    kms_universal_plane: Add gen9-specific test
    
    Gen9 adds some new capabilities not present on previous platforms
    (primary plane windowing, 90/270 rotation, etc.).  Add a new subtest to
    check how these new features interact with the use of the universal
    plane API.
    
    For now we just check whether pageflips work as expected in a windowed
    setting.  We may want to add some rotation testing in future patches.
    
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 5bc210a5b5d060a4053d3ad9266123abefb4840a
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Mon Oct 5 15:48:22 2015 -0700

    lib/kbl: Add Kabylake PCI IDs
    
    Also, following kernel definition Kabylake is Skylake.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 3e9726b33736f7fd7a349785ab6693e33647240a
Author: Lu, Han <han.lu@intel.com>
Date:   Thu Jun 25 14:39:33 2015 +0800

    tools/intel_audio_dump: add support for Broxton
    
    This patch adds support for dumping audio registers of Broxton.
    
    Signed-off-by: Lu, Han <han.lu@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit f52e7ec7876603b4edb0bff412255f8f1624ecc4
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Oct 9 19:11:39 2015 +0300

    Replace __gem_mmap__{cpu,gtt,wc}() + igt_assert() with gem_mmap__{cpu,gtt,wc}()
    
    gem_mmap__{cpu,gtt,wc}() already has the assert built in, so replace
     __gem_mmap__{cpu,gtt,wc}() + igt_assert() with it.
    
    Mostly done with coccinelle, with some manual help:
    @@
    identifier I;
    expression E1, E2, E3, E4, E5, E6;
    @@
    (
    -  I = __gem_mmap__gtt(E1, E2, E3, E4);
    +  I = gem_mmap__gtt(E1, E2, E3, E4);
    ...
    -  igt_assert(I);
    |
    -  I = __gem_mmap__cpu(E1, E2, E3, E4, E5);
    +  I = gem_mmap__cpu(E1, E2, E3, E4, E5);
    ...
    -  igt_assert(I);
    |
    -  I = __gem_mmap__wc(E1, E2, E3, E4, E5);
    +  I = gem_mmap__wc(E1, E2, E3, E4, E5);
    ...
    -  igt_assert(I);
    )
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Stochastically-reviwewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b8a77dd6c8e9f73493b2f86f293ff9c06fc08049
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Oct 9 18:29:28 2015 +0300

    Make gem_mmap__{cpu,gtt,wc}() assert on failure
    
    Rename the current gem_mmap__{cpu,gtt,wc}() functions into
    __gem_mmap__{cpu,gtt,wc}(), and add back wrappers with the original name
    that assert that the pointer is valid. Most callers will expect a valid
    pointer and shouldn't have to bother with failures.
    
    To avoid changing anything (yet), sed 's/gem_mmap__/__gem_mmap__/g'
    over the entire codebase.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Stochastically-reviwewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 106fe21373f9c3eadcd95fb4b48e452f9b328ffa
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Oct 9 18:36:24 2015 +0300

    lib: Die if framebuffer GTT mapping fails
    
    Cairo helpfully allocates a new buffer for us when
    cairo_image_surface_create_for_data() is called with a NULL ptr. That
    means if gem_mmap__gtt() fails, we get a totally silent failure and
    nothing ever drawn into the framebuffer. Very confusing.
    
    Put in an igt_assert() to make sure we managed to mmap something.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Stochastically-reviwewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7eaae3c2013b6d4bdf11570d3fb9d95eb4978976
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Oct 9 18:19:34 2015 +0300

    Sprinkle igt_assert(ptr) after gem_mmap__{cpu,gtt,wc}
    
    Do the following
     ptr = gem_mmap__{cpu,gtt,wc}()
    +igt_assert(ptr);
    
    whenever the code doesn't handle the NULL ptr in any kind of
    specific way.
    
    Makes it easier to move the assert into gem_mmap__{cpu,gtt,wc}() itself.
    
    Mostly done with coccinelle, with some manual cleanups:
    @@
    identifier I;
    @@
    <... when != igt_assert(I)
         when != igt_require(I)
         when != igt_require_f(I, ...)
         when != I != NULL
         when != I == NULL
    (
      I = gem_mmap__gtt(...);
    + igt_assert(I);
    |
      I = gem_mmap__cpu(...);
    + igt_assert(I);
    |
      I = gem_mmap__wc(...);
    + igt_assert(I);
    )
    ...>
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Stochastically-reviwewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 91d295cf06aeee733b57ec87933dba47ed2c8440
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Oct 9 17:00:29 2015 +0300

    Remove gem_mmap__{cpu,gtt,wc} return value MAP_FAILED asserts
    
    gem_mmap__{cpu,gtt,wc} never return MAP_FAILED, it gets converted to
    NULL internally. So don't go asserting that the returned value is
    not MAP_FAILED.
    
    Done with coccinelle:
    @@
    type T;
    identifier I;
    @@
    (
     I = gem_mmap__gtt(...);
    |
     I = gem_mmap__cpu(...);
    |
     I = gem_mmap__wc(...);
    )
     ...
    (
    - igt_assert(I != MAP_FAILED);
    + igt_assert(I);
    |
    - igt_assert(I && I != MAP_FAILED);
    + igt_assert(I);
    |
    - igt_assert(I != (T *) MAP_FAILED);
    + igt_assert(I);
    |
    - igt_assert(I != NULL);
    + igt_assert(I);
    )
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Stochastically-reviwewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8986bbc0ce83c1df4c314c9c04d30608cacae98b
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Oct 9 16:59:13 2015 +0300

    lib: Document that gem_mmap__{cpu,gtt,wc} return NULL on failure
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Stochastically-reviwewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9792e7b58095dc03e63c105c494308ed771168f6
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Oct 9 16:47:05 2015 +0300

    s/gem_mmap/gem_mmap__gtt/
    
    Get rid of the gem_mmap() alias of gem_mmap__gtt(). I don't see any
    point in having it.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Stochastically-reviwewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit bfea74a9f64a900bcb90f946b38746781017449f
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Sep 24 15:13:58 2015 -0300

    kms_frontbuffer_tracking: add fliptrack subtest
    
    The current upstream Kernel code stops and then restarts FBC at every
    page flip. I am working on patches to keep FBC enabled all the time,
    so this brings the possibility of having the hardware tracking
    mechanism looking at the old buffer instead of the new one. This test
    should catch this problem.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit f0c067ddb327c6cf7d6c9becaa293b2aa5491007
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Oct 5 16:57:53 2015 -0300

    kms_frontbuffer_tracking: don't mode unset when checking sink CRC support
    
    There's no reason to do a mode unset since we don't care about whether
    FBC or PSR are enabled or disabled. This should save about a second
    for each time you invoke the program.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit c1daf330e9c4fb0d7aca596a78d81e21ccdaba2f
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Oct 2 18:12:54 2015 -0300

    kms_frontbuffer_tracking: add scaledprimary subtest
    
    It's not testing a lot since we lack the Kernel Stolen Memory Checker,
    but some day this will be useful.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit bb2ebe92ef2df31d051e11642f0e122fa9a56683
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Sep 24 18:25:24 2015 -0300

    kms_frontbuffer_tracking: set the universal planes cap in the setup
    
    ... instead of just setting it for the fullscreen_plane subtest and
    then unsetting it. We want to use it more, so just make sure all the
    code knows how to deal with multiple planes per CRTC.
    
    This also allows us to do some upfront caching of the plane
    information, so the code for the tests gets simpler.
    
    There's a new test that's going to use all these changes.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 68cb0de70c76b15d47b8fb2c25acf6f855554858
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Sep 17 15:58:54 2015 -0300

    kms_frontbuffer_tracking: change pattern 1's last rect to 1x1
    
    Make sure the tracking mechanism is able to track a write in the very
    last pixel.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit f974422c21ebcc3de2c0a3c530321ba652992ba2
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Aug 24 16:30:04 2015 -0300

    lib/igt_fb: don't forget to close parens on message printed
    
    Restore the anxiety levels back to the normal values.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit bbd193b478b4baf40d2a527cac16c271479696cd
Author: Daniel Stone <daniels@collabora.com>
Date:   Mon Mar 16 20:06:55 2015 +0000

    tests: Add blob-property test
    
    Exercises the new blob-creation ioctl, testing lifetimes and behaviour
    of user-created blobs, as well as exercising all the invariant
    conditions we guarantee from modes exposed as blob properties.
    
    v2: Renamed to core_prop_blob, skip test if blob not available.
    v3: No changes.
    v4: Consistently return 0/errno.
    v5: Use do_ioctl_err and igt_assert_fd.
        Use igt_assert_*() helper macros rather than direct igt_assert().
    
    Signed-off-by: Daniel Stone <daniels@collabora.com>
    Reviewed-by: Daniel Vetter <daniel.vetter@intel.com>

commit 668c053e6a63469cb88dac8f89fea0159e1377b4
Author: Daniel Stone <daniels@collabora.com>
Date:   Thu Oct 1 14:16:23 2015 +0100

    lib/igt.cocci: De-opencode ioctls
    
    Use do_ioctl and do_ioctl_err where possible.
    
    Signed-off-by: Daniel Stone <daniels@collabora.com>

commit c8cec6b88511f43b5c0301864081fe6ca6e39049
Author: Daniel Stone <daniels@collabora.com>
Date:   Thu Oct 1 13:02:38 2015 +0100

    lib/drmtest: Add do_ioctl_err to expect failure
    
    do_ioctl demands that the ioctl returns success; add a variant named
    do_ioctl_err, which expects the ioctl to fail, and demands a particular
    result.
    
    Signed-off-by: Daniel Stone <daniels@collabora.com>

commit 31821fce59d6ce3288b5b8e0f18f60417b76c61a
Author: Daniel Stone <daniels@collabora.com>
Date:   Thu Oct 1 13:25:48 2015 +0100

    lib/igt.cocci: Add greater-than to igt_assert_lt*
    
    Change m >= n patterns to igt_assert_lte(n, m), and ditto for strict
    greater-than.
    
    Signed-off-by: Daniel Stone <daniels@collabora.com>

commit 6ead44d70bde0aed4ceac5311f3eec599125a554
Author: Daniel Stone <daniels@collabora.com>
Date:   Thu Oct 1 13:26:36 2015 +0100

    lib/igt_core: Add igt_assert_fd
    
    Skip open-coding and assert that fds are valid.
    
    Signed-off-by: Daniel Stone <daniels@collabora.com>

commit 715a17bb35a09a6889664bc7df14495bc068e06d
Author: Daniel Stone <daniels@collabora.com>
Date:   Thu Oct 1 13:00:12 2015 +0100

    lib/igt_core: Add igt_assert_neq_*() variants
    
    Similar to igt_assert_eq_*(), add variants for non-equality of types
    other than int.
    
    Signed-off-by: Daniel Stone <daniels@collabora.com>

commit c9112dca9e82288b887e248a5982df94c8ec1c04
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Oct 2 12:56:16 2015 +0200

    lib/core: Fix docs for igt_assert_lt(e)
    
    Logical negation is hard.
    
    v2: The second integer isn't plural (Daniel).
    
    Cc: "Morton, Derek J" <derek.j.morton@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>
    Reviewed-by: Daniel Stone <daniels@collabora.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d878e18dfd37eb6dd3517d601f4e779349e25ebc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 6 17:03:02 2015 +0100

    benchmarks/gem_blt: Fix compilation after rebase and add batch-size
    
    Add an option to do more than one copy per batch.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8253e7dc84af43d6c757185e5c6ff463feaaf637
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Oct 5 09:31:59 2015 +0100

    benchmarks: Measure BLT performance
    
    Execute N blits and time how long they complete to measure both GPU
    limited bandwidth and submission overhead.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1b492e311ce13fe4bc42f1edd5479441662d4855
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Thu Oct 1 16:09:02 2015 +0100

    benchmarks: Fix build errors on Android M-Dessert
    
    Android M-Dessert treats implicit declaration of function warnings
    as errors resulting in igt failing to build.
    
    This patch fixes the errors by including missing header files as
    required. Mostly this involved including igt.h in the benchmarks.
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 983dfe5b68e2e18006cee78811ff387735386fa1
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Jul 21 14:05:24 2015 +0300

    tests/pm_rc6_residency: Measure the sleep duration
    
    The code is confused about the units of CODE_TIME. The comment
    says 50 microsseconds, but the actual code makes it 50
    milliseconds. Avoid the whole mess by measuring the sleep
    duration ourselves. Since the time measurement is taken around
    the whole operation it obviously includes a bit of extra, but
    at least it's much less than the fixed 50 ms.
    
    For instance on one VLV board I now get something like this:
    - Residency in rc6 or deeper state: 3002 ms (ratio to expected duration: 0.98)
    + Residency in rc6 or deeper state: 3001 ms (sleep duration 3003 ms) (ratio to expected duration: 1.00)
    so the reported ratio is now much closer to reality.
    
    Reviewed-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 571942f0c43451b48b0d47d80c70ff2808908317
Author: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
Date:   Wed May 27 10:33:41 2015 +0300

    testdisplay: Fix segfault after first modeset fails
    
    When testing all modes on a connector with a single mode, if the modeset
    fails, the code attempts to remove fb_info[-1], because old_fb still has
    the inital value of -1.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=90625
    Signed-off-by: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 93f1250013c6c2533f840820a62a717aa33dbd88
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Sep 25 09:36:34 2015 +0100

    lib: fix fopen mode in igt_debugfs_search
    
    Reported-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 6c89204da77a721c9f6c2c77908ca9502a246df8
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Sep 23 16:52:24 2015 +0100

    lib: add igt_debugfs_search
    
    Add igt_debugfs_search to search each line in a debugfs file for a
    specified substring.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 1ea96af776a853303240fe6ec414aeed3316c24b
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Thu Sep 24 12:05:07 2015 +0100

    gem_ppgtt: Test VMA leak on context destruction
    
    Test that VMAs associated with a context are cleaned up when
    contexts are destroyed.
    
    In practice this emulates the leak seen between fbcon and X server.
    Every time the X server exits we gain one VMA on the fbcon frame
    buffer object as externally visible via for example
    /sys/kernel/debug/dri/0/i915_gem_gtt.
    
    v2: Use igt_debugfs_open, getline and strstr instead of home-brewed
    string matching. (Thomas Wood)
    
    v3: Rebase for drm_open_driver.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 2442f595d23b919bdc61d117b85a55304d6535a5
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Sep 24 11:35:19 2015 +0100

    lib/tests: explicitly raise SIGSEGV
    
    Dereferencing a NULL pointer is undefined behaviour and may not always
    result in a segmentation fault. Explicitly raise the SIGSEGV signal to
    test handling of this signal.
    
    v2: include signal.h (Derek Morton)
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 9edf293c4566ffdc0937c800035dd2d215355674
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Sep 24 11:04:34 2015 +0100

    gem_storedw_loop: fix segfault when listing subtests
    
    Commit fb66cd5 (tests/gem_storedw_loop: Fix use after free for bufmgr)
    introduced a segmentation fault when listing subtests because
    drm_intel_bufmgr_destroy is called with NULL. Move this and the call to
    the close function inside an igt_fixture block to prevent them being
    called when listing subtests.
    
    Cc: Robert Beckett <robert.beckett@intel.com>
    Cc: Jesse Barnes <jbarnes@virtuousgeek.org>
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit fb66cd5c346d91407f43879582da80781eed7c97
Author: Robert Beckett <robert.beckett@intel.com>
Date:   Tue Sep 22 19:02:39 2015 +0100

    tests/gem_storedw_loop: Fix use after free for bufmgr
    
    Move bufmgr destruction to end of tests. This avoids use after free on
    successive tests.
    
    This could be squashed with the following patch to aid bisectability:
    
    commit 0679702150157706a6def66b893b29c16345f4db
    Author: Jesse Barnes <jbarnes@virtuousgeek.org>
    Date:   Wed Aug 5 16:06:31 2015 -0700
    
        tests/gem_storedw_loop: add new store_dword test to unify per-ring ones v2
    
    Signed-off-by: Robert Beckett <robert.beckett@intel.com>
    Cc: Jesse Barnes <jbarnes@virtuousgeek.org>
    Reviewed-by: Jesse Barnes <jbarnes@virtuousgeek.org>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a16704261fc12259a2e61c00c3cef7be568d71f9
Author: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
Date:   Wed Sep 9 09:46:56 2015 +0100

    tests/gem_ctx_param_basic.c: fix non-root-set-no-zeromap subtest
    
    The test expects an ioctl failure when it tries to set
    CONTEXT_PARAM_NO_ZEROMAP from a non-root process. However, there is no
    requirement in the kernel for the user to be root to set this parameter,
    so the test is failing (it never passed as far as I'm aware of).
    Fix the test by making it expect a successful ioctl completion.
    
    Signed-off-by: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
    Reviewed-by: Jesse Barnes <jbarnes@virtuousgeek.org>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit ad4f3206dc05dcd1a65c9da08deb2b5d65e7a760
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Sep 16 15:21:09 2015 +0100

    m4: remove unused macros
    
    The requirement for these macros was removed in commit af97918 (tools:
    remove quick_dump).
    
    Reported-by: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 982934625ac67234c6d85c6cf29a5a487e54d4f0
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Sep 16 14:36:24 2015 +0100

    lib: allow wildcard matching when specifying subtests
    
    This allows multiple subtests to be specified using standard wildcard
    characters when using the --run-subtest command line option.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit b883b3066848957376d841cb4ffdf2d5646315c8
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Sep 15 17:04:11 2015 +0100

    scripts: add quick-testlist.py
    
    Add a script to take a piglit results file and create a list of tests
    that ran in under 60 seconds. This list can be used by the --test-list
    option of piglit.
    
    v2: exclude incomplete tests
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 1f9e0550455be4b219954a026407dd23ec21b299
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Sep 11 15:15:13 2015 +0100

    Update version to 1.12 and add the release date
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit c5902bffe3ff4d6c1dc77b97651fc3b3ff04e049
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Sep 11 15:13:00 2015 +0100

    NEWS: Updates
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 21111730832f8139a215cf8ba66471ef7e992984
Author: Micah Fedke <micah.fedke@collabora.co.uk>
Date:   Fri Aug 14 14:36:36 2015 +0000

    tests: update core_getstats to run on any platform
    
    Signed-off-by: Micah Fedke <micah.fedke@collabora.co.uk>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit fd282fb9d48c265533af91a291da368ac4c626e9
Author: Micah Fedke <micah.fedke@collabora.co.uk>
Date:   Fri Aug 14 14:35:46 2015 +0000

    tests: update core_getclient to run on any platform
    
    Signed-off-by: Micah Fedke <micah.fedke@collabora.co.uk>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 75c9e92efb9522d6f2c455dc35ba169c1d67ad52
Author: Micah Fedke <micah.fedke@collabora.co.uk>
Date:   Thu Aug 13 14:05:52 2015 +0000

    tests: update core_getversion to run on any platform
    
    Signed-off-by: Micah Fedke <micah.fedke@collabora.co.uk>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 253544f7a376d02d306a111019ef102a79acc4f3
Author: Micah Fedke <micah.fedke@collabora.co.uk>
Date:   Thu Aug 13 13:59:23 2015 +0000

    tests: update core_get_client_auth to run on any platform
    
    Signed-off-by: Micah Fedke <micah.fedke@collabora.co.uk>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit f91e93fa40cf76a0d78c4f022ff94e554fd73032
Author: Micah Fedke <micah.fedke@collabora.co.uk>
Date:   Wed Jul 22 20:32:06 2015 +0000

    lib: remove support for deprecated drm_open_any*() calls
    
    Signed-off-by: Micah Fedke <micah.fedke@collabora.co.uk>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit c81d293aed94fea9c48899187016a1b28f8989d5
Author: Micah Fedke <micah.fedke@collabora.co.uk>
Date:   Wed Jul 22 21:54:02 2015 +0000

    convert drm_open_any*() calls to drm_open_driver*(DRIVER_INTEL) calls with cocci
    
    Apply the new API to all call sites within the test suite using the following
    semantic patch:
    
    // Semantic patch for replacing drm_open_any* with arch-specific drm_open_driver* calls
    @@
    identifier i =~ "\bdrm_open_any\b";
    @@
    - i()
    + drm_open_driver(DRIVER_INTEL)
    
    @@
    identifier i =~ "\bdrm_open_any_master\b";
    @@
    - i()
    + drm_open_driver_master(DRIVER_INTEL)
    
    @@
    identifier i =~ "\bdrm_open_any_render\b";
    @@
    - i()
    + drm_open_driver_render(DRIVER_INTEL)
    
    @@
    identifier i =~ "\b__drm_open_any\b";
    @@
    - i()
    + __drm_open_driver(DRIVER_INTEL)
    
    Signed-off-by: Micah Fedke <micah.fedke@collabora.co.uk>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit e2241805a43e2cbd5287010e90005542845b48cd
Author: Micah Fedke <micah.fedke@collabora.co.uk>
Date:   Wed Jul 22 21:42:51 2015 +0000

    lib: adding drm_open_driver() interface
    
    The drm_open_driver*() functions replace the drm_open_any*() functions and
    provide the same utility, but in a way that is platform agnostic, not
    intel-specific.  This opens the path for adopting intel-gpu-tools to non-intel
    platforms.
    
    This commit renames the calls and adds the chipset parameter which can be used
    to restrict the opening to a specific hardware family.  For example,
    drm_open_driver(DRIVER_INTEL) will only return a valid fd if an intel GPU is
    found on the system, along with performing intel-specific initialization stuff
    like gem_quiescent_gpu(), et al.  If OPEN_ANY_GPU is specified, the first
    available drm device of any type will be opened.
    
    Other hardware type flags may be added in the future.
    
    The drm_open_any*() calls are retained as aliases of
    drm_open_driver*(OPEN_ANY_GPU) but will be removed in a subsequent patch.
    
    Signed-off-by: Micah Fedke <micah.fedke@collabora.co.uk>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 2bacd07eb3be30fd30ed4fa4645901683b1c6b09
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Sep 10 11:40:43 2015 +0100

    lib: don't use igt_warn in signal handlers
    
    igt_wan and other log functions are not async-signal safe, so should not
    be used in signal handlers.
    
    Reported-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit bcd3e1f33f136399659c7b1549be3bae467abaf4
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Wed Sep 9 17:51:35 2015 +0100

    tools/Android.mk: Fix compile error in intel_reg.c
    
    The patch "tools: install the register definition files" caused
    a build error on android as it added 'PKGDATADIR' which was not
    defined in the Android build environment. This patch adds that
    define to tools/Android.mk. It also copies the files it points
    to so they are actually in the target file system.
    
    v2: Added local variable for tool path
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 3546514791e159e94ba3baf73cc2bad65a7a0f20
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Sep 8 16:49:24 2015 +0100

    null_state_gen: add const to intel_batch_state_copy data
    
    The data is not modified by the function and is often declared const.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit fdecc1b5afbdcdb20fa98c642cea7fa1dc1a8944
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Sep 8 17:13:43 2015 +0100

    tools/aubdump: remove void pointer arithmetic
    
    A gcc extension allows void pointer arithmetic by treating the size of
    void as 1, but this generates a warning when -Wpointer-arith is used.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 2155d1eb546f1b4082374266323cbb709f1e6659
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Sep 11 15:27:32 2015 +0300

    tools/intel_bios_reader: Add MIPI device type
    
    Decode the MIPI [sic] device type.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit d8313c30021f039a5d9d380b28a7d20e0c70f1f8
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Sep 11 15:01:16 2015 +0300

    tools/intel_bios_reader: Decode the device type bits
    
    Each bit in the device type is supposed to mean something. Decode their
    meaning.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit a02305260eaba0da622cacc8308adbeffa467db7
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Sep 11 14:47:59 2015 +0300

    tools/intel_bios_reader: Print the child dev handle
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit b701bb14c6fc82edfb07c2f6087b96e36dd48efe
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Mar 25 20:23:30 2015 +0200

    intel_bios_reader: Don't explode looking for the devid
    
    Check that the offset where expect to find the device id is withing the
    BIOS image, instead of accessing whatever (if anything) happens to be
    there.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit b1e756451c59b342a9d15433379bf543ddedd56b
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Mar 25 13:36:52 2015 +0200

    intel_bios_reader: Read the child device size from VBT
    
    New stuff has been added to the end of the child device block at various
    times, so using a hardcoded size for the block is a bad idea.
    Fortunately the size of the block is listed in the VBT just before the
    blocks themselves, so grab it from there.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit c137ac71584467424f8a7bbb40825fa6250093c5
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Sep 9 17:00:56 2015 +0300

    tools/intel_display_poller: Align DSPSURF to 128k to appease gen4/vlv/chv
    
    gen4/vlv/chv require DSPSURF to be 128k aligned. Try to respect that
    in order to avoid ugly glitches.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit a8b85ea21b053145527a848b51b57f5c0cfa003e
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Sep 9 16:47:29 2015 +0300

    tools/intel_display_poller: Make pipe name alphabetic
    
    Instead of raw numbers the user can now specify the pipe
    as 'a',b'... or 'A','B'...
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 01a2a4d85d71b1b7f6f4d5239d207b821ae01b55
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Aug 19 17:00:09 2015 +0300

    tools/intel_display_poller: Try to fix pipe<->plane handling on gen2/3
    
    Check the pipe assignment for each plane (excluding plane C since the
    kernel doesn't use that one) and pick the first one that's assigned to
    the target pipe.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit ba139493a6f8e35ba6cecd5058ff93fb12848465
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Jun 5 17:09:25 2015 +0300

    tools/intel_display_poller: Add CHV support
    
    Add CHV support by adding a pipe_offset[] thingy (like we have in the
    kernel) to deal with the wonky register offsets.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 7d2f1d7d9ed44d45b91ebdda9fe25d90cbaa92ab
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Aug 19 17:34:45 2015 +0300

    tools/intel_reg: Print the potential port names in the help text
    
    v2: Repaint with Jani's favorite color
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit fb8131545f386348403fba32dc22c79b4aa110af
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Aug 19 17:12:14 2015 +0300

    tools/intel_reg: Set register stride to 1 for VGA registers
    
    VGA registers are generally 8 bits long, so set the stride to 1 byte.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 88fed9fbca693834ae2e636adc7941cee57930d7
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Fri Aug 28 17:51:45 2015 +0300

    tools/intel_reg: Use pci device from config on write
    
    Use the pre configured pci device from config also
    in write path.
    
    Cc: Jani Nikula <jani.nikula@intel.com>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Reviewed-by: Jani Nikula <jani.nikula@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 6eed1b5eb4ba09435c9b4cd63fb302121009c188
Author: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
Date:   Wed Aug 26 11:29:06 2015 +0300

    kms_addfb_basic: Require fb modifiers for unused field tests
    
    The drm core doesn't check unused fields of ADDFB2 for pre-FB_MODIFIERS
    userspace, so use igt_require_fb_modifiers(). Also, the size of the
    ioctl changed with the addition of the modifiers, so it is necessary to
    use the LOCAL_ version of it, otherwise some data may get truncated.
    
    v2: Improve commit message. (Thomas)
        Remove one spurious change to use LOCAL_DRM_IOCTL_ADDFB2. (Thomas)
    
    Signed-off-by: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 2269997cff0f7700566f80359971a723d0b0212b
Author: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
Date:   Thu Sep 3 17:13:58 2015 +0100

    tests/gem_bad_reloc: use correct page table size
    
    2 subparts of gem_bad_reloc check that the reloc address is below the
    global gtt boundary. However, when executing from ppgtt the reloc
    address can be greater than that and still be a valid address.
    
    To be sure that we're using the right upper limit, select it based on
    the ppgtt mode.
    
    Cc: Michel Thierry <michel.thierry@intel.com>
    Signed-off-by: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
    Reviewed-by: Michel Thierry <michel.thierry@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit b04691b3e8e62bd105f0f4d8d3b9e7da187f0c90
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Sep 8 11:16:46 2015 +0100

    tests/gem_pwrite_snooped: disable const cast warning
    
    Disable -Wcast-qual temporarily to allow memchr_inv to return non-const
    data (similar to memchr), without causing a compiler warning.
    
    Cc: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 84cfa9e4d271dddd4211ed9a3b94549934fa8819
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Sep 7 14:59:54 2015 +0100

    tests: remove gem_storedw_loop_* tests
    
    These have been replaced by subtests in gem_storedw_loop.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1dcace30184c812f1e12ee10cc827accce140cc0
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Sep 7 11:32:05 2015 +0100

    build: fix unused-result warnings
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit f0381d1abebfc5b7e24a835dfe1c2344396c0304
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Sep 7 09:26:01 2015 +0100

    lib: various documentation fixes
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit de2470ea4fb7b7df698e0f7651cb250707709c05
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Sep 7 16:05:11 2015 +0100

    intel_reg: ensure "intel_reg help" always works
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 9ecb50e5c55c4d287f9f083b41d5e51b6a9d9ad2
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Sep 4 14:46:45 2015 +0100

    tools: install the register definition files
    
    Install the register definition files and use them by default in
    intel_reg.
    
    v2: remove redundant path check
    
    Suggested-by: Jani Nikula <jani.nikula@linux.intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit af9791849467a3437e0920c8f08c5a646302da7d
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Aug 25 11:30:11 2015 +0100

    tools: remove quick_dump
    
    Remove quick_dump as it has been replaced by the intel_reg tool and move
    the register definition files to tools/registers.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>
    Acked-by: Jani Nikula <jani.nikula@intel.com>

commit 2142a15d49f85175677ff360833869afe9c79b58
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Sep 3 09:56:18 2015 +0100

    tests/gem_storedw_loop: remove redundant ppgtt check
    
    All tests require ppgtt, so checking for it later on has no effect.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 673aab8a0afd538463fa96da263e56537f413dfd
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Aug 25 16:23:28 2015 +0100

    tests/gem_storedw_loop: skip on gen6 bsd
    
    MI_STORE_DATA is broken on gen6 bsd.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit b9d27f03c7cdfdb66734b5164916a501dd787036
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Aug 26 12:05:13 2015 +0100

    tools/null_state_gen: fix various compiler warnings
    
    Add the debug and warning flags to cflags and fix the resulting issues.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 4ee6709e3bd98eb52f4c4c22f58fecf9750f26eb
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Aug 27 14:34:08 2015 +0100

    tests/tools: add --as-needed to linker flags
    
    Add --as-needed to the linker flags to reduce the number of shared
    library dependencies, since not all the tests and tools use all the
    libraries required by the helper library (for example, many tests do not
    use cairo). This helps portability of the binaries and also makes a
    very small improvement to the execution speed and memory consumption.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 88cbb41ade5a66f96b7cd3844ce86f43d192afa0
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Aug 25 10:34:46 2015 +0100

    lib/gpgpu_fill.c: fix file permissions
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 4c63f54de9b7f0a6d49807c15c63e952ac4afdf8
Author: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
Date:   Fri Aug 21 16:49:33 2015 +0300

    gem_storedw_loop: Skip test if device doesn't have requested ring
    
    The VEBOX ring is not available in generations before Haswell, so make
    tests that use it skip instead of fail in previous gens.
    
    Signed-off-by: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit d3d56bf2afb45fb8a5f5dabbf41ced53d21252f3
Author: Tim Gore <tim.gore@intel.com>
Date:   Wed Aug 19 12:10:16 2015 +0100

    tests/gem_ctx_exec.c: only hang the ring we are testing
    
    In the reset-pin-leak test we were calling
    igt_set_stop_rings(STOP_RING_DEFAULTS) which sets the
    stop_rings bits for all gpu engines. But we only submit
    work to the render engine. When TDR is enabled (as it is
    in Android currently) only the render engine gets reset,
    which clears the stop_rings bit for the render engine but
    not for the other engines. This causes the test to fail on
    the second iteration because stop_rings is not clear.
    
    So just set the stop_rings bit for the engine we are going
    to hang, namely the render engine.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 71b85f9713cd48d589f607afc81d090b2afc2ed4
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Aug 24 18:22:04 2015 -0300

    kms_frontbuffer_tracking: print the status when it's not what we expect
    
    Printing the status on an unexpected failure is always the first thing
    I do. So do this always.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit a07d0a47be984ccb93c6bd968905bd13b7a3cfd9
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Aug 24 18:01:47 2015 -0300

    kms_frontbuffer_tracking: add slow_draw() subtest
    
    It fails on my SKL machine.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 229110442a4814b87859e2833688feb2881a2274
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Aug 24 17:04:25 2015 -0300

    kms_frontbuffer_tracking: wait for PSR to be HW Enabled & Active
    
    Make sure PSR is fully there.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit c1fe951b8a08a4a42ede295cfa478cca8e230c22
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Aug 24 17:02:12 2015 -0300

    kms_frontbuffer_tracking: add options for setting the shared fb X/Y
    
    I'm using this to debug some aspects of the GTT tracking.
    
    While at it, do a small rename and fix the ASCII art.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 5e68ad9f8223f721c03f9915ac909ccab8a1433a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 21 22:26:42 2015 +0100

    benchmarks/gem_exec_reloc: Allow profiling 0 relocs
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 05f5e16eafb400669524265d1a506c0e6ae18c53
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Aug 21 14:13:16 2015 +0100

    lib: fix distcheck issues
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 804e11f40defc1c53722914a449c6b2dcdbbf9a2
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Aug 17 17:57:43 2015 +0100

    lib: add a single include header
    
    Add a header that includes all the headers for the library. This allows
    reorganisation of the library without affecting programs using it and
    also simplifies the headers that need to be included to use the library.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit a11879a4ab8840dae96867445ac27d100fc798d9
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Aug 17 15:27:18 2015 +0100

    assembler: remove built sources with make clean
    
    Built sources are generated by "make all", so should be removed by "make
    clean". This also ensures "distcleancheck" passes.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit c37b2352020accd261e28d71ad71e96d62d6ddb5
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Tue Aug 18 17:44:38 2015 +0300

    tests/drv_hangman: Adjust to 64bit bb offsets
    
    commit e1f123257a1f7d3af36a31a0fb2d4c6f40039fed
    Author: Michel Thierry <michel.thierry@intel.com>
    Date:   Wed Jul 29 17:23:56 2015 +0100
    
        drm/i915: Expand error state's address width to 64b
    
    changed the batch buffer address to be 64b. Fix the parsing
    of gtt offset accordingly.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=91638
    Cc: Akash Goel <akash.goel@intel.com>
    Cc: Michel Thierry <michel.thierry@intel.com>
    Reviewed-by: Michel Thierry <michel.thierry@intel.com>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 0e25e5d92dd4303deb46f0a70dd097676e2842a8
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Thu Jun 18 15:17:47 2015 +0300

    igt: remove deprecated reg access tools in favor of intel_reg
    
    intel_iosf_sb_read, intel_iosf_sb_write, intel_reg_dumper,
    intel_reg_read, intel_reg_snapshot, intel_reg_write, intel_vga_read, and
    intel_vga_write have been deprecated in favor of intel_reg. Remove the
    deprecated tools. intel_reg does everything they do, and more.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 9b73ce43fecc71533603849f35dd3bd1233a0eea
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Aug 16 12:12:53 2015 +0100

    overlay: Fix min frequency detection on BYT/BSW
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 64590c7b768dc8d8dd962f812d5ff5a39e7e8b54
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Aug 14 16:08:07 2015 -0300

    kms_frontbuffer_tracking: reduce the FBC wait timeout to 2s
    
    Just like we did for PSR, let's do it for FBC. FBC gets reenabled in
    just 50ms, so the 5000ms timeout is huge. On the other hand, we only
    pay the 5000ms timeout full price 9 times when running
    kms_frontbuffer_tracking --fbc-only, so this change shouldn't save too
    much time.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit f4db3b18841263f8f617a9f7f0aaf14fab7196d1
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Aug 14 15:56:34 2015 -0300

    kms_frontbuffer_tracking: reduce the PSR wait timeout to 2s
    
    PSR only takes up to 100ms to be enabled, but we were using 5000ms
    timeouts. The problem with PSR is that the MMAP_GTT tests have to
    assert that PSR is disabled and stays disabled during the whole
    timeout, so that 5s cost is a little to high when we consider that we
    do the full 5s wait 74 times when running kms_frontbuffer_tracking
    --psr-only.
    
    By reducing to 2s we still make sure we're safe, since we're waiting
    20x the time PSR needs to get reenabled, and we reduce the runtime of
    running kms_frontbuffer_tracking --psr-only from 14m10s to 10m29s.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 77b8af218cd2648f4d3ff671126c9d2500cade6e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 14 20:35:18 2015 +0100

    benchmark/gem_exec_trace: Inline everything
    
    Avoid the globals and make the dispatch one huge function and hope GCC
    works some magic.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a64e6c39b13c2a59d807cab9d4faefd4aaa49d0c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 14 20:31:48 2015 +0100

    benchmark/gem_exec_tracer: Tweak to handle SNA
    
    SNA starts by feeding in deliberately bad ioctls in order to detect the
    kernel interface versions. A quick solution is to always feed it to the
    ioctl and only record the trace if it is valid.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 78120d8158555fd393eb73e7dc992388b6d03f05
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Aug 12 15:42:15 2015 -0300

    kms_frontbuffer_tracking: add subtests for rgb565 and rgb101010
    
    Make sure valid formats work properly and invalid formats keep the
    features disabled.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit c3fb972ee9616d62f16d311fffdcb06c44ec46ec
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Aug 14 14:48:38 2015 -0300

    kms_frontbuffer_tracking: fix psr-farfromfence assertions
    
    We're using GTT draws and they disable PSR. This test is mostly for
    FBC anyway.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit d675cf3ed7c7099fe8fa42e3f27d8fc200852275
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Aug 14 14:09:08 2015 -0300

    kms_frontbuffer_tracking: split prepare_subtest() in two functions
    
    And remove duplicated code by calling prepare_subtest_data() on
    rte_subtest().
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 6de5b0611245c4949b5655890b47905eea71c34a
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Aug 14 10:43:21 2015 -0300

    kms_frontbuffer_tracking: remove duplicated pairs on multidraw
    
    If we already tested the combination of m1+m2, don't test m2+m1 later:
    the drawing pattern used already has 4 squares, so we're already
    testing the "m2 followed by m1" case.
    
    This should reduce the test time from about 60s to about 30s.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit a2904ead7487c6eba5d3ea8b93d7a9f45e883355
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Jul 21 11:02:26 2015 -0300

    kms_frontbuffer_tracking: SKIP if not enough stolen is available
    
    This is not an FBC bug.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit f62a683acd1b8eb7626b9b1251e4c4e860f8c2f7
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Aug 12 16:22:57 2015 -0300

    kms_frontbuffer_tracking: use all drawing methods on multidraw_subtest
    
    Instead of having a single pair of methods per subtest. Having this in
    pairs is not very useful since we end doing all the drawing methods
    per subtest anyway.
    
    This saves a few modesets, which makes eDP slightly faster - about 22s
    on my local machine.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit b53bcf789b2619d786b25effcc83a461aaf0610b
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Aug 12 11:50:58 2015 -0300

    kms_frontbuffer_tracking: improve support for multiple pixel formats
    
    We now have per-pixel-format FBs and CRC values. Also t->format to
    indicate the format we're using on the subtest. We still only use the
    default RGB888 format (AKA FORMAT_DEFAULT) for all tests since
    multiplying the current number of tests by the number of new pixel
    formats doesn't sound like a great idea.
    
    With this, it should be really easy to add new tests that use
    different pixel formats.
    
    Also, if you want a full IGT run on a specific pixel format, all you
    need to do is to change FORMAT_DEFAULT.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 3b176007899e81aa6254131d09a9693b13bdbcd6
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Aug 11 15:40:35 2015 -0300

    kms_frontbuffer_tracking: add information about more formats
    
    We're not using those formats yet, but a simple change to create_fb()
    allows us to use these formats without problems now.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 606f039decec8623250979beb6f141ce4fa2f13c
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Aug 11 11:50:12 2015 -0300

    kms_frontbuffer_tracking: introduce enum color
    
    We want to add support for different pixel formats and the current
    hardcoded pixel values won't work with that. So add enum color and
    its auxiliary functions so we can decide the pixel values based on the
    chosen color enum.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 7009b10c429c33ea7258997901ee8ec1c67f75c7
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Aug 11 10:36:46 2015 -0300

    kms_frontbuffer_tracking: don't pass the format to create_fb()
    
    It is create_fb() who is going to decide the buffer format based on
    the arguments provided by the caller. This is another step for the
    non-XRGB8888 support.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit e4b94900b560e38b8a8e1ff672a53621688f5987
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Aug 11 10:26:46 2015 -0300

    kms_frontbuffer_tracking: add a wrapper for igt_create_fb()
    
    The wrapper will do a few additional things when we add support for
    formats different than XRGB8888.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 445182f26bd48bfefdec7064a7f4afafc8f52a1e
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Aug 13 19:02:34 2015 -0300

    kms_frontbuffer_tracking: fix MMAP_WC assertions on PSR
    
    Now that the MMAP_WC operations call the dirty ioctl, PSR gets
    reenabled after some time. So we have to adjust op_disables_psr() to
    take that into account.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 9113c9aa9be5626d4d12a794c70860097ae59c1f
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Aug 13 17:37:06 2015 -0300

    lib/igt_draw: break if we already wrote every pixel
    
    Due to the nature of accessing a tiled buffer in an untiled way, we
    used to loop through the whole buffer all the time. Add a small
    mechanism to just break in case we know we already wrote every pixel
    we should have written.
    
    On kms_frontbuffer_tracknig/fbc-2p-primscrn-pri-shrfb-draw-pwrite
    (with a 3200x1800 primary screen and a 1920x1080 secondary screen), I
    could reduce the runtime from ~7.53s to ~6.01s.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 9194f4efdf89d9c2e9ab79a232e642b8664fa54f
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Aug 13 17:25:31 2015 -0300

    lib/igt_draw: fix pwrite_tiled()
    
    Don't forget to flush in case we're in the last iteration of the loop.
    This fixes failures of kms_frontbuffer_tracking when used with
    --use-small-modes on eDP monitors.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit caaf3b869f2be2758ba836244f07ad25c35ec7d5
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Aug 3 14:41:35 2015 -0300

    lib/igt_draw: add support for RGB565 and XRGB2101010
    
    We need to test those pixel formats on the FBC code, so let's make
    sure the drawing library works on them first.
    
    v2: Update the gtkdoc (Daniel).
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit a1fce7490c72c45c79cff89a39dee0b59a8f4c71
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Aug 13 13:49:42 2015 -0300

    lib/igt_core: use print("%s", #expr) instead of print(#expr)
    
    If I have a program with the following:
    
        igt_skip_on(i % 2 == 0);
        igt_skip_on_f(i % 2 == 0, "i:%d\n", i);
        igt_require(i % 2 == 0);
        igt_require_f(i % 2 == 0, "i:%d\n", i);
    
    then I'll get compiler error messages complaining about format
    conversions related to the '%' character used in the mod operation. So
    put the whole string as a %s argument to avoid interpreting '%' and
    any other possible chars.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 87a5f2d7762b5b8398c5f5899d796bb78dc827b7
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Thu Aug 13 13:28:38 2015 -0700

    tests/kms_setmode: mark simple clone test as basic
    
    Should cover simple, single CRTC mode sets.
    
    Reviewed-by: Daniel Vetter <daniel@ffwll.ch>
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit e5839d240aa7adf759b39043f7d16f53e30a8da7
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Thu Aug 13 13:26:30 2015 -0700

    tests/kms_flip: add basic tests for flip, flip vs dpms, and flip modeset v2
    
    Simple variants that don't do multiple output or interruptible testing.
    
    v2: add vblank variant, remove duplication (Daniel)
    
    Reviewed-by: Daniel Vetter <daniel@ffwll.ch>
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit 5134f2c96d53db6ac37a4d0311eb9808ae20a80e
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Thu Aug 13 13:14:12 2015 -0700

    tests/pm_rpm: mark RTE and D3 tests as basic
    
    These always need to pass for basic PM functionality.
    
    Reviewed-by: Daniel Vetter <daniel@ffwll.ch>
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit 68d1b532fae03768012d0c16a2c0dd03eea64fcb
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Thu Aug 13 13:13:23 2015 -0700

    tests/pm_backlight: mark simple test as basic
    
    We should be able to adjust the backlight and observe changes in sysfs.
    
    Reviewed-by: Daniel Vetter <daniel@ffwll.ch>
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit ec4b76872d232faa7846e7c201e7fcfc98c682a9
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Thu Aug 13 13:12:06 2015 -0700

    tests/kms_addfb: mark simple fb creation tests as basic v2
    
    We should always be able to create simple and tiled objects.
    
    v2: make the whole test basic (Daniel)
        add to .gitignore
    
    Reviewed-by: Daniel Vetter <daniel@ffwll.ch>
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit 503420944d7359ea280f6445186bedcdfaceb698
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Fri Aug 14 08:45:08 2015 -0700

    tests/gem_tiled_pread: mark normal tests as basic v2
    
    These simple tests should always pass.
    
    v2: drop pwrite variant as it's more of a stress test (Daniel)
        add to .gitignore
    
    Reviewed-by: Daniel Vetter <daniel@ffwll.ch>
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit 5001640718d29daa8619647eff45f9e3e74fd151
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Thu Aug 13 13:08:52 2015 -0700

    tests/gem_pread/pwrite: mark normal tests as basic
    
    These should always pass.
    
    Reviewed-by: Daniel Vetter <daniel@ffwll.ch>
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit c51c1ed7761082b99f2f39efcf43ee8e4df2c6ae
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Thu Aug 13 13:07:34 2015 -0700

    tests/gem_mmap_gtt: mark basic access and copy tests as basic v2
    
    These ones should always pass and are fairly quick.
    
    v2: add more tests (Daniel)
    
    Reviewed-by: Daniel Vetter <daniel@ffwll.ch>
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit 90c47b294741089a25480e1ef73ec4d0cc5d666c
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Thu Aug 13 13:05:34 2015 -0700

    tests/gem_mmap: mark basic object creation tests as basic
    
    We should be able to create small and moderate sized objects quickly and
    without errors.
    
    Reviewed-by: Daniel Vetter <daniel@ffwll.ch>
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit b0d8d73d8b7e5befd613e49610cb22287a8a60f2
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Thu Aug 13 12:58:25 2015 -0700

    tests/drv_getparams: mark EU and subslice fetch as basic v2
    
    Fundamental and simple functionality.
    
    v2: make whole test basic (Daniel)
        add to .gitignore
    
    Reviewed-by: Daniel Vetter <daniel@ffwll.ch>
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit e920d719b20f3b79e2c70dc59ae3f9858b65a639
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Thu Aug 13 12:57:22 2015 -0700

    tests/gem_flink, prime_self_import: mark flink and prime tests as basic v2
    
    They're testing basic functionality and don't involve stress or race
    induction.
    
    v2: use gem_flink and prime_self_import tests instead (Daniel)
        add to .gitignore
    
    Reviewed-by: Daniel Vetter <daniel@ffwll.ch>
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit dc9505a405cd6232f4dd6e7d7243a3df497b2f32
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Wed Aug 5 16:09:35 2015 -0700

    tests/drv_module_reload_basic: use linear_blits after module_reload for sanity check
    
    Reduces runtime a lot...
    
    Reviewed-by: Daniel Vetter <daniel@ffwll.ch>
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit 4409c8328442790317fb08503b646611dc807ced
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Wed Aug 5 16:09:17 2015 -0700

    tests/drv_module_reload: rename drv_module_reload to include in BATs
    
    Absolutely-acked-by: Daniel Vetter <daniel@ffwll.ch>
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit 0679702150157706a6def66b893b29c16345f4db
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Wed Aug 5 16:06:31 2015 -0700

    tests/gem_storedw_loop: add new store_dword test to unify per-ring ones v2
    
    There was a lot of duplication going on...  Mark as basic while we're at
    it as these should never fail.
    
    v2: add to .gitignore
    
    Reviewed-by: Daniel Vetter <daniel@ffwll.ch>
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit d568f69d5da9e4cc7bb7f1c405b3b8a17ac77fe3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 14 13:40:01 2015 +0100

    igt/gem_mmap: Add one more extra large bo
    
    Daniel complained that all the tests in gem_mmap.c were too quick. This
    one aims to rectify that by double checking that if we mmap a buffer
    larger enough to force swapping, everything still works.
    
    Also fix the test to exercise the different object sizes!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8af62be2ada2d4a2c618a48548f4248ef397582f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 14 14:04:54 2015 +0100

    lib: Allow caller to use uint64_t sizes with intel_require_memory()
    
    Allow the caller to ask how many extra large objects can be created and
    still fit into memory.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5c07135b7bd23ce0beae67cfd8a71ac63f543859
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Thu Aug 13 15:51:16 2015 +0300

    tools/null_state/gen9: Send all components in VF state
    
    Fix
    
    commit 59cdc16b1a6f069f944ff17851a59edf8f72d45d
    Author: Arun Siluvery <arun.siluvery@linux.intel.com>
    Date:   Fri Jul 31 16:27:07 2015 +0100
    
        tools/null_state/gen9: Send atleast one valid component in VF state
    
    to honor the Reviewed-by, send all four components as noted by
    Ben in his review.
    
    Cc: Ben Widawsky <benjamin.widawsky@intel.com>
    Cc: Arun Siluvery <arun.siluvery@linux.intel.com>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit c049096eb627661182f76bc5d99b8c17c1e8b3d3
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Aug 12 19:31:52 2015 -0300

    kms_frontbuffer_tracking: don't test SPR or CUR on multidraw
    
    The goal of the multidraw subtest is to check if alternating drawing
    methods can somehow break the feature. The plane we're drawing to
    really shouldn't matter here - we have other tests to make sure
    drawing on the different planes works correctly. So after this patch
    we'll only run the multidraw subtest for the primary plane, not for
    sprite and cursors anymore.
    
    This makes "--no-edp --fbc-only --1p-only" go from 2m29s to 1m40s on
    my machine.
    
    Of course, we can still run these tests with the --show-hidden flag.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 78d076268cfb0319f9f44678905ac1a9ac989951
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Aug 12 16:49:11 2015 -0300

    kms_frontbuffer_tracking: don't test CUR or SPR planes on FBS_SHARED
    
    We already tested these planes for FBS_INDIVIDUAL, and there are no
    reasons to believe those planes will behave differently under
    FBS_SHARED, so save some time avoiding potentially useless tests.
    
    This makes "--no-edp --fbc-only --1p-only" go from 2m49s to 2m29s on
    my machine.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 59cdc16b1a6f069f944ff17851a59edf8f72d45d
Author: Arun Siluvery <arun.siluvery@linux.intel.com>
Date:   Fri Jul 31 16:27:07 2015 +0100

    tools/null_state/gen9: Send atleast one valid component in VF state
    
    A programming restriction exists for this instruction, atleast one component
    of one valid vertex element must be enabled.
    
    Cc: Ben Widawsky <benjamin.widawsky@intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Arun Siluvery <arun.siluvery@linux.intel.com>
    Reviewed-by: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit dd82494724c1c11ceeeaac66a2ed0113ec13f8e4
Author: Arun Siluvery <arun.siluvery@linux.intel.com>
Date:   Wed Aug 12 12:26:01 2015 +0100

    lib/rendercopy_gen9: Setup Push constant pointer before sending BTP commands
    
    From Gen9, by default push constant command is not committed to the shader unit
    untill the corresponding shader's BTP_* command is parsed. This is the
    behaviour when set shader is enabled. This patch updates the batch to follow
    this requirement otherwise it results in gpu hang.
    
    Set shader need to be disabled if legacy behaviour is required.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=89959
    Cc: Ben Widawsky <benjamin.widawsky@intel.com>
    Cc: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
    Cc: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Arun Siluvery <arun.siluvery@linux.intel.com>
    Tested-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Reviewed-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 8a68ec14536c802b2d869f2356d978346bf234f4
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Tue Aug 11 15:25:37 2015 +0300

    lib/rendercopy_gen9: WaBindlessSurfaceStateModifyEnable
    
    Don't set the size of bindless surface state on rendercopy.
    And as of doing so, take into account the workaround for setting
    the command size.
    
    This was tried during hunting for
    https://bugs.freedesktop.org/show_bug.cgi?id=89959. But no
    impact was found.
    
    Cc: Arun Siluvery <arun.siluvery@linux.intel.com>
    Reviewed-by: Arun Siluvery <arun.siluvery@linux.intel.com>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit d524a964fc88ec52002609d15cb8ccfc50cbc18a
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Thu Aug 13 11:27:35 2015 +0100

    benckmarks/Android.mk: Fix building benchmarks for Android
    
    The commit "benchmarks: Do not install to system-wide bin/" changed
    the benchmark file list from bin_PROGRAMS to benchmarks_PROGRAMS.
    However Android.mk was not updated, resulting in IGT failing to
    build for Android.
    This commit adds that change. It also adds LOCAL_MODULE_PATH to
    specify where the built benchmarks should be put.
    
    v2: I discovered that the existing definitions of LOCAL_MODULE_PATH
    were creating what should have been an invalid path. Not sure how it
    was ever working previously, but fixed now.
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 33bc41aa4108a0177372004d0b8f689e22bbd5ff
Author: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>
Date:   Mon Aug 10 15:40:04 2015 -0700

    aubdump: Write header after figuring out the gen
    
    We have to defer figuring out the gen until we have a PCI ID, which we
    don't have for sure until the first execbuffer2 ioctl. We can't write
    the file header until we have the gen since we need to know the size of
    offsets in the file format.  Move the call to write_header() into the
    dump_execbuffer2() where we have the gen.
    
    Signed-off-by: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>

commit 3156305aceb790d410580ea44f145119359292e6
Author: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>
Date:   Mon Aug 10 15:37:47 2015 -0700

    aubdump: Handle 48 bit ppgtt dumping
    
    Put 48 bit block offsets in the AUB file and track the bo offsets with
    uint64_t.
    
    Signed-off-by: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>

commit 8a7c386f0a302be1c099804ab67f32c6965d3c7d
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Aug 12 16:33:09 2015 +0100

    tests: update .gitignore
    
    Add missing entry to .gitignore and sort alphabetically.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit a149fb238a38bd663171a19c8b3a536fbae158db
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Aug 11 19:11:12 2015 +0300

    tests/gem_pwrite_snooped: Verify set_caching vs. pwrite clflush behaviour
    
    The test does the following
    1. set_domain src GTT
    2. set_caching src NONE
    3. pwrite src
    4. set_caching src CACHED
    5. blt src->dst
    6. pread dst
    7. verify data matches
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 62426feec5343603ee67dd296674edda1871a7fb
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Jul 21 13:56:20 2015 +0300

    tests/kms_pwrite_crc: Use drmModeSetPlane() instead of igt_plane_set_fb()
    
    igt_plane_set_fb()+igt_display_commit() have too much overhead, and that
    causes the cache to get flushed before we flip, making the test
    useless, at least on machines with small LLC. Switch to
    drmModeSetPlane() to reduce the chance that the cache gets flushed
    before we grab the crc.
    
    Still nowhere near 100% reliable on my IVB laptop with 3 MiB LLC,
    but at least it can now hit the problem occasioanally. My desktop
    IVB with 8 MiB LLC seems to hit it rather reliably.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit adfc294384d2ee20d085e98f249fe73d1f4c4055
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Aug 7 19:27:30 2015 +0200

    tests: Document ABI extension catchers
    
    Our invalid-flags/params testcases are meant to catch abi extensions
    by just testing for the next available flag/param. Unfortunately we
    need that since without those we forgot to write testcases for these
    new flags way too often :(
    
    But it's not entirely clear why this is, so document this trick with
    comments.
    
    Also gem_wait wasn't this paranoid, so change the testcase to be so.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 5b0a8433fd0ff35062f0b1d3f50f5e04e76b576b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Aug 7 19:12:07 2015 +0200

    lib/core: Add igt_reset_timeout
    
    Convenience wrapper suggested by Chris for igt_set_timeout(0, NULL).
    
    v2: While at it add an empty line in kms_flip to make
    set/reset_timeout a visual block.
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 370c9897230b4d4973d0a2ab641901081108d97b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Aug 7 19:01:23 2015 +0200

    lib/core: Add optional reason for timeout failure
    
    "Timed out" isn't a terribly informative message, allow users to set
    something more informative. Inspired by a request from Jesse.
    
    Cc: Jesse Barnes <jbarnes@virtuousgeek.org>
    Reviewed-by: Jesse Barnes <jbarnes@virtuousgeek.org>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 24617ef82a4c58766675b3f1e4c194ca37fe9744
Author: David Weinehall <david.weinehall@linux.intel.com>
Date:   Fri Aug 7 15:53:57 2015 +0300

    tests/gem_ctx_param_basic: support NO_ZEROMAP
    
    Signed-off-by: David Weinehall <david.weinehall@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 38b3bd6b7c09cdd8041e6b775933f69e0141efd3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 11 12:57:38 2015 +0100

    benchmarks: Add a microbenchmark for relocation overhead
    
    Allow specification of the many different busyness modes and relocation
    interfaces, along with the number of buffers to use and relocations.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 98bcc18572f914b27cda07fc1ceae5b48a74fe51
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Aug 10 18:51:03 2015 +0100

    benchmarks/gem_exec_trace: Unmap each trace after replay
    
    Just on the off chance someone is replaying a bunch of traces, remember
    to cleanup up.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b483e68173465408649e11122ee78060af9394f7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Aug 10 18:45:00 2015 +0100

    benchmarks/gem_exec_trace: Mark the mmap as sequentially read
    
    Use madvise(MADV_SEQUENTIAL) to let the kernel optimise for our
    straightforward sequential read pattern.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3911621d0d23aced7feb1569b39f7fb52b309681
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Aug 10 18:17:47 2015 +0100

    benchmarks: Rename the gem_exec_trace tracer module
    
    Now that we actually install the benchmarks into a sane location,
    slightly abuse it to put the tracer for gem_exec_trace alongside.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d9462e61f9b43828d6132679485a92108b60b2c8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Aug 10 16:08:31 2015 +0100

    benchmarks/gem_exec_trace: Clear all new bo handles
    
    When reallocing the bo array, remember to set the new entries to 0.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4c74a683c10ddfb2232cdb93f03c03295dde1201
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 24 14:13:49 2015 +0100

    benchmarks: Do not install to system-wide bin/
    
    These benchmarks are first-and-foremost development tools, not aimed at
    general users. As such they should not be installed into the system-wide
    bin/ directory, but installed into libexec/.
    
    v2: Now actually install beneath ${libexec}
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0393e7288ba3a640fcc9f0d8b15d7dee231a039c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Aug 9 17:39:41 2015 +0100

    benchmarks: Record and replay calls to EXECBUFFER2
    
    This slightly idealises the behaviour of clients with the aim of
    measuring the kernel overhead of different workloads. This test focuses
    on the cost of relocating batchbuffers.
    
    A trace file is generated with an LD_PRELOAD intercept around
    execbuffer, which we can then replay at our leisure. The replay replaces
    the real buffers with a set of empty ones so the only thing that the
    kernel has to do is parse the relocations. but without a real workload
    we lose the impact of having to rewrite active buffers.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 74a806808618dad614d7ffb61d4562915695bbf8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Aug 8 21:31:08 2015 +0100

    overlay: Handle execlists not setting the rings as active
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 06aed34d384fc348c4bb52f302bbcf2c6c68bb3c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Aug 8 20:54:49 2015 +0100

    overlay: Add Broadwell+ ids from kernel i915_pciids.h

commit 9c15167c611bbac1e702eb064044ec687bfa3703
Author: Kristian Høgsberg <krh@cryptic-dragon.jf.intel.com>
Date:   Fri Aug 7 14:57:19 2015 -0700

    tools/aubdump: Get PCI ID from getparam ioctl when we can
    
    Instead of doing an extra getparam ioctl to discover the PCI ID, we
    can snoop it when the application queries it.
    
    Signed-off-by: Kristian Høgsberg <krh@cryptic-dragon.jf.intel.com>

commit 5f4fad31829b1c6dfcddb633d65e9e7066818cff
Author: Kristian Høgsberg <krh@cryptic-dragon.jf.intel.com>
Date:   Fri Aug 7 14:51:27 2015 -0700

    tools/aubdump: Don't rely on open for discovering the drm fd
    
    DRI3 passes the drm fd over X protocol and as such we can't rely on
    hooking open to discover the drm fd. Instead we look for drm ioctl
    codes in the ioctl wrapper. If we don't have a drm fd and see
    something that looks like a drm ioctl, we stat the fd to see if it's a
    drm fd.  If it is, we save it for later so we don't have to do an
    extra stat on every ioctl.  We can then drop the open wrapper, but we
    keep the close wrapper so we can invalidate our cached drm_fd if it's
    closed.
    
    Signed-off-by: Kristian Høgsberg <krh@cryptic-dragon.jf.intel.com>

commit db0f28aee8b7f95a10139993096d60ba2a89c6a5
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Thu Aug 6 14:35:34 2015 -0700

    Revert "tests/gem_ctx_param_basic: fix invalid params"
    
    This reverts commit 0b45b0746f45deea11670a8b2c949776bbbef55c.
    
    We want to check against our local copy of the params so we can at least
    potentially catch new flag additions.
    
    Requested-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit 0b45b0746f45deea11670a8b2c949776bbbef55c
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Thu Aug 6 13:12:46 2015 -0700

    tests/gem_ctx_param_basic: fix invalid params
    
    Use -1 as the invalid param since we've added more since this test was
    created, causing expected EINVAL failures to return an unexpected error
    code.
    
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit 1ae1d290bf0b0c0f6a1e8f81d47c2a4f5a51714a
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Mon Jul 27 11:30:58 2015 +0100

    benchmarks/Android.mk, tools/Android.mk: Fix android build error
    
    Recently added tools / benckmarks have the same module name as
    existing tests. Android does not allow duplicate modules. This
    patch appends _benchmark and _tool to the module names used when
    building benckmarks and tools to prevent clashes with tests of
    the same name.
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 995f2738adece4f7423f9ce9ac34ab0477844840
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Jul 13 14:04:25 2015 -0300

    lib: add igt_debugfs_read()
    
    A helpful function for when you want to read a whole debugfs file to a
    string and don't want to worry about opening and closing file
    descriptors and asserting buffer sizes.
    
    We've been using this already for kms_frontbuffer_tracking and
    kms_fbcon_fbt, so the only test with new code here is kms_fbc_crc.
    
    Also notice that for kms_fbc_crc we had to increase the buffer size
    since the file can sometimes be bigger than 64 bytes - depending on
    the reason why FBC is disabled.
    
    Of course, there are probably many other programs we can patch, but
    I'm not doing this now.
    
    v2: Add the macro to wrap sizeof() (Daniel).
    v3: Add documentation for the macro too (Daniel).
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit ffd7321c701411c6ffb4aa5b983aacb92289908c
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Jul 8 16:00:45 2015 -0300

    kms_frontbuffer_tracking: use the dirty ioctl after MMAP_WC calls
    
    We can't add this to igt_draw since igt_draw doesn't care whether it's
    writing on a frontbuffer or not.
    
    PS: the ENOSYS is for Kernels without the patch implementing the
    IOCTL.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit cd33b47a47251eadd21815bfd2ecc8529c7bcf6d
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Aug 4 16:25:17 2015 -0300

    tests/gem_mmap_wc: don't fail if the Kernel is too old for the getparam flag
    
    Just don't check the drmIoctl() return code: the "if (val)" should be
    enough to prevent any problems.
    
    v2: Don't SKIP, just proceed (Chris).
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=89739
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 5f9bc98a55d8077f1b42e953d573c4e655832bfa
Author: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>
Date:   Wed Aug 5 11:55:09 2015 -0700

    configure.ac: Fix chmod on intel_aubdump the right way
    
    autoconf executes the init commands after each file it creates,
    causing these errors at configure time:
    
      ...
      chmod: cannot access 'tools/intel_aubdump': No such file or directory
      config.status: creating tools/Makefile
      chmod: cannot access 'tools/intel_aubdump': No such file or directory
      config.status: creating tools/intel_aubdump
      config.status: creating tools/quick_dump/Makefile
      ...
    
    Once it creates intel_aubdump, the errors go away. When I first added
    the chmod command, I already had a tools/intel_aubdump in my tree and
    didn't get the error.
    
    Split the intel_aubdump creation into its own AC_CONFIG_FILES()
    invocation to avoid this.
    
    Signed-off-by: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>

commit 78e2a2f245fa66773f34ea68bdbcc2c62d382a9b
Author: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>
Date:   Wed Aug 5 11:53:17 2015 -0700

    tools: Use right #include path for i915_drm.h
    
    pkg-config adds /usr/include/libdrm to the include path so we only need i915_drm.h
    
    Signed-off-by: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>

commit 86de4c60f38b0ff180cbaa64fcf992fc49546099
Author: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>
Date:   Tue Aug 4 15:11:51 2015 -0700

    configure.ac: Fix the intel_aubdump chmod to use topbuilddir
    
    Signed-off-by: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>

commit 220c7d1f91e590be74866710d786833938c18c40
Author: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>
Date:   Tue Aug 4 15:00:50 2015 -0700

    tools/aubdump: Add --device option for overriding device ID
    
    This lets us capture AUB traces for platforms different from the one
    we're running on.
    
    Signed-off-by: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>

commit f47bdba8b0504661b5d291a8639f156cda993379
Author: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>
Date:   Tue Aug 4 09:36:53 2015 -0700

    tools/aubdump.c: Also define struct drm_i915_gem_userptr for compatibility
    
    Oops, we obviously also need to define the argument struct for userptr.
    
    Signed-off-by: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>

commit e4fa17df026d6b5d68ee221d177049cdd1ad6924
Author: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>
Date:   Fri Jul 31 14:26:15 2015 -0700

    tools/aubdump: #define DRM_IOCTL_I915_GEM_USERPTR if kernel headers don't
    
    Fix compile error on older kernels.
    
    Signed-off-by: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>

commit 0b5faefba35ab05bfe637964e0e8fb1075e3dd0a
Author: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>
Date:   Fri Jul 31 13:44:07 2015 -0700

    tools: Add man page for intel_aubdump
    
    Signed-off-by: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>

commit e6a5d799fcdba567535a434789e107164072c15b
Author: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>
Date:   Wed Jul 29 23:12:16 2015 -0700

    tools: Add LD_PRELOAD-based AUB dumper tool
    
    This does everything the aub dump functionality in libdrm does, but
    without being part of libdrm.  This moves the very developer oriented
    functionality out of core libdrm and adds some flexibility in how we
    activate it (we can specify filename, for example).  Most importantly,
    this lets us dump aub files for tools and/or drivers that don't use
    libdrm, without having to add that code to each of those projects.
    
    The tool is used much like strace or valgrind.  For example:
    
      $ intel_aubdump -v --output=stuff.aub -- glxgears -geometry 500x500
    
    will launch glxgears with its options and enable aub dumping and pass
    the -v and --output=stuff.aub options to the aub dumper.
    
    Signed-off-by: Kristian Høgsberg Kristensen <kristian.h.kristensen@intel.com>

commit 6bd42ce9c74f2b6d27b0263191295de232050ab5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed May 20 16:50:14 2015 +0200

    tests/kms_addfb: Add testcass for garbage in unused planes
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 0591af9c76f21b1d9afd067adc6946799fc29179
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jul 28 20:02:54 2015 +0100

    igt/gem_streaming_writes: Reorder setting EXEC_OBJECT_WRITE
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=90944
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 40ebf95163dcb233b556bb97e9864497623d7328
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jul 28 18:59:47 2015 +0100

    igt/gem_streaming_writes: Bind into the GTT early
    
    If we are using a streaming GGTT write into the source, we need to
    trigger an early fault in order to obtain a mappable offset. This is
    required when later we start reserving execbuf object top-down to try
    and avoid mappable space!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cd306d4e650d5280a40b15fe076f41eba081c0a0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 24 18:54:11 2015 +0100

    benchmark: Measure allocation time for objects
    
    A basic measurement, how fast can we create and populate an object with
    backing storage?
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 42a386b83bf6693826432111fc7564254c14df95
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 24 16:34:26 2015 +0100

    benchmarks: Measure mmap fault latency
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e984d4965fa98b3071893143c65e6232ff4053ec
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jul 22 15:01:47 2015 +0100

    benchmarks: Benchmarkify gem_exec_ctx
    
    Measure the overhead of execution when doing nothing, switching between
    a pair of contexts, or creating a new context every time.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d49a868378f88685aadc601f9d5a9ae435565ece
Author: Michał Winiarski <michal.winiarski@intel.com>
Date:   Fri Jul 24 16:43:33 2015 +0200

    tests/drm_import_export: Add tests for prime/flink sharing races
    
    It is possible to race between unreference of the underlying BO and
    importing it from prime_fd/name. Verify that the behaviour of libdrm
    is consistent for prime/flink.
    
    v2: more comments in source file, dropped extra whitespace
    
    Signed-off-by: Michał Winiarski <michal.winiarski@intel.com>
    Cc: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit e14507ce987a0cfb0ba9dec39afcb08a9ebc0453
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 24 14:15:49 2015 +0100

    benchmarks: Add kms_vblank to .gitignore
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d88981f62bdcaafeb393bac22db6719d43de88c7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jul 23 15:18:22 2015 +0100

    benchmarks: Measure round-trip time for an immediate vblanks
    
    By measuring both the query and the event round trip time, we can make a
    reasonable estimate of how long it takes for the query to send the
    vblank following an interrupt.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit af510c249d6d374267a2052da202ea7c3a6b20cf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jul 23 12:27:38 2015 +0100

    benchmarks: gem_prw add the read/write switch to getopt
    
    In my haste to merge the two gem_pread/gem_pwrite, I forgot to write up
    the command line switch to getopt.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f8628a2c9808fe191c98111a1d58d728f8d20e90
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jul 22 16:53:34 2015 +0100

    benchmarks: Add simple mmap benchmarks
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f689e2aa813340eb499ffe04369647044887c073
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jul 22 16:53:34 2015 +0100

    benchmarks: Add simple pread/pwrite benchmarks
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b7c33e09394d8d59eac3d0fc581f7190e031947d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jul 22 15:01:47 2015 +0100

    benchmarks: Benchmarkify gem_exec_nop
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a64cf28719a0d23d611c72a0a7cf369562330de9
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jul 20 18:08:29 2015 +0100

    man: ensure rst files are included in the distribution tarball
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 367691297072d56f497a9b9f9c486c79bb5ecb16
Author: Dominik Zeromski <dominik.zeromski@intel.com>
Date:   Fri Jul 17 11:25:45 2015 +0200

    lib/gpgpu_fill: Add SKL support
    
    SKL changed state base address command.
    
    Cc: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Dominik Zeromski <dominik.zeromski@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit a017c2905a615d514ae38c8c624d70ef0b11be91
Author: Dominik Zeromski <dominik.zeromski@intel.com>
Date:   Fri Jul 17 11:25:44 2015 +0200

    lib/gpgpu_fill: Add BDW support
    
    BDW changed structure of surface state and interface descriptors.
    Commands like state base address, gpgpu walker were extended.
    
    Cc: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Dominik Zeromski <dominik.zeromski@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit ed816d560ce5a1d80a005a452ee0e4295ac1698f
Author: Dominik Zeromski <dominik.zeromski@intel.com>
Date:   Fri Jul 17 11:25:43 2015 +0200

    lib: Move gpgpu_fill code to separate file
    
    The gpgpu fill utility functions are used in separate test so it's
    logical to keep them in separate file. This is similar to what media
    spin test did in the past.
    
    Functionally only gpgpu kernel changed. Send instruction payload size
    was reduced. Since offset is incremented by 0x10 bytes there is no point
    in using larger writes.
    
    Cc: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Dominik Zeromski <dominik.zeromski@intel.com>
    [Thomas: Fix typo of gpgpu_fill.h in Makefile.sources]
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 3c294a8fa3a3692bab5abe579375edf96ee3b081
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Fri Jul 17 10:15:39 2015 +0100

    Android.mk: Disable tools that do not build for android
    
    Disable the tools / demo code that do not currently build
    for android until they can be fixed.
    
    Affected tools / demos
    intel_display_crc
    intel_sprite_on
    
    v2: intel_display_crc compiled conditionally on ANDROID_HAS_CAIRO
    flag.
    v3: removed intel_reg from the skip list as Thomas has prepared
    a patch to fix it for Android.
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit e65c69b995590ccd7f209b1e516819b1248d4e38
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Jul 16 17:39:59 2015 +0100

    lib: exit immediately if igt_fail is called in an exit handler
    
    Exit immediately if the test is already exiting and igt_fail is called.
    This can happen if an igt_assert fails in an exit handler.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=91349
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 51576b7ad67074bbee6da0e0ff96d783dbd4ea3f
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Jul 16 11:53:11 2015 +0100

    tools/Android.mk: add any extra program sources
    
    v2: remove unintended change and fix source file duplication errors
        (Derek Morton)
    
    Cc: Derek Morton <derek.j.morton@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 80f1553780d0d167cca8bd456a7deb3ff5d9e58e
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Jul 16 11:41:32 2015 +0100

    intel_reg: support platforms without sys/io.h
    
    Based on an idea from Jani Nikula.
    
    Cc: Jani Nikula <jani.nikula@intel.com>
    Cc: Derek Morton <derek.j.morton@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 0705ce6d15320a153c137b4a2119496a7f9c49f1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jul 19 18:08:20 2015 +0100

    igt/stats: Fixup tests to compile after interface changes
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d9c3f0b50cd4f27191a721fe64f47fdc0754f9ef
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jul 19 12:44:59 2015 +0100

    tools: Add a simple stats generator 'igt_stats'
    
    A rudimentary tool on top of the igt_stats library. Reads a list of
    numbers from stdin or from a file and prints the estimate of the central
    location, aka average.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8506cdcaa59ba90fcccda762d9307528d9f4c5c7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jul 19 15:01:42 2015 +0100

    lib: Allow storing floating point values in igt_stats
    
    We don't always have precise integers with which to store, so allow
    degrading to double precision floating point based on available input.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit fdefdd48f61b39d2af825ccdba11fafcaf58031a
Author: Michał Winiarski <michal.winiarski@intel.com>
Date:   Thu Jul 16 13:19:09 2015 +0200

    tests/gem_reg_read: Extend and check for valid 36b counter
    
    When reading the timestamp register with single 64b read, we are observing
    invalid values on x86_64:
    
        [f = valid counter value | X = garbage]
    
        i386:   0x0000000fffffffff
        x86_64: 0xffffffffXXXXXXXX
    
    Test checks if the counter is moving and increasing.
    Add a check to see if we can use (reg | 1) flag to get a proper 36b timestamp,
    shifting the value on x86_64 if we can't.
    
    v2: More iterations of monotonic test, comments, minor fixups (Chris)
    v3: Skip tests if reg_read is not supported
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Michał Winiarski <michal.winiarski@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 32c898849bd4f087e5b816b6e9e842edd5ce81d6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jul 15 16:18:10 2015 +0100

    igt/gem_eio: Waiting on a hung batch should report -EIO
    
    If we are waiting on a handle, and its request is cancelled due to a
    hang, we should report that explicitly through the ABI.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7f952bd976416196f628c42a8d7bf77fe3c1540f
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Jul 13 14:09:30 2015 -0300

    kms_frontbuffer_tracking: don't keep debugfs open
    
    Make the code smaller and simpler, also ready for when we move
    debugfs_read() to lib/.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 1048aa9aa5a9f095800ba41318af9ea351e943e9
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Jul 9 13:32:16 2015 -0300

    tests: add kms_fbcon_fbt
    
    This test should test the interactions between fbcon and the
    frontbuffer tracking infrastructure.
    
    Right now the PSR test fails, but as soon as we merge the following
    kernel patches, the test wills tart passing:
     - drm/i915: PSR: Flush means invalidate + flush
     - drm/i915: fbdev restore mode needs to invalidate frontbuffer
     - drm/i915: fbdev_set_par reliably invalidating frontbuffer
    
    I didn't want to make this a subtest of kms_frontbuffer_tracking just
    because when I wrote it, I really didn't have in mind the fact that
    someone might just close the DRM fd in the middle of a subtest.
    
    After this commit we'll have a little bit of duplicated code among
    tests. I'll clean this up later.
    
    v2:
      - Refactor the code a little bit.
      - Add the suspend subtests.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 7c5a218cc31e95f5b8b74dba80488ca37b9d85fd
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Jul 13 17:30:43 2015 -0300

    kms_frontbuffer_tracking: implement suspend subtest
    
    Make sure we survive suspend/resume.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 1c389f69f0b188edd47eca1901f62ba36a59f37f
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Jul 13 17:08:17 2015 -0300

    kms_frontbuffer_tracking: allow passing a NULL pattern
    
    So we don't need to initialize CRCs we won't use. This makes the
    modesetfrombusy and badstride tests a little faster.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 91f097aefa29ff0d6b0b97f204f2bd1e3e5f0c3d
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Jul 13 16:56:06 2015 -0300

    kms_frontbuffer_tracking: simplify subtest enumeration
    
    Just a small bikeshed.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 04d1311fc3d2127d609b5c5e670bf9887652cb17
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Jul 13 16:08:36 2015 -0300

    kms_frontbuffer_tracking: add farfromfence subtest
    
    Make sure we notice in case our crtc->y handling is still wrong.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit cb3861a9e3f1bc12765160345bb0dd1d543f5086
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Jul 10 17:53:25 2015 -0300

    kms_frontbuffer_tracking: implement badstride test
    
    Test strides that are either completely invalid or just result in
    disabled FBC.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 4deb562659edc1b4d53024b6ef6e183b4f94f768
Author: Paulo Zanoni <paulo.r.zanoni@>
Date:   Tue Jul 14 12:45:04 2015 -0300

    configure: require libdrm >= 2.4.55
    
    And drop the now unnecessary universal plane definitions. The 2.4.55
    version is already quite old, so we should be fine.
    
    Thanks to Thomas Wood for quickly spotting this.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@>

commit 19e4632407cfe9fdfe5e067dfaaeaef4d5bf669f
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Jul 13 16:14:55 2015 -0300

    kms_frontbuffer_tracking: only force std_1024_mode on HSW
    
    Since on BDW the big modes work fine, I want to test them without
    having to recompile the test every time. Let's make std_1024_mode part
    of opt.small_modes.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit a7cfd224ba9b2c6735875e27f480b6bbd40ae4d9
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Jul 13 11:08:02 2015 -0300

    kms_frontbuffer_tracking: remove enum feature_status
    
    After the last commit, it's not really needed anymore, so let's get
    rid of it: less code lines and less non-standard enums.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 775fd7771565c7820eeb2406d12bec3ddbfe252d
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Jul 10 17:55:42 2015 -0300

    kms_frontbuffer_tracking: improve checks for disabled features
    
    Make sure the features are disabled and stay disabled. Otherwise we
    could just wrongly think they are disabled while they are just in the
    process of being enabled.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit ca97e784558d48915e3d9056b98c028d46e0c799
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Jul 10 17:20:23 2015 -0300

    kms_frontbuffer_tracking: rename enum fbs
    
    I tried explaining these to people twice and realized how bad the
    current naming was. Let's hope the new one is better.
    
    The downside is that the tests were renamed and patches mentioning
    them can't be fixed.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit b0427442f90a82707cd2ffe0ee94ed73549d9ffe
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Jul 10 12:50:27 2015 -0300

    kms_frontbuffer_tracking: add different ways to flip
    
    So we can make sure all code paths are properly exercised and lead to
    proper frontbuffer tracking.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit a1d4b553a75a70baad2b08cf53ef62fd65ea4856
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Jul 10 15:25:47 2015 -0300

    kms_frontbuffer_tracking: fix fullscreen subtest assertions
    
    Only really assert FBC_DISABLED in case the primary plane is actually
    disabled. If the sprite plane is covering the whole screen but the
    primary plane is still enabled, FBC can remain enabled.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 344dab22e994ab1d5ccf6241d6bf099eeeeaf8cf
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Jul 10 15:54:34 2015 -0300

    kms_frontbuffer_tracking: avoid huge strides during normal operation
    
    We want to restrict huge strides to the yet-to-be-implemented
    stride-size-specific subtest.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit c2d656c5d67909537e61cd6e940038e91f558ac2
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Jul 8 15:49:09 2015 -0300

    kms_frontbuffer_tracking: don't hardcode the X/Y big FB offset
    
    While debugging the test failures I tried different values for the
    offsets, so having a central place to change them is the only sane
    way.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 9ca8a1bade2a4d267857ecb5f107f207a6ca3107
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Jul 13 14:13:46 2015 -0300

    pm_rpm: remove pm_status_fd declaration
    
    This was forgotten since we moved some code to igt_aux.c a long time
    ago.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit b81f7db593a74daeb8c8e4216743fa985a7c03de
Author: Matt Roper <matthew.d.roper@intel.com>
Date:   Wed Jul 1 15:45:21 2015 -0700

    kms_universal_plane.c: Update sanity checks for gen9
    
    SKL and BXT have some new plane capabilities that previous generations
    didn't have; we need to update some of our universal plane tests to
    expect success rather than failure when running on these platforms.
    
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>

commit 8ad1e4077879a111f341dbfd2e0fee84efc9f57e
Author: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
Date:   Tue Jun 16 13:37:44 2015 +0300

    tests/gem_exec_params: check invalid flags for Resource Streamer
    
    Make sure resource streamer flags works only in correct ring in
    addition to checking next flag after the RS boundary fails.
    
    v2: Make sure we reject RS on pre-hsw.
    v3: Don't skip 1<<15 for the exec flags (Jani Nikula)
    
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit ec9e5996d1c54d71c1c9cd14755ec6eddfdb0680
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jul 2 14:59:25 2015 +0100

    build: Don't use automake's conditional in a Makefile.sources
    
    I just remembered that those Makefile.sources files where also
    included by the Android build system, so we can't use automake's
    conditionals in there.
    
    So, we want to use GNU make's one. Unfortunately, after all those years,
    GNU automake still doesn't do anything useful with GNU make's ifeq:
    
      lib/Makefile.sources:66: error: else without if
    
    automake will helpfully signal that the 'else' corresponding to the
    'ifeq' doesn't have a corresponding 'if'. Well, yeah, thanks.
    
    Fortunately, we can work around this by cunningly inserting a space
    before 'ifeq', 'else' and 'endif' and fool automake's regex-based
    checks.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 64295c67e908d59606fafe35e2d2363802c7faec
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jul 2 11:24:02 2015 +0100

    build: Add -lm to tests
    
    Since the introduction of igt_stats and its usage in gem_exec_nop, we
    need to link the tests against libm. My rebasing bot complained when
    linking gem_exec_nop:
    
      lib/igt_stats.c:492: undefined reference to `sqrt'
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit e5653d5f1d1b349ec320b056d3e6e17008c256a7
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jul 1 23:40:36 2015 +0100

    build: Add an option to not use the git hash in version
    
    When developing, it's quite annoying that the version changes every
    commit, causing the library to be rebuild and every single binary
    re-linked.
    
    Add a config option to skip that.
    
    I remember Ville asking for this "feature" as well.
    
    v2: Option is now called --disable-git-hash (Thomas)
        Various spelling mistakes (Thomas)
    
    Cc: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 0a01a190f6f7b2256d6efdd49018f43023f389dd
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jul 1 23:02:31 2015 +0100

    build: Add DEBUG_FLAGS to tools and self-tests
    
    Makes using GDB better on those binaries.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 390653acfb47664ffebe07a6928fa6b0fc18f4e8
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jun 30 00:15:15 2015 +0100

    aux: Don't evaluate several times the arguments of min() and max()
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 643aab2249992f4c4ad75e98ef3d43f3c6700895
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jul 2 00:16:07 2015 +0100

    stats: Add wikipedia links to get_trimean() and get_iqm()
    
    Useful knowledge for anyone looking at the documentation and following
    the linkes.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit d01ebbd97ddb323564c75bfaaa374011fde4cd38
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jun 29 16:47:14 2015 +0100

    docs: various documentation fixes
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 8a109f94b9205222f79f20350750b39dd4b068cd
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jun 29 14:42:52 2015 +0100

    docs: fix duplicated ID error
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 85f6d82d3ccde981382b784b67a5cc2b19dfa4bb
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jun 29 14:37:13 2015 +0100

    docs: fix "no link" warning
    
    igt_save_module_param is an internal static function and therefore isn't
    included in the public API documentation.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit f01e0552d6b94d7eb2d87e388ba5be596234886c
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jun 29 14:31:06 2015 +0100

    docs: add the annotation glossary
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 5d80872009d4f3509e7e2b7a236b27d5002aff15
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jun 29 11:03:39 2015 +0100

    docs: override section id to avoid '/' in filenames
    
    The section id is generated from the section title and is used to create
    the html output filename, which therefore causes problems if it includes
    a '/' character.
    
    Cc: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 614895fec12a66376167c23294157a8f69014e54
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jul 1 20:51:54 2015 +0100

    igt/gem_exec_nop: Control boost/idle frequencies
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b43070987e8b926e7b487e7717e8b58197fd03cf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jul 1 13:53:07 2015 +0100

    igt/gem_exec_nop: Wait between runs
    
    In order to keep the GPU in a consistent state between samples, we have
    to wait for it to fall asleep before proceeding.
    
    For fun hook up igt_stats.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2d305f61995cc896aaa1d3be01c33d90515c22e0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jul 1 18:52:46 2015 +0100

    stats: Add trimean
    
    https://en.wikipedia.org/wiki/Trimean
    
            The trimean is a the most efficient 3-point L-estimator (estimator
            of central tendency, i.e. average), even more robust than the
            median at estimating the average of a sample population.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 19135a34471ec4da4d7cc8493c371b8c38879f0b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jul 1 13:50:02 2015 +0100

    stats: Add the interquartile mean (IQM)
    
    https://en.wikipedia.org/wiki/Interquartile_mean
    
            The IQM is a truncated mean and so is very similar to the scoring
            method used in sports that are evaluated by a panel of judges:
            discard the lowest and the highest scores; calculate the mean
            value of the remaining scores.
    
    It's useful to hide outliers in measurements (due to cold cache etc),
    without having to worry too much about the actual distribution.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 669b5da2bc4ef8d80405aef96ebb831a39608db4
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jun 30 00:15:15 2015 +0100

    tools: Add an intel_firmware_decode tool
    
    So we can inspect fw headers. Sample output:
    
    Firmware: skl_dmc_ver1_18.bin (7892 bytes)
    CSS header (128 bytes)
        module_type: DMC (9)
        header_len: 32
        header_ver: 0x10000
        module_id: 0x0
        module_vendor: 0x0
        date: 0x7df060c
        size: 1973
        key_size: 0
        modulus_size: 0
        exponent_size: 0
        version: 1.18 (0x10012)
        kernel_header_info: 0x0
    Package header (256 bytes)
        header_len: 64
        header_ver: 1
        num_entries: 3
    Firmware #1
        stepping: A.*
        offset: 4294967295
    Firmware #2
        stepping: B.*
        offset: 4294967295
    Firmware #3
        stepping: *.*
        offset: 0
    0x7f0867143000
    0x7f0867143180
        signature: 0x40403e3e
        header_len: 128
        header_ver: 1
        dmcc_ver: 520
        project: 0x900
        fw_size: 1845
        fw_version: 0x10008
        mmio_count: 3
            write(0x0008f074, 0x00002fc0)
            write(0x0008f004, 0x02500204)
            write(0x0008f034, 0xc003b400)
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit ad411e2d5de78b621f6e9c628f8a96bd79425057
Author: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
Date:   Fri Jun 26 14:52:34 2015 +0300

    tests/gem_ringfill: Add {render,blitter}-forked-1 subtests.
    
    Add forking subtests to gem_ringfill. Tests cause consistent GPU
    hangs on SKL.
    
    v2: Removed noop parts.
    v3:
    - Allow executing the tests in order too (Chris Wilson).
    - Rename the tests to -forked-1
    
    Cc: Mika Kuoppala <mika.kuoppala@linux.intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
    [ickle: Extend to cover forked-N]
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=89959

commit 46f277b90b998560eb0cf895f71ca667d2ef8a39
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jun 27 18:03:15 2015 +0100

    stats: Exercise the reallocation paths
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 66e0bf66da4b06d9495025b053d4d7fe73c86fc7
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jun 27 17:49:40 2015 +0100

    stats: Spwan igt_init_with_size() from igt_init()
    
    It's all about good looking APIs.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 00432ff260beba0bf6535d7fd1c0275de303ed57
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jun 27 17:34:51 2015 +0100

    stats: Allow the underlying arrays to grow at will
    
    Chris mentioned he wanted to be able to measure a variable "for one
    second" and use igt_stats to store them. That's one case where we don't
    know the number of data points upfront.
    
    We should really support that, so here it is.
    
    v2: Just free ->sorted when a new capacity is needed.
        ensure_sorted_values() will then reallocate the array to the new
        capacity on demand (Chris)
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 817ea87b6edab2d25a2994f076562ee03aa91fc6
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jun 27 16:42:50 2015 +0100

    stats: Test we do correctly invalidate the sorted array
    
    Chris had a doubt, and I was lazy and didn't do a similar test for the
    quartiles/median than for the mean (test_invalidate_mean()). Plug that
    gap.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit fabde384a33324dc9a9c55c1f4003196ec90564c
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jun 27 15:49:26 2015 +0100

    stats: Add support for the interquartile range (IQR)
    
    IQR is a good measure of dispersion.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 1b8997b3f89f5c7632782d2e7f8509a0f8176891
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jun 27 15:33:58 2015 +0100

    stats: Add support for quartiles (and thus median)
    
    More stuff, quite useful characteristics of a dataset.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 3839bacde884a0d8ce55956b3221175a0078844b
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jun 27 15:32:23 2015 +0100

    stats: Add a bulk version of _push()
    
    In case we want to push a bunch of values in one go.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 2fe286985f825128142f56df5dc806a78338b308
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jun 27 15:31:19 2015 +0100

    stats: Use igt_assert_eq_double() when asserting on doubles
    
    Lucky enough to have exact values, == works!
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 0a38e977c026fee3a499946652263b2adfe7c27c
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jun 27 15:26:50 2015 +0100

    lib: Add double versions of igt_assert_cmp() and igt_assert_eq()
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 23888526c7c979a40218bb8bc669fb383d86c5c3
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jun 27 15:26:13 2015 +0100

    docs: Add documentation for igt_assert_cmpuint()
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit f660d0a054d559b47525d42e2a4b55057ec8e417
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jun 27 15:16:22 2015 +0100

    docs: Add documentation for igt_assert_u32()
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 4dca31b2d60019f9cdeb35b1922126cbbe1cb7af
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jun 27 11:16:52 2015 +0100

    docs: Fix a "libraray" typo
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 0e4c175e04abadc1f0f76e3c144debf1527cf057
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jun 27 11:12:01 2015 +0100

    stats: Add igt_stats_get_range()
    
    Somewhat useful, for instance to size an histogram.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 4a89a841a11cb872f9b0b0959c306fcb96f87d75
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jun 27 09:45:42 2015 +0100

    stats: Add functions to retrieve min/max values of the dataset
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 87009f3d7b155bc2c650d1395f74a2c6e80f0cf6
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jun 27 09:41:57 2015 +0100

    stats: Factor out a fixture to initialize stats
    
    We're going to use this simple fixture once more, might as well make a
    function instead of copy/pasting code.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 17ed69fbb817bff6f76d3e3beffc2fd30abdf187
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jun 26 18:19:42 2015 +0100

    stats: Add a note about the standard deviation derived from unbiased variance
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit da123adeae70863c967e14035f272b89371a5fd5
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jun 26 18:04:34 2015 +0100

    stats: Add a getter for the population property
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 3a5cf84317197cdac88196cda76c6a7e08943f20
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jun 26 17:02:09 2015 +0100

    stats: Add a way to specify if the data set is a population or a sample
    
    This changes how we compute the variance. We want an unbiased variance
    when reasoning about a sample.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit a2f6fd3725f50919c79694f1e24c1dec2752c875
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jun 26 16:57:55 2015 +0100

    stats: Add gtkdoc section for igt_stats
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 087a8d1c63b3d5863a14ff10002fde683b295592
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jun 26 14:31:58 2015 +0100

    stats: Add header gards
    
    Sigh.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 6ebd8c2dc3291bd5776a0511e61a019a1444497f
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jun 26 14:28:41 2015 +0100

    doc: Remove i-g-t/intel prefixes and capitalize section titles
    
    Looks better!
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 203c3841fc6bf9bd2b71ff9ce8e86874375eec1e
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jun 26 13:55:01 2015 +0100

    stats: Zero the whole structure at init() time
    
    Because the structure started small, I initialized every member
    directly, but that means that the new fields added weren't properly
    initialized (sigh!). Zero the whole thing first then.
    
    Also, the punishment for introducing a bug should be to write the
    corresponding unit test. It's not a perfect one, but I'll take it.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 76ea7b913373d1291a95706dfede7e48a812777e
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jun 26 00:20:44 2015 +0100

    tests/stats: Make sure we properly invalidate the cached mean
    
    Sure, that's an implementation details, but make sure we do recompute
    the mean when we add a new value.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 515cec1210764241153f5d46d70ba5e943201b14
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jun 25 23:59:21 2015 +0100

    stats: Add a way to retrieve the standard deviation
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 05c10f940f9df3a5b24e2a0b476052fbe5a22282
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jun 25 23:57:49 2015 +0100

    stats: Use an algorithm popularised by Knuth to compute mean and variance
    
    Suggested-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 9986282c2bb4508a1fd9b774e30e1f4e405ac82e
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jun 26 00:16:48 2015 +0100

    tests/igt_stats: Call igt_stats_fini() to not leak the array
    
    Sure, it'll be freed at exit(), but might as well be a bit pedantic.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit e55a11d3ebceaf777dba369076e8e842a8479360
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jun 25 23:44:20 2015 +0100

    stats: Be more precise and talk about mean, not average
    
    There are several types of averages eg. mean, median and mode.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit e86557ca9fa24bb3c73a8168b0866169f7606d0c
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Jun 25 14:19:24 2015 -0300

    lib/igt_draw: move to the GTT domain before using GTT mmaps
    
    With this, we don't need to worry about what happened to the buffer
    before.
    
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 6cc553adf298e6244fbdb5fe03841c00ddda29ad
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Jun 25 14:12:56 2015 -0300

    lib/igt_core: fflush stdout after printing subtest results
    
    I often run "sudo ./test 2>&1 | tee output.txt", and when we're
    succeeding - never printing to stderr - the output gets buffered and
    is never flushed (because it doesn't point to a terminal), so I never
    know which test is running. With this fflush, I'm able to know when
    each test finishes.
    
    v2: Add blank line too (Chris)
    
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit f78574101ffc3388ba7a948a6f5310358cdeaab2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jun 26 11:41:44 2015 +0100

    igt/gem_fenced_exec_thrash: Tidy testing of expected execbuf errors
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c69b13578399915f71f4ccc10cae188c31381c6a
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Fri Jun 26 11:36:00 2015 +0100

    igt/gem_fenced_exec_thrash: Fix memory leak between tests
    
    gem_fenced_exec_thrash was not freeing any resources between
    subtests. On 1Gb android systems this resulted in the test
    failing with an OOM error.
    
    Added cleanup code to free BOs at the end of each subtest.
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>

commit eeda401391de3ab434dcdd1d1b441a24660a0fd3
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Jun 25 10:56:34 2015 -0300

    kms_frontbuffer_tracking: GTT mmap writes disable PSR
    
    And they keep it disabled until something else enables it. So let's
    consider this on the draw subtests.
    
    With this, some PSR tests that were failing will now start passing.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 053f33ad1c3e8604b2c33a6ca87539a2ec684742
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Jun 25 10:47:09 2015 -0300

    kms_frontbuffer_tracking: use CPU mmaps for fill_fb_region()
    
    Because the GTT mmaps "permanently" disable PSR and this can mess
    some of our assertions. So let's just use the CPU domain to keep the
    implementation simple.
    
    With this, some PSR tests that were failing will now start passing.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 7a4ded7b87956b9bcfb0d33ed2368633ec2dc239
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Jun 24 19:04:26 2015 -0300

    kms_frontbuffer_tracking: remove offscreen-{cur,spr} subtests
    
    It doesn't make sense to write on the sprite/cursor plane of the
    "offscreen" screen. The pick_target() function was just returning the
    offscreen_fb pointer for those cases, so we were not really testing
    any cursor or sprite code. So the tests were just the same as
    offscreen-pri.
    
    That kills 24 subtests for each feature (72 in total).
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit ce3b47bac89d46633bd8b55842590080ab9d246d
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Jun 22 19:18:29 2015 -0300

    tests/kms_frontbuffer_tracking: add modesetfrombusy test
    
    This test exercies the dev_priv->fb_tracking.busy_bits bug I recently
    found and Daniel fixed.
    
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit de774ed31e678da3f0fe0a51c4c1165161ee399a
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jun 25 17:38:19 2015 +0100

    skl_compute_wrpll: Don't try other dividers if we find a 0 central freq deviation
    
    Paulo suggested that we could short-circuit the search for a good
    divider if we find a 0 deviation of the DCO frequency from the central
    frequency.
    
    Out of the 373 test frequencies, 34 hit that fast path.
    
    Suggested-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 26336385ac1f32ce2a0160558d08af9d090c4286
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jun 25 17:48:50 2015 +0100

    skl_compute_wrpll: Sync a comment with from the kernel code
    
    Might as well try to keep the code in both this test and the kernel as
    close as possible.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit dfebf08d9a21146e4d53ddb684e71b934d96bc59
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jun 25 14:18:34 2015 +0100

    skl_compute_wrpll: Fix the mininum deviation computation
    
    Paulo noticed that, because we were only comparing positive deviations
    with positive deviations and negative deviations with negative
    deviations, we weren't actually always using the absolute minimal
    deviation at all.
    
    This improves the average deviation across all tested frequencies (373):
    
    before: average deviation: 215.13
    after: average deviation: 194.47
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit afdaeabbcfd9a2fd1b27b8742681d52d12161dd0
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jun 25 12:21:27 2015 +0100

    skl_compute_wrpll: Cycle through dividers, then central freqs
    
    Follow Paulo's comment on the corresponding kernel patch.
    
    This means we also have to move the break when we have cycled through
    the even dividers as well.
    
    This improves the number of even dividers used across the tested
    frequencies (373) (at the expense of a slightly worse average deviation,
    but "even dividers take precedence over a lower deviation".
    
    before:
      even/odd dividers: 338/35
      average deviation: 206.52
    
    after:
      even/odd dividers: 363/10
      average deviation: 215.13
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit efd2895f2380bf87f6821e3ab89005070e9d1925
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jun 25 12:17:23 2015 +0100

    skl_compute_wrpll: Print the average deviation
    
    It's interesting to watch the effect of some algorithm tweaks on the
    average deviation between the central freq and the dco freq. A metric
    we'd like to minimize.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 06f5f7065fccc5fbb9f65f6f7d348624e2fa0d2b
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jun 25 12:07:56 2015 +0100

    lib: Add a tiny utility function to compute averages
    
    The master plan would be to get a bit more stats in it, at least the
    standard deviation and confidence interval. Just need the average for
    now.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 484e27542d79f78e467004fec5a5192ac6006b34
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jun 15 17:09:11 2015 +0200

    tests/kms_fbc_crc: Don't force fbc on old platforms
    
    It's simply a bit too scary on pre-gen6 and imo not worth the bother
    really until someone starts to implement all the hacks an w/a required
    on these platforms. On later platforms the issues are just with
    correctness and performance hence no risk for hanging machines.
    
    Cc: Paulo Zanoni <przanoni@gmail.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 44d444acaa8cfd61ea25c82fb7c3bff5f41f0835
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 24 17:01:21 2015 +0100

    overlay: Enable locale
    
    Enabling locale allows us to use thousand separators and other such
    human touches in the output.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 453792c501b4553ed3c4135057249e300d3c0362
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 24 11:26:33 2015 +0100

    lib: Enable locale dependent output to a terminal
    
    If we are in an interactive session, enable the locale. This allows for
    features like setting thousand separators for printing large values. By
    only enabling it for interactive terminals, we avoid changing outputs
    for the test scripts (leaving them as the "C" locale).
    
    Note this mainly affects the testcases, or binaries built using libigt.
    Other binaries need to be localised separately.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Michel Thierry <michel.thierry@intel.com>

commit 7eb5f079491e5c078cf44d5ddb52824bb2c6bfb0
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Jun 23 12:55:04 2015 -0300

    tests/kms_frontbuffer_tracking: rename set_screens_for_test
    
    Rename it to prepare_subtest. This function used to be much smaller
    when I decided its name.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 7756e8844538050c1e4efde28147ca7e0753df27
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Jun 23 10:49:54 2015 -0300

    tests/kms_frontbuffer_tracking: simplify flib_subtest fb handling
    
    Get rid of fb2_region, use params->fb directly instead.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 77e1bac6eb4588c00bbc2e431d9f2594675a18bd
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Jun 23 10:38:19 2015 -0300

    tests/kms_frontbuffer_tracking: simplify wait_user() calls
    
    I often add new temoprary wait_user() calls when debugging things, and
    having to add "if (opt.step)" is annoying, so let's make the step
    level check inside wait_user(). As a bonus, our huge macro is 2 lines
    shorter.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 969cb3c575ac4618b3a3484f78a9644484f9c7e8
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Jun 18 14:57:37 2015 -0300

    tests/kms_frontbuffer_tracking: not all eDP panels support sink CRC
    
    And require sink CRC support for PSR, since the pipe CRC is not
    exactly useful there.
    
    v2: Check for ENOTTY (Rodrigo).
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=91019
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 471ebbed535a73d129e4d717f5b80a2af163eb0c
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Tue Jun 23 17:06:01 2015 +0100

    igt/gem_fence_thrash: Reduce memory usage
    
    On android platforms with 1Gb RAM gem_fence_thrash was failing
    with an out of memory error.
    This patch causes gem_close() to be called when a handle is
    no longer required rather than relying on the cleanup when
    the fd is closed. This greatly improves the memory footprint
    of the test allowing it to run on 1Mb systems.
    
    Also fixed a leak of the 'threads' variable.
    
    v2: Simplified as per Chris Wilson's suggestion.
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>
    [ickle: fix mmap leak from bo_copy()]
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 154192a6805adc879b2fb0d08ff9d89e25b04fa0
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Jun 19 09:22:55 2015 +0100

    NEWS: Post-release bump
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 0e528af623c735ab4bf0d5bbdc64cbdffc82674d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jun 22 15:48:54 2015 +0100

    igt: Add gem_exec_alignment
    
    Simple test to see whether the kernel obey's the user's request
    alignemnt.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit eb7d60e430ae63e36c77f2d95a0cea93017f0b71
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 17 18:29:49 2015 +0100

    igt: Add gem_eio for inducing expected EIO
    
    A few entry points in the GEM API are expected to raise EIO if we
    encounter a wedged GPU. This testcase aims to do so by first injecting a
    GPU hang with GPU resets disabled (thus causing the GPU to become wedged)
    and then exercises the various API to check for the expected errors.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4fbce7e462ab488fc11037adb571bb3a807459ba
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jun 18 10:38:04 2015 +0100

    testdisplay_hotplug: Add missing #include <sys/stat.h>
    
    testdisplay_hotplug.c: In function ‘hotplug_event’:
    testdisplay_hotplug.c:46:14: error: storage size of ‘s’ isn’t known
      struct stat s;
                  ^
    testdisplay_hotplug.c:54:2: error: implicit declaration of function ‘fstat’ [-Werror=implicit-function-declaration]
      fstat(drm_fd, &s);
      ^
    testdisplay_hotplug.c:54:2: warning: nested extern declaration of ‘fstat’ [-Wnested-externs]
    testdisplay_hotplug.c:46:14: warning: unused variable ‘s’ [-Wunused-variable]
      struct stat s;
                  ^
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c83299d1fda4b8c67562999d61817177d422d52e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jun 15 14:51:54 2015 +0100

    lib: Use HAS_GPU_RESET rather than opencode our guess
    
    Uses kernel commit 49e4d842f0d0892c3d26c93a81b9f22c1467030e
    Author: Chris Wilson <chris@chris-wilson.co.uk>
    Date:   Mon Jun 15 12:23:48 2015 +0100
    
        drm/i915: Report to userspace if we have a (presumed) working GPU reset
    
    to determine whether the kernel has a working GPU reset before injecting
    a hang (and so skip tests requring hang recovery if not available).

commit a5633c406c4ae93abc7fce8ff59d2c021a6aa45e
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Thu May 28 13:02:30 2015 +0100

    lib/tests/igt_segfault Add unit test to test segfault handling
    
    Unit test to check a segfaulting subtest is handled correctly.
    
    v2: Added script to check subtest results
    v3: Removed script. Updated test to use fork to monitor return status.
    v4: Added igt_segfault to .gitignore
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4b944c92eb85c3cdf6526e65a1a746c979de55bd
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jun 4 18:31:04 2015 +0100

    pm_rpm: Update the debugfs filename
    
    v2: Try to open i915_pc8_status first to make the transition (or just
    running on older kernels) better. (Paulo)
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit b88212c036fbd909d70b8388fc8fffb1fac75e5b
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Jun 11 16:08:23 2015 +0100

    Update version to 1.11 and add the release date
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 0cc16b37ab9b3f8d5687380f83c0361c9de1beb6
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Jun 11 16:06:33 2015 +0100

    NEWS: Updates
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit aa75f373978756aba32ac9c009740ac45e2eb180
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jun 8 16:41:34 2015 +0100

    tools: print a warning for tools replaced by intel_reg
    
    Cc: Jani Nikula <jani.nikula@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 87f15fc3da374082933aef4d2183f319e596c9ba
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jun 8 10:16:00 2015 +0100

    overlay: update .gitignore
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit d8acd24bdb0210e1b590cebc58ddcd266045ae08
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Dec 2 10:40:05 2014 -0200

    tests: add kms_frontbuffer_tracking
    
    This is a new test that should exercise the frontbuffer tracking
    feature of the Kernel in a number of different ways. We use different
    drawing methods, we use the primary, cursor and sprite planes, we can
    test both on single and dual pipes, also on buffers not associated
    with any CRTCs, etc.
    
    We currently have assertions for both FBC and PSR, and we also have a
    "nop" test mode that should disable both FBC and PSR, and can be
    used for debugging.
    
    This test is also capable of testing both FBC and PSR even if they are
    disabled by default on the Kernel: the test knows how to change the
    i915.ko parameters and then set them back after testing.
    
    I am getting a significant number of failures when I run this test,
    which means we have some work to do on the Kernel.
    
    I also still have a small list of additional subtests that I plan to
    add to this test, and those tests are documented on the main function.
    
    v2:
     - Use igt_debugfs_open() (Thomas).
     - Use igt_test_description() (Thomas).
     - Don't check drm_open_any_master()'s result (Thomas).
     - Use igt_require_f() in some cases (Thomas).
     - Standardize some assertions.
     - Use the new module param functions.
     - Check if FBC is supported by the chipset.
     - Add new subtests (multidraw, enum fbs, fbc+psr).
     - Make tests a little shorter.
     - Reorganize which tests ara ran by default.
     - Better comments everywhere.
     - Rebase.
    
    v3:
     - Fix a small typo.
     - Improve the log messages a little bit more.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 75b286e821bd5cf056c5a786f347943360486143
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Jun 2 12:03:45 2015 -0300

    tests/kms_psr_sink_crc: test even if PSR is disabled by default
    
    Use the igt_set_module_param_int() call to enable it, then restore the
    previous value after we are done testing.
    
    With this, we can change the psr_enabled() function to psr_possible():
    the only requirement should be that we have a PSR capable sink. The
    test should now be able to make "Source_OK" and "Enabled" become true
    whenever it wants.
    
    Cc: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit a4dbdeffc2995a0b84efb3bdfc9e460b731d7af5
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Jun 2 10:54:27 2015 -0300

    tests/kms_fbc_crc: run even if FBC is disabled by default
    
    We may not be perfect, but if we don't even test, we will probably
    only get worse over time.
    
    The function called makes sure we restore whatever was the original
    FBC parameter when we exit the test, so this should not affect the
    other tests.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit d9ff9b3971121acdaedf45d95acceabbb1391547
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Jun 1 19:06:10 2015 -0300

    lib/igt_aux: add functions to manipulate i915.ko parameters
    
    Some i915.ko features have very nice IGT tests, which are never
    executed because the features are disabled by default. This leads to
    unnoticed regressions both in the Kernel and in the IGT tests.  We
    have seen this multiple times, for example, on FBC and PSR.
    
    We want to be able to run IGT and actually test these
    disabled-by-default features in order to make sure we at least don't
    break them even more. Sometimes they may be disabled for some specific
    reason, and we don't want to increase the set of reasons without
    noticing.
    
    To help solving this problem, this commit adds some helper functions
    that should make it easier to change certain i915.ko parameters and
    then restore their original values at the end of the test. With this,
    I'm hoping QA will be able to detect any regressions and automatically
    bisect them - or, with PRTS, reject the patches before they are even
    merged.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 46a1791958f45cf1b15720b40aaca9306dd5227f
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue May 26 11:11:52 2015 -0300

    tests/template: add IGT_TEST_DESCRIPTION
    
    So people that write tests based on the template don't forget to use
    the macro.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 6b418f0264883871955d82058b1d36f710f810b4
Author: Imre Deak <imre.deak@intel.com>
Date:   Mon Jun 8 19:08:06 2015 +0300

    tests/gem_storedw_batches_loop: add subtest for cached mappings
    
    v2:
    - add a subtest for uncached mappings too for LLC platforms where the
      default is cached mapping (Chris)
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit c5a6147a1be440c2d5457f392775e583b2eba8f3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jun 8 15:56:33 2015 +0100

    overlay: Fix parsing of gem-objects for '[k]' clients
    
    Apparently '[]' are not non-whitespace characters and break '%s'.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit fd772e32a23157fc29649070a6a5e94d70ae02f8
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jun 5 15:51:40 2015 +0100

    build: Add the automake subdir-objects option
    
    automake 1.14 was complaining here:
    
    overlay/Makefile.am:44: warning: source file 'x11/x11-window.c' is in a
    subdirectory, but option 'subdir-objects' is disabled.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit c221e0942031a8c7518fd04f346920df766ce6fe
Author: Tim Gore <tim.gore@intel.com>
Date:   Wed Jun 3 09:20:21 2015 +0100

    tests/gem_reset_stats : mask off ring_stop bits
    
    Function check_gpu_ok checks to make sure that any hangs
    have cleared by testing for (flags == 0). Some tests set
    the STOP_RINGS_ALLOW_BAN and STOP_RINGS_ALLOW_ERRORS flags
    but these do not get cleared by an individual ring reset,
    (a feature added recently to the driver), leading the
    check_gpu_ok function to think that the gpu is still hung.
    
    So I mask the flags with STOP_RING_ALL, to ignore the mode
    bits and look only at the bits that stop the rings.
    
    Once gpu_check_ok sees that the gpu is not hung I write 0
    to stop_rings in order to clear it completely. This is
    because igt_set_stop_rings will only write to stop_rings
    if either a) they are currently 0 or b) we are writing 0.
    If we leave the mode bits set then subsequent calls to
    igt_set_stop_rings to create hangs will fail.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>

commit a5a6d40ca8a6a809678eda695ee54a085c05b949
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 3 13:57:21 2015 +0100

    igt/gem_streaming_writes: Reorder src/dst to avoid executing on snooped
    
    During the streaming setup, we execute a dummy batch in order to bind
    the objects into the GTT and query their offsets. For this, we should
    not use a snooped buffer for the dummy batch, or else we may anger the
    GPU. Given that we have a choice, use the other buffer for the dummy
    batch.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 85ee6e7b366713aca9d98d587f03eb7583f38830
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Mon Jun 1 11:11:15 2015 +0100

    gem_userptr_benchmark: Test overlapping bo mmu notifier performance impact
    
    Current userptr kernel implementation downgrades tracking VMA ranges (real
    userspace ones) to an inefficient linear walk for any process which has
    instantiated overlapping userptr objects.
    
    This adds a test which shows the performance cliff on, most visibly, generic
    userspace mmap(2) and munmap(2) operations between unsync, non-overlapping
    and overlapping userptr objects.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Thomas Daniel <thomas.daniel@intel.com>

commit 977730084647d32b98019924b81b281bef942689
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jun 2 11:15:16 2015 +0100

    igt/gem_streaming_writes: Map the whole batch for CPU accesses
    
    The llc cpu path only partially mapped the batch buffer so confused the
    CS when attempting to execute an empty batch.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=90809
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0d16473df4ed29c9836b03090c78debfb9a7e3e6
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri May 8 17:46:21 2015 +0300

    tests/kms_3d: Reduce the number of expected stereo 3D modes
    
    Currently the test expects to find 15 stereo 3D modes, however the
    number of stereo modes we get from the current kernel EDID parser
    is actually 13.
    
    The extra two modes we had previously were GTF modes, which are no
    longer getting added by the kernel since we have corresponding
    CEA/DMT modes available. So having the GTF modes in the list was
    not actually intentional.
    
    The kernel commit that change the behaviour:
    commit bfcd74d2aeda25a78f7cc92f80650218b1bce0ca
    Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Date:   Thu Apr 2 17:02:11 2015 +0300
    
        drm/edid: Add DMT modes with ID > 0x50
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=90368
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit f386741932a5a6ce4db185f91445b8ad63ed1b02
Author: Antti Koskipaa <antti.koskipaa@linux.intel.com>
Date:   Thu May 28 14:44:54 2015 +0300

    tests/pm_backlight: Add backlight test
    
    This is a basic sanity test of the backlight sysfs interface.
    
    v2:
     - Add jani's suggestion for immediate readback
     - Remove unused parameter from test_and_verify()
     - Add fade test
    
    Issue: VIZ-3377
    Signed-off-by: Antti Koskipaa <antti.koskipaa@linux.intel.com>
    Reviewed-by: Jani Nikula <jani.nikula@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit b1e40e97c89a82b6f574af298214ea599b089264
Author: Mike Mason <michael.w.mason@intel.com>
Date:   Wed May 27 08:25:06 2015 -0700

    scripts/run-tests.sh: add option to not retry incomplete tests on resume
    
    This patch utilizes piglit's new --no-retry option. That option
    prevents incomplete tests from being retried when resuming a
    test run. This is necessary because retrying tests that cause
    a crash or reboot prevents a test run from being resumed.
    
    This patch also adds -s to the piglit command line. The -s option
    forces test logs to be synced to disk after every test.
    Without it, some logs can be lost if a test causes a crash
    or reboot, making it impossible to resume the test run at the
    correct point.
    
    Signed-off-by: Mike Mason <michael.w.mason@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit f49723872bf02788872f02e37df3e48682b5ef9b
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Mon May 18 14:37:31 2015 +0100

    lib/igt_core.c: Flag the test as failing after a segfault
    
    fatal_signal_handler() was trapping fatal errors but not
    flagging the test as failing or setting an exit code.
    The result was that the test would return Ok or Skipped
    depending on what the other subtests did even though one
    of the subtests had segfaulted.
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 95019c2a3c4ed5943ad16e17c8dcf36fd6492adc
Author: Yunlian Jiang <yunlian@google.com>
Date:   Tue May 26 10:22:31 2015 -0700

    debugger: remove unnecessary struct per_thread_data
    
    This removes unnecessary 'struct per_thread_data' and avoids the
    compilation error 'variable length array in structure extension
    will never be supported' by clang. The bug entry is
    https://code.google.com/p/chromium/issues/detail?id=476001
    
    Cc: Benjamin Widawsky <benjamin.widawsky@intel.com>
    Cc: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Yunlian Jiang <yunlian@google.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 88c9a82318bae6bf97e55bf1a28018708aca2200
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Tue May 26 15:19:17 2015 +0100

    lib: Enable building unit tests on android
    
    Add a make file for android so the unit tests can be built.
    Enabled asserts for the library code so the unit test behaviour
    is correct.
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit f2a5896bdddc595489a61cb0e0051de8d43a2591
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Fri May 22 11:00:45 2015 +0100

    kms_rotation_crc: Update rotation direction for kernel changes
    
    commit 1e8df16778b0d8fd8102b3ee799b028f8f961089
    Author: Sonika Jindal <sonika.jindal@intel.com>
    Date:   Wed May 20 13:40:48 2015 +0530
    
        drm/i915/skl: Swapping 90 and 270 to be compliant with Xrand
    
    Changed the rotation direction so IGT needs to be told.
    
    Reviewed-by: Sonika Jindal <sonika.jindal@intel.com>
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Cc: Sonika Jindal <sonika.jindal@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 308b0e856b503f953a21d98f2b808e8fdd67004f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 20 14:51:46 2015 +0100

    igt/gem_linear_blits: tidy
    
    Be clean and use memset(0) on ioctl args before use and downgrade some
    of the lesser informatic messages to just debug.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e93fbc2873b411f9e42d49f758fc9eb845c2ad1b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 19 22:03:04 2015 +0100

    igt/gem_streaming_write: Add a variant to exercise CS
    
    Another issue in streaming writes is into the batch buffer.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3d1f9a223627b44fdaf89a5b848a9705429a80a1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 19 15:18:58 2015 +0100

    igt/gem_streaming_writes: Remember to markup the write target!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 65fec5e5836cb347e99d22320ec3ff776ddf2a1f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 19 14:51:43 2015 +0100

    igt/gem_streaming_writes: Add more validation steps
    
    Inalcude a pre-pass to check that the non-streaming, partial writes
    work.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c0a0725fad11bb7911420cf9b49f8a2ccdf35071
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue May 19 15:04:03 2015 +0100

    list-workarounds: Print the line where the parsing error occured
    
    Useful to understand the warnings the scripts prints.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 554aac5f3e349cb5e6cd99f42826893abf564d85
Author: Imre Deak <imre.deak@intel.com>
Date:   Fri May 15 17:30:58 2015 +0300

    tests/pm_rc6_residency: fix check if RC6P or RC6PP is enabled
    
    The test checks the residency in a given RC6 state or any deeper states
    that are also enabled. For example the RC6 subtest checks the combined
    residency in RC6/RC6P/RC6PP. Since the kernel reported value for the RC6
    residency doesn't include the RC6P or RC6PP residency we need to adjust
    the RC6 value accordingly. A similar adjustment is needed for the RC6P
    subtest.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=90369
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2b47e219be73bb03993fc0d0a78dd7db93c3321b
Author: Imre Deak <imre.deak@intel.com>
Date:   Fri May 15 17:29:37 2015 +0300

    tests/pm_rc6_residency: fix counter readout in case of wrap-around
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 05e9edb2b938143677254cab1d122cd8b0ecd4c0
Author: Imre Deak <imre.deak@intel.com>
Date:   Fri May 15 16:58:30 2015 +0300

    tests/pm_rc6_residency: remove redundant idle loops
    
    Currently the test runs a separate idle loop when reading out each RC6
    counter. But there is no need for this, we can have a signle idle loop
    and read out all the counters at once.
    
    This prepares for an upcoming patch where we need to consider the RC6P
    and RC6PP counters as well when checking RC6.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a2ce95eb9ec1b90a5697d8f8c41ae781328e29bf
Author: Imre Deak <imre.deak@intel.com>
Date:   Fri May 15 16:31:09 2015 +0300

    tests/pm_rc6_residency: sanitize the RC6 enabled mask check
    
    The way the test checks for the RC6 enabled mask atm doesn't work:
    calling igt_success outside of any subtests doesn't have any effect.
    This means the test will run a 11 second idle loop for each RC6 state
    regardless if the platform supports these or have them enabled. Fix this
    by checking explicitly if a given RC6 state is enabled before reading
    out/checking the corresponding counter.
    
    With this fix we can also get rid of the GEN6/IVB checks, since the RC6
    mask check makes them redundant. We still need the VLV/CHV checks, since
    media RC6 doesn't have a separate bit in the mask.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a76591a4be53b608c5cb9793227aa4a957a2f7b1
Author: Imre Deak <imre.deak@intel.com>
Date:   Fri May 15 16:22:23 2015 +0300

    tests/pm_rc6_residency: factor out the code to measure residencies
    
    The upcoming patches will add some additional logic around reading out
    the counter values, so factor out the readout code to prepare for those
    patches.
    
    No functional change.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7883bc8c1cdf3b1cde32acceb4bd4b4c2575ff32
Author: Imre Deak <imre.deak@intel.com>
Date:   Fri May 15 16:15:33 2015 +0300

    tetst/pm_rc6_residency: sanitize counter check function arguments
    
    The counter check function (residency_accuracy) cares only about the
    counter delta, so no need to pass it the start/stop values separately.
    Simplify things to prepare for the upcoming patches.
    
    No functional change.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a572fb15f350be2c002b53a97cae6ceefb155df8
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue May 12 16:29:32 2015 +0300

    tests/pm_rc6_residency: simplify the residency counter check
    
    The temporary vars only obfuscated things, so get rid of them. Also
    remove some redundant asserts and info messages.
    
    The only functional change is that the counter delta will be checked
    only against a percentage based accuracy range (90%-100%) and not
    against a hard-coded limit (RC6_FUDGE). The two checks serve the same
    purpose and the former one is clearer.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5253af92ad6811d7c02b75355b3a47a60961b60a
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri May 15 19:37:12 2015 +0100

    lib/bxt: Update the Broxton PCI IDs
    
    Cc: Imre Deak <imre.deak@intel.com>
    Reviewed-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit d819b7ee358de3972ee453221a4c2c99decb5c32
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Fri May 15 11:24:55 2015 +0100

    tests/Android.mk: Treat all KMS tests as Cairo dependent
    
    If ANDROID_HAS_CAIRO is not set, automatically add all
    kms tests to the skip_tests_list.
    
    Building for android currently fails due to the addition of
    new kms tests. Rather than just adding the new tests to the
    exclusion list, autogenerating a list of all kms tests and
    excluding them will reduce future maintainance.
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit fa4396d0917aae72633cc4d0c8e14222ec494c84
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu May 14 15:38:40 2015 +0100

    gem_bad_blit: Make the BAD_GTT_TEST address more than 32 bits
    
    gem_bad_blit.c: In function ‘bad_blit’:
    gem_bad_blit.c:89:3: warning: right shift count >= width of type [enabled by default]
       OUT_BATCH(BAD_GTT_DEST >> 32); /* Upper 16 bits */
    
    v2: remove extraneous ()
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 15f60217cc79950702afe599b567bdf8fbd5ce75
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu May 14 14:49:59 2015 +0100

    intel_display_crc: A new tool to play with display CRCs
    
    The CRC debug interface is a bit more than a simple textual file in
    debugfs as there are a small command language to control what we want
    from them.
    
    This tool starts, slowly, by allowing us to dump the pipe CRCs whenever
    we want. It can be handy to check what is the current CRC when we reach
    a certain state on the screen (when using --interactive-debug for
    instance) against a known CRC.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit fd6846c99f00e265f558cf0106c833b96caf977f
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu May 14 14:19:01 2015 +0100

    lib: Add a user data pointer to the argument parsing functions
    
    It can be useful to have one of those to carry state between the handler
    parsing the options and the rest of the test. Right now the only thing
    we can do is to use global variables for that.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 7a5e1c6f0aebcfabecc3db96cb87add894530326
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu May 14 16:38:01 2015 +0100

    tests: match gem_create prototype in igt_eviction_test_ops create function
    
    This avoids a warning when using gem_create as the create function.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit aa6c63463feaba83efb893b4e69e0d334f99afea
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu May 14 16:24:01 2015 +0100

    igt.cocci: don't use igt_assert_neq to compare pointers
    
    igt_assert_neq can only compare integers, not pointers.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 6141aa2dad814ba8e1254c8e8213f1ba3ae6835a
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu May 14 16:00:25 2015 +0100

    docs: various documentation fixes
    
    Fix various typos, add missing parameter documentation, include the
    igt_draw section and update the list of ignored headers.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 1f6f6c07bd5bed8540dd309c3f5eac9270955f72
Author: Derek Morton <derek.j.morton@intel.com>
Date:   Thu May 14 09:59:44 2015 +0100

    tests/gem_cpu_reloc: Fix gem_cpu_reloc OOM failure
    
    On android with small memory footprints gem_cpu_reloc can fail
    due to OOM.
    
    Refactor gem_cpu_reloc into 2 tests, a basic test which performs
    10 relocations and a full test which skips if there is insufficient
    memory.
    
    Changed the memory required test to better estimate the actual
    RAM used.
    
    v2: Addresed comments from Thomas Wood
    
    Signed-off-by: Derek Morton <derek.j.morton@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 1a80f90b7d0f804b39342fcd676f307e03216454
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu May 7 14:14:07 2015 -0300

    tests/kms_fb_crc: fix the reference CRC checking
    
    Now we get the reference CRCs on separate untiled FBs just to make
    sure FBC is not there to mess the CRC computation. We also get the
    reference CRCs for buffers that were drawn in the same way that we
    draw them during the tests, so we can finally get rid of that FIXME
    comment we have!
    
    With this, kms_fbc_crc now actually tests something instead of just
    wasting CPU cycles...
    
    Fixes regression introduced by:
    
    commit 562bbe12f6fb75811a746c742a28d32a17b26aa9
    Author: Daniel Vetter <daniel.vetter@ffwll.ch>
    Date:   Fri Feb 27 22:04:18 2015 +0100
        tests: Remove usage of igt_crc_equal and _non_null
    
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 31906084dea4f3570fea3a0a377a18665be14ba9
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu May 7 13:50:17 2015 -0300

    tests/kms_fbc_crc: extract fill_mmap_{cpu,gtt}()
    
    Just like we have fill_render() and fill_blt(). I'm also going to use
    fill_mmap_gtt() for the code that generates the reference CRCs.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit b3faeb16fe455497e93846979f21ca08d598d0fe
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu May 7 12:16:01 2015 -0300

    tests/kms_fbc_crc: make the blt test draw the same pattern
    
    ... as the other drawing tests: single white pixel at top/left of the
    screen, instead of painting the whole screen blue.
    
    This will make it much easier to fix the CRC checking code.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 5d3c2a6353bfb10f328d65812d7a08145103f422
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed May 6 19:20:17 2015 -0300

    tests/kms_fbc_crc: extract check_crc()
    
    To remove some duplicated code. When we finally fix that FIXME, the
    code will get a little bigger too.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit a976d7e44abb9d4e4540a8d072cdf55a7e0ea37b
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed May 6 19:15:37 2015 -0300

    tests/kms_fbc_crc: refactor context handling code
    
    Just a small modification to make the code a little easier to
    understand, IMHO.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit fceed3a585cfcc5d2f412f11029a5a2ff3af3726
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed May 6 19:10:46 2015 -0300

    tests/kms_fbc_crc: unify flip handling
    
    Just a small simplification to make the code a little easier to
    understand, and to help us when we further split drawing vs flipping
    later.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 036401d42c83ab61514fa529ea9e3647a2c8b40f
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue May 5 18:05:54 2015 -0300

    tests/kms_fbc_crc: increase the FBC wait timeout
    
    Now that we moved to the frontbuffer tracking scheme, it may take a
    long time for FBC to be updated after it is invalidated: 300ms is not
    enough anymore.
    
    The problem starts when i915_gem_execbuffer2() indirectly calls
    intel_fb_obj_invalidate(), which disables FBC. After this, FBC only
    gets reenabled when i915_gem_retire_work_handler() happens and
    indirectly calls intel_frontbuffer_flush(). Notice that while FBC is
    not yet enabled, the screen contents are correct, so this shouldn't
    really be a bug.
    
    Previous versions of this patch were replacing the gem_bo_busy() calls
    with gem_sync(), but after some discussion we concluded this was not
    the correct way to handle the problem, so let's just increase the
    timeout so we can kill those subtest failures.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 8c3ac50b00d08daa4b0794d96e76cf78f1253940
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue May 5 17:38:49 2015 -0300

    tests/kms_fbc_crc: exec_nop() can also invalidate FBC
    
    So make sure that, at prepare_test(), we wait for FBC to be enabled
    again after we run the exec_nop() call. Since after this happens, we
    just assert fbc_enabled() at test_crc() instead of waiting for it to
    be enabled.
    
    This is now needed because we moved to software frontbuffer tracking,
    so it can take some considerable time for FBC to be reenabled after it
    is disabled.
    
    A previous version of this patch was just calling gem_sync() after
    exec_nop().
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 641d535a03ada74a3088309609a16c79076e6ccc
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed May 6 15:23:51 2015 -0300

    lib/debugfs: wait_for_keypress("crc") when collecting CRC
    
    Let's just steal the "crc" namespace and add this by default to
    igt_pipe_crc_collect_crc() instead of adding more calls to other
    tests. If tests want special waits on just some of their collect_crc()
    calls, they can use another name instead of "crc".
    
    This is very useful when developing, especially when the CRC we get is
    wrong: we want to look at the screen to see what's going on before we
    can think about how to fix the problem. So let's add this to the lib
    instead of adding this to every single test I need to debug.
    
    v2: Add some documentation (Daniel).
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 3db5762384a9495241c1e80ce315a2092e83686a
Author: Mike Mason <michael.w.mason@intel.com>
Date:   Tue May 5 17:14:55 2015 -0700

    scripts/run-tests.sh: use single combined test list
    
    i-g-t now creates a single combined test list for tests with
    and without subtests. This patch adapts run-tests.sh to that
    change.
    
    Signed-off-by: Mike Mason <michael.w.mason@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit e949c42b496a3cd4f69a2c1953a58d4c1d1f7b46
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue May 12 16:39:45 2015 +0100

    quick_dump: Expand the WM cursor registers
    
    The tool I used to generate that list doesn't support expanding the list
    of registers when dealing with something like CUR_WM_A_*. Expand it by
    hand for now (tm).
    
    Remove CUR_PAL_${pipe}_* for the same reason (and because it's not very
    useful to have).
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 2ce298cf13f023d50132658e1ff7569e7507c5c6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 12 15:25:03 2015 +0100

    igt/gem_stream_writes: Use execbuf LUT to shave a few cycles off dispatch
    
    Since our goal is to have concurrent read/writes of GPU buffers, we want
    to spend as little time in between as possible.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 27cf5847dc9f14417b4a51a0b21213ba8ff04ebd
Author: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
Date:   Tue May 12 13:09:30 2015 +0100

    tests/gem_cs_tlb: fix hardcoded ring id
    
    The test has 4 subparts, one for each ring, but internally they all
    submit to ring 0. Fix it to use the provided ring_id
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 980ccf124a87c05aa11c2406d9cf1575e1e3c08e
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue May 12 11:06:37 2015 +0100

    igt_kms: Do not reset plane position on assigning a fb
    
        commit a26f9f9ad0e679c7ce413a25d34f6914e1174151
        Author: chandra konduru <chandra.konduru@intel.com>
        Date:   Mon Mar 30 13:52:04 2015 -0700
    
            i-g-t: Adding plane scaling test case
    
    Started doing this and broke kms_rotation_crc.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Reviewed-by: chandra konduru <chandra.konduru@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c3bd608fc51620145d29a3ded97370c27cb0ab0c
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue May 12 11:06:36 2015 +0100

    igt_kms: Merge condition in igt_plane_set_fb
    
    There were two paths for fb and !fb.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Reviewed-by: chandra konduru <chandra.konduru@intel.com>
    Cc: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 759bb7ac98eaa830fb94af59c3d743adbf465cc7
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue May 12 11:06:35 2015 +0100

    igt_kms: Avoid NULL ptr deref when commiting disabled planes
    
    I think;
    
       commit a26f9f9ad0e679c7ce413a25d34f6914e1174151
       Author: chandra konduru <chandra.konduru@intel.com>
       Date:   Mon Mar 30 13:52:04 2015 -0700
    
           i-g-t: Adding plane scaling test case
    
    introduced a condition where it attempts to update a disabled plane because
    of the newly introduced size_changed flag which is set for disabled frame
    buffers. Result is a NULL ptr deref in igt_drm_plane_commit (plane->fb->src_x).
    
    Start recognising this case as disabled plane and act accordingly.
    
    v2: Split out igt_plane_set_fb cleanup. (Thomas Wood)
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Reviewed-by: chandra konduru <chandra.konduru@intel.com>
    Cc: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8a5736b496b193ee0211ac34e69e43744e167425
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue May 12 11:06:34 2015 +0100

    kms_flip_tiling: New tiling tests, including Y/Yf
    
    New subtests to excercise flips from tiled to tiled and from
    linear to tiled frame buffers.
    
    These will catch display programming issues like not preserving the
    tiling mode in page flips or not re-programming the watermarks.
    
    v2: Cleanup crc object after failing subtests.
    
    v3:
       * Wait for page flip completion instead of vblank. (Chris Wilson)
       * Added linear->tiled flip tests to catch watermark programming issues.
    
    v4:
       * Refactored for less code.
       * Check crc after page flip to ensure it happened. (Chris Wilson)
       * Skip rather than fail when flip fails. (Chris Wilson)
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b6d26c2a4858d3e6dd70f3278861b333c2758b72
Author: chandra konduru <chandra.konduru@intel.com>
Date:   Mon May 11 11:51:56 2015 -0700

    i-g-t: Update kms_panel_fitting to work on other platforms
    
    kms_panel_fitting currently enabled for SKL only, but as
    panel_fitters are available on prior platforms, enable this
    kms test for them too.
    
    Signed-off-by: chandra konduru <chandra.konduru@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f5dd258cc7276be30d699d68f7c6952b04067529
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 12 10:02:59 2015 +0100

    igt/gem_streaming_writes: Build in a self-test
    
    Use the first pass to write all values prior to the initial execbuf to
    verify that the copy itself is true. Subsequent passes then focus on
    verifying that writing values whilst the GPU is reading from
    neighbouring values is then correct.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a5a010c82d07db6c0397ba7e5f50c00683a5c5f3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue May 12 09:28:34 2015 +0100

    igt/gem_mmap/huge-bo: Fix cut'n'paste error
    
    One paste too many before pushing.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=90411
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 357073c257fddea385a94923024ad142cb3056ec
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon May 11 17:35:35 2015 +0100

    igt/gem_streaming_writes: Trim number of batch buffers allocated
    
    Reduce memory usage for batches by a factor of 64 - which we immediately
    spend some of in increasing the stress.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5f932c4dad73b276fda5b2a44b15fc922af1a35e
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon May 11 19:31:26 2015 +0100

    quick_dump/skl: Add more pipe/plane registers
    
    With the recent developments, add scaler and NV12 registers to the dump.
    Also add the cursor registers that were missing in the first batch.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit f6155ac30c0f195845200174abc41d71279bef49
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon May 11 17:53:44 2015 +0100

    build: Add missing line continuation
    
    When -lrt was added, it was missing a '\' at the end of line. Add it.
    
    Cc: Tim Gore <tim.gore@intel.com>
    Cc: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 09ea86eac13d319fe6a1b84b0b1ff1db1bb86189
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon May 11 16:36:51 2015 +0100

    kms_cursor_crc: Move comment to the appropriate place
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 672238dbf76704019d6248e6031479afb8888d3f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon May 11 15:06:30 2015 +0100

    igt: Add gem_streaming_writes
    
    This tries to replicate the missing barrier observed when using
    asynchronous mmap(wc) on byt.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d9dd33c0d93d5d1a1f9ff3a4a5059367931cadae
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon May 11 15:08:58 2015 +0100

    lib: Add missing '\n' to error message
    
    Those messages where missing a new line at the end. Take the opportunity
    to re-format the messages to fit in the 80 chars limit.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 9b0a32dc80b6b0c0f35d06fc833f29510efccd72
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun May 10 09:09:54 2015 +0100

    lib/core: Limit fatal signal CRASH reporting to the fatal signals
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cb57cdc6327f100ade8d205f6bd2da05cf78c3a4
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu May 7 18:17:32 2015 +0100

    skl_compute_wrpll: Prefer even dividers
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit b3ef2986caebe89adc3fa8a967503f738c38a4da
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu May 7 18:17:08 2015 +0100

    skl_compute_wrpll: Count how many even/odd dividers we compute
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 8d1739dd84070d8bad0b2940b0026f14cb50f13d
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu May 7 16:54:21 2015 +0100

    skl_compute_wrpll: Make sure we respect the DCO frequency constraints
    
    We might as well verify that we have a semblance of all being in order
    by making sure the DCO frequency is within the expected bounds.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit acbcdbd8b71604fc0578894eb8f19d926fd8e55b
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue May 5 16:31:37 2015 +0100

    skl_compute_wrpll: Add a way to test the SKL WRPLL algorithm
    
    I had various problems (infinite loops, unable to compute dividers for
    certain frequencies) after implementing a BSpec update. Much easier to
    debug that in userspace.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 5dbeebc8aadab79047aab978766d8a5677de9b2d
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue May 5 15:45:21 2015 +0100

    compute_wrpll: Rename ddi_compute_wrpll to hsw_compute_wrpll
    
    We're going to add the SKL version, time to rename the HSW/BDW one.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 09f4175889a2107691a9e21d27d74fcd572121b0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 8 16:44:40 2015 +0100

    igt/gem_mmap_gtt: Add pagefault-of-doom failure case
    
    This is a test that should be a showcase for partial views...
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 578795ff9549f680d426879cf19ef6124a51fcc4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 8 14:35:37 2015 +0100

    lib: Teach igt to handle signal failures gracefully
    
    If we see a fatal signal in a subtest, fail.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit be955173d0481dd7f5dabe4a8531811d17e66470
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri May 8 11:43:50 2015 +0100

    igt/gem_mmap_gtt: Check GTT mmapping of large tiled objects
    
    Move function CPU mmap test of large bo to gem_mmap, and include a
    page-by-page copy between two huge objects (as we have had many bugs
    triggering pagefault-of-doom for full apertures before).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cf9f48e704030b606260919f2da4c4287e51c4af
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Feb 19 15:41:15 2015 -0200

    lib: add igt_draw
    
    For all those IGT tests that need an easy way to draw rectangles on
    buffers using different methods. Current planned users: FBC and PSR
    CRC tests.
    
    There is also a tests/kms_draw_crc program to check if the library is
    sane.
    
    v2: - Move the test from lib/tests to tests/ (Daniel).
        - Add igt_require() to filter out the swizzling/tiling methods we
          don't support (Daniel).
        - Simplify reloc handling on the BLT case (Daniel).
        - Document enum igt_draw_method (Daniel).
        - Document igt_draw_get_method_name() (Paulo).
    v3: - Add IGT_DRAW_MMAP_WC (Chris).
        - Implement the other trivial swizzling methods (Chris).
        - Remove the gem_sync() calls (Chris).
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 8d3023c15bcc9890ab7b89fa8ae4564a295078c2
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue May 5 16:20:05 2015 -0300

    tests/kms_fbc_crc: fix debugfs read
    
    Commit 47f6b1305cc3752f318a555b932e194e1500c1d8 completely broke this
    test due to the fread() assertion. When we're reading the debugfs file
    we really don't care about how many bytes we read because the number
    is not constant and we just use strstr() later. Change the assertion
    to make it check for at least 1 byte read, just to make sure no one
    changes that again.
    
    Regression introduced by:
    commit 47f6b1305cc3752f318a555b932e194e1500c1d8
    Author: Thomas Wood <thomas.wood@intel.com>
    Date:   Wed Mar 25 16:42:57 2015 +0000
        igt.cocci: check the return values of various functions
    
    Cc: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 159562c8251d3bd27d338ea7ac6a2936becd05c2
Author: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
Date:   Wed May 6 15:01:30 2015 +0100

    tests/gem_ppgtt: Check for vm leaks with flink and ppgtt
    
    Using imported objects should not leak i915 vmas (and vms).
    
    In practice this simulates Xorg importing fbcon and leaking (or not) one vma
    per Xorg startup cycle.
    
    v2: use low-level ioctl wrappers and bo offset to check the leak (Chris)
    v3: use the flinked bo as batch (Chris)
    v4: add check on offset, remove unneeded  assignments (Chris)
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com> (v2+)
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit aa720ffaf59da0802fe58bd5850075432f644f40
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed May 6 11:38:06 2015 +0200

    lib/mmio: One more s/OUTRET/OUTREG/
    
    A those typos ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 9bb2ca3a83efd528c11c8515ad85456d53717619
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 25 21:15:34 2015 +0100

    lib/batchbuffer: Fix COLOR_BLIT_COPY_BATCH_START
    
    Reviewed-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c0ed7d344af4d60d2c9663041233c3e0fbc2dc38
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Mar 24 17:35:10 2015 -0300

    tests/kms_fbc_crc: remove redundant information from data_t
    
    While it is nice to have shorter names for the most-accessed
    variables, it makes the code more difficult to read since it's not
    clear to the code reader whether that "gem_handle" is from some FB or
    something else. The reader also has to audit the code to see if, for
    example, the value of data->handle[0] stays consistent with
    data->fb[0].gem_handle all the tame or if at some point the value is
    replaced with something else. So remove the redundant information,
    making it explicit that we're using the gem handles and FB IDs of the
    framebuffers all the time.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 235e87de450714df9982fb86fae2dd5a9e8e2980
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Mar 24 17:11:05 2015 -0300

    tests/kms_fbc_crc: use igt_pipe_crc_collect_crc()
    
    Instead of its hardcoded implementation.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 26ff2c7daac88e12969530a62703913ba9ee0fe3
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Dec 5 13:40:00 2014 -0200

    tests/kms_fbc_crc: add wait_for_fbc_enabled()
    
    The code has a common pattern of "wait 300ms, then check if FBC is
    enabled". Most of the time FBC is enabled in either 50ms or 0ms, so
    introduce wait_for_fbc_enabled(), which can return much earlier if FBC
    is actually enabled before the 300ms timeout.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 9bb04d3aa6a2b1b86e091967e312a19ce337df4d
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Dec 3 16:12:49 2014 -0200

    lib: add igt_wait()
    
    Just a little helper for code that needs to wait for a certain
    condition to happen. It has the nice advantage that it can survive the
    signal helper.
    
    Despite the callers added in this patch, there is another that will go
    in a separate patch, and another in a new IGT test file that I plan to
    push later.
    
    v2: Check COND again before returning in case we hit the timeout.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit a734ac2058fd0cce842a4290335c0697d89b2d63
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Apr 28 13:31:30 2015 +0300

    rename global mmio variable to igt_global_mmio
    
    Global variable names should reflect the fact that they are indeed
    global, and at the very least they should not be as short as just
    "mmio". Rename mmio to igt_global_mmio.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit db84a8cf143f5d343220eb1d85a20b8b3da4036c
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Apr 28 11:39:22 2015 +0300

    tests/gen7_forcewake_mt: use local mmio variable
    
    igfx_get_mmio() uses the global mmio variable by accident. Use a local
    variable instead.
    
    The intention is to rename the global variable later on, so shadowing it
    here does not matter.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 0bbbc6360fb1b7adf325ada1bdf7e200ceb8c5c4
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Apr 28 13:34:13 2015 +0300

    intel_vga_{read,write}: use INREG and OUTREG
    
    Use INREG and OUTREG instead of using mmio directly.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 33c2e8b083953401949a9540f47ebb5770e4b543
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Apr 28 13:25:35 2015 +0300

    intel_display_poller: use INREG and OUTREG
    
    Use INREG and OUTREG instead of using mmio directly.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit fb1515c170b01575dc18d24879dd20bc300db22d
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Wed Apr 15 15:50:19 2015 +0300

    intel_watermark: switch to INREG
    
    Use INREG instead of using mmio directly.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 12d785bcd47396b477cca206e5db2158d02ffd5b
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Wed Apr 15 15:47:34 2015 +0300

    intel_reg_{read,write}: switch to INREG and OUTREG
    
    Use INREG and OUTREG instead of using mmio directly.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 87eb37c86b5c4212e48cae1a05a9c21b7ff03e3e
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Wed Apr 15 15:45:25 2015 +0300

    intel_reg_checker: switch to INREG
    
    Use INREG instead of using mmio directly.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit e9f4c5f9b92ade8465414d3a461d490bf7861476
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Wed Apr 15 15:39:55 2015 +0300

    intel_backlight: switch to INREG and OUTREG
    
    Use INREG and OUTREG instead of using mmio directly.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 510ac32db14e5e847aaf998992f69768c7fffc41
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Wed Apr 15 15:42:00 2015 +0300

    intel_reg: switch to INREG and OUTREG
    
    Use INREG and OUTREG instead of using mmio directly.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 23b7f089207e44244ecc5757a2be5263db08581b
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Apr 28 11:52:42 2015 +0300

    lib: add 16 and 8 bit versions of INREG and OUTREG
    
    Add INREG8, INREG16, OUTREG8, and OUTREG16. While at it, cleanup doc
    comments of INREG and OUTREG.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 30e84df0c110971cc07cc81fdbf66aa9e7840bc6
Author: David Herrmann <dh.herrmann@gmail.com>
Date:   Mon May 4 20:15:54 2015 +0200

    tests: add drm_auth tests for generic DRM-auth-magic testing
    
    This adds tests/drm_auth.c which tests for drmGetMagic() and
    drmAuthMagic() deficiencies.
    
    Signed-off-by: David Herrmann <dh.herrmann@gmail.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3be592001b6944433490d491596694ca66bd134f
Author: Michel Thierry <michel.thierry@intel.com>
Date:   Tue Apr 14 16:42:58 2015 +0100

    igt/gem_ctx_exec: Add lrc lite restore subtest
    
    Exercise lite-restore (re-submit a context that is currently running),
    by queueing several small batchbuffers.
    
    This test helps to validate WaIdleLiteRestore.
    
    Signed-off-by: Michel Thierry <michel.thierry@intel.com>

commit c4ec47b46d7e716f153a904c5a5b5b01a5afc7de
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun May 3 09:16:25 2015 +0100

    igt/gem_exec_lut_handle: Force slow relocation path
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c317b788c09e047c951b36a4a8acbce9f8d2f03e
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Thu Apr 30 12:27:54 2015 +0100

    igt_fb: Close the image file when we are done with it
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 48a27bcaf6a284235c41ce196b4969a472f264e6
Author: Tim Gore <tim.gore@intel.com>
Date:   Mon Apr 27 16:17:50 2015 +0100

    lib/igt_core.c : only disable low mem killer once
    
    The call to low_mem_killer_disable(true) was being done
    from within function oom_adjust_for_doom. However,
    oom_adjust_for_doom gets called from 3 places. We only
    want the call to low_mem_killer_disable(true) to happen
    during common_init, so call it from here instead of from
    oom_adjust_for_doom.
    
    v2:Thomas Wood pointed out that the initial call to disable
    the low_mem_killer does not get made when we are just
    listing subtests; so I have qualified the call from the
    exit handler, which re-enables the low_mem_killer, with
    if (!igt_only_list_subtests()).
    For belt and braces I have also made low_mem_killer_disable
    idempotent, so multiple calls to disable or re-enable are
    safe.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    [Thomas: small coding style fix]
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 637f0455da91c91eedae1245464b45f0c3f7310e
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Mon Apr 27 12:29:11 2015 +0100

    kms_rotation_crc: Do not leak framebuffers during test duration
    
    Test used to call prepare_crtc twice in the plane loop and leaked two
    framebuffers per [subtest]x[pipe]x[plane].
    
    What the loops really wants to do, instead of second invocation of
    prepare_crtc, is to just turn on the display with the unrotated fb to
    verify that the plane property has been restored by the VT transition
    from previous to graphics mode.
    
    To enable that factor out code which does that from prepare_crtc into
    commit_crtc and call it instead.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Sonika Jindal <sonika.jindal@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 4650d3406cd2e1378b215793730b59c065c230d4
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Apr 14 22:33:33 2015 +0300

    man: add man page for intel_reg in reStructured text format
    
    Produce the intel_reg man page from rst using rst2man. Also facilitate
    writing any man page in reStructured text, as long as rst2man is
    available.
    
    v2: configure check for rst2man, credits to Thomas Wood for that.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 30a1360f6abeed5f7aaaa069380d07f94ae9a036
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed Apr 29 13:24:34 2015 +0100

    igt_fb: Transfer existing content to Cairo surface for Y/Yf frame buffers
    
    Rendering into Y and Yf tiled frame buffers with Cairo was losing the
    previous content ie. was starting from black. This is different than the
    behaviour with linear and X tiled so make it the same by blitting the
    initial content when creating the rendering context.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit fc69bb0de5f072be45e327bfff0efade6880a1a9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 27 21:05:33 2015 +0100

    igt/gem_exec_big: Check 64bit relocation values
    
    On gen8, we should check that the full 64bit relocation value is
    correct, and we should be sure to poison the relocation offset between
    runs.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 40b45bace325b13519c4ddc71eb64665c7796350
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Apr 27 17:34:41 2015 +0100

    tools: add missing header to distributed sources
    
    Make sure all the sources for intel_reg are included in the
    distribution.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit bad8834ee77e7defb3e1ceb150b07bf6e82d4693
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Apr 27 15:32:41 2015 +0100

    tools: update .gitignore
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit a3e336e4614613e30b2bb2cd21b76c1c69614475
Author: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
Date:   Fri Apr 24 10:38:58 2015 +0300

    tests/gem_mmap_gtt: Use PAGE_SIZE instead of hard coded value
    
    Now that there is PAGE_SIZE define, use it.
    
    Signed-off-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit dbf6468f90f864decc79cb5c5802cb4d230fb46d
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed Apr 22 16:46:48 2015 +0100

    kms_rotation_crc: Use main test for negative cases
    
    Saves a good amount of code duplication by supporting expected
    failures from the main loop.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Sonika Jindal <sonika.jindal@intel.com>
    Reviewed-by: Sonika Jindal <sonika.jindal@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 6f5d400ae9323a7c1c616d591876f29ca0ad0f10
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed Apr 22 16:46:47 2015 +0100

    kms_rotation_crc: No need to square the buffer in paint
    
    Now that size is calculated in a single place and correct geometry passed in,
    paint squares does not need to concern itself with it.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Sonika Jindal <sonika.jindal@intel.com>
    Reviewed-by: Sonika Jindal <sonika.jindal@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit b769a7c96b4ccf33b9ea75f4d99856995b5ac571
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed Apr 22 16:46:46 2015 +0100

    kms_rotation_crc: Consolidate plane and cursor code paths
    
    There can only be one, either a plane or a cursor, in each subtest so there
    is no need for two framebuffer varilables and also some codepaths can be
    unified.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Sonika Jindal <sonika.jindal@intel.com>
    Reviewed-by: Sonika Jindal <sonika.jindal@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit e23a818c180bfd81ec2eeb1e9ac55223f4bf9658
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed Apr 22 16:46:45 2015 +0100

    kms_rotation_crc: Negative test does not need to render anything
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Sonika Jindal <sonika.jindal@intel.com>
    Reviewed-by: Sonika Jindal <sonika.jindal@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 148c0d22816f170284edc4232fc58bff58bd1e28
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed Apr 22 16:46:44 2015 +0100

    kms_rotation_crc: Remove unused variable in negative test
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Sonika Jindal <sonika.jindal@intel.com>
    Reviewed-by: Sonika Jindal <sonika.jindal@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit d9011062404a37929bcfb7f1dbfbd9d901215e6f
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed Apr 22 16:46:43 2015 +0100

    kms_rotation_crc: Framebuffer used for initial modeset does not need to be painted
    
    It is just there to light up the display using the full modeset. Also renamed it
    from fb_full to fb_modeset to be more descriptive.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Sonika Jindal <sonika.jindal@intel.com>
    Reviewed-by: Sonika Jindal <sonika.jindal@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 4dd79d13c94a48c1d346eddb4936d0990c55fdab
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed Apr 22 16:46:42 2015 +0100

    kms_rotation_crc: Local framebuffers do not need to be global
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Sonika Jindal <sonika.jindal@intel.com>
    Reviewed-by: Sonika Jindal <sonika.jindal@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 019ae907ffcb6c4470ddb114a4d0de9634dc4fef
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 26 12:16:44 2015 +0100

    lib: Fix types for gem_mmap*
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit fb950bc17ff8dfa3235535a12f0c4dcde281b2e3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 13 19:04:13 2015 +0100

    lib: Cache static queries
    
    We frequently check for device capabilities, for which we can safely
    assume that there is but one on a system and so cache the first query
    value and return it for all future queries. The benefit is to reduce
    dmesg debug spam which helps when either bringing up a test or trying to
    track down why a test fails.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 10f903aa23932e8bce383ee56db8aaefd73dfb28
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 26 11:21:10 2015 +0100

    igt/gem_pwrite: Check that mmap(wc) succeeds
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cd812a4e89db0150bfcff6d91ffffea37dc106c9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 26 11:18:28 2015 +0100

    igt/gem_pwrite: Delete unused mmap(wc) for the big CPU test
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 49bcdc84a3e420a420bce9798b683a02273373f4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 26 10:39:06 2015 +0100

    igt/gem_pwrite: Also test surfaces larger than the GTT
    
    Go big or go home!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 236bab5cfd2d225d1eeec32d4bfa5f0757952975
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 26 11:11:55 2015 +0100

    lib: Fix types for gem_create()
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 263da26b9c2ce33a4b6aac05acf97b21fe51d70f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 26 10:16:39 2015 +0100

    intel-gpu-overlay: Improve error message for failure to open an output
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit be6e32b9254f2740da0a287caf2eaa1d745b77a3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 26 10:13:49 2015 +0100

    igt/gem_pwrite: Test handling of larger than mappable buffers
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit dfda0b6aeccef464cc6f1af60d8ea16c11fb13f7
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Wed Dec 10 14:27:07 2014 +0200

    intel_reg: introduce one intel_reg tool to rule them all
    
            Three Tools for the Elven-kings under the sky,
            Seven for the Dwarf-lords in their halls of stone,
            Nine for Mortal Men doomed to die,
            One for the Dark Lord on his dark throne
            In the Land of Mordor where the Shadows lie.
            One Tool to rule them all, One Tool to find them,
            One Tool to bring them all and in the darkness bind them
            In the Land of Mordor where the Shadows lie.
    
                    J.R.R. Tolkien's epigraph to The Lord of The Tools
                     | sed 's/Ring/Tool/g'
    
    Introduce intel_reg as the one Intel graphics register multitool to
    replace intel_reg_read, intel_reg_write, intel_iosf_sb_read,
    intel_iosf_sb_write, intel_vga_read, intel_vga_write, intel_reg_dumper,
    intel_reg_snapshot, and quick_dump.py.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit e1ce5eac338f44deda488a44db04faceea12f13a
Author: Sonika Jindal <sonika.jindal@intel.com>
Date:   Wed Apr 22 16:44:05 2015 +0530

    kms_rotation_crc: Adding test for 90/270 rotation
    
    Adding 90/270 rotation testcase for primary and sprite planes.
    
    v2: Added position test for sprite. Checking for gen > 9 for 90/270.
    Some cleanup and rebase.
    v3: Added test for unsupported tiling and unsupported pixel format for 90/270
    v4: Added the legacy commit to initiate modeset in the negative test(Tvrtko)
    
    Signed-off-by: Sonika Jindal <sonika.jindal@intel.com>
    Reviewed-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 7ef80c0a980bc6b2cb58de7aec443b343ac0d33e
Author: Sonika Jindal <sonika.jindal@intel.com>
Date:   Tue Apr 7 13:59:03 2015 +0530

    lib/igt_kms: Let set_property return the result
    
    Return the return value of the set_property ioctl and add check for
    the failure.
    
    Signed-off-by: Sonika Jindal <sonika.jindal@intel.com>
    Reviewed-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 7aeecc197bcf586fe5b8e2091cf3e647991382f9
Author: Tim Gore <tim.gore@intel.com>
Date:   Wed Apr 22 10:29:08 2015 +0100

    tests/Android.mk : skip kms_legacy_colorkey if no cairo
    
    test kms_legacy_colorkey depends on cairo, so add it to
    the list of test not to build unless "ANDROID_HAS_CAIRO"
    is set.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 20ad3e55fbd33f4400d16d4186befd7e2e5d19ac
Author: Tim Gore <tim.gore@intel.com>
Date:   Tue Apr 21 17:08:17 2015 +0100

    tools/quick_dump/makefile.am: add -lrt to get clock_gettime
    
    Attempting to build IGT on linux without libunwind fails
    due to tools/quick_dump not linking the rt library,
    causing an undefined symbol error for clock_gettime.
    Adding -lrt to the list of libraries in Makefile.am fixes
    this.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 52888df084f51899e7e873a24f6c1aa5c66dd191
Author: Tim Gore <tim.gore@intel.com>
Date:   Tue Apr 21 14:53:03 2015 +0100

    lib/drmtest.h : fix mmap64 again
    
    In android mmap64 was redirected to mmap2 because mmap64
    was not alway available. But now mmap2 has been removed
    from 64 bit android builds (and mmap64 is available), so
    update preprocessor conditional to check for __x86_64__.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 5b7edb9cb010fc770f069a2fbba2782ea3ee6936
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Apr 20 12:35:01 2015 +0100

    docs: avoid escaping characters in documentation comments
    
    Avoid having to escape certain characters in documentation comments by
    not allowing docbook markup tags. Markdown formatting in documentation
    comments is still supported.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit cc9110c44733f63d1c81fc546becf7b22fbac394
Author: Mike Mason <michael.w.mason@intel.com>
Date:   Fri Apr 17 15:10:35 2015 -0700

    tests/tools_test: Find tools in source or installed locations
    
    Signed-off-by: Mike Mason <michael.w.mason@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 36ecc3180a8404c5c9a4ac4db09e69d9679f0aab
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Tue Apr 14 18:04:01 2015 -0700

    tests/kms_psr_sink_crc: Make render size and stride based on modified fb size
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit c35247596033c8bd2fd4d834f3941a7075aa84c8
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Fri Mar 13 12:11:54 2015 -0400

    test/kms_psr_sink_crc: Add dpms off/on tests.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 782d5e7a032d1a34ef7f45970a5d8025ec47aece
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Fri Mar 13 12:10:20 2015 -0400

    test/kms_psr_sink_crc: Split plane setup operations
    
    No functional changes. This reorg will allow to do some
    operations like dpms off/on with different places to wait
    for psr to get active.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit fd9ef1b8c87e0016c8820aed0d42542894430b85
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Fri Mar 13 12:28:07 2015 -0400

    tests/kms_psr_sink_crc: remove timeout option from wait_psr_entry.
    
    No functional changes. Just making timeout unique for any case.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit ae9c685133c5a1f30418d6fda1ce898c11c7053c
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Tue Dec 9 20:44:11 2014 -0500

    lib/igt_aux: Introduce igt_interactive_debug_manual_check.
    
    This is an extention of igt_debug_wait_for_keypress that also can have
    customized message and return key pressed.
    
    v2: This is actualy a v2. V1 was an extension of original
        igt_debug_wait_for_keypress but it was nacked.
    
    v3: Make [Y/n] check inside aux function as suggested by Daniel.
        Also renaming and adding first use case along with the axu function.
    
    v4: Simplify function name and make it assert pressed key
        is different from n/N as suggested by Daniel.
    
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit e1ac04462d94a9f51335b9f3849ce0bb29b534e4
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Fri Dec 5 20:03:43 2014 -0500

    tests/kms_psr_sink_crc: Add manual mode.
    
    Sink CRC is the most reliable way to test PSR. However in some platforms
    apparently auto generated packages force panel to keep calculating CRC invalidating
    our current sink crc check over debugfs.
    
    So, this manual test help us to find possible gaps on this platforms where we cannot
    trust on sink crc checks.
    
    v2: Accept Daniel's suggestions:
        * Avoid strcpy
        * don't override assert definition
        * Make --interactive-debug for every testcases instead using local --manual
    
    v3: Sink CRC can be unreliable for other platforms as well so let's skip and warn
        when we detect the misbehaviour instead hardcoded per platform.
    
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit b7b2ecbaefc86debf858141e3d8712a28cfb2b21
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Fri Dec 5 20:03:31 2014 -0500

    tests/kms_psr_sink_crc: Make plane_move visible to human eyes
    
    this will allow manual tests when crc isn't available.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 00992f7d86b6c821030738932a722c581fd75b5d
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Fri Dec 5 20:01:41 2014 -0500

    tests/kms_psr_sink_crc: Make mmaps visible to human eyes
    
    this will allow manual tests when crc isn't available.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit f20690d864b5483026a9147bb1cab2b009a87de4
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Fri Dec 5 19:45:37 2014 -0500

    tests/kms_psr_sink_crc: Make render visible to human eyes
    
    This will allow manual tests when crc isn't available.
    
    v2: Remove unused and non-sense buf->size and decrease buf->stride a bit as suggested by Daniel.
    
    v3: Fix v2 mistake and get buf->size back with a value that makes more sense.
        TBD: to be changed for variable size depending on modified fb size on following patch
    
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 3cb21246c1310c2f34c2dc99c893cab060333cb0
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Fri Dec 5 19:43:34 2014 -0500

    tests/kms_psr_sink_crc: Make blt visible to human eyes
    
    This will allow manual tests when crc isn't available.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 1cbe7dd54cc95281407f10e55f51a201b526b245
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Apr 16 17:40:28 2015 +0100

    tests: update .gitignore
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 2b74b2bb3358f80c72240d1a5ea6f304b21fba8d
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Mar 27 20:51:46 2015 +0200

    tests: Add kms_legacy_colorkey
    
    Add a quick test to make sure the legacy set colorkey ioctl only works
    for sprite planes.
    
    v2: Drop igt_fixtures
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 4271b15f3c8df92f7f0e5201b292644d66da0054
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Apr 9 21:23:06 2015 +0300

    quick_dump: Fix undefined symbols from libunwind
    
    ../../lib/.libs/libintel_tools.a(igt_core.o): In function `print_backtrace':
    intel-gpu-tools/lib/igt_core.c:981: undefined reference to `_Ux86_64_getcontext'
    intel-gpu-tools/lib/igt_core.c:982: undefined reference to `_ULx86_64_init_local'
    intel-gpu-tools/lib/igt_core.c:983: undefined reference to `_ULx86_64_step'
    intel-gpu-tools/lib/igt_core.c:987: undefined reference to `_ULx86_64_get_proc_name'
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 3dff4af5e053b9b64b1167621088ed8eea9e3222
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Apr 9 21:20:25 2015 +0300

    quick_dump: Don't allow undefined symbols in _chipset.so
    
    Every time _chipset.so has undefined symbols we fail to notice it
    at build time and then get to wonder why quick_dump fails to actually
    work. Pass -Wl,--no-undefined to the linker to get a build time error
    instead of the current runtime error.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit beddb3be3ffcd61b67a5d541134a5e76685e6f14
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Apr 14 19:02:19 2015 +0100

    igt/gem_exec_lut_handle: Hide exec latency
    
    The first test tries to rewrite relocations in an active batch, which is
    a useful test and measurement. However, the overhead of the exec may
    dominate and so we want a measurement without that overhead as well.
    Using a pool of batches should allow for the oldest to idle whilst we
    setup the next (and so the wait should be non-existent).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ecb03266b208bd95d160b8fb32d14fda87c5eb10
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Apr 13 17:37:22 2015 +0100

    lib: load images from the data directory in igt_paint_image
    
    Update igt_paint_image so that it can read images from the package data
    directory.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 90dadcd0da63d70155bb4c5a40c80a4f5c3e821c
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Apr 13 12:09:48 2015 +0100

    lib: use a critical warning when unable to open a data file
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 8b3082a40e9a17fcd411aabc5c24c2e2ada5c13a
Author: chandra konduru <chandra.konduru@intel.com>
Date:   Mon Mar 30 13:53:00 2015 -0700

    i-g-t: Adding panel fitting test case
    
    This patch is adding i-g-t test case to test panel fitting usages.
    
    v2:
    -use new tiled types when calling igt_create_fb (me)
    
    Signed-off-by: chandra konduru <chandra.konduru@intel.com>
    [Thomas: convert test to use igt_simple_main]
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit a26f9f9ad0e679c7ce413a25d34f6914e1174151
Author: chandra konduru <chandra.konduru@intel.com>
Date:   Mon Mar 30 13:52:04 2015 -0700

    i-g-t: Adding plane scaling test case
    
    This patch is adding i-g-t plane scaling test case to test couple basic
    display plane scaling usages. Additional test scenarios can be added later.
    
    v2:
    -Added iterative scaling to visually observe scaling (me)
    
    v3:
    -Added a flag to control primary plane scaling (me)
    
    v4:
    -Use new tiled types when calling igt_create_fb (me)
    
    Signed-off-by: chandra konduru <chandra.konduru@intel.com>
    [Thomas: convert test to use igt_simple_main]
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit ace4208702c59205754507bec0c9ae4401a4f865
Author: chandra konduru <chandra.konduru@intel.com>
Date:   Mon Mar 30 13:44:32 2015 -0700

    i-g-t: Adding test case to test background color.
    
    Adding i-g-t test case to test display crtc background color.
    
    v2:
    - Added IGT_TEST_DESCRIPTION() (Thomas Wood)
    - Added to .gitignore (Thomas Wood)
    - Added additional details to function header (Thomas Wood)
    - Simplified igt_main (Thomas Wood)
    
    v3:
    - rebased to latest master (me)
    - took sleep calls out (Daniel)
    - use new tiled types when calling igt_create_fb (me)
    
    Signed-off-by: chandra konduru <chandra.konduru@intel.com>
    [Thomas: convert test to use igt_simple_main]
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit e371b3fbad2e45cfe669953ef4203e9f44659f65
Author: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
Date:   Tue Apr 14 14:14:57 2015 +0300

    tests/gem_mmap_gtt: add huge BO test
    
    Add a straightforward test that allocates a BO that is bigger than
    (by 1 page currently) the mappable aperture, tests mmap access to it
    by CPU directly and through GTT in sequence.
    
    Currently it is expected for the GTT access to gracefully fail as
    all objects are attempted to get pinned to GTT completely for mmap
    access. Once the partial view support is merged to kernel, the test
    should pass for all parts.
    
    v2:
    - Corrected BO domain handling (Chris Wilson)
    - Check again after GTT access for added paranoia (Chris Wilson)
    
    v3:
    - Avoid flush by using pread (Chris Wilson)
    - Free gtt_pattern buffer too.
    
    v4:
    - Add more comments (Tvrtko Ursulin)
    - Use igt_require (Tvrtko Ursulin)
    
    v5:
    - Remove wrong message from igt_require_f (Tvrtko Ursulin)
    - After digging deeper to it, just igt_assert that the CPU
      mapping needs to succeed.
    
    Cc: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
    Reviewed-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    [Thomas: remove unused label]
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 577fb75ed88d01f86dbfa593d90cb91ebfa37a2b
Author: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
Date:   Wed Apr 8 15:55:41 2015 +0300

    tests/gem_mmap_gtt: clarify BO domain setting functions
    
    Add suffix and complementary function for CPU domain.
    
    v2:
    - Change function signatures to be consistent with the rest
    
    Signed-off-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 629759c2d1fea11a111ee79faf6afd08ff4c99d2
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Apr 9 16:34:12 2015 +0100

    NEWS: Updates
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit c06bba1256d8435fbcea45e54897ad533ad8c1e9
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Apr 9 17:08:07 2015 +0100

    tests: install the test list
    
    Cc: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit e72686b83b0bb51a0266d61c3024a5f5a6e17af7
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Mar 13 14:15:46 2015 +0000

    tests: create a single combined test list
    
    All tests now respond in a consistent way such that separate lists for
    tests with and without subtests are no longer necessary.
    
    v2: fix other references to the test list
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit cff102ebb264eb86554651c7cbf259b4342b76c3
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Apr 9 09:27:54 2015 +0100

    lib: use test failure status for igt_set_timeout
    
    Use a failure status code for timeout to avoid confusion between tests
    that take too long to execute versus a failure due to an operation
    taking longer than expected.
    
    v2: Add a "timed out" message before exiting. (Daniel Vetter)
        Fix the timeout library check by disabling hard errors in xfail
        tests, since these share the same exit status as test failure.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit b47032e191f0afb8d2dabf90889eee6dac8fc0e1
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Apr 9 09:24:12 2015 +0100

    lib: add a define for test failure exit status
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 41fe1d1a4452891a297cea427a338c8769fc5c26
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 13 11:54:18 2015 +0100

    lib: Implement gem_sync() using WAIT
    
    When synchronising to rendering, we only want to wait for it to complete
    and avoid the cache-domain side-effects of SET_DOMAIN if possible. This
    has the advantage of speeding up a few tests (and thereby making the
    actual test more explicit in terms of kernel operations). Of course some
    tests may be reliant on the side-effects...
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9fd6e07369837ee268097e7aae4c8dea05431fa1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 13 10:48:08 2015 +0100

    igt/prime_self_import: Ensure driver state is consistent between counts
    
    Similar to gem_flink_race, we need to make sure that when we count
    objects, the driver is in an identical state. We do this by flushing all
    work before counting.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=90003
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2e526ae9cd05f4f2c2e166071b78c68564e191aa
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Apr 12 13:32:17 2015 +0100

    igt/gem_flink_race: Explicitly quiesce the GPU before counting objects
    
    By explicitly quiescing the GPU we force it to a known and ideally
    identical state when counting objects. In particular, this should make
    the batch-pool status the same and not cause us to detect a negative
    leak.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 007ff02cbcf008628476948cad8e9ea08c6f5f26
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 10 09:48:46 2015 +0100

    igt/gem_mmap_wc: Explicitly check for use-after-close
    
    We already rely on the mmap(object) surviving close(), but make the test
    explicit and early.
    
    Secondly, we don't technically need to call set_domain after writing
    through the CPU then reading through WC, since the CPU cache is
    consistent for those two paths. Test it.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d36465d5205c5510ca4078346e47e8f3afc432e2
Author: liu,lei <lei.a.liu@intel.com>
Date:   Thu Apr 9 21:17:33 2015 +0800

    Correct kms_fbc_crc case
    
    Debugfs i915_fbc_status shows "FBC unsupported on this chipset"
    not "unsupported by this chipset" if the platform doesn't support
    FBC feature. That typo will cause case fail on some platforms such
    as byt, bsw.
    
    Signed-off-by: Lei Liu <lei.a.liu@intel.com>

commit b556c9e8e5f53874da902c0c54442ef3eb56353e
Author: Shuang He <shuang.he@intel.com>
Date:   Tue Apr 19 04:16:06 2011 +0800

    tests: Fix duplicate 'kms_flip_event_leak' entry in tests/Makefile.sources
    
    Or, it will cause piglit failure to run I-G-T test case
    
    Signed-off-by: Shuang He <shuang.he@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 1f6a64ee8078ac32c2986ee9f043c55ce6f22542
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 8 21:32:58 2015 +0100

    igt/gem_exec_lut_handle: Put some operations back!
    
    In order to force relocations, we have to remember to clear the presumed
    offsets that get filled in by each pass.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e22525064d357a65f480873ef9d28985e9957237
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 8 20:22:11 2015 +0100

    igt/gem_exec_lut_handle: Trim a few operations from submission
    
    Move all the execbuffer construction upfront and do it once per round,
    rather than per relocation pass. It helps reduce runtime, but more
    importantly it removes the test overhead from out of the kernel
    measurement.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9d98ccb860f529ef0bef4bdffe0733ce348f1d6f
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Apr 8 11:46:39 2015 +0100

    tests: use standard install prefix for programs, scripts and data
    
    Use the pkglibexec and pkgdata prefixes rather than setting bindir and
    datadir. This also removes the extra 'tests' directory from within the
    package libexec and data directories.
    
    Cc: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 4e11307e0786d6a4fac014136c914c019aa9abb4
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Apr 8 11:23:05 2015 +0100

    tests: ensure scripts and data are included in the distribution
    
    Prefix the test scripts and data variables with dist_ to ensure they are
    included in the distribution.
    
    Cc: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 564dfd45a99e688c0a450f911adb864f4d5bd6b5
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Apr 2 11:50:01 2015 +0100

    tests/kms_fbc_crc: fix fread() return value assertion
    
    Use 1 as the element size to check the number of bytes returned is
    greater than 0, rather than checking the number of elements returned.
    
    This fixes a regression from commit 47f6b13 (igt.cocci: check the
    return values of various functions).
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=89833
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 074d8b440ef37eeb5fc8195a84a8c970f385a563
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Mar 31 20:32:36 2015 +0300

    tools/intel_reg_dumper: fix PIPECONF decode
    
    - decode the register for BXT too
    - decode interlace on VLV/CHV too
    - don't decode rotation and bpc on platforms where these fields are not defined
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 07a58707c3e3310c8cd87b7fdf53526090fad748
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Mar 31 20:32:35 2015 +0300

    tools/intel_reg_dumper: fix DSPCNTR decode for BXT
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 7027227ca24dc4acfa93e772074b111cb0734d65
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Mar 31 20:32:34 2015 +0300

    tools/intel_bios_read: fix SSC freq for BXT
    
    On BXT the SSC reference frequency is fixed 100MHz.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 790398bbbdc759882255c6f19537c138bfa094a6
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Mar 31 20:32:33 2015 +0300

    list-workarounds/bxt: Add Broxton to the list of valid platorms
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit ab7619b5d2d6ef16dfee86f0bdfc4dbea3c6e931
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Mar 31 20:32:32 2015 +0300

    lib/bxt: Add Broxton PCI ids
    
    v2: Rebase on top of the SKL upstreaming
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit 6cd0ea090cc12dd1fb62a7ced97179ffc6dbb588
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Mar 31 20:32:31 2015 +0300

    lib/intel_chipset: fix HAS_PCH_SPLIT on GEN9
    
    In the next patch we'll add support for BXT which is GEN9, but doesn't
    have PCH, so fix the macro accordingly.
    
    No functional change.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit f0cbfb64dfff5fd1d44cf2986f8f85656ee61882
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Mar 31 20:32:30 2015 +0300

    lib/intel_chipset: fix HAS_PCH_SPLIT on CHV
    
    CherryView is GEN8 but doesn't have PCH so fix the macro accordingly.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 1dc4884875b1fa9f2e7ea82f26b6f361249426b8
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Mar 31 20:32:29 2015 +0300

    tools/intel_bios_reader: fix SSC freq for VLV/CHV
    
    VLV/CHV has a fixed 100MHz SSC reference frequency.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit d9a25af39c873199210ce06209254ed456a06263
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Wed Apr 1 12:08:59 2015 +0300

    README: Update dependencies
    
    Add libunwind-dev, sort the list.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 7968098fb7bdb086d611f543832591064d88397c
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Fri Apr 3 18:01:12 2015 -0700

    tests/pm_sseu: Require Gen8+ early in setup
    
    Pre-Gen8 devices should be skipped early instead of failing
    when test resources are not found.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=89822
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>

commit a6c3b32622d3d1cd2f3cb67255cd006b99d3fabb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 6 10:37:41 2015 +0100

    igt/kms_vblank: Simple accuracy test
    
    Queue 60 event to arrive at the same vblank from different points in
    time and make sure it just works.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 43a1f64e7222e9b5a8d7cb2b887002a8b539452e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 3 09:25:02 2015 +0100

    igt/gem_cpu_reloc: Pretty print execbuf failures
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=85672
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 71de427b53582348f96974920dd40d4b4d3163a0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 3 09:07:09 2015 +0100

    igt/gem_persistent_relocs: Add note about known byt/full-ppgtt issue
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=84859
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e8457edba6c41c4d44758e28adabf864be764c00
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 2 20:14:07 2015 +0100

    igt/gem_exec_blt: Prevent assertion failure when running as a test load
    
    gem_exec_blt is used by other scripts to provide a background load, for
    example by drv_missed_irq. This mode doesn't act like a normal test and
    igt complains bitterly about it.
    
    Let's just ignore igt here.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=88041
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8938e1ed474bc4eb6598d5da01bb7001d4e9627d
Author: Tim Gore <tim.gore@intel.com>
Date:   Wed Apr 1 16:56:38 2015 +0100

    tests/Android.mk : skip kms_pipe_b_c_ivb if no cairo
    
    test kms_pipe_b_c_ivb depends on cairo, so add it to
    the list of test not to build unless "ANDROID_HAS_CAIRO"
    is set.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit ebb46bb2e2138b5f864a3fdff21d013d03e7931f
Author: Tim Gore <tim.gore@intel.com>
Date:   Wed Apr 1 16:36:59 2015 +0100

    tests/gem_concurrent.c: rename to gem_concurrent_all
    
    Recent patch #7763349a9a87.. renamed gem_concurrent_blit.c
    to gem_concurrent.c and then added entries to Makefile.am
    to make two identical executeables (but with different
    names) from this source file. This executeable changes its
    behaviour based on argv[0]. But, this has broken the
    Android build, which does not use autotools.
    
    This patch instead renames the source file to match
    the name of one executable (gem_concurrent_all.c) and
    creates a second source file which simply #includes the
    first. The Makefile.am entries are also removed.
    This restores the simple test.c -> test executeable
    relationship seen in the rest of IGT and allows the
    Android build system to work without parsing Makfile.am
    or having to incorporate a special workaround for this
    test.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit a95033fdbcf32ea64ad2b75f38315489ee1c2042
Author: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
Date:   Tue Mar 31 15:53:17 2015 +0300

    tests: install test programs to libexec
    
    Install the test programs by default so that they can be packaged.
    
    Tested with the testdisplay test so that it still runs after the
    modifications as it depends on a data file to be present. Need to
    pass -r option to enable QR code display on success (PNG data file).
    
    Packaging is useful when building a complete software stack for a
    DUT from scratch. This should bring us closer to achieving a
    built-from-scratch testing workflow.
    
    Package maintainers can always decide to ignore the installed files.
    
    v2:
    - Install more tests including scripts and their data
    
    v3:
    - Add clarification to commit message about why we do this.
      (Chris Wilson & Thomas Wood)
    - Change libexec into pkglibexec to comply to standard
      (Thomas Wood)
    - Do not install $(common_files). (Thomas Wood)
    - Make it really obvious the installed files are tests by using
      tests directory name to avoid any confusion with packagers.
    
    v4:
    - Fixed commit message.
    
    v5:
    - Add file locator helper to retain backwards compatibility.
      (Thomas Wood)
    - Test with testdisplay -r option that draws the .png file.
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 590e47c94fd81a182e24b41a715d84491df8cea8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 2 11:37:23 2015 +0100

    igt/kms_vblank: Include a test for comparing blocking drmWaitVblank
    
    The other aspect of the spinlock/interrupt on-off overhead is that when
    we wait for vblank it immediately turns off, and then we immediately turn
    it back on for the next wait.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 992f9f6403b95b9822cb651b38d14a95bebc4e73
Author: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
Date:   Mon Mar 30 14:38:19 2015 +0300

    tests: Add test for pipe B and C interactions in IVB
    
    The tests exercise different combinations of enabling pipe B with modes
    that require more than 2 lanes and then enabling pipe C.
    
    v2: Added a couple more tests for different pipe transitions. (Ander)
        Use custom modes to make the test reliable. (Daniel)
    
    v3: Add IGT_TEST_DESCRIPTION. (Thomas)
        Rename test to kms_pipe_b_c_ivb. (Ander)
    
    v4: Fix subtest enumeration. (Thomas)
    
    Signed-off-by: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 9aeff2b5c57982a5ffd17881e62e94404b10834b
Author: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
Date:   Mon Mar 30 10:03:00 2015 +0300

    lib/kms: Add a way to override an output's mode
    
    So that it is possible to use a custom mode with the simplified mode set API.
    
    v2: Add documentation for igt_output_override_mode(). (Thomas)
    
    Signed-off-by: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 2f0e3cdcab423e86efc8e5aee113844ccd7b5295
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Mar 30 13:19:32 2015 +0100

    lib/tests: add missing library flags
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 04b1526f9dc2ef08b5be2a56e6b8fd770a313872
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Mar 27 15:21:41 2015 +0000

    lib: add debug flags
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit ea453dbb4aaed2a4e59b608b0af0fd41916bf256
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Mar 27 14:30:06 2015 +0000

    gem_exec_blt: fix subtest enumeration
    
    Wrap the sysfs_read and sysfs_write calls in an igt_fixture block so
    they are not executed during subtest enumeration.
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit af3e32cee27e99e461e727bdfb6127421ef09fbc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 30 17:01:51 2015 +0100

    igt/gem_evict_everything: Simplify mlocked_evictions
    
    igt_fork/igt_waitchildren already perform the magic required to raise
    errors based on the exit error code of the child, so take advantage of
    that and kill the overlycomplicated message passing!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9c6e6db03d41d3e075b0e231302810e522854817
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 30 11:09:44 2015 +0100

    Revert "tests/gem_exec_lut_handle"
    
    This reverts commit a5934091b84e3f8804fb3fed35374c5a976dd07e.
    
    Unnerf igt/gem_exec_lut_handle. Sadly completely breaking the
    measurement is not a good excuse to hide regressions.

commit 068f9ceb628b3d721bf3d74c7932afc01a70905c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Dec 3 09:05:54 2014 +0000

    igt/gem_evict_everything: Use mlock to reduce available memory
    
    The idea here is to check what happens when a large process requests
    memory from us - we create and utilize a bunch of surfaces then have to
    relinquish some but continue using the whole working set (so as to force
    reloads).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b9b82fdc5fdcbc43d0720b6aaf79e1f00f407d3a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Mar 29 14:11:28 2015 +0100

    igt/gem_exec_parse: Use a macro for pretty printing the test failure
    
    By moving the assert up a level, we get an much improved assertion
    failure message (e.g. it includes the batch string that fails).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a1e4ec4a68ff1144249aa2f98c6834d296ee2061
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Mar 29 14:10:53 2015 +0100

    igt/gem_cs_prefetch: Use gem_execbuf for pretty printing of failures
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 11291fd52f53d3c729d5ef4e5b2090f38c36cf69
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 26 20:52:00 2015 +0000

    igt/gem_exec_(blt|nop): IGT magic
    
    $ ./gem_exec_nop --list-subtests
    render
    bsd
    blt
    vebox
    gem_exec_nop: igt_core.c:946: igt_skip: Assertion `in_fixture' failed.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 47f6b1305cc3752f318a555b932e194e1500c1d8
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Mar 25 16:42:57 2015 +0000

    igt.cocci: check the return values of various functions
    
    Add rules to fix unused-result warnings when compiling with
    _FORTIFY_SOURCE defined and apply them to the library and tests.
    
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 0c4dd28d2d3b39216f9d041119ebf34cc44b7df7
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Mar 24 17:33:02 2015 +0000

    docs: limit the number of subtests listed
    
    Avoid producing long lists of subtests in the documentation and instead
    provide instructions on how to obtain the full list.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 76dad7f41475347f99e8a8ce6af67020dfd7c0f1
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Mar 23 11:46:25 2015 +0000

    Add default debug flags for tests
    
    Include debugging symbols in tests by default to improve stack traces
    and also set the compiler optimisation level to improve the debugging
    experience.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 277ca2b992c766581ef6ef01ea210808f456fbe0
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Mar 13 17:02:12 2015 +0000

    lib: print a stack trace when a test assertion fails
    
    Add an optional dependency on libunwind to print stack traces when a
    test assertion fails.
    
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 2659cbbf643f2fdbf2f9acf8008edd4c6980cd2f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 26 12:09:57 2015 +0000

    igt/gem_exec_(nop|blt): Repeat measurements at min/max GPU frequencies
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7763349a9a878ca58de4fb559edcbf81040da07b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 26 08:11:43 2015 +0000

    igt/gem_concurrent_blit: Separate out the combinatorial explosion
    
    Apparently nobody else likes testing and debugging GEM coherency issues.
    However, this also means that QA is skipping these vital tests. Split
    out a set of canaries into igt/gem_concurrent_blit and keep the rest in
    igt/gem_concurrent_all.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=89497
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c666a19e0c16821a1ccd2a2ea7dda549d19c67d1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 20 22:37:00 2015 +0000

    igt/gem_exec_blt: Repeat measurement and average
    
    Through away the unstable outliers for a more consistent measurement.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cd8d3809a6e49b0bd9da53b17217f99b3c86243a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Mar 24 09:15:12 2015 +0000

    igt/gem_exec_nop: Repeat and average to stabilize measurements
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4f78f9ffa23f777604c617c48c0b850301c3086e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 23 20:57:02 2015 +0000

    igt/gem_exec_blt: Do a warmup run first
    
    Sometimes it takes a pass for the GPU to come up to full speed, so do a
    "cold" pass first.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6259d0a36b0aa2fd6fc37bdfd9bbede34334d771
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Mar 22 10:33:57 2015 +0000

    igt/gem_exec_blt: Repeat measurements for stablity
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2fa35c7316c26a469c0076a1a98c0b0a715b3386
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 19 08:29:51 2015 +0000

    lib/core: Silence internally used signals
    
    We use SIGTERM to kill off child processes. We use it a lot. Reporting
    everytime we use it is just spam. Treat the similar user signals
    (SIGINT, SIGQUIT and the should-never-have-been SIGPIPE) similarly to
    reduce noise.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Thomas Wood <thomas.wood@intel.com>

commit 559987fc01f16f010681fedff69ffe8fb2231d50
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Tue Mar 24 13:03:26 2015 +0200

    tools/intel_error_decode: Add gen8+ fault data encodings
    
    These two registers contains the 48bit fault address.
    
    Reviewed-by: Michel Thierry <michel.thierry@intel.com>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit f96bfb8e8c62b7e3f6340579fec5be6bb6d50b8e
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Mon Mar 23 11:33:37 2015 +0200

    tools/intel_error_decode: Add decodings for FAULT_REG
    
    Add decodings for FAULT_REG
    
    v2: fix fault encodings and ignore addr type for gen8+ (Michel)
        fix engine mask
    
    Reviewed-by: Michel Thierry <michel.thierry@intel.com>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 0a2ef9c3490eda9b5e28c936bbe7655ff7a05bd7
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Mon Mar 23 11:35:14 2015 +0200

    tools/intel_error_decode: Add ERROR decodings for gen8
    
    Add ERROR decodings for gen8
    
    Reviewed-by: Michel Thierry <michel.thierry@intel.com>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 1cfcca66ec79feb9dbfcad7b7849eddaf026d2cf
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Mar 25 10:53:59 2015 +0200

    tools: Update .gitignore
    
    Ignore intel_watermark and unignore the, now extinct, intel_dpio_{read,write}.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 07707aff752db9e406608fb2ed998bfc35a6f422
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Tue Mar 24 16:20:19 2015 -0700

    tests/pm_sseu: Create new test pm_sseu
    
    New test pm_sseu is intended for any subtest related to the
    slice/subslice/EU power gating feature. The sole initial subtest,
    'full-enable', confirms that the slice/subslice/EU state is at
    full enablement when the render engine is active. Starting with
    Gen9 SKL, the render power gating feature can leave SSEU in a
    partially enabled state upon resumption of render work unless
    explicit action is taken.
    
    v2: Add test description and apply recommendations of igt.cocci
        (Thomas Wood).
    v3: Skip instead of fail if debugfs entry i915_sseu_status is not
        available.
    
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>
    Tested-by: Lei Liu <lei.a.liu@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit aef4605f7c42df222761f6735375f499586d9d25
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Thu Mar 12 10:52:08 2015 -0700

    lib: Add media spin
    
    The media spin utility is derived from media fill. The purpose
    is to create a simple means to keep the render engine (media
    pipeline) busy for a controlled amount of time. It does so by
    emitting a batch with a single execution thread that spins in
    a tight loop the requested number of times. Each spin increments
    a counter whose final 32-bit value is written to the destination
    buffer on completion for checking. The implementation supports
    Gen8, Gen8lp, and Gen9.
    
    v2: Apply the recommendations of igt.cocci.
    
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>
    Tested-by: Lei Liu <lei.a.liu@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 301b9e4bb389a968cfae79a1bea07834436165b8
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Tue Mar 24 11:30:57 2015 -0700

    tests/drv_getparams: Skip instead of fail on EINVAL
    
    Avoid failing on older kernels where the GETPARAM interfaces
    don't exist.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=89669
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>

commit 9ba93c43cfb19c5a82a1d6f20f2d3140c8ca80bf
Author: Tim Gore <tim.gore@intel.com>
Date:   Tue Mar 24 14:16:04 2015 +0000

    tests/gem_tiled_fence_blits: split into subtests
    
    The gem_tiled_fence_blits test tends to get oom killed
    on low memory (< 4GB) Android systems. This is because the
    test tries to allocate (sysinfo.totalram * 9 / 10) in
    buffer objects and the remaining 10% of memory is not
    always enough for the Android system.
    As with a similar issue with gem_render_linear_blits,
    this problem is resolved by splitting into subtests.
    A "basic" subtest uses minimal memory buffers to test
    the basic operation, and a "normal" subtest which is
    skipped if there is insufficient memory.
    
    I also took the opportunity to cull some numeric literals.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>

commit 4d2577e0ddbec1f0be919b113a3eccb0afb53886
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Dec 10 21:17:36 2014 +0200

    tools/intel_watermark: Tool to decode watermark registers
    
    The watermark registers on the gmch platform are a bit of a mess. Add
    a tool to make some sense of them. While at it decode the ilk-bdw wm
    registers as well. SKL+ is left out for now since it's a very different
    beast.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit e5e7a5307113cb7622e6b3da4d66f681e9fe3a40
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Mar 16 13:19:48 2015 +0200

    lib: Add i854 PCI ID
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 978881801e6cb69e27f9a3b016bc7b88d3b13a1d
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Feb 5 19:29:20 2015 +0200

    tools/intel_iosf_sb_read: Support different register strides
    
    Some IOSF SB units ogranize their registers in a pecualiar way. Even
    though the registers are 32 bits wide, the register offsets only
    increment by one when going from one register to the next. Correctly
    deal with this when dumping several consecutive registers.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit bd692becf70acfe0829033f8a33680d3d54fcfb2
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Feb 5 20:04:29 2015 +0200

    tools/intel_iosf_sb_read: Add -c command line option like intel_reg_read
    
    Add a command line option '-c <count>' that can be used to read set of
    consecutive registers without having to specify the offset for each of
    them.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit dcb3edf2a971b2c00cace8bf2c052f76c24af56b
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Feb 5 20:04:29 2015 +0200

    tools/intel_iosf_sb_*: Support reading/writing multiple registers at once
    
    Allow the user to specify a list of registers to read, and register/value
    pairs to write.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 0461e8cf4314ee43ef4440ebdaf68eff2c57e5a2
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Feb 5 16:50:07 2015 +0200

    tools/intel_iosf_sb_*: Use getopt() to parse the options
    
    I want to add some command line options so switch to getopt() to make
    that easier.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 38e3c58cba951ff43f8314edfd0adb8082d81f8b
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Feb 5 19:44:40 2015 +0200

    tools/intel_iosf_sb_*: Replace if ladder with an array and bsearch()
    
    Replace the silly strcasecmp() if ladder with and array that maps the
    unit names to port numbers. And keep the thing sorted so we can do
    the lookup with bsearch() for extra speed :)
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 29ebc68313a8dee9b98fac1b337f9bf60b3bfb0a
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Feb 5 16:18:17 2015 +0200

    tools: Remove intel_dpio_{read,write} tools
    
    intel_dpio_{read,write} as redundant as intel_iosf_sb_{read,write}
    handle the same task.
    
    The difference between the tools was the opcode used to read/write the
    registers, but with DPIO both opcodes work just fine, so there's no need
    for both sets of tools.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 0129b02c7bb9cbff81974cbbaeebc4529d823bb4
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Feb 5 16:17:06 2015 +0200

    toos/intel_iosf_sb_*: Fix DPIO IOSF SB port number
    
    The correct port is 0x12, not 0x13 which is actually GPIO_NC.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit ac28ecefe04ef2961baa78b949e05d87eee55e3f
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Mar 16 13:36:50 2015 +0200

    lib: Allow 32bit addresses for IOSF-SB registers
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 0a3ef582daa961047dabf3008177f60db8984b03
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Feb 5 16:12:11 2015 +0200

    lib: Change IOSF SB devfn to 0.0
    
    The devfn field in the IOSF SB messages is only relevant when there's a
    real PCI bus or some other multifunction device behind a single port.
    Otherwise the port number itself is enough to uniquely identify the
    target. In fact some IOSF SB targets reject the access when devfn is not
    0.0 (eg. GPIO_NC on BYT).
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 06a9c3566462e04d47c3006daeb4ff0c89c5d043
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Mar 24 03:27:08 2015 +0000

    quick_dump/skl: Add power well registers
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 392e8ee75fcbc4da7c972aaa03931c22ed8485e4
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Mon Mar 23 12:49:08 2015 -0700

    tests/pm_rps: add test descriptions
    
    Document a copule of the subtests with their purpose, methods, and
    expected results.
    
    Reviewed-by: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit 1765838e34d96c7eb2288cf899ab19f819fa5cb0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Mar 23 11:00:20 2015 +0100

    tests/gem_tiled_swapping: Fix up L-shaped testing
    
    I've fumbled this, resulting in this this skipping everywhere.
    Unfortunately no QA test report for this regression ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a5934091b84e3f8804fb3fed35374c5a976dd07e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 18 11:15:12 2015 +0100

    tests/gem_exec_lut_handle
    
    Reduce default number of repeats a lot. High repeat count is only
    useful for microbenchmarking, not that much for regression testing.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=87131
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit a5c6b8df8b7bc46a8664044faa7566ce56fa06a8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 13 18:02:45 2015 +0100

    tests/kms_cursor_crc: Add dpms and suspend tests
    
    There was some confusion about whether we restore cursors correctly
    after dpms and suspend/resume. Apparently we still do!
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit d297e58529217cb70e79639b13608f458332b2d0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Mar 5 11:02:03 2015 +0100

    lib: Only warn about suspicious CRCs
    
    It is theoretically possible to hit these in the wild, so only warn
    about them. Dropping the test is probably too much since these caught
    some real bugs in the past.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 562bbe12f6fb75811a746c742a28d32a17b26aa9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Feb 27 22:04:18 2015 +0100

    tests: Remove usage of igt_crc_equal and _non_null
    
    Tests should positively check for crc matches, not for mismatches.
    Enforce this by only exposing and igt_assert function for comparing
    crcs.
    
    For the few tests which didn't just do this as consistency checks but
    to do functional tests add FIXME comments that some reference crc
    values are missing.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit e588f6dfa6f022120d5a55ef96994dbbc33d0dc9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Feb 27 20:37:29 2015 +0100

    lib/debugfs: Add igt_assert_crc_equal
    
    Because of hash collisions tests should only ever compare crc
    checksums for equality. Checking for inequality can result in random
    failures.
    
    To ensure this only expose and igt_assert function and use that.
    Follow-up patches will rework the code for tests which don't follow
    this requirement and try to compare for CRC inequality.
    
    v2: Rebase on top of Matt's kms_plane changes.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 4fec18e5e0cbbf384b8a49febd9dc650f2712bad
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Feb 27 20:24:15 2015 +0100

    lib/core: add interactive debug point to igt_fail
    
    Useful for inspecting the screen state in kms tests when they fail.
    
    Also move the screen clearing in kms_cursor_crc to the bottom.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit e7d26df4198af40c92292cb4209fd803fa02062f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 19 15:24:52 2015 +0000

    igt/kms_vblank: Simple harness for measuring speed of drmWaitVBlank
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a72d4056291efd2571105cbb0a254a9cde13c6c6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 18 14:15:22 2015 +0000

    igt/gem_concurrent_blit: Test copying over itself
    
    Suggested by Lionel Landwerlin as a means to emulate video decode
    workloads.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ea4aa70f3c83a942ee34868ade1eba126b15d879
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 19 08:36:25 2015 +0000

    igt/gem_wait: When waiting for infinity, an infinity remains
    
    Incorrect testing of out parameters leads to bug noise...
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=89494#c4
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1d0aa69f55fdb31662946f1cb472dda31347d89b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 18 08:46:14 2015 +0000

    igt/gem_exec_nop: Enlighten the failure error message
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=89633
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 484c1a6f1cf97d3d1ff757cddd8f77accc89790a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 18 08:33:54 2015 +0000

    igt/gem_read_read_speed: Speed up batch submission
    
    Create the RCS and BCS batches once and reuse them to avoid the
    rewriting and relocation overhead on every submission - the goal is to
    focus on the interring synchronisation overhead.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d3e9316b441bc172f5936e787879d1d13f1f7a01
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 18 08:33:22 2015 +0000

    lib/batch: Fix range checks for blits
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 233808a58db1f62d773b03f9dad599924170aca6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 18 08:36:37 2015 +0000

    lib/batch: Trivial compile fix for 32-bit builds
    
    intel_batchbuffer.c: In function 'fill_object':
    intel_batchbuffer.c:589:20: error: cast from pointer to integer of different size [-Werror=pointer-to-int-cast]
      obj->relocs_ptr = (uint64_t)relocs;
                        ^
    intel_batchbuffer.c: In function 'exec_blit':
    intel_batchbuffer.c:598:21: error: cast from pointer to integer of different size [-Werror=pointer-to-int-cast]
      exec.buffers_ptr = (uint64_t)objs;
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a172676488def584cfe8d0340c7e5ef4b7f81d74
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 16 16:29:57 2015 +0000

    igt/gem_concurrent_blt: Test overwrite source used for read-read optimisation
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 35b0ac99fc4bb05ea98c2588a0c77a26f1964f70
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 16 11:55:46 2015 +0000

    igt/gem_concurrent_blit: Exercise concurrent reads
    
    Since we are considering implementing read-read optimisations for mixed
    engine workloads, make sure that we at least have a few tests that check
    for coherency when doing so.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 99b5ee8aaad4920582b0143fe2e02c7149c4cf41
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 22 10:03:45 2015 +0000

    igt/gem_concurrent_blit: Move buffer allocation after requires
    
    The choice is to either move the igt_require from the buffer allocation
    (and allow the allocation to fail) inside the igt_fixture, or move the
    buffer allocation to the subtest. Moving it to the subtest has the
    advantage of ensuring that every test has the same initial state (no
    chance of leaking state across tests) and speeding up running a single
    subtest.
    
    Note this is necessary in order to run igt/gem_concurrent_blit on older
    kernels, otherwise the requirement for mmap(wc) causes us to skip the
    majority of tests.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ed7e33451e91e1b4cde7553ccbe31e09562c87f7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 16 15:14:14 2015 +0000

    igt: Add benchmark for read-read optimisation
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 505645c2ab90404067c7817072a1b8eda316e67e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 13 17:57:03 2015 +0100

    tests: Rename core_getparams to drv_getparams
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit ae339f0977cc02ceb9e39ad458f7d8cfbf3c9fd6
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Thu Mar 12 17:26:25 2015 -0700

    tests/core_getparams: Create new test core_getparams
    
    New test core_getparams consists of 2 subtests, each one testing
    the ability of userspace to query the correct value of a GT config
    attribute: subslice total or EU total. drm/i915 implementation of
    these queries is required for Cherryview and Gen9+ devices (non-
    simulated).
    
    v2: Duplicate small amount of new libdrm functionality to avoid
        bumping libdrm version requirement (Daniel). Convert some
        igt_asserts to the appropriate comparison variants. Add a
        test description.
    v3: Actually use the LOCAL GETPARAM defines. Otherwise can't build
        against older libdrm as intended by v2.
    
    For: VIZ-4636
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>
    Reviewed-by: Zhigang Gong <zhigang.gong@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7655606532afb0dcfa6d11a5af83ed9beac5d1fa
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 13 09:37:49 2015 +0100

    NEWS: Post-release bump
    
    Let's prep for more cool stuff!
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit e3e659163f0dcb4bc5de852190a0478092784234
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Mar 12 17:06:54 2015 +0000

    Update version to 1.10 and add the release date
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 3b8e121552b2bd0c9023fbec0b88da36a27ce42c
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Mar 12 17:01:57 2015 +0000

    lib: small documentation fixes
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 595575b9cbdc705edc6f1ac6a3fbf2ceb45bf5ba
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Mar 12 16:32:17 2015 +0000

    Remove old entries from .gitignore files
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit a6c40c7665287305fe838b6871a26bcfecad9c0a
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Mar 12 14:59:20 2015 +0000

    lib: move igt_interactive_debug into igt_core.c
    
    igt_interactive_debug should be defined in igt_core.c, rather than the
    header, to avoid it being defined more than once.
    
    Reported-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit dde047fe2c84e2519a8ed24db4ac9c794285bbd1
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Mar 12 14:31:15 2015 +0000

    lib/fb: Use PRIx64 for uint64_t in format string
    
    Fix the following warning:
    
      igt_fb.c: In function 'igt_create_fb_with_bo_size':
      igt_fb.c:414:2: warning: format '%llx' expects argument of type
        'long long unsigned int', but argument 9 has type 'uint64_t' [-Wformat=]
    
      igt_debug("%s(width=%d, height=%d, format=0x%x [bpp=%d], tiling=%llx, size=%d\n",
    
    introduced by commit:
    
      commit e36091d1c7010e825897dc4487f9985ab353973b
      Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
      Date:   Tue Mar 3 14:11:01 2015 +0000
    
          tiling: Convert framebuffer helpers to use fb modifiers
    
    Cc: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit b1177831abedbf7dac323c6e67c2ec7c56c88009
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue Mar 3 14:11:06 2015 +0000

    tests/kms_flip_tiling: Exercise Y tiling modes on Gen9+
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 7b8ba120b956e706f2cdea831233973f0ee079fa
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Mar 3 14:11:05 2015 +0000

    testdisplay/skl: Add command line options for Yb/Yf tiled fbs
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit ff451a6d439f76ddc51cc0a374f086ace4dab680
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Mar 3 14:11:04 2015 +0000

    lib: Allow the creation of Ys/Yf tiled FBs
    
    There's no fencing for those tiling layouts, so we create a linear bo
    for cairo to play with, and when cairo is finished with it, we do a fast
    copy blit to the fb BO with its final tiling.
    
    v2: Move to correct domain after CPU is done with the object (-EINVAL). (Tvrtko Ursulin)
        Correct arguments passed in to framebuffer creation (segfault). (Tvrtko Ursulin)
        Pass zero stride to kernel as it expects for Yf&Ys. (Tvrtko Ursulin)
    
    v3: Rebase for gem_mmap__cpu changes. (Tvrtko Ursulin)
    
    v4: Rebase for addfb2.5. (Tvrtko Ursulin)
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit eb93c1b33ef6eebe53646003e951e54a3e68bc5e
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue Mar 3 14:11:03 2015 +0000

    lib/igt_fb: Use new ADDFB2 extension for new tiling modes
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit c7bac3c62ab27045ceec898787435bbb5678b015
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue Mar 3 14:11:02 2015 +0000

    lib: Add support for new extension to the ADDFB2 ioctl.
    
    New functionality accessesed via the __kms_addfb wrapper.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit e36091d1c7010e825897dc4487f9985ab353973b
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue Mar 3 14:11:01 2015 +0000

    tiling: Convert framebuffer helpers to use fb modifiers
    
    This converts the IGT API only, underneath legacy set_tiling is still used.
    
    v2: One got away in kms_flip.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 672e88acb72bf58f322af928b2bc636d14aa9f21
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Mar 3 14:11:00 2015 +0000

    lib: Provide a raw version of the gen9 fast copy blits
    
    So we can use it with bare kernel types, without going through libdrm
    bos.
    
    v2: Don't forget the object handle. (Tvrtko)
        Correct surface pitch calculation. (Tvrtko)
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 6533d113a9710429115bee26d1f372e1a06701df
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Mar 3 14:10:59 2015 +0000

    lib: Split two helpers to build fast copy's dword0 and dword1
    
    Again, these helpers will be useful for a raw version of the gen9 fast
    copy.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 130221b3b5be3ad03bd0ac2b12d8b009eaf540d4
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Mar 3 14:10:58 2015 +0000

    lib: Don't give a struct igt_buf * to fast_copy_pitch()
    
    So we can use this function in a "raw" (ie without igt_buf) version.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit cbd927cd35473c88bf5e2f5f42e61af612eaa75e
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Mar 3 14:10:57 2015 +0000

    lib/skl: Add gen9 specific igt_blitter_fast_copy()
    
    v2: Adjust for BB handling changes. (Tvrtko Ursulin)
        Correct XY_FAST_COPY_DST_TILING_Yf. (Tvrtko Ursulin)
    
    v3: New tiling modes are not defined in the kernel any more. (Tvrtko Ursulin)
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 0c15e068a587fbb144ba6d689b402b95cd51470e
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue Mar 3 14:10:56 2015 +0000

    tests/kms_addfb: Y tiled testcases
    
    v2: Moved all init into fixtures.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit 0a087733d24fcb2b80584b23e931533d72828770
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue Mar 3 14:10:54 2015 +0000

    tests/kms_addfb: Add support for fb modifiers
    
    Just a few basic tests to make sure fb modifiers can be used and
    behave sanely when mixed with the old set_tiling API.
    
    v2:
       * Review feedback from Daniel Vetter:
          1. Move cap detection into the subtest so skipping works.
          2. Added some gtkdoc comments.
          3. Two more test cases.
          4. Removed unused parts for now.
    
    v3:
       * Removed two tests which do not make sense any more after the
         fb modifier rewrite.
    
    v4:
       * Moved gtkdoc comments into .c file.
       * Moved all initialization into fixtures.
       * Rebased for fb modifier changes.
    
    v5:
       * Added bad modifier subtest.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

commit f59935c0ce878d20f1a34ae814a778bf476c36f8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 11 08:40:23 2015 +0000

    igt/kms_psr_sink_crc: Prettify i915_edp_psr_status failures
    
    Change the formatting asserts into requires and add the contents into
    the debug log.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=89525

commit 07be8fec156ba8405f2aafa3a37fe29d06893f05
Author: Matt Roper <matthew.d.roper@intel.com>
Date:   Thu Mar 5 15:01:00 2015 -0800

    igt.cocci: Replace igt_assert() with igt_assert_CMP() where possible
    
    The integer comparison macros give us better error output by including
    the actual values that failed the comparison.
    
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 14a3d88a0967718124fc3b6c111a877203da025f
Author: Matt Roper <matthew.d.roper@intel.com>
Date:   Wed Mar 4 10:50:53 2015 -0800

    tests/kms_plane: Ensure planes recover from DPMS
    
    i915 was using the main atomic 'disable plane' to turn off sprite planes
    during a CRTC disable.  This was problematic because it modified the
    plane state, preventing us from recovering the original state later.
    One such case was that during a DPMS OFF followed by a DPMS ON, any
    sprite planes would not be restored properly.
    
    Let's add a test that toggles DPMS off and on and ensures that the CRC
    remains the same (i.e., planes are successfully restored unchanged).
    
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b8db5d60e0f19c46142f22f9dcbe4d7b6d166b9f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 6 08:49:52 2015 +0000

    lib/core: Make the start of the debug output more clear
    
    I missed the quiet "Log start" between the test failure and the debug
    output (and so was very confused by the repetition). You have to shout
    at me!
    
    v2: Thomas suggested I make the end of the logging clear as well. Since
    I completely missed that there was a end marker, he must be right!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Thomas Wood <thomas.wood@intel.com>

commit e23accf43753055430064fa02efe7d33ab11564f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 6 08:37:09 2015 +0000

    igt/gem_wait: Test negative timeouts
    
    The user should be able to specify a negative timeout to indefinitely
    wait upon a bo becoming idle.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 15559e6cb613fe152f71471643de0ac0c12332d4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Mar 6 08:47:06 2015 +0000

    igt/gem_wait: Timeout parameter to the WAIT ioctl is signed
    
    So convert from uint64_t to int64_t. The distinction becomes important
    when you realise what test we were missing...
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 50158de8122fabdb34b8f9dd5cf43a2d9c72e0b4
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Mar 5 09:42:29 2015 +0100

    NEWS: Update to prep for release
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit ee5c119c0cfe990ada07ae47a22f4d7f05b415d5
Author: Tim Gore <tim.gore@intel.com>
Date:   Tue Mar 3 10:43:43 2015 +0000

    tests/gem_render_tiled_blits: split into subtests
    
    The gem_render_tiled_blits test tends to get oom killed
    on low memory (< 4GB) Android systems. This is because the
    test tries to allocate (sysinfo.totalram * 9 / 10) in
    buffer objects and the remaining 10% of memory is not
    always enough for the Android system.
    A similar issue with gem_render_linear_blits was resolved
    by creating several subtests. A "basic" subtest that uses
    minimal memory buffers to test the basic operation, and
    two stress tests which are skipped if there is insufficient
    memory. The first stress test uses more memory than the
    graphics apperture and the second uses enough to ensure
    that swap space is used (if present).
    This patch makes the same changes to gem_render_tiled_blits.
    
    v2: Following comments from Daniel Vetter:
      a) Use igt_main macro instead of "open coding", and
      b) cull some leading spaces
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>

commit 9f90aabc66cd62b328c16e6917dc76baafd3ab5e
Author: Tim Gore <tim.gore@intel.com>
Date:   Tue Mar 3 10:23:00 2015 +0000

    tests/gem_render_linear_blits: split into two subtests
    
    The gem_render_linear_blits test tends to get oom killed
    on low memory (< 4GB) Android systems. This is because the
    test tries to allocate (sysinfo.totalram * 9 / 10) in
    buffer objects and the remaining 10% of memory is not
    always enough for the Android system.
    After a discussion with Chris Wilson I have split this
    test into a "basic" and an "apperture-thrash" subtest,
    in the same way as gem_linear_blits. The basic test
    uses just two buffer objects and the apperture-thrash
    test is skipped if there is insuffiecient memory.
    
    v2: Following comment from Chris Wilson:
        a) Remove the command line option for count.
        b) Add a third subtest to ensure swap is tested
    
    v3: Replace some leading spaces with tabs
    
    v4: Follwing comment from Daniel Vetter:
        a) Use igt_main macro instead of "open coding", and
        b) cull some more leading spaces
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>

commit 043f5869586c471991b7cdb97a542901ab662ef6
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Fri Feb 13 19:04:49 2015 +0200

    tools/intel_gtt: Add support for gen8
    
    Add 64bit ptes and 8MB mmiobar offset for gen8
    
    Cc: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Cc: Ben Widawsky <benjamin.widawsky@intel.com>
    Acked-by: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 5e4fc0c48c9a44689ec1593f356a8f22e1ca6bb8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Nov 18 14:39:14 2014 +0100

    tests/gem_tiled_swapping: Skip on L-shaped memory
    
    The only thing the kernel can do is pin the buffers, which essentially
    means no swapped tiled objects.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit f26d8a04c3938845d4db07cf6587b29e287dc2dc
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Feb 27 15:05:39 2015 -0300

    tests/pm_rpm: I2C VGA detection is unreliable
    
    We fail to detect some VGA monitors using our I2C method, leading to
    bug reports from QA. If you look at the dmesg of these cases, you'll
    see the Kernel complaining about EDID reading mostly FFs and then
    disabling bit-mangling. Since we don't want to reimplement everything
    the Kernel does, let's just accept the fact that some VGA outputs
    won't be properly detected.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=84273
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit f45698df8b6b4d9375acc8e668fc54f81250fd2f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Feb 27 19:32:33 2015 +0100

    lib/igt_core: don't add newlines in logging functions
    
    igt_kms extensively uses line continuation when dumping state updates
    at the debug level. They got badly mangled with the recent changes to
    for the log handling functions. Two separate fixes:
    - Don't prepend domain and other metainformation when it's just a
      continuation line.
    - Dont add newlines when dumping the log recorder.
    
    If someone interleaves different log level messages this will go awry,
    but really just don't do that.
    
    Cc: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 305fb1db5c1ec231b1cef3fd4c2106bc36ef48d8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Feb 27 16:24:25 2015 +0100

    lib: add igt_assert_lt
    
    Found one user in gem_wait.c
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit e3f8eb58e64954f80207ff147de3eccba96769cd
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Feb 27 16:18:40 2015 +0100

    tests/kms_universal_planes: Inline igt_assert(ret == 0) checks
    
    This way the debug output in case of failures is nicer since we dump
    the entire test condition.
    
    Also replace one open-coded igt_assert_eq.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 59d8d663cdac2d1f8e876d53f328e414a993c610
Author: Matt Roper <matthew.d.roper@intel.com>
Date:   Thu Feb 26 19:00:19 2015 -0800

    kms_universal_plane: Check for cursor fb leaks
    
    We've been leaking the framebuffers that get created inside the
    legacy -> universal cursor compatibility layer and nobody noticed.  Add
    an i-g-t test to check debugfs and ensure we end up the same number of
    framebuffers we started with after performing cursor operations.
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d73c5eb97747c899eda2648e238711f6d516b4c9
Author: Marc Herbert <marc.herbert@intel.com>
Date:   Thu Feb 26 18:43:43 2015 -0800

    lib/igt_kms.c: igt_require -> igt_require_f("two displays required\n")
    
    The bare "Test requirement: modes" message is too cryptic, I had to go and
    read the source code to understand the missing requirement.
    
    Signed-off-by: Marc Herbert <marc.herbert@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8e0a0c9de658931454ba2a549d922e7e9f534dea
Author: Deepak S <deepak.s@linux.intel.com>
Date:   Thu Feb 26 21:10:29 2015 +0530

    tests/pm_rc6_residency: Add media_rc6_residency_counter subtest
    
    Added new media_rc6_residency_subtest for  chv & vlv.
    
    Signed-off-by: Deepak S <deepak.s@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit af02ef4a483184dbd9a549e98f40a1975aa204fe
Author: Deepak S <deepak.s@linux.intel.com>
Date:   Thu Feb 26 21:10:28 2015 +0530

    tests/pm_rc6_residency: Fix proper residency calculation
    
    With current code we are not considering the RC6 residency during sysfs
    read. This is causing test to fail due to incorrect residency_accuracy check
    This patch consider code time spent for accuracy check
    
    Signed-off-by: Deepak S <deepak.s@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d5579f472e103e7cafb7bb10d5c52246c3d1f072
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Feb 26 16:32:43 2015 +0100

    tests/drv_suspend: Unrename tests
    
    Renaming tests massively confuses QA's test result tracking and
    blacklisting. So except when really good reasons are around we
    shouldn't do it.
    
    Here I think just adding the -hibernat suffix and leaving test names
    unchanged is enough.
    
    Cc: David Weinehall <david.weinehall@intel.com>
    Cc: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 26f40811d70cdb80d81edea13c1d2ee55074d196
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Feb 20 11:31:01 2015 +0000

    lib: small documentation fixes
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit d9224c3479e70be31612f881d180666e1dbead93
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Feb 19 15:19:57 2015 +0000

    lib/tests: update .gitignore

commit 4ff4ea601a0bfeceb7f291af2c3410ad547af760
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Feb 19 13:58:06 2015 +0000

    lib: print the signal name to stderr when handling a signal
    
    Print the received signal name to stderr when handling a signal. This
    uses an array of handled signal names since strsignal() only provides
    descriptions.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit aecad4fc2ea86f5377c443a4f15ea91d3e0d614c
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Feb 18 15:47:07 2015 +0000

    tests: remove extra file
    
    Remove a file accidentally added in commit 6f582f7 (tests: Add
    gem_ctx_param_basic).
    
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 8fb19782f82f25249aaed0ff0e5fa6601dbb0e9d
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Feb 18 16:19:59 2015 +0000

    lib: remove handled option arguments from argv
    
    Remove options from argv that have been handled by getopt to allow
    additional non-option parameters to be processed in the test application.
    
    This fixes issues when using options such as --debug with tests that accept
    additional non-option parameters.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 55cc132b3219fbbf8c5705c674ef0f9a9b53d593
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Feb 17 15:10:13 2015 +0000

    lib: use defines for igt_simple_init and igt_subtest_init
    
    Using defines removes an extra function call and prepares for changes
    to the command line argument handling.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit efddb93680c5c5ca2d0c0c9c9af497908c1fa6f7
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Feb 17 11:52:29 2015 +0000

    tests: improve pipe enumeration
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 0f3a5809e7801d4f48759ce4ffda764fcd7fb6bb
Author: Praveen Paneri <praveen.paneri@intel.com>
Date:   Wed Feb 25 14:26:21 2015 +0530

    tests/gem_bad_blit.c : Fix dst address for Gen8 onwards
    
    Gen8 Onwards use 48 bit addressing for src and dst base
    addresses. This patch fixes this for destination base address.
    
    Signed-off-by: Praveen Paneri <praveen.paneri@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c6d18ee56ba2f148e9146acd832c530b53aab096
Author: Marc Herbert <marc.herbert@intel.com>
Date:   Tue Feb 24 12:29:22 2015 -0800

    lib/igt_kms.c: remove tests dependency on VT /dev/tty0
    
    Required to run on any recent, freon-based and X11-free ChromeOS release.
    
    v2:
    - igt_debug() instead of igt_warn()
    - return KD_GRAPHICS instead of -1UL
    - print previous mode in debug statements. Among others this help a tiny
      bit with the now confusing debug output ("cannot change" immediately
      followed by a misleading "mode changed").
    
    Signed-off-by: Marc Herbert <marc.herbert@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7890b09348ce8d494298ac9a308df25d526fe3ea
Author: David Weinehall <david.weinehall@intel.com>
Date:   Wed Feb 11 16:46:02 2015 +0200

    tests/drv_suspend: hibernation test
    
    intel-gpu-tools currently has a bunch of tests for suspend,
    but currently none (that I could find) for hibernate.
    
    Attached is a rudimentary patch to add said test.  It does so
    by repurposing the drv_suspend driver to handle both suspend
    and hibernate, since the difference is miniscule.
    
    I decided to split the suspend/autoresume functions in
    igt_aux.c though, to be able to leave the igt_system_uspend_autoresume()
    function unchanged (the other option would be to
    introduce a boolean function argument and have that
    decide what parameters to pass to rtcwake).
    
    The timeout passed to rtcwake probably needs tuning (it might
    even need to be dynamically adjusted, since the time hibernation takes
    varies wildly depending on the amount of non-cache memory in use).
    
    Signed-off-by: David Weinehall <david.weinehall@intel.com>
    Reviewed-by: Imre Deak <imre.deak@intel.com>

commit 5b93daf5cb40f79b948029588f059b0b61638590
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Feb 18 16:06:15 2015 +0000

    lib: Use strtol not strtod for overiding the PCI ID
    
    Simply to avoid the roundtrip through floating points and any extra
    headaches from worrying about the implications
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit eaa7e6183cedee10acfa321ac3c66bfe58c0ed5a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Feb 18 15:58:06 2015 +0000

    lib: Cache DRM device id to reduce number of ioctls
    
    The DRM device id for the igfx is fixed, since there can only be one in
    the system. So once we query it for the first time we can safely report
    that value on every subsequent request, cutting out a lot of noisy
    ioctls from inside tests.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a22548fec06faba738a2d59b45b54704e4757685
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Feb 16 11:17:11 2015 +0000

    lib: small documentation fixes
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit f8fd4c977a9dd32992bf5f244bde0b817f7e2c82
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Jan 20 15:31:51 2015 +0000

    lib: print recent log messages to stderr when a test or subtest fails
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit a5f21726cdf542bf3c8e9ac6b7c0ab99a03596f9
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jan 19 15:27:51 2015 +0000

    lib: add a ring buffer for log entries
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 89201c5328280a00c027fba404459de91b546a80
Author: Matt Roper <matthew.d.roper@intel.com>
Date:   Mon Jan 26 09:23:51 2015 -0800

    tests/kms_universal_plane: Fix subtest enumeration
    
    We shouldn't use the contents of data.display to determine which pipes
    to run subtests on since this structure is initialized in an igt_fixture
    and won't contain any useful data when enumerating subtests (i.e.,
    --list-subtests won't return anything).
    
    Instead, just assume we have three pipes in the main loop and ensure
    that each subtest will skip if we don't really have that many.
    
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit e8e28931b1c1c7b412474963d7a89bc307636950
Author: Lu, Han <han.lu@intel.com>
Date:   Thu Feb 12 08:41:59 2015 +0800

    tools/intel_audio_dump: add support for Skylake
    
    This patch adds support for dumping audio registers of Skylake.
    
    Signed-off-by: Lu, Han <han.lu@intel.com>

commit cd6644230b557bb3f5d19e499efb265ba6ed2787
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Feb 13 08:48:52 2015 +0000

    quick_dump: Add interrupt and PPAT registers to the SKL dump
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 3c8aa2fb6ef9ac2526af27c5b14d51552768d5c3
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Feb 13 14:54:25 2015 +0100

    tests/gem_ctx_param_basic: Include header, not source
    
    Oops. Reported by Tim Gore.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 3cd45dec2e4be3edacdfc233089b6bd3651fa595
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Feb 10 17:46:43 2015 +0100

    lib/igt_gt: Document and consolidate
    
    Also move forcewake and stop_rings code from igt_debugfs to igt_gt
    since it fits better. And move the hang injection fork helpers from
    igt_aux to igt_gt, too.
    
    Also push the intel_gen call into igt_hang_ring while at it.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 25c4347078f181a938eaaefbed7e2e27c9dc1a3f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Feb 7 12:45:49 2015 +0100

    doc: Consolidate naming conventions into docbook
    
    Duplication just means it gets out of sync.
    
    Also update they keyword list in the Makefile, not everything was listed.
    And add a new "invalid" keyword.
    
    While at it update NEWS.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 14185f04bd7c5fb2052a3e6454ceda5b46c37a61
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Feb 7 12:38:56 2015 +0100

    tests/gem_wait: Adjust makefile
    
    I've forgotten to do this in
    
    commit e4753d2d96fbb88077e70820793137f45f02c9ba
    Author: Daniel Vetter <daniel.vetter@ffwll.ch>
    Date:   Mon Sep 29 14:42:33 2014 +0200
    
        tests/gem_wait_render_timeout: Convert to subtests
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2eca38eab9ccb4bc41ceda4992614ffb311ce4f7
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Feb 7 12:37:48 2015 +0100

    lib/igt_aux: s/swap/igt_swap/
    
    It collides with the subtest naming convention glossary entry for swap.
    Which makes the docbook xml stuff unhappy.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3e9b4e37e68da2b866e9cebf7ceb6624617e353b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Feb 6 23:10:26 2015 +0100

    tests: Align subtest with naming convention
    
    Yeah, historically grown but we should try to be somewhat consistent.
    It helps with filtering testcases.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bf5035a728b4f0cd06e7205bc1911069ff224433
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Feb 6 23:09:45 2015 +0100

    tests/gem_ppgtt: Start rcs before bcs for context tests
    
    This way the igt_require for the ctx support is hit before we've
    launched a bazillion threads and need to wait until they're all done.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7a03ddf994f089e795c2b6c4122fdf490f11bef0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Feb 6 23:06:00 2015 +0100

    tests: Add invalid pad tests for ctx create/destroy
    
    We've missed them, and the kernel isn't nasty enough and forgot to
    check them. To add these tests convert the existing create/destroy
    tests over to subtests.
    
    v2: Do the basic create/destroy in ctx_bad_destroy in a fixture
    so that all the tests skip properly.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 6f582f70e1b344c6d0e20f312f376892553af55e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Feb 6 17:54:46 2015 +0100

    tests: Add gem_ctx_param_basic
    
    Boring ioctl validation. Luckily no gaps found while doing it.
    
    v2: git add ftw!
    
    v3: Fixes:
    
    - args->size is an outparam for get, adjust test.
    - Pick an invalid param, not an invalid ioctl number ... tsk.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 75c075cb263bf33259d26692b4f093f84276915c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Feb 6 17:13:59 2015 +0100

    lib/ioctl: Document ctx param functions
    
    And move them so that they're grouped with the other context wrappers.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 364efcdf9b1f90ec0befda9b1097434c88a1eb18
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Feb 6 17:13:27 2015 +0100

    tests/gem_reset_stat: Use new ctx helpers
    
    A bit more invasive since getting rid off all the places meant
    to flatten some of the control flow with implicit igt_require.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ccc4261dc3d369a3463aa1b8ecbc676d69e337b8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Feb 6 17:12:45 2015 +0100

    tests/gem_ctx_*: Use helpers
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 09b8211d4136d6f7767652ddf73dfb0b7c1213a2
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Feb 6 17:15:13 2015 +0100

    lib/ioctl: Add gem_context_destroy helpers
    
    We also need a raw version for some tests.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8d21b39251615d3516522a9fe56f77e9bf9fdc62
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Feb 6 11:10:25 2015 +0100

    lib/ioctls: make gem_context_set/get_param infallible
    
    We have separate require checks already, so these failing is a bug in
    the test logic.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 15801b4dadfef1e754d415414ad931be639c85bf
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Feb 6 11:06:11 2015 +0100

    igt/ioctls: doc for gem_mmap
    
    Just spotted while driving around. gtkdoc needs the full parameter
    list otherwise it doesn't recognize it as a function. So add them.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a3e34ce258aae0602c38fd8020d49f1fd1c7a83f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Feb 6 11:05:28 2015 +0100

    lib/ioctl: gem_ prefix for igt_require_mmap_wc
    
    We stick to the overall prefix even for magic require functions.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c18b2d57a98c061845e0ec31bfffc90e03356aaa
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Feb 6 10:53:10 2015 +0100

    lib/ioctl: api polish for gem_context_has_param
    
    Just push the igt_require down to align with the usual style.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit c66b2425e706bec5ce6df8664d19b06e047eb0ee
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Feb 6 10:49:20 2015 +0100

    lib/gt: api polish for igt_can_hang_ring
    
    Align with common igt library style:
    - Push the igt_require into the function.
    - Push the intel_gen into the function.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 9ca2cc12b4a11c20b41479e94ac8837321c0a2b1
Author: Matt Roper <matthew.d.roper@intel.com>
Date:   Mon Feb 2 11:07:55 2015 -0800

    kms_cursor_crc: Kernel now checks for integer overflow
    
    As of kernel commit
    
        commit a679064a7e9e8799177a64a31668a34a1bc6a4f1
        Author: Matt Roper <matthew.d.roper@intel.com>
        Date:   Fri Jan 30 16:22:37 2015 -0800
    
            drm/i915: Switch planes from transitional helpers to full atomic helpers
    
    the kernel now checks for cursor coordinates that would result in
    integer overflow and returns -ERANGE, similar to the checking that was
    already done for other plane types.  We update kms_cursor_crc here to
    reflect this small behavior change:
     * Check for success at extreme boundary conditions INT_MAX-{width,height}
       rather than INT_MAX
     * Add new check for success at SHRT_MAX; if the driver were to
       internally use short values and overflow, we could have the cursor
       reappear on the screen.
     * Add a test for failure with proper error code at INT_MAX-{width,height}+1
    
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>

commit 9846e7f2c57dc7c36d5d6f64e4a9fc7f50feda33
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Tue Jan 27 17:59:06 2015 -0800

    gem_render_copy: Provide an all pixels check
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>
    Reviewed-by: Imre Deak <imre.deak@intel.com>

commit 38a0c41340109a9f0b365e514147c20f95248aea
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Jan 28 16:49:31 2015 +0000

    lib/tests: check that invalid subtest names are rejected
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit f0516f3d3537d57aa0885212082668db2c4d5df9
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Jan 28 16:30:54 2015 +0000

    lib/tests: verify subtest enumeration output
    
    Check that the subtest list is not empty if using --list-subtests
    returns with an exit code of 0, and that the list is empty if it returns
    with 79.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 16cfa37a505aaafd26b09b463a562c6985453fae
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Jan 27 14:12:27 2015 +0000

    lib: add exit status message to simple tests
    
    Add an exit status message to simple tests, similar to the one printed
    for subtests. This includes the test outcome and the time taken to run
    the test.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 9942a404379c1a021a6d26b8b2fcd9b70818a971
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Jan 27 14:10:15 2015 +0000

    lib: add subtest start and exit status code messages to debug output
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 2b05ecfb0625ddf4b8cced18c471063aa23e2768
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jan 26 16:59:53 2015 +0000

    lib: validate subtest names
    
    Subtest names should only contain '-', '_' and alphanumeric characters.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 61737903ad4d4423516a41538d1ce4cf7287da0e
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jan 26 16:09:40 2015 +0000

    lib: print warning and critical messages when listing subtests
    
    These messages are sent to stderr and could indicate an issue when
    enumerating subtests.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit a228223ffaf38fa758eea58258cfe745b6cde4b6
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jan 26 16:09:09 2015 +0000

    lib: warning messages should be sent to stderr
    
    This is a regression from commit df11a0f (lib: add a critical warning
    level).
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit bef692d9f3556caf3e901de62f3b24d1aec5798e
Author: Michał Winiarski <michal.winiarski@intel.com>
Date:   Tue Feb 3 20:13:56 2015 +0100

    tests/gem_userptr_blits: Race between close and invalidate
    
    It was possible for invalidate range start mmu notifier callback to race
    with releasing userptr object. If the object is released prior to
    taking a spinlock in the callback, we'll encounter a null pointer
    dereference.
    
    v2: Moved expressions inside igt_assert(), added mem barrier (Chris)
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Michał Winiarski <michal.winiarski@intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 87edb519408746d31110ea4a01cfbf0734433cb8
Author: Imre Deak <imre.deak@intel.com>
Date:   Thu Jan 29 00:03:19 2015 -0800

    rendercopy/gen9: fix gem_render_copy 3d state setup
    
    Without emitting the default 3DSTATE_WM_DEPTH_STENCIL state the test
    will fail.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 51d87b80493169f68bf1cda0eb2f6715310fe45c
Author: Thomas Daniel <thomas.daniel@intel.com>
Date:   Mon Jan 19 16:34:51 2015 +0000

    tests/prime_self_import: further fix object counts
    
    A previous commit:
    
    commit 2f2c491cf3167befe7c79e4b17afb4f6284dfc84
    Author: Mika Kuoppala <mika.kuoppala@intel.com>
    Date:   Fri Mar 28 10:52:46 2014 +0200
    
        lib/drmtest: don't dup quiescent fd
    
    introduced a regression for drm object leak checking.  A following commit:
    
    commit 8741c2289f17e9bcb740a01cad4764a71c918eea
    Author: Mika Kuoppala <mika.kuoppala@intel.com>
    Date:   Wed May 7 16:46:19 2014 +0300
    
        tests/gem_flink_race,prime_self_import: fix object counts
    
    fixed the regression for some cases but missed the export-vs-gem_close-race
    subtest.  Note that test behaviour depends on whether the subtest is run as
    part of the whole prime_self_import test (fail), or as a single subtest (pass).
    Using execlists on Gen8+ reverses the pass/fail due to lazy context allocation
    which is presumably why this has now been noticed.
    
    This commit applies the same fix to the export-vs-gem_close-race subtest.
    
    Cc: Mika Kuoppala <mika.kuoppala@intel.com>
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=87627
    Signed-off-by: Thomas Daniel <thomas.daniel@intel.com>
    Reviewed-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 7848d214729a366eca937a63ec8ea025988203d2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jan 27 09:38:34 2015 +0000

    igt/gem_tiled_wc: Use correct offsets
    
    A last moment "tidification" in
    
    commit 5e9fac54918e424d928bc15b90e4c65d4cfdd356
    Author: Chris Wilson <chris@chris-wilson.co.uk>
    Date:   Thu Jan 22 07:52:09 2015 +0000
    
        igt/gem_tiled_wc: Fix! Finish!
    
    wreaked havoc again.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=88816
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ebd8b32bc6f5046815e00a6bee7f7f6650591cce
Author: Libin Yang <libin.yang@intel.com>
Date:   Thu Jan 15 09:20:47 2015 +0800

    tools/intel_audio_dump: add details dump for Cherryview
    
    This patch adds the details dump for audio registers of Cherryview.
    
    Signed-off-by: Libin Yang <libin.yang@intel.com>
    Reviewed-by: Zhenyu Wang <zhenyuw@linux.intel.com>

commit fa94e01ee71ee97a07a38802e9771b885b51eeeb
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Jan 20 11:14:42 2015 +0000

    docs: fix parsing issue
    
    Use entities for the special characters '<' and '>' to avoid "<var>" being
    treated as a tag.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 6011508afed046d60eebf44f51e52a76c326a591
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Jan 22 10:01:28 2015 +0100

    tests/gem_concurrent_blit: Fix indent
    
    Thrown up my brain's parser for a moment ;-)
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit fbcc7ba20f5a45a6e2fc9e74a68608ebc804ec29
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Jan 22 09:43:10 2015 +0100

    tests/gem_concurrent_blt: Adjust subtest naming
    
    Our tooling doesn't cope with () in the testnames (piglit becomes all
    confused apparently) and the naming convention says to use "blt" and
    "render".
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=88220
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=88349
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 9f952940c00f002acb0cef5a5d6251d45be8ff2c
Author: Zhipeng Gong <zhipeng.gong@intel.com>
Date:   Tue Jan 13 08:50:21 2015 +0800

    test/gem_dummy_reloc_loop: add tests for dual bsd ring
    
    Signed-off-by: Zhipeng Gong <zhipeng.gong@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f8d47cb70dae434571c6fe5ae39a0fc4909ba7fa
Author: Zhipeng Gong <zhipeng.gong@intel.com>
Date:   Tue Jan 13 08:50:20 2015 +0800

    tests/gem_exec_params: check the invalid flags for dual bsd ring
    
    v2: add more tests to address Daniel's comments(Zhipeng)
    
    Signed-off-by: Zhipeng Gong <zhipeng.gong@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 17937a0114b29a273152c4c2df72c5b1a992b07c
Author: Zhipeng Gong <zhipeng.gong@intel.com>
Date:   Tue Jan 13 08:50:19 2015 +0800

    i-g-t: check whether kernel has dual bsd ring
    
    v2: change the number to be consistent with upstream (Zhipeng)
    
    Signed-off-by: Zhipeng Gong <zhipeng.gong@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5e9fac54918e424d928bc15b90e4c65d4cfdd356
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 22 07:52:09 2015 +0000

    igt/gem_tiled_wc: Fix! Finish!
    
    It helps when testing whether tiled data read back through a linear
    mmaping to first tile the data. And not repeatedly unmapping the linear
    map stops it from segfaulting.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=88686
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3d65ff780d6d7a1b354bd530942a194a97f73dca
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Mon Jan 12 10:21:58 2015 -0800

    lib: s/IGT_DEBUG_INTERACTIVE/--interactive-debug=var
    
    Use cmdline variable for interactive debug instead of env var.
    
    v2: Make interactive-debug domain optional and use "all" when not set.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit eeff390598f6bf7292a9775cc6c470207f90a128
Author: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
Date:   Mon Jan 19 15:43:57 2015 +0200

    kms_plane: Add test that suspends/resumes before getting crc
    
    This adds a test that does a suspend/resume cycle between configuring
    a plane and getting the crc value for the pipe. The intention is to
    test if the user requested stated is restored properly, instead of
    being clobbered by the state read out from the hardware.
    
    Signed-off-by: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a29f28eba975388aed43c83dd6ed3ec2a869f4ce
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jan 19 09:42:25 2015 +0000

    igt/drv_module_reload: Check more carefully for a live driver
    
    As drm_open_any() now quietly fails if there is no driver, this
    nullifies the effectiviness of using gem_exec_nop as the test for a good
    reload. Combine with gem_alive (and guarantee that gem_alive can detect
    a dead driver, putting lie to
    
    commit 032f30cb38bb03562ee7fde19cd278b1d8ac31a9
    Author: Thomas Wood <thomas.wood@intel.com>
    Date:   Tue Jan 13 13:33:57 2015 +0000
    
        lib: remove unnecessary checks on the drm_open_any return value
    
    ) first.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=88573
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 20d6e0f41b3b70a89946e5271bc4ffa7695be1b0
Author: Tim Gore <tim.gore@intel.com>
Date:   Fri Jan 16 09:12:15 2015 +0000

    tools/intel_gpu_frequency: remove use of getsubopt
    
    getsubopt is not available in android. The "get" option
    doesn't really need sub-options, just display all the
    current frequency settings (as per discussion with
    Ben Widawsky)
    
    Ben v2: Remove the -geff example in the header
    Fixed another typo for the --set while there (found by Dave Gordon)
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Reviewed-by: Ben Widawsky <ben@bwidawsk.net>

commit 0167619bbcc6b45b4045a85468007ecc9f606c71
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Dec 17 11:37:31 2014 +0000

    lib: use critical log level for assertion failure messages
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit df11a0f4a83a78ca63e04ff915a77e33cf8422fe
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Dec 16 15:18:20 2014 +0000

    lib: add a critical warning level
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 032f30cb38bb03562ee7fde19cd278b1d8ac31a9
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Jan 13 13:33:57 2015 +0000

    lib: remove unnecessary checks on the drm_open_any return value
    
    drm_open_any always returns a valid file descriptor, so there is no need
    to check the return value.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 07e9f3edb9dd8e99c2511b6b8c4cf750a5dbe536
Author: Tim Gore <tim.gore@intel.com>
Date:   Mon Jan 12 09:50:22 2015 +0000

    lib/Android.mk: add -DHAVE_LINUX_KD_H to fix android build
    
    commit cf93bc8df9f5f94a0aedc8b52bad0ad4e036737c by Alan Coopersmith
    (introduced to enable solaris builds) reqires HAVE_LINUX_KD_H to be set
    in order for kd.h to get picked up in igt_kms.c. This is not currently
    set in the Android makefile so Android builds are broken.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 6e2fd6f64d156e9abdb3f4c51e4589fb77ec74dd
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Jan 13 11:53:49 2015 +0000

    tools: add intel_gpu_frequency to .gitignore
    
    intel_gpu_frequency was added in commit 5fb26d1 (intel_gpu_frequency: A
    tool to manipulate Intel GPU frequency), but wasn't added to .gitignore.
    
    Cc: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit c1d8293cc79350aa0ee803c7408a9c970f8eebc8
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Jan 13 11:50:02 2015 +0000

    intel_gpu_frequency: fix array bounds warning
    
    Add a parameter for the size of the act_upon array in the parse function
    since its size cannot be calculated with ARRAY_SIZE from just the
    pointer.
    
    Cc: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit a263cc87958de96acd77fdae6bf8a09bdf46204e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 15 09:36:05 2015 +0000

    igt/gem_tiled_swapping: Cycle through the bo a couple of times
    
    In order to exercise coherency across swapin/swapout of the same bo,
    explicitly loop over all bo a couple of times.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d3bf83af031a2e1c937b3f66fd3fbaec72864525
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 15 08:49:59 2015 +0000

    igt/gem_mmap_wc/set-cache-level: Exercise set-cache-level WARNing
    
    With the introduction of mmap(wc) and its unbound GTT write domain, we
    can now hit the warning inside set-cache-level, complaining about the
    failure to do correct cpu cache tracking.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3ea7a2807214900edfdfc171968d7c2e22890c0b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 14 14:33:29 2015 +0000

    igt/gem_exec_big: Don't try to repeatedly munmap(NULL)
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3214a27b5ba7cd621b091f1d0702e069a750c054
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jan 13 09:17:29 2015 +0000

    igt/gem_mmap_wc: Reorder gem_close()
    
    Unlike a GTT mmap, a WC mmap does not have a direct reference to the
    object, only to the backing storage. If we want to control the domain
    correctly for mmap(wc), we have to keep the bo reference around.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=88356
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5fb26d1469f95ea93df2f047f57c0cdcf27da5d7
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Sat Jan 10 14:36:20 2015 -0800

    intel_gpu_frequency: A tool to manipulate Intel GPU frequency
    
    WARNING: very minimally tested
    
    In general you should not need this tool. Its primary purpose is for
    benchmarking, and for debugging performance issues.
    
    For many kernel releases now sysfs has supported reading and writing the GPU
    frequency. Therefore, this tool provides no new functionality. What it does
    provide is an easy to package (for distros) tool that handles the most common
    scenarios.
    
    v2:
    Get rid of -f from the usage message (Jordan)
    Add space before [-s (Jordan)
    Add a -c/--custom example (Jordan)
    Add a setting for resetting to hardware default (Ken)
    Replicate examples in commit message in the source code. (me)
    
    v3:
    Its not It's (me)
    Add --help/-h to usage
    Add Version + man page
    Rename tool to intel_gpu_frequency, from intel_frequency
    Remove "sudo" from the examples
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>
    Reviewed-by: Jordan Justen <jordan.l.justen@intel.com>
    Cc: Kenneth Graunke <kenneth@whitecape.org>
    
    Here are some sample usages:
    $ intel_gpu_frequency --get=cur,min,max,eff
    cur: 200 MHz
    min: 200 MHz
    RP1: 200 MHz
    max: 1200 MHz
    
    $ intel_gpu_frequency -g
    cur: 200 MHz
    min: 200 MHz
    RP1: 200 MHz
    max: 1200 MHz
    
    $ intel_gpu_frequency -geff
    RP1: 200 MHz
    
    $ intel_gpu_frequency --set min=300
    $ intel_gpu_frequency --get min
    cur: 300 MHz
    min: 300 MHz
    RP1: 200 MHz
    max: 1200 MHz
    
    $ intel_gpu_frequency --custom max=900
    $ intel_gpu_frequency --get max
    cur: 300 MHz
    min: 300 MHz
    RP1: 200 MHz
    max: 900 MHz
    
    $ intel_gpu_frequency --max
    $ intel_gpu_frequency -g
    cur: 1200 MHz
    min: 1200 MHz
    RP1: 200 MHz
    max: 1200 MHz
    
    $ intel_gpu_frequency -e
    $ intel_gpu_frequency -g
    cur: 200 MHz
    min: 200 MHz
    RP1: 200 MHz
    max: 200 MHz
    
    $ intel_gpu_frequency --max
    $ intel_gpu_frequency -g
    cur: 1200 MHz
    min: 1200 MHz
    RP1: 200 MHz
    max: 1200 MHz
    
    $ intel_gpu_frequency --min
    $ intel_gpu_frequency -g
    cur: 200 MHz
    min: 200 MHz
    RP1: 200 MHz
    max: 200 MHz

commit cdbc514b4144b614b6ca296c0817828b6a20aa26
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jan 12 12:57:27 2015 +0000

    igt/gem_exec_big: Use mmap(wc) to speed up verification
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b65903b7db6c625526e29b2023e50661e584f1a0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jan 12 10:42:03 2015 +0000

    igt/gem_exec_big: Also test a large batch with a large number of relocs
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9917744176cfe694d51d77ac2eff173d9662e7b8
Author: Yang, Libin <libin.yang@intel.com>
Date:   Mon Jan 12 01:38:34 2015 +0000

    tools/intel_audio_dump: add support for Cherryview
    
    This patch adds support for dumping audio registers of Cherryview.
    
    Signed-off-by: Libin Yang <libin.yang@intel.com>

commit 67eb20c8a3569aa18d3378d8fe54cd78396a2c16
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Sat Jan 10 11:00:22 2015 -0800

    tools/Makefile: Alphabetize the list
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>
    Reviewed-by: Jordan Justen <jordan.l.justen@intel.com>

commit 1dddf32df97f1f1c5269d1bc3ece1d6183277603
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Nov 18 09:45:56 2014 +0000

    igt/gem_exec_big: Increase stress
    
    We should be able to execute batches up to the full GTT size (give or
    take fragmentation), so let's try!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a315476a6ba07f83631a60355bd01a6f73ced50b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Sep 6 08:16:27 2014 +0100

    igt/gem_evict_(alignment|everything): contend with GPU hangs
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ce79b7aa8010d848d4e9c417bcba375eac958f60
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 4 13:57:17 2014 +0100

    igt/gem_reloc_vs_hang: Inject hangs!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5ae9ecaf55ee3263f17ac3837b0dfdd6626cca51
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 4 13:16:52 2014 +0100

    igt/gem_pread_after_blit: Inject hangs!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 16bafdf5bf0248c02ea9824aca003b2a23d464be
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 4 09:26:24 2014 +0100

    igt/gem_concurrent_blit: Inject hangs before verifying contents
    
    After setting up the copy operations, add a hanging batch. This should
    mean that we complete the copy and the compare then races against the
    GEM reset. Hopefully, this will catch driver bugs where the target
    object is no longer accessible after the hang.
    
    Note: hang injection is disabled until the required kernel interface is
    completed. But there are useful additional tests here...
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 25cf0551c7d210c8c085c109891dc97a2cc61e27
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jan 6 09:59:47 2015 +0000

    igt/gem_ctx_thrash: Tweak resource limits
    
    On some systems (ok, most systems!) we may need to enlarge the allowed
    number of open files in order to create enough fd to fill the aperture.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=87572
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit eaa1e8e127205a9517bfc89275cd8723e8b09ed2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jan 6 10:06:41 2015 +0000

    ioct_wrappers: Add some mmap(wc) blurb dropped between authors
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 33d52a854375581321eb7ae36b06705425fb482f
Author: Alan Coopersmith <alan.coopersmith@oracle.com>
Date:   Tue Dec 23 19:07:14 2014 -0800

    Skip MADV_DOFORK & MADV_DONTFORK calls on OS'es that don't support them
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 843beb152bb948c972e573448be02ea0a902f3ea
Author: Alan Coopersmith <alan.coopersmith@oracle.com>
Date:   Tue Dec 23 19:07:13 2014 -0800

    Don't try to use CLOCK_MONOTONIC_COARSE on OS'es that don't support it
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 95ea5d5c0b0342ec95899c6d33311b6ff40732b3
Author: Alan Coopersmith <alan.coopersmith@oracle.com>
Date:   Tue Dec 23 19:07:12 2014 -0800

    Provide sighandler_t fallback for non-GNU-libc platforms
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f04b9dfba00b724879b0310a5d1442196afcc24e
Author: Alan Coopersmith <alan.coopersmith@oracle.com>
Date:   Tue Dec 23 19:07:11 2014 -0800

    Need to #include <libgen.h> for basename() on Solaris
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 99e6defbe79d3a41f967b55d33ce1a856914e797
Author: Alan Coopersmith <alan.coopersmith@oracle.com>
Date:   Tue Dec 23 19:07:10 2014 -0800

    Use pthread calls instead of raw syscalls on non-Linux systems
    
    Raw system calls aren't portable to other kernels.
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cf93bc8df9f5f94a0aedc8b52bad0ad4e036737c
Author: Alan Coopersmith <alan.coopersmith@oracle.com>
Date:   Tue Dec 23 19:07:09 2014 -0800

    Solaris needs to #include <sys/kd.h> instead of <linux/kd.h>
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f7766d1c77ffef757e05cbd6c6ed110cdd830045
Author: Alan Coopersmith <alan.coopersmith@oracle.com>
Date:   Tue Dec 23 19:07:08 2014 -0800

    Fix #ifdef check for _SC_AVPHYS_PAGES in intel_get_avail_ram_mb()
    
    Check for the sysconf value used here, not the one used in the
    previous function.
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f3e1a3d9f8cc366a1e0dbda42f3da9d37064fcd0
Author: Akash Goel <akash.goel@intel.com>
Date:   Fri Jan 2 16:33:34 2015 +0530

    igt/gem_mmap_wc: Add the invalid flags subtest
    
    A new subtest added to validate the new version of gem_mmap ioctl,
    for creating the wc mappings, on yet to be supported flags.
    
    v2: Removed the flags checking for older kernels (Daniel)
    
    Signed-off-by: Akash Goel <akash.goel@intel.com>
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f2a045f851fa46b2674d455fd5560bdc1fe21a0c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 2 16:33:33 2015 +0530

    igt/gem_concurrent_blit: Exercise wc mappings
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d95736906d7acea3f52a16076c70f0907684afb5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 2 16:33:32 2015 +0530

    igt/gem_fence_upload: Add comparison against wc mmaps
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 58865891ba31914eb35f56a553ff7056e3443b06
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 2 16:33:31 2015 +0530

    igt/gem_gtt_speed: compare against WC mmaps
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e70c789909efee8da5c483dc84361418c1d43018
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 2 16:33:30 2015 +0530

    igt/gem_tiled_wc: Exercise wc mmaps with swizzling
    
    This exercises both the wc mmappings and the extended get_tiling ioctl.
    Userspace cannot handle bit17 swizzling through wc mmaps (because bit17
    requires swizzling based on the actual physical address of the page -
    which is unknown to userspace) and so we need an extended get_tiling
    ioctl to report the actual as well as the logical swizzling on an
    object. We then check that the contents of the object are tiled and
    swizzled correctly when viewed through a wc mmap.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a464fb758e102cb3af90e23e002472a9faac340b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 2 16:33:29 2015 +0530

    igt/gem_mmap_wc: Exercise mmap(wc) interface
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c49a7e9163c2ee30c4bfe930dc0418cf5e2eb0d4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jan 5 14:34:58 2015 +0000

    lib/core: Fix compile error from rebasing
    
    s/KMSG_INFO/KERN_INFO/
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d8bf7e17cb5b4b734071563f330a20e41cc6acc4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jan 5 14:07:31 2015 +0000

    lib/core: Show the exitcode in kmsg as well
    
    This provides symmetry with logging the start of the test via kmsg.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cb512b6470fa848c9b351c2090cd3e3f588cfc5f
Author: Vincent Cheng <vincentc1208@gmail.com>
Date:   Wed Dec 31 10:39:51 2014 +0000

    tools/intel_gpu_abrt: Fix bashism
    
    intel-gpu-tools ships a #!/bin/sh script that has bash-specific syntax
    (which breaks on distros such as Debian and Ubuntu where /bin/sh is a
    symlink to something other than bash).
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=87888

commit eb799b29947a9030aca7d808e97190635636c8de
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Dec 21 13:53:27 2014 +0000

    overlay: Hide kworker threads in overview
    
    The kworker threads are used for flip handling and other non-userspace
    driver tasks. They are non-blocking and so do not impact upon how
    userspace performs, but they do obscure that information in the
    overview.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0be9766952333dc54a0c568bc487660c0caf5edf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Dec 21 13:50:34 2014 +0000

    overlay: A couple of valgrind pleasers
    
    Make sure we initialise values to keep valgrind happy
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7f9d14aa516527f6abf77b4df294acfa832d0dc6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Dec 21 13:49:25 2014 +0000

    overlay: Negative modulus
    
    Don't use a negative index into the array if the desired element is
    negative, just wrap around properly into the ring for the chart.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c537cdb08eb7a862b50fab2d66aa40f8efaaf933
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 18 16:21:16 2014 +0000

    igt/gem_ctx_thrash/threads: Allow bo resuse
    
    We already allocate enough objects to thrash the ppGTT VMs, so allow us
    to reuse the batch buffers for some efficiency gains and through the
    contention more towards the ctx->vm.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4bde75434999568db4868adfcdc9f93fcb7c49c4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 18 16:20:10 2014 +0000

    igt/gem_ctx_thread/processes: Serialise after forking children
    
    Play nice, especially with the subtest, and wait for the children to
    exit before finishing the test. If we don't we end up with a fork bomb
    for some unknown reason...
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9f389d00cf83248fa31f626a5a4a3f5ac7c07a75
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 18 11:45:30 2014 +0000

    igt/gem_ctx_thrash: Boost workloads
    
    Now that we are no longer busy-spinning inside random(), we can spend
    more time exercising i915.ko
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 14c661599b0a9af9169779b9ffcffa4bbbb7bb3d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 18 11:44:52 2014 +0000

    lib/gen8: Make rendercopy threadsafe
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 71e9e9c564419cd1f4563c628dc80e707a512065
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 18 09:08:13 2014 +0000

    lib: random() is too slow
    
    random() being a good multithread-safe RNG is too slow to be used in
    stress tests, especially for a seemingly trivial task of randomising the
    order of an array.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6999b70a8438789c3afaad0cb76cf364bd4274c1
Author: Tim Gore <tim.gore@intel.com>
Date:   Wed Dec 17 10:44:11 2014 +0000

    Demos/Android.mk: build intel_sprite_on
    
    This reverts the effect of two commits
    06fb6c233dd82aac766aa9206644f6eff668ca99
    264e1ac10ac14a098a78cc9f96c4e7cabb124ee5
    
    Both of these were to stop demos/intel_sprite_on
    from being built, but the first was just broken.
    
    So this commit re-enables building intel_sprite_on.
    However, intel_sprite_on will not build in recent
    Android trees. To overcome this the version
    of IGT kept in the Android repository will carry a patch
    to intel_sprite_on, and the automatic build test of
    IGT on android will patch the freedesktop code on the fly.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f73697aa8b9131f4bbcd438c66d45b24254d92c7
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Dec 17 14:34:47 2014 +0000

    NEWS: New heading for 1.10
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 959a7db668f19715e7d85f7899a3c38428c4deed
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Dec 16 12:12:51 2014 +0000

    igt: Add gem_ctx_thrash to fill the GGTT with contexts
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 739790d7eda4866538386f2a24e597c700c24c49
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Dec 17 09:05:10 2014 +0100

    tests/gem_exec_blt: Add subtest that uses dumb buffers
    
    Just to make sure this keeps working since a patch to WARN_ON using
    dumb buffers in execbuf was accidentally merged.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 6262f353bb04112becc8679f63b1caaf083f1484
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Dec 12 15:26:36 2014 +0000

    Update version to 1.9 and add the release date
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 06fb6c233dd82aac766aa9206644f6eff668ca99
Author: Tim Gore <tim.gore@intel.com>
Date:   Fri Dec 12 14:29:00 2014 +0000

    Demos/Android.mk: dont build intel_sprite_on
    
    intel_sprite_on wont build on Android. Previous
    attempt to disable was just wrong!
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 267b352c4fd161a5e96d0a569cdc1f7a3191e90e
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Dec 12 14:28:38 2014 +0000

    NEWS: Updates
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit f59bbf7e8f6b0b5208e6cc11e01537a93ae93706
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Dec 12 14:18:07 2014 +0000

    lib: fix a few documentation warnings
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit a11117e42fabc3228d21a4786584acbe9840f1dc
Author: Tim Gore <tim.gore@intel.com>
Date:   Fri Dec 12 12:14:33 2014 +0000

    Android.mk: replace std=c99 with std=gnu99
    
    The android makefiles were passing the -std=c99 flag to the
    compiler which disables the typeof keyword. This causes a
    build fail for a recent addition to igt_aux.h.
    Change this to -std=gnu99, which is the flag used in the
    linux build
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 264e1ac10ac14a098a78cc9f96c4e7cabb124ee5
Author: Tim Gore <tim.gore@intel.com>
Date:   Fri Dec 12 11:55:21 2014 +0000

    Demos/Android.mk: dont build intel_sprite_on
    
    intel_sprite_on wont build on Android.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 6414707bdc318a0bed4c3ae2fe404e27f3cd377c
Author: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
Date:   Thu Dec 11 15:11:53 2014 +0200

    lib: Fix out of tree build of version.h
    
    Write the version.h.tmp file into the build directory instead of source
    directory. This allows out of tree building when those two are not the
    same.
    
    Signed-off-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 42b02c284ed24871528df8f1b3eaad7fe1554fd9
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Dec 8 11:12:51 2014 +0000

    lib: add a function to lock memory into RAM
    
    Add a function to lock memory into RAM and use it in the
    gem_tiled_swapping test to reduce the amount of allocated memory
    required to force swapping. This also reduces the amount of time
    required for the test to complete, since the data set is smaller.
    
    The following durations were recorded with gem_tiled_swapping on a
    haswell system before the change:
    
      Subtest non-threaded: SUCCESS (55.889s)
      Subtest threaded: SUCCESS (810.532s)
    
    and after:
    
      Subtest non-threaded: SUCCESS (11.804s)
      Subtest threaded: SUCCESS (268.336s)
    
    v2: add various assertions and requirements and make sure
        gem_tiled_swapping works on systems with less RAM (Daniel Vetter)
    
    v3: fix allocation size calculation
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 5fe9c88bdad9bf54013b58f2324b7b47d92ca09d
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Dec 2 11:37:26 2014 +0000

    lib: add optional log domain filtering
    
    v2: add an "application" filter for the default domain (used by
        applications)
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 8161a21762b552d97fe6bde8d4fd441d9cd10f61
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Dec 2 10:54:54 2014 +0000

    lib: introduce log domains
    
    Log domains can be used to identify the source of log messages, such as
    the test being run or the helper library.
    
    v2: Add separate domains for different parts of the helper library and
        use an empty default domain for applications.
        Expand the log output to include the process name and the log level
        of the message in addition to the domain and pid.
        Print the expanded message only for warning and debug messages.
    
    v3: check for glibc before using program_invocation_short_name
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 85b74d5c14506bbae53ab02408102645e071a206
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Dec 2 10:53:47 2014 +0000

    tests/gem_tiled_swapping: use igt_info logging wrapper
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 16f1506ff605127121249d35a233d1ba438ffeef
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Dec 10 16:24:03 2014 +0000

    tests: replace 3D test images
    
    Use images with a smaller file size, created by saving the left and
    right stereo output of glxgears.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit bdbf78db018d0d1854ea4274d983cf32e57a7d74
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Dec 10 14:47:45 2014 +0000

    tools: add missing copyright headers
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit f3ae3deb4f7266cd761a6c81ea2263ced23c2fc3
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Dec 5 14:46:28 2014 +0000

    NEWS: Updates
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit e80922eba61e71bbaae3febf5c69f0ed00809591
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Dec 5 14:07:53 2014 +0000

    Add a MAINTAINERS file
    
    Acked-by: Daniel Vetter <daniel.vetter@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 84f23415c4a82ed3bd230701b2c085ca5dd699a3
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Oct 29 11:18:27 2014 +0000

    Update README
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 5d46f68eab1cb6bdaa52eff33bcb0d61149eca3d
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Dec 9 22:33:16 2014 +0200

    tests/kms_cursor_crc: Restore the valid pipe/connector combo check
    
    The valid pipe/connector combo check was lost in
     commit 57259d714d3fe1170cf931af72648219856a9918
     Author: Daniel Vetter <daniel.vetter@ffwll.ch>
     Date:   Mon Nov 24 16:08:32 2014 +0100
    
        lib/igt_debugfs: Don't setup crc in _new
    
    Restore it to make the test again useful on CHV.
    
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit b6f68c10b4ee2b730baeb8129aba36b5210ac291
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Dec 9 14:44:02 2014 +0200

    tests/kms_mmio_vs_cs_flip: Count valid tests for all crtcs
    
    Report SKIP only if none of the pipe/connector combos worked, instead of
    trying to report for each pipe separately.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 1b6eb414f36f3728f5c0393d8f4eefee74abdce9
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Dec 9 15:27:59 2014 +0200

    lib/igt_debugfs: Throw away the two first CRCs
    
    On CHV we sometimes see not just one but two bad CRCs. No real idea
    what would cause that, but let's just throw away the second CRC as
    well to gain some stability for the tests.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 01153e7d5f0b8d4edb0306c2a27030d2757235f4
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Dec 9 17:10:42 2014 +0000

    drv_hangman: Remove unused function
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit d49ef76e98d5966c31f6b960dcc1530103b42ae9
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Dec 9 17:07:22 2014 +0000

    kms_cursor_crc: Remove value to 'return' in a void function
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit c252c77dbfae6c7ed4d9a67b2bf545c468c2e205
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Wed Feb 12 16:29:54 2014 +0200

    tools: terminate getopt_long long option arrays properly
    
    The last element of the long options array has to be filled with zeros.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit f333981e1a2f5e7a16d030469c29b53c914a831c
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Nov 28 09:30:45 2014 +0200

    tests/kms_flip: Target the back buffer with the dummy load
    
    Aim the dummy load to the current back buffer instead if the front
    buffer. Assuming the idea is to get the next flip to be stuck behind
    the dummy load?
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 092682a3e5a48bf3555fdb7c4931fecc1df09f9e
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Nov 27 16:51:34 2014 +0200

    tests/kms_flip: Calibrate the dummy load delay in kms_flip
    
    Try to tune the dummy load to ~1 second. The calibration happens the
    first time dummy load is generated.
    
    v2: Actually do the number of ops intended and
        calibrate to 1 second and not 2
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit b0cb1e1f9d4b16a13c0afc16c809039fbb288213
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Dec 3 15:25:25 2014 +0200

    tests/kms_flip: Use fixed size (2kx2k) buffers for dummy load
    
    Make the dummy load independent of the display resolution by using a
    two fixed size dummy bos to generate the load. As a final step do
    another copy from one of the dummy bos to the fb to make sure there's
    a dependency between the dummy load and any subsequent operation on
    the fb.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 21db302c9bf8eb936f37f627aea40d3e431fc36c
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Dec 3 14:59:22 2014 +0200

    tests/kms_flip: Refactor blit code
    
    Pull the code to emit a single blit to a separate function.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 8032f526ef1d075e303342b7741db35faadfd00f
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Dec 3 14:51:16 2014 +0200

    tests: Run lib/igt.cocci
    
    Found some open coded min()/max()/swap() macros.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit e1bdab9973ffdb5477666a384b011fa012965758
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Nov 28 11:11:17 2014 +0200

    lib/igt.cocci: Deal with min/max/swap
    
    Replace open coded min/max/swap with the macro invocation.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 1658edceee85bd5f57e8dd39075f1d127260d5b6
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Nov 28 10:03:38 2014 +0200

    lib: Add swap() macro
    
    swap() will swap its two arguments while keeping the required
    tmp variable hidden. Makes for neater code.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit b32b5327a20b3747890235c362b093439b854f59
Author: Imre Deak <imre.deak@intel.com>
Date:   Thu Dec 4 17:23:05 2014 +0200

    tests/pm_rps: vlv: round middle point to freq supported by HW
    
    When setting the calculated middle frequency value the test assumes that
    the HW/kernel rounds this value according to a 50MHz step value. This is
    not so at least on VLV/CHV, on my B0 BYT-M for example this step value
    is 22MHz, so there the test will fail.
    
    To fix this get the nearest supported value by setting the target
    frequency as a min or max frequency and read it back. The kernel will
    round the returned value to the nearest supported.
    
    v2:
    - remove the 50MHz rounding that was done for non-VLV platforms, the new
      way of rounding should provide the correct value for all platforms
      (Ville)
    
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit f70afed4c7abd95fc3250141a1e36587e31f7c87
Author: Imre Deak <imre.deak@intel.com>
Date:   Thu Dec 4 17:05:25 2014 +0200

    tests/pm_rps: vlv: load gpu for idle min/max tests
    
    When changing the sysfs GT min/max frequencies, the kernel won't
    explicitly change the current frequency, unless it becomes out of bound
    based on the new min/max values. The test happens to work on non-VLV
    platforms because on those the kernel resets the current frequency
    unconditionally (to adjust the RPS interrupt mask as a side-effect) and
    that will lead to an RPS interrupt setting the minimum frequency.
    
    To fix this load the GPU after decreasing the min frequency and before
    checking the current frequency. This should set the current frequency to
    the minimum.
    
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit aabf2d095269ae4cb8e77dd61e5c0c16e602c1d8
Author: Imre Deak <imre.deak@intel.com>
Date:   Thu Dec 4 16:40:19 2014 +0200

    tests/pm_rps: vlv: wait for freq to settle
    
    At least on VLV when forcing a new GT frequency by writing to the
    min/max freq sysfs entries the kernel doesn't wait until the new
    frequency settles, so the subsequent readback check might fail. To fix
    this wait until the current frequency is between the min/max values
    using a 10ms timeout.
    
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 470071d4aba10f85b3728cf24acd792a273c1d28
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Dec 8 07:49:49 2014 +0000

    igt/drm_read: Require that pipe 0 is active
    
    As we require a pipe enabled to generate vblanks, the first step is to
    then to check that pipe 0 is active or else skip the test.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 819e68f2ed0064f48250a4ed8e5135026c90b514
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 5 13:12:37 2014 +0000

    igt/drm_read: Abuse read(drm)
    
    Check that the more obvious userspace error conditions are handled by
    the kernel, ideally without loss of data. These include nonblocking
    waits, passing invalid buffers and passing buffers of the incorrect
    length.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b64704673e2a4d891386a1200150e679216b6d60
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 5 11:04:42 2014 +0000

    intel_error_decode: Decode the ERROR register on Sandybridge and Ivybridge
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 88ff1cec3a830fc467b91efb7e1dcdb4d82a0e17
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Dec 4 13:42:12 2014 +0000

    gem_bad_reloc: Don't flip-flop between SKIP and PASS
    
    Here is a cheap way for this test to give consistent results. This
    doesn't change the usefulness of this test, hopefully.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=85270
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit b3cce757b5e8c0d6b40e2c401e5391162d58e8c6
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Dec 4 11:13:04 2014 +0000

    tests: add gem_gpgpu_fill to .gitignore
    
    gem_gpgpu_fill was added in commit 4ec8479 (tests: Add gem_gpgpu_fill),
    but wasn't added to .gitignore.
    
    Cc: Zhenyu Wang <zhenyuw@linux.intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit c76f35386c2533e9959be37feca0e80d252fec30
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Dec 3 14:38:45 2014 +0000

    lib: always reset connectors after the state is forced
    
    Install the exit handler to reset connector states whenever
    kmstest_force_connector is called, so that the connector states are
    always reset even if a test fails.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 8d82e5b5efb56bdf1aa2eae8a3d82817854e119b
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Oct 8 16:16:39 2014 +0100

    lib: remove igt_edid.h
    
    This has been replaced by igt_kms_get_base_edid().
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 304c874b58c0a65dcc5442c50099d048d4fe0633
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Oct 8 15:24:36 2014 +0100

    tests: use base edid
    
    Use the base edid for testing, which includes several different display
    modes.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 43da3e706b955751506073e1c0e959209f6c7cf4
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Oct 8 14:49:36 2014 +0100

    tests/kms_force_connector: split into subtests
    
    v2: fix the initial mode count
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 273a06dc9b68f9c6d78431de23a12ad7364bff99
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Oct 8 14:11:30 2014 +0100

    igt_kms: add a base edid
    
    Add a basic edid block that includes several different display modes.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit b2ac2642a9b5448761086bdb8ae1a1e2974b3995
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Nov 28 11:02:44 2014 +0000

    tests: add more test descriptions
    
    Add more test descriptions based on exiting comments.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 029dee797965357dbcbe5a097731701e4d965d82
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Nov 28 11:37:33 2014 +0000

    docs: treat the test description as cdata
    
    Enclose the test description in cdata tags since the test descriptions
    come from the tests themselves and may not be escaped for use in xml.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit a5425a101cd38941961c13f97b56aa0683f64f8e
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Nov 19 15:44:00 2014 +0000

    docs: add a glossary of test name terms
    
    Add a glossary of test name terms based on the details in
    tests/NAMING-CONVENTION.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit bc6dc7efdb65a6f5ac01cc2c306951dd9dd92fc4
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Nov 26 18:20:03 2014 +0000

    docs: add exit status documentation
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit e4e18faffc21cceb1f45c6bbfad9f1ceacdccf05
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Nov 28 11:49:49 2014 +0000

    docs: add subtest lists to test descriptions
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 7d2ab7083b46d30335cdb01006ae8af021578ea2
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Nov 17 11:51:51 2014 +0000

    docs: split the test program documentation into sections
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 4ec8479c53f187cc435f118d90f73ffa43887cd0
Author: Zhenyu Wang <zhenyuw@linux.intel.com>
Date:   Wed Dec 3 19:09:13 2014 +0800

    tests: Add gem_gpgpu_fill
    
    This is simply a copy of gem_media_fill but using new
    GPGPU fill operation.
    
    v2: Use general fill func pointer.
    
    Signed-off-by: Zhenyu Wang <zhenyuw@linux.intel.com>

commit 10c6ad3805489819047ee24379bb1e7ab08ead1d
Author: Zhenyu Wang <zhenyuw@linux.intel.com>
Date:   Wed Dec 3 19:05:09 2014 +0800

    lib: Add GPGPU fill
    
    This is to add fill operation using GPGPU pipeline which is similar to
    current media fill. This can be used to simply verify GPGPU pipeline
    and help to enable it on newer HW, currently it works on Gen7 only and
    will add support on later platform.
    
    Now this sets very simply thread group dispatch for one thread per
    thread group on SIMD16 dispatch. So the fill shader just uses thread
    group ID for buffer offset.
    
    v2: No new fill func typedef but adapt to igt_fillfunc_t.
    
    Signed-off-by: Zhenyu Wang <zhenyuw@linux.intel.com>

commit 106f0bf965ac5ba8e5553e3e1b39396750bedc74
Author: Zhenyu Wang <zhenyuw@linux.intel.com>
Date:   Wed Dec 3 18:56:39 2014 +0800

    lib: rename igt_media_fillfunc_t typedef to igt_fillfunc_t
    
    This makes fill function more general to prepare for other
    fill method using GPGPU pipeline.
    
    Signed-off-by: Zhenyu Wang <zhenyuw@linux.intel.com>

commit 4e5c16c17ed14831aaa369877d78788ad23ce388
Author: Tim Gore <tim.gore@intel.com>
Date:   Mon Dec 1 14:42:37 2014 +0000

    tests/drv_hangman: remove check for other drm clients
    
    This test will not run on Android as the coreu service
    remains running even after the android system is stopped.
    Coreu is a client of drm and when the test finds this it
    fails an assert.
    Coreu is started by the init process and there is no
    tidy, non invasive way to stop it (init just restarts it).
    Coreu isn't doing anything and would not be expected to
    interfere with this test. In addition, all the other
    igt tests just rely on the user/test script to ensure
    that there are no other drm clients, so this test can
    do the same. On Android we must rely on coreu being
    dormant when this test runs.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 77b52f1881c0c62732a1deef8b900e50f1f22301
Author: Tim Gore <tim.gore@intel.com>
Date:   Tue Nov 18 14:59:25 2014 +0000

    tests/Android.mk: Add kms_pwrite_crc to cairo test list
    
    kms_pwrite_crc was recently added and requires cairo, so
    add this to the list of tests to exclude if cairo is not
    avaiable
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit e06a7448d894392a294d89959fc1cf4e6a01fd19
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Nov 28 11:13:45 2014 +0200

    tests/kms_flip: Fix assert about vblank wait duration
    
    If we wait for one vblank, we may end up returning almost immediately,
    so trying to assert anything but >0 about the minimum duration is
    bogus.
    
    Instead wait for two vblanks and then we can assert that we should have
    be blocked for at least one frame. And move the upper bound to a little
    over two frames to match.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=79050
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit ddf0f097764da6fdc50ab40c33bef7a0c08d54e3
Author: Tim Gore <tim.gore@intel.com>
Date:   Fri Nov 28 14:46:24 2014 +0000

    tests/gem_ring_sync_copy: reduce memory usage
    
    gem_ring_sync_copy uses a lot of memory and gets OOM killed on smaller
    systems (eg android devices).  Most of the allocation is for "busy work"
    to keep the render rings busy and for this we can just re-use the same
    few buffers over and over. This enables the test to be run on low end
    devices.
    
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit dbac905600c37f180618e6b4467cafbb6c3f8f2a
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Nov 25 14:10:04 2014 +0000

    lib: ensure subtests are not added to simple tests
    
    Simple tests do not support subtests, so fail if igt_subtest is used in
    one.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 3bebf3dd011cb7acf280d4deb02723718149a99c
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Nov 25 14:03:40 2014 +0000

    tests: use subtests in gem_tiled_swapping
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit ae3a9466316d61ab336f43d06e6ed8bc5025389a
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Nov 25 11:59:37 2014 +0000

    lib: fix symbol names in documentation comments
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit b8f193bbbff1a322296969ded5a4c3f9fd759c6d
Author: Gagandeep S Arora <gagandeep.s.arora@intel.com>
Date:   Thu Nov 13 23:42:46 2014 +0530

    demos/intel_sprite_on: Added support to compile intel_sprite_on on Android.
    
    Added Android.mk for intel_sprite_on.
    
    v2: Addressed review comments by Daniel Vetter.
        - Moved the cairo independent functions from igt_kms.c to igt_aux.c.
    
    Signed-off-by: Gagandeep S Arora <gagandeep.s.arora@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit dad4694b004a65455523abbb0c7f9839d7125dae
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Nov 24 14:16:25 2014 +0000

    lib: fix igt_reset_connectors
    
    Use igt_debugfs_open to open the connector file, since the
    forced_connectors array now only stores the connector path relative to
    the debugfs path. Also add some extra error checking to ensure a test
    failure if the reset fails.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=85829
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 57259d714d3fe1170cf931af72648219856a9918
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Nov 24 16:08:32 2014 +0100

    lib/igt_debugfs: Don't setup crc in _new
    
    The problem is that this causes writes to registers, and if the pipe
    is off they might go nowhere (e.g. when runtime pm is enabled).
    Furthermore we can only really check once the modeset setup is done,
    but again most tests set up the CRC structure before calling
    igt_commit and friends. We could add crc restore support to the
    kernel's rpm code, but that will end up being rather invasive and
    fragile hard-to-test code.
    
    Now originally this was needed back when CRC support wasn't available
    everywhere. But that's fixed now.
    
    So given all this just drop that sanity check and make sure that we
    only touch the debugfs file (and so the hw state) when we know the
    pipe is running in the desired configuration.
    
    A complementary kernel patch will try to catch offenders by returning
    -EIO if the pipe is off.
    
    v2: Forgot to git add one hunk.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=86092
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit d8078911f63494eba67f8f07ffb56c4bdeae7bc9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Nov 18 15:17:43 2014 +0100

    tests/kms_render: gen2/3 can't do 10bpc
    
    So skip those.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=86236
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 08f0e1c625571533bbef9a591d4ae4ce65c4144d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Nov 18 13:49:29 2014 +0100

    tests/prime_self_import: Track leaked objects accurately
    
    drm_open_any keeps a buffer handle around for the cleanup sync work,
    so we can only grab the buffer count after the latst drm_open_any
    call. Otherwise we'll detect a fake leak.
    
    This broke in
    
    commit 2f2c491cf3167befe7c79e4b17afb4f6284dfc84
    Author: Mika Kuoppala <mika.kuoppala@intel.com>
    Date:   Fri Mar 28 10:52:46 2014 +0200
    
        lib/drmtest: don't dup quiescent fd
    
    since that additional open drm fd keeps a gem object for the default
    context around. Hence why this also only blows up on gen6+ - earlier
    platforms don't have hw context support.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=79821
    Cc: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 120d6d1b2c8b3f036058bf2d24d08602dea69ec9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Nov 18 10:39:38 2014 +0100

    lib/aux: Make it clear that rtcwake failures aren't bugs
    
    Because QA has a bunch of shitty machines with old distros and tends
    to re-port this all the time.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=82232
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 16f99ee419f56bf7b56657c78ecaa22ccf0c2982
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Nov 17 14:46:50 2014 +0100

    lib/os: Push simulation test down into intel_require_memory
    
    This has the upside that we'll never forget to add it to thrashing
    tests. But we'll also never miss to move it when adding basic
    functionality tests to existing binaries. Chris already started this
    refining work in e.g.
    
    commit d77eda6614a1955717f224be023dedf74eb7735d
    Author: Chris Wilson <chris@chris-wilson.co.uk>
    Date:   Fri Nov 14 07:45:40 2014 +0000
    
        igt/gem_linear_blits: Require that we do the full test
    
    by moving igt_skip_on_simulation into subtests.
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit a535cdedfbd280c5e07be1c2445e09973836509a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Nov 17 14:43:33 2014 +0100

    lib/os: Pust igt_require into memory check function
    
    More in line with the usual igt pattern and simplifies the code -
    every called just wrapped it in igt_require.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit aa63fc740c510ed44c1a8dc0fc00f0c92c0581a2
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Nov 7 14:45:01 2014 +0000

    configure: update bug reporting url
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit f674a1f61fe1e63209ba3fab05313ba14ffd071e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Nov 14 07:45:40 2014 +0000

    igt/gem_tiled_blits: Require that we do the full test
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d77eda6614a1955717f224be023dedf74eb7735d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Nov 14 07:45:40 2014 +0000

    igt/gem_linear_blits: Require that we do the full test
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b35b1505f762839b0e9a0f8a146804444566a92a
Author: Imre Deak <imre.deak@intel.com>
Date:   Thu Nov 13 13:33:54 2014 +0200

    tests/pm_rpm: add gem-evict-pwrite subtest
    
    This triggers a device suspended WARN in the kernel in
    gen6_ggtt_insert_entries() while calling the GEM pwrite ioctl.
    
    The sequence is suggested by Daniel.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f12ed8305807975e232e42fd34ad75e1147a788e
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Nov 13 17:24:57 2014 +0200

    tests/kms_pwrite_crc: Add pwrite vs display coherency test
    
    Add a test to verify that pwriting to a future scanout buffer works
    correctly. The specific problem occurs when the buffer is already
    UC/WT before the pwrite, not the current scanout buffer, and not
    currently in the CPU write domain. With the buggy kernel no clflush
    will be performed after the pwrite, and hence we end up with cache
    dirt on the display.
    
    The problem only affects LLC platforms (non-LLC would clflush anyway
    after pwrite), but we can let the test run on all platforms.
    
    v2: Fix typos in commit message and add to .gitignore
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit ebab9f080b24ac11507e872fcfdf58ea9cb7e6fc
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Nov 13 11:47:19 2014 +0000

    lib: only skip subsequent tests if a timeout occurs outside of a subtest
    
    Make timeout behaviour more consistent with igt_fail, where subsequent
    subtests are only skipped if the failure occurs outside of a subtest.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=85718
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit f6aa80ca18f3dc5fe751c941fb1af6b4b44d21ef
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Nov 10 15:09:51 2014 +0000

    tests/kms_flip: add a timeout for the nonblocking-read test
    
    kms_flip/nonblocking-read will block indefinitely if it fails, so
    introduce a timeout to indicate test failure.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=85718
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 34424138bcee87dc8e3c7555f28aa2642668e2e8
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Nov 7 16:25:59 2014 +0000

    lib/tests: add a test for igt_set_timeout
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 6ee3337b28b3598da723099d43ae14fac96d06e5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Nov 7 10:40:32 2014 +0100

    tests/gem_exec_parse: Go OCD about C-style comments
    
    Cc: Brad Volkin <bradley.d.volkin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit bf31ed80e097d6d69c436a5070f6ab6d0a5d08b6
Author: Brad Volkin <bradley.d.volkin@intel.com>
Date:   Mon Nov 3 11:19:00 2014 -0800

    tests/gem_madvise: set execbuf.batch_len before doing an execbuf
    
    The command parser's batch_len optimization causes the parser to
    reject this batch as not having an MI_BATCH_BUFFER_END because
    the length was not set correctly.
    
    Signed-off-by: Brad Volkin <bradley.d.volkin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c1fdc2f0e95714e20b157e318f07110219a2237f
Author: Brad Volkin <bradley.d.volkin@intel.com>
Date:   Mon Nov 3 11:18:59 2014 -0800

    tests/gem_exec_parse: fix batch_len setting for cmd-crossing-page
    
    The size of the batch buffer passed to the kernel is significantly
    larger than the size of the batch buffer passed to the function. A
    proposed optimization as part of the batch copy kernel series is to
    use batch_len for the copy and parse operations, which leads to a
    false "batch without MI_BATCH_BUFFER_END" failure for this test.
    
    To fix this, modify the test to set batch_start_offset and batch_len
    such that they define the range of actual commands in the batch,
    including a few of the surrounding nops for alignment purposes.
    
    v2: update batch_start_offset as well
    
    Signed-off-by: Brad Volkin <bradley.d.volkin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4dd6e0edcf4fb2dd52fafa8b448ce87fafc4125d
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Nov 12 10:47:30 2014 +0000

    configure: require automake 1.12
    
    The check tests require AM_TESTS_ENVIRONMENT, which was added in
    automake 1.12.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 10aacc73348f77c8ca01f02730710d8d23fb04de
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Nov 12 10:39:41 2014 +0000

    tests: ensure the script based tests are included in the distribution
    
    TESTS_scripts was accidentally removed from EXTRA_DIST in commit 685e577
    (Move library selftests to lib/tests).
    
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 50d539efebbd71b4f5499e69d0768e69dceae09a
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Fri Nov 7 15:33:34 2014 +0200

    tests/gem_reset_stats: add defer-hangcheck test
    
    to see if one can fool hangcheck by keeping non hanging
    ring busy
    
    v2: break from loop instead of return (Daniel Vetter)
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit c049c39f357295ecfc4d0795b5b3b1e35b04ac58
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Nov 3 13:48:51 2014 +0000

    tests: use igt_debugfs where possible
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 4f689d52e7e6a511fb0de21ccc0b938d57ce6f41
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Oct 30 15:54:44 2014 +0000

    tests/drm_lib.sh: add a "--help-description" option
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 895204fc6257f8ce2cae380f98cab4fd753251a1
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Oct 30 15:54:02 2014 +0000

    testdisplay: add a test description
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 98188b4b416fe066f8d7c8ea18b4186c3381223b
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Oct 14 15:02:54 2014 +0100

    docs: include descriptions for the test programs
    
    v2: fix various distcheck issues
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit e6fec38cf7151596d3f9ead99ea5386be7a7b6de
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Oct 14 13:46:57 2014 +0100

    Build the docs directory last
    
    Ensure that other components are built before generating the
    documentation.
    
    v2: build the docs directory after any optional directories
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 3d0dca47c6fdec0720aca8016af9a889a0eb3409
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Oct 13 11:40:12 2014 +0100

    docs: add some test descriptions
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit f8b3c704af190fcf49f358ea1395ad8fb8b5b5cb
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Oct 10 16:56:20 2014 +0100

    lib: add the ability to include a description with a test
    
    The IGT_TEST_DESCRIPTION macro can be used to define a description for a
    test.
    
    v2: Remove semicolon from end of macro (Damien Lespiau)
        Add API documentation for the macro.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit c06016798cbd24c24283dbdb3ac2762834d04bcf
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Oct 31 15:45:09 2014 +0000

    configure: fix issues when running outside the source tree
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit ce0d34d73d240a95193a4a6f82adfe5f4844bb66
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Oct 31 15:00:03 2014 +0000

    testdiplay: add a "--help" option
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit db425d69f62690a95048fde6d5dc515686bfa9ac
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Oct 31 12:32:22 2014 +0000

    testdisplay: ensure invalid long option exit status is non-zero
    
    The optopt variable is not set if an invalid long option is used, so
    check the current option character instead.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit b441e6ac2ac98ee2f365683f339c8802d238043f
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Oct 31 11:45:16 2014 +0000

    lib/tests: don't use hard error status to indicate test failure
    
    An exit status of 99 is reported separately in the test summary as an
    error, rather than as a test failure.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 03a4ad16d17b201ba719bc48d2fb2de341a1cf2f
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Oct 31 11:38:02 2014 +0000

    lib/tests: fix tests and test list location
    
    The igt_command_line.sh script was moved by commit 685e577 (Move library
    selftests to lib/tests), but the location of the tests and the test
    lists was not updated.
    
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 86bb6072a6e104e59ebbea2b41d4d86aeed134dc
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Nov 5 15:58:54 2014 +0000

    tools/quick_dump: don't include generated sources in the distribution
    
    This also ensures that "make dist" works even if SWIG is not available.
    
    BUILT_SOURCES is not required because the files are already explicit
    dependencies of other rules.
    
    v2: make sure SWIG is not invoked with the incorrect output filename
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 2c44d6316a15170a5e2897488729f3d6868e0a1c
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Thu Nov 6 16:02:31 2014 +0800

    Mediafill/skl: Remove redundant field to fix GPU hang
    
    After applying the commit(982f7eb238a0898c456e0574dee7c4507738d75f), the
    OUT_RELOC is updated on Broadwell and later, which is to handle the
    64-bit field of gfx address internally. In such case some commands
    should be fixed, otherwise GPU hang will be triggered when running
    gem_media_fill.  (It is already fixed on Broadwell)
    
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit c68028936b83a316c7360fe2dc1276cf2424c116
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Thu Nov 6 16:02:30 2014 +0800

    Rendercopy/skl: Remove redundant field to fix GPU hang
    
    After applying the commit(982f7eb238a0898c456e0574dee7c4507738d75f), the
    OUT_RELOC is updated on Broadwell and later, which is to handle the
    64-bit field of gfx address internally. In such case some commands
    should be fixed, otherwise GPU hang will be triggered when running
    rendercopy.  (It is already fixed on Broadwell)
    
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit e34240d4c18bfef1895fad6e8ce9cc80c844ac14
Author: Brad Volkin <bradley.d.volkin@intel.com>
Date:   Tue Nov 4 14:00:43 2014 -0800

    tests/drv_hangman: skip a few asserts when using the cmd parser
    
    This test has a few checks that batch buffer addresses in the error
    state match the expected  address for the userspace supplied batch.
    But the batch buffer copy piece of the command  parser means that
    the logged addresses are actually _supposed_ to be different. So
    skip just those checks.
    
    Signed-off-by: Brad Volkin <bradley.d.volkin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a973aabed04bb00686b9fd4ce4c1d83ad9b8b0e7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Nov 4 16:34:40 2014 +0000

    tests: Remove spurious binaries from gem_tiled_wb commit
    
    commit c45216b26d223ffd7f68c5794870214445a64b5c
    Author: Chris Wilson <chris@chris-wilson.co.uk>
    Date:   Tue Nov 4 07:30:57 2014 +0000
    
        igt/gem_tiled_wb: Exercise CPU mmaps with swizzling
    
    brought along a few interlopers.

commit 83757d7b393e61502fdf331f8239da8acc34213c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Nov 4 17:24:55 2014 +0100

    tests/prime_nv_test: Skip cpu mmap testcase
    
    It's not implemented yet, so no point in running the test really.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=68638
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit fbc673023803b197453af3c7b985c941f654a8fb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Nov 4 12:13:11 2014 +0000

    igt/gem_tiled_wb: Remove extraneous mmap(wc) requirement
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c45216b26d223ffd7f68c5794870214445a64b5c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Nov 4 07:30:57 2014 +0000

    igt/gem_tiled_wb: Exercise CPU mmaps with swizzling
    
    This exercises the the extended get_tiling ioctl in order to determine
    proper swizzling for direct access to objects through WB.
    Userspace cannot handle bit17 swizzling through wc mmaps (because bit17
    requires swizzling based on the actual physical address of the page -
    which is unknown to userspace) and so we need an extended get_tiling
    ioctl to report the actual as well as the logical swizzling on an
    object.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6fff1f8787687a08f66c28007abe1f1edebd5124
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Nov 4 12:06:17 2014 +0000

    ioctl_wrappers: Pass in offset to CPU mmaps
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 676ccf862c4039f8e9cea8fb23bea053f9f5cf83
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Nov 4 07:40:11 2014 +0000

    igt/gem_linear_blits: Add sufficient RAM check
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=85834
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e6228509664190a24cb1c22ac597ace8f79ecdd7
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Oct 29 12:26:09 2014 +0000

    lib/igt_core.h: add debug messages for test requirements
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit d950f37be32a2bcf1a3da867bed3f9f397fb912d
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Oct 29 12:03:22 2014 +0000

    lib/igt_core.h: fix igt_skip_on_f requirement message
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 5a61421a02fe40a1dcf9f8575d5a5c136da3fdd4
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Oct 29 17:20:52 2014 +0000

    lib/tests: use the "check_" prefix for tests
    
    The "check_" prefix ensures the test programs are not installed and are
    only built when "make check" is run.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit b78d142a1583e850713474d8053bea643247b8af
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Oct 29 17:18:06 2014 +0000

    build: fix distcheck
    
    Fix distcheck issues introduced by commit 685e577 (Move library
    selftests to lib/tests).
    
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit ab5f7eace1857e60b6432dcabde98089380e5e74
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Oct 29 16:17:41 2014 +0000

    lib: ensure the library is built before the tests
    
    This fixes the build problems introduced by commit 685e577 (Move library
    selftests to lib/tests).
    
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit ad5cb25d702d7c5faada1de6f9208114a189cab1
Author: Gagandeep S Arora <gagandeep.s.arora@intel.com>
Date:   Sat Sep 13 01:26:04 2014 +0530

    demos/intel_sprite_on: Added support to display all sprites.
    
    Extended intel_sprite_on functionality to display all the
    available sprite planes on a particular connector.
    
    Signed-off-by: Gagandeep S Arora <gagandeep.s.arora@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit b6715d9aa7af22316c356d62a917bb034bab7c5f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Oct 29 13:31:15 2014 +0100

    tests: Reenable testdisplay
    
    This seems to have been accidentally disabled in
    
    commit 982f7eb238a0898c456e0574dee7c4507738d75f
    Author: Chris Wilson <chris@chris-wilson.co.uk>
    Date:   Fri Aug 29 15:19:57 2014 +0100
    
        Prepare for 64bit relocation addresses
    
    Apparently no one noticed.
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 97f33912555cd15915ce2b8637bdd05ea0632943
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Oct 29 13:28:55 2014 +0100

    tests/testdisplay: Fix test status check fumble
    
    This is a regression from
    
    4306538d1d3f60877866c39c9ca953cc5e541dae is the first bad commit
    commit 4306538d1d3f60877866c39c9ca953cc5e541dae
    Author:     Daniel Vetter <daniel.vetter@ffwll.ch>
    AuthorDate: Thu Oct 2 11:18:20 2014 +0200
    Commit:     Daniel Vetter <daniel.vetter@ffwll.ch>
    CommitDate: Thu Oct 2 11:34:55 2014 +0200
    
        tests: Sprinkle missing igt_exit() where needed.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=85582
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit c15e6933bc5b9b224818ff43060cb0a436e24345
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 28 10:54:32 2014 +0100

    Add CONTRIBUTING file
    
    i-g-t has become a fairly big project with lots of people involved, so
    lets document the basics and formalize the current process a bit.
    
    Also use this opportunity to announce Thomas Wood as igt maintainer
    once more.
    
    v2: Recommend --subject-prefix="PATCH i-g-t" as suggested by Damien.
    
    v3: Clean out contributing-related information from README.
    
    Cc: Thomas Wood <thomas.wood@intel.com>
    Cc: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 685e57736a2c5da2e955ffd2f0027e4b42e397f7
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Oct 27 15:08:50 2014 +0100

    Move library selftests to lib/tests
    
    Again they're not really igt testcases so are in the way of
    running spatch unconditionally. Move them someplace else.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9d6a2cacf6796c8e06e4b7432c5f795d4ee56d8b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Oct 27 14:51:55 2014 +0100

    Move watermark code from tests to tools
    
    They're now igt tests, and so if you blindly run lib/igt.cocci with
    spatch on tests/*c they get mangled. Move them away, but still keep
    them as noinst targets.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 15972aa8666781ad557f17ed4b5d689cdb657d78
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Oct 24 17:40:04 2014 -0200

    tests/pm_rpm: add system-suspend-{execbuf,modeset} subtests
    
    We were having a problem where the system-suspend test was passing,
    but then the next test - gem-execbuf-stress - was failing because of
    bugs caused by the suspend subtest. So add a single test that emulates
    the same problem, and another test that just sets a mode after resume.
    This way, we should be reproducing the problem even if you don't run
    the tests in the order they are defined.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit cba3088619745f509a10d1339db2cd279913e051
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Oct 15 23:13:30 2014 +0100

    skl_ddb_allocation: Respect the minimum number of blocks
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 7296e09ee7f17e6d564e52cf64ee900670849429
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue May 27 21:33:10 2014 +0300

    tests/kms_flip: Make flip-vs-panning-vs-hang change DSPSURF
    
    Make sure DSPSURF will change during the panning operation
    in flip-vs-panning-vs-hang.
    
    This will now test agains bugs between the kernel's mmio vs.
    CS flip race handling and GPU resets. If the kernel is buggy
    if will fail to notice that the panning operation changed the
    base address before the GPU reset had a chance to deal with the
    pending page flips, and so the flip would never complete due to
    DSPSURFLIVE not matching the expected value.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e497600fb73d138e51a641f7792f11822c20a929
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 24 07:40:04 2014 +0100

    igt/gem_userptr_blits/dmabuf: Map the right pointer for !llc
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=85354#c2
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit eae9f724f2335d8b44ef884e24b1590c3b0a3a33
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Mon Sep 15 13:01:31 2014 +0300

    tests/gem_workarounds: adapt to constant wa list from driver
    
    Driver now returns the constant values that were set once
    on ring initialization time. Extend the simple interface
    check to all gens (i915_wa_registers needs to be present).
    Due to delay when render context is visible on cpu side,
    wait gpu to execute something on default context to get rid
    of undeterministic behaviour by sometimes getting all ones.
    
    Cc: Arun Siluvery <arun.siluvery@linux.intel.com>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 8b556f7c8fc8b16fdeb7d23adb0e2fb54a8982fc
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Oct 23 17:54:44 2014 +0200

    tests/*: lib/igt.cocci found something!
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 47246981b2497f7a767506fec6f9993d4772183a
Author: Sonika Jindal <sonika.jindal@intel.com>
Date:   Thu Oct 23 08:48:50 2014 -0700

    kms_rotation_crc: Add test for cursor rotation (v2)
    
    v2: Slight rebasing onto latest i-g-t codebase (Matt).
    
    Signed-off-by: Sonika Jindal <sonika.jindal@intel.com>
    Reviewed-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4f6a6cbdfff104cd2382c09909d89bbda010dc29
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Mon Oct 20 13:27:55 2014 +0300

    lib: fix #define max
    
    Regression from:
    
    commit be4710a541b517b5f8663448bffed5656d59b47b
    Author: Thomas Wood <thomas.wood@intel.com>
    Date:   Fri Oct 10 11:20:35 2014 +0100
    
        lib: add common min and max macros
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=85218
    Tested-by: Guo Jinxian <jinxianx.guo@intel.com>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 18cb650318bb2c910f95d7c7df6625110ed1a590
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 23 07:55:54 2014 +0100

    igt/gem_userptr_blits/dmabuf: Provide partial coverage on !llc platforms
    
    Without LLC, we cannot assume coherency between system RAM and the GTT.
    If we try to use the GTT with snooped memory, the machine may lock up,
    so the kernel prevents us from doing so, causing the test to fail.
    However, we still do want to verify that we can access the userptr
    through a dmabuf, so just check that we can make a copy from it using
    the GPU and ignore the GTT cross-checking.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=85354
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ac2079596c0a8119f77d58ae3d5e3f8e13e5b96d
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Oct 21 11:45:59 2014 -0200

    lib/igt_aux: move audio RPM code to igt_setup_runtime_pm()
    
    If we don't enable audio runtime PM, the audio driver won't release
    its reference, the refcount won't ever become zero, so we will never
    actually runtime suspend. So move this code from pm_rpm.c to
    igt_aux.c, so kms_flip - and any other IGT test case using RPM - can
    benefit from it.
    
    Previously, if you ran pm_rpm before running the other tests - or if
    you just didn't have snd_hda_intel loaded - you wouldn't notice this
    bug.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=78893
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit a06071c0cf66f1a077563fb3ffa15856a57db18d
Author: Brad Volkin <bradley.d.volkin@intel.com>
Date:   Wed Oct 15 14:52:42 2014 -0700

    tests/gem_exec_parse: test for chained batch buffers
    
    libva makes extensive use of chained batch buffers. The batch
    buffer copy portion of the command parser has the potential to
    break chained batches, so add a simple test to make sure that
    doesn't happen.
    
    Signed-off-by: Brad Volkin <bradley.d.volkin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bba1cd0091b3e8e987f15dac1f38d233b5b0ee78
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Oct 14 13:52:58 2014 -0300

    tests/kms_cursor_crc: HSW/BDW only have square cursors
    
    When I look at cursor_size_ok() (from the Kernel's intel_display.c), I
    see that only 845g and i865g support non-square cursors, so SKIP the
    tests on HSW/BDW instead of failing them.
    
    This problem happened because support for non-square cursors was being
    developed for HSW/BDW, but it ended up not being merged due to a small
    problem and priority changes. Let's make those tests SKIP until we
    have proper support on the Kernel: after that, we can revert this
    patch.
    
    v2: Improve commit message.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=84268
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit fc6d464a59ca33257b31ed8273681250a0807e9e
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Oct 14 16:01:10 2014 -0300

    lib/igt_aux: make igt_wait_for_pm_status() resist the signal helper
    
    If the signal helper is active, the usleep() calls return earlier, and
    we may end up returning false way before the 10s timeout, failing the
    subtests. This currently happens on the kms_flip RPM interruptible
    subtests.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=78893
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 06de0e7f297d3f0e7747edea6252201ff43846b9
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Oct 15 12:10:13 2014 +0100

    tests/kms_force_connector: fix assertion when VGA is already connected
    
    Compare the number of modes available when the edid is reset with the
    number before the edid was overridden.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=82230
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 1a0ae51f512860e89a7a5978d76a8c280e9324eb
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Oct 16 17:29:55 2014 +0100

    tests: add a check for command line handling
    
    Check that command line handling works consistently across all tests.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit d02ffe46bb89305a81d249ba75afe84835bbe70e
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Oct 16 16:35:44 2014 +0100

    drm_lib.sh: add standard command line options
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 48394471c58462fe3c245b27e730db7a8aedf29a
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Oct 16 14:23:24 2014 +0100

    configure: include the skylake quick_dump files in EXTRA_DIST
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit d2595d765008ddc0cb6fa7ac4c8a4ecf45c6268e
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Oct 16 13:59:37 2014 +0100

    quick_dump: fix distcheck
    
    Commit 711a17a (quick_dump: Move base_display.txt to indivual platforms)
    renamed base_display.txt to common_display.txt, but didn't update
    Makefile.am accordingly. Since common_display.txt is now included in the
    platform files, it is automatically included in $(QUICK_DUMP_EXTRA_DIST)
    and therefore just the reference to base_display.txt needs removing.
    
    Cc: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit be4710a541b517b5f8663448bffed5656d59b47b
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Oct 10 11:20:35 2014 +0100

    lib: add common min and max macros
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit d4e3b6a0f5cd759182a53e2bc51a3d3f317a81f0
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Oct 8 17:06:58 2014 +0100

    lib: various documentation fixes
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 303fe742fcdd7da6f03f948a4e41b529ee39613a
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Oct 13 15:14:15 2014 +0100

    skl_ddb_allocation: Make 'end' exclusive in the DDB allocation entry
    
    Ville suggested that we should use the same semantics as C arrays to
    reduce the number of those pesky +1/-1 in the allocation code.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit f951943055f9af516d87f221076b6a690df1ee7a
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Apr 28 07:11:04 2014 +0100

    skl_ddb_allocation: Add checks on the DDB entries
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 69a465d22a9d06045f76621dfba46861adb6456c
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Apr 28 05:56:31 2014 +0100

    skl_ddb_allocation: Add a standalone version of the DDB allocator
    
    This is useful to debug the allocation algorithm.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit e11b7100c9c8d4e74a4d4439b1519ea50741fda5
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Oct 9 16:44:12 2014 +0100

    tests/kms_force_connect: skip if a VGA connector is not available
    
    v2: rename "connector" to "vga_connector" to improve the skip message
        (Chris Wilson)
    
    Suggested-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 5209ec142dc1f5380c2c9d12c5b28d15b4311cdf
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Oct 9 16:29:20 2014 +0100

    tests/kms_force_connector: ensure igt_exit is called at exit
    
    Since commit 5782eca (lib/igt_core.c: disable lowmemorykiller during
    tests), igt_exit needs to be called before the test exits.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=84771
    Cc: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 5c7d54eae5cbf9fd74cd8bd755b90d0edb1283dc
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Tue Oct 14 10:19:13 2014 -0700

    tests/pm_rc6_residency: Split RC6p and RC6pp.
    
    sysfs interface for rc6 has been changed to only expose deep RC6 file to the platorms
    that really support them, aka SNB and IVB.
    
    So let's split this test and only test RC6p and RC6pp on these platforms.
    
    Reference: https://bugs.freedesktop.org/show_bug.cgi?id=84886
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit e7abb635162a3729f5a86419420f0192b557fcde
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Oct 14 15:09:22 2014 -0300

    tests/pm_rpm: use igt_assert_eq() on COMPARE()
    
    A few weeks ago we were hitting this assertion, and the _eq macro is
    more useful when you're debugging.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 97715d5f0fad67da1d8e06db8f9d5a3c1d1aa51c
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Oct 14 14:59:36 2014 -0300

    tests/pm_rpm: fix some compilation warnings
    
     warning: ignoring return value of ‘write’, declared with attribute
     warn_unused_result [-Wunused-result]
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 7308e3a92be0529eaff26bc488f86924db09b688
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Oct 14 14:42:23 2014 -0300

    tests/pm_rpm: reduce the number of rounds on the stress tests
    
    With the current Kernel, it takes more than 10 minutes to run
    modeset-stress-extra-wait on BYT with eDP, and we don't really want
    IGT subtests that take more than 10 minutes to run: QA reports them as
    bugs.
    
    Since, as far as I remember, any of these RPM race condition bugs we
    had could always be triggered with just 4-5 rounds of testing, let's
    tune down the number of rounds we test:
    
    Before:
            rounds = (--quick option used) ? 10 : 50;
    
    After:
            rounds = (--quick option used) ? 10 : 40;
            rounds = (wait_flags & WAIT_EXTRA) ? rounds / 2 : rounds;
    
    This should make all subtests be way above the 10m limit.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=84897
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 8aa7fdaee8afe569544ffd33f5c3ebac27d2da5b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 14 10:10:42 2014 +0100

    igt/gem_bad_reloc: Handle real offset being 0
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cd5ed4529693c00863405fcf29d9b27d91f3fe28
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 14 09:27:40 2014 +0100

    igt/gem_negative_reloc: Execute a BLT operation with a negative reloc
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a0b5c6d2ee784a8ea49534050087b3c630a41bc4
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Fri Oct 10 08:18:28 2014 -0700

    Revert "tests/kms_sink_crc_basic: Wait 2 vblanks before grabing the new crc."
    
    This reverts
         commit d92fbc23138b1014e8574daf29dbb06b8c81aa7a.
         Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
         Date:   Tue Sep 9 12:25:47 2014 -0400
    
             tests/kms_sink_crc_basic: Wait 2 vblanks before grabing the new crc.
    
    Sink CRC is fixed on kernel to wait as many vblanks as needed. It was fixed b
         commit ad9dc91b6e21266bfc6f466db4b95e10211f31ee
         Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
         Date:   Tue Sep 16 19:18:12 2014 -0400
    
             drm/i915: Fix Sink CRC
    
    This this fix in place we don't need this extra 2 vblanks on test case itself
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 9c8ee51be25c6c27c97a6898a71bc7f79439f9dc
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Fri Oct 10 08:14:32 2014 -0700

    Revert "tests/kms_psr_sink_crc: Wait 2 vblanks before grabing the new crc."
    
    This reverts
         commit d190a1f9668680c7a429110c91f8faa27949b220.
         Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
         Date:   Wed Sep 3 21:26:29 2014 -0400
    
                 tests/kms_psr_sink_crc: Wait 2 vblanks before grabing the new crc.
    
    Sink CRC is fixed on kernel to wait as many vblanks as needed. It was fixed by:
         commit ad9dc91b6e21266bfc6f466db4b95e10211f31ee
         Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
         Date:   Tue Sep 16 19:18:12 2014 -0400
    
             drm/i915: Fix Sink CRC
    
    This this fix in place we don't need this extra 2 vblanks on test case itself.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit ca6b63f588183cc4ba19d54c2901e84491084692
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Fri Oct 10 16:59:00 2014 +0300

    tools/null_state_gen: Add copyright notice to state output
    
    along with info about what generated it.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit f246f1ed0c2f5eb0c0dc7d92b3d678ecdbf03539
Author: Armin Reese <armin.c.reese@intel.com>
Date:   Fri Sep 5 13:58:11 2014 -0700

    tools/null_state_gen: Add GEN9 golden context batch buffer creation
    
    Modifications to 'null_state_gen' so it can generate GEN9
    golden context batch buffer source for SKL.
    
    v2: - rebased on top of gen8 changes (Mika)
        - fixed state base address command size (Mika)
        - base address size macro as pages (Mika)
    
    v3: - rebased on top of current master (Mika)
        - removed obsolete #includes (Mika)
        - added copyright (Mika)
        - render and component packing added (Mika)
    
    Cc: Damien Lespiau <damien.lespiau@intel.com>
    Cc: Armin Reese <armin.c.reese@intel.com>
    Cc: Volkin, Bradley D <bradley.d.volkin@intel.com>
    Reviewed-by: Volkin, Bradley D <bradley.d.volkin@intel.com> (v2)
    Signed-off-by: Armin Reese <armin.c.reese@intel.com> (v1)
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 0e8ac72d5d608d82a91bb5232badfb872589ac14
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Mon Sep 8 10:49:59 2014 +0300

    tools/null_state_gen: Add Gen8 golden state
    
    Previously we didn't have a clear understanding what is necessary
    for a pipeline state to be properly initialized. So we had to improvise
    and use a stripped out render copy.
    
    Now we have a more clear understanding so switch out render copy based
    frankenstate to state we can call golden state.
    
    v2: - export intel_batch_state_offset
        - add 3DSTATE_RASTER (Bradley Volkin)
    
    Cc: Volkin, Bradley D <bradley.d.volkin@intel.com>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit b69659c3f5ed285bd218350deeff52761aec3d10
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Mon Sep 8 10:41:38 2014 +0300

    tools/null_state_gen: Add macro to emit commands with null state
    
    In null/golden context there are multiple state commands where
    the actual state is always zero. For more compact batch representation
    add a macro which just emits command and the rest of the state as zero.
    
    v2: - Be more verbose about length bias (Bradley Volkin)
        - strip out unrelated state_offset declaration (Bradley Volkin)
    
    Cc: Volkin, Bradley D <bradley.d.volkin@intel.com>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit a1f847cba91b9e542e37bb80895d8f8909319dd3
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Thu Oct 9 18:39:05 2014 +0300

    tools/null_state_gen: Limit the total state len to 4096 bytes
    
    Currently our kernel side buffer object is only one page.
    Limit the amount of dwords to 1024 to enforce this.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit b498d81f152760b2a58d53ac3acb5269f44a253d
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Thu Oct 9 18:35:49 2014 +0300

    tools/null_state_gen: Add more debug output
    
    Be more verbose about the state size we generate.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit c283ead78c4cb5cd56d0a7e74ebc43970ff5741d
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Thu Oct 9 19:10:48 2014 +0300

    tools/null_state_gen: Add copyrights
    
    to files where they were missing.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit b7d80d104758fb4c90723246aed943c0097c6156
Author: Adam Sampson <ats@offog.org>
Date:   Tue Oct 7 17:41:18 2014 +0100

    Don't use += to append to a shell variable.
    
    POSIX only requires "=" to be supported; "+=" works in bash but not in
    dash.
    
    Signed-off-by: Adam Sampson <ats@offog.org>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 432a4b488110561bc4dc8a50665b60380fb50e04
Author: Adam Sampson <ats@offog.org>
Date:   Tue Oct 7 17:41:17 2014 +0100

    Use = rather than == in test.
    
    The POSIX standard only requires test to support "="; "==" works in bash
    but not in dash. Other comparisons in configure.ac use "=" already.
    
    Signed-off-by: Adam Sampson <ats@offog.org>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit c7551bf7ccee3ce52dc51b4684716c4b10b80604
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Oct 8 10:44:06 2014 +0100

    igt/kms_flip/nonblocking_read: Demonstrate that O_NONBLOCK is a myth
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7041edfd144035f987001bd4f4a367d403cad912
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Oct 8 10:25:48 2014 +0100

    quick_dump: Drop common_display.txt from VLV/CHV
    
    Those registers are big core registers and weren't really relevant for
    VLV/CHV. Drop them from the dump then.
    
    Suggested-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 7f8228955f3f3eef42e6fc61f4fa95b37b36df75
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Oct 6 17:42:33 2014 +0100

    quick_dump/skl: Make quick_dump SKL aware
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit d0a412597b92208d13d640013a2b277bd22f6c11
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Oct 6 15:10:35 2014 +0100

    quick_dump/skl: Add some display registers
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 711a17ac753161500c5901e9f4d85ad8906b2a8b
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Oct 6 18:32:51 2014 +0100

    quick_dump: Move base_display.txt to indivual platforms
    
    SKL will have a whole separate display regs file, so merge
    base_display.txt into each platform file.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 2faf5a8665bba9ab7ad64ac6aa8c13be8f176d7d
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Oct 6 16:30:39 2014 +0100

    quick-dump: Make quick dump link against libintel_tools
    
    Because quick-dump was only selecting a few files in lib/ and we move
    stuff around and/or add new dependencies we were failing to provide the
    necessary symbols to the shim library providing python bindings. And so
    we had a run-time error:
    
    Traceback (most recent call last):
      File "./tools/quick_dump/quick_dump.py", line 17, in <module>
        import chipset
      File "/home/damien/gfx/sources/intel-gpu-tools/tools/quick_dump/chipset.py", line 28, in <module>
        _chipset = swig_import_helper()
      File "/home/damien/gfx/sources/intel-gpu-tools/tools/quick_dump/chipset.py", line 24, in swig_import_helper
        _mod = imp.load_module('_chipset', fp, pathname, description)
      File "/usr/lib64/python3.3/imp.py", line 183, in load_module
        return load_dynamic(name, filename, file)
    ImportError: /home/damien/gfx/sources/intel-gpu-tools/tools/quick_dump/_chipset.so: undefined symbol: kmstest_pipe_name
    
    So, let's simplify maintainance and just link against the library we're
    building and using elsewhere.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit d4c1bb7aab2d2d7ed3eb3225f937f55f591f1ae4
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Oct 6 16:49:05 2014 +0100

    gem_wait: Use PRIu64 in format string
    
    ../../tests/gem_wait.c: In function ‘render_timeout’:
    ../../tests/gem_wait.c:182:3: warning: format ‘%llu’ expects argument of type
    ‘long long unsigned int’, but argument 3 has type ‘uint64_t’ [-Wformat=]
    
       igt_info("Finished with %llu time remaining\n", timeout);
    
    Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit af79fce66d023b300f308ec78289c616c81037d3
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Oct 6 18:23:33 2014 +0100

    overlay: Fix compilation warning when not having xrandr
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 6b964c93f7322ee6b27ad0c2a26280e17e56ec23
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Oct 6 18:19:58 2014 +0100

    gem_seqno_wrap: Remove unused variable
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 5c0139c3046a390204c6339468b22779f76460b1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Oct 6 08:32:49 2014 +0200

    tests/gem_wait: Don't close drmfd in subtest
    
    I didn't notice this on the machine I developed it since the original
    wait testcase fails there. Oops.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 764772c3c8059a6a9d1a569d9c4bd180e11c4d33
Author: Tim Gore <tim.gore@intel.com>
Date:   Thu Oct 2 16:26:32 2014 +0100

    lib/Android.mk: add define of IGT_DATADIR for igt_fb.c
    
    Since the igt_create_stereo_fb function moved into igt_fb.c
    we need to add the definition of IGT_DATADIR in the Android
    makefile in order to build the cairo dependent tests.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 4306538d1d3f60877866c39c9ca953cc5e541dae
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Oct 2 11:18:20 2014 +0200

    tests: Sprinkle missing igt_exit() where needed.
    
    Yay for breaking piles of tests.
    
    This regression has been introduced with
    
    commit 5782eca1e19e85a04ad402fa4094aa1b5f9c53ce
    Author: Tim Gore <tim.gore@intel.com>
    Date:   Wed Oct 1 13:25:20 2014 +0100
    
        lib/igt_core.c: disable lowmemorykiller during tests
    
    Cc: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 5782eca1e19e85a04ad402fa4094aa1b5f9c53ce
Author: Tim Gore <tim.gore@intel.com>
Date:   Wed Oct 1 13:25:20 2014 +0100

    lib/igt_core.c: disable lowmemorykiller during tests
    
    Several IGT tests cycle through a lot of GEM memory and
    when running these tests on Android they tend to get
    killed by the lowmemorykiller. The lowmemorykiller really
    is not usefull in this context and is just preventing the
    test from doing its job. This commit adds a function to
    disable the lowmemorykiller by writing "9999" to its
    oom adj parameter, which means it will never "select"
    any process to kill. The normal linux oom killer is still
    there to protect the kernel.
    The low memory killer is disabled during the common
    init function and then re-enabled by the exit handler.
    To make this work for single tests the exit handler is now
    installed in the common init function also so that it is
    invoked for all tests.
    This is just a hack to get round the fact that the i915
    driver uses the concept of purgeable memory which is not
    understood by the lowmemorykiller. If this ever gets
    fixed then this patch can be removed.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    [danvet: A bit of polish (coding style, static and rename
    check_igt_exit to common_exit_handler, drop the is_disabled check
    since we only call this once now).]
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 20c8eba84ce4f108b5a980fe7278da5853655c1d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Oct 1 12:12:43 2014 +0200

    NEWS: Updates
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 711199b8ecb2fa07918e7061ff3b208efcaaa237
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 30 18:44:15 2014 +0200

    lib/aux: Print progress output at INFO level
    
    With the structured logging it makes more sense to tune this down a
    bit. Also, this way it is consistent with Thomas Wood's new activity
    indicator helper.
    
    Spotted while discussing Thomas' patch with him.
    
    v2: Thomas noticed that I've forgotten the fflush. Extract
    igt_interactive_info for both igt_progress and igt_print_activity.
    
    v3: Interactive output should go to stderr. Also extract the "is this
    a terminal" check.
    
    Cc: Thomas Wood <thomas.wood@intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 6a8d33c2bb81f071715864c2e563ac17ae4f9967
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Sep 30 17:05:39 2014 +0100

    lib: add a function to indicate activity
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit c2d5519906f3b7d75b4fbf14c61c5f54d9d75214
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Sep 29 12:08:31 2014 +0100

    tests/sysfs_l3_parity: fix warnings in test enumeration
    
    Source drm_lib.sh before skipping the test to ensure that subtest
    enumeration is always handled correctly.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 756764a4e78ac8b6ea294924d272431f98f695ca
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Sep 26 15:16:21 2014 +0100

    lib: ensure any buffers are flushed before fork
    
    Flush any buffers before forking to prevent duplicated output.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 519f377ddd6d43b7824f94f09eb3d3cabc39c6b9
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Sep 26 14:24:52 2014 +0100

    doc: various spelling and typo fixes
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit c256af5d448dcaef1d4100c2bdbe25656909197d
Author: Imre Deak <imre.deak@intel.com>
Date:   Thu Sep 18 18:31:29 2014 +0300

    test/kms, pm: use drm_open_any_master
    
    These tests require DRM master right, so make sure they have it from the
    beginning. This gives an early indication if another DRM master is running
    and makes the given test skip (with a proper explanation of the reason)
    instead of exiting with error.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit bfda78cd33b6562306c8c42e83047149f2ff6984
Author: Imre Deak <imre.deak@intel.com>
Date:   Thu Sep 18 18:25:37 2014 +0300

    tests/pm_rpm: factor out drm_open_any_master
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 781a0485aca871d6b0278afacea724b97f6f59c1
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Fri Apr 11 21:57:21 2014 +0800

    lib/skl: Return the render copy and media fill functions
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>
    [Ben: Reordered if tree]
    Signed-off-by: Ben Widawsky <benjamin.widawsky@linux.intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 20e9cf38b7c3aa0725eb282ecf446f0e9b4344ad
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Tue Feb 11 10:48:47 2014 +0800

    mediafill/skl: Follow spec to configure media sampler DOP clock gating in PIPELINE_SELECTION
    
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit d2e4eb3619fa61013f7704f55d0516fb380ac49b
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Tue Feb 11 10:48:46 2014 +0800

    mediafill/skl: Follow spec to configure FORCE_MEDIA_AWAKE in PIPELINE_SELECTION
    
    The FORCE_MEDIA_AWAKE bit is added for the PIPELINE_SELECTION command and
    some instructions requires that the media enginee is awake.
    
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 54465b8ac5d97560a27f04683448ab74b466a89a
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Tue Feb 11 10:48:45 2014 +0800

    mediafill/skl: Follow the spec to add pipeline_select mask
    
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 17371958dbe6de8a92bf3e0e98b37ddb12241c17
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Tue Feb 11 10:48:44 2014 +0800

    mediafill/skl: follow the spec to update STATE_BASE_ADDRESS command
    
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 31e94ad28b5fab3373e6c7bf10b7894ca89cfb0a
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Tue Feb 11 10:48:43 2014 +0800

    mediafill/skl: Start the gen9 media_fill from the gen8 version
    
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 8dc95202c8c241c50f2e17d3734fc6cb004c076e
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Thu Jan 23 13:26:12 2014 +0800

    assembler/skl: update the extdesc field for SEND instruction
    
    The send instruction on gen9 uses the 32bit immediate instead of 6bit immediate
    for the extended message descriptors. And some bits of SEND instruction are defined
    as the extdesc field.
    
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit d6ff0b3f1f78c16a2754454c6134a999affa7f4c
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Thu Jan 23 13:26:11 2014 +0800

    assembler/skl: Add more cache agent for write(...)
    
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit e48666947df43814b89c4280e2c2208274628542
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Thu Jan 23 13:26:10 2014 +0800

    assembler/skl: update read(...)
    
    READ(...) is used for Render Target read and Media Block read. But there is no
    sampler cache agent on gen9. At the same time two message types don't
    share the same cache agent any more. So a parameter is needed for cache agent.
    The 2th parameter of read(...) is not used for gen6/gen7/gen8. Hence it is
    reused as cache agent for SKL as that on ILK.
    
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 504f5594e7f2e78ec828a3b30bbb749a3bc91472
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Thu Jan 23 13:26:09 2014 +0800

    assembler/skl: Redefine the cache agent type for some fixed functions
    
    The different cache agent type is defined for SKL although it still uses
    the same function ID as the previous generations.
    
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 2149d6e5f8856f195236e9d414fbce880c81debf
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Feb 5 12:10:44 2013 +0000

    assembler/skl: Add gen 9 to the -g option
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit fe4e4c176c7d3ae9ba59d4a40f12f83a29b6151c
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Fri Apr 11 21:57:20 2014 +0800

    rendercopy/skl: Set the URB VS start address to 4
    
    A value less than 4 might result in GPU hang on simulation
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@linux.intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 5b46cd335d8323c8b0c48c2c004f983605e25433
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Wed Jan 22 09:37:26 2014 +0800

    rendercopy/skl: Follow the spec to add the Pipeline selection mask
    
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 8e62f78999281ad4bc7b9981b127830d0d3796d9
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Wed Jan 22 09:37:25 2014 +0800

    rendercopy/skl: Emit 3DSTATE_WM_HZ_OP
    
    This is from that on BDW. Without it, the pixel pipeline can't work well.
    
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 833e47662436094646f8510e7f9e7b3edd3d6b89
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Wed Jan 22 09:37:24 2014 +0800

    rendercopy/skl: Fix the 3DSTATE_DS instruction length
    
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 7628268952c586120e879310e542556d6a387abe
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Wed Jan 22 09:37:23 2014 +0800

    rendercopy/skl: Fix the STATE_BASE_ADDRESS instruction length
    
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 77a9ed7da2ef28cd80da68a97c1f409bc7d5eacf
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Wed Jan 22 09:37:22 2014 +0800

    rendercopy/skl: Set Instruction Buffer size Modify Enable to 1
    
    This is ported from that on BDW.
    
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit e539e91cf5d1d127abc9652dd2213a1997e54fb3
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Wed Jan 22 09:37:21 2014 +0800

    rendercopy/skl: update instruction length
    
    This is ported from that on BDW.
    
    v2: Only bump the prefix when we need to program the instruction
    differently with the previous generations.
    
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit f04bf00c0d4e3b19fea63ad1d0b959575baf43b5
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Wed Jan 22 09:37:20 2014 +0800

    rendercopy/skl: Pass the context to rendercopy function on SKL
    
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit ecd659e000dc3165c33793b7da612863738dc1c5
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Feb 27 14:57:35 2013 +0000

    rendercopy/skl: Update 3DSTATE_SBE
    
    SBE has now to be explicitely told which channels of which components
    are used by the pixel shader.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit e5b850cb340a7dde8e6907a6de28d0ba825d1cb2
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Feb 27 14:57:34 2013 +0000

    rendercopy/skl: Set the 3DSTATE_VF state
    
    This is to ensure the "Component Packing Enable" bit is set to 0.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit aa7f9cf881a50370cdf49c6210d8224c32943d24
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Feb 27 14:57:33 2013 +0000

    rendercopy/skl: Start the gen9 rendercopy from the gen8 version
    
    v2 (Ben): Rebased on:
     commit ea11d103e0617e33bce6f11328521d15b13422b0
    Author: Oscar Mateo <oscar.mateo@intel.com>
    Date:   Tue Nov 12 11:50:35 2013 +0000
    
        build: list all test/tool/lib source files in their own Makefile.sources
    
    v3: (Ben): Rebased on the doc/API rework. Probably needs review
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit 334f657e981e2f2278d26516f0ebd559f2ebbfb7
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri May 31 15:34:04 2013 +0100

    list-workarounds/skl: Add Skylake to the list of valid platorms
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 4d95a1551b1606789650e43e9dfe0df128066b81
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Feb 14 15:32:36 2013 +0000

    skl: initialize instdone bits for gen9
    
    gen9 uses the same bits as gen8.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Reviewed-by: Jesse Barnes <jbarnes@virtuousgeek.org>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 256831cd8832a39ffd5fbd38e561d31dcc4e8f96
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Feb 14 15:32:35 2013 +0000

    skl: Add gen9 to intel_gen()
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Reviewed-by: Jesse Barnes <jbarnes@virtuousgeek.org>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 91ebcd0c54d365a633a7465a9d57f8c24c886af7
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Dec 6 16:07:22 2013 -0800

    skl: Add SKL PCI ids
    
    v2: Update to the latest PCI ids
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit 0eaa18061bee4b4b0c182d112db189019f01f49a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Sep 29 14:50:57 2014 +0200

    tests/gem_wait: argument validation tests
    
    Shockingly we don't check for 0 flags!
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit e4753d2d96fbb88077e70820793137f45f02c9ba
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Sep 29 14:42:33 2014 +0200

    tests/gem_wait_render_timeout: Convert to subtests
    
    I want to add a bunch of api tests besides the functional
    "render-timeout" testcase.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 5da8b8db02df768ba560e7522f69106246a0590c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Sep 29 14:24:26 2014 +0200

    tests/gem_wait_render_timeout: Drop local structs
    
    We're long past the point where libdrm has these.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit f33fa71481caa308f141797033cd2bc6479630fc
Author: Tim Gore <tim.gore@intel.com>
Date:   Mon Sep 29 13:34:30 2014 +0100

    lib/igt_core: make single/simple tests use igt_exit
    
    Currently tests that use igt_simple_main will simply call
    "exit()" if they pass, making it difficult to ensure that
    any required cleanup is done. At present this is not an
    issue, but it will be when I submit a patch to turn off the
    lowmemorykiller for all tests.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    [danvet: Also update api docs.]
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 32a0308e2da1ed5871e21ca81822fc0c8aa73f9e
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Sep 26 16:48:02 2014 +0100

    kms_cursor_crc: Remove two unused local variables
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit f2775039b1d2f3c24876622e4528604496de8abc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 26 10:22:33 2014 +0100

    igt/gem_userptr_blits: Test interruptible create-destroy
    
    In order to exercise https://bugs.freedesktop.org/show_bug.cgi?id=84207
    we need to interrupt the mmu_notifier_register with a signal. This is
    likely to be quite difficult, but let's just try running the
    create-destroy test in an interruptible loop for 5s.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3e766b8255efb6c994e6501be2af44b4bdc4d191
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 26 07:55:49 2014 +0100

    igt/gem_concurrent_blit: Only read back a few GTT values
    
    Due to the nature of the test, we can be reasonably sure that it is
    either all copied or not. So we can sacrificing testing the entire
    buffer for the expected value in order to speed up the test by only
    testing along the diagonal.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=84354
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3205a9167fca34db8eb177a9050faf1b4115e9fa
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 23 15:15:51 2014 +0200

    tests/kms_psr_sink_crc: Use options
    
    Env variables are a bit more annoying since much harder to discover.
    With options you can just see what they do with --help.
    
    Cc: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Reviewed-by: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 4b81e9ca7df84d3c8775ebf0332f7444cafe8e77
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 19 16:40:00 2014 +0100

    igt/gem_reloc_vs_gpu: Fix reloc.presumed_offset value
    
    Since the last patched value does not match the presumed relocation
    value we submit to the kernel, it occasionally makes mistakes. Also note
    that the libdrm interface makes the same presumptive mistake, and would
    easily be broken by a threaded environment.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=77793
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c3eca6f7d3a788eab0102c4a3ded606ec851a0b2
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Sep 19 09:31:52 2014 +0200

    tests/drm_import_export: Add subtest for prime
    
    Cc: Rafal Sapala <rafal.a.sapala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a018d60f631443f09da0a2adffc7255a0687f0d8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Sep 18 17:34:27 2014 +0200

    tests: Add drm_import_export
    
    Multithreaded test to validate the (lack of) locking in the flink/open
    code in libdrm-intel. Based on a testcase from Rafel Sapala.
    
    Cc: Rafal Sapala <rafal.a.sapala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 25c55d3fc26ec415e0ed290b7d3cda0e15209f66
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Sep 12 18:03:25 2014 +0300

    tests/kms_cursor_crc: Add basic non-square cursor testing
    
    To minimally verify that non-square cursors work on the platforms where
    they're supported perform the tests first with WxH cursor and then
    repeat with WxH/3 cursor.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 7b76754e0ee3b84e703f823dd89aa94d75c011e7
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Sep 12 20:18:04 2014 +0300

    lib: Add igt_plane_set_size()
    
    Allow tests to specify the plane size instead of assuming that the
    entire FB will be scanned out.
    
    To keep the current tests working without having to sprinkle
    igt_plane_set_size() calls all over the place, make
    igt_plane_set_fb() reset the plane size to the FB size.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit b4fe481d4f2ccebc125185a4c5cb652b71513723
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Aug 28 16:52:53 2014 +0300

    tools: Remove punit and nc reg read/write tools
    
    intel_iosf_sb_{read,write} provide the same functionality.
    
    intel_dpio_{read,write} are still left in place since they use a
    ifferent opcode to do the register access. Need to verify if
    both opcodes work.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit b23329f08662e6d15220006cffa0344231b27b04
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Aug 28 16:50:53 2014 +0300

    toos/intel_iosf_sb: Add symbolic unit names
    
    Add a bunc of symbolic sideband unit names so that you don't have to go
    trawling through the sideband HAS every time you want to poke at
    something with the tool. You can still specify the port manually though
    if you know them by heart already.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit b39eb28c256ecdf4f60dab08dba4bbc36294a576
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Aug 28 16:32:46 2014 +0300

    tools: Allow iosf-sb utils to work on chv
    
    Unlike the kernel IS_VALLEYVIEW() doesn't cover chv in igt. Add the
    appropriate IS_CHERRYVIEW() checks to the various sideband poking tools.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 50534460dd2034bd4cbdabd803fa2680cbc7b490
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Wed Sep 17 10:35:55 2014 -0400

    tools/intel_reg_dumper: Shows fences and rp debug regs on BDW+.
    
    v2: a more generic fix to cover current and future platforms (Damien).
    
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 1244fc6b9bc56cdf1584e919230796082b93f371
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Sep 16 08:17:00 2014 +0100

    igt/pm_rps: Fix STORE_DWORD for pre-gen8
    
    gen8 actually changed the command layout, not just extended the
    relocation value. Oh well.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=83915
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 137877f16b7d026fa1bc17797604e17de2af7e92
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 9 11:43:10 2014 +0200

    NEWS: New heading for 1.9
    
    Should be done post-release.
    
    Cc: Rodrigo Vivi <rodrigo.vivi@gmail.com>
    Cc: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 4779655c6f9c8c6c4599fd39cdff1f66d0f373b3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 12 11:09:41 2014 +0100

    lib: Try harder to drop-caches
    
    If at first we don't succeed, try again. (For as long as the errno says
    to at least!)
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f81d8eba4fb4448e6ea777aa2072c3b9f277e7cb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 12 09:11:55 2014 +0100

    igt/kms_render: Iterate only through the formats
    
    When testing each format, iterate through the formats and not randomly
    through the modes.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=83788
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 855dc6284d97931dbe59725cfc7b0b160b0a37b2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 12 09:08:41 2014 +0100

    igt/gem_userptr_blits: GTT mmaping a userptr requires llc
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=83790
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3a1751ef34c32c5d288a328d855bec49ad0eaf9f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 12 06:46:28 2014 +0100

    igt/pm_rps: Fix the batch count for emitting the flush
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=81858#c2
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 62f4d56676468cc6b7e1fb900ccf120d68352f65
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Tue Sep 9 19:04:48 2014 -0400

    tests: Kill pm_psr
    
    kms_psr_sink_crc check psr activity, residency and exit for screen updates.
    So this test is useless.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit d190a1f9668680c7a429110c91f8faa27949b220
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Wed Sep 3 21:26:29 2014 -0400

    tests/kms_psr_sink_crc: Wait 2 vblanks before grabing the new crc.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 1447d83e8ecc0689be2b3e933d1d21b042474ea7
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Wed Sep 3 18:18:15 2014 -0400

    tests/kms_psr_sink_crc: Fix blt submission
    
    Putting back a missing dword.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 25aa69d0a00435432f85ee86b30a2981411fbbbb
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Tue Sep 9 13:10:51 2014 -0400

    tests/kms_psr_sink_crc: Check color ref CRC
    
    Black screen is forbidden on this test. So let's fail if sink crc shows
    it is back.
    
    Also there are many cases where we know for shure it should be all green,
    so let's check for them.
    
    Instead of checking colors we could print with sw using cairo and check if we
    have identical crc like cursor testcases. However with PSR the chance of artifacts
    is low and chance of getting blank screen or unchanged screen is high. So even drawing
    on sw and comparing both CRCs we can have the same result. However the risk is that
    screen never changed. So the safest way is to compare if screen changed and check
    the green color when we know it should be green or not green.
    
    v2: Hardcoded green was simply wrong because green CRC can change depending
        on display.Split R, G and B on CRC and bitewise them with mask to verify
        it is green.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit d4e6a5197002b51644bc01d4f7926c4b4d726933
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Fri Aug 29 19:12:54 2014 -0400

    tests/kms_psr_sink_crc: Fix all testcases.
    
    In order to get all test cases fixed and the matrix planes-operations working
    it was needed to use the common new igt kms functions for all cases.
    Previously only sprite testcase was using it.
    
    Fixed the fb colors in a way to make tests more clear and be impossible to see
    black screen during the tests.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 99efdc0cdbeeb9f1695c668c673c31957d78954b
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Tue Sep 9 17:58:45 2014 -0400

    tests/kms_psr_sink_crc: Start splitting tests in test_planes and operations.
    
    This will allow us to test input/write oprations on any kind of plane.
    
    At this point PLANE_ONOF is just the new name of TEST_SPRITE and
    PLANE_MOVE is the one for TEST_CURSOR_MOVE. They will be extended and fixed
    on the following patche(s).
    
    v2: fix conflict after changing previous patch
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 52b0e78a94ebcb8761dd7d0eadb8deaab8abedf4
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Fri Aug 29 18:19:55 2014 -0400

    tests/kms_psr_sink_crc: Cleaning up tests a bit
    
    This is needed to be able to split tests in a matrix that tests different
    input/write methods and operations for different type of planes.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit fb004a6b029d2338aef869a1f25b9925688d3106
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Wed Sep 3 17:53:35 2014 -0400

    tests/kms_psr_sink_crc: Removing context tests.
    
    This tests are unecessary. Mainly now with the software tracking for PSR.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 1ab044518a22ac0c44067de9f90f4a828c2f7482
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Fri Aug 29 17:58:31 2014 -0400

    tests/kms_psr_sink_crc: Adding test debug options
    
    Just to make life easier and be eable to easily test with
    PSR disabled to know exactly what to expect when running it
    for real
    
    v3: Use igt_debug helpers and add env option for running with psr disabled
    on this test without have to recompile like v1 or changing igt infrastructure like v2.
    I tried to add --disable-psr or local --dry-run but than it fails to print subtests
    so this was the safest way.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit e90847f57a0446130b92c9c638da6299f37639b5
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Fri Aug 22 09:37:08 2014 -0700

    tests/kms_psr_sink_crc: Fix edp_psr debugfs interface
    
    Tests were broken on platforms that doesn't have psr or on new kernel that contains new interface.
    A lot more need to be done to get these tests really useful, but for now lets avoid it breaking
    tests framework.
    
    v2: Doesn't duplicate kernel's HAS_PSR. skip based on debugfs output.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit d92fbc23138b1014e8574daf29dbb06b8c81aa7a
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Tue Sep 9 12:25:47 2014 -0400

    tests/kms_sink_crc_basic: Wait 2 vblanks before grabing the new crc.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 1d7b062621fa291d3412f47265d0ba603b65cc96
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Wed Sep 3 19:01:08 2014 -0400

    tests/kms_sink_crc_basic: Simplify test by using igt_kms functions
    
    v2: sink CRC R, G and B might change depending on display. So let's split the
    colors and bitwise them.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 107151ce9f82955191a7fd6a2e6bfd5ff8cc5aea
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Sep 9 16:27:57 2014 +0100

    igt/gem_ppgtt: Create secondary contexts and mm
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 961578f47133d7310e9531d31e7ea5e743ed6b50
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Sep 9 14:17:08 2014 +0100

    test: Exercise full ppgtt switching between multiple fd
    
    Load up both rings with lots of fighting between multiple contexts.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d9d3f4b0d23a7ea2147f33ab40558edd6128f3ac
Author: Rodrigo Vivi <rodrigo.vivi@intel.com>
Date:   Mon Sep 8 22:43:46 2014 -0400

    bump version to 1.8 and add the release date
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit cdf0ea825ec529fe4f9e63d503da11d0a3cdee1c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Sep 8 12:52:31 2014 +0100

    igt/gem_cpu_reloc: Terminate the bad batch
    
    gen2 will read the batch up until it reaches the end as defined by the
    MI_BATCH_BUFFER_END command. Play nice and make sure that it does end on a
    MI_BB_END.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit be6bb4ce4a413df5ec385523313a4e2a3894d4c8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Sep 7 15:52:10 2014 +0100

    igt/kms_flip_tiling: Use the associated pipe for the output
    
    This stops us from using an illegal pipe, such as pipe 0 for LVDS on
    PNV.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=82280
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b76f1d8b03aa506624a8a9d7fab915758bd0dec5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Sep 8 10:28:41 2014 +0100

    igt/gem_mmap_gtt: Check coherency between GTT and CPU mmappings with LLC
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ac3d06094a635bfeb0c6d6752f7f7bfbc21ecf2a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Sep 6 18:14:35 2014 +0100

    igt/kms_universal_plane: Only test existing planes
    
    Only attempt to test the number of planes that exist on the device so as
    not to trigger spurious failures.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=82233
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5eeb1f34d4bd16ef22e9252e876dd93c28c73b3c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Sep 6 17:25:01 2014 +0100

    igt/drv_missed_irq_hang: Increase busy load
    
    The test relies on having to wait upon the GPU at some point and so
    simulating a missed interrupt. If there is insufficient load on the GPU,
    we can complete the task before we even wait.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=71334
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d35cc3ea8c0023eb8aadf3e946b1c759c6e29b3a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Sep 6 12:41:28 2014 +0100

    aux: Squelch warning when emitting progress indicator
    
    commit 1649ef0d1f5c0e4f995a437bd24f1574a8b5100f
    Author: Daniel Vetter <daniel.vetter@ffwll.ch>
    Date:   Tue Aug 26 15:26:21 2014 +0200
    
        lib/igt_* Use igt macros in igt libaries
    
    went a little too far here as the replacement macro was too clever.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit fb9c9e3adcc18b137b8931bc4f6fb05ca4d19863
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Sep 6 12:21:25 2014 +0100

    core: Prettify igt_require_f output
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9df77d566409fcef90c7ea63bb6d3df8d8c76dde
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Sep 6 12:08:13 2014 +0100

    lib/igt_fb: Ignore RGB888
    
    None of our display hardware supports the packed 24-bit format, so stop
    trying to use it and causing test failures.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=78873&list_id=465068
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit db4cc747fac2692d3b947992384d21a253e2a264
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Sep 6 12:07:49 2014 +0100

    lib/igt_fb: Add debug output for creating fb
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 91a432721c2b16aa6610bd9c89bbee7763552f77
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Sep 6 08:40:04 2014 +0100

    core: Display subtest walltime
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f675f6771b1a3eaca6981ad78d2f1521f379347a
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Sep 4 11:35:01 2014 +0100

    lib: keep a list of modified connectors to reset
    
    Avoid calling functions in igt_reset_connectors that are not safe to use
    in signal handlers by keeping a list of connectors that have been
    modified, instead of enumerating all connectors.
    
    v2: add space for a sentinel NULL value on forced_connectors and print a
        warning when the connector limit is reached (Chris Wilson)
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=83498
    Cc: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 48da0e69adbf086c560a4e3175a16b85a1662bbd
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Sep 4 17:00:16 2014 +0100

    tests/kms_3d: skip if connectors cannot be forced
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit d3c83b203372a00f846a3858711aae7ba290d570
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Sep 4 16:56:17 2014 +0100

    lib: don't force HDMI or DP connectors on HSW and BDW
    
    Forcing HDMI or DP connectors on these platforms doesn't currently work,
    so fail early to allow the test to skip if required.
    
    v2: restrict to HSW and BDW (Daniel Vetter)
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 3aac97107ed386885cfb78f16e0c15a1042fe8cc
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Aug 29 17:54:10 2014 +0100

    lib/igt_fb: ensure igt_create_fb parameters are consistent
    
    Make sure the parameters in the prototype and implementation of
    igt_create_fb match and are complete so that the documentation is
    correct.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 5303ce8076b03a02f891090367d2abc53f9588b7
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Aug 20 11:13:34 2014 +0100

    tests: add kms_3d test
    
    Add a test to verify creation and use of 3D stereo modes.
    
    v2: update for API changes
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 4cb194669782d759e60bad3fa61e3efc0ee7c7ec
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Aug 4 16:14:51 2014 +0100

    lib: move create_stereo_fb from testdisplay to igt_fb
    
    Move create_stereo_fb from testdisplay to igt_create_stereo_fb in igt_fb
    so that it can be used in other tests.
    
    v2: update for new igt_create_fb API
        add parameters for format and tiling
        remove some old debug code
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit a124b1a430bf47f31fcff0614dbc00dbe2794dcf
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Jul 30 11:10:49 2014 +0100

    lib: add kmstest_edid_add_3d
    
    kmstest_edid_add_3d adds an EDID extension block with 3D support to a
    copy of the specified EDID.
    
    v2: Avoid using an invalid CEC SPA (Clint Taylor)
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 4a604dee6003d3c377a2984ce288f7e9b8fdf85b
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Fri Aug 1 21:19:56 2014 +0300

    tools/null_state_gen: build cmd and state space separately
    
    Instead of building batch directly to memory, build into cmd and
    state arrays. This representation allows us more flexibility in batch
    state expression and batch generation/relocation.
    
    As a bonus, we can also attach the line information that produced the
    batch data to help debugging.
    
    There is no change in the output states produced. This can be considered
    as a preparatory patch to help introduce gen8 golden state.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit b77145dd489ef4e05799aa734927b9f9e77710d2
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Fri Aug 1 21:19:55 2014 +0300

    lib: Add MI_LOAD_REGISTER_IMM
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit c5ad1c329564cdfc4b99596e5d02f5b6b16edea2
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Fri Aug 1 21:19:54 2014 +0300

    lib/gen6_render: fix GEN6_3DSTATE_VF_STATISTICS define
    
    We dont use this pre CTG and we will need it for gen8 golden state.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit f0023fa8f54a9f7f8b65699b08f2692093f101dd
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Fri Aug 1 21:19:53 2014 +0300

    lib/rendercopy: fix a typo in define
    
    No functional changes
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit ba614bea44d2a1661312a8465791d9e844e55f8b
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Fri Aug 1 21:19:52 2014 +0300

    tools/null_state_gen: terminate relocs with -1
    
    as this was already changed in kernel.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit c49542af073687a5dc66eaef19c31eeaf5766a86
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Sep 5 08:51:27 2014 +0200

    lib/igt_aux: Improve wait_for_keypress helper a bit
    
    - Use keys in just one env variable to enable/disable it.
    - Add an informational message so that the users knows when to press
      the key (more useful over ssh than when run on the terminal ofc).
    - Improve the documentation so that it's clearer how to use this
      when running tests.
    
    Cc: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Cc: Damien Lespiau <damien.lespiau@intel.com>
    Acked-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a16ebccaee426ef96b0894e3af733360d88ce4d7
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Sep 3 14:47:21 2014 -0300

    igt_core: zero exit_handler_count before forking
    
    If we don't reset exit_handler_count before forking, we may have a
    case where the forked process is killed before it even does
    "exit_handler_count = 0": in that case, it is still finishing forking.
    When that happens, we may end up calling our exit handlers. On the
    specific bug I'm investigating, we call igt_reset_connnectors(), which
    ends up in a deadlock inside malloc_atfork. If we attach gdb to the
    forked process and get a backtrace, we have:
    
    (gdb) bt
    0  __lll_lock_wait_private () at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:95
    1  0x00007f15634d36bf in _L_lock_10524 () from /lib/x86_64-linux-gnu/libc.so.6
    2  0x00007f15634d12ef in malloc_atfork (sz=139729840351352, caller=<optimized out>) at arena.c:181
    3  0x00007f15640466a1 in drmMalloc () from /usr/lib/x86_64-linux-gnu/libdrm.so.2
    4  0x00007f1564049ad7 in drmModeGetResources () from /usr/lib/x86_64-linux-gnu/libdrm.so.2
    5  0x0000000000408f84 in igt_reset_connectors () at igt_kms.c:1656
    6  0x00000000004092dc in call_exit_handlers (sig=15) at igt_core.c:1130
    7  fatal_sig_handler (sig=15) at igt_core.c:1154
    8  <signal handler called>
    9  0x00007f15634cce60 in ptmalloc_unlock_all2 () at arena.c:298
    10 0x00007f156350ca3f in __libc_fork () at ../nptl/sysdeps/unix/sysv/linux/x86_64/../fork.c:188
    11 0x000000000040a029 in __igt_fork_helper (proc=proc@entry=0x610fc4 <signal_helper>) at igt_core.c:910
    12 0x000000000040459d in igt_fork_signal_helper () at igt_aux.c:110
    13 0x0000000000402ab7 in __real_main63 () at bug.c:76
    14 0x000000000040296e in main (argc=<optimized out>, argv=<optimized out>) at bug.c:63
    
    After doing some searches for "stuck at malloc_atfork", it seems to me
    we probably shouldn't be doing any malloc calls at this point of the
    code, so the best way to do that is to make sure we can't really run
    the exit handlers.
    
    So on this patch, instead of resetting the exit handlers after
    forking, we reset them before forking, and then restore the original
    value on the parent process.
    
    I can reproduce this problem by running "./kms_flip --run-subtest
    2x-flip-vs-modeset" under an infinite loop. Usually after a few
    hundred calls, we end up stuck on the deadlock mentioned above. QA
    says this problem happens every time, but I'm not sure what is the
    difference between our environments that makes the race condition so
    much easier for them.
    
    The kms_flip.c problem can be considered a regression introduced by:
    commit eef768f283466b6d7cb3f08381f72ccf3951dc99
    Author: Thomas Wood <thomas.wood@intel.com>
    Date:   Wed Jun 18 14:28:43 2014 +0100
        tests: enable extra connectors in kms_flip and kms_pipe_crc_basic
    
    even though this commit is not the one that introduced the real
    problem.
    
    It is also possible to reproduce this problem with a few modifications
    to template.c:
      - Add a call to igt_enable_connectors() inside the first fixture.
      - Add igt_fork_signal_helper() and igt_stop_signal_helper() calls
        around subtest B.
    
    Note that the crucial piece is that the parent actively kills helper
    children, and if we skip tests this can happen _really_ fast. See e.g.
    
    commit a031a1bf93b828585e7147f06145fc5030814547
    Author: Daniel Vetter <daniel.vetter@ffwll.ch>
    Date:   Fri Sep 13 16:43:22 2013 +0200
    
        lib/drmtest: ducttape over fork race
    
    for past hilarity in this area.
    
    Cc: Thomas Wood <thomas.wood@intel.com>
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=81367
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 081887504a72878fc5f54778af68ebd9404b4e04
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Sep 3 13:38:30 2014 +0100

    igt/gem_concurrent_blit: Move igt_require() out of children
    
    Otherwise the test infrastructure throws a fit.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=83420
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3309f54e8f15d2d82544b00abff2215f50ca27b2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jul 26 11:42:20 2014 +0100

    igt/gem_gtt_hog: Convert opencoded fork()/wait() over to igt_fork()
    
    No reason not to use the common infrastructure here.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a54faca98717eda0e192139bd72f110bd5a98c90
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 3 12:51:33 2014 +0200

    NEWS: Updates in anticipation of the next release
    
    Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

commit 4bff3ee012a05b92b5779a0cb8e74a575f74a878
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Aug 30 22:46:41 2014 +0100

    gem_workarounds: intel_wa_registers is now prefixed with i915
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Reviewed-by: Arun Siluvery <arun.siluvery@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f473a5543eb601473e2b23e6ff7bff0f468bd3d0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Sep 1 07:23:30 2014 +0100

    rendercopy/gen8: Fix vertex buffer relocation
    
    I was thrown by the routine calling itself gen7 when in it gen8 specific
    and required 64bit relocation fixes.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c12f292b1d8bbc61b65f1dfc3fd4a9e1e286dbee
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Aug 31 16:14:40 2014 +0100

    igt/gem_concurrent_blit: Use the preallocated dummy bo for temporary copies
    
    Use the existing allocation, saves having to make fresh allocations in
    the innermost loop - trimming code and potential failure paths.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d6af0043bdde1413a3ccdc4e82d3f5b95b3ae271
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Aug 30 14:48:36 2014 +0100

    batch: Fix typo in BLIT_BATCH_BEGIN
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 10552b5ca6c193e0c696e96c9f5e0d6142f4d8ee
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Aug 30 11:44:51 2014 +0100

    batch: Specify number of relocations to accommodate
    
    Since relocations are variable size, depending upon generation, it is
    easier to handle the resizing of the batch request inside the
    BEGIN_BATCH macro. This still leaves us with having to resize commands
    in a few places - which still need adaption for gen8+.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 255bade1ea98e642fe6d01c9dee8d5e8661bd816
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 29 21:25:14 2014 +0100

    igt/gem_seqno_wrap: Use debugfs singleton
    
    This has the added advantage of automounting debugfs for us.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 982f7eb238a0898c456e0574dee7c4507738d75f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 29 15:19:57 2014 +0100

    Prepare for 64bit relocation addresses
    
    This reveal that quite a few locations were writing relocation offsets
    but only allowing for 32 bit addresses. To reveal such places in active
    tests, we also now double check that we do not use more batch space than
    declared.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 86055df9682948ef26b06b94a3856676d638e2fb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 29 17:36:29 2014 +0100

    igt/gem_concurrent_blit: Apply some fence pressure as well
    
    As before, we also want to race against access through the fence
    registers. This overlaps slightly with gem_set_tiling_vs_blt, but the
    different access pattern should make it useful.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d28b9d27bf6c1c5e0dae591985442a25bbecab86
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 29 17:30:40 2014 +0100

    igt: Tweak the igt_assert_cmpint macro
    
    Minor tweak to embed the constant format string rather than passing it
    to the vararg printf.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit fbfa754e8dce1553e024310eb7b7ed9469ed238b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 29 19:28:34 2014 +0100

    lib/batchbuffer: Guard intel_blt_copy with even more asserts
    
    Assert that the source/destination bounds are within the pitch and size
    of the associated bo.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 23d961e950e92bb00c7cb29fa73499af568e7571
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 29 14:49:59 2014 +0100

    lib/batchbuffer: Store the gen in a local variable
    
    Reduce lookups and improve code clarity.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 822cc6a5655db6c210204ca349dbbed05ee1838b
Author: Mike Mason <michael.w.mason@intel.com>
Date:   Tue Aug 26 13:31:27 2014 -0700

    scripts: Add capability to resume interrupted run-tests.sh session
    
    Piglit provides a 'resume' feature that can restart an interrupted
    test run at the point where it stopped. This patch adds that
    feature to run_tests.sh.
    
    Signed-off-by: Mike Mason <michael.w.mason@intel.com>
    [Thomas: remove additional new line from end of file]
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 59c55626f93eabafe4617f4aca6ec11545340d9d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 29 13:11:37 2014 +0100

    igt/gem_concurrent_blit: Add ring race checks
    
    Similar to the previous commit, we also want to check that every
    pipeline is serialised correctly. This extends the test to include
    render copies as well as blits.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6c428a6c060a23dc948f198f7a63096bd2739875
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 29 13:11:37 2014 +0100

    igt/gem_concurrent_blit: Add GPU-vs-GPU checks
    
    In future, we may allow reordering of GPU batches. This implements a
    simple race detector by extending the current CPU-vs-GPU checks.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3b94d3f8ce21c92d3209e73ab48fda64beb0037e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 29 13:11:40 2014 +0100

    igt: Prettify igt_assert_eq() failure messages
    
    This just improves the language about the exact failure to reduce
    confusion.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d0a41b47ea5ed1ac5ca45f83d2917c6ad41b644a
Author: Arun Siluvery <arun.siluvery@linux.intel.com>
Date:   Tue Aug 26 14:50:28 2014 +0100

    igt/gem_workarounds: igt to test workaround registers
    
    Some of the workarounds are lost followed by a gpu reset, suspend/resume;
    this patch adds a test which compares register state before and after
    the test scenario.
    
    This test currently verifies only bdw workarounds.
    
    v2: address patch cleanup comments (ThomasW)
     Add binary to ignore list and use igt_debugfs helper fns
     to read debugfs file and igt_info for printing debug info.
    
    v2.1: address minor comments from Daniel
     use igt_main as opposed to normal main
    
    Signed-off-by: Arun Siluvery <arun.siluvery@linux.intel.com>
    [danvet: Drop igt_exit, it's already in igt_main.]
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2ef19ad79a07d862a2dc799ab2e71d2ad91c9065
Author: Rémi Cardona <remi@gentoo.org>
Date:   Mon Aug 18 01:09:15 2014 +0200

    shader-debugger: Force file/stdout IO as UTF-8
    
    Not all locales on linux are UTF-8, the most notable being the C locale.
    Python will use the ASCII codec for stream IO in this case and will barf
    on the Copyright sign at the top of .g4a files.
    
    Bugzilla: https://bugs.gentoo.org/show_bug.cgi?id=519434
    Signed-off-by: Rémi Cardona <remi@gentoo.org>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 257a51ec955b178ed07e4797a7d36f35a8cc82fe
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 26 15:26:34 2014 +0200

    lib: Use igt macros more
    
    Stragglers.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1649ef0d1f5c0e4f995a437bd24f1574a8b5100f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 26 15:26:21 2014 +0200

    lib/igt_* Use igt macros in igt libaries
    
    Except in igt_core since that would lead to some hilarious recursions.
    
    v2: Don't fflush any more, spotted by Chris.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 71ac5de5a4473d20fb11cb454f62d8e5c90f020c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 26 15:13:06 2014 +0200

    lib/intel_* Use igt checks and macros
    
    Various stuff all over. Most done with the igt.cocci spatch, but
    with a few fixups by hand. And add igt_core.h includes where needed.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit baa6f8b34f54b68c15fc86d86de77d954e458aac
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 26 15:03:40 2014 +0200

    lib/rendercopy*: Use igt_assert

commit 4428151960b71a2ca4c83e8da3f4b0b826a8a26c
Author: Sonika Jindal <sonika.jindal@intel.com>
Date:   Tue Aug 19 12:01:25 2014 +0530

    kms_rotation_crc: Calling commit2 instead of legacy commit
    
    Since planes are universal now, using commit2 so that drmModeSetPlane can be
    called for primary plane as well instead of drmModeSetCrtc. drmModeSetPlane will
    update the x,y,w,h for the plane.
    
    Cc: Damien Lespiau <damien.lespiau@intel.com>
    
    Signed-off-by: Sonika Jindal <sonika.jindal@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c1cf0d81389e8cc696a233aa357130f97e1b9a4c
Author: Wendy Wang <wendy.wang@intel.com>
Date:   Tue Aug 26 14:38:49 2014 +0800

    Merge two subtests for pm_rc6_residency IGT case
    
    Combine two subtests(rc6_residency_check and rc6_residency_counter)
     into one subtest(residency_accuracy)
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 50166d2a20b72d008e5991a157a45cd9a77e4dea
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Aug 19 11:55:22 2014 +0100

    lib/fb: Assert, instead of silently failing, when creating fbs
    
    We were either returning 0, or a negative value cast to an unsigned int
    for errors and the clients of that API weren't exactly checking
    anything.
    
    We're in luck, we can take shortcuts in a testing library to just assert
    when an expected error occurs.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 54397cafed108e54e98f109b8fd6cb4fdc729823
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Aug 19 11:40:07 2014 +0100

    lib/fb: Replace straight igt_fail() by asserts with debug messages
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit d9ffb7dfc3e9a36e63561f0e3a995275a445f87f
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jun 20 12:02:09 2014 +0100

    testdisplay: Make the desired tiling mode an unsigned int
    
    We may be able to scan out more tiling formats in the future.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 5f16ef6f28b97d16301d10b7a137a3d0fdcb0927
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Aug 18 16:55:57 2014 +0100

    pm_rpm: Adjust to the new igt_create*fb() API
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 9317f39a5e3729ac128c960a3e21d7234239b2db
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jun 23 15:28:07 2014 +0100

    pm_lpsp: Adjust to the new igt_create.*fb() API
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 210f76c4969d9b8ed74230116d4d212a6f503e73
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jun 23 15:27:17 2014 +0100

    kms_sink_crc_basic: Adjust to the new igt_create.*fb() API
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit ab4cb9d7ce4b69e25447cc7c161cc12cb9b879cf
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jun 23 15:26:34 2014 +0100

    kms_setmode: Adjust to the igt_create.*fb() API
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 0d4cf057f518b079b7aa3d55f0ee14903b5abbcc
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jun 23 15:25:39 2014 +0100

    kms_render: Adjust to the new igt_create.*fb() API
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 3149b8e903ecdbd7fadbbfcd9d3fdddf11b444a7
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jun 23 15:24:49 2014 +0100

    kms_psr_sink_crc: Adjust to the new igt_create.*fb() API
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 4a8c6346e53f1fbda34a0d7d376b2a906716a38a
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Aug 18 16:50:07 2014 +0100

    kms_plane: Adjust to the new igt_create.*fb() API
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit b013b2117964529f8e693f5da2c865258b2af42d
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jun 23 15:21:21 2014 +0100

    kms_pipe_crc_basic: Adjust to the new igt_create.*fb() API
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit fd1317bd25944feebbd553a7c85395beb6842df0
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jun 23 15:19:25 2014 +0100

    kms_mmio_vs_cs_flip: Adjust to the new igt_create_.*fb() API
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 876fe198c7a47a427d49347141a70cc3f5607a55
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jun 23 15:18:00 2014 +0100

    kms_flip_tiling: Adjust to the new igt_create_.*fb() API
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit d71031cd7455fa2119215abca651e816ad0807a1
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jun 23 15:16:54 2014 +0100

    kms_flip: Adjust to the new igt_create_fb*() API
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 3a930273a05790570fb1986bc36f67bbf6a7af3b
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jun 23 15:13:46 2014 +0100

    kms_fence_pin_leak: Use I915_TILING_X to create fbs
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 66d31332ddaadf8d92ff761747d51716f5a0f5da
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jun 23 15:12:48 2014 +0100

    kms_fbc_crc: Use I915_TILING_X to create fbs
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 0c14af65eaf0d052a8263fadd53c825282576608
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jun 23 15:11:12 2014 +0100

    kms_cursor_crc: Use I915_TILING_NONE to create fbs
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 378e61e4d872136d9d106bcaae1fcafb5ce1c460
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jun 23 14:53:24 2014 +0100

    lib: Change the fb creation functions to take fully qualified tiling formats
    
    In the future, we'll need more than X tiling here. So give a full enum
    instead of bool meaning X-tiled.
    
    It's fine to do this change without updating the users just yet as
    'true' happens to be I915_TILING_X.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 4d2f511cee49db9b8f1ebf93b9835d871dfb9a9e
Author: Mike Mason <michael.w.mason@intel.com>
Date:   Mon Aug 18 10:43:49 2014 -0700

    tests: Fix seg fault when gem_mmap is run without specifying a subtest
    
    gem_mmap seg faults when all tests are run together. This occurs because
    the new-object subtest closes the gem object, but short-mmap assumes
    it still exists. Thus gem_mmap__cpu() returns nil for addr and memset()
    seg faults. This patch makes new-object and short-mmap create and
    close their own gem objects.
    
    Signed-off-by: Mike Mason <michael.w.mason@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit e9da093b13c572b50c84ea2ec19244c8e2b78f08
Author: Mike Mason <michael.w.mason@intel.com>
Date:   Mon Aug 18 10:43:09 2014 -0700

    scripts: Allow multiple -t and -x regular expressions for run-tests.sh
    
    Piglit allows multiple -t and -x regular expressions to be
    given on the command line. This patch enables run-tests.sh to
    support that as well.
    
    Signed-off-by: Mike Mason <michael.w.mason@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 75365eb01b7cb530426d84ea5357ed7b31575337
Author: Tim Gore <tim.gore@intel.com>
Date:   Mon Aug 18 14:56:43 2014 +0100

    intel-gpu-tools: skip kms_flip_event_leak unless we have cairo
    
    kms_flip_event_leak depends on cairo, so add it to the
    list of tests to skip (in Android.mk) if ANDROID_HAS_CAIRO
    is not set to 1.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 79c0c9622c870a4e562dfe7b7e5b3625f73c61d1
Author: Mike Mason <michael.w.mason@intel.com>
Date:   Fri Aug 15 19:14:12 2014 +0000

    Add kms_flip_event_leak to .gitignore
    
    This patch just adds kms_flip_event_leak to tests/.gitignore.
    
    Signed-off-by: Mike Mason <michael.w.mason@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 1bec6cb2c241ec449cd75579041506d1708bd341
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Aug 14 14:06:37 2014 +0100

    tests: check plane rotation is reset after the VT mode is restored
    
    Make sure the rotation is reset after the VT mode is restored by
    collecting the unrotated CRC and comparing with the CRC value after VT mode
    has been restored. The CRC is used to ensure the hardware state is checked,
    rather than any software state.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=82236
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit fcb324c2cca6549cd95fb84269622feb72c90cbd
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Aug 14 13:59:02 2014 +0100

    lib: add igt_restore_vt_mode
    
    Add a function to restore the previous VT mode after
    igt_set_vt_graphics_mode is called.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 5c7bcb11bea366ede55e839656f4d03f150b2ca3
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 12 12:10:20 2014 +0200

    lib/igt_kms: doc for the remaining kmstest_ functions
    
    Plus a bit an overview section explaining the split in the library - a
    few people (everyone except me it seems) didn't really understand it.
    
    v2: Fix typo'ed s/kmstest_set_vt_graphics_mode/kmstest_get_pipe_from_crtc_id/
    in a doc comment spotted by Imre.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1cad834261e5792f19406faf111235737da15191
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 12 11:57:32 2014 +0200

    lib/igt_kms: Simplify return value of kmstest_get_connector_config
    
    A plain bool is enough.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 81dfcaba88f2a6f04830b7da2fd7d79cf6120a40
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 12 11:56:41 2014 +0200

    lib/igt_kms: Simplify return value of kmstest_get_connector_default_mode
    
    A plain bool is good enough, no need for fancy negative error values.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3b39bfff60967c13dbadae8ff051819d78c6bd2f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 12 11:31:44 2014 +0200

    lib/igt_kms: Shuffle kmtests_ functions
    
    Group them a bit both in the header and .c file, and make sure they
    appear in the same order in both.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 33f0884f3c711551a89483e438a6cf18af8ab25e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 12 11:23:09 2014 +0200

    lib/igt_kms: set_vt_graphics_mode is a low-level helper
    
    So give it a kmstest_ prefix and shuffle it around a bit.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9a15b5a5e2cb0ab34c0e11dc53a183919664157f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 12 11:13:03 2014 +0200

    lib/igt_kms: doc for type2str functions
    
    Also shuffle things around a bit to make sure the order in the header
    matches the order in the .c file.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 27a19de059259ef2944f7bfd61082862e6f277e4
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 12 11:04:49 2014 +0200

    lib/igt_kms: Clean up the other _name functions/macros
    
    And remove sprite_name, redundant and won't work due to lack of
    dev_priv.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit dd8fba44cd1759e5cffc84d47f2c9b92c1e2ae8b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 12 11:00:37 2014 +0200

    lib/igt_kms: Unify pipe name helpers
    
    And add api doc while at it.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit fb38cf260ba6ed45b514b7a2c21f733c51caeb90
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 12 10:32:41 2014 +0200

    tests/kms_cursor_crc: Align opening {
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2ce0691cd5237ebf06d617acb2a33d418178f883
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 12 15:29:25 2014 +0100

    igt/gem_cpu_reloc: Update the memory requirements
    
    Use intel_check_memory() for accuracy and beautification
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit eda904c9d787bd085be3803529c7f23f81ec174b
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Aug 5 23:06:04 2014 +0300

    tests: Add kms_flip_event_leak test
    
    kms_flip_event_leak will issue a page flip and close the file
    descriptor before the flip has finished. This may cause the kernel
    to leak the page flip event. The test itself won't actually fail but
    if the kernel notices the leak and WARNs piglit will report a failure.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 5a06d361b5941466ef1941bb6010f179dbb6f66e
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Aug 8 11:24:34 2014 -0300

    tests/pm_rpm: refactor the modesetting code
    
    Refactor the code so the params for the modesets are always stored and
    don't have to be recomputed every time. With this, we can get rid of
    our FB caching structures, and we now also allow the subtests that do
    special modesets to reuse the parameters used on the default modesets,
    just changing whatever they want.
    
    The biggest win here is that the test case subfunctions get smaller
    and simpler to read and write.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 5a978121d36ceb0ac6b372475d03c98a8db72e7e
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Aug 7 16:36:04 2014 -0300

    tests/pm_rpm: add disable_or_dpms_all_screens()
    
    And its and_wait() version. The goal is to extract common code
    patterns into functions/macros, so the code for the test cases gets
    easier to read and write.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 189205984224e5a66d4dcfc85f4072202d91b633
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Aug 8 11:12:42 2014 -0300

    tests/pm_rpm: add macros to disable/enable screens and wait
    
    This should make the test case functions better to read and write.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit f6ffa3ca7f6d845d76cad95e2d5f0f8fdd84932a
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Aug 7 16:03:08 2014 -0300

    tests/pm_rpm: add wait_for_suspended() calls to test_one_plane
    
    Make sure we do all operations while really runtime suspended, so we
    can actually test things.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit a17f0604ef31ed310fbdcbb64324fcb39f08b908
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Aug 6 18:50:57 2014 -0300

    tests/pm_rpm: add subtests for fences
    
    Daniel thought fences were not surviving runtime PM on DPMS, so we
    wrote this test to check. The good news is that the test passed, so
    there's no need for a Kernel patch, at least on the Kernel I tested.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit d52365677ef808ffa43bf5e9d53ed0814edd3dd5
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Aug 6 14:31:53 2014 -0300

    igt_kms: add kmstest_unset_all_crtcs()
    
    Both pm_rpm.c and pm_lpsp.c call it "disable_all_screens", but let's
    give it a name that better describes what the implementation does.
    
    v2: Rename to kmstest_unset_all_crtcs (Daniel).
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit da458758e7d8d10b520146591312ae0407a0da6b
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Aug 6 12:33:48 2014 -0300

    tests/pm_rpm: use kmstest_get_property()
    
    So we can reduce the code size.
    
    v2: Rebase after the rename to kmstest_get_property.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 4924b78368fa44f96fa61f6bcf402d4a55f8d4de
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Aug 6 12:14:56 2014 -0300

    igt_kms: document and export kmstest_get_property()
    
    So we can use it on pm_rpm.c.
    
    v2: Rename to kmstest_get_property (Daniel)
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 053c10432254d2d58c33346f0ef08f024c3781ce
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Aug 6 12:03:57 2014 -0300

    igt_kms: optionally return the property from get_property
    
    So we can use this function on places that also need the property
    pointer, without having to call drmModeGetProperty() again with the
    returned id.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 18d8ea7fe451ee73606d82b060f02e06fae16fc2
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Aug 6 11:48:56 2014 -0300

    igt_kms: pass drm_fd instead of igt_display_t on some functions
    
    Since these functions only really use the drm_fd. The goal is to be
    able to reuse these functions on programs that don't use the
    igt_display_t structure.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 61920c68d847dcc920fff27f857e03debc76a9a4
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Aug 5 18:44:47 2014 -0300

    igt_kms: don't get drmModeRes just to free it later
    
    Stress testing malloc is not our goal :)
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit bfb5a757751d6f8e6f7ed02f6cb76d006cd0e990
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Aug 6 14:55:33 2014 -0300

    tests/pm_rpm: add subtests for planes and cursors
    
    These tests should trigger WARNs on Kernels that don't have the most
    recent fixes.
    
    v2: - Merge both the cursor and planes patches into one so it's easier
          to update them.
        - Extend the tests a little bit to exercise fences.
        - Fix bug found by Matt to enable the test to run on older Kernels
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 17d63e49685ac51d62ba2dba80167de96e1b6c5f
Author: Sean V Kelley <sean.v.kelley@intel.com>
Date:   Tue Aug 5 13:53:49 2014 -0700

    lib/chv: CHV media pipeline command sequence
    
    Enable gem_media_fill test for CHV platform.  In addition to differences in
    media IP blocks from Broadwell, the command sequence also differs for
    programming the media pipeline, e.g., should not send a MEDIA_STATE_FLUSH
    right before the MI_BATCH_BUFFER_END of batch buffers using MEDIA_OBJECT.
    Uses explicit IS_BROADWELL / IS_CHERRYVIEW to distinguish in gen8 media
    fill handling.
    
    Signed-off-by: Sean V Kelley <sean.v.kelley@intel.com>
    Reviewed-by: Xiang, Haihao <haihao.xiang@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ac31f19264d45df63fdd6591d66ae57060d1ee5e
Author: Gaurav K Singh <gaurav.k.singh@intel.com>
Date:   Wed Jul 16 19:39:33 2014 +0530

    intel_bios_reader: Add support to dump MIPI Sequence block #53
    
    Signed-off-by: Gaurav K Singh <gaurav.k.singh@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 525044ba32a9fa848c9fb36e8bd96211d6b38e12
Author: Gaurav K Singh <gaurav.k.singh@intel.com>
Date:   Wed Jul 16 19:39:32 2014 +0530

    intel_bios_reader: Add support to dump MIPI Configuration Block #52
    
    Signed-off-by: Gaurav K Singh <gaurav.k.singh@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit ff6b068ecd1d231af466d043454279e6cddcb3d1
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Jul 31 16:26:55 2014 +0100

    testdisplay: ignore invalid subtest options
    
    testdisplay does not have any subtests and should therefore exit with
    the appropriate exit code if the --list-subtests or --run-subtest
    options are used.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit de1e877be5fe9ac83477a8ca416708f3d078b731
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 28 08:58:32 2014 +0100

    core: Add all kernel log levels
    
    And notice that INFO is 6 not 5. This is because I had intended to use
    KERN_NOTICE anyway...
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9b500dbf6b0b3a68b1de90888c11a873202c98cd
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jul 28 16:43:19 2014 +0100

    Update .gitignore files
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit bb48429a6c6057b51358ce0d506916431d982897
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jul 28 16:01:27 2014 +0100

    lib: don't abort if forcing the connector state fails
    
    Ensure tests using igt_enable_connectors can still run even if the
    relevant debugfs files are not available.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit c3ba7740c113d318d030ac408883c3303ca781bb
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jul 28 15:37:16 2014 +0100

    lib: check test options for conflicts
    
    Check any test specific options for conflicts with the standard set of
    options.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit fc5e25750f96b9c05919e757baf2a54996ba4942
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Jul 25 16:54:41 2014 +0100

    lib: avoid getopt value conflicts with tests
    
    Most tests use a printable character as the value for getopt to return,
    so avoid conflicts by using non-printing values for the standard options.
    
    v2: fix "-h" short option
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 8fc4107c911826f7e0900797e36b24010230e30d
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Jul 25 15:35:36 2014 +0100

    testdisplay: set a non-zero exit code if getopt detected an error
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 2fae99bf2cc69eed3ef71ba4d71f640463de57c3
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Tue Jul 29 16:54:48 2014 -0700

    lib: Add ndebug to the headers
    
    If you don't do this, it is excluded from the tarball generated by make
    distcheck.
    
    1.6 and 1.7 both are not buildable as a result.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 21e9422b01a196dbb6f4c079d352978d81d55f32
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jul 29 18:46:09 2014 +0200

    tests/gem_ringfill: add interruptible mode
    
    Should be useful to test intel_ring_begin restart behaviour a bit.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 660a7ffdbade6ea0854df881ce316cfc64500826
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jun 30 16:19:05 2014 +0100

    testdisplay: Destroy the cairo context once the fb is painted
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 0db75bb3f91fc058c56650100f75cea5204c6af6
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jun 30 16:34:20 2014 +0100

    lib: Don't take a reference to the surface in get_cairo_surface()
    
    We don't need to keep a reference to the surface, the cairo context will
    keep a reference to it until we destroy it.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 72357f3de04ab9aa57b046b666e02090641f0aa4
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jul 11 14:45:37 2014 +0100

    lib: NULLify ->cairo_surface once unmapped
    
    Just a matter of not leaving dangling pointers around.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 4aadbc817b3ff72cb44fac2aece3affe19c04f18
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jun 23 16:41:43 2014 +0100

    lib: Split the GTT mapping out of get_cairo_surface()
    
    This is preparation work for when we need a different way to get a
    linear buffer we can use with cairo.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit f5959af8a5887fb991c4a24daa8017331614e6b0
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jun 23 19:47:19 2014 +0100

    lib: Remove unused field from struct igt_fb
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit e48c495572ae1e07aa3f48e801caec351a370c4b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jul 27 15:39:58 2014 +0100

    igt/pm_rps: Fix assertion in load_helper_stop
    
    The load_helper isn't killed by the signal, but it exits gracefully. So
    update the assertion to check for the successful exit.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a6e6c5bdcf93376a505abff3ae510d8275727028
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 25 17:34:06 2014 +0100

    drmtest: First check that driver is i915
    
    Before issuing any i915 specific ioctls, check the driver is i915
    otherwise we make other drivers emit nasty errors at the start of every
    test.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit fcbc5028aef6a8691c87d9153c93246f7904e307
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Jul 25 13:53:12 2014 +0100

    quick_dump: fix distcheck
    
    version.h is now generated in the libs directory, so make sure it is
    correctly included in the compiler flags.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 57bd86068a319b218796d0bea92258b44ee143a0
Author: Tim Gore <tim.gore@intel.com>
Date:   Thu Jul 24 17:38:22 2014 +0100

    intel-gpu-tools: fix version.h creation in android
    
    commit 743dc7997aa9f5210055896940d87c88983dcda6
    breaks the build under Android because version.h
    is not created. This happens because the android
    make executes from the ANDROID_BUILD_TOP directory
    rather than from the directory containing the source
    files, so we need to differentiate between Android
    and linux builds. This is V2 of this patch based on
    Thomas Wood's suggestion.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    [Thomas: Fix distcheck issues]
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 8408e00e623b52f18ad0795122593741197fa2f4
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Jul 24 17:45:48 2014 +0100

    testdisplay: only set terminal attributes when in foreground process group
    
    The Piglit test runner for intel-gpu-tools creates a new process group
    for the test processes, so attempting to set terminal attributes causes
    the process to receive SIGTTOU and be stopped. Since the test is not run
    interactively in this case, the issue can be avoided by not setting
    terminal attributes if the process is not in the foreground process
    group.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit b9e7637542364f9834c620ce2ee3b4ca11ba6f27
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 25 14:29:47 2014 +0100

    core: Inject program name into dmesg
    
    Write the program name if !list_only so that we associate oops with
    simple tests.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e0dffbdeda010a0114e16fb7b2e3adb7336acff4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 25 14:28:51 2014 +0100

    core: Improve phrasing for test requirements
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 72b12636492cdf1c97eb1fec313165720f741cca
Author: Tim Gore <tim.gore@intel.com>
Date:   Thu Jul 24 14:54:27 2014 +0100

    intel-gpu-tools: add sys/wait.h to pm_rps.c
    
    commit 745945546f7366a413a3a51a37f90caa3a227b1d
    breaks the build under Android because some of the
    macros used in pm_rps.c are defined in sys/wait.h
    which is not included.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 93d07ab8986f383a679faffc795c71a955f67945
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jul 25 09:28:56 2014 +0200

    NEWS: Don't forget new universal plane commit for igt_kms
    
    Suggest by Matt Roper.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 52915fc88a3948eab9e6f243b81285420897ab95
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jul 24 12:46:00 2014 +0100

    core: Inject subtest message into dmesg
    
    One of the side-effects we test for are kernel oops and knowing the
    guilty subtest can help speed up debugging. We can write to /dev/kmsg to
    inject messages into dmesg, so let's do so before the start of every
    test.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 66e46630f8ba04060d73e18e46a956bf25201fc4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jul 24 12:00:57 2014 +0100

    igt_core: Read manpages more carefully  for WNOHANG
    
    /me hides
    
    I thought it said it would not return for a signal and stopped thinking.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 745945546f7366a413a3a51a37f90caa3a227b1d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jul 24 11:44:45 2014 +0100

    igt_core: Refactor igt_stop_helper() to use igt_wait_helper()
    
    Reduce code duplication as the igt_stop_helper can reuse
    igt_wait_helper() to replace its own waiting routine.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit bd3cf81e982d191715a68b6432c3820e9ba733ff
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jul 24 11:41:59 2014 +0100

    core: Only use signalsafe functions inside signal handlers
    
    The atexit() and signal() callbacks both need to only use signalsafe
    functions - that excludes the use of assert. So simplify
    fork_helper_exit_handler() and children_exit_handler().
    
    __lll_lock_wait_private () at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:95
    0x00007fd630883d2b in _L_lock_13840 () from /lib/x86_64-linux-gnu/libc.so.6
    0x00007fd630881df8 in __GI___libc_realloc (oldmem=0xfcb010, bytes=88) at malloc.c:3025
    0x00007fd63087111b in _IO_vasprintf (result_ptr=0x7fff35dc4780, format=<optimised out>, args=args@entry=0x7fff35dc4658) at vasprintf.c:84
    0x00007fd630852907 in ___asprintf (string_ptr=string_ptr@entry=0x7fff35dc4780, format=format@entry=0x7fd63097f718 "%s%s%s:%u: %s%sAssertion `%s' failed.\n%n") at asprintf.c:35
    0x00007fd63082dd92 in __assert_fail_base (fmt=0x7fd63097f718 "%s%s%s:%u: %s%sAssertion `%s' failed.\n%n", assertion=assertion@entry=0x40cff5 "ret == 0", file=file@entry=0x4108d1 "igt_core.c", line=line@entry=872, function=function@entry=0x410ea0 <__PRETTY_FUNCTION__.8052> "children_exit_handler") at assert.c:57
    0x00007fd63082dee2 in __GI___assert_fail (assertion=assertion@entry=0x40cff5 "ret == 0", file=file@entry=0x4108d1 "igt_core.c", line=line@entry=872, function=function@entry=0x410ea0 <__PRETTY_FUNCTION__.8052> "children_exit_handler") at assert.c:101
    0x000000000040b03f in children_exit_handler (sig=<optimised out>) at igt_core.c:872
    0x000000000040b089 in call_exit_handlers (sig=2) at igt_core.c:1029 fatal_sig_handler (sig=2) at igt_core.c:1053 <signal handler called>
    0x00007fd6308bfe63 in __libc_fork () at ../nptl/sysdeps/unix/sysv/linux/x86_64/../fork.c:130
    0x00007fd630bd6045 in __fork () at ../nptl/sysdeps/unix/sysv/linux/pt-fork.c:25
    0x000000000040c51a in __igt_fork () at igt_core.c:900
    0x00000000004036c2 in forking_evictions (ops=0x614360 <fault_ops>, surface_size=1048576, flags=5, trash_surfaces=<optimised out>, working_surfaces=338, fd=4) at eviction_common.c:203
    test_forking_evictions (size=1048576, flags=5, count=338, fd=4) at gem_userptr_blits.c:1086
    main (argc=1, argv=0x7fff35dc5328) at gem_userptr_blits.c:1478
    
    Reported-by: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8b3ded404c25bf23221e3b5ff2cc873107185781
Author: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Date:   Tue Jul 22 11:14:51 2014 +0100

    igt/gem_userptr_blits: Fix multi-threaded mm stress tester
    
    Two parts to the fix:
      1. Do not use pthread_cancel since not available on Android.
      2. Do not assert in the thread since that does not get propagated
         to the process. Rather pass out any failures so we know test
         did not work as expected.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Tim Gore <tim.gore@intel.com>
    Reviewed-by: Tim Gore <tim.gore@intel.com>

commit 700bdf1401f1596d25024fd1038e782708bf39e5
Author: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Date:   Tue Jul 22 12:33:49 2014 +0100

    igt/gem_userptr_blits: Fix forked access test
    
    copy() blit helper assumes a certain object size much larger than a page size.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>

commit bffef22bfd0fc80e8196df8bf33970aee9683e5d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 23 22:32:09 2014 +0200

    NEWS: Updates

commit 3efcb8c8ee3bade05cd01edf809f803a376f24a5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 23 21:14:24 2014 +0200

    tests/pm_rpm: Convert to new optparsing
    
    Thomas missed the add-hoc parameter parsing in here, which did break
    things for Paulo since the core now fails for unknown options.
    
    Convert them over to the new infrastructure, which has the nice upside
    that we can remove the comments and put them into the usage available
    with --help.
    
    Cc: Thomas Wood <thomas.wood@intel.com>
    Cc: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Tested-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 556ebc7a7cdec2f5cfa90c8503e0a7e9493154c5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 23 14:35:22 2014 +0200

    lib/drm_lib.sh: Bare-bones long option parsing
    
    Just enough to stay compatible with simple subtests.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 91f536dc42c667b908072ee064fd150826349ec6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 23 14:21:27 2014 +0200

    tests: Move root check to lib/drm_lib.sh
    
    All tests want that anyway.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8cb89f7c4cb764a819410e05440cc9dcb9f8df1f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jul 23 18:35:02 2014 +0100

    linux: placate drop_caches and pass it a '\n'
    
    Apparently it doesn't have much effect without the newline.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 743dc7997aa9f5210055896940d87c88983dcda6
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Jul 22 14:53:18 2014 +0100

    build: improve version.h generation
    
    Move version.h generation into lib/Makefile.sources so that it can be
    shared between the Autotools and Android build systems. Also make sure the
    "updating version.h" message is only displayed when version.h actually
    changes and remove unnecessary includes of version.h.
    
    This also includes changes from Tvrtko Ursulin to prevent a build from
    within the git repository failing when git is not available.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>
    Cc: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>

commit 784344ef8896e47af13fbb4377b020f33ce4c93c
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Jul 23 16:29:39 2014 +0100

    lib: add an exit code to use when invalid options are specified
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 561d519e67f31c81d338601ce859d32188c4bd7b
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Jul 23 10:38:24 2014 +0100

    lib: add a command line option to enable debug output in tests
    
    Add --debug as a common command line option for all tests to enable
    debug output.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit c584d5c671fd81881e39b032771398cf705b4bf4
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jul 21 16:17:06 2014 +0100

    lib: always warn about unknown options
    
    All tests can now register extra options, so there should not be any
    unknown options.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 80d2c9bf82800b3cfc988879067c0e38947e5879
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jul 21 15:57:16 2014 +0100

    tests: convert simple tests to use igt_simple_init_parse_opts
    
    Convert simple tests to use igt_simple_init_parse_opts if they require
    extra options.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 82b424a419e48e08ae112345ba517a81609ce7eb
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Jul 18 17:17:34 2014 +0100

    lib: don't ignore unknown options in multi-tests
    
    None of the current tests have additional options that might make use of
    any unknown options and igt_subtest_init_parse_opts is available that
    integrates additional option parsing.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit e2cef00896a3b68c4f91c94254c0d44fa36f3ad0
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Jul 18 16:49:07 2014 +0100

    lib: add igt_simple_init_parse_opts
    
    This function allows simple tests to register additional command line
    options.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 94ac74ebb889909579e3b872fd29514280c99300
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Jul 18 16:24:34 2014 +0100

    lib: move option parsing into common_init
    
    Move option parsing into common_init so it can be shared between simple
    tests and tests with subtests. This allows for more common command line
    behaviour across all tests.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit e73008bae32de18c86808da0f3393683af92c697
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Jul 18 14:17:35 2014 +0100

    tests: remove unused getopt header includes
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit e057b86109e67191448d6610e441cbca81513d68
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Jul 18 14:10:27 2014 +0100

    lib: warn when attempting to run an unknown subtest
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit bf57e93f508244b13bf9848e37f03c7cd8f9ac94
Author: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>
Date:   Wed Jul 23 13:33:18 2014 +0100

    igt/gem_userptr_benchmark: Fix for upstream ioctl number
    
    Hardcoding has upsides and downsides.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 70e6ed92abbca575f03f5a28402ef1eb9a6b97b8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 21 16:15:24 2014 +0100

    linux: Flush page/buffer cache before querying available memory
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 784b77257b023b5debb05dceb397b4ba6092ae21
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 21 09:12:43 2014 +0100

    igt/gem_userptr_blits: New tests, old issues
    
    Introduce a new test to keep that we clean up on process exit (if the
    userptr is busy or it has been gtt mmapped). This revealed a few bugs in
    the existing tests so clean those up.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit acca724b42252d608b18373be82a2dfa817d4225
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 21 07:57:25 2014 +0100

    Quieten valgrind
    
    Clear all the ioctl structs to zero before use as valgrind does not our
    ioctls and so complains about undefined bytes being passed to syscalls.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4f7d4dcae56e5f993f3f0b331556d4df3b0b33ab
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 21 07:54:29 2014 +0100

    Use SIGTERM in replace of SIGQUIT
    
    SIGTERM is the normal signal to use when instructing a process to exit.
    The only difference is that an unhandled SIGQUIT is meant to generate a
    coredump, which is not what we want, but in practice I encountered an
    issue where SIGTERM seemed to be deliverable more reliably than SIGQUIT
    (in tests using multiple signal helpers).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4d4f4b213ca95dad59bdf8080d7bb034aa2d307a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jul 19 11:59:42 2014 +0100

    igt/kms_flip: Skip if headless
    
    If there are no connectors, we cannot perform any pageflips and so we
    have nothing to test.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=73640&list_id=446828
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d0dc2c5b6a22f88d0c7288d134173320c58c8d50
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Jul 16 16:10:30 2014 -0300

    tests/pm_rpm: add dpms-mode-unset{,-non}-lpsp subtests
    
    These tests currently trigger WARNs on our Kernel. Let's make sure we
    fix the bug and it never comes back.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 8a3853c8121367d055acea2f7fb483095b971bf9
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Jul 17 11:19:04 2014 +0100

    core: increase the exit handler limit
    
    Increase the maximum number of exit handlers since some tests now
    require more that the previous limit.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=81320
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 428060c555526c988f4120718f8a000e59ac8c7b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jul 15 10:21:37 2014 +0200

    lib/igt.cocci: Add s/assert/igt_assert/
    
    People use it way too often, and it upsets the test library. The only
    valid places to use this is of igt infrastructure self-tests where you
    need to check something _without_ all the other abi use checks
    igt_fail and friends do. For those tests just #define an internal
    assert to hide it.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 43784baa1346a36f99a84a06cfc83c11b507c03e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jul 15 10:12:55 2014 +0200

    tests/gem_userptr_blits: Polish
    
    - Drop return values for test functions - we rely on the implicit
      control flow from igt_ checks.
    - Don't use assert directly, this upsets the test flow logic (and
      results in a CRASH result instead of FAIL).
    
    Cc: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit abbfecb01511d4f542302148b6240561c0269007
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Mon Jul 14 14:19:17 2014 +0100

    tests/gem_userptr_blits: Race between object creation and multi-threaded mm ops
    
    Userptr v23 was not thread safe against memory map operations and object
    creation from separate threads. MMU notifier callback would get triggered
    on a partially constructed object causing a NULL pointer dereference.
    
    This test excercises that path a bit. In my testing it would trigger it
    every time and easily, but unfortunately a test pass here does not guarantee
    the absence of the race.
    
    v2: Added explicit cancellation point and removed the stop flag.
        Use only igt_assert().
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3f50598fb7399bafed01f7b44f4a4f5a85a9f13c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jul 14 23:02:18 2014 +0200

    lib/igt_core: Fixup gtkdoc for logging functions
    
    Without the () gtkdoc won't recognize them as function references.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bcb2c65a14c37433598404bf4d8c3a8dfc7a842a
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jul 14 18:01:05 2014 +0100

    tests: Move gem_render_copy_redux to the list of multi-subtests tests
    
    Can we find a way to fix those for good? My preference goes to not
    having that single/multi split but always have a test being a list of
    one or more subtests.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 5a98fe9d4ae7431a9c65579dcc0ac32ff3e83adf
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jul 14 14:42:23 2014 +0200

    lib: Add argc/argv to igt_simple_init
    
    There's a pile of ideas around to add generally useful options like
    --debug to all igt tests. Or unify the runtime behaviour between
    simple and subtest tests a bit more.
    
    The first step to get there is to add argc/argv to igt_simple_init so
    that we can get at the argument list.
    
    Cc: Tim Gore <tim.gore@intel.com>
    Cc: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c7be53c7cb9aa7159ea316b56be119efd436ec17
Author: Tim Gore <tim.gore@intel.com>
Date:   Fri Jul 11 15:31:39 2014 +0100

    intel-gpu-tools: Dont build kms_force_connector if no cairo
    
    kms_force_connector is a new test that requires cairo.
    I have added it to the list of tests not to build on
    Android unless ANDROID_HAS_CAIRO is set.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b3d038a2b930724f1e1b45d1b149efa72ab2cbf0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 14 10:30:36 2014 +0100

    igt/gem_userptr_blits: Add missing RAM check before coherency tests
    
    -ENOCOFFE.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=79237
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 52ac9a4b57f20f2dc019a973237f2f97ddb0ebf3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 14 10:30:36 2014 +0100

    igt/gem_userptr_blits: Add missing RAM check before coherency tests
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=79237
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e74dd22ff89e007e637f16f661f06d4857a54224
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jul 12 09:06:39 2014 +0100

    igt/gem_close_race: Increase GPU load
    
    Increate the GPU load slightly, but mitigate the CPU overhead from
    clflushing by keeping the object alive using flink. This has also the
    side-effect of magnifying the desired busy-close race.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=71029
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b9c705f4da0b3817462c544e04bead926bfaf75d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jul 3 11:18:02 2014 +0100

    overlay: Baytrail needs a custom GPU frequency parser
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 98165d60bec04d258eeb9623550e58a8bc2f3906
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 11 23:36:15 2014 +0100

    igt/gem_close_race: Trim object size
    
    The challenge here is to race GPU activity versus the gem_close. Using a
    large objects makes the window of GPU activity larger - except on !llc
    systems we then incur massive overhead from clflush, likely destroying
    any race (due to mutex contention). And that mutex contention is
    amplified by the number of cores - bad news for Baytrail.
    
    Give up and make the objects smaller and hope that the test is run
    frequently enough to catch the race.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=71029
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f796d9958b2b85696b572a4c686c758eb0323c2b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 11 20:38:38 2014 +0100

    igt/gem_tiled_swapping: Speed up slightly
    
    The exercise is moving tiled objects in and out of swap. They are moved
    en-block and we test them all, therefore we can randomly test different
    bytes from each buffer to have reasonable coverage of all tiles. This
    shifts the bulk of the work from checking the tiled bo to kswapd.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cfc692232898d435b8fbfc7a69fda382ffc83315
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 11 20:38:30 2014 +0100

    configure: Only build overlay if dri2proto is present
    
    Instead of making dri2proto mandatory, disable intel-gpu-overlay if it
    is not installed.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8bf115ed9922e435cd26abd55639b089b285c8e0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jul 11 17:41:27 2014 +0200

    lib/igt.cocci: Add stanza for for_each_pipe
    
    Damien dodged this ...
    
    Also run the script while at it.
    
    v2: Don't just capture identifiers for pipe, but also expressions.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7bf0f7fc58b524f269981c873ca120dbe1c0ae67
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jun 20 00:14:52 2014 +0100

    lib: Extract gem_get_tiling() from a couple of tests.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 92a2b292df74408c42a3668c9f4d1a3aed194bfc
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jul 10 18:39:17 2014 +0100

    kms_rotation_crc: Use the igt_kms enum to encode the plane rotation
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit a58f8b93b41db4061b3a931feaae2f2c57fb8616
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jul 10 18:37:36 2014 +0100

    kms_rotation_crc: Remove unnecessary includes
    
    Turns out we didn't need most of them.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 1a754396673d99d51cd4d5821bee32d5f6425f4c
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jul 9 14:00:59 2014 +0100

    kms_rotation_crc: Always use the primary plane to compute the reference CRC
    
    Trying to disable the primary planes isn't exactly working at the
    moment. W/A it until it works.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 282f5605b02a2fc0f1c1547d59e39810962112dd
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jul 10 17:44:28 2014 +0100

    kms_rotation_crc: Document the two steps in prepare_crtc()
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 05f3897dc183a6ff409e146247e3f681610295cb
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jul 9 21:24:26 2014 +0100

    kms_rotation_crc: Don't compile the test on Android with no cairo support
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit f7a37f02f76521485fc7195b0d46e70fe7b2105e
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jul 9 21:23:27 2014 +0100

    kms_rotation_crc: Add the test to .gitignore
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 8767a794bb7a1584f02da49b85ecf849d64ff36b
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jul 9 12:03:50 2014 +0100

    kms_rotation_crc: Properly paint the whole frame buffer
    
    The -1 meant we weren't properly filling the whole fb.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 1bcac4dcb35c7035ecc11ed0ce8d195f4d977dfc
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 19:27:39 2014 +0100

    kms_rotation_crc: Don't commit with no fb set up
    
    prepare_crtc() was trying to commit a display state without any fb to
    scan out...
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit c4564e0a51dcbe6489dd02853908a8f4cdb6055a
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 19:24:24 2014 +0100

    kms_rotation_crc: Allow the sprite test to run even without universal planes
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 2eaa50f02e2cf9b8ed545eee333110cae2c552db
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 18:56:15 2014 +0100

    kms_rotation_crc: No need to test for NULL before freeing the pipe CRC object
    
    igt_pipe_crc_free() does that check already.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 05f90b03088f1b66dbfbb29b64aafe6b1ca164ae
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 18:51:25 2014 +0100

    kms_rotation_crc: Remove plane from the state
    
    having everythin in the data_t structure makes it hard to understand
    what should be set when. Replace that by explicit function parameters.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit fe8373d4376817de93d9bfc278005f2c67dcba50
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 18:48:35 2014 +0100

    kms_rotation_crc: Remove the sleep(2)
    
    One can inspect the output of the igt_kms API by setting
    IGT_DISPLAY_WAIT_AT_COMMIT=1.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit ffc954e739fb58b3ad4336a42a35c417df875253
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 18:46:57 2014 +0100

    kms_rotation_crc: Remove 'output' from the state
    
    This restore the balance between prepare_crtc() and cleanup_crtc(), both
    now taking the output as a parameter.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit b146e8128d8ca5327f2a8d306e9cdeab855d9639
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 18:45:16 2014 +0100

    kms_rotation_crc: Remove the test on output->valid
    
    This test is already done by the for_each_connected_output() macro.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit aef475b6f92522a0ca4bb58047f8015c5fd3f32e
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 18:43:44 2014 +0100

    kms_rotation_crc: Use for_each_pipe()
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 8843bef2808acca89222b12c16aa3f09b777c848
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 18:38:05 2014 +0100

    kms_rotation_crc: Remove now unnecessary defines
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 39abe7790f675a7d46cab2e04043b278615c0b0a
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 18:36:32 2014 +0100

    kms_rotation_crc: Use igt_plane_set_rotation()
    
    More code we can remove from the test.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 8facccfae4c05275ae2fb31bb1948b1fea9a7687
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 18:28:53 2014 +0100

    kms_rotation_crc: Don't store 'pipe' in the state
    
    This variable is only needed for prepare_crtc(), need need to put it in
    the test state.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit f7250d041d09b5fc83d8c98c3230696317c97cc7
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 18:27:10 2014 +0100

    kms_rotation_crc: Don't store rotate in the test state
    
    We don't use it anywhere else than the test function.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit eb81a922c7958e8680c95febca588314129ff790
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 18:20:51 2014 +0100

    kms_rotation_crc: Always disable the plane in cleanup
    
    There's no need for this check, always use set_fb(NULL) on the plane.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 13e979c7649eeb90fbd1abaaec61bcb3028acfc9
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 18:13:47 2014 +0100

    kms_rotation_crc: Unify the two tests
    
    The only difference is which plane we are talking about. So we really
    need one function here with a paramater.
    
    Well, almost. For the primary plane we need to ensure we support
    unviversal planes.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 063d22ecea7f3ffedb29a037f7b29694f22012ce
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 18:06:44 2014 +0100

    kms_rotation_crc: Just store the igt_plane_t in data
    
    Now that we're always using an igt_plane_t, we can get rid of ->type to
    use ->directly without those switch() or if()/else
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 0b3a30ee5a2668897e14c99dac8ba0b2ed7bb94d
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 18:01:59 2014 +0100

    kms_rotation_crc: Skip the tests if rotation is not supported
    
    This happens when the kernel lacks the rotation patches.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 5edab97f7fa646639335166912ec443d27735fad
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 17:51:07 2014 +0100

    kms_rotation_crc: Style issue: binary operators need spaces before and after
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 7ae5d9b34769581bea037fd35e5110e449cd58de
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 17:49:03 2014 +0100

    kms_rotation_crc: Use drm_plane from igt_plane_t
    
    So we don't need all that extra code to grab the drm_plane structure for
    the primary_plane.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 7e7c6254410c08a2d0785edefac65d158b2c3b6d
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 13:59:42 2014 +0100

    kms_rotation_crc: Remove useless comments
    
    A typical example of what comments shouldn't be:
    
     case DRM_PLANE_TYPE_PRIMARY: /* primary */
    
    Well, yes!, it's written just there, PRIMARY!
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 19743a14357fbc23a0e91d8302ed60a5690530df
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 12:59:03 2014 +0100

    kms_rotation_crc: Factor out common primary/sprite code in prepare_crtc()
    
    This results in less code, always a good thing. Also, we only really
    need one reference CRC.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 92b29b18ca62d1e1cadf338f1b883a49d3e63a01
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 12:49:03 2014 +0100

    kms_rotation_crc: Factor out the square drawing function
    
    Making function to the similar things is very common in programming.
    Let's do it once again.
    
    Cairo being a drawing library, it can be used to do the rotation!
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 78fac765238e4b21dd21cf2d105f26955a2f41d8
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 12:28:41 2014 +0100

    kms_rotation_crc: Fix style issue: single statement conditionals
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit de9c1687f91b8c24b78ca10edc7166743dca5024
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 12:26:38 2014 +0100

    kms_rotation_crc: Fix style issue: '{' at the end of lines
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 1025a114c6b188dab2680c577288372f5986e0e0
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 12:18:47 2014 +0100

    kms_rotation_crc: Require universal planes for the testing primary rotation
    
    Otherwise the test will fail instead of just skipping.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 143984a4f14ab22b5495411e006644caa7d6cb7a
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 12:10:44 2014 +0100

    kms_rotation_crc: Test the validity of the output first
    
    So we don't need code to unwind what we just did.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 9cf7e8d35fb331626a03992f68e9856eafe3997d
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 12:08:20 2014 +0100

    kms_rotation_crc: Update the copyright to have this year as well
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit bbd5e2ec6c7e9ae7f8eed94305e6640b4c3adc7f
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 12:02:42 2014 +0100

    kms_rotation_crc: Align a few wrapped lines to the opening brace
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit f00f767ceaa0ee790bbe7dd71d8210fa417483c1
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 11:58:43 2014 +0100

    kms_rotation_crc: Make more functions static
    
    More of the same. This time no need to move code around, just adding
    static.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 0506f106233552b7b19c89d851f004a5bf236828
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 11:55:20 2014 +0100

    kms_rotation_crc: Make check_plane_type() static
    
    Clearly, someone tried to solve the following warning:
      kms_rotation_crc.c:189:6: warning: no previous prototype for ‘check_plane_type’ [-Wmissing-prototypes]
    
    Without really understanding what was the warning about. Make
    check_plane_type() static and move it before its user to get rid of the forward
    declaration.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit e3611394cc72540cfa7c8cd39339bd405336ba1f
Author: Sonika Jindal <sonika.jindal@intel.com>
Date:   Wed Jun 18 14:27:27 2014 +0530

    tests/kms_rotation_crc: IGT for 180 degree HW rotation
    
    Testcase for 180 degree HW rotation
    
    Cc: sagar.a.kamble@intel.com
    
    Signed-off-by: Sonika Jindal <sonika.jindal@intel.com>

commit 753352cb3cdd3a2c71c4279913109b2e3e6e9b90
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 18:43:22 2014 +0100

    igt_kms: Introduce a for_each_pipe() macro
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 068efd8d9fc5ae02e928622a989d91b3e9c851d0
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 16:02:05 2014 +0100

    igt_kms: Add support for setting plane rotation
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit b2eb48576f2422591fe338e21a46757b2e331985
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 15:23:05 2014 +0100

    igt_kms: Add a way to query of the plane supports rotation
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 143c3a757521de907889803b011ac2bb308b4e1a
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 14:56:54 2014 +0100

    igt_kms: Provide a get_plane_property() shorthand
    
    So one doesn't have to write the plane type all the time.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 33842d594044f13d3079d961df2894921be10cc5
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jul 8 14:34:16 2014 +0100

    igt_kms: Factor out a generic get_property() out of get_drm_plane_type()
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit bebcb582fc40901a2aea4ab43fef3e273ad3b074
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jul 11 10:24:30 2014 +0200

    lib/igt_core: Don't log when listing subtests
    
    I've noticed some spam in the userptr list ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d3cfe28a1a4cc39044dbfd494370a903c39f2649
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Jul 11 10:47:43 2014 +0100

    README: update the test run instructions
    
    Describe using the new run-tests.sh script and also update the Piglit
    instructions now that using a symlink is no longer supported.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit ee62ca48e7cf0e2088e40227940677c9d4e675e0
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Jul 1 11:35:16 2014 +0100

    scripts: add a script to help run tests with Piglit
    
    Add a script to facilitate running the tests with Piglit by providing
    simplified options for listing, filtering and creating summaries of test
    runs.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit b81020526f1d08840f9ee87d31e958ddca4cce8a
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Jul 9 10:38:05 2014 +0100

    lib: allow the edid to be reset
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit eef768f283466b6d7cb3f08381f72ccf3951dc99
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Jun 18 14:28:43 2014 +0100

    tests: enable extra connectors in kms_flip and kms_pipe_crc_basic
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit b6ed9fb0d9a68cd3e07154b80e78e60778a4887b
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed May 28 14:06:01 2014 +0100

    lib: add igt_enable_connectors and igt_reset_connectors
    
    igt_enable_connectors forces connectors to be enabled where doing so is
    known to work well. igt_reset_connectors resets the force state on all
    connectors.

commit 13cd79c128b21d0de7d419d2ebfa8219d6190035
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue May 27 14:47:25 2014 +0100

    lib: add the ability to set an EDID data block on a connector
    
    Add a function to set an EDID data block on a connector and include a
    set of generic EDID blocks for testing.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 37ffb22d3cf684a6443d68698716dbd8428f495a
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri May 16 17:22:46 2014 +0100

    lib: add function to change connector states
    
    Add an API function and a test program to force a particular state on a
    connector.
    
    v2: mask the correct part of the minor number to get the card number (Chris
        Wilson)
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 9b6ae3cb6f7894b7c3e9eb89da5d89fef7f9ba91
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 11 10:38:32 2014 +0100

    igt/gem_userptr_blits: Verify that userptr bo work on unshared memory
    
    If the parent passes a userptr to some private memory, we expect to
    still be able to use the userptr in the child.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9344aa78e8ad1eb36e7cf17686907d4259d34235
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 11 10:16:54 2014 +0100

    igt/gem_userptr_blits: Shared memory allocations
    
    The forked tests allocate the bo (and thus for userptr, the memory) in
    the parent and pass them to all children. The difference for userptr is
    that we allocate system memory which the kernel then copies into each
    child. As the children need to access the memory for their checks, it
    does need to be shared - so allocate the userptr from shared memory!
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=80208
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f47ee31dd5d5a5099ed6f5d4a59a12a2f83c8cae
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 11 10:15:19 2014 +0100

    Wait for any pid in order to reap failure quicker
    
    When waiting for the forked tests, we can respond quicker to a failure
    (such as oom) by waiting for any child to exit rather than waiting for
    each child in order. Then when we see that a test failed, we can kill
    all other children before aborting.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3777d42303cf9d285a5337d71623d52402cb3021
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Jul 10 20:19:18 2014 +0200

    NEWS: Updates
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 282482db70188a3cbc653cebbf407715373255d1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Jul 10 20:04:19 2014 +0200

    tests: Run igt.cocci
    
    New stuff caught.
    
    Plus manually simplify the massive igt_fail_on_f(file == NULL, ...) to
    a simple igt_assert(file). We already print the errno (if
    applicapable) and the condition, which is equally informative.
    
    Cc: Yi Sun <yi.sun@intel.com>
    Cc: Matt Roper <matthew.d.roper@intel.com>
    Cc: Wendy Wang <wendy.wang@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 329f7a3734331cb57895a675d4fc87c261f338bd
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Jul 10 19:46:46 2014 +0200

    drv_module_reload: Unbind the right console driver
    
    We want to unbind fbcon, but only fbcon and only if it's there.
    
    This was broken by the recent patch in 3.16-rc to kick out the vgacon
    driver. I've forgotten to push out the relevant fix from the machine
    used to create the kick vgacon patches.
    
    v2: Dropped duplicated /, spotted by Damien.
    
    Reported-by: Damien Lespiau <damien.lespiau@intel.com>
    Cc: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 82e3d3379b7204bd81033c96b6279b537186ed85
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jul 10 14:03:37 2014 +0100

    drv_module_reload: Don't declare success when failing
    
    We weren't returning straight away when failing to unload the driver, so
    the test happilly executed gem_suspend and printed ""module successfully
    loaded again".
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit e16d4a2d68d163da81397ff7f1e00d063f0d700c
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jul 9 11:40:16 2014 +0100

    core: Apply the same treatment to the in errno message in __igt_fail_assert()
    
    Just like the it was done for the requirement message, display the errno
    message only if errno is set, and display it at the end of the assert
    message.
    
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 41454622506d2d060cba8c6f1cbe98a359936a2b
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jul 9 11:36:27 2014 +0100

    core: Only display the errno message if errno is set
    
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit b2d1a598aba4fe6b4128a0eb99f6da95a9fc70fc
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jul 9 11:32:22 2014 +0100

    core: Put the requirement failure messages together
    
    The errno message was a bit in the middle here, it makes more sense to
    group the messages about why the test requirement wasn't met together.
    
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 1e5570e28a399f57d025c36f9d3547683ba0c3d4
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Wed Jun 18 14:34:04 2014 +0300

    lib/gen6_render: removed duplicate defines
    
    Textually the same so no harm was done and no warnings
    from compiler either.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 6b986a2044a2708f900454d7e23fcd0bbf68879d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 9 20:45:54 2014 +0200

    tests/gem_render_copy_redux needs legacy drm nodes
    
    ... since it uses flink. Fixes a regression due to:
    
    commit 6d6dfcfb883818b40b58bac61cc72cab428a7a03
    Author:     David Herrmann <dh.herrmann@gmail.com>
    AuthorDate: Sun Mar 16 14:38:40 2014 +0100
    
        drm: enable render-nodes by default
    
    Cc: David Herrmann <dh.herrmann@gmail.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f705ef158ac7448d1f3c48f853da884ac548b603
Author: Tim Gore <tim.gore@intel.com>
Date:   Tue Jul 8 10:04:28 2014 +0100

    intel-gpu-tools: Dont build kms_univeral_plane if no cairo
    
    kms_univeral_plane is a new test that requires cairo.
    I have added it to the list of tests not to build on
    Android unless ANDROID_HAS_CAIRO is set.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c5b9615b83910f5a5c19fc84d938ea643f4e3009
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jul 9 11:05:06 2014 +0100

    kms_plane: Specify the pipe when grabbing reference CRCs
    
    When changing the pipe we were using, test_grab_crc() wasn't correctly
    setting the pipe constraint before waiting for the CRC on the pipe, and
    so we ended up waiting for a CRC on a pipe that wasn't lit up.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 8d60b8267e97f9b04e42912262c170c473d4f061
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jul 7 14:41:15 2014 +0100

    kms_plane: Add a debug message when grabbing the CRC of a colored fb
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit b5333b416f6a206a583684b0fba9265c0badbd6c
Author: Yi Sun <yi.sun@intel.com>
Date:   Fri May 23 08:28:47 2014 +0800

    kms_plane: Add panning test for primary plane
    
    Get CRCs of a full red and a full blue surface as reference.
    
    Create a big framebuffer that is twice width and twice height as the
    current display mode.
    
    Fill the top left quarter with red, bottom right quarter with blue
    Check the scanned out image with the CRTC at position (0, 0) of the
    framebuffer and it should be the same CRC as the full red fb
    Check the scanned out image with the CRTC at position (hdisplay,
    vdisplay) and it should be the same CRC as the full blue fb
    
    v2: Fix a few things here and there (Damien)
    
    Cc: Lei Liu <lei.a.liu@intel.com>
    Cc: Yi Sun <yi.sun@intel.com>
    Signed-off-by: Lei Liu <lei.a.liu@intel.com>
    Signed-off-by: Yi Sun <yi.sun@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit de538cfc7cd649216801829daffe602f4efee08a
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jul 7 13:30:41 2014 +0100

    kms_plane: Make the gathering of reference CRCs test agnostic
    
    We're going to add tests for panning. Both position and panning tests
    share the need to grab reference CRCs of single coloured fb, so let's
    separate this function from the position test.
    
    Cc: Lei Liu <lei.a.liu@intel.com>
    Cc: Yi Sun <yi.sun@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 202b2b9567606a016edf8293048ca4d67d9eba4f
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jul 7 15:17:56 2014 +0100

    pipe_crc: Make collect_crc() ensure the CRC looks somewhat valid
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 09196af60d0e7dc8b06ac78e5998d29bde66b065
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jul 7 15:16:51 2014 +0100

    pipe_crc: Warn if the CRC values is 0xffffffff
    
    This is what we read when the CRC logic in in a powered down well. We
    really don't want that to happen.
    
    In theory, it's possible 0xffffffff to be a valid CRC value, so I don't
    assert here.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 4f83c4efa85bdb1cfadf0e4b44588ec581f2682b
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jul 7 15:08:33 2014 +0100

    lib: Reset 'position_changed' after a drmModeSetCrtc()
    
    So the next commit won't trigger a drmModeSetCrtc() if the primary plane
    doesn't have any update needing it.
    
    This shouldn't be a problem at the moment as we don't allow the primary
    plane to be of a different size than the CRTC viewport, but it will most
    likely change in the future and we don't want to have that bug there.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 089e8d0a6b4b702ada745e948ae4303fd9457389
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed May 28 18:59:09 2014 +0100

    kms_pipe_crc_basic: Add a bit a debugging output
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 017f146c57c381a77bf3295f234744fae67e1a5c
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed May 28 17:55:06 2014 +0100

    kms_pipe_crc_basic: Make the number of CRCs a parameter
    
    Let's make the test a bit more generic and have the number of CRCs we're
    collecting a define so it can be changed easily.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit f18700b304cf86c030a2e7721c8f2c189805972f
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed May 28 17:40:05 2014 +0100

    kms_pipe_crc_basic: Cycle between 2 differently colored buffer
    
    Instead of just testing if the CRCs are stable, we also test 2 different
    fbs to make sure that the CRC is actually changing.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit dbb80a63b434f544e291a8a3997a511378f3b992
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed May 28 17:33:32 2014 +0100

    kms_pipe_crc_basic: Split the main test function a bit more
    
    Let's put the per-output test in its own function to get rid of 1 level
    of indentation. We'll need it to cycle through 2 different framebuffers
    to make sure we compute different CRCs if the fbs are different.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit c8b8f8abf60de1fdaafc798ebc6f73880a4e4225
Author: Matt Roper <matthew.d.roper@intel.com>
Date:   Mon Jul 7 09:08:29 2014 -0700

    lib/kms: Provide universal plane #define's
    
    There hasn't been a libdrm release containing the universal plane
    definitions yet, so add them to igt_kms to allow compilation to succeed
    in the meantime.
    
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 80a4a4fd43aff81dea8822ab4756ed99b7b13e66
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jul 7 17:54:30 2014 +0200

    tests/gem_exec_parse: use gem_uses_aliasing_ppgtt
    
    Suggested by Brad Volking.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d078035ca44dae1ec4e026fc294f4c0213027890
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jun 17 23:47:49 2014 +0200

    tests/kms_psr_sink_crc: Fix delayed gtt/cpu write tests
    
    - Drop the flip from the name - we don't do that. And the blt is
      really just to have a bit of fun with the domain tracking.
    
    - The real test is 1) dirty with gpu 2) grab 1st crc 3) set_domain for
      cpu access 4) wait a long time 5) dirty more with cpu 6) grab 2nd
      crc.
    
    This fixes failures since with the old tests we wouldn't have noticed
    the cpu rendering really.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 838f321b9ff1ef897ab032ecc3bbb56d8d65f53f
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jul 3 15:50:53 2014 +0100

    kms_universal_plane: Don't assert outside of fixtures/subtests
    
    Doing otherwise breaks listing the subtests. The test was throwing an
    error out when universal planes were disabled as well because of that.
    
    Cc: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 3f46e815589ac5c0e9ba2d5ab94e7eff09527a8d
Author: Matt Roper <matthew.d.roper@intel.com>
Date:   Mon Jun 30 16:44:30 2014 -0700

    tests/kms_cursor_crc: Call drmModeMoveCursor() directly
    
    We're calling drmModeSetCursor() to change the cursor image and never
    actually doing a display commit (aside from when we display the cursor),
    so call the move ioctl directly rather than igt_plane_set_position() to
    ensure the changes actually take effect.
    
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 07087ada293b18823ca10762bc7e28740bb0e6bf
Author: Matt Roper <matthew.d.roper@intel.com>
Date:   Mon Jun 30 16:44:29 2014 -0700

    tests/kms_cursor_crc: Combine data_t and test_data_t
    
    If a subtest fails, cleanup_crtc() never gets called and then the
    test_data_t structure for the test is lost, including the CRC file
    descriptor that we never got a chance to release; this causes all
    subsequent tests to fail with -EBUSY at igt_pipe_crc_new().
    
    The split between permanent data_t and temporary test_data_t doesn't
    seem to serve a purpose, so just combine the fields from both into
    data_t.  This will prevent us from losing the CRC filedescriptor so that
    we can properly close and reopen it after a failed test.
    
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 075d9eafdb4c1c64099d738a012fe3e063f08fee
Author: Matt Roper <matthew.d.roper@intel.com>
Date:   Mon Jun 30 16:44:28 2014 -0700

    tests/kms_universal_plane: Universal plane testing (v6)
    
    Add a simple test to exercise universal plane support.
    
    v6:
     - Update to new universal plane interface (commit parameter rather than
       state-changing function).  It should now be a lot more explicit which
       steps are being taken with legacy API's vs universal API's now.
    v5:
     - Check that we don't have more than one primary or cursor.  This will
       catch accidental calls to drm_plane_init() in the kernel where
       drm_universal_plane_init() was intended (these don't cause a compile
       warning due to type compatibility between enum and bool).
    v4:
     - Test disabling the primary plane explicitly when it has previously
       been implicitly disabled due to clipping.
     - Skip test if igt_pipe_crc_new() fails
    v3:
     - For testing while crtc is off, switch between several different
       primary plane fb's before reenabling the crtc.  This will help
       catch pin/unpin mistakes.
    v2:
     - Test that pageflips error out gracefully when the primary plane
       is disabled before the ioctl, or between ioctl and pageflip
       execution.
     - Test that nothing blows up if we try to disable the primary plane
       immediately after a pageflip (presumably before the pageflip actually
       completes).
     - Test that we can setup primary + sprite planes with the CRTC off and
       then have them show up properly when we enable the CRTC
       (drmModeSetCrtc with fb = -1).
     - Test that we can modeset properly after having disabled the primary
       plane
     - Test that proper error codes are returned for invalid plane
       programming attempts.
    
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 04067c3d5029f6ca28e6e14fffa47eecbd0e9c70
Author: Matt Roper <matthew.d.roper@intel.com>
Date:   Mon Jun 30 16:44:27 2014 -0700

    lib/kms: Drop primary plane windowing test from igt_plane_set_position()
    
    None of our hardware can support this today, but we'd like to be able to
    write tests that check that the kernel returns the proper error code
    when userspace tries it anyway.
    
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 794a9fd6bc24b0bcc9eb8a9a59c924fd5229f25c
Author: Matt Roper <matthew.d.roper@intel.com>
Date:   Mon Jun 30 16:44:26 2014 -0700

    lib/kms: Add universal plane support (v2)
    
    Add support for universal planes.  This involves revamping the existing
    plane handling a bit to allow primary & cursor planes to come from the
    DRM plane list, rather than always being manually added.
    
    v2: Don't drop fixed ordering of internal plane list.  Primary will
        always be index 0, cursor will always be last in internal plane
        list.
    
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 82bc03f392a12e5d48818faa99b02f9b2ab54483
Author: Matt Roper <matthew.d.roper@intel.com>
Date:   Mon Jun 30 16:44:25 2014 -0700

    lib/kms: Add igt_display_try_commit2()
    
    Add a new public API that will attempt a display commit, but will return
    an error code upon failure rather than failing the IGT test.  This is
    intended to allow igt tests to verify that the expected error codes are
    returned to userspace when invalid requests are issued.
    
    Note that with non-atomic programming, a single commit operation has
    several potential failure points internally; the first non-zero error
    code encountered will be returned immediately and no further programming
    will be performed by the commit.  It is the caller's responsibility to
    return to a sane state.
    
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 1c25547d48296c3058c9e1cc45b533746144a230
Author: Matt Roper <matthew.d.roper@intel.com>
Date:   Mon Jun 30 16:44:24 2014 -0700

    lib/kms: Add igt_display_commit2()
    
    Add a new commit interface, igt_display_commit2(), that allows tests to
    specify which programming API should be used to perform hardware
    updates.  COMMIT_LEGACY is the only option for now, but universal
    and atomic interfaces will be added as additional options in the future.
    
    igt_display_commit() remains unchanged for existing tests that wish to
    place the hardware in a specific state, but that don't care which API is
    used to achieve that state.  The legacy API will be used by default for
    now, but in the future we may decide to make the default API
    configurable via an environment variable.
    
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 2a3e212acc01742ac0a0f8bcf969e8a1ae2343b1
Author: Matt Roper <matthew.d.roper@intel.com>
Date:   Mon Jun 30 16:44:23 2014 -0700

    lib/kms: Track need for vblank wait locally
    
    The need to wait for a vblank after programming is due to the way we
    actually program the hardware.  Move need_wait_for_vblank out of the
    pipe and into a local variable in preparation for future programming
    styles (e.g., atomic pageflip) that will need different logic.
    
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 3cc60bab465f6d22b64a7034ce75e47dd2163e6e
Author: Matt Roper <matthew.d.roper@intel.com>
Date:   Mon Jun 30 16:44:22 2014 -0700

    lib/kms: Drop igt_pipe->need_set_{crtc, cursor}
    
    The "need" flags on igt_pipe simply mirror the fb_changed field of the
    primary/cursor planes.  Drop them and just use fb_changed instead.
    
    Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 67e29a30d5da57fb6764a23ba9f6aa31ea2c15a8
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Thu Jun 26 08:47:08 2014 -0700

    gem_exec_parse: require PPGTT as well
    
    The command parser may be present, but not active, so check for PPGTT
    before allowing this test to run.
    
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit 7ef537231a7bcc8deb49119034f9f6d403565ecc
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Jun 18 21:14:11 2014 +0300

    tests/gem_ctx_exec: Add reset-pin-leak subtest
    
    Add a subtest to make sure the kernel doesn't leak the vma
    pin_count for the last context on reset.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit fedb9b6342f6fba6f2efa926df1c4af2e8576a2b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jun 21 15:39:09 2014 +0100

    gem_mmap_gtt: Test mmaping less than the full object
    
    A bug was recently introduced into the kernel that happened when the vma
    was smaller than the object. Test that.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9f28ba5ef3fbc094f9da3324b79599bb2fe1993e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jun 21 15:38:31 2014 +0100

    gem_fence_upload: Improve the contended messages
    
    In the contended upload case, we did not distinguish between linear and
    tiled uploads.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8abca6fd14d2b0e3bf25461199dd8519803f9518
Author: Tim Gore <tim.gore@intel.com>
Date:   Fri Jun 20 11:28:12 2014 +0100

    intel-gpu-tools: add igt_core init func calls to some tests
    
    igt-core.h/c provides some macros and initialisation
    functions to support the tests but some of the single
    tests do not use these. Modifying these tests to use
    the igt_simple_main macro and igt_simple_init function
    is the first step towards a consistent command line
    across all tests.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 236d6bd2d36114fe402fe0e85d97b14cdf102963
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Jun 19 10:13:12 2014 +0200

    tests/gem_exec_big: Re-add gem_sync
    
    We need this to avoid hitting the slowpath and ending up with a
    presumed_offset == -1. Regression reported by PRTS, bisected to
    
    commit eb36fc993d7ae1988c80ba5b767989059c91d0ec
    Author:     Chris Wilson <chris@chris-wilson.co.uk>
    AuthorDate: Mon Jun 16 10:49:16 2014 +0100
    Commit:     Chris Wilson <chris@chris-wilson.co.uk>
    CommitDate: Mon Jun 16 10:51:02 2014 +0100
    
        igt/gem_exec_big: Update to new igt_assert_eq
    
        Use igt_assert_eq for better test output on failures.
    
        Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    
    v2: igt_warn_on unexpected reloc offsets.
    
    Cc: shuang.he@intel.com
    Acked-by: Chris Wilson <chris@chris-wilson.co.uk> (on irc)
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1b1f4b16a25b6415187fd2b0906ae730e9ca8d23
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jun 17 23:06:59 2014 +0200

    tests/gem_mmap: Add short mmap test
    
    Blows up with the current full-object prefault code.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 13b3e5f3e02a82e5d064e1f4f52eebb91c380819
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jun 17 21:22:05 2014 +0200

    Paritially revert "lib: add missing includes to headers"
    
    This reinstates the #includes for lib/debug.h since without that the
    shader debugger fails to build. You need to manually enable it with
    ./autogen.sh --enable-shader-debugger and the fail only happens when
    running a clean build with
    
    $ git clean -dfx && ./autogen.sh --enable-shader-debugger && make
    
    I have no idea what breaks, but this restores the build.
    
    Reported by Ben Widawsky.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 15d93d0a91234e33c4e40b72204258ffbcb2fe4c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jun 17 18:52:08 2014 +0200

    tests: Move gem_userptr_blits to the right Makefile target
    
    We need to be able to check for this somehow ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d123de68587ef1c558bb9be7a1fd980cba58d748
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Apr 30 18:15:36 2014 +0200

    tests/Makefile.sources: Remove empty last line
    
    Actually just whitespace change to make sure the new built rules for
    tests/*.txt pick up the changes properly everywhere.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 748a46dcb994c8c97d32faecc1df7e03c9ec7960
Author: Wendy Wang <wendy.wang@intel.com>
Date:   Mon Jun 9 16:36:47 2014 +0800

    Fixed the review issues for pm_rc6_residency IGT case
    
    Why need add rc6_residency_counter subtest case:
    RC6 feature support residency counter,from power consumption aspect,
    the counter closer to 1,the better.If the counter is < 0.9, the residency
    is not good and will impact power consumption value, if the counter is  > 1,
    sysfs file is inaccurate.
    
    Attach the test result message:
    root@x-bdw05:/GFX/Test/Intel_gpu_tools/intel-gpu-tools/tests# ./pm_rc6_residency
    IGT-Version: 1.6-g9a70e29 (x86_64) (Linux: 3.15.0-rc7_drm-intel-nightly_0a37b5_20140604+ x86_64)
    Subtest rc6-residency-check: SUCCESS
    This machine doesn't support rc6pp
    This machine doesn't support rc6p
    The residency counter : 0.987000
    This machine entry rc6 state.
    Subtest rc6-residency-counter: SUCCESS
    
    root@x-bdw05:/GFX/Test/Intel_gpu_tools/intel-gpu-tools/tests# ./pm_rc6_residency --run-subtest rc6-residency-counter
    IGT-Version: 1.6-g9a70e29 (x86_64) (Linux: 3.15.0-rc7_drm-intel-nightly_0a37b5_20140604+ x86_64)
    This machine doesn't support rc6pp
    This machine doesn't support rc6p
    The residency counter : 0.987000
    This machine entry rc6 state.
    Subtest rc6-residency-counter: SUCCESS
    
    root@x-bdw05:/GFX/Test/Intel_gpu_tools/intel-gpu-tools/tests# ./pm_rc6_residency --run-subtest rc6-residency-check
    IGT-Version: 1.6-g9a70e29 (x86_64) (Linux: 3.15.0-rc7_drm-intel-nightly_0a37b5_20140604+ x86_64)
    Subtest rc6-residency-check: SUCCESS
    
    root@x-bdw05:/GFX/Test/Intel_gpu_tools/intel-gpu-tools/tests# ./pm_rc6_residency --list
    rc6-residency-check
    rc6-residency-counter
    
    Run as non-root
    [haha@x-pk home]$ ./pm_rc6_residency
    IGT-Version: 1.6-g18d2130 (x86_64) (Linux: 3.13.0-rc3_drm-intel-nightly_639e4d_20131210+ x86_64)
    No intel gpu found
    Subtest rc6-residency-check: SKIP
    Subtest rc6-residency-counter: SKIP
    
    Run on non-intel platform
    [root@x-pk5 home]# ./pm_rc6_residency
    IGT-Version: 1.6-g18d2130 (x86_64) (Linux: 3.13.0-rc3_drm-intel-nightly_639e4d_20131210+ x86_64)
    Test requirement not met in function read_rc6_residency, file pm_rc6_residency.c:77:
    Last errno: 2, No such file or directory
    Test requirement: (!(file))
    Subtest rc6-residency-check: SKIP
    Subtest rc6-residency-counter: SKIP
    
    Signed-off-by: Wendy Wang <wendy.wang@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f4a7bd3b03418c140b7de76d1f35ea553a735e33
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jun 16 23:54:43 2014 +0200

    Revert "Revert "Add rc6_residency_counter subtest""
    
    This reverts commit 35554a1bcaaea55c1cfa88c0176c58d2fb3b8013.
    
    Apparently people are too unhappy with this.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d96490af9955875d2ca1a04219d5ef928fb07c94
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jun 16 16:21:35 2014 +0100

    lib: add missing includes to headers
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5874daddc4976ba3756b6e37466a0205b2359048
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jun 16 16:12:21 2014 +0100

    lib: ensure igt_display_init clears the memory for the display struct
    
    Add the call to memset that was accidentally removed in:
    
    commit 1e9e1baba389fe498be12390ceeeacb1d141a5cf
    Author: Daniel Vetter <daniel.vetter@ffwll.ch>
    Date:   Thu Mar 13 17:20:05 2014 +0100
    
        lib/igt_kms: rip out custom verbose loggin support
    
        Instead just piggy-pack on top of igt_log.
    
        Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5f89d6f41fd5c4f6a1cd3b6da708b99a8efe8e64
Author: Tim Gore <tim.gore@intel.com>
Date:   Mon Jun 16 09:38:09 2014 +0100

    intel-gpu-tools: remove the --cmd option from gem_seqno_wrap
    
    gem_seqno_wrap was not being built on Android because it uses
    wordexp which is not in Bionic.
    After discussion with Mika Kuoppala (the test author) it seems
    that wordexp was used to implement the --cmd option that was
    really only intended for use during development of the test and
    is no longer needed. So I have removed support for this option
    and enabled this test for Android.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Reviewed-by: Mika Kuoppala <mika.kuoppala@intel.com>
    [danvet: Resolve conflicts with cocci run.]
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit eb36fc993d7ae1988c80ba5b767989059c91d0ec
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jun 16 10:49:16 2014 +0100

    igt/gem_exec_big: Update to new igt_assert_eq
    
    Use igt_assert_eq for better test output on failures.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6c4b93fdbc879f95a9843f0ad7a959265b6783f1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jun 16 09:01:52 2014 +0100

    igt/gem_exec_parse: Convert to igt_assert_eq
    
    For better test output on failure.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=80083
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8c1566e2d9cdcdaa94728516b8e6839545fc396c
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Oct 29 18:17:39 2013 +0200

    tools/intel_display_poller: Add a new tool that will poll various display registers
    
    intel_poller can be used to poll various display registers
    (IIR,scanline/pixel/flip/frame counter, live address, etc.).
    
    It can be used to determine eg. at which scanline or pixel count certain
    events occur.
    
    v2: s/intel_poller/intel_display_poller/
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 71874f4a52878caabe5c2ccd499bab41633fa156
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Jun 10 21:28:10 2014 +0300

    tools: Add intel_iosf_sb_{read,write} tools
    
    Add generic tools to poke at IOSF sideband. The user needs to
    manually specify SB port as well as the register.
    
    TODO: Maybe add symbolic names for the units? Would avoid having
    to trawl the docs for the magic hex value.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit a49906e26616c405d41631d5e1b0be0a366d2c30
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Jun 11 19:21:27 2014 +0300

    lib/igt_debufs: Add IGT_NO_FORCEWAKE environment variable
    
    If IGT_NO_FORCEWAKE is set, skip the forcewake open. Useful when you
    want to poke at register without otherwise disturbing the GPU.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit aba3582bb402b5cb5e48d81c5e32231fa42634d7
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Jun 11 19:20:19 2014 +0300

    lib/igt_debugfs: Don't fail if debugfs is already mounted
    
    Remove the igt_assert() from the debugfs mount. It will fail if debugfs
    is already mounted. With the assert in place it's very annying to use
    igt without i915 loaded (eg. to dump BIOS configured registers).
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit c9c554594ef074b9149f84da8fb42c9ea629c027
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jun 13 18:27:59 2014 +0200

    tests: run igt.cocci
    
    Re-run with correct igt_fail rules. Again manually fixup missing
    includes for igt_core.h.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 87042d671fba3c76786171a8037515979e977d9d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jun 13 16:23:10 2014 +0200

    NEWS: Mention igt.cocci
    
    And also pimp the spatch file itself with usage hints.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2347e6d21eb1431479358955007a4c78430173d8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jun 13 18:01:33 2014 +0200

    lib: Introduce igt_fail_on/_f
    
    I've yet again totally screwed things up (this time automated with
    cocci even, but not yet pushed luckily). So finally add a new version
    for easier conversion and adjust the cocci script.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 46811c849a79892f6d0a63ae5425e59989244978
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jun 13 15:45:30 2014 +0200

    lib/igt.cocci: Also add rule to use igt_warn_on_f
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9eb9345f9949f26bd4a5cae33a10809c5d05fe21
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jun 13 15:45:12 2014 +0200

    lib/igt.cocci: Convert abort() to igt_fail
    
    abort should only be used for internal library checks - using
    abort() we get a "crash" result, using igt_fail we get "fail"
    in piglit.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bde52d1a08a7aeb9afe1e6cf642ba764674059da
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jun 13 15:41:28 2014 +0200

    lib/igt.cocci: Conversion to igt logging
    
    Also update old hunks to match on igt logging instead of fprintf.
    
    v2: Don't forget about perror.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6b73a9a2887fb45fc43b75c918daf0b50d2a44b9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jun 13 15:32:50 2014 +0200

    tests: Don't use stderr for informational messages
    
    These should go to stdout instead. The next patch will clean this up
    with cocci, so no change from fprintf(stdout, to printf( here.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 652e5441504ddded9d6b138cd6df3447ed9b2e74
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jun 13 15:19:09 2014 +0200

    tests/pm_psr_sink_crc: Fix longjmp fun
    
    igt_fixture and igt_subtests use longjmp/setjmp internally, which
    means local variables at the same stack frame are at risk. Best
    practice is to move them out right in front of the igt_main block.
    
    It would be awesome if someone could come up with a cocci patch to
    auto-fix this, but unfortunately my attempts failed.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ac0e606677823d27836708300a2c5ee05d24b458
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jun 13 18:03:50 2014 +0200

    Revert "tests: Run igt.cocci over tests"
    
    This reverts commit 6903ab04e5f9048e3932eb3225e94b6a228681ba.
    
    The igt_assert conversion rule is broken and doesn't invert the check
    as it should.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bfede4ed2b401069c3130399ff5c2580e6ccbf77
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jun 13 15:46:33 2014 +0100

    igt/gem_fence_upload: Exercise contention on the fault handler
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6903ab04e5f9048e3932eb3225e94b6a228681ba
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jun 13 11:06:18 2014 +0200

    tests: Run igt.cocci over tests
    
    Cocci is awesome
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 66b31b6e196bdb869a7bd3e29d86dd9712606601
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jun 13 11:16:28 2014 +0200

    lib: add igt.cocci
    
    Small start but useful to collect refactorings/simplifications for
    common igt patterns. Please add more if you stumble over some so that
    we can occasionally run this to clean up the tests.
    
    I haven't figured out yet how to do the assert_cmpint->assert_eq
    transformation.
    
    Run this with
    
    spatch --sp-file lib/igt.cocci --in-place tests/*.c
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3448b5ad4b2536c1eca3ecc5060739ea8dbec1e5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jun 13 10:46:55 2014 +0200

    lib/igt_core: Add igt_assert_eq
    
    Suggested by Chris Wilson. Not yet rolled out since I'm trying to use
    cocci for this.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b4c1f2ea0fc3fc3e361c26a83dc9468682a3c8e0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jun 13 10:23:01 2014 +0200

    tests/prime_self_import: Use igt_assert_cmpint
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ea0116cdcd36f208ff7b5312e7684db85f395de3
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jun 13 10:18:24 2014 +0200

    tests/kms_psr_sink_crc: Skip properly
    
    Aside: The test has way too many bool return values that are then
    always checked with igt_assert. Imo cleaner to switch to a more
    declarative approach and shovel the igt_assert/require into those
    functions instead.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=79962
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c1192c4db48f4329a97d2e72dd8d97920164c63a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jun 12 17:01:02 2014 +0100

    igt/gem_fence_upload: Throw some threads into the mix
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d242f2e2a31fdc9887cc34cda0eeb92f7dc70d20
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jun 12 11:50:01 2014 +0100

    igt/gem_mmap_gtt: Exercise concurrent pagefaulting
    
    This should hit the BUG inside remap_pfn_range in
    
    commit c5158fabeaf53ed2c614c3333aaa4b3cce80f500
    Author: Chris Wilson <chris@chris-wilson.co.uk>
    Date:   Tue Jun 10 12:14:41 2014 +0100
    
    [   27.767634] kernel BUG at mm/memory.c:2315!
    [   27.767655] invalid opcode: 0000 [#1] SMP
    [   27.767679] Modules linked in: cpufreq_userspace cpufreq_powersave cpufreq_stats cpufreq_conservative binfmt_misc nfs lockd fscache sunrpc hid_generic usbhid hid x86_pkg_temp_thermal microcode i2c_i801 lpc_ich mfd_core battery acpi_cpufreq evdev processor ac loop ehci_pci xhci_hcd ehci_hcd sr_mod usbcore cdrom usb_common fan thermal
    [   27.767872] CPU: 3 PID: 912 Comm: gem_mmap_gtt Not tainted 3.15.0-rc8+ #953
    [   27.767903] Hardware name: Intel Corporation Shark Bay Client platform/Flathead Creek Crb, BIOS HSWLPTU1.86C.0109.R03.1301282055 01/28/2013
    [   27.767956] task: ffff880448415010 ti: ffff88044d22c000 task.ti: ffff88044d22c000
    [   27.767988] RIP: 0010:[<ffffffff81130734>]  [<ffffffff81130734>] remap_pfn_range+0x2a4/0x400
    [   27.768033] RSP: 0000:ffff88044d22fc28  EFLAGS: 00010282
    [   27.768057] RAX: 0000000000020002 RBX: 00000000000a3b57 RCX: ffff880448b73fe8
    [   27.768088] RDX: 0000000000000002 RSI: ffff880000000000 RDI: ffffea000efe8158
    [   27.768119] RBP: ffff88044d22fcd8 R08: 00007fc7b57fe000 R09: 00007fc7b57fe000
    [   27.768150] R10: 00000000000001fd R11: 0000000000000a9a R12: ffffea000efe8128
    [   27.768180] R13: 0000000000000001 R14: 00007fc7b57fd000 R15: 800000000000002f
    [   27.768212] FS:  00007fc7977fc700(0000) GS:ffff88045e380000(0000) knlGS:0000000000000000
    [   27.768246] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
    [   27.768272] CR2: 00007fc7b67fd000 CR3: 000000044866c000 CR4: 00000000001407e0
    [   27.768303] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
    [   27.768333] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
    [   27.768363] Stack:
    [   27.768374]  ffff880448bbb6f8 00000000ffffffff 00007fc7b57fdfff 00007fc7b57fdfff
    [   27.768414]  00007fc7b57fe000 ffff88044866c7f8 ffff8804496b08f0 00007fc7b57fdfff
    [   27.768454]  fffffff8038ee35a 0000000000001000 ffff88044c208180 00007fc7b57fe000
    [   27.768494] Call Trace:
    [   27.768511]  [<ffffffff81365277>] i915_gem_fault+0x337/0x340
    [   27.768538]  [<ffffffff8112d3c4>] __do_fault+0x34/0x70
    [   27.768565]  [<ffffffff8109088e>] ? wake_up_process+0x1e/0x40
    [   27.768592]  [<ffffffff8113015c>] do_shared_fault.isra.96+0x2c/0x1f0
    [   27.768623]  [<ffffffff81502405>] ? rwsem_down_read_failed+0xe5/0x130
    [   27.768654]  [<ffffffff810a2519>] ? __rwsem_do_wake+0x129/0x160
    [   27.768682]  [<ffffffff81131085>] handle_mm_fault+0x2b5/0xb80
    [   27.768712]  [<ffffffff81270a64>] ? call_rwsem_down_read_failed+0x14/0x30
    [   27.768745]  [<ffffffff81036c67>] __do_page_fault+0x167/0x4c0
    [   27.768774]  [<ffffffff8109a540>] ? pick_next_task_fair+0x700/0x870
    [   27.768804]  [<ffffffff814ff23b>] ? __schedule+0x27b/0x860
    [   27.768831]  [<ffffffff81036fec>] do_page_fault+0xc/0x10
    [   27.768857]  [<ffffffff815034a2>] page_fault+0x22/0x30
    [   27.768881] Code: 4d 85 ed 49 0f 44 d7 80 cc 02 49 81 c6 00 10 00 00 48 83 c3 01 48 83 c1 08 48 09 d0 48 89 41 f8 4d 39 f0 74 32 48 83 39 00 74 c4 <0f> 0b 66 2e 0f 1f 84 00 00 00 00 00 48 39 37 75 63 48 8b 45 c8
    [   27.769081] RIP  [<ffffffff81130734>] remap_pfn_range+0x2a4/0x400
    [   27.769113]  RSP <ffff88044d22fc28>
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8a23da43d4eb502375620b53d11d36797447a309
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Jun 11 17:13:39 2014 +0100

    docs: remove unused annotation glossary include
    
    API annotations are not used anywhere in the documentation, so the
    annotation glossary is not built.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit cd714f93e833284b1710e58d21240a3e21adec2a
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Jun 11 15:32:14 2014 +0100

    docs: always rebuild the sections file
    
    Always rebuild the sections file since it currently doesn't contain any
    custom modifications.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit bbd014e1632f4e906bb9c2386174eca8fa263bac
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Jun 11 11:46:39 2014 +0100

    docs: add private headers to IGNORE_HFILES
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 52a3a2e205da1679487a99699713dee240437255
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jun 9 17:23:21 2014 +0100

    lib: various documentation fixes
    
    Fix some documentation comments and mark some struct members private.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 25663d9fe3d6e762132022e1af651a99f9b928a3
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jun 9 14:45:44 2014 +0100

    gitignore: add missing files and keep lists sorted
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 3dd7ad14d3322a727365745e94cbe46975acc423
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jun 9 14:05:42 2014 +0100

    README: update the section on modifying and rebuilding documentation
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 1e5c8780d03f78c17963108896354296f7313c61
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jun 9 14:02:04 2014 +0100

    lib: remove /** from comments that are not API documentation
    
    These comments are not gtk-doc comments, so replacing /** with /*
    prevents any gtk-doc warnings.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 6d28f6a91a7a6db36a58e1fa81ef6d8358104b26
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon Jun 9 13:35:21 2014 +0100

    README: update piglit instructions
    
    Piglit now has a top level "piglit" command and the location of the
    tests can now be read from an environment variable.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit c54ee9819a4aa9ba521f67e4a58ea2de87dc7485
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Jun 6 15:28:50 2014 +0100

    quick_dump: read the architecture files for items to add to EXTRA_DIST
    
    Each architecture file contains a list of the text files it requires, so
    use this to add to the list of files to distribute.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit e10c9a730d840d4e1867374e41a58f97d6086371
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Jun 12 09:05:55 2014 +0200

    tests/gem_fence_upload: Fix test wrapper
    
    - tests with subtests need to be in the _M target for correct
      enumeration.
    
    - No need for igt_exit when using the igt_(simple_)main wrappers.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 618aca1fb9649012910acbaa79a917ff4f3ff19b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Jun 12 09:04:20 2014 +0200

    lib/intel_os: Spelling fix
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c62ce339f2d57e4be632d9bcea785ff087326bd9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Feb 3 15:52:00 2014 +0000

    tests: add gem_fence_upload
    
    This test demonstrates the performance cliff clients face when they
    unwittingly use too many fenced surfaces in a looped upload.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 27d37a1f1034630a62bfbbb0235db1b0bcea98ac
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Wed Mar 19 22:43:51 2014 -0300

    tests/kms_psr_sink_crc: Create test to test PSR by checking panel CRC.
    
    v2: Wait psr enable with timeout and more subtest added.
    v3: Add wait for v_blank leeting test more reliable and preparing to
        add Baytrail per-pipe tests.
    v4: Call busy_ioctl on mmap_gtt to match the real usage and remove the need
        of inactivate on set_domain, what was semantically wrong.
    v5: Adding more test cases to cover mmap_gtt with and without followed by
        busy ioctl and also without busy and waiting 10 seconds between
        set_domain and actual write.
    v6: rebase after kms_plane added and debugfs api changed.
        Plus adding more test cases.
    v7: Some rework and sprite test added
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>

commit 8c4dd1d898aa8ff9cea63d574be575a8f9325ff7
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri May 31 15:33:21 2013 +0100

    list-workarounds/chv: Add Cherryview to the list of valid platorms
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 35554a1bcaaea55c1cfa88c0176c58d2fb3b8013
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jun 10 11:05:16 2014 +0200

    Revert "Add rc6_residency_counter subtest"
    
    This reverts commit 9a70e29f8380c2fc6f9b43757c68e24bf2619061.
    
    Patch needs polish and after a quick irc discussion Ben&I agreed that
    the revert is in order.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4e9df4fe5fef283c23e62fd7348fae4943a9fa6b
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Jun 10 14:51:44 2014 +0300

    tests/kms_fbc_crc: Update blit code for BDW
    
    Switch to XY_COLOR_BLT from COLOR_BLT and use the appropriate
    macros to make the code work on BDW.
    
    Also make the blit 8bpp instead if 16bpp. 8bpp is what it was
    supposed to use all along.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=76307
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 210d20f413626321c0c1650b97d1cb0f0b400c2d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jun 10 14:29:00 2014 +0100

    API docs for intel_check_memory()
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0617b0b3b897f7a070466af400da55e2b234e9be
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jun 10 08:18:37 2014 +0200

    NEWS: post-release bump

commit 32bb5d9f150bc953dbed4636ded2758be03a739c
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Mon Jun 9 11:30:15 2014 -0700

    bump version to 1.7 and add the release date
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>

commit 82ad15fd1040a0457ebe22edabfaa69c44577412
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Mon Jun 9 11:15:47 2014 -0700

    Fix make distclean by fixing includes of version.h
    
    Actually only the igt_core was breaking the make distcheck,
    but let's make it consistent and let the code cleaner.
    
    Credits-to: Reviewed-by: Ben Widawsky <ben@bwidawsk.net>
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>

commit 5a856e11fc84ec9e087aa1c52a492eb81b2c1985
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Mon Jun 9 10:48:10 2014 -0700

    null_state_gen: Fix Makefile.am for make distcheck

commit 9bddb5eebd9819c4892fec72d6d5b6e2e2496b8b
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Mon Jun 9 10:47:13 2014 -0700

    quick_dump: Fix vlv file names on Makefile.am

commit 18d2130110331e45423dff96aeec3ea802fa0857
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jun 6 08:43:08 2014 +0100

    igt/gem_evict_alignment: Fix the memory limits checking
    
    We actually allocate twice as many bo as needed to fill the aperture to
    cause ENOSPC, but the entire payload has to still fit into RAM.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=75138
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 39329479a51768e64cf710bc14b50803446e554d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jun 6 08:43:08 2014 +0100

    igt/gem_evict_alignment: Fix the memory limits checking
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=75138
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 033c400e9bd53f95cccff3524c79a298c81bd3da
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jun 6 08:40:36 2014 +0100

    igt/gem_evict_alignment: Remove obsolete skip on gen8+
    
    If the BLT commands, aren't fixed yet, they should be. ASAP.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9a70e29f8380c2fc6f9b43757c68e24bf2619061
Author: Wendy Wang <wendy.wang@intel.com>
Date:   Thu Jun 5 10:27:42 2014 +0800

    Add rc6_residency_counter subtest
    
    Move rc6_residency_check to subtest, add new rc6_residency_counter subtest
    for pm_rc6_residency IGT case.
    
    Test results run on platforms show as below:
    On HSW
    ---------------------------------------
    [root@x-hswu opt]# ./pm_rc6_residency
    IGT-Version: 1.6-g35b31df (x86_64) (Linux: 3.15.0-rc3_drm-intel-nightly_0791a3_20140520+ x86_64)
    Subtest rc6-residency-check: SUCCESS
    This machine doesn't support rc6pp
    This machine doesn't support rc6p
    This machine entry  rc6 status.
    The residency counter : 0.999667
    Subtest rc6-residency-counter: SUCCESS
    
    On IVB
    ----------------------------------------
    [root@IVB tests]# ./pm_rc6_residency
    IGT-Version: 1.6-g35b31df (x86_64) (Linux: 3.13.6_20140318+ x86_64)
    Subtest rc6-residency-check: SUCCESS
    This machine entry  rc6p status.
    The residency counter : 0.997000
    Subtest rc6-residency-counter: SUCCESS
    
    On BYT
    ----------------------------------------
    root@x-byt:/opt# ./pm_rc6_residency
    IGT-Version: 1.6-g0d39021 (x86_64) (Linux: 3.14.0_kcloud_ceabbb_20140521+ x86_64)
    Subtest rc6-residency-check: SUCCESS
    This machine doesn't support rc6pp
    This machine doesn't support rc6p
    The residency counter : 1.144333
    Test assertion failure function rc6_residency_counter, file pm_rc6_residency.c:131:
    Last errno: 0, Success
    Failed assertion: counter_result <=1
    Debug files must be wrong,
    Subtest rc6-residency-counter: FAIL
    
    On BDW
    ---------------------------------------
    [root@x-bdw01 opt]# ./pm_rc6_residency
    IGT-Version: 1.6-g0d39021 (x86_64) (Linux: 3.15.0-rc5_drm-intel-nightly_367653_20140521+ x86_64)
    Subtest rc6-residency-check: SUCCESS
    This machine doesn't support rc6pp
    This machine doesn't support rc6p
    The residency counter : 0.994333
    This machine entry rc6 state.
    Subtest rc6-residency-counter: SUCCESS
    
    Signed-off-by: Liu, Lei A <lei.a.liu@intel.com>
    Signed-off-by: Wendy Wang <wendy.wang@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit b428f24f7caa1286cdcf0794078547f3b27e69b3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jun 5 13:33:25 2014 +0100

    lib: Add debug to memory limits checks
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a1a8aa16fb4e27a267f4ac12883419114a020dd7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jun 5 13:19:39 2014 +0100

    igt/gem_evict_everything: Compute number of surfaces to saturate the aperture
    
    The goal is to only fill the aperture, not all of memory, so fine-tune
    the computed number of surfaces, hopefully avoiding an integer overflow
    in the process.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=79573
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5141b21f915ce7e857bcacbd1eb4ec9eebf3fe93
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Jun 5 10:28:09 2014 +0200

    lib/igt_debugfs: Fix spelling docs
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit badb026ae0943d401a944d0d0fc09a7977315fe5
Author: Kenneth Graunke <kenneth@whitecape.org>
Date:   Tue Jun 3 14:52:30 2014 -0700

    rendercopy/gen8: Also emit 3DSTATE_WM_DEPTH_STENCIL.
    
    rendercopy was failing to emit 3DSTATE_WM_DEPTH_STENCIL, which is a new
    packet on Broadwell.  Mesa emits this packet.
    
    This appears to fix various tests on a fresh boot, when Mesa has never
    run.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=78890
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=78891
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=78935
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=78936
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=78937
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=78938
    Signed-off-by: Kenneth Graunke <kenneth@whitecape.org>
    Reviewed-by: Ben Widawsky <ben@bwidawsk.net>
    Tested-by: Guo Jinxian <jinxianx.guo@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit 11e62a3927e415f88dae3519578d9bba8def3128
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed May 28 20:05:59 2014 +0300

    tests/kms_flip: Move EBUSY to a new busy-flip subtest
    
    The EBUSY checking is very fragile currently in case there's any kind
    extra delay in the test loop. At least the flip-vs-rmfb fails reliably
    on my IVB.
    
    So to make the test less fragile remove the EBUSY check from all the
    current flip tests, and instead add a specific busy-flip test. To
    better guarantee that we get the EBUSY add a blocking vblank wait just
    before we issue the first flip. This maximizes the time we have to
    submit two flips during one frame.
    
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit ddf92db9147375a4d0fc3ee861519bc1d6b0214b
Author: Tim Gore <tim.gore@intel.com>
Date:   Wed Jun 4 09:32:54 2014 +0100

    intel-gpu-tools: move kms_fence_pin_leak to single test list
    
    In Makefile.sources, kms_fence_pin_leak was in the "Multi" test list,
    ie tests with subtests, whereas it is actually simple/single test.
    This was confusing the Android script for enumerating tests.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1451df1cb692bf04e5733b5d9ea00d0757f257a4
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Jun 3 16:52:48 2014 +0300

    quick_dump: increase reg name column width
    
    Needed by the new long audio register names.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Reviewed-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit ea43f5163a01d9bb2b7fd23dd6316c9f863ded86
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Jun 3 16:04:47 2014 +0300

    quick_dump: vlv: remove redundant base file specifications
    
    The registers in these files are included in the dumps for all platforms
    by default, so no need to specify them explicitly.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Reviewed-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 24cd3843cb222cc17f446315b0bce813a14758c8
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Jun 3 15:44:27 2014 +0300

    quick_dump: vlv: move flisdsi register group to its logical place
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Reviewed-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 75b921688d0105743ef14783eed4ceda9d01baeb
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Jun 3 15:55:11 2014 +0300

    quick_dump: vlv: add missing dpio phy registers
    
    Also move the phy register block to its logical place.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Reviewed-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 9da08fed032a8560959ff306cd862d44f26ed46f
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Jun 3 14:26:30 2014 +0300

    quick_dump: vlv: add missing display registers
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Reviewed-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 92378d3b778c408999a3dd84698038e681692fa0
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Jun 3 16:11:52 2014 +0300

    quick_dump: chv: add misc gen7 GT registers
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Reviewed-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 861cea8b5245776c7ea9515b02d20449395a3132
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Jun 3 02:02:24 2014 +0300

    quick_dump: chv: add dsi (mipi) registers
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Reviewed-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit a4b53d2125a68d431587ae5f004e028ef181290f
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Jun 3 01:59:45 2014 +0300

    quick_dump: vlv: clean up dsi (mipi) registers
    
    Split out the base offset into the third argument and rename MIPIB to
    MIPIC to match the display cluster register HAS.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Reviewed-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit a115c4820802508733cdf7100f4de63c8d3dc50f
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Mar 21 10:07:43 2014 -0700

    quick_dump: chv: add full dpio phy dumps
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Reviewed-by: Imre Deak <imre.deak@intel.com>

commit e23f1fdfeed49f0b61b528940effefc089f008d2
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Mar 21 01:51:29 2014 -0700

    quick_dump: chv: add display registers
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    [imre: add audio regs]
    Reviewed-by: Imre Deak <imre.deak@intel.com>

commit 6d2577c74117e0f246152d2a16c96626c496a824
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed May 28 18:45:27 2014 +0300

    quick_dump: chv: add detection support
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Reviewed-by: Imre Deak <imre.deak@intel.com>

commit 9a642a72873c2df8a0c8ad8b63e25e42b1646382
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed May 28 18:23:07 2014 +0300

    quick_dump: add support for accessing the dpio phy 2 registers
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Reviewed-by: Imre Deak <imre.deak@intel.com>

commit 0f906083f2a2248355f799948188aa8c010585d2
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed May 28 18:26:39 2014 +0300

    lib/intel_iosf: add second phy support
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Reviewed-by: Imre Deak <imre.deak@intel.com>

commit 82fcb90619491af13675d8c08e5d1b6bf07a781b
Author: Imre Deak <imre.deak@intel.com>
Date:   Mon Jun 2 15:48:27 2014 +0300

    quick_dump: allow passing display base as the third argument
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Reviewed-by: Imre Deak <imre.deak@intel.com>

commit 4e696ff8c9567051467c922f5abb4f8b64196b5c
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed May 28 18:32:39 2014 +0300

    quick_dump: pass register offsets as int
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    [imre: fix s/regi/intreg/ typo]
    Reviewed-by: Imre Deak <imre.deak@intel.com>

commit 76bc5fdf46ce003f3f370998c1b3ed45fe8775c3
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Jun 3 16:44:41 2014 +0300

    quick_dump: fix typo breaking dpio reg dumps
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Reviewed-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 4f0bb3147079b6a8b49ccf1b3b3b6fbf13e64f11
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Jun 3 16:03:50 2014 +0300

    quick_dump: make autodetect the default option
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Reviewed-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Very-much-wanted-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 73c40324159b1fda9db3d8c34c47a722977d213d
Author: Tim Gore <tim.gore@intel.com>
Date:   Tue Jun 3 15:18:31 2014 +0100

    intel-gpu-tools: remove testdisplay.h from kms_render.c
    
    kms_render.c included testdisplay.h but did not need it.
    This was preventing it from building on Android due to the
    lack of a Glib port. So I have removed this #include and
    changed Android.mk so that kms_render is built if we have
    cairo.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0dc8794fc07faf8f2b008f98fd8ef6ed04300119
Author: Tim Gore <tim.gore@intel.com>
Date:   Tue Jun 3 15:05:56 2014 +0100

    intel-gpu-tools: re-enable gem_exec_params on Android
    
    The missing macro that was preventing the gem_exec_params
    test from building is now in i915_drm.h, in ABT at least,
    and this test can now build. So I have removed it from the
    skip list in Android.mk
    
    For Gmin I have added a patch for i915_drm.h to the Wiki
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d60d4c80e5dbdab0baa5b45c3849262d982e3856
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Thu Apr 10 15:15:13 2014 +0300

    tools/null_state_gen: generate null render state
    
    Generate valid (null) render state for each gen. Output
    it as a c source file with batch and relocations.
    
    v2: noinst and vs_start fixed for BDW GT3 (Damien Lespiau)
    
    Acked-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit a384e55b49dce17eff1945536f957546bc7902cf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jun 3 07:31:49 2014 +0100

    igt/gem_evict_everything: Move assertion
    
    If we move the assertion from out of the callback, we can get a much
    more useful error message.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=79573
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 21fb118f3b3f16f9cdc6cadf68204e745f0a8a68
Author: Antti Koskipaa <antti.koskipaa@linux.intel.com>
Date:   Mon Jun 2 13:43:18 2014 +0300

    kms_cursor_crc: Test cursor size change ioctl
    
    Now that we support cursor changes other than 64x64, a bug was found
    where the size change was only applied at cursor enable time, rather
    than at every update. Add a testcase for that.
    
    Signed-off-by: Antti Koskipaa <antti.koskipaa@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 532b7e61e0316b94b280efc2199ef121ced1959c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed May 28 16:19:16 2014 +0200

    NEWS: Fix spelling a bit

commit aeb3d8897738559b6e8bb21b72e4832a8f8ab59e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed May 28 16:05:14 2014 +0200

    NEWS: Don't forget the runtime pm helpers!

commit 0ee77ce2328d1fe2427e7086e4aa339eeb2ce820
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed May 28 16:02:08 2014 +0200

    NEWS: Updates ...

commit 707c839a6a0abda7310cf15eeb353a477ac83315
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed May 28 14:18:34 2014 +0100

    build: Don't fail if SWIG isn't found
    
    People from distros have reported that packaging the newer versions is
    more difficult because we now depend on SWIG. We don't have to, it's
    needed for the python dumper and is an optional build dependency.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 321273ff76fa16aabec0c6b0a63039525a4fec1b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 28 09:01:56 2014 +0100

    Factor in kernel object overhead when checking available memory for tests
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e4ba3b75e6de35483b2edea21ceda145ef0b3311
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue May 27 21:33:10 2014 +0300

    tests/kms_flip: Make flip-vs-panning-vs-hang change DSPSURF
    
    Make sure DSPSURF will change during the panning operation
    in flip-vs-panning-vs-hang.
    
    This will now test agains bugs between the kernel's mmio vs.
    CS flip race handling and GPU resets. If the kernel is buggy
    if will fail to notice that the panning operation changed the
    base address before the GPU reset had a chance to deal with the
    pending page flips, and so the flip would never complete due to
    DSPSURFLIVE not matching the expected value.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3805288f1a28abebb9313b515d5e48ba06350020
Author: Tim Gore <tim.gore@intel.com>
Date:   Tue May 27 16:45:24 2014 +0100

    intel-gpu-tools: Skip kms_mmio_vs_cs_flip if no cairo
    
    The kms_mmio_vs_cs_flip test uses igt_kms.c which in turn
    uses cairo. So in Android.mk add this test to the skip list
    if we dont have cairo
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ff3c12209893ee8ee0e757d6cf10276596ef0338
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu May 22 17:29:48 2014 +0200

    tests/kms_pipe_crc_basic: Add gpu hang tests
    
    Currently pipe CRC support is broken after gpu hangs. This tests for
    this bug.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f75ec0b452cbebc0375c1bf75f06e0dc8432cd7c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu May 22 16:27:44 2014 +0200

    tests/kms_pipe_crc_basic: Add suspend tests
    
    Currently broken ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6fa1934a1991ec30b4f72359cb51d043b374bf43
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Tue May 20 11:25:48 2014 +0300

    tests/drv_hangman: Add subtest for error state capture/dump
    
    Guarantees that error capture works at a very basic level.
    
    v2: Also check that the ring object contains a reloc with MI_BB_START
    for the presumed batch object's address.
    
    v3: Chris review comments:
     - Move variables to local scope.
     - Do not assume there is only one request.
     - Some gen encode flags into the BB start address.
     Also, use igt_set/get_stop_rings as suggested by Mika Kuoppala.
    
    v4: Make as a subtest of drv_hangman.
    v5: Rebase
    
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com> <v4>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 9b0d3481e80670ccc27925a6ada05bb36a665b05
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Mon May 19 17:42:21 2014 +0300

    tests/drv_hangman: Convert test from shell script to c
    
    Mixing script and standlone tests didn't mix well with the
    strict i915_ring_stop flags handling. Also squash drv_missed_irq_hang
    to the new test.
    
    v2: - Remove missed irq test (Daniel Vetter)
        - gitignore fixed (Oscar Mateo)
        - fix check_other_clients to handle dangling fd's
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=78322
    Suggested-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Reviewed-by: Oscar Mateo <oscar.mateo@intel.com> <v1>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 9911f3f0cf202444f1ef2399f5961605880b7360
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 22 10:20:33 2014 +0100

    igt/gem_userptr_blits: Fix up last minute API changes
    
    When the patch was merged, the ioctl numbers had to be adjusted to leave
    no holes. Also there was a final piece of munging of the API to
    downgrade unsynced userptr for export over dma-buf.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit eb566561e79d00c7ac7b596d428fa26f6de1ec5d
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Apr 14 16:14:40 2014 +0300

    tests/kms_mmio_vs_cs_flip: Add a test case to exercise mmio vs. CS flip races
    
    kms_mmio_vs_cs_flip has two subtests:
    - setplane_vs_cs_flip tests the interaction between
      fullscreen sprites and CS flips
    - setcrtc_vs_cs_flip tests the interaction between
      primary plane panning and CS flips
    
    v2: Skip sprite test when there are no sprites
        Reduce busy_bo to 64MB (now works on my gen2)
        Handle pipe vs. port incompatibility
    v3: Handle missing auto pipe crc
    
    Reviewed-by Rodrigo Vivi <rodrigo.vivi@gmail.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit e2ac7a15f195b67a44c474920cd220baab92f6b1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu May 22 09:34:36 2014 +0200

    tests/kms_sink_crc_basic: Use igt_assert
    
    Less verbose code makes for clearer test logic.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0675765eff4a7409afa98734aa0c8fbc02ce5ff6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu May 22 09:32:22 2014 +0200

    tests/kms_sink_crc_basic: skip properly
    
    Not running the test is not failing.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f8935351413a23920032604e05802a404b8eaff2
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu May 22 09:07:45 2014 +0200

    Revert "Revert "store_dw_loop: make loops smaller""
    
    This reverts commit 3005ac3ee8d7aede73a3e63d2068a6074156ebe5.
    
    QA has done the testing we've wanted.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c75dcbdac51dcc2d631a4a45049c9421e0229e16
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue May 20 15:45:31 2014 +0200

    tests/kms_flip: various improvements
    
    - Some debug logging for the ts continuity checks.
    - Add a plain vblank-vs-suspend test where kms_flip doesn't switch off
      the displays first.
    - Ensure that we do at least 2 rounds, the suspend tests bailed out
      after 1 round and so didn't test anything.
    - Frob the testnames a bit.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 89152791e2ebde5e05c51fc070e3eaa462701f74
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue May 20 14:42:12 2014 +0200

    tests/kms_flip: Add vblank vs. gpu hang testcase
    
    Currently broken :(
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 737d248a127f51d20555de53b9dfe28ca4682b54
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Tue Mar 25 13:55:14 2014 +0800

    assembler: distinguish the channel of .z from the condition of .z
    
    The scratch patch only works for generic register
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=75631
    Tested-by: Matt Turner <mattst88@gmail.com>
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 881afff297835faf67f55ed1e9db596e57fb4cd7
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Tue Mar 25 13:41:25 2014 +0800

    assembler: switch the order of swizzle and regtype to match the BNF of the assembly
    
    Fortunately our existing source didn't use swizzle.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=75631
    Tested-by: Matt Turner <mattst88@gmail.com>
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit a6eaa292717f8c8e109ae172d115abea05b5c342
Author: Imre Deak <imre.deak@intel.com>
Date:   Sun May 18 23:37:56 2014 +0300

    igt/quickdump: vlv: dump FLISDSI regs too
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit ad08999794ab883e6755bdf3cdce8ba9ac7a4c6d
Author: Imre Deak <imre.deak@intel.com>
Date:   Mon May 19 13:26:35 2014 +0300

    igt/intel_iosf: rename IOSF sideband opcodes according to the spec
    
    These opcodes are not specific for an endpoint, but are the same for all
    endpoints. So rename them accordingly, using the name the VLV2 sideband
    HAS uses. Also move the macros to the .c file, since they aren't used
    anywhere else.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 3005ac3ee8d7aede73a3e63d2068a6074156ebe5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon May 19 18:11:34 2014 +0200

    Revert "store_dw_loop: make loops smaller"
    
    This reverts commit f00efff326610fdba92dbc91d951790a3320052e.
    
    This is a temporary revert since I want QA to first test with the
    original testcase whether it got faster again. This is to test the
    effects of
    
    commit 227f782e4667fc622810bce8be8ccdeee45f89c2
    Author: Chris Wilson <chris@chris-wilson.co.uk>
    Date:   Thu May 15 10:41:42 2014 +0100
    
        drm/i915: Retire requests before creating a new one
    
    We should revert this revert again as soon as QA has completed
    testing.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=78024
    Cc: Jesse Barnes <jbarnes@virtuousgeek.org>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f00efff326610fdba92dbc91d951790a3320052e
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Mon May 19 08:44:12 2014 -0700

    store_dw_loop: make loops smaller
    
    These tests are really for catching TLB or GTT mapping failures due to
    bad programming in the kernel driver.  We've never needed more than a
    few pages worth of data write to actually see those.

commit d71add5c1197706fdd060e7f487293ef8b459d87
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon May 19 07:26:12 2014 +0100

    igt/gem_bad_reloc: Refine for limited kernel w/a
    
    One proposed solution only fixes up the SNA behaviour, so reduce the
    test case to probe only that particular pathology.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 252d1151a809683b0f6ed2c546358b7375a27f18
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri May 16 23:36:25 2014 +0200

    tests/kms_sink_crc_basic: Put into righ Makefile target
    
    If it's a simple test, it needs to be in the simple lists. Tests with
    subtests go into the _M tests.
    
    Without that test enumeration is all screwed up.
    
    Cc: Rodrigo Vivi <rodrigo.vivi@gmail.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 542c2b5ed5a2a5beee5912b44f9155ade532dca3
Author: Oscar Mateo <oscar.mateo@intel.com>
Date:   Fri May 16 14:07:12 2014 +0100

    tests/kms_flip: test a fb backed by a bo too big/small for its own good
    
    This is a "review by igt test" for a bug located in
    i915_gem_object_pin_to_display_plane and fixed by:
    
    commit 392013bdd4b6128795e33c84bd6d6d3fd66ff0a3
    Author: Oscar Mateo <oscar.mateo@intel.com>
    Date:   Fri May 16 11:23:12 2014 +0100
    
        drm/i915: Gracefully handle obj not bound to GGTT in is_pin_display
    
        Otherwise, we do a NULL pointer dereference.
    
        I've seen this happen while handling an error in
        i915_gem_object_pin_to_display_plane():
    
        If i915_gem_object_set_cache_level() fails, we call is_pin_display()
        to handle the error. At this point, the object is still not pinned
        to GGTT and maybe not even bound, so we have to check before we
        dereference its GGTT vma.
    
        v2: Chris Wilson says restoring the old value is easier, but that
        is_pin_display is useful as a theory of operation. Take the solomonic
        decision: at least this way is_pin_display is a little more robust
        (until Chris can kill it off).
    
    v2: Avoid code duplication by using igt_create_fb_with_bo_size() as
    requested by Ville Syrjälä (original author of the "too big" test idea).
    
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 5bdd4d9b5e371735e0d76339989a9af9bd046702
Author: Oscar Mateo <oscar.mateo@intel.com>
Date:   Fri May 16 14:07:11 2014 +0100

    lib/igt_fb: igt_create_fb_with_bo_size
    
    Useful for testing bigger/smaller fb-wrapped buffer objects.
    
    Cc: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit ace8a9e10c7516c7298658a73c3096aa21b5986e
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Thu May 15 20:13:57 2014 -0400

    tests/kms_sink_crc_basic: Basic test to verify Sink CRC debugfs.
    
    v2: rebase after a long time.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1c9a5b1a7b63855bc90dfcf371dc0789548ca637
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri May 16 10:33:28 2014 +0200

    tests/pm_pc8 -> pm_rpm rename
    
    Plus naming convention for runtime pm tests to have "rpm" somewhere in
    their tests. Note that all the pc8-specific tests (for e.g. residency
    or similar) already have pc8 in their subtest names, so we don't lose
    any information here.
    
    Cc: "Yang, Guang A" <guang.a.yang@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7357639397fd7457149329494f615bb0053b9036
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu May 15 17:02:39 2014 +0200

    tests/pm_pc8: Use igt_assert_cmpint
    
    More pretty!
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5e83f0444d0fcef2d5996ef12f9cf1593ccd8f78
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Thu May 15 14:06:51 2014 -0400

    tests/gem_bad_reloc: Adding missing include.
    
    It was breaking compilation.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>

commit 6797ca8c75dc57f4a5eaa9ca8d6f180fd24491dc
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu May 15 16:35:32 2014 +0200

    tests/kms_render: don't loop through modes
    
    We kinda have testdisplay for this ... and doing this tends to take
    forever.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=77709
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 943511a3ab53df1db5e631bface63bdae663c4c8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu May 15 10:03:11 2014 +0200

    tests/gem_reg_read: Fix errno check
    
    So I accidentally fixed a check when converting to the new macros and
    the kernel never returned -ENOENT for invalid regs. Adjust the test.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6727de0c1abe0b2d6d44255dd30a29dc3ee84993
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed May 14 17:59:02 2014 +0200

    tests/kms_flip: nasty power management tests
    
    These check whether everything is still ok wrt vblank handling after
    runtime pm and system suspend-resume.
    
    In addition to the usual checks they also ensure that the vblank frame
    counter isn't totally ridiculous, something Keith complained about
    aeons ago. With Ville's drm_vblank_on/off rework this should now be
    fixed and solid.
    
    v2:
    - Ignore seq_step, vblanks completely immediately when the crtc goes off
    - Only run system suspend/resume tests once.
    
    Cc: Keith Packard <keithp@keithp.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bd521b493e73d987669afbce8da6418e1aed7db6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed May 14 16:10:50 2014 +0200

    lib/igt_aux: Extract runtime pm helpers from pm_pc8
    
    I want to use them elsewhere ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1bee7e8b82e4a264d20df1f5825b8424c9241e39
Author: Tim Gore <tim.gore@intel.com>
Date:   Thu May 15 10:25:48 2014 +0100

    intel-gpu-tools: Skip kms_fence_pin_leak if no cairo
    
    The kms_fence_pin_leak test uses igt_kms.c which in turn
    uses cairo. So in Android.mk add this test to the skip list
    if we dont have cairo
    
    Issue: VIZ-3894
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit af1fbc427f50ac38ed93f3e682cf92b9ae1b2f41
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 15 13:37:03 2014 +0100

    igt/gem_ringfill: Only check for rendercopy when testing render ring
    
    Overzealous test runner ftl.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=78591
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ef51988ab287c86c2a324271eebf85a68979ac46
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 15 13:23:44 2014 +0100

    igt/gem_bad_reloc: Restrict negative reloc tests to IVB+
    
    The bug doesn't seem to occur on SNB, so we can skip the workaround and
    hence we do not expect the kernel to prevent invalid relocated offsets.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 465793bfd185062cfaee1b0dd3abf98ce5218333
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 15 13:10:54 2014 +0100

    gem_exec_lut_handle: Do a warm up pass before timing
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit efd5a571f47885ca1cbd2f20a879d38018fe7c3e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 15 13:10:21 2014 +0100

    gem_bad_reloc: Add subtest for LUT-based execbuffers
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit daa9e3d80a6c25667b259e864376ac929d5a11bd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 15 08:43:11 2014 +0100

    Add gem_bad_reloc
    
    This test feeds a batch containing self-references into the kernel and
    checks that the relocation offsets remain as valid GTT addresses. This
    is to exercise SNA passing in negative relocation deltas which can hang
    the GPU if they wrap around.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=78533
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 62cd793c37135339788fff7ddf99f5039b0282ae
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed May 14 17:59:25 2014 +0200

    tests/kms_flip: Fix vblank ts check
    
    Oops, fumbled that in the conversion.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 78f79e4e95b571b0ee6f407aaea6dc7c0f864985
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon May 12 14:18:42 2014 +0300

    tests/kms_fence_pin_leak: Exercise full ppgtt fence pin_count leak in the kernel
    
    The kernel full ppgtt support has a bug where it can drop a pinned
    fence to the floor, hence we leak the pin_count as the subsequent
    fence unpin becomes a nop. We can trigger it easily by unbinding a
    buffer from a ppgtt address space while the buffer is simultaneosly
    being used for scanout.
    
    Make the kernel leak the fence pin_count and trick it into picking
    a new fence register for the next scanout buffer. Looping like
    this for a while we leak the pin_count for all fence registers after
    which the kernel can no longer find a new fence register when it needs
    one. As a result we get back a SIGBUS from the GTT mmap access.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 831eb2119793e55d9c0e1be363a2f480f3183ff6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed May 14 15:33:27 2014 +0200

    lib/igt_core: Fixup docs with symbolic exit codes
    
    Conflict between me and Thomas pushing patches in parallel.
    
    Cc: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 17eb062661e02a3cea97c4893d373ce8124a0b94
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue May 13 15:22:52 2014 +0100

    lib: add exit status defines
    
    Add defines for success, skip and timeout exit statuses.
    
    Suggested-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit c03d58595e23d155aa470e60e6debaa0ee357a1b
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon May 12 10:20:55 2014 +0100

    lib: set a timeout when reading crc values
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>
    Acked-by: Damien Lespiau <damien.lespiau@intel.com>

commit d8e5313a276c856fdd6f600e69e26f45e4c370c0
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Mon May 12 10:19:52 2014 +0100

    lib: add igt_set_timeout
    
    Add a function to stop and fail a test after the specified number of
    seconds have elapsed.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>
    Acked-by: Damien Lespiau <damien.lespiau@intel.com>

commit 5597a1f418f925f7cb298d3f74aab5ebdb0edd36
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed May 14 11:52:35 2014 +0200

    tests/kms_flip: Use asserts
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0b3407f5283c1a091f9c980df76bf6ccfb692f9f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed May 14 11:41:55 2014 +0200

    tests/prime_nv_pcopy: Remove unused tiling tests
    
    We now know that the hardware can't do this, and it's not designed to.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ee90a4a0dc2cb133bd84283da460069f22c49aac
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed May 14 11:39:31 2014 +0200

    tests/prime_nv_pcopy: Drop return values from tests
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a7294e0c22d2be22b3f9abbbcad81794c65315c8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed May 14 11:31:31 2014 +0200

    tests/prime_nv_pcopy: Drop return values from copy/check functions
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8710e302a46761a1164a6453eaf53345fd76fc44
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed May 14 10:57:46 2014 +0200

    tests/prime_nv_pcopy: Use asserts in setup code
    
    Now we even have more fine-grained checking and only skip if the
    nouveau card isn't supported, but fail properly if something else goes
    wrong.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 782cda17b932e9f96beca87f61b791990bea8ce5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed May 14 10:49:40 2014 +0200

    tests/prime_nv_pcopy: Use asserts in nv_bo_alloc
    
    Step one to untangle the control flow in this test and replace it all
    with igt assert magic.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d502ae6f773333b0e073923911bf936842296e73
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed May 14 10:44:16 2014 +0200

    tests/prime_nv_api: Use asserts instead of control flow
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 722b25a303bcb927bf233cb773a3f6e3851e2f58
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed May 14 10:07:17 2014 +0200

    tests/gem_seqno_wrap: Replace control flow with asserts
    
    Only tricky bit was a bit of debug output sprinkled all over, I've
    moved it all to cmp_bo.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0b7ce4ac2929ea56dfde508d551163a5304c66d8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed May 14 09:56:53 2014 +0200

    tests: Use igt macros more
    
    Often just folding together of the common if (cond) printf;
    abort|igt_skip|igt_fail; pattern. But in a few cases I've ripped out
    more since the igt macros will already print the condition and errno.
    
    A few tests where more work (like ripping out return codes en masse)
    is needed left as-is.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e624fa8a2e1a31494c6e47a65e378e480882422d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed May 14 00:36:04 2014 +0200

    tests: sprinkle igt logging
    
    All the cases that simply dump some debug information and couldn't be
    converted to some of the fancier macros.
    
    Some information output removed when it's redundant with the subtest
    status.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 351e7d395041b4b87ad28a201c81acac40cb397f
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue May 13 15:49:58 2014 +0300

    pm_pc8: add system-suspend subtest
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 4e4ff4c1d1189f2dab59af1f1e868d88ab13624a
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue May 13 15:02:37 2014 +0300

    tests/kms_fbc_crc: Use igt_create_color_fb()
    
    No need to hand roll the alloc fb+paint code anymore, just use the
    common helper.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit abc262bf470f0988e10f1cfe4aa8d0f7f5f65519
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue May 13 14:49:53 2014 +0300

    tests/kms_fbc_crc: Reset display state between subtests
    
    If a subtest fails it'll leave the display in a state that may prevent
    the next subtest from working. So reset the display state between
    subtests.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 54f8f5d13eefbbfb16ffd38be565d5c60ce67440
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue May 13 13:56:41 2014 +0300

    tests/kms_fbc_crc: Switch to using the igt_display stuff
    
    Let's try to use the common igt_display framework to make the code a bit
    nicer.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit d2d0a96eca2e63a7ec75fd15b81808c42ae796b7
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue May 13 13:38:20 2014 +0300

    tests/kms_fbc_crc: Simplify pipe_crc mess
    
    There's no need to keep an array of pipe_crc objects around. Just keep
    one for the duration of the specific crtc/connector/test combo.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 126b8ba72f6a6f017819e00dc2b37a7c6549a143
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue May 13 12:28:26 2014 +0200

    lib/igt_core: Fix type on igt_log doc
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1503d17cc5444d43f37b07d722f7c2a0db7c7f91
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue May 13 11:29:34 2014 +0200

    lib/igt_core: Document testrunner interface a bit
    
    Also fix up one gtkdoc fumble in igt_fb. We should use symbolic
    defines if possible instead of just listening the magic 0, 77, 78
    values for exit codes, but that's a separate patch.
    
    Cc: tim.gore@intel.com
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0be29daac18bebeca6be6e80746ff8abb6476dfc
Author: Tim Gore <tim.gore@intel.com>
Date:   Tue May 13 09:34:42 2014 +0100

    intel-gpu-tools: Move igt tests to intel validation area
    
    Currently when IGT is built for Android the resulting test
    executables go to /system/bin, which is not ideal. After
    discussion with the core validation team i have moved them
    to /system/vendor/intel/validation/core/igt by setting
    LOCAL_MODULE_PATH.
    
    I have also added a --defsym linker option to export a
    symbol that allows a script to easily distinguish between
    tests that have subtests and those that dont. There are
    better ways to do this (viz, in the source code) but
    because the igt tests are not written consistently this
    would require many more changes.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bd7f9ab2cefd4c8fcf57e0dc4e79fef6890a3c71
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue May 13 11:12:34 2014 +0200

    NEWS: Android has libcairo support now!
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 41cbe36bba966fdc96d86031f2db5853e2c59ef4
Author: Tim Gore <tim.gore@intel.com>
Date:   Mon May 12 13:39:00 2014 +0100

    intel-gpu-tools: Build tests needing cairo if ANDROID_HAS_CAIRO=1
    
    Until now the tests that depended on libcairo were simply
    skipped in the android build. Now that I have a cairo port
    working, build these cairo dependent tests if ANDROID_HAS_CAIRO
    is set to 1 in the environment.
    For information on building cairo for IGT on Android see the
    wiki at:
    
    https://securewiki.ith.intel.com/display/GFXCore/IGT+Test+Suite+on+Android
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0fee90b56df9a644b305f6cf37785b8284d410b3
Author: Brad Volkin <bradley.d.volkin@intel.com>
Date:   Sat May 10 14:11:53 2014 -0700

    tests/gen7_forcewake_mt: Don't set the GGTT bit in SRM command
    
    The command parser in newer kernels will reject it and setting this
    bit is not required for the actual test case.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=76670
    Signed-off-by: Brad Volkin <bradley.d.volkin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 63746417e25b8e9efbeb6021c768695740849a18
Author: Imre Deak <imre.deak@intel.com>
Date:   Mon May 12 13:29:49 2014 +0300

    testdisplay: fix restoring termio at exit
    
    At normal exit in test_all_modes we don't restore the original termio,
    since g_io_channel_shutdown() closes the stdin fd and so the following
    tcsetattr on stdin will fail. We also don't restore the termio at signal
    exit. Fix both cases by installing an exit hanlder with a dup'ed stdin fd.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit d848a36545eec43760de7e34a57a796182358087
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu May 8 15:56:24 2014 +0300

    tests/kms_fbc_crc: Check context support earlier
    
    Check for context support before doing anything else in the subtest.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit f85fff0de620bc20d8a20896812fcce584983f28
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu May 8 15:56:24 2014 +0300

    tests/kms_fbc_crc: Allow the subtests to pass even if some planes aren't FBC capable
    
    Don't skip the entire subtest if FBC only works on some of the primary
    planes, as is the case on pre-gen4 and hsw+. Only skip the entire subtest
    if all crtc/connector combinations skip.
    
    Also print some kind of status for all otherwise valid crtc/connector combos
    if they skip due to FBC being disabled or CRC support not being there.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 66d5f092d46120d97a0408dcd8fea0c0e086d7a8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 8 11:56:56 2014 +0100

    igt/gem_render_tiled_blits: Speed up by using the GPU to detile
    
    Avoid accessing via the slow GTT to read back and compare the contents
    of each bo against expected results. It is much faster, on llc at least,
    to detile using the GPU and then copy to system memory for the compare.
    
    Before:
    
    IVB: time sudo ./gem_render_tiled_blits
    IGT-Version: 1.6-ge46ff3f (x86_64) (Linux: 3.15.0-rc3+ x86_64)
    Using 3072 1MiB buffers
    Verifying initialisation...
    Cyclic blits, forward...
    Cyclic blits, backward...
    Random blits...
    
    real    6m26.005s
    user    6m19.234s
    sys     0m2.414s
    
    PNV: time sudo ./gem_render_tiled_blits
    IGT-Version: 1.6-g8556f8a (i686) (Linux: 3.15.0-rc2+ i686)
    Using 768 1MiB buffers
    Verifying initialisation...
    Cyclic blits, forward...
    Cyclic blits, backward...
    Random blits...
    
    real    1m45.431s
    user    1m34.960s
    sys     0m4.624s
    
    Using pread:
    
    IVB: time sudo ./gem_render_tiled_blits
    IGT-Version: 1.6-ge46ff3f (x86_64) (Linux: 3.15.0-rc3+ x86_64)
    Using 3072 1MiB buffers
    Verifying initialisation...
    Cyclic blits, forward...
    Cyclic blits, backward...
    Random blits...
    
    real    0m14.717s
    user    0m3.699s
    sys     0m3.192s
    
    Using snoop:
    
    IVB: time sudo ./gem_render_tiled_blits
    IGT-Version: 1.6-ge46ff3f (x86_64) (Linux: 3.15.0-rc3+ x86_64)
    Using 3072 1MiB buffers
    Using a snoop linear buffer for comparisons
    Verifying initialisation...
    Cyclic blits, forward...
    Cyclic blits, backward...
    Random blits...
    
    real    0m13.774s
    user    0m3.900s
    sys     0m2.089s
    
    PNV: time sudo ./gem_render_tiled_blits
    IGT-Version: 1.6-g8556f8a (i686) (Linux: 3.15.0-rc2+ i686)
    Using 768 1MiB buffers
    Using a snoop linear buffer for comparisons
    Verifying initialisation...
    Cyclic blits, forward...
    Cyclic blits, backward...
    Random blits...
    
    real    0m20.831s
    user    0m4.384s
    sys     0m5.032s
    
    So roughly 10-30x faster depending on platform.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=78244
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e46ff3f8c25957d641420fef4d680d48ce0a365f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 8 10:04:35 2014 +0100

    igt/gem_lut_handle: Fix errno checking
    
    Regression from
    commit c1404e05b7477122b9923ba029593c2cb64671a7
    Author: Chris Wilson <chris@chris-wilson.co.uk>
    Date:   Tue Apr 29 07:14:33 2014 +0100
    
        errno is reset after each syscall
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8741c2289f17e9bcb740a01cad4764a71c918eea
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Wed May 7 16:46:19 2014 +0300

    tests/gem_flink_race,prime_self_import: fix object counts
    
    We need to add one drm_open_any() before getting the object counts
    as first call to drm_open_any() allocates file descriptors for
    exit handlers and thus is not symmetrical.
    
    The regression, assymmetric behaviour, was introduced in:
    
    commit 2f2c491cf3167befe7c79e4b17afb4f6284dfc84
    Author: Mika Kuoppala <mika.kuoppala@intel.com>
    Date:   Fri Mar 28 10:52:46 2014 +0200
    
        lib/drmtest: don't dup quiescent fd
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=77867
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=77875
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 7935bbd9ba9508d6993ca019a5b8f3262676e7b5
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue May 6 14:06:52 2014 +0300

    intel_bios_reader: make edp block decode match kernel
    
    All the somewhat recent VBT specs and the kernel have different format
    for the eDP block than what the tool decodes. What the tool does *may*
    be correct for really old VBT, but I have no specs or other reference to
    suppor this. Just do what the kernel does, that's what we're interested
    in anyway.
    
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>

commit 4bd9fe6e3409d59e618053f908e33bc291d295f4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon May 5 10:57:12 2014 +0100

    gem_alive: A utility to see if the driver or GPU has hung

commit c864279de620a6e211b8a197dbdf9e3e1e2b60ab
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 30 18:39:27 2014 +0100

    overlay: Parse /proc/interrupts in lieu of debugfs/i915_gem_interrupt
    
    So the interrupt counter was removed from i915_gem_interrupt, and if we
    do not have the perf API available, we therefore need to read it from
    /proc/interrupts instead.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit bff7ecde7bf3757e11ab4559212564e3f4919b89
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 30 18:38:26 2014 +0100

    overlay: Use new i915_frequency_info in fallback code
    
    Actually use the new location to get frequency information when perf is
    not available.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b38b8a59a8694ef2d2d4c78283c7c697367766d7
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Apr 24 23:37:05 2014 +0200

    tests/pm_pc8: subtests for runtime pm for dpms
    
    Very basic since I lack a bit ideas. After all with the latest
    patches runtime pm doesn't make much a difference between dpms off
    and disabling the outputs completely with SetCrtc.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 29ee36f2597747c01d5c79c93ed31f5bcd06e219
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Apr 24 23:33:09 2014 +0200

    lib: extract kmstest_set_connector_dpms
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 066ad35ee7b39ab51fb5b8e54c3abd72df016413
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Apr 30 18:05:21 2014 +0200

    tests: Fix make depencies for test list
    
    Oops, pretty bad ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a40f091d8181b911b9dc2e11f50fcc33773d35df
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Dec 18 17:43:13 2012 +0200

    Add Cherryview PCI IDs
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit ce3c443641344d2ecb642e62526ebc2a6eb3a458
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Apr 29 17:17:24 2014 +0200

    NEWS: Updates

commit c1404e05b7477122b9923ba029593c2cb64671a7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Apr 29 07:14:33 2014 +0100

    errno is reset after each syscall
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=78055
    Bugilla: https://bugs.freedesktop.org/show_bug.cgi?id=78053
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit fa86e33ccc56ee84f2f9ac924943eef0f1469a32
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Apr 28 17:58:45 2014 +0300

    tests/gem_stress: Fix rendercopy vs. keep_gpu_busy on gen6+
    
    If the hardware has a blt ring blits aren't allowed on the render ring.
    Trying to execute blits on the render ring results in a GPU hang.
    
    Flush outstanding blits from keep_gpu_busy() before calling rendercopy()
    so that they don't end up on the render ring.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 6abfe2f0dbe80f8c1d4986367d56842bbf94d23e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Apr 28 15:26:15 2014 +0200

    tests/gem_exec_params: One more invalid ring tests
    
    With the vebox 2 patches the number of internal rings don't match the
    number of exposed rings. So add another subtest with an invalid ring
    which should be invalid both internally and externally. The bug this
    will catch is using the ring structure before validation, which the
    old "invalide-ring" wont be able to due to the internal vebox2 ring.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a595a400788bac972cb24ec78ae36db113419237
Author: Imre Deak <imre.deak@intel.com>
Date:   Fri Apr 25 10:26:46 2014 +0300

    tests/pm_pc8: skip the test if runtime PM is disabled
    
    The PC8 state won't be entered unless runtime PM is enabled, so support
    for PC8 residency counters alone is not enough to run this test.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e36c896a71660b09fd4f96ef5342009cd5908b80
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Apr 25 17:57:22 2014 +0200

    test: Fixup for the previous patch
    
    Oops, failed to git add.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1b55886c4ba111b2ba331b03289658cbd1ae0e2e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Apr 25 17:52:02 2014 +0200

    test/gem_userptr_*: Fix compile fail
    
    Also shut up warnings. Those revealed incorrect usage of local
    variables in conjunction with igt_fixture/igt_subtest. Since those use
    longjmps we need to move the out of the stackframe those magic blocks
    are declared in.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d3057d7a1eba0c050f5d6d9674d56d1794b1f066
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Fri Apr 25 15:42:20 2014 +0100

    tests/gem_userptr_benchmark: Benchmarking userptr surfaces and impact
    
    This adds a small benchmark for the new userptr functionality.
    
    Apart from basic surface creation and destruction, also tested is the
    impact of having userptr surfaces in the process address space. Reason
    for that is the impact of MMU notifiers on common address space
    operations like munmap() which is per process.
    
    v2:
      * Moved to benchmarks.
      * Added pointer read/write tests.
      * Changed output to say iterations per second instead of
        operations per second.
      * Multiply result by batch size for multi-create* tests
        for a more comparable number with create-destroy test.
    
    v3:
      * Use ALIGN macro.
      * Catchup with big lib/ reorganization.
      * Removed unused code and one global variable.
      * Fixed up some warnings.
    
    v4:
      * Fixed feature test, does not matter here but makes it
        consistent with gem_userptr_blits and clearer.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Brad Volkin <bradley.d.volkin@intel.com>
    Reviewed-by: Brad Volkin <bradley.d.volkin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a3e97ddcbf53c99af3b0a25db9a055119d312116
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Fri Apr 25 15:42:19 2014 +0100

    tests/gem_vmap_blits: Remove obsolete test case
    
    No need for the old test case once the new one was added.
    
    v2:
       * Just rebase for lib/ reorganization.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Reviewed-by: Brad Volkin <bradley.d.volkin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 863c0730f3aa695f2e968e1f38e0f36c4f8af310
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Fri Apr 25 15:42:18 2014 +0100

    tests/gem_userptr_blits: Expanded userptr test cases
    
    A set of userptr test cases to support the new feature.
    
    For the eviction and swapping stress testing I have extracted
    some common behaviour from gem_evict_everything and made both
    test cases use it to avoid duplicating the code.
    
    Both unsynchronized and synchronized userptr objects are
    tested but the latter set of tests will be skipped if kernel
    is compiled without MMU_NOTIFIERS.
    
    Also, with 32-bit userspace swapping tests are skipped if
    the system has a lot more RAM than process address space.
    Forking swapping tests are not skipped since they can still
    trigger swapping by cumulative effect.
    
    v2:
       * Fixed dmabuf test.
       * Added test for rejecting read-only.
       * Fixed ioctl detection for latest kernel patch.
    
    v3:
       * Use ALIGN macro.
       * Catchup with big lib/ reorganization.
       * Fixed up some warnings.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Reviewed-by: Brad Volkin <bradley.d.volkin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a461515b334ebb7782ee15e31f943e7a6753d845
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Apr 25 15:27:57 2014 +0300

    kms_cursor_crc: Fix the test on platforms where the pipe->port mapping has restrictions
    
    On gen2 for instance the LVDS port can only be fed from pipe B. Check
    whether the combinations is valid before trying to run the test. Also
    clean up the state back to PIPE_ANY properly so that following tests
    can again go through all the combinations.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=75131
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 5b90833941f17d175204041c86ad84c6662e55df
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Apr 25 13:37:09 2014 +0300

    kms_cursor_crc: Wrap igt_require() in igt_fixture
    
    igt_require() must be within a fixture or subtest.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit f688a56ee8285f6ebc416d5038eded73f04602bb
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Apr 25 13:38:31 2014 +0300

    kms_cursor_crc: Replace snprintf()+%s with just %d
    
    There's no point in first printing the int to temp string using %d
    and then printing that out with %s. Just stick the %d into the final
    string.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit fb2ccb1ade605e7c55da2ee82c9cd41d98270fa5
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Apr 25 13:50:59 2014 +0300

    kms_cursor_crc: Allow the test to run without cursor cap support
    
    Assume that only 64x64 cursor size is supported if the cursor size caps
    aren't supported by the kernel. This allows the test to run on older
    kernels.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit f8e5a3fc7e92f67cea7c1832e786cbb344aefd5e
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Apr 25 13:49:11 2014 +0300

    kms_cursor_crc: Wrap cursor fb creating into igt_fixture
    
    We don't want to attempt creating the cursor fb when enumerating
    subtests. So wrap it into igt_fixture. Also destroy the cursor
    fb after the tests.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit f6e869732cfa054bfa218aa465b989c85a0ba489
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Apr 24 19:07:18 2014 +0300

    kms_cursor_crc: Simplify the pipe_crc mess
    
    Instead of allocating an array of igt_pipe_ctc_t objects, just allocate
    one and stick it into test_data.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit aaef7ad37614f5d139b06d63b3052ae8cefe57ed
Author: Antti Koskipaa <antti.koskipaa@linux.intel.com>
Date:   Thu Apr 10 15:08:12 2014 +0300

    kms_cursor_crc: Add background picture
    
    This gives the cursor something to be on, instead of just a black
    background. Slows the test down only one second over six minutes.
    
    Signed-off-by: Antti Koskipaa <antti.koskipaa@linux.intel.com>

commit fafcff90a870844e0febdda4066b361479df3747
Author: Antti Koskipaa <antti.koskipaa@linux.intel.com>
Date:   Thu Apr 10 15:08:11 2014 +0300

    kms_cursor_crc: Add random cursor placement test
    
    Signed-off-by: Antti Koskipaa <antti.koskipaa@linux.intel.com>

commit 470e5ce6c34731a1c76a1089dabfb6144f4f1429
Author: Antti Koskipaa <antti.koskipaa@linux.intel.com>
Date:   Thu Apr 10 15:08:10 2014 +0300

    kms_cursor_crc: Add moving cursor test
    
    Signed-off-by: Antti Koskipaa <antti.koskipaa@linux.intel.com>

commit 795eddc63967a10cc186609259f61d531e41e078
Author: Antti Koskipaa <antti.koskipaa@linux.intel.com>
Date:   Thu Apr 10 15:08:09 2014 +0300

    kms_cursor_crc: Add reference software rendering
    
    This patch first render the cursor with hardware rendering and
    then with software, acquiring the CRC in both cases so they can be
    properly compared. Say goodbye to crc_must_match variable.
    
    Signed-off-by: Antti Koskipaa <antti.koskipaa@linux.intel.com>

commit ead0173c4d14899045dfe3595b119c49229f0dc3
Author: Antti Koskipaa <antti.koskipaa@linux.intel.com>
Date:   Thu Apr 10 15:08:08 2014 +0300

    kms_cursor_crc: Separate onscreen and offscreen tests
    
    Also remove onscreen boolean from parameter list. All test-related
    data should be put into test_data from now.
    
    Signed-off-by: Antti Koskipaa <antti.koskipaa@linux.intel.com>

commit fe8041b8f954468acdccbba1e7ced1712cf3b629
Author: Antti Koskipaa <antti.koskipaa@linux.intel.com>
Date:   Thu Apr 10 15:08:07 2014 +0300

    kms_cursor_crc: Use a function pointer to call test
    
    More tests are coming, and this allows us to not repeat the boilerplate
    code in run_test() for each subtest.
    
    Signed-off-by: Antti Koskipaa <antti.koskipaa@linux.intel.com>

commit 7ec631c2426917020ab76d6d305132ab190372ea
Author: Antti Koskipaa <antti.koskipaa@linux.intel.com>
Date:   Thu Apr 10 15:08:06 2014 +0300

    kms_cursor_crc: Move cursor enable and disable calls where they belong
    
    We can't have the hw cursor enabled during software render tests.
    
    Signed-off-by: Antti Koskipaa <antti.koskipaa@linux.intel.com>
    [vsyrjala: collect the crc before disalbing the cursor]
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit a593d613f9ccafa5ba95ec4b9542cd00eef1cc7b
Author: Antti Koskipaa <antti.koskipaa@linux.intel.com>
Date:   Thu Apr 10 15:08:05 2014 +0300

    kms_cursor_crc: Remove some test cases and change cursor to color
    
    Currently this test is quite useless, since it only checks for valid CRCs when
    the correct output from a test is a completely black screen (invisible or visible
    but black cursor, or cursor is offscreen) and disables the check when anything
    visible is onscreen.
    
    This patch changes the cursor to a colorful one and removes the test cases
    that become redundant because of this change. The cursor is designed to be
    asymmetrical such that future tests involving rotation, mirroring, etc. produce
    different CRCs and failures can be detected.
    
    This (temporarily) disables CRC testing until the next patch which will add
    software rendering of the cursor and the CRC generation.
    
    Signed-off-by: Antti Koskipaa <antti.koskipaa@linux.intel.com>

commit b918a3ba15b510edfeb37a375ffacd5bdb5e1410
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 25 07:40:34 2014 +0100

    Reset errno to 0 after success
    
    errno is only valid after a syscall wrapper (e.g. ioctl()) reports an
    error. However, we report the last errno value as a part of the
    igt_assert() output and so we display spurious values such as:
    
    Test requirement not met in function gem_require_ring, file ioctl_wrappers.c:802:
    Last errno: 11, Resource temporarily unavailable
    Test requirement: (!((((intel_get_drm_devid(fd)) == 0x0102 || ...
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5d7649690c80b531a4949e275926315a749455e3
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed Apr 23 17:03:23 2014 +0100

    benchmarks: Build them on Android.
    
    They build fine so give them some exposure.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Reviewed-by: Brad Volkin <bradley.d.volkin@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit dc14bf455d66a0a31253ac4fa3e024eb1e036968
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed Apr 23 16:07:55 2014 +0100

    tests: Extract ALIGN macro into a common header
    
    Makes for a little bit less code duplication, especially since
    it will be used from more callers in the future.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Reviewed-by: Brad Volkin <bradley.d.volkin@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit e32664c8ee47d8eb01955240672a198aab7e2969
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed Apr 23 16:02:47 2014 +0100

    tests: Skip building kms_flip_tiling on Android
    
    Dependencies are not available at the moment so it does not build.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit 1639022aa85e57cdf365f2be1a165263cb251ddd
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Apr 24 10:43:38 2014 +0200

    tests/gem_exec_params: Fix rel-constants-invalid subtest
    
    Reported by Ville and Zhao Yakui.
    
    Cc: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Cc: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5a8c06464e025495f0b9143dbcec76f02354d58a
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Thu Apr 24 10:15:45 2014 +0800

    tests/gem_dummy_reloc_loop: Add one subtest based on multi drm_fd to test CPU<->GPU sync under multi BSD rings
    
    The Broadwell GT3 machine has two independent BSD rings in kernel driver while
    it is transparent to the user-space driver. In such case it needs to check
    the CPU<->GPU sync for the second BSD ring.
    
    V1->V2: Follow Daniel's comment to add one subtext instead of one individual
    test case, which is used to test the CPU<->GPU sync under multi BSD rings.
    
    V2->V3: Follow Imre's comment to remove the unnecessary initialization and
    use igt_assert_f instead of igt_assert
    
    Reviewed-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ae8e646127715e816376c6324c9109331bad6503
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Thu Apr 24 10:15:44 2014 +0800

    tests: Add one ring sync case based on multi drm_fd to test ring semaphore sync under multi BSD rings
    
    The Broadwell GT3 machine has two independent BSD rings in kernel driver while
    it is transparent to the user-space driver. In such case it needs to check
    the ring sync between the two BSD rings. At the same time it also needs to
    check the sync among the second BSD ring and the other rings.
    
    V2->V3: Follow Imre's comment to remove the unnecessary initialization and
    use igt_assert_f instead of igt_assert.
    
    V3->V4: Add gem_multi_bsd_sync_loop.c into the tests/.gitignore
    
    Reviewed-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cd3850e28e5ec83dc15462b965310794effb71b1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Apr 23 20:23:28 2014 +0200

    tests: Add gem_exec_params
    
    This fills all the gaps we've had in our execbuf testing. Overflow
    testing of the various arrays is already done by gem_reloc_overflow.
    
    Also add kms_flip_tiling to .gitignore.
    
    This will cause a bunch of failures since current kernels don't catch
    all fallout.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4e93890377fc1b33fbbad29759299634f0eebfa9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 24 07:58:09 2014 +0100

    Add gem_render_copy_redux
    
    This is an "advanced" form of the the simple gem_render_copy test.
    Instead of aiming for maximal simplicity to aide debugging of new
    rendercopy backends, this test aims to exercise the execbuf interface
    using the render ring.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 78e4c2b449c6d0a18e2bfaea29f3a0eadb42c5f3
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Apr 16 17:05:43 2014 +0300

    lib: Fix potential out of bounds access in ring stop code
    
    The subsequet code expects the read() to not have filled the entire
    buffer, and yet we allow it to do so. Reduce the size passed to read()
    by 1 to make the code sane.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 4aa2c102b933d11cc85e0dc6fe607924e248b652
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Apr 16 17:07:07 2014 +0300

    lib: Fix assert failure in ring stop code
    
    The assert in igt_set_stop_rings() is a bit bogus. Suppsoedly it was
    meant to assure that the caller always restores the rings to running
    state after stopping them. But in its current form it will trigger
    any time someone calls the function and the rings were already stopped.
    So you can't even restore the rings to running state w/o the assert
    triggering.
    
    Fix it up so that it'll ignore the current ring state when we're trying
    to restore the rings back to running state.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 43c2ed758fea849d666af519cd2382d6d6bc6607
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Apr 14 16:23:18 2014 +0300

    tests: Compile all the tests
    
    A bunch of the tests aren't being built due to a missing '\'. Fix it.
    
    The problem was introduced here:
     commit ddf8cc107e3b78e4c8200b083ed298c24eec1f03
     Author: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
     Date:   Wed Apr 2 15:31:38 2014 +0300
    
        test: Add test for checking if page flip changes tiling
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 4fbd49beb94c299b38555b4ef647588fca47a388
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Apr 11 16:16:31 2014 +0200

    tests/kms_flip_tiling: Fixes
    
    - Wrap up testcase correctly into the magic code block.
    - Put local variables out of the longjmp danger zone.
    
    Cc: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ddf8cc107e3b78e4c8200b083ed298c24eec1f03
Author: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>
Date:   Wed Apr 2 15:31:38 2014 +0300

    test: Add test for checking if page flip changes tiling
    
    Test that a page flip from a tiled buffer to a linear one works
    correctly. First, it sets the crtc with the linear buffer andr
    generate a reference crc for the pipe. Then, the crtc is set with
    the tiled one and page flip to the linear one issued. A new crc is
    generated and compared to the rerence one.
    
    Signed-off-by: Ander Conselvan de Oliveira <ander.conselvan.de.oliveira@intel.com>

commit cc730c418f44245c49776059b2564f54da4449e6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Mar 11 16:14:33 2014 +0100

    lib/kmstest: Fix up tiled buffer creation
    
    When extracting a raw __gem_set_tiling helper I've fumbled this in
    
    commit 590f6101402b51bca54f69c002380bda967484ea
    Author: Daniel Vetter <daniel.vetter@ffwll.ch>
    Date:   Wed Oct 9 20:50:50 2013 +0200
    
        lib/drmtest: extract rawer __gem_set_tiling
    
    Fix things up so that we properly propaget the error again.
    
    Now to make this all properly work we also need to make kms_flip a
    notch more robust against such failures ...
    
    This only blows up on gen2/3 with the pan tests which want a too wide
    framebuffer for tiling.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 99b8f807010483128f10f7934a864c78b4438b34
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Thu Apr 10 17:51:39 2014 +0300

    tests/gem_reset_stats: fix length check in inject_hang
    
    To avoid writing past the batch end.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 53ad1e4a7040c57355b57fc3cdc8d9a003687a32
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Fri Mar 28 15:12:14 2014 +0200

    tests/gem_reset_stats: check gpu state before each subtest
    
    Some tests, namely the close pending variety, tries to
    carefully drop all handles to gpu when hang is intruduced,
    to expose bugs in reset handling without any clients.
    
    Add guards after and before tests to really know if
    the gpu is still alive as the particular test might
    report success and then gpu dies few seconds after.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 2f2c491cf3167befe7c79e4b17afb4f6284dfc84
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Fri Mar 28 10:52:46 2014 +0200

    lib/drmtest: don't dup quiescent fd
    
    If we dup the fd, we are in mercy of the context banning
    of the test application. Better to have our own to guarantee
    that gem_quiescent_gpu won't find itself banned on exit.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit d983a47f1470cbea8388864537dbe5aff5575df6
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Tue Mar 25 12:52:19 2014 +0200

    tests: use lib igt_[get|set]_stop_rings()
    
    on gem_reset_stats, kms_flip and pm_rps.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=75876
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit bfa6fa9a4bfdd7988a1ed68c9c97f9cc53d0f50c
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Tue Mar 25 12:21:44 2014 +0200

    lib: add igt_get_stop_rings and igt_set_stop_rings
    
    Multiple tests are introducing hangs by fidding with i915_ring_stop
    debugfs entry.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 1c7ca57e531315f78f8ea3b9dce7bd92d7d79f64
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Thu Apr 10 16:06:27 2014 +0300

    tests/gem_reset_stats: end hanging batch properly
    
    As we use chained batch into itself to hang the gpu, there
    was no need to end the batchbuffer with BATCH_BUFFER_END.
    
    With the introduction of command parser, the batch
    need to have proper BATCH_BUFFER_END in it or it
    will be rejected.
    
    While at it, shift the upper half of batch gtt_offset
    accordingly with gen8+
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit f74c443925578b377c47d655a2d864b8ed521330
Author: Brad Volkin <bradley.d.volkin@intel.com>
Date:   Thu Mar 27 11:44:45 2014 -0700

    tests/gem_exec_parse: Test for OACONTROL tracking
    
    Signed-off-by: Brad Volkin <bradley.d.volkin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9eec5b0f11d864c986511db07d447e379bcef696
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 7 13:10:41 2014 +0100

    gem_tiled_swapping: Test using all available fences
    
    Use extra threads to cause extra memory pressure and stress upon the
    relevant code. Limit the number of threads to available fences to avoid
    falling off the fence cliff.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ff7806e52c4e9b7c522e59ba8514c5c6e3fa8683
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 7 13:09:46 2014 +0100

    gem_tiled_swapping: Purge all page/swap caches first
    
    Reset the system to a vanilla state before we query how much RAM/swap
    space is available for our testing.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5d607a744f3df07235355ebcb5376e2464e2f4b1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 7 12:07:14 2014 +0100

    intel-gpu-overlay: Update debugfs path for min/max frequency
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 574d62db398af45a8cb1d38fd77dd50bd645149b
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Apr 4 13:24:53 2014 -0300

    tools/intel_reg_dumper: use haswell_debug_regs on BDW too
    
    Instead of using an older set of registers.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 1fd9fc00127026b56dbd5cea323a63bdd4e69706
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Apr 4 13:22:56 2014 -0300

    tests/pm_pc8: skip tests when no screens are connected
    
    Instead of failing, just skip the tests.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=73642
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit abba92d9cff1ab9a3b492f9742e8cd1b3f669800
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Mar 31 17:01:59 2014 -0300

    tests/pm_pc8: add missing newline
    
    Otherwise the output will get even more confusing.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit d6362ce8a81a40bc30e1e7b34d14c27f7bfcd954
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Apr 3 18:03:21 2014 +0200

    tests/gem_cmd_parse: restrict to gen7
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=76982
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e8869c4bc439de941be399d156323620a2d6ecda
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 3 09:43:58 2014 +0100

    gem_tiled_swapping: Limit to available memory
    
    If there is not enough free RAM+swap for us to execute our test, we will
    hit OOM, so check first.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b8afe98004ed0e082bf5d019a86f27a5909f0e4d
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Wed Apr 2 15:13:21 2014 +0300

    lib/rendercopy: fix alloc len for gen7_bind_buf
    
    Fortunately saved by the alignment.
    
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit d4933259b84a304145634cc6ec5d9eebeb612711
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Apr 2 11:41:43 2014 +0100

    tests: create files that list the available tests
    
    Add Makefile targets to create two text files containing the list of
    available single and multi-test programs. This enables the tests to be
    enumerated without requiring the build system.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 22bc1a287eb6c0e7b89001424c895dd776f9a28b
Author: tgore <tim.gore@intel.com>
Date:   Mon Mar 31 11:55:40 2014 +0100

    intel-gpu-tools: avoid include of cairo.h on Android builds
    
    A recent commit means igt_debugfs.c now needs to include igt_kms.h,
    which in turn includes igt_fb.h and hence cairo.h.
    We need to avoid this inclusion of cairo.h when building for Android,
    (until we have a cairo port) so I have added a #ifndef around it.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4fdca96066e36cb4d41019e58c8387e0a5e0f2f5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 28 17:54:58 2014 +0100

    tools/quick_dump: Fix make distcheck
    
    Someone really needs to fix this Makefile ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e599ff443cdcd90399666dc75226d73a943cc89f
Author: tgore <tim.gore@intel.com>
Date:   Fri Mar 28 12:54:59 2014 +0000

    intel-gpu-tools: fix some include path problems on android builds
    
    When building within the android tree (specifically in /external)
    the compilation fails due to the wrong versions of some header files
    getting picked up. This commit adds some include paths to ensure the
    correct headers are found
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a96c6340768772590cf548ed8b81a10877fc7b43
Author: tgore <tim.gore@intel.com>
Date:   Fri Mar 28 12:54:58 2014 +0000

    intel-gpu-tools: fix problem with redefinition of mmap64
    
    In android builds there is no reliable way to determine if mmap64 is defined
    or not, and this sometimes leads to a compile error due to its re-defnition.
    So this commit avoids its use altogether in intel-gpu-tools for Android builds,
    unless the HAVE_MMAP64 macro is defined.
    
    Signed-off-by: Tim Gore <tim.gore@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 798fca377a0e26cffb40e5a97230baaac4b12733
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Mar 27 23:04:02 2014 +0100

    README: update piglit cmd
    
    Pointed out by Jesse.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2031da4073da0dc09ed9debb319e924ae5dc8b2a
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Thu Mar 27 11:10:18 2014 -0700

    intel_infoframes: remove bogus "being transmitted" check from VLV
    
    This bit is reserved on VLV.

commit c1c96d8342ee2d629d09a2be576d5bf984e9228b
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Thu Mar 27 11:01:06 2014 -0700

    intel_infoframes: add VLV support
    
    Different reg offsets and such.

commit 47c551bd700b50fded87ccf81384fb2e384e5f6b
Author: Ben Widawsky <benjamin.widawsky@linux.intel.com>
Date:   Thu Mar 27 09:56:59 2014 -0700

    quick_dump: Put the cairo cflags with the other cflags.
    
    I had been hoping we can avoid linking against cairo, but alas it was
    not meant to be.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 9048aa1974aee567617220f9685ad115be0cbae7
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 26 22:57:52 2014 +0100

    tools/quick_dump: re-apply ducttape
    
    Someone with actual automake-fu really needs to fix this up for real
    since compiling a bunch of source files again, with broken dep
    tracking even just because we can't link against a .la somehow really
    isn't too awesome.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 961a46c82b4fe558ea726833aa9d390382742a10
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 26 22:15:12 2014 +0100

    tests/pm_rps: Add a new testcase to provoke the "stuck at max" bug
    
    Note that the sleep(5); to fully idle the gpu is _really_ important.
    Without it the bug is not exhibited.
    
    The issue at hand is that after gem_quiescent_gpu we are at max
    (expected, since the blocking waits peg to max), but then we never go
    down to a lower freq again until we're fully idle. The tiny load is
    sufficient to keep the gpu at max. I've played around with this a bit
    and even ridiculously low loads (like one MI_STORE per 50ms) are
    enough to keep the gpu at max freq.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 669a2fca6c5ccd256d2d767107963840f7de438e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 26 21:30:17 2014 +0100

    tests/pm_rps: quiescent harder
    
    Apparently some rps chips are prone to stick to max once you're there.
    And all the synchronous waits in gem_quiescent_gpu are _really_ good
    at forcing the kernel to go full throttle.
    
    And even a positively tiny load (one MI_STORE_IMM per 50 ms) is enough
    to eternally keeep it there, which means the first idle measurement of
    the freqs before we do the reset it completely busted.
    
    Just add a wait before the tricky test and call it a day.
    
    Option b) would have been to now have this tiny load, but I think a
    good reminder how quirky rps is is always welcome. Just in case we
    start sleeping too easy at night.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=74956
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 896b550984cf3ffd0fa67051d5b9cf0239634894
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Mar 24 18:42:39 2014 +0000

    rendercopy/gen8: Remove a hole in struct gen8_blend_state
    
    Using uint64_t in that second member makes it aligned to 64bits, while
    the first member is only 32bits. We then had a 32bits hole in there!
    
    Found-by: Chris Wilson <chris@chris-wilson.co.uk>
    Cc: Ben Widawsky <benjamin.widawsky@intel.com>
    Cc: Rafael Barbalho <rafael.barbalho@intel.com>
    Tested-by: Rafael Barbalho <rafael.barbalho@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 7255a84c9c8f4d46b47d490331100a11179180a1
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Wed Mar 26 11:02:48 2014 -0700

    testdisplay: make termio unbuffered
    
    So hotkeys take effect immediately.

commit 3d9e63f2ad0c676b3efba4c854ef645ae60ee7e1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 26 16:37:15 2014 +0100

    lib/igt_fb: api documentation
    
    Also realign function parameters and replace abort() with igt_fail()
    while at it.
    
    v2: Forgotten to add a nice intro.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7568edf4b1dd0f8c1b061a2bb53d593ff9d4d33d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 26 16:36:46 2014 +0100

    lib/igt_fb: setup font in igt_get_cairo_ctx
    
    We always want the same boring one, so extract it.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ae461e67e8816aa7cd80791216a839d92e04f0e5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 26 16:09:27 2014 +0100

    lib/igt_fb: drop kmstest_ prefix from static functions
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c6c2b2bb7039e8cc89841bd9782a61b7d734dfe2
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 26 15:15:49 2014 +0100

    lib/igt_kms/bf: doc skeleton
    
    igt_kms docs are just skeleton and also added igt_fb to make sure the
    linking works correctly.
    
    Next up: Actually documenting igt_fb.
    
    Also fix that depency spelling fumble I've copied around to a few too
    many places.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 64401f57e958998d537ff67525d5f1e9a4f76b22
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 26 10:19:42 2014 +0100

    lib: fold igt_display into igt_kms
    
    For 1 function and 2 types we kinda don't need separate files.
    Especially now that igt_kms is much more focused on the actual modeset
    stuff with all the framebuffer helpers extracted to igt_fb.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9aea7ae541212e4116af8d5d922d7cbcc571df50
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 26 09:18:11 2014 +0100

    lib/igt_fb: switch to igt_ prefix from kmstest_
    
    Shorter and more in line with our general igt_ prefix for everything
    which isn't somehow intel or i915-gem or otherwise hw specific - these
    helpers here are all fully generic framebuffer handling functions
    based on kms + cairo.
    
    Well, the actual buffer alloc is done with i915 gem, but meh ;-)
    
    Two special cases:
    - bpp_depth_to_drm_format and drm_format_to_bpp completely lacked
      prefixes, so just add igt_.
    - write_fb was a bit misleading given that we have gem_write for
      uploading to buffers. Rename that to write_fb_to_png to make it
      crystal clear what this thing does even without looking at docs.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 57d7db8cf8c407541d1ed57348a6f468c2b73577
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 26 09:06:11 2014 +0100

    lib: extract igt_fb library
    
    Stuff all the framebuffer creation, cairo and drm fourcc format
    handling in there. This gives us a very clear cut in the headers where
    igt_fb.c only needs to include igt_fb.h, and igt_kms.c includes both
    (well igt_kms.h pulls in igt_fb.h since we always need this).
    
    The aim here is to add api docs for igt_fb since that part of the kms
    library seems fairly stable already, while all the mode setting and
    iteration is still a bit in flux.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0b3019733bce0eb7ec4bce39e4ee470f98639c36
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 23 16:53:49 2014 +0100

    gitignore: Add logfiles from make check
    
    A bit annoying to see this stuff around in git status, so exclude it.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ef107940bb1f1aaa8608d5c7f6840a9990706dec
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 23 16:53:14 2014 +0100

    lib/igt_kms: make kmstest_get_cairo_surface static
    
    Only used internally in igt_kms.c.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2fc2fa547190f1ba6083ffab67f9ebfb077a544d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 23 16:52:49 2014 +0100

    lib/igt_kms: s/kmstest_create_fb2/kmstest_create_fb/
    
    Simplify the name since the old _fb function is now gone.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 70182167d6d39e18d03109687918752d04165c32
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 23 16:36:40 2014 +0100

    lib: remove kmstest_create_fb
    
    Use the new-style function using drm fourcc codes instead everywhere.
    
    To easily use thew fourcc based interface also expose
    bpp_depth_to_drm_format from the library. Finally include drm_fourcc.h
    from the igt_kms.h header since pretty much everyone needs this now.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 288e80f2788153cefda271e3847c82af3f40791c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 23 16:24:38 2014 +0100

    lib/igt_aux: Lost doc polish hunk.
    
    Oops.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 785a0cd4ba8bf7e89dc91fdc6c2fbe2e78d26f5b
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Tue Mar 25 11:35:23 2014 -0700

    quick_dump: Fix the danvet fallout.
    
    quick_dump built fine, but it could actually run, since a lot of the
    linking happens at run time. There is one hack where we redefine the
    environment stuff, since depending on igt_aux means we have to pull in
    libdrm, which I do not want to do.
    
    Cc: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit db25973c8651052dc2fd024ab67a8cea878aedc4
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Wed Mar 26 17:24:43 2014 +0200

    lib/intel_batchbuffer fix OUT_RELOC doc tag
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>

commit 71c6f87eb3dacffbd489c83acfe95baf613d20cb
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 26 15:09:23 2014 +0100

    lib/igt_core: fix igt_skip_on_simulation regression
    
    I've forgotten that we might want to call this from within specific
    subtests (or special helpers like the autoresume one).
    
    Also props for being competent enough to write a testcase, but
    incompetent enough to botch the job up.
    
    Fix both things and remove a leftover debug printf while at it.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c8190147526000bc002c611bd3612caf2de22bf8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Mar 25 17:46:32 2014 +0100

    README: document quirks for regenerating gtk-doc
    
    It sucks a bit atm :(
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 05f6a35d40a9374ea560c88c2b12a715eb404261
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Mar 25 14:23:20 2014 +0100

    tests/gem_exec_parse: fixups for the recent massive refactoring
    
    I think we might have some use for a do_ioctl_expected_errno or some
    such thing. But that's for later.
    
    Cc: Brad Volkin <bradley.d.volkin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6bf7307d8d5e0f1581cc3856528f7f49ef552036
Author: Brad Volkin <bradley.d.volkin@intel.com>
Date:   Wed Jan 29 13:58:30 2014 -0800

    tests/gem_exec_parse: Test a command crossing a page boundary
    
    This is a speculative test in that it's not particularly relevant
    today, but is important if we switch the parser implementation to
    use kmap_atomic instead of vmap.
    
    Signed-off-by: Brad Volkin <bradley.d.volkin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 56fee51b3140d33824bafc79c86c5c38346807cc
Author: Brad Volkin <bradley.d.volkin@intel.com>
Date:   Wed Jan 29 13:58:29 2014 -0800

    tests/gem_exec_parse: Test for batches w/o MI_BATCH_BUFFER_END
    
    Signed-off-by: Brad Volkin <bradley.d.volkin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1f3e03bee3af336c6b7b47e04e9f0a552a9a9289
Author: Brad Volkin <bradley.d.volkin@intel.com>
Date:   Wed Jan 29 13:58:28 2014 -0800

    tests/gem_exec_parse: Add tests for bitmask checks
    
    Signed-off-by: Brad Volkin <bradley.d.volkin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1b1321cde7b60d413b425f358e6ecd2bd47b90fb
Author: Brad Volkin <bradley.d.volkin@intel.com>
Date:   Wed Jan 29 13:58:27 2014 -0800

    tests/gem_exec_parse: Add tests for register whitelist
    
    Signed-off-by: Brad Volkin <bradley.d.volkin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 59cb7e105e0ba3d4b1c3a378d962ec270eaa3700
Author: Brad Volkin <bradley.d.volkin@intel.com>
Date:   Wed Jan 29 13:58:26 2014 -0800

    tests/gem_exec_parse: Add tests for rejected commands
    
    Signed-off-by: Brad Volkin <bradley.d.volkin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e8b4ecd387ec12fb6ef28fd64307688f70ea1d92
Author: Brad Volkin <bradley.d.volkin@intel.com>
Date:   Wed Jan 29 13:58:25 2014 -0800

    tests: Add a test for the command parser
    
    Start with a simple testcase that should pass.
    
    v2: Switch to I915_PARAM_CMD_PARSER_VERSION
    
    Signed-off-by: Brad Volkin <bradley.d.volkin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 49c611b5900fbc1a88b7dd59eb42458c090b25d0
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Mon Mar 17 19:09:23 2014 +0200

    tests/gem_reset_stats: run non hw context tests also on older gens
    
    To gain more coverage on interface, default context and banning.
    As there is no proper reset support for gen <= 3, we only
    do limited interface testing on those.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7a8109458ef92c6460852e3831aa30e53fef6857
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 14 16:47:50 2014 +0100

    tests/pm_rps: fixup the blt copy load helper changes
    
    All suggested by Jeff McGee.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 816c94723632b4876b3b0b965009ceab5e8bec2b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 23 15:14:16 2014 +0100

    lib/intel_batchbuffer: document header dependencies
    
    At least with the core library headers the situation is now fairly
    sane. There's still fun stuff going on around *_reg.h and most of the
    source files just have a cargo-culted list of headers ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 187b66da0946bd213cfb8c52178d70739707cad9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 23 15:03:14 2014 +0100

    lib/drmtest: api documentation
    
    Also rename the arguments of do_ioctl a bit for better clarity.
    
    I haven't figured out a way to reference other section headers, hence
    the links to igt_core and intel_batchbuffer are a bit fragile
    unfortunately. It gets the job done though.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7bb40944e2b2a92f6f52c288f8a88b0fcd14b991
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 23 14:45:13 2014 +0100

    lib: Use @include tag for include files
    
    Occasionally useful to read documentation ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8221fda087e5c445ddda2bf38c09c49c4d27a7fe
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 23 14:38:17 2014 +0100

    lib: s/igt_env_set/igt_check_boolean_env_var
    
    So I wasn't really happy with env_set since it's way too close to
    setenv(), whic actually _sets_ and environment variable. So use check
    instead of set as the verb (well adjective for env_set).
    
    Also sprinkle in some hints that we talk about a boolean setting here.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 47575c7710b2cc14f4b96de71540375e0c1d43b4
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 23 14:18:23 2014 +0100

    lib/igt_aux: api documentation
    
    I'm not really happy with the name of the igt_env_set function, I'll
    follow up with a patch to change it.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f5daeec724aea1613334f14d58b101a5c8e430b4
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 23 13:35:09 2014 +0100

    lib: extract igt_aux.[hc]
    
    And shovel all the various helpers in there.
    
    Also move igt_set_vt_graphics_mode to igt_kms.h since the function is
    implemented in igt_kms.c. And it fits better. I kinda missed this in
    the prep work.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 018f8c3c457d1609b18867a48a512e3639979dc9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 22:42:35 2014 +0100

    lib: s/drmtest_dumb_aub/igt_aub_dump_enabled/
    
    This is prep work to extract a new igt aux library with all kinds
    of random stuff. Also give it a bit a more suitable name to
    indicate that this is just a flag and doesn't do the aub dumping
    itself.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 95e89f0ede9ed84b5cd0c39b7f68bc08fb120c3b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 22:41:28 2014 +0100

    lib/intel_io: api documentation
    
    As usual de-inline functions for gtkdoc to see them.
    
    I've decided to exclude the register map stuff since that's not
    terribly interesting.
    
    Aside: gtkdoc falls over when the title of a section contains a slash,
    hence why it reads "IO" instead of "I/O". The fun ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2d4656fb699dd9bc5329b69b2955a6e4c3753971
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 22:23:04 2014 +0100

    lib/intel_io: rename mmio setup functions
    
    Makes their intent a bit clearer.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c03c6ceb293fd667a6b582377c182dfc3b6d0f32
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 21:34:29 2014 +0100

    lib: rename intel_gpu_tools.h to intel_io.h
    
    With the header cleanup we can now give this header a suitable name,
    since it now really only contains register access and other I/O
    functions and assorted definitions.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 254f19ba8dc4b00d0d5df0a4f8d0a0cb104b2df5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 21:29:01 2014 +0100

    lib: unnecessary header removal for drmtest.h, part 2
    
    I've left unistd.h in it - it's not strictly required but most users
    of drmtest.h want it for the open helpers, and then you kinda need to
    close that file descriptor again ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e49ceb869056255b8b6b94720b2279f6de88c893
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 21:07:37 2014 +0100

    lib: unnecessary header removal for drmtest.h, part 1
    
    Brought a few missing headers to light in ioctl_wrappers.h, too.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 924115bfcd5beae84f2e2d6b266c619659185475
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 20:18:51 2014 +0100

    lib: more unecessary header removal
    
    This time big with media_fill.h
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6cfcd715898198cbd8edd955ed24cf57f6e8d9ee
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 20:07:35 2014 +0100

    lib: remove uncessary #includes from headers
    
    Only include what the header itself needs. The big fish here is
    intel-gpu-tools.h. More will follow.
    
    One ugly thing removed here is the duplicated GEN6_TD_CTL #define, one
    of which was broken.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cd6d5a61b334aac183c85a3d2289f96a0364e911
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 19:35:40 2014 +0100

    lib: add #include "foo.h" lines like in manpages
    
    Should help in alleviating the header mess we have atm.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0e22f14ed642af94db5f0dd7461920274be3361a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 19:27:04 2014 +0100

    tests|lib: remove assert.h includes
    
    Only the igt core and non-test tools should have asserts to catch
    internal errors, tests and helper libraries should all user igt_asert
    instead.
    
    Fix things up where assert instead of igt_assert was used.
    
    One tiny step towards header sanity.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bff22f7317a39605d53cf142e2c0f5c424d9c12c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 19:21:26 2014 +0100

    lib: Move non-register things out of intel-gpu-tools.h
    
    Right now almost everything in there concerns itself with register
    access. Move everything else out (into drmtest.h for lack of better
    place) to prepare for api documentation.
    
    Also rename intel_drm.c to intel_os.c since it contains OS, not
    drm abstractions.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7754c4dd769e61ea57bf3e4ab635099b47aa6223
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 18:16:30 2014 +0100

    lib/intel_batchbuffer: api documentation for render copy/media fill
    
    Also fix a fumble in the documentation for intel_blt_copy. One thing
    we might want to do is unify the parameter ordering here a bit ...
    
    Again gtkdoc fails to pick up the documentation for struct igt_buf :(
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 43b7aa44fdc8dee372f6d0766e953da0a36de25a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 18:04:52 2014 +0100

    lib/intel_batchbuffer: drop cpu_mapping from igt_buf
    
    It's unused. There's still num_tiles getting in the way of things,
    but that is used by gem_stress a bit.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 53a4d9e982420e8a921ecf7b9542adbd3586317c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 15:49:02 2014 +0100

    lib/intel_batchbuffer: igt_ prefix for rendercopy/mediafill funcs
    
    Now everything is prepared to pour some neat api docs over this all.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 83a4c7d3eb6347f9b743144611b08a2869f11f94
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 15:44:48 2014 +0100

    lib/intel_batchbuffer: igt_ namespace for the buffer structure
    
    Step one to properly namespace the rendercpy/mediafill functions. Als
    give the buf_height/width helpers a proper igt_ prefix.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 82c6dffe9fdc75a7ef3b9a7e53e1c20d8a9b3703
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 15:41:42 2014 +0100

    lib/intel_batchbuffer: un-inline buf_height/width
    
    gtkdoc won't pick them up otherwise.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit aaebbc513a2f1fd94e9db5fc2841c2bd617e3472
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 15:35:16 2014 +0100

    lib: make media_fill.h an internal header
    
    Same deal as with rendercopy.h.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7dc0001f3db58af82f7e34c83a9fdb5fe90baccd
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 15:31:15 2014 +0100

    lib: make rendercopy.h an internal header
    
    And move the public interfaces into intel_batchbuffer.[hc].
    
    A bit messy since we are fairly inconsistent with our header #include
    handling.
    
    Also exclude rendercopy.h from the documentation.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a8e8654f81380c19f7c90479f98b9d9314f638b3
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 15:12:57 2014 +0100

    lib/intel_chipset: api docs
    
    Unfortunately gtkdoc doesn't pick up the intel_pch enum.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 266b26b3eda733dcc2c0a7cc6061b024a0dede70
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 14:59:58 2014 +0100

    lib/intel_chipset: intel_ prefix for pch global
    
    Just a bit better namespacing.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit aed95c390ae834a1661fb1e4ec433177b1c01fcc
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 14:54:28 2014 +0100

    lib: consolidate chipset helpers in intel_chipset.[hc]
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 94e1b6af99b3548014686a0943bb286e3c81a889
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 14:45:50 2014 +0100

    lib: rename intel_pci.c to intel_chipset.c
    
    This is to consolidate all the chipset related functions to
    intel_chipset.[hc].
    
    Unfortunately we need to rename a wrapper lib file in quick_dump, too.
    And quick_dump makes automake a bit unhappy apparently.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 52edf3a17714e1ba2a9060401ec0f63614bc632b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 14:45:54 2014 +0100

    tests/kms_cursor_crc: Fix up breakage
    
    I've accidentally broken the new cursor size extensions, but it
    wasn't quite correct before already: Variables which are set in
    igt_fixtures _must_ be outside of the stackframe of the igt_fixture
    block.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a388f3b98f039403a4583748db980d4a44dd6748
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 22 13:22:11 2014 +0100

    lib: allow igt_skip_on_simulation outside of fixtures.
    
    Thomas noticed that in simulation mode a lot of the tests fall over
    instead of skipping properly. This is due to recently added
    self-checks which ensure that any call to igt_skip happens either
    within a fixture or subtest block (or it's a simple test without
    subtests). This is to catch bugs since pretty much always not wrapping
    up hardware setup and checks into these blocks is a bug.
    
    Bug simulation skipping is a bit different, so allow that exception.
    Otherwise we'd need to fix up piles of tests (and likely need to play
    a game of whack-a-mole).
    
    Also add a library testcase for all the different variants to make
    sure it really works.
    
    Cc: Thomas Wood <thomas.wood@intel.com>
    Cc: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c196c14319b8aae6369a9ce0ba349416847105a7
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Mar 21 14:36:54 2014 +0000

    build: Define enable_gtk_doc when the m4 macro is missing
    
    For setups where we don't have gtk-doc installed, ie when the
    GTK_DOC_CHECK macro doesn't expand, we still need to populate the
    enable_gtk_doc variable to provide a value to the configure summary.
    
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 20dbc5d4cfb51152278a2ad4627d1db102bf9225
Author: Adrian Negreanu <adrian.m.negreanu@intel.com>
Date:   Fri Mar 21 09:06:15 2014 +0200

    fix out-of-tree builds
    
    version.h is -include-ed assuming that builddir is the same
    as srcdir;
    
    In file included from <command-line>:0:0:
    ./../../tests/../lib/check-ndebug.h:3:1: fatal error:
    ../../tests/../version.h: No such file or directory
     #endif
      ^
    
    v2: Use top_builddir as suggested by Damien - builddir gets expanded
    to ./ which worked accidentally since automake includes top_builddir
    by default.
    
    Signed-off-by: Adrian Negreanu <adrian.m.negreanu@intel.com> (v1)
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 701a755bde7a6f4b3973ac76f4f00c8702db4c7d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Mar 20 17:31:16 2014 +0100

    tests/kms_cursor_crc: Review from Imre for Sagar's patch
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ba3a1a86b76d0648a341de4e86c84d2e2a515c51
Author: Sagar Kamble <sagar.a.kamble@intel.com>
Date:   Tue Mar 18 15:59:43 2014 +0530

    kms_cursor_crc: Enabling this test for all cursor sizes
    
    v1: Added 128x128 and 256x256 cursor size support.
    
    v2: Refined the test to use igt_subtest_f and automate enumeration.
    
    v3: Restructuring test enumeration using drmGetCap. [Daniel's review comments]
    
    Signed-off-by: Sagar Kamble <sagar.a.kamble@intel.com>
    Reviewed-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cde058ae355f47a2bf04a792bfb3647e95157397
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Tue Mar 18 11:18:56 2014 -0300

    tests/gem_gtt_hog: Fix for BDW
    
    Update XY_COLOR_BLT command for Broadwell.
    
    v2: stash devid and remove ugly double allocation. (by Chris).
    v3: fix inverted blt command size and stash fd, devid and intel_gen.
    v4: improved len calculation and noop between blt commands. (by Chris).
    
    Fixes: https://bugs.freedesktop.org/show_bug.cgi?id=73724
    
    Cc: Chris Wilson chris@chris-wilson.co.uk>
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit d8164356e7bd4a90b2292e3687ec5fa5ec7fd021
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Tue Mar 18 11:18:55 2014 -0300

    tests/gem_gtt_hog: Use XY_COLOR_BLT instead of COLOR_BLT.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit 2f96726c960dd2e4700214d30ccb86d33b354d2d
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Tue Mar 18 11:18:54 2014 -0300

    tests/gem_wait_render_timeout: Fix for BDW
    
    Update XY_COLOR_BLT command for Broadwell.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit 3e6d9d912aabacc3c07b6d97dde862d8f51fbf6e
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Tue Mar 18 11:18:53 2014 -0300

    tests/gem_wait_render_timeout: Use XY_COLOR_BLT instead of COLOR_BLT.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit e8562b30819e6554b4cdd5763a35069fba77c2a9
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Wed Mar 19 11:40:58 2014 -0700

    gem_wait_render_timeout: use igt_assert_cmpint
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 5a5880426eb275bb600551460eb23ad44e8c2fbf
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Wed Mar 19 10:14:15 2014 -0700

    Revert "gen8 rendercpy: temporarily disable"
    
    This reverts commit e41928e6c9bb3f24833a827903f1afeda83592d6.

commit d92c2cf1deafe1cb2404844b52c17817e0e1ba56
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Wed Mar 19 09:22:53 2014 -0700

    intel_gtt: Dump the whole GTT
    
    The tool formerly only dumped the aperture size, which is fine, but not
    everything interesting. Most of the patch is just the variable rename.
    The real work happens with using the BAR0 size divided by 2 instead of
    the BAR2 size.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 00bd3eba11de4ce4a7dacc62f131b401f7dfbabc
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Wed Mar 19 09:17:36 2014 -0700

    quick_dump: gen8 private PAT
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 10571b8ccb5f7bda61e3072705e5d0670f54afb3
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 16 19:34:37 2014 +0100

    lib/igt_core: Document library design best practices
    
    This is what I've been doing in the past few months when refactoring
    i-g-t code. More ideas and also patterns to add highly welcome.
    
    v2: Some minor polish on the text and add another bullet to reference
    the kernel's coding style.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3ea97f2e51e8bf39ecabae132cdc6b431c72f672
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 16 18:56:14 2014 +0100

    lib/igt_core: Small api doc fix
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f2e5dc0114f0045e28d7a562cec9daf23e978841
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 16 15:09:22 2014 +0100

    lib/igt_debugfs: s/igt_pipe_crc_check/igt_require_pipe_crc/
    
    Functions which provide feature checks through igt_skip should be of
    the form <prefix>_require_<feature>.
    
    Otoh feature checks which return in a boolean whether the feature is
    available should be of the form <prefix>_has_<feature>, e.g.
    gem_has_blt.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit dcf947aa4f2de2f3aa4766e0e3d31d2a992d3d84
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 16 14:52:32 2014 +0100

    lib/igt_debugfs: Remove igt_debugfs_init
    
    And also move the igt_debugfs_t type out of the headers.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cc8f0e6e3ab72beb6b296dd866fd27842dec283f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 16 14:49:35 2014 +0100

    lib/igt_debugfs: Remove debugfs from pipe crc functions
    
    All tests have now lost explicit references to igt_debugfs_t!
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9a7609a8e48ac69bfd786087abd18c8a858d6ad3
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 16 14:46:39 2014 +0100

    lib/igt_debugfs: Remove debugfs from igt_debugfs_fopen
    
    Also add a missing igt_assert to kms_fbc_crc and again add the missing
    Returns: section to the api doc.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f04f17bcd404d7be720148fee6bb425cdb41dab1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 16 14:41:25 2014 +0100

    lib/igt_debugfs: Remove debugfs from igt_debugfs_open
    
    Also update the api docs a bit since the Returns: section was missing.
    
    v2: Readd the accidentally lost line for @filename.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 28b6e41142c035b46d2784de399c5dadfa5ce429
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 16 14:40:32 2014 +0100

    lib/igt_debugfs: implement a singleton igt_debugfs_t instance
    
    Allows us to remove every so little bit of boilerplate from
    tests, once it's all rolled out.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8fe0c50871b0af87c5f41a6b6d3b31b9bffe9f25
Author: Mengdong Lin <mengdong.lin@intel.com>
Date:   Thu Mar 13 16:38:02 2014 -0400

    intel_audio_dump: fix CTS/M value index
    
    This patch fixes the reversed CTS/M value index when dumping the
    'audio M/CTS programing enable' register.
    
    Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>
    Reviewed-by: Haihao Xiang <haihao.xiang@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit 374290e4300768190fee5ad742f1f1beb036de4e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 14 16:08:10 2014 +0100

    tests: update .gitignoe
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b0b4f8db717500f2618c8077dc58c217eb46af06
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 14 16:07:28 2014 +0100

    tests/drv_suspend: new forcewake subtest
    
    I suspect that currently we have an issue in there with the runtime PM
    refcounting, but silly me developed this on a machine with runtime PM
    support ...
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2839619f497dae8353d0592dcccf183374a18f73
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 14 16:06:51 2014 +0100

    lib/igt_core: add printf attribute to igt_vlog
    
    I didn't know that this also works for the varargs versions of
    format strings. But gcc was kind enough to let me know.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ea18fc16cd88a31b5d390721ad103efa07e288f1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 14 16:00:22 2014 +0100

    lib: extract igt_open_forcewake_handle
    
    ... and I immediately regret that I've killed the return value
    for igt_debugfs_init, since we have callers which need to work
    without the forcewake stuff, e.g. the reg dumper needs to work
    without i915 loaded.
    
    Put this new helper to good use in the mmio code and the pm_pc8
    testcase.
    
    Cc: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 553d594b6efd117497791e708146588268c992a9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 14 11:01:09 2014 +0100

    tests/pm_rps: wait longer for idling
    
    Big cores seem to take forever to idle, at least my ivb here. Fairly
    ridiculous, so maybe there's more room for our debooster to kick in.
    
    Anyway, this gets the min-max-config-idle and reset subtests going
    somewhat reliably on my ivb. They still occasionally fail with the
    current frequency pegged to max (or close to it) for no apparent
    reason at all. Rebooting tends to fix it.
    
    Don't ask, don't tell.
    
    Cc: Jeff McGee <jeff.mcgee@intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a7dd98497a1a9c2dc31f667ad23da86d4b2d7ad9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 14 10:33:53 2014 +0100

    tests/pm_rps: use igt_assert_cmpint
    
    Much better debug output almost for free.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5cf8d8d6dbfec71746173fae2a64d40f39e144cf
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Mar 13 21:25:01 2014 +0100

    lib/igt_core: document the caveats of magic code blocks
    
    v2: Polish the wording a bit.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5632bc81d944ae5070c403688b995ff583bb1ac7
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 14 10:26:39 2014 +0100

    tests/pm_rps: load harder
    
    Big core platforms need some seriuos omph to break a sweat.
    
    This fixes min-max-config-loaded here on my ivb.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=75146
    Cc: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d4f89d0ff25f3b382e1eabe4f0def5a1c09082ea
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 14 10:12:55 2014 +0100

    tests/pm_rps: simplify load helper setup
    
    There's no need to be fancy here.
    
    Cc: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5188bbe23ea6e7a2bf4d5572b64f410399aba9f7
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 14 10:06:02 2014 +0100

    tests/pm_rps: ducttape for igt fork helper cleanup issues
    
    We don't call cleanup handlers when exiting a subtest currently, only
    when exiting the entire binary. Which means pm_rps falls over when it
    fails more than one subtest.
    
    Cc: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f962dee636f2992152617be4dc9e62c5055473ec
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Mar 13 17:59:47 2014 +0100

    test/kms_pipe_crc_basic: Fix up igt_kms conversion breakage
    
    Apparently the framework doesn't ignore disabled pipes correctly, so
    help it out a bit.
    
    Again an awesome track record for our QA and bug scrubbers :(
    
    Oh and while I rant: Docs for this stuff, please ;-)
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bd53d722dde87d67742b4ff4ee192bd8c6058328
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Mar 13 17:27:47 2014 +0100

    lib: add igt_vlog to print varargs
    
    ... and put it to immediate use in igt_display_log.
    
    To make this all add up also drop the return value of igt_display_log,
    no one really cared anyway.
    
    Aside: I've noticed that every time another subtest runs (at least
    with kms_pipe_crc_basic) the log indent level moves one up ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1e9e1baba389fe498be12390ceeeacb1d141a5cf
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Mar 13 17:20:05 2014 +0100

    lib/igt_kms: rip out custom verbose loggin support
    
    Instead just piggy-pack on top of igt_log.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 523d909834bd142373ff5b25a00881f93f3160cf
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Mar 13 18:09:41 2014 +0100

    NEWS: post-release blurb and mention api doc work
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit eaccd444f774ff88f9cfc24fb0a5e5b20f71d749
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Mar 13 03:35:02 2014 +0100

    lib: switch intel_copy_bo to directly take a size
    
    Instead of a width/height combination. Since I've been lazy with the
    math this now only accepts page-aligned copy operations, but that's
    all we need really.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 32d41cc7a7fc357758a60f019341805ae1ee418d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Mar 13 02:38:04 2014 +0100

    tests/prime_nv_tests: fix copied buffer size
    
    Doesn't affect the test since we only check the first few bytes. But I
    want to switch the copy code to always copy entire pages around, so
    use the right buffer size.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ec5f9e87882257fdde39166f0f4b931ecb5b6009
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Mar 13 01:13:28 2014 +0100

    lib: api docs for intel_batchbuffer
    
    - I didn't bother to document the BLIT batch header macros - I'm not
      too happy with them and they're fairly obscure.
    - intel_copy_bo could use some interface love, added a FIXME comment
      for now.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 49e3877ae7280efb62dc23ea748afbeb96934ace
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Mar 13 01:38:42 2014 +0100

    lib/intel_batchbuffer: Remove BATCH_LOCALS
    
    Totally unused, we have frisky implicit assumptions that the
    batch is called batch instead.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 675c91974e2e3cc781a4dd630c20c3f992eae8b8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 12 21:30:46 2014 +0100

    lib: remove hw context #defines
    
    The libdrm we require nowadays has them already.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3f284f796721f750cb8af4bac7839b5a6e1edb66
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 12 21:26:55 2014 +0100

    docs: Exclude debug.xml
    
    It is all just stuff used internally by the EU debugger only. Not
    really generally useful, expect if someone wants to write
    documentation for the debugger.
    
    Which needs a lot more than just this.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a095072b64a37a7df6a011608fb932796991a891
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Thu Mar 13 07:52:47 2014 -0300

    bump version to 1.6 and add the release date
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>

commit 981276819fdf6de312ecafcef27822741265f237
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 12 18:53:51 2014 +0100

    lib/igt_debugfs: api docs
    
    Again issues with an enum, this time intel_pipe_crc_source. The
    typedefs seem to work better here though.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 36a83a6c5ccfff7336d257aba499c4e72674615a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 12 19:24:00 2014 +0100

    lib/igt_debugfs: drop drm_fd argument from igt_pipe_crc_new
    
    It's nowhere used and removing it gives us a cleaner, more
    orthogonal interface.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 803d07b2fff95794d8a840728d417e8e1d31264c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 12 19:00:48 2014 +0100

    lib: make igt_debugfs_open infallible
    
    (Almost) no one cared anyway.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 096bb851f6bbcd018b3e7dc42930952971c4ea72
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 12 18:53:44 2014 +0100

    lib/ioctl_wrappers: api doc fixup
    
    Oops.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit adb28fd71d21175f047d7ed4cc3e4683a146b57b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 12 16:53:47 2014 +0100

    lib: move prefault helpers to igt_debugfs.c
    
    This way all debugfs library code is in one place, ready for some api
    documentation care.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 55e64989e5f0359796d6e71d6753e432861b04a4
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 12 02:34:40 2014 +0100

    lib/igt_core: api documentation
    
    At most a bit of comment of function declaration movement for more
    polish. One tricky bit is to #ifdef out (only for gtkdoc of course)
    the struct option; forward declaration - gtkdoc needlessly lists it.
    
    FIXME: The struct documentation for igt_helper_process somehow doesn't
    get picked up ... Same issue seems to be with the igt_log_level enum,
    I've shoveled the relevant documentation into igt_log in free-form for
    now.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d63fe1519d34f0d0311ef8e3472c8b83c3dcfde3
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 12 01:29:52 2014 +0100

    lib: extract igt_core.c
    
    Same game as with ioctl_wrappers.c.
    
    To split was rather clean except for the static function
    oom_adjust_for_doom. But that was a bug, the calls to it in the
    various open helpers should simply be done at init and fork time.
    Which was already the case, except for simple testcase.  So fix it up.
    
    While at it also start with a small section header for the
    documentation.
    
    v2: Don't forget to update the xml template ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 556c49f20bf93c32b55f494ec896703293e358cd
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Mar 11 23:27:06 2014 +0100

    lib/ioctl_wrappers: api doc
    
    Also some tiny polish to function interface:
    - @caching in gem_set_tiling should be uint32_t to match the ioctl
      struct.
    - s/size/length/ for gem_write/read.
    - move gem_get_num_rings to the other ring feature helpers.
    
    v2: Also demote gem_require_ring from static inline and move it, too.
    
    v3: Also move gem_handle_to_libdrm_bo.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 766c5bc6ae24fe2ec03ada80905ccfb1b18afc26
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Mar 11 22:58:07 2014 +0100

    lib: extract ioctl_wrappers.c
    
    I want to group the ioctl wrappers and related functions into their
    own documentation section.
    
    Apparently gtkdoc refuses to obey this wish without a corespdonding
    header. So appease it. Also gtkdoc seems to struggle with rebuilding a
    bit ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6c659264a6f6d54d966d9fc2a1651ad0405a8501
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Mar 11 16:18:48 2014 +0000

    tests: add missing assertion
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 682f69385a07b81ee0b2524b9556c0b768454147
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Mar 11 16:18:50 2014 +0000

    lib: Add missing header to Makefile.sources
    
    i915_pciids.h was missing from Makefile.sources, which caused distcheck to
    fail.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a90846adf52127afe6dd3537c047b93c31cb313f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Mar 11 21:03:39 2014 +0100

    gtk-doc: Document the docs
    
    - configure output to easily see whether docs are built or not
    - small blurb in README
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2d4438605efd57a7ed336df42326693065ee5d02
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Mar 11 16:04:29 2014 +0000

    drmtest: reformat the API documentation
    
    Make the existing documentation compatible with gtk-doc.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 14ea2a04ebfa287e33b69a3bc7e47f02ba93c9ed
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Tue Mar 11 16:04:28 2014 +0000

    Add API documentation support
    
    Add optional support for building API documentation using gtk-doc.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c769d0988b7fae0e758046ba165c9c52c4f2816a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Mar 11 15:45:22 2014 +0100

    tests/drv_missed_irq_hand: Make it robuster
    
    Just launching empty batches isn't enough load on my speedy g33
    to force the kernel to enable interrupts an wait for them.
    
    So use some real load. With that the test is now fully reliably on
    my g33 amchine.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c3f2b6a339e002c2ea3c0462ebce2a374b54e093
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Mar 11 15:44:28 2014 +0100

    tests/gem_exec_blt: More reasonable runtime
    
    Doing (1 << 18) - 1 repeats isn't really. With the reduced time the
    test is also useful in some shell scripted tests which need some real
    load (but not too much), like drv_missed_irq_hang.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e2ee8b408057e5139182f47e980f3af20272fa28
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Mar 11 15:32:30 2014 +0100

    tests/drv_missed_irq_hang: Remove debug output
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 20087e779d58fe0fdde156e329eb5d75e1e6336f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 7 09:27:00 2014 +0100

    NEWS: intel_audio_dump has now bdw support

commit 02a32701192cb4832d95e121d5ee014d98dd1234
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 7 09:23:58 2014 +0100

    configure: Bump libdrm requirements

commit 856afd588ef31d02c0dd8fd827a0af2725edc464
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 5 11:09:46 2014 +0000

    igt/gem_pwrite_pread: Fix relocation offsets for gen8+
    
    Oops, I didn't check to see if there was more than one call site where
    we built and execbuffer.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=75237
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 449509dddba1e4d3853093a872632b9504b8eaa7
Author: Mengdong Lin <mengdong.lin@intel.com>
Date:   Mon Mar 3 17:03:02 2014 -0500

    intel_audio_dump: add support for Valleyview
    
    This patch adds support for dumping audio registers of Valleyview,
    by reusing Ironlake code with a different base address and pipe number.
    
    Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>
    Reviewed-by: Haihao Xiang <haihao.xiang@intel.com>

commit fa8c75028e6c6ae523f915fdc212adb30fea1ec3
Author: Mengdong Lin <mengdong.lin@intel.com>
Date:   Tue Mar 4 10:13:09 2014 -0500

    intel_audio_dump: adjust code alignment
    
    Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>
    Reviewed-by: Haihao Xiang <haihao.xiang@intel.com>

commit 86d15e080d9977dcd3b0448cefb72259597b80d9
Author: Mengdong Lin <mengdong.lin@intel.com>
Date:   Mon Mar 3 13:52:06 2014 -0500

    intel_audio_dump: share common audio dump code for Ironlake, Haswell & Broadwell
    
    Most audio config registers of Ironlake, Haswell and Broadwell are almost same
    although the register names or some bit fields have little difference.
    And HSW and BDW already share their code.
    
    This patch further shares code for ILK and HSW/BDW:
    - ILK and HSW/BDW define their own base address to dump audio & display registers.
    - Small functions to dump a specific register are defined and shared.
    
    Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>
    Reviewed-by: Haihao Xiang <haihao.xiang@intel.com>

commit bae8a005d21288e61a547bba94b0a32a99c36b60
Author: Mengdong Lin <mengdong.lin@intel.com>
Date:   Mon Mar 3 13:23:50 2014 -0500

    intel_audio_dump: define get_num_pipes() to get number of pipes for a device ID
    
    It's for future code sharing because some registers define their bit fields
    according to the number of pipes.
    
    Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>
    Reviewed-by: Haihao Xiang <haihao.xiang@intel.com>

commit 1803f1ebfad1e14b5d0eb8560d99efd3ddb6ef67
Author: Mengdong Lin <mengdong.lin@intel.com>
Date:   Fri Feb 28 16:18:11 2014 -0500

    intel_audio_dump: define IS_HASWELL_PLUS to cover Haswell and its successors
    
    A macro IS_HASWELL_PLUS(devid) is defined to cover Haswell and its successors,
    for code sharing. Now it covers HSW and BDW.
    
    Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>
    Reviewed-by: Haihao Xiang <haihao.xiang@intel.com>

commit ed386663fe4894f9cfd2a3df4233292e0e3b39ac
Author: Mengdong Lin <mengdong.lin@intel.com>
Date:   Fri Feb 28 13:25:27 2014 -0500

    intel_audio_dump: move definitions of transcoder/pipe/port/converter earlier
    
    Move these enum definitions earlier for future code sharing.
    
    Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>
    Reviewed-by: Haihao Xiang <haihao.xiang@intel.com>

commit 92d319702553d31e70bcb1a098e896418f041a41
Author: Mengdong Lin <mengdong.lin@intel.com>
Date:   Mon Mar 3 11:04:39 2014 -0500

    intel_audio_dump: support using base address plus an offset to dump registers
    
    Layout of display and audio registers can be same for different Intel GPUs.
    For code sharing, this patches defines functions to
    - set the base address of display and audio registers
    - dump registers using the base address and an offset
    
    Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>
    Reviewed-by: Haihao Xiang <haihao.xiang@intel.com>

commit cdf74b69c908b869e7e2daca04f49c5e5d02c097
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed Mar 5 21:02:41 2014 +0200

    kms_setmode: Add clone-single-crtc subtest
    
    The clone-single-crtc will test various cloning scenarios.
    
    Currently it does limit the number of simultanously cloned
    connectors to the number of pipes in the system. That restriction
    can be lifted in the future if desired.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit a3b80912a993b4b6952917afea41906f88dda01e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 5 11:09:46 2014 +0000

    igt/gem_pwrite_pread: Fix relocation offsets for gen8+
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=75237
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 072d358bf03d0c39dc83bce0b93801d030d2324f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 28 21:44:22 2014 +0000

    igt/gem_pwrite_pread: Fix XY_SRC_COPY command length for gen8+
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=75237
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit fa6b1516c5a5be1fcff8ee476a5e280e2e3cb16d
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Feb 26 16:51:12 2014 -0300

    tests/pm_pc8: be more verbose on test_i2c failures
    
    Whenever I see that error, I go and print the numbers so I can check
    which one is failing.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit d406249bedb61120ea3f8c780ea995b8c70d3d8c
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Feb 26 15:42:07 2014 -0300

    tests/pm_pc8: use intel_gen instead of a big IS_GEN check
    
    Much better!
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 0a57d0b8d30b73f7d515a2099355f7883681d699
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Feb 26 15:13:00 2014 -0300

    tests/pm_pc8: BDW should also support PC8 residencies
    
    And I'm hoping the MSR register addresses will be the same.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit d3582aeade9d90cb4adc8ff7c4339198494aaae7
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Feb 26 14:48:50 2014 -0300

    tests/pm_pc8: use XY_COLOR_BLT instead of just COLOR_BLT
    
    And add BDW support to it.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 6a6b8a213813de80a86d281ee9111aaca8ed5b36
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Feb 26 11:12:28 2014 -0300

    tests/pm_pc8: add "stay" mode
    
    I used to have a binary that would just disable all the screens - so
    we can enter PC8/runtime PM - and then sleep forever. I used this
    binary many times while debugging PC8 and runtime PM, and I also sent
    the binary to many people so they would be able to test these things
    without X running.
    
    Since pm_pc8 already implements everything that the separate binary
    needs, and it even has some additional code to try to configure the
    environment to actually reach PC8, it's easier to just ask people to
    run "sudo ./pm_pc8 --stay" instead of sending them a file, asking them
    to compile it, setup the environment, and then run it.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 8c475e0ba69c585bc11062edd1f7fc4bbded811c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Feb 26 12:01:47 2014 +0000

    evictions: Limit the number of minor eviction surfaces to fit in RAM
    
    We allocate more surfaces than used in a single pass in order to stress
    the eviction code between batches. The intent here is not to exercise
    swapping, and we fail to check that there is enough swap+memory to hold
    all our surfaces. So limit the number of surfaces we allocate to fit
    into RAM, and then require that the number of surfaces we need for
    testing is less than the number of surfaces we can allocate.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ea332b64b6e9f6935da4b43f05fefcdcea32cc64
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Feb 26 11:56:16 2014 +0000

    lib: Test against available swap
    
    Even if we ignore the double-accounting bug in Linux, we need to be sure
    that the remaining swapspace is adequate for running our test as the
    system may be under load before we even start.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 37773d91d9b56f9f06c86e405e8dc9343f2c71c1
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Feb 25 17:46:27 2014 -0300

    tests/pm_pc8: add pci-d3-state subtest
    
    Currently the test suite just looks at the files provided by the
    runtime power management framework to check if the device is runtime
    suspended. Add a test that reads the PCI config space to check if the
    device is actually in PCI D3 state or not.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 31b20f7478a27e159482ac23f3d128e90ca98d23
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Feb 25 16:40:51 2014 -0300

    tests/pm_pc8: add reg-read-ioctl subtest
    
    After I finally fixed the code that WARNs if we're runtime suspended
    when reading registers I started getting the WARNs, so this test
    should reproduce them on a Kernel with the problem.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 81ade89d6444ed4159c8cafb0512254f02ec34e0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Feb 24 08:52:28 2014 +0000

    gem_render_tiled_blits: Trim usage to fit within RAM
    
    This is a render correctness test, the intention is not to exercise the
    swapper (but preferrably some eviction code).
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=75247
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4550a18a571611197d3958ab3c1071ef69ec3838
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Feb 24 08:52:28 2014 +0000

    gem_render_linear_blits: Trim usage to fit within RAM
    
    This is a render correctness test, the intention is not to exercise the
    swapper (but preferrably some eviction code).
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=75247
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8ebc02a54c22b7a83a34c923153861848183cd96
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Fri Feb 21 13:15:35 2014 -0800

    quick_dump: Add missed broadwell autodetect
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 42aa254c65fa47fbea38a268814f815166adc056
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Feb 21 17:19:57 2014 +0200

    kms_flip: Add dpms-vs-vblank-race and modeset-vs-vblank-race subtests
    
    dpms-vs-vblank-race and modeset-vs-vblank-race try to race wait for
    vblank ioctls from one thread against modeset/dpms ioctls from another.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit a0c936cfc128dfea6c58c4eef1e56cc29df21406
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 21 15:14:08 2014 +0000

    kms_flip: Skip tests that try to inject GPU hangs if already terminally wedged
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0cc6a219f1de667ddc0c9a4011dc1c36a584be7b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 21 15:08:22 2014 +0000

    kms_flip: Assert that hang_gpu() should only fail is the GPU is already hung
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit bf74a0ca3fa3b2656c5656c2365d11b6b406dbe6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 21 14:42:27 2014 +0000

    tests: Compile all threaded tests with -pthread when appropriate
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5f190f2d674222b27eff9f80d14761fde2e8fe7a
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Feb 21 16:08:28 2014 +0200

    kms_flip: Fail the subtest if page flip hang recovery wasn't actually tested
    
    Context banning can prevent the page flip hang tests from actaully
    testing anything, so make the relevant subtests fail in that case.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 48ba2cdf969698a2520193ec0c9cff99f89fe1f6
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Feb 21 15:14:33 2014 +0200

    kms_flip: Restore rings to running state in unhang_gpu()
    
    If things go bad, make sure the rings aren't left in the stopped state.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 30c21ffe7f149c15ae7efdb825bbb6671a7f2e9b
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Feb 20 17:47:53 2014 -0300

    tests/pm_pc8: try to modprobe msr
    
    Just in case it's compile with M instead of Y. If the module is not
    there, the other assertions will catch the problem.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 41267dca3cd62a49b7a7434e12b4f1164d95454b
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Feb 20 17:45:53 2014 -0300

    tests/pm_pc8: try to modprobe i2c-dev
    
    Just in case the module is compiled with M instead of Y. If the module
    is not there, the other assertions will catch the problem.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 4eb37bf4c130fe1264c7f63e30faff3a76cd093d
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Feb 18 14:27:19 2014 -0300

    tests/pm_pc8: add gem-idle subtest
    
    It's triggering WARNs and DRM_ERRORs on current drm-intel-nighly.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 6f288749f4f8c454f65e7de38c9bcff7a9a29411
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Feb 17 16:29:36 2014 -0300

    tests/pm_pc8: remove sleep() call when setting up the environment
    
    This sleep was added because sometimes we didn't reach PC8+
    residencies, but it was still not enough to prevent the problem every
    time, and it is really not needed most of the times. I have
    investigated more and it seems that we only have to wait until after
    some minutes have past since the machine booted. So just remove the
    sleep for now since when you run each subtest in a separate process,
    you end up having to sleep at every subtest.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit c9524235dd5eb3cf2d9fcd7d264c78cc2d1f3802
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Feb 21 10:05:54 2014 -0300

    tests/gen7_forcewake_mt: use -lpthread
    
    Otherwise it fails to compile on my machine.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 3db29744f74017a99d1b430b30623dce405ebb1a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 21 09:38:43 2014 +0000

    kms_flip: Try to make hang_gpu() robust against hanging the GPU
    
    On a bad day, hanging the GPU may be terminal. Yet even if the GPU is
    terminally wedged we expect modesetting (and pageflips) to continue.
    That deserves to be a dedicated test, but in the meantime we should
    strive to avoid falling over just because the code is not resilient.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 005d1dcc9882ab4e8a8b91b5c71da5a36b1491e6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 20 13:41:41 2014 +0000

    Add i915_pciids.h
    
    This is a pure copy from the central location at
    kernel/include/drm/i915_pciids.h

commit ff87c4183b31c790e50f174237167716830832e6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 20 13:27:05 2014 +0000

    tests: Add gen7_forcewake_mt
    
    This is supposed to be snafu...
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 06189c60295e806e5073ff3473f038b1bedde212
Author: Joao Santos <joao.santos@intel.com>
Date:   Wed Feb 19 14:19:19 2014 +0000

    build: Skip kms_plane on Android
    
    Skipping this test until we have Cairo in the build.
    
    Signed-off-by: Joao Santos <joao.santos@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit e292e00de0553ef059ddeef572db741ec3b6c23f
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Feb 18 14:17:10 2014 +0000

    kms_pipe_crc_basic: Remove spurious inclusion of glib.h
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 1daafe27625d53783b9dcb41bf72aaaade5f735f
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Feb 18 14:16:49 2014 +0000

    kms_plane: Remove spurious inclusion of glib.h
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 959783684e2010326d91db2aa55f424f7e041c84
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Feb 13 19:22:53 2014 +0100

    test/kms_flip: fix up igt logging conversion
    
    Silly me ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cef9b31a2415f59899c2d7a9fc895aa7b66d3230
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Feb 13 19:22:35 2014 +0100

    testdisplay: Allow to specify the dpms level
    
    aka the jbarnes-me-harder mode
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 30cfde5822d1ec9b918576fa49aff9ab41d4fe65
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Feb 13 19:15:38 2014 +0100

    testdisplay: implement dpms test
    
    For those who wonder about the -j switch ... all the good ones have
    been taken, so this is the Jesse-flag.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b5b0aeb6a552c014fb224a3c3ff913fbab45b5e0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Feb 13 14:43:20 2014 +0100

    NEWS: Mention new logging support

commit d1e318d23df6c4da2a5885f91f97aa565e001bf8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Feb 13 14:25:55 2014 +0100

    tests/kms_flip: use igt logging
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c88f898c578bd14aee049aceacb0d95a0703aab8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Feb 13 14:12:03 2014 +0100

    tests/gem_seqno_wrap: use igt logging
    
    Cc: Mika Kuoppala <mika.kuoppala@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 46ec3ef1f80c1f42f24a13d742887333efc678d2
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Feb 13 14:09:41 2014 +0100

    test/pm_rps: use igt logging
    
    Cc: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit eebdf7f9204686f5d937d6a3084056fb86c6e7de
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Feb 12 15:19:15 2014 +0100

    lib: (somewhat) structured logging support
    
    Apparently there's a bit a need for more verbose output in testcases,
    mostly for debugging purposes. At least gem_reset_stats and pm_rps
    have a verbose mode.
    
    On top of that we're currently not taking advantage of piglit's "warn"
    state all that much. But I think it might be useful for testcases which
    are notorious for some kinds of spurious failures, like e.g. the really
    nasty timing checks in kms_flip. If we demote some of them to just
    warnings we could run the overall tests more often.
    
    Hence this patchs adds a new igt_log function with the three levels DEBUG,
    INFO and WARN. Plus a bunch of convenience helpers to keep the test
    code tidy.
    
    The level can be set through an enviroment vairable IGT_LOG_LEVEL with
    info being the default. Also tests can look at the selected log level in
    case they want to run costly debug functions only when needed.
    
    Comments highly welcome, I plan to roll this out over tests which can
    use it (not all, imo that's too much churn) once we've settled on the
    interfaces/semantics.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 60a24a22ba4c7df46ebae0e99f0aa09604a6fb25
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Tue Jan 28 09:53:50 2014 +0800

    Assembler/bdw: Remove the unsupported cache agent for WRITE(...)
    
    The Sampler/Constant cache is read-only. And it can't be used as
    the target cache agent of WRITE message.
    
    Reviewed-by: Xiang, Haihao <haihao.xiang@intel.com>
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit a2bf80fd8462b0014f2e230421173677bbb8b742
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Wed Feb 12 15:54:27 2014 +0000

    tests: fix sub-test enumeration
    
    Ensure sub-tests can be listed correctly by doing any test setup within
    an igt_fixture block.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ec3b1332f87e956e7de8e03e2cdbb962df05e214
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Feb 12 00:12:07 2014 +0100

    NEWS: Mention Damien's new helper library

commit a036959f3ed1f0a9c3e80b9feea69713289aa4ef
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Feb 11 23:54:19 2014 +0100

    lib: Make igt_skip noreturn
    
    This is a remnant from the subtest code before we had proper
    fixture blocks. With those there's no no reason to have igt_skip
    calls outside of fixtures or subtests, so we can assert this and
    hence always jump out.
    
    Suggested by Thomas Wood since static analyzers got confused about
    this.
    
    To check for fallout I've run all tests as non-root so that they'll
    all skip. Only very little fallout resulted.
    
    Cc: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0d1084fe3f88e2b51c50ff963a2ae81a6129474d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Feb 12 00:07:11 2014 +0100

    lib: install exit handler only on success for prefault control
    
    Otherwise we'll hit an igt_skip in the exit handler, which upsets
    the new in_fixture||in_subtests checks.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 58633cfde46cb6010b3bdeeca58a52ec536ff66c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Feb 12 00:05:57 2014 +0100

    test/gem_gtt_hog: bail out earlier
    
    This way we properly skip instead of failing hard. Just result
    polish when running on non-intel systems.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 36be04bdfb1d34f11b6bd50db7c50d213c4498b7
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Feb 11 23:52:43 2014 +0100

    tests/gem_madvise: use correct main block
    
    igt_simple_main doesn't enumerate subtests ...
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3514872efeaa2fc0b656ed6949b9e6b7bf67633f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Feb 11 23:50:10 2014 +0100

    tests/gem_bad_ctx_exec: Properly wrap in igt_fixtures
    
    Caught by the new nasty assert in igt_skip.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a86651fa2476087dd04d03cf86247761595c0aef
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Feb 11 23:47:50 2014 +0100

    tests/gem_close_race: Properly wrap init code in fixtures
    
    Blows up otherwise if there's no intel gpu around.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 349ba5d3e1cbc0d130305547627c5de5a35ae1a2
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Feb 11 23:36:24 2014 +0100

    lib: fix header include
    
    drm/ path is for the headers from kernel sources, without when using
    the pkgconfig libdrm version.
    
    Cc: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b4e85b7b53f2ebf3a8d5edab5ca98d6f8715a680
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Feb 11 17:53:00 2014 +0000

    lib/display: Fix typo in igt_plane_get_fd_id() (fb)
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 82108d96566dfa1210b1fbe2f6deaf6d77d1e34e
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Feb 11 17:48:32 2014 +0000

    kms_pipe_crc_basic: Remove igt_display_get_n_pipes() usage in main
    
    The fixture won't be run when listing the subtests and thus we can't use
    igt_display_get_n_pipes() in the list of tests. The alternative here is
    to list the subtests with the maximum values and skip when not supported
    on the platform.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 2043e6b265929ad2444cede7412f73a9cbe112a5
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Feb 11 17:45:48 2014 +0000

    lib: Fix igt_ouput_get_plane() typo (output)
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 3386b4b2866b991b49e7386d51a3f4b9d9b681c0
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Feb 11 13:54:10 2014 +0000

    lib: Don't wait in igt_wait_for_keypress() if stdin is not a tty
    
    When running in a non interactive terminal, there's little point in
    trying to wait for some input on stdin.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 0d5de66fc6b85a0555ecc9d853e48c464122bb26
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Feb 6 21:20:35 2014 +0000

    kms_plane: Start a basic display plane test
    
    We test the sprite plane positionning in there, for now.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 3027de0a6653c6168fbc12f895a13c7d2a9ee0e2
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Feb 7 14:12:44 2014 +0000

    lib/display: Fix assertion in set_plane()
    
    When cycling throuth planes, we still want to reach the cursor plane. We
    have to special case IGT_PLANE_CURSOR as a shorthand to select the
    cursor plane (the last plane on the pipe).
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit fb146aa7825b8f3a1c490f30b4c3912b7fe8eb6d
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Feb 6 21:18:28 2014 +0000

    lib/display: Wait for a vblank after SetPlane()
    
    Let's be testing friendly and gently wait for the next vblank before
    returning from commit() when needed.
    
    After igt_display_commit() one can safely look at the CRC.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit da0f1cf57083c17d047d64bda53d63bd728fed7c
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Feb 6 21:06:59 2014 +0000

    lib/display: Print the fb id, not its pointer in the set_fb() log message
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit da896537b8919e3e4dbd2067a38ec49f28603e8a
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Feb 6 21:06:25 2014 +0000

    lib/display: Add a way to wait at every commit for inspection
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 377f48afe668fc118d6dd902641a1c41c4430b44
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Feb 6 21:06:07 2014 +0000

    lib: Add a helper to wait for a keypress
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit c7e3413a081aa7fb2b9f4de5b99c64802b649392
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Feb 6 19:10:51 2014 +0000

    kms_pipe_crc_basic: Use kmstest_create_color_fb()
    
    Reducing again the per-test number of lines.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 1d2c9d5e573409edd846c445619c0d41474a0ff0
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Feb 6 19:09:53 2014 +0000

    lib: Include drm_fourcc.h from igt_kms.h
    
    This include is needed for the DRM_FORMAT* defines used in the fb
    creation helpers.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 063194074e5ce0ad9ceb0f3318e714aaad05ec21
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Feb 6 19:04:58 2014 +0000

    kms_cursor_crc: Use kmstest_create_color_fb()
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit a1df2f4363d1ed770db36fb8aba14e65087f11c3
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Feb 6 19:04:12 2014 +0000

    lib: Introduce a new helper kmstest_create_color_fb()
    
    We need to create fbs of a single color in a few places. Time to
    abstract that out to a helper function.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit f0e0b2ae658c44461d00adddea6cc5bba711966d
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Feb 6 17:54:33 2014 +0000

    lib/display: Add support for DRM planes
    
    We can now extend our plane support beyond primary and cursor planes.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 1c608a2af81f94e601b5961987a6b86eb0e3a824
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Feb 6 16:26:31 2014 +0000

    tests/kms_cursor_crc: Use igt_pipe_crc_collect_crc()
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 6954103192bba9241a4b115a85cb43de779d375f
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Feb 6 16:17:38 2014 +0000

    lib/crc: Add a helper to read a single CRC value
    
    In this case, we also take care of starting/stopping the CRC collection.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 7d0e2f618c05c784655c9b2a592e7f4de8df88cb
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Feb 6 16:17:14 2014 +0000

    lib/crc: Factor out reading a single CRC value
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 162914b9ed0af1436e260133a90b91f32e78b4fe
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Feb 6 16:05:19 2014 +0000

    lib/display: Check if we're trying to use the same pipe on 2 outputs
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 65fef0a43410b40f43dc5e0b8937199bebdccf79
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Feb 5 17:51:50 2014 +0000

    lib/display: Allow to override the display verbosity with an env variale
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit d435829ae9702c9f777b68227e43eafd702a8031
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Feb 5 17:14:12 2014 +0000

    kms_cursor_crc: Port the test to the new modeset API
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 09faa45f521c98dda0ebc07a417fb34a048a697b
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Feb 6 15:45:42 2014 +0000

    lib/display: Add a way to specify we don't care about the pipe to use
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 5ec399b4a6b11dc6c2b1a1bd25b745d4dd9279a6
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Feb 5 16:36:51 2014 +0000

    lib/display: Add support for the cursor plane
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit c4823ce9a4d51eeb422be822e8a6d971a7141c24
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Feb 5 15:54:13 2014 +0000

    lib/display: Fix the SetCrtc disabling log message
    
    We were displaying the value of fb_id (0), when the actual interesting
    thing about this call it that it'll just down the pipe.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 969435a4078be5c1926c6ecbcfcbedfd6a9d8a64
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Feb 5 15:32:15 2014 +0000

    tests/kms_cursor_crc: Move the array of cursor fb_ids to the stack
    
    This array is not used outside ouf create_cursor_fb(). A stack allocated
    array is enough.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit d39f5a059b688878f07586f7a9292299316424c2
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Feb 4 15:11:29 2014 +0000

    kms_pipe_crc_basic: Use igt_display_get_n_pipes() instead of hardcoding 3
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 72e9a6c8d596d062bd66503c8c2625e1e9e83ba6
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Feb 4 14:59:39 2014 +0000

    lib/display: Add an accessor to retrieve the number of pipes
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit a260599b6f557b66346fcbcc81c54f0dc7382f9c
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Feb 4 12:07:56 2014 +0000

    kms_pipe_crc_basic: Use for_each_connected_output()
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 992bd5d62a666657aae3e231e9cb7638c405595c
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Feb 4 12:06:57 2014 +0000

    lib: Introduce a for_each_connected_output() macro
    
    So we can easily cycle through them in tests without knowing too many
    internal details about how igt_display_t organize its data.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 09e84cee8b97e8b431e537fbbacde1313d5896ac
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sun Feb 2 17:48:24 2014 +0000

    lib: Introduce symbolic names for display planes
    
    It'd be nice to have symbolic names for planes instead of using an index
    in igt_output_get_plane().
    
    We also namespace the enum to not conflict with anyone.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 417987353ec2bf637839990553967474ccf1528e
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jan 27 16:32:09 2014 +0000

    kms_pipe_crc_basic: Port to the new modeset API
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 3670d6dbff7b829d71ce84d6c9cb88cd5abdbc53
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jan 27 16:25:43 2014 +0000

    lib: Introduce a modeset API
    
    The goals here are:
      - Reduce duplicated code in each KMS test
      - Provide an API that looks more like what we want for atomic
        modesets. The hope is then that it'll be easy to switch, at
        run-time, between the "legacy" path and atomic modesets, keeping
        the same API for tests.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 01757d052c3427ee28b1a065652721877568a15f
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Feb 7 17:03:39 2014 +0000

    tests/gem_seqno_wrap: fix over allocation of arrays
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e6737b8a4ef42109f82c13127d8e2e5da92eb79f
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Feb 7 17:03:38 2014 +0000

    assembler: fix condition for printing a warning
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 49aa4b0df52254d47b354e98ec18236ff82b06e9
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Fri Feb 7 17:03:37 2014 +0000

    debugger: fix the -p option
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 333a5c6f07cba9e6d7a5506521bae5ec89b867c1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Feb 11 12:14:09 2014 +0100

    lib/drmtest: Fix up skip_henceforth checks
    
    We need to first check whether we'll even run the testcase before
    deciding to print a premature SKIP/FAIL. Without this and global
    skipped resulted in superflous output when running only one testcase.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=74100
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a6bc3d91af816f4d979cb6424c6e991362c2a8f8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Feb 11 12:04:57 2014 +0100

    tests/gem_reset_stats: Correctly wrap global test code
    
    Tests _must_ be able to run as non-root and on non-intel platforms,
    otherwise the enumeration is busted (since QA enumerates testcases on
    a gpu-less xeon box).
    
    Cc: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 971c7db2c81d0573caf1d35d70f48e6fdace90d0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Feb 7 10:02:41 2014 +0100

    tests/pm_rps: remove setfreq
    
    It's unused.
    
    Cc: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ffc481b8acc22ee8bbbf142db5b74d99c6bde926
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Feb 7 09:59:42 2014 +0100

    tests/pm_rps: Round requested freq correctly
    
    The kernel will round it, so if we don't we'll have a spurious
    mismatch. Happens on my machine here with 650-1300MHz range, where the
    midpoint is 975.
    
    Cc: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0269d1da4999ecb39ea65120a052259b19372748
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Feb 6 16:31:54 2014 +0000

    lib: fix signed/unsigned comparison issues
    
    Store the result of set_vt_mode as a signed value so that errors can be
    caught correctly.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c3e9198dd0424feb74cdf6570c769f818f2ca16c
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Feb 6 16:23:42 2014 +0000

    assembler: define YY_NO_INPUT to prevent unused symbol warnings
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 32b624c71d6e444056ba87172cc0004e355170d1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Feb 6 07:49:33 2014 +0100

    tests/pm_rps: Fix compilation on Linux
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2b8d953aa22477d88ad6d58f3ad04d3bf90a6a84
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Fri Jan 31 10:13:53 2014 -0600

    pm_rps: New subtest for gpu reset
    
    Test that RPS functions as expected after a gpu reset.
    
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 663d758d919610b09a8bddbadd8a0b668eab6be8
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Fri Jan 31 10:13:52 2014 -0600

    pm_rps: Add variable load support to load helper
    
    The load helper can be set to HIGH or LOW. HIGH is the original mode
    of sending continuous dword store commands. LOW adds a pause between
    each command to reduce throughput.
    
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 22dfb0988aa5f055fb96873d037825bb0317a0e0
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Fri Jan 31 10:13:51 2014 -0600

    pm_rps: Load helper should stall for last write
    
    This ensures that gpu is quiescent when load helper exits.
    
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2d16e0aad7a31a0964ae35fa07c70f4c2fb513b0
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Fri Jan 31 10:13:50 2014 -0600

    pm_rps: Add stop rings injection utility
    
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2cbb0fbf5f3dc839a11d23a970948cb91718594e
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Tue Jan 28 18:25:06 2014 -0600

    pm_rps: New subtest min-max-config-loaded
    
    Like subtest basic-api, but additionally requires that current
    frequency is increasing to the configured maximum within reasonable
    time since we are loaded.
    
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ceb14b190594b767667d34c284e4afdb1932f973
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Tue Jan 28 18:25:05 2014 -0600

    pm_rps: Add load helper for loading gpu
    
    The load helper submits repeated dword store commands to keep the
    gpu loaded while subtests running in the parent process check for
    expected rps response.
    
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit fd3fcbd3b3f12f878737d331d361de7eda0f579a
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Tue Jan 28 18:25:04 2014 -0600

    lib/drmtest: Add igt_wait_helper
    
    igt_wait_helper compliments igt_stop_helper and is used when helper
    processes are expected to exit naturally.
    
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3bada1626cd35800533361296f4340f64b91321c
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Tue Jan 28 18:25:03 2014 -0600

    pm_rps: New subtest min-max-config-idle
    
    Like subtest basic-api, but additionally requires that current
    frequency is settling to the configured minimum within reasonable
    time since we are idle.
    
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2423b6c04e54792adc42b7d477861d9ffb87fdc3
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed Feb 5 13:48:26 2014 +0200

    lib/drmtest: fix hang in quiescent_gpu_at_exit due to signal-unsafe asprintf
    
    I got kms_flip in hung state with the backtrace below, while the parent process
    waiting for the signal helper to exit. It was quite easy to reproduce the bug
    by running
    
    kms_flip --run-subtest=flip-vs-dpms-off-vs-modeset
    
    With the change I couldn't reproduce it.
    
    TODO: audit/fix other signal handlers with signal-unsafe functions
    
    0  0x00007f9a1362018b in ?? () from /lib/x86_64-linux-gnu/libc.so.6
    1  0x00007f9a1359df81 in ?? () from /lib/x86_64-linux-gnu/libc.so.6
    2  0x00007f9a1359b6cf in ?? () from /lib/x86_64-linux-gnu/libc.so.6
    3  0x00007f9a13628eb6 in __vasprintf_chk () from /lib/x86_64-linux-gnu/libc.so.6
    4  0x00007f9a13628e72 in __asprintf_chk () from /lib/x86_64-linux-gnu/libc.so.6
    5  0x000000000040a4a2 in asprintf (__fmt=0x417441 "/dev/dri/card%u", __ptr=0x7fff1a972c08)
        at /usr/include/x86_64-linux-gnu/bits/stdio2.h:178
    6  drm_get_card () at drmtest.c:190
    7  0x000000000040a54a in __drm_open_any () at drmtest.c:229
    8  0x000000000040a846 in quiescent_gpu_at_exit (sig=<optimized out>) at drmtest.c:281
    9  0x0000000000408759 in call_exit_handlers (sig=3) at drmtest.c:1519
    10 fatal_sig_handler (sig=3) at drmtest.c:1543
    11 <signal handler called>
    12 0x00007f9a13596770 in ?? () from /lib/x86_64-linux-gnu/libc.so.6
    13 0x00007f9a135d8f3f in fork () from /lib/x86_64-linux-gnu/libc.so.6
    14 0x000000000040b3af in __igt_fork_helper (proc=0x61d8cc <signal_helper>) at drmtest.c:1199
    15 0x000000000040b4ce in igt_fork_signal_helper () at drmtest.c:751
    16 0x0000000000404167 in main (argc=<optimized out>, argv=<optimized out>) at kms_flip.c:1533
    
    v2:
    - can't use snprintf as that's also signal-unsafe, so just use a dup'ed fd (Chris,Daniel)
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 5c9c8841eb66676dd65e84d51fa87a4b4b8ad764
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Feb 4 14:14:31 2014 +0000

    tests: Add gem_madvise
    
    Exercise that calling madvise produces expected results
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 98952a1f6e7e5439e4b77482bd08422212c32e47
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Feb 4 13:10:37 2014 +0100

    fix make distcheck
    
    Bunch of explicit include paths needed adjustments and
    eviction_common.c needs to be added to the dist files.
    
    This has been broken in the following three commits:
    
    commit 42bcd05eb3f1545fbf9c397c3f37c3f6a27c5da4
    Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Date:   Mon Feb 3 10:59:41 2014 +0000
    
        tests/eviction_common: Avoid submitting duplicate objects
    
    commit b92b397d5e4ffe10ed92fb2fc6711758ef5bcf89
    Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Date:   Tue Dec 3 15:09:57 2013 +0000
    
        build: Make sure asserts are enabled for tests
    
    commit 8c33e9ad111d27b84db4daac43809a807f262632
    Author: Ben Widawsky <benjamin.widawsky@intel.com>
    Date:   Fri Dec 6 20:35:29 2013 -0800
    
        intel-gpu-tools: Version informatio
    
    Cc: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Cc: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 42bcd05eb3f1545fbf9c397c3f37c3f6a27c5da4
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Mon Feb 3 10:59:41 2014 +0000

    tests/eviction_common: Avoid submitting duplicate objects
    
    Make sure selection loop does not generate duplicates
    when it picks a subset of objects for a single exec buffer.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e1dea7e2e190307056a05a2945e59b59fe5b6fc0
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Mon Feb 3 10:59:40 2014 +0000

    tests/gem_evict_everything: Factor out eviction logic
    
    In preparation for userptr test we move the eviction logic
    into a common file so it can be used from both test cases.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d8ea09f24d9e0c75593bc6e89c742998c23087fc
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jan 29 15:53:33 2014 +0000

    gem_ring_sync_copy: Add a ring to ring synchronization test
    
    The goal of this test is to ensure that we respect inter ring
    dependencies. A more detailed description of what it tests is in a
    comment.
    
    The tests relies on having a blit function for the ring, so is currently
    only checking synchronization between the render and blitter ring.
    
    v2: Actually create an inter-ring dependency by making the first copy on
    ring2 and the second on ring2, not both on ring2.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 09bcb0ab4b79273cfccdfa87f860b0be1addcc7b
Author: Rafael Barbalho <rafael.barbalho@intel.com>
Date:   Fri Jan 31 14:57:40 2014 +0000

    android: Change tests & tools directory to use the lib directory
    
    Instead of recompiling the lib directory for every tool or tests we can just
    re-use the static library. This also has the nice side effect of fixing the
    android "mm" command to allow android users to only rebuild the local changes
    in either the test or tools directory.
    
    Signed-off-by: Rafael Barbalho <rafael.barbalho@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit bdb08f981c5ebed0ff1f0067f1aa085636b9ac7b
Author: Rafael Barbalho <rafael.barbalho@intel.com>
Date:   Fri Jan 31 14:57:39 2014 +0000

    android: Add the generation of vesion.h & config.h to lib
    
    The lib directory is used by all the tests & tools so it should really be
    the place where the generate files are created.
    
    Signed-off-by: Rafael Barbalho <rafael.barbalho@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 005c333e5c3ba9285e5d918877e9dd992fd2a4b9
Author: Rafael Barbalho <rafael.barbalho@intel.com>
Date:   Fri Jan 31 14:57:38 2014 +0000

    android: Add makefile for the lib directory
    
    The lib directory should really be compiled as a static library on its own
    and be re-used by any tests or tools that require it.
    
    Signed-off-by: Rafael Barbalho <rafael.barbalho@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 4c79264b3cda6ef548f4125ebf49d470ab968ede
Author: Rafael Barbalho <rafael.barbalho@intel.com>
Date:   Fri Jan 31 14:57:37 2014 +0000

    android: Clean-up common makefile directives
    
    All the Android.mk files had the same directives to find the path of
    libdrm & libpciaccess. These are no longer required as the android system
    now allows the libraries being used to export include paths to dependant
    modules & programs.
    
    Signed-off-by: Rafael Barbalho <rafael.barbalho@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 79ea9a9071fcd39493f68ae4d7ba9941701195c9
Author: Rafael Barbalho <rafael.barbalho@intel.com>
Date:   Fri Jan 31 14:57:36 2014 +0000

    android: Handle the case when android doesn't have mmap64
    
    Not all versions of Android have the mmap64 call, thus a suitable alternative
    must be called.
    
    Signed-off-by: Rafael Barbalho <rafael.barbalho@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit e72f3bcc7700fbf1f381248b0c7fedb2777b8ff1
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Fri Jan 31 05:33:56 2014 +0000

    quick_dump/broadwell: Add gen7 ring mode registers
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 56d347fad864d13b9d39512a308bb54d5f36f828
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Fri Jan 31 05:31:07 2014 +0000

    quick_dump/haswell: Add gen7 stuff + VECS_MODE
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 556c200e99da687f828f2d5e61a49f7fc21b2cb7
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Fri Jan 31 05:29:27 2014 +0000

    quick_dump/gen7: Add other GFX_MODE registers
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit b5a1ab3d6e2002607f6c6387b0bf8a79cffc8224
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Fri Jan 31 04:46:06 2014 +0000

    quick_dump: Add a file argument
    
    -f, or --file will simply dump the file in the specified format. All
    other options will be skipped. This is helpful when one wants to create
    their own list for temporary debug, or if one requires a subset of
    registers to work around things like fused off PCH.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 8ce7c366d7d2903aa66161d836bd1295a8d3a806
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Fri Jan 31 04:42:50 2014 +0000

    quick_dump: Refactor to allow future code
    
    Extract everything possible, and create a main function which is pretty
    darn simple. The goal is to make the various paths the program can take
    based on command line options (one more is coming) more decipherable.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 48ad03ca0c5f078b8d12a64323fd93b3858041af
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 31 16:56:01 2014 +0000

    lib: Capture errno on entry
    
    When printing the errno, it is important that we capture the user errno
    before we make any library calls - as they may alter the value.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=74007
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit be22e10885eba556428919c2bbc71b4b644cb1a4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 29 22:59:57 2014 +0000

    igt/gem_close_race: Fix blit commands for BDW
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=73958
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5e21b434da95c8b66a97a79649a61eb40a161a70
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Tue Jan 28 14:17:30 2014 -0800

    iosf: make iosf_rw take a larger addr
    
    For higher DPIO ranges for example.  Also fix it up to use
    intel_register_read/write.
    
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit e558dd998de723f7f110e51dbd0ce495748d5925
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Tue Jan 28 13:58:55 2014 -0800

    dpio: make dpio reg read/write output like normal reg read/write output
    
    Just for consistency.
    
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit 670a717b5bf4c21dde338b87e5b660632ff6f6b0
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Tue Jan 28 13:58:23 2014 -0800

    mmio: drop unused i915_loaded fn
    
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit 81095305f4df5289f4d494345da0c87949b55f54
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Tue Jan 28 13:46:38 2014 -0800

    mmio: use intel_iosf.c for DPIO reads and writes
    
    This makes it a bit more like the kernel, so we can go poke at DPIO and
    other IOSF regs a bit more easily.
    
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit d1b5823ee7645c767616ee4e5f23f6692a280dde
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jan 27 23:38:02 2014 +0100

    tests/pm_rps: rename basic test to "basic-api"
    
    Jeff plans to add more tests ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5d26a7e2a246265754d51320c35364a3b94cf4e6
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Tue Jan 21 17:14:33 2014 -0600

    pm_rps: Make frequency logging more compact
    
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 88864d2ba584cc11f33dafc5c91f1a8e3175d963
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Tue Jan 21 17:14:32 2014 -0600

    pm_rps: Remove repeat sysfs reads
    
    Storing values avoids some unnecessary overhead but more importantly
    allows all of our processing to be atomic.
    
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4e3b661b480b0a43d9cf45afaf0cae835cb66dcc
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Tue Jan 21 17:14:31 2014 -0600

    pm_rps: Expand on min and max config testing
    
    Add a function that methodically varies min and max to exercise
    several valid and invalid combinations. Allow the caller to
    define what is to be checked between each step.
    
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 22533b1eb038dbf4d3dc79945b81cefc4aac64be
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Mon Jan 27 10:43:02 2014 -0800

    NEWS: update with nomodeset register access change

commit 0d20fa3cc218c48421a9625fc1241008db4496d0
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Mon Jan 27 10:26:57 2014 -0800

    quick_dump: more vlv dpio regs

commit 5ecac45ff08945f99365ff6d29ba21f896cdb1b6
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Mon Jan 27 10:26:05 2014 -0800

    mmio: allow register init even if debugfs isn't available and i915 isn't loaded
    
    This lets us dump regs even if modeset=0 for example.
    
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit 0b4c33f62c2d4a61b0b5e9184524c8ca273400b1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jan 26 14:36:32 2014 +0000

    igt/gem_concurrent_blit: Scale resource usage to RAM correctly
    
    Note that we use twice the number of buffers, and so we need to restrict
    num_buffers appropriately to fit within RAM.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=72255
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b5109e62cea170f3550588119d41a9bcf79789e5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 23 21:50:36 2014 +0000

    intel_error_decode: Protect against missing ring registers
    
    A dodgy kernel may miss printing out the ring registers leading to a
    FPE.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4a9b70c3262a30e70207583cc23da67bba538437
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Wed Jan 22 10:41:05 2014 +0000

    tools: Allow building on Android after noinst_PROGRAMS is not defined any more
    
    Looks like filter-out macro gets silently unhappy about an undefined variable.
    
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit c05c88c2b641aaab83608fb2c8e816893690c1fe
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Tue Jan 21 17:40:08 2014 +0200

    tests/gem_reset_stats: stop only one ring when submitting hang
    
    If we stop all the rings, we can end up blaming the innocent
    rings on hangcheck.
    
    Reference: https://bugs.freedesktop.org/show_bug.cgi?id=73652
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1bbb607d9f3ee8e725a784f740937577f153a520
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Tue Jan 21 18:03:42 2014 -0800

    gem_storedw_batches_loop: Fix for pre-BDW
    
    My git failures are truly remarkable. I ended up pushing the wrong
    commit here:
    commit 1552aa21124cabe762862bb414490510415a2b2d
    Author: Ben Widawsky <benjamin.widawsky@intel.com>
    Date:   Mon Jan 13 06:28:45 2014 -0800
    
        gem_storedw_batches_loop: Fix for BDW
    
    This puts the offset of the reloc in the wrong place for pre-BDW
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=73866
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 03d144d16ffef63cedca81ccb4708b173b16868f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jan 20 15:57:16 2014 +0000

    kms_flip: Try to consume all fences after a flip
    
    As a flip is outstanding, there is an issue that the kernel may not be
    able to release one of the fences that userspace requires and erroneous
    report EDEADLK (on gen2, gen3).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=73696

commit ac0224f184212e8c4baa6de6fbe379c7c22f2008
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Mon Jan 20 10:40:23 2014 -0800

    quick_dump/watermarks: lp3, misc and debug
    
    I forgot to git add this originally.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 3deaeb282656e6e9da4327b79db385479fefdb0b
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Fri Jan 17 20:32:01 2014 -0800

    quick_dump/broadwell: Use haswell_other
    
    For now, the power controls and watermarks seem to be the same offsets.
    So just reuse haswell_other.txt
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 58aa7346c370700658fbbe13659e823afe98b6e4
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Fri Jan 17 20:26:54 2014 -0800

    quick_dump/hsw: Watermark debug
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 73ca22c9e880b0598935c871d809ecfb1f3473fc
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Fri Jan 17 20:10:46 2014 -0800

    quick_dump: Allow comments in the register files
    
    Simple addition to the parser to add the following full line comments:
    {';', '#', "//"}
    
    Empty lines will also be ignored
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 724340cf36b4e2a87d8c545410224b617f813cc8
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Fri Jan 17 19:35:22 2014 -0800

    quick_dump: Fix the indentation
    
    Fix the spaces to use [the python standard] 4 soft spaces for tabe.
    While here, add the proper vim tag so we don't do it again.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit a5d17d2b0e14cafaa2573d9e538af2a98d2338cc
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Fri Jan 17 20:16:55 2014 -0800

    .gitignore: Add pycache
    
    quick_dump which is python, generates files in __pycache__ which are the
    moral equivalent of object files. Don't let people add them to the index
    accidentally.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 5b9147513029ca1e1eaf2c028e6f868adc3359f6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Jan 19 22:15:13 2014 +0100

    tests/gem_fd_exhaustion: Make it work
    
    - We need to drop root to actually hit the limits. This requires us to
      fork the actual test since otherwise the exit handlers (which
      require root) fail the entire test.
    - Don't assert that the gem create ioctl succeeds, it won't on the
      final run of the loop.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7d2ba073adef9c4c6f7a679befa2a5d19cbf4735
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Jan 19 22:13:36 2014 +0100

    lib: add __gem_create
    
    Useful for when a gem_create ioctl is expected to fail.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 71f1f9eafd68c82382d165028ae73035742bb730
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Jan 19 22:12:25 2014 +0100

    tests/pm_rps: Add missing static
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ae57cd7dc7db8a9a72d8ee764f72cd8fd9e75a76
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Jan 19 22:11:47 2014 +0100

    debugger: avoid global variable shadowing
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 862de5636f545a071f29f60ae0a4ab1370f5cf8b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Jan 19 22:06:48 2014 +0100

    lib: extract igt_drop_root
    
    Useful in other tests.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 70082e3677711bc01330ba3483fbdce5779f915d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Jan 19 18:01:24 2014 +0100

    tests: Add gem_fd_exhaustion
    
    Exhausts the system limit on open files and then tries to create
    a new shmem-backed gem object. Linus Torvalds reported that this
    blows up on a null obj->base.filp, but I can't reproduce this here:
    
    http://lists.freedesktop.org/archives/intel-gfx/2014-January/038433.html
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 36106004e0e590557041e491fe690f01c89bc115
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Jan 19 14:48:07 2014 +0100

    tests: Move pm_rps to the right Makefile target
    
    If it's not in the multi-test target group testrunners won't pick up
    on the fact that they need to enumerate subtests first.
    
    Cc: jeff.mcgee@intel.com
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7f1c5057cf1dec0494b8929722fc092625b3c4d1
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Fri Jan 17 16:56:06 2014 -0600

    pm_rps: Fix verbose option and streamline its use
    
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d14cd7430bbba6516a900393f7af1f44c7b6f3ee
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Fri Jan 17 16:56:05 2014 -0600

    pm_rps: Convert to subtest structure
    
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0102b6bde6dc69cccee7d33df233e4ef1b73d9be
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Fri Jan 17 16:56:04 2014 -0600

    pm_rps: Add read back checking on sysfs writes
    
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e07e758004ae3014504b7799cff3838f11dce848
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jan 17 07:42:22 2014 +0100

    tools: Install them all
    
    No reason really not too, especially since we install manpages for
    some of them.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=66656
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8fa2066d7e707787019ecda814442c4789840499
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jan 15 23:59:52 2014 +0100

    tests/gem_gtt_hog: Use igt_simple_main
    
    Results in the compiler complaining about wrong exits and return values.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit eb1fddc057b363225153f86cf419f42d7d83469d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jan 15 23:58:50 2014 +0100

    tests/primve_nv_pcopy: Comment out unused check_swizzle function
    
    I've botched this in my patch to disable the swizzled pcopy test.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5e278c86eda1d5ade7c0fc425edc589e3c9dff59
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 15 10:40:40 2014 +0000

    gem_gtt_hog: use a normal exit()
    
    Since we don't execute any subtests, using igt_exit leads to
    inconsistent behaviour. In the future, this may be converted.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=73641
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a896ef9c1f67cf707fd2aea900e9276b4ff535d6
Author: Robert Beckett <robert.beckett@intel.com>
Date:   Tue Jan 14 18:01:38 2014 +0000

    igt: tests/Android.mk: fix LOCAL_PATH usage
    
    Fix usage of shared variable LOCAL_PATH in deferred variable expansion area.
    
    In Makefile language, rule and dependency definitions use immediate
    expansions of variables, so they get expanded as soon as the rule is
    created (1st pass). Rule implementation (a.k.a recipe) use deferred
    expansion (2nd pass).
    
    Android effectively makes all Android.mk files a single makefile by
    including them all in a big tree from the toplevel makefile. The rules
    are all evaluated in the first pass and targets are generated. Then the
    2nd pass happens and the required target's recipes are run. At this
    point, LOCAL_PATH has been assigned the value from the last evaluated
    Android.mk in the 1st phase that defined LOCAL_PATH (most Android.mk use
    this variable). In my particular case, it was the bootloader's
    Android.mk that was evaluated last and had defined LOCAL_PATH to it's
    path. The errors are rather misleading due to it looking like a bug in
    another module's Android.mk rather than this one :)
    
    Basically, if you want to use a variable that any other Android.mk
    defines, then you can only use it in an immediate expansion context,
    not a deferred expansion context as it will likely be re-defined by
    the time the 2nd pass happens.
    
    This patch stores it in a unique variable that should not be being
    used by other Android.mk files. An alternative fix would be to use $@
    and $< as the files in question are target and dependency, but I never
    like using those as they can easily break if dependencies are added
    etc. I prefer variable to be explicitly named to make them obvious.
    
    See gnu make manual for explanation of deferred vs immediate
    expansion of variables :
    http://www.gnu.org/software/make/manual/make.html#Reading-Makefiles
    
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Robert Beckett <robert.beckett@intel.com>

commit 44c0b2aeff41e258c74bb1b1221359c4661accd8
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Fri Jan 10 17:24:17 2014 +0200

    tests/gem_reset_stats: run tests on all rings
    
    Run all relevant tests on all rings.
    
    Suggested-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3367359a9858a5ad806876213593ad912d2ef30f
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Fri Jan 10 17:24:16 2014 +0200

    tests/gem_reset_stats: split ctx tests
    
    Split context related tests from non-context ones
    and cleanup the naming.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit fef1930bf30b8182fe8e6e26b8f722ee8995da71
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jan 14 13:41:21 2014 +0100

    tests/prime_nv_pcopy: disable swizzle tests
    
    It's pure luck that nv can detile some of the intel layouts since one
    of the video MC formats matches it. Since we can't possible fix this
    comment the test out.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=73538
    Acked-by: Maarten Lankhorst <bugs@mblankhorst.nl>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1552aa21124cabe762862bb414490510415a2b2d
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Mon Jan 13 06:28:45 2014 -0800

    gem_storedw_batches_loop: Fix for BDW
    
    Existing code was trying to be too clever and wasn't properly emitting
    the high dword, or the correct length.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit fee27cf822cff981f3e6f8fb6ea4a8c5fe3579b3
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Jan 13 17:05:19 2014 +0200

    tests: Drop glib.h include from kms_cursor_crc and kms_fbc_crc
    
    kms_cursor_crc and kms_fbc_crc don't need glib.h. This was just some
    copy-paste error on my part.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 2a7dbe5f0103ffdf44be174781868adb1a03f8a4
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Fri Jan 10 15:12:33 2014 -0600

    pm_rps: Use igt exit handler for restore
    
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d0b5fd2bff7ce8ec1ada15da6ca9ed2425cbf1c5
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Fri Jan 10 15:12:32 2014 -0600

    pm_rps: Fix test to target original min and max
    
    The goal of the test is to confirm that gt_cur_freq_mhz can be forced
    to the boundaries of the frequency range by collapsing gt_min_freq_mhz
    and gt_max_freq_mhz to the target value. But we miss testing the upper
    end of the range by targetting the current value of max after it has
    been set equal to min. So fix by targetting orginal max instead of
    current max.
    
    This correction exposes a problem in setfreq where min is always set
    to target before max, which should fail if the target value is greater
    than max. So fix that too.
    
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 44b5d7b3300dd7c94d09c57c95ab3a407f8b17ef
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Fri Jan 10 15:12:31 2014 -0600

    pm_rps: Assert that valid sysfs writes return success
    
    do_writeval now always checks the return value, whether we expect
    success or a specific error. Also add new macro writeval_inval to
    simplify repeated use of do_writeval to test for EINVAL return code.
    
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 265efbb2c4401542c8753e0d83d7a98493720865
Author: Jeff McGee <jeff.mcgee@intel.com>
Date:   Fri Jan 10 15:12:30 2014 -0600

    pm_rps: Use unbuffered I/O on sysfs files
    
    Bionic C library may not re-read a buffered, read-only file which
    results in failure to monitor changes in gt_cur_freq_mhz.
    
    Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 45d63644d28c34202a97bd812f6c46c853e97d28
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 10 21:13:56 2014 +0000

    tests/gem_pipe_control_store_loop: Delete bogus assertion
    
    target_bo->offset was just being used to verify that the batch
    submission worked and fortunately was not being relied upon for any
    subsequent conditions. However, address 0 is valid and so the assertion
    itself was bogus as it is possible (almost assured with full-ppgtt) for
    the target_bo to be located at address 0.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=72984
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 84af2b9be8792fb288d4ce75821a27706e5351c3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 10 16:09:57 2014 +0000

    gem_gtt_hog: Print elapsed time in ms
    
    Missed one last diff before pushing

commit f62abaff99792f10962b1aa072b8a3b314765591
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 10 13:42:55 2014 +0000

    tests: Add gem_gtt_hog
    
    The purpose of this test is to exercise the userspace latency hogs
    reported by Arjan van de Ven. He found some applications blocked the
    device by stalling on the GPU inside the pagefault handler.

commit 2c9e76184518854f21d367296ababef87fb41243
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jan 10 09:21:54 2014 +0100

    tests/gem_largeobject: Prefault instead of pin
    
    This doesn't test pin but pwriting to big objects ...
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=72901
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cb9e8376fac2c96c2e6bffa511b3087d916286d0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jan 10 09:21:15 2014 +0100

    tests: fixup igt_simple_main fallout
    
    Oops, I should look at compilier warnings a bit better.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7775fca2df815dfee18b181de6fe13df27bb9867
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jan 8 20:24:36 2014 +0100

    tests/gem_ctx_exec: fix ram requirement fumble
    
    We need to half available ram, not double it ...
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=72557
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 864d09ed4c11f89e1cd91b187a48c57b4c00b779
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jan 7 19:25:11 2014 +0100

    tests/NAMING-CONVENTION: s/snooped/snoop/
    
    Oops. We should be a bit more consistent with which verb form we're
    picking. tile,tiled,tiling is even worse ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 67c80f8d816259067b7474fe6f8c79915d6483f0
Author: Devon Davies <devon.davies@intel.com>
Date:   Wed Jan 8 16:07:06 2014 +0000

    build: Added -UNDEBUG to tools/Android.mk
    
    NDEBUG is defined by default in Android and causes assert(x) to be
    defined as void(x). This change ensures that asserts work as
    expected in tools.
    
    This flag is already inside tests/Android.mk
    
    Reviewed-by: Oscar Mateo <oscar.mateo@intel.com>
    Signed-off-by: Devon Davies <devon.davies@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 0ec9c94bea6d1ba3969a03ebf75494115e24edf6
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jan 6 14:56:02 2014 +0000

    tools: Remove intel_disable_clock_gating
    
    This tool only supports ILK. I take the fact that nobody has felt the
    need to update for later platform a sign it's not very useful.
    
    Reviewed-by: Kenneth Graunke <kenneth@whitecape.org>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 5fdca4c1666fb055f1ba955beaa5511b99ebfbd6
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jun 4 13:55:06 2013 +0100

    tools: Removed unused tools/intel_iosf_read.c
    
    Also intel_iosf_read() does not exist, and would need a bit more
    arguments.
    
    Reviewed-by: Kenneth Graunke <kenneth@whitecape.org>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit a1baf3050e3b329cf52064ec92c1dbd8bde3aab0
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jun 4 11:36:23 2013 +0100

    lib: Use INSTDONE_I965 and INSTDONE_1 for gen6
    
    The GEN6_INSTDONE_1 and GEN6_INSTDONE_2 registers are just the old
    INSTDONE_I965 and INSTDONE_1 registers but renamed. Let's use the old
    names (this is what the kernel does).
    
    Reviewed-by: Kenneth Graunke <kenneth@whitecape.org>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 3ebd8aa95e610268cfa9b1307e6c707649f96f40
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jun 4 09:06:50 2013 +0100

    lib: Move the INSTDONE bit definitions to instdone.c
    
    This is the only place where they are used and we've even started using
    1 << n constants with gen 7.
    
    Reviewed-by: Kenneth Graunke <kenneth@whitecape.org>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit da78bc497b46f09f8b161202d6f61e6dd26e9a65
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jun 4 06:48:49 2013 +0100

    instdone: Add an assert to make sure we never overflow instdone_bits
    
    Reviewed-by: Kenneth Graunke <kenneth@whitecape.org>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit d8b1dee220dc07bfae9d7fd82e360cc56bf9c30f
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jun 4 05:41:36 2013 +0100

    intel_reg: Renamed INST_DONE to INSTDONE
    
    That's how the registers are named in the kernel defines.
    
    Reviewed-by: Kenneth Graunke <kenneth@whitecape.org>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 98c10d379b8d6b8e34da1e9963a114413021838e
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Dec 30 11:40:03 2013 -0200

    tests/kms_flip: free the test_output struct when counting modes
    
    Looks like we have to do a lot of work just to count the number of
    modes...
    
    Caught by Valgrind.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 69856b5e7b96f6945da7f6c42a1468a38513b3ca
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Dec 30 11:33:16 2013 -0200

    tests/kms_flip: don't leak the connector_config struct
    
    ... in case we can't find a compatible mode. We already have
    config[0], we can't return without freeing it first.
    
    Caught by Valgrind.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 056500bdc5e4243a8baa3503ec9c3fdd7323a454
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Dec 30 11:30:03 2013 -0200

    tests/kms_flip: don't leak the CRTC
    
    The kms_flip program calls kmstest_get_connector_config, which returns
    a struct containing some allocated variables, including a pointer to
    the CRTC. The problem is that we copy the values returned by this
    structure to the test_output struct, but we ignore the CRTC pointer.
    So free the CRTC pointer instead of leaking it.
    
    Caught by Valgrind.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 02ad7e04dd0ddbb77e928330f8490680f1e200cc
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Dec 30 11:27:57 2013 -0200

    tests/kms_flip: don't leak the connector when setting DPMS
    
    Caught by Valgrind.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 329faeccf72ce8f289004809d5e3245cb6620ab9
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Dec 30 11:20:39 2013 -0200

    drmtest: don't leak memory when parsing the arguments
    
    Found this while investigating memory leaks on kms_flip. Detected by
    Valgrind.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit bb40494671b7641540dcb2015e9411aebd5016bb
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jan 7 08:14:33 2014 +0100

    NEWS updates
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1d2ef9553ae4b738595676b7554f93d70acd78a0
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Dec 16 11:28:39 2013 +0000

    intel_error_decode: Factor out common decoding code
    
    4 pieces of code were looking very similar. Let's factor out a common
    function in the not so unlikely case we need to tweak that code.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 01eeab94482de8c8fa687ffcfa95e5d32720909d
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Thu Jan 2 19:33:57 2014 -1000

    configure.ac: Fix shader debugger for real
    
    I tried to get fancy before, but ended up pushing something which I
    didn't test. Keep the thing simple and stupid, and just make it work.
    
    Reported-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 164d9d26ac33029287a24fbed549e3a2858d5d51
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Dec 30 17:48:43 2013 +0000

    kmstest: Fix up lifetimes of cairo objects
    
    cairo_t is the short lived drawing context, whereas cairo_surface_t is
    the heavyweight object that persists and is also tied to underlying GEM
    objects. So make the kmstest API reflect the different weights and fix
    the lifetime and underlying object reference leaks.
    
    Based on the fix by Paulo Zanoni.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9d6cfa6b59d0c22cf772ca71069f9e5f3e53d055
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Mon Dec 30 10:41:43 2013 -0800

    configure.ac: Fixup conditional shader debugger
    
    The original patch was incomplete. Testing no assembler build is a pain
    for me. Sorry for the mess.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 3ed4b5bd1180c034820a4bf83eec896fd21ae33e
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Mon Dec 30 10:32:06 2013 -0800

    configure.ac: Remove GEN4ASM define
    
    This was a leftover hunk that got accidently merged.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 72fe2b641488fcc01d48187fe1642337ce61cef0
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Tue Dec 24 13:12:31 2013 -0800

    gem_exec_blit: gen8 updates for blit
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 94b2b861f5e2cd3dd5e32459174c9fdc3c3b0d8b
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Fri Dec 20 21:15:16 2013 -0800

    shader-debugger: Use in tree gen4asm
    
    Reported-by: Patrick McMunn <doctorwhoguy@gmail.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 4f28614777a5dec5de5cafacd640f5b50180acaa
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Dec 20 16:56:14 2013 +0100

    README: Fix spelling fail
    
    Thanks to Jani for spotting this.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit fd6c66c4a2ad2b13cd56dc93c4cbf3a56bc0b3a8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Dec 20 15:49:59 2013 +0100

    README: Document how to avoid Waffle with piglit
    
    Suggested by Paulo.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2a71bff3173c538d618f5fc6f45b7150fc10f3fb
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Dec 16 18:47:39 2013 -0200

    tests/pm_pc8: check if we can't become DRM master
    
    QA reported a failure that I believe happened because we couldn't
    become DRM master, so add code that checks for this and prints a nice
    error message.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 62e1cbc6343577e4fe2ea5b93981fab015872670
Author: Oscar Mateo <oscar.mateo@intel.com>
Date:   Fri Dec 13 20:48:24 2013 +0000

    build: Create version and config information files in Android
    
    Also, skip the compilation of pm_lpsp in Android (uses Cairo)
    
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4eae05f03b893e2e7b2eb0e0d9799fe0228393bb
Author: Oscar Mateo <oscar.mateo@intel.com>
Date:   Fri Dec 13 16:24:37 2013 +0000

    tests/gem_close_race: Adapt the test for Full PPGTT
    
    With Full PPGTT, each new fd creates a new context and thus a new
    PPGTT, so we have to reduce the number of simultaneous fds or face
    OOM problems. For every new PPGTT, its PDEs are stored in the GGTT
    which imposes a limit of 1024 new contexts. We want to leave at
    least 1/4 of the GGTT available for "important" stuff like scanout
    buffers, so never open more than 768 fds.
    
    v2: Unconditionally use the lower limit, as suggested by Daniel
    Vetter
    
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit be14c7bb04664a515df11c21f90a0f29c7756e6b
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Dec 13 12:53:31 2013 +0000

    lib: Include the necessary stdint.h in gen6_render.h
    
    Instead of assuming someone else will do it.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 16531069f6b6fc4f8ac5ab537e9829406c348d7b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Dec 12 22:46:18 2013 +0100

    tests: Document the Makefile variables a bit better
    
    Also, this is a test for the patchwork hook.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a68937ca3b49d2ea89d753b6aecc015df8ad76a5
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Tue Dec 10 10:50:48 2013 +0200

    tests/gem_reset_stats: add reverse order in close-pending-fork
    
    Use own copy of gem_quiescent_gpu() so that test still works
    if it gets changed. Further improve the test by posting a batch
    to rings in reverse order.
    
    Suggested-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 826c4effe624da4bf9337028e15894fbf0c2a3ab
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Dec 12 09:26:58 2013 +0100

    tests: Move gem_reset_stats to the right place
    
    Binaries should only be added to the HANG target if they're completely
    broken. If they just cause a recoverable gpu hang as part of the test
    then they need to be somewhere else.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 36f017dfd1a12bcdf03f928ca02e9053f3622efc
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Dec 3 15:03:02 2013 -0200

    tests/kms_setmode: avoid 2 connectors on the same encoder
    
    Don't try to set modes on two connectors that share the same encoder.
    That will just fail.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=68463
    Reviewed-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 13ef9e8d5453f0902e3025981b9cfd68558ff7e1
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Dec 10 15:33:07 2013 +0200

    kms_flip: consolidate run_test_on_{crtc,crtc_pair}
    
    No functional change.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1ac94b50af6ef0ab5607e85960880c284607b88a
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Dec 10 14:00:19 2013 +0200

    kms_flip: keep drm_fd open for the dpms restore exit handler
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=69161
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 2c6c4cf2a146855f1de6e3ca89f9df09da1024be
Author: Imre Deak <imre.deak@intel.com>
Date:   Mon Dec 9 17:28:50 2013 +0200

    kms_flip: fix seq_step for 2xcrtc subtests
    
    This also raises the absolute wait-for-vblank sequence step from 5 to
    10, just to make it consistent with the corresponding 1x subtests.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=69161
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f034817b401d9e0016cb8d2cddd9220c3a36463a
Author: Kenneth Graunke <kenneth@whitecape.org>
Date:   Mon Dec 9 23:29:36 2013 -0800

    rendercopy/bdw: Fix length of a bunch of zeroed out packets.
    
    A bunch of packets were too short.
    
    Signed-off-by: Kenneth Graunke <kenneth@whitecape.org>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Cc: Ben Widawsky <ben@bwidawsk.net>
    Cc: Damien Lespiau <damien.lespiau@intel.com>

commit fdbdc7f325af9b42684fc6c7100cb57c52b31c4a
Author: Kenneth Graunke <kenneth@whitecape.org>
Date:   Mon Dec 9 23:29:35 2013 -0800

    rendercopy/bdw: Emit 3DSTATE_WM_HZ_OP.
    
    We don't want depth/stencil fast clears or HiZ resolves; we want normal
    drawing.  Without this, the pixel pipeline doesn't work.
    
    Signed-off-by: Kenneth Graunke <kenneth@whitecape.org>
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Cc: Ben Widawsky <ben@bwidawsk.net>
    Cc: Damien Lespiau <damien.lespiau@intel.com>

commit 8cd3a9d5438a5e6961823c15fd41ae02b09c7c9b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Dec 10 10:30:59 2013 +0100

    ignore version.h
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit dda85fb108469e3d3c8ce19751f928c70e9fba4c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Dec 10 10:18:32 2013 +0100

    tests: roll out igt_simple_init/igt_simple_main
    
    Also use igt_skip a bit more to simplify some of the tests.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ce1a9f918ef2415562bf441c2b7d886c6eb865c4
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Dec 10 09:58:28 2013 +0100

    tests: gem_close_race has subtests!
    
    Oops.
    
    v2: Found more.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ef9745b7faf42b1273c63de6f3e4afcbb896e568
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Dec 10 09:41:48 2013 +0100

    lib: igt_simple_main/init for subtest-less tests
    
    Atm only used to print the version information.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f1c4ec936c97c4b2f906638180357c8786776316
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Dec 10 09:26:08 2013 +0100

    lib: print uname information in the version string
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 831a47196dd4d8afbdd967353d689bf8aed4f3e6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Dec 10 09:23:44 2013 +0100

    lib: Add host platform to version string
    
    This is import on systems where we compile 32bit tests that run on
    64bit platforms.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8c33e9ad111d27b84db4daac43809a807f262632
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Fri Dec 6 20:35:29 2013 -0800

    intel-gpu-tools: Version information
    
    Provide two arguments version, and verbose, which allow printing from an
    arbitrary igt test. It will show system information (from build time,
    not runtime), as well as the git SHA being used.
    
    This will help reduce errors when people try to reproduce problems.
    
    As an example if I want to verify someone is running the correct version
    of a test, I could ask them to do:
    bwidawsk@ironside ~/intel-gfx/intel-gpu-tools (master)$ sudo ./tests/gem_exec_nop --verbose
    gem_exec_nop-git-3c5423b (Linux ironside 3.12.0-1-ARCH #1 SMP PREEMPT
    Wed Nov 6 09:06:27 CET 2013 x86_64 GNU/Linux)
    Time to exec x 1:                35.000µs (ring=render)
    Time to exec x 2:                28.000µs (ring=render)
    Time to exec x 4:                20.000µs (ring=render)
    Time to exec x 8:                14.625µs (ring=render)
    Time to exec x 16:               11.188µs (ring=render)
    Time to exec x 32:               11.125µs (ring=render)
    Time to exec x 64:               10.328µs (ring=render)
    Time to exec x 128:              10.172µs (ring=render)
    Time to exec x 256:              10.234µs (ring=render)
    Time to exec x 512:              10.232µs (ring=render)
    Time to exec x 1024:             10.121µs (ring=render)
    Time to exec x 2048:             10.151µs (ring=render)
    Time to exec x 4096:             11.474µs (ring=render)
    Time to exec x 8192:              9.432µs (ring=render)
    Time to exec x 16384:             6.003µs (ring=render)
    Time to exec x 32768:             5.029µs (ring=render)
    Time to exec x 65536:             4.206µs (ring=render)
    Time to exec x 131072:            3.630µs (ring=render)
    Subtest render: SUCCESS
    
    --verbose is provided for completeness, but doesn't seem too useful at
    the moement.
    
    bwidawsk@ironside ~/intel-gfx/intel-gpu-tools (master)$ sudo ./tests/gem_exec_nop --version
    gem_exec_nop-git-3c5423b (Linux ironside 3.12.0-1-ARCH #1 SMP PREEMPT
    Wed Nov 6 09:06:27 CET 2013 x86_64 GNU/Linux)
    
    I've put version.h in the root directory so that any subdir can access
    it. I've added the tests usage since it's immediately useful, and done
    easily via Daniels igt infrastructure work.
    
    v2:
    - Always print the version number.
    - We want to print uname at runtime.
    - Also prefix the i-g-t release version.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net> (v1)
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ea8c086919041d152b957773b0071e0cfafd3f78
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Dec 10 08:07:11 2013 +0100

    lib: Always print errno in igt assert/require macros
    
    Useful to figure out why things have failed.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3c5423b9a74fe056cae1fce41fd3ad16584e9c8d
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Fri Dec 6 12:38:49 2013 +0000

    tests/gem_media_fill: Remove unnecessary include
    
    Causes trouble for Android builds.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ef0931724f58bd38fcd6e4261494a77ca125508f
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Dec 3 19:44:45 2013 -0200

    tests: add pm_lpsp
    
    QA has asked me "How can we make sure LPSP is working?". Now, instead
    of writing big paragraphs, I can just answer "make sure pm_lpsp
    works".
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit d5cdee95d5e8290adea2757230a7c10728bcd49a
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Dec 3 16:44:08 2013 -0200

    lib: rename some power well bit names
    
    I did the same change in the Kernel a few months ago. This should help
    not getting confused about which bit does what.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 3906a50ede5fa8d6edfca8bf81809fd0cf229a30
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Fri Dec 6 09:16:58 2013 +0800

    assembler/bdw: Update write(...)
    
    write(...) is used for Render Target Write and Media Block Write.
    The two message types no longer share the same cache agent on GEN8,
    So a parameter is needed for cache agent. The 4th parameter of write()
    is used for write commit bit which has been removed since GEN7. Hence
    we can re-use the 4th parameter as cache agent on GEN8
    
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit a4d3a6c013664da062cdff9ead7bc9ab86b33caa
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Dec 6 10:48:25 2013 +0100

    lib: make igt_pipe_crc_start never fail
    
    It's what callers expect - pipe_crc_new is the function where
    we pass a potential failure back to callers.
    
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c1b7e722dafdbddcce2bec230e3faf8b4fe6f123
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Dec 6 10:47:10 2013 +0100

    lib: add igt_pipe_crc_check
    
    No need to duplicate this all over the place.
    
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3e37eb3c6cae56bbd11016102c20a63ce58966da
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Dec 6 10:45:49 2013 +0100

    tests: drm_open_any doesn't fail
    
    Or more precisely: It already has an igt_require. So we cant ditch it
    from tests.
    
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5b3edb61528f26c05af20fccc8b44e8e3c5f7861
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Dec 6 13:02:51 2013 +0000

    gitignore: Ignore gem_media_fill
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit adbd83cdc31b10dd3cee5abc247018719aa74acf
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Fri Dec 6 16:54:45 2013 +0800

    rendercopy/bdw: Set Instruction Buffer size Modify Enable to 1
    
    Otherwise it may result in GPU hang
    
    Reviewed-by: Kenneth Graunke <kenneth@whitecape.org>
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 4570e1b3dece3cebc45fdcff5f767f24bba67da1
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Fri Dec 6 16:54:44 2013 +0800

    lib: Clean the batch buffer store after reset
    
    Otherwise the stale data in the buffer
    
    Reviewed-by: Kenneth Graunke <kenneth@whitecape.org>
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 509850bf48199c9ec88b9ae03154e809da283d13
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Dec 6 08:39:31 2013 +0100

    tests/gem_reset_stats: document the new subtest a bit better
    
    I wanted to add this to Mika's original patch but forgot to git add.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5f40b23cfa0441fceba9d2cb6437724e880a8fc3
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Mon Dec 2 12:52:08 2013 +0800

    tests/gem_media_fill: the assembly code for the shader used in the case
    
    The code is for reference only
    
    v2: Fixed the source register used for the send with EOT
        Fixed the posted destination operand for the send with EOT
    
    v3: Fixed the cache agent used in media_block_write message on GEN8
    
    Reviewed-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit c6835697253c07cfc6711bcfc9b071afa4a6144d
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Mon Dec 2 12:49:14 2013 +0800

    tests/gem_media_fill: add support for gen7
    
    v2: Fixed the source register used for the send with EOT
        Fixed the posted destination operand for the send with EOT
    
    Reviewed-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit bd384c2ba38d8fccb8ce1b47b51d78cd64636b50
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Mon Dec 2 12:36:15 2013 +0800

    tests/gem_media_fill: add support for gen8
    
    v2: Fixed the source register used for the send with EOT
        Fixed the posted destination operand for the send with EOT
    
    v3: Workaround: Insert MEDIA_STATE_FLUSH after MEDIA_OBJECT.
        Fixed the cache agent used in media_block_write message
        Set Instruction Buffer size Modify Enable to 1, otherwise it may result in GPU hang
    
    Reviewed-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 641267dd735e0ab9a5b8d083b4e1a2392b41ae07
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Fri Nov 29 13:47:31 2013 +0800

    tests: add gem_media_fill
    
    It is to check whether media pipeline on render ring works. Codes
    are copied and modified from the rendercopy case which uses 3D pipeline.
    However media pipeline is simpler than 3D pipeline and there is few changes
    between gen6,gen7 and gen8
    
    Reviewed-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 8ac7b93b218af1544988331cd68c69ba4102c29f
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Thu Dec 5 16:02:52 2013 -0800

    gem_exec_faulting_reloc: Update gen8 BLT cmds
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit e41928e6c9bb3f24833a827903f1afeda83592d6
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Thu Dec 5 15:35:01 2013 -0800

    gen8 rendercpy: temporarily disable
    
    We don't yet have this working, and the excessive hangs are annoying.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit da4258529faa064d78184b81b0dad9b3523e722f
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Thu Dec 5 15:00:44 2013 -0800

    Kill XY_COLOR_BLT_CMD
    
    Since we now always want a length for this command, and we've created a
    non-length variant, remove the #define to prevent further foot shooting.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 53b0c0431c89397789252b6649e70090d0458e95
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Thu Dec 5 14:44:23 2013 -0800

    gem_reloc_vs_gpu: Update for gen8 BLT cmds
    
    NOTE: Some subtests are still failing, but I haven't found the bug yet.
    At least this should help QA meanwhile.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit b23d73788a7d494f99d74bafb762dd825deb6697
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Thu Dec 5 14:44:23 2013 -0800

    gem_persistent_relocs: Update for gen8 BLT cmds
    
    NOTE: Some subtests are still failing, but I haven't found the bug yet.
    At least this should help QA meanwhile.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit ba0d651a017d9c633e7530b7d13ec6abaeaedceb
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Thu Dec 5 14:36:20 2013 -0800

    gem_write_read_ring_switch: Missed gen8 BLT updates
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 846a0f01b04eae501ced0f59e2bd18c5f4c774bb
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Thu Dec 5 14:34:35 2013 -0800

    drm_vma_limiter_cached: Missed gen8 BLT updates
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 672911d7149735ee51cbcff5540b8dcb8a2de321
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Thu Dec 5 14:14:35 2013 -0800

    gem_pipe_control_store_loop: BDW update
    
    I've opted to not use the PIPE_CONTROL w/a for now. I am unclear if it
    is actually required (the test does pass).
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 40b586188c021db58a37ef23ac7d3e20547461a1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Dec 5 15:49:58 2013 +0100

    tests/gem_ctx_exec: Add eviction test
    
    It didn't pan out at all since atm we don't evict context objects. But
    maybe it's useful for when that happens.
    
    v2: Actually test eviction. Took a while to figure that one out.
    
    And indeed the testcase now fails because we don't evict the previous
    context as we should.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1a95c710f9160692e3c29100600b1766388f93de
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Dec 5 15:50:18 2013 +0100

    lib: add gem_available_aperture_size helper
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 33ef5284903d2b64c4744c208d9eccc54cba65a3
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Dec 5 13:41:51 2013 +0100

    tests/core_get_client_auth: new subtests for always authenticated
    
    This exercise the bug fixed in
    
    commit 1020dc6990168a5081ffad620c440e220f05b460
    Author: Chris Wilson <chris@chris-wilson.co.uk>
    Date:   Tue Oct 29 08:55:57 2013 +0000
    
        drm: Do not drop root privileges for a fancier younger process
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 365f4812b12323336e5b54befdbb2628b78713f0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Dec 5 13:35:50 2013 +0100

    tests: rename get_client_auth to have a core_ prefix
    
    Also sort .gitignore.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 28e4b34b3d582e5489302c551bb83c2c1fdef2d3
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Dec 5 13:01:58 2013 +0200

    quick_dump: Restore execture permission on quick_dump.py
    
    quick_dump.py execute permission was accidentally lost in:
    
     commit d56697233699844db9262a9a056b62b24b69dd39
     Author: Mengdong Lin <mengdong.lin@intel.com>
     Date:   Sun Aug 25 23:07:22 2013 -0400
    
        quick_dump/bdw: support Broadwell in device auto-detection
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 0b67c0c421fb736b5086f69a7cc5415f66c3d369
Author: Chon Ming Lee <chon.ming.lee@intel.com>
Date:   Wed Dec 4 20:44:33 2013 +0800

    Update dpio read/write to take in extra PHY parameter.
    
    The extra parameter is for future platform.
    
    Signed-off-by: Chon Ming Lee <chon.ming.lee@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit f5643c4a270baa4da33676950e36b1681d6d93dc
Author: Chon Ming Lee <chon.ming.lee@intel.com>
Date:   Wed Dec 4 20:44:32 2013 +0800

    tools/quick_dump: Update Baytrail DPIO names to reflect to the driver change.
    
    DPIO name still using old name.  Change it according to the driver name.
    
    Signed-off-by: Chon Ming Lee <chon.ming.lee@intel.com>
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 6b18ef826ffdb433eff00db974589897ac1dd527
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Wed Dec 4 16:39:09 2013 +0200

    tests/gem_reset_stats: add close-pending-fork
    
    This triggers use after free oops on request->batch_obj when
    going through the rings and setting reset status on requests,
    after a gpu hang.
    
    v2: Streamlined the test and added comments (Daniel)
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit fb03ea7737dcda887e6eeca17afe7b91cf178b38
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Tue Nov 26 09:26:17 2013 +0200

    lib/drmtest: Fix filedesc leak on gem_quiescent_gpu
    
    to not run out of filedescs as some tests call gem_quiescent_gpu
    directly.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ab7cbf9737fe35cc286520379e54ae9882ab402b
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue Dec 3 16:44:54 2013 +0000

    Revert "lib/drmtest: ducttape over fork race"
    
    This reverts commit a031a1bf93b828585e7147f06145fc5030814547.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    
    Conflicts:
            lib/drmtest.c
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b34322fd15488eed8b7b20538cb1d50f43b4b132
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Dec 3 17:57:06 2013 +0100

    Revert "test/gem_concurrent_blt"
    
    This reverts commit aee0dcb1ec2075991d310dd6f3fb5e50160847d1.
    
    Oops, accidentally commit a bit of wip changes.

commit 139c72f38a07c545f5a9ab5fa3750779987b9275
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue Dec 3 16:44:55 2013 +0000

    drmtest: Avoid wrong PID/TID after clone races
    
    Various C library implementations have various races with regards
    to caching getpid() or TID inside pthread_kill() implementations.
    
    For example see clone(2) glibc man page and pthread_kill
    Bionic C library source.
    
    Work around that by making sure correct PID/TGID and TID values
    are retrieved from the kernel when re-raising the signal. It
    can be delivered immediately after the clone system call while C
    library cached copies have not yet been updated.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4f990f3ad21eb375918dde7ad7c55ee3a75158c4
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue Dec 3 15:35:41 2013 +0000

    build: Skip kms_fbc_crc on Android
    
    We do not have GLib there so it does not build.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b92b397d5e4ffe10ed92fb2fc6711758ef5bcf89
Author: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Date:   Tue Dec 3 15:09:57 2013 +0000

    build: Make sure asserts are enabled for tests
    
    Tests depend on assertions being enabled since they can, and do,
    contain actual test steps. They are also mandatory for ensuring
    sane test case behaviour.
    
    Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit aee0dcb1ec2075991d310dd6f3fb5e50160847d1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Dec 3 16:32:52 2013 +0100

    test/gem_concurrent_blt
    
    Limit working set size also with available ram.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=72255
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 26b336f81128b6c51e2757381c19d8cdf0b2c369
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Dec 3 13:07:28 2013 +0100

    lib: Don't put functional code into asserts
    
    Android apparently compiles with NDEBUG. Which is strongly advised
    against, since the big pile of asserts mostly check correct usage of
    the helper code in testcases.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 38354ec4d890c384b5d91738f955ed6aed6d0c1c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Dec 3 10:12:37 2013 +0000

    drmtest: Fix weird signage on errno
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e7ec90a01ccd6a1dcda431065851e4629ddf73b4
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Nov 28 14:35:45 2013 +0000

    gitignore: Ignore kms_fbc_crc
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 8d7f00146c3664f78a12f17af0fb5365c5a09396
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Nov 28 14:34:51 2013 +0000

    kms_fbc_crc: Remove unused variable
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 34f104aed7c14313c473bb7dafcda43f8b473903
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Nov 22 18:14:26 2013 +0000

    rendercopy/bdw: Fix the 3DSTATE_STENCIL_BUFFER instruction length
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 09f144b649176bd80e31ccab65c9206931e6150f
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Nov 22 18:12:35 2013 +0000

    rendercopy/bdw: Fix the 3DSTATE_HIER_DEPTH_BUFFER instruction length
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit e824fdd0339f5a649aaf54a74694836f55bb0e9c
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Nov 22 18:11:03 2013 +0000

    rendercopy/bdw: Fix the various 3DSTATE_CONSTANT_* instruction length
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit ffff68f08a63cb27fb558b54c7240b9bc4571f96
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Nov 22 17:36:54 2013 +0000

    rendercopy/bdw: Fix the STATE_SIP instruction length
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit b333d23e3ae1ee3d971446464bd02c4a8f1695da
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Nov 22 17:29:02 2013 +0000

    intel_dump_decode: Support the INTEL_DEVID_OVERRIDE env variable
    
    This is the one that already works in libdrm, so don't disappoint people
    coming with expectations.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit b226f43fe854ba1d0d8be7fe94f8692a93fa8aa8
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Nov 22 17:24:52 2013 +0000

    intel_dump_decode: Actually parse the -d option
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 6c9fcc42bb3ef448fdea579795816f7321f8bd75
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Sat Nov 9 20:58:27 2013 +0200

    kms_fbc_crc: Add a CRC based FBC test
    
    kms_fbc_crc will perform various write operations to the scanout buffer
    whilc FBC is enabled. CRC checks will be used to make sure the
    modifcations to scanout buffer are detected.
    
    The operations include:
     - page flip
     - GTT mmap
     - CPU mmap
     - blit
     - rendercopy
     - context switch + rendercopy
     - combination of a page flip and each operation listed above
    
    v2: Use gem_sw_finish instead of drmModeDirtyFB after CPU access
    v3: Drop pwrite tests, call gem_bo_busy() after rendering, drop
        set_domain() calls after mmap access, wait for 2 vblanks
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 49f4860d5c94afffecfac3fcda999bea59d5f929
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Nov 25 17:31:13 2013 +0200

    lib: Add gem_bo_busy
    
    Move gem_bo_busy() from gem_wait_render_timeout.c to lib.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 525788a7360cca116b00819c14ee11c5913ffd42
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Nov 22 22:33:21 2013 +0200

    lib: Add gem_sw_finish()
    
    Wrap DRM_IOCTL_I915_GEM_SW_FINISH into gem_sw_finish()
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 725da6ee7458c5227a2bc9a1b686dad8f3c6d854
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Nov 21 19:05:17 2013 +0200

    rendercopy: Pass context to rendercopy functions
    
    rendercopy does the batch buffer flush internally, so if we want
    to use it with multiple contexts, we need to pass the context
    in from caller.
    
    v2: Modify rendercopy_gen8 as well
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 3d371a7284798c96bb033a449acbad7cc29c2e29
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Nov 22 23:46:32 2013 +0200

    kms_cursor_crc: Fix crc readout after a subtest failure
    
    If a subtest fails, it'll leave the pipe CRC file open, which will
    prevent subsequent subtests from opening the file. Make sure the file
    is cloesed before trying to open it again.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit e1e5856b3ce09e9d8b0899e10cf7e3ef724679d5
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Nov 21 19:48:51 2013 +0200

    lib: Fix pipe_crc->ctl_fd assert
    
    Use the correct fd in the assert().
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 6720dd4b2cb657705ccb31fd87d85cd6831ea2f2
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Nov 27 11:31:12 2013 +0100

    tests: Document exec naming convention for execbuf related tests
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit aa4ff912e3a7a84adcfc6bde9f6f2e9a4a1aaf82
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Nov 27 11:14:19 2013 +0100

    tests: Document per-ring naming conventions
    
    Inspired by the recent pile of tests for the CS, which doesn't split
    up the tests into per-ring subtests.
    
    Cc: bradley.d.volkin@intel.com
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f6d9e160c9d7c76b37b49ce8918b055826806635
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Nov 26 11:32:33 2013 -0200

    tests/pm_pc8: add "resuming" state
    
    This one was missing. For some reason we never really detected it on
    our test suite. I checked the Kernel source and now we should be fine.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 0df88f5e647a38b52b46d010c54f2594c98d8018
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Nov 21 18:19:07 2013 -0200

    tests/pm_pc8: try to reuse FBs when possible
    
    Instead of creating a new FB every time we need one, create a cache of
    FBs and reuse whenever possible. That means we'll create at most two
    FBs, and reuse them hundreds and hundreds of times.
    
    The kmstest_paint_test_pattern function takes about 1-2 seconds to
    run, and we'll avoid it whenever we reuse the FB.
    
    This makes the time taken to run the modeset-lpsp-stress subtest go
    from 2:29 to 1:29.
    
    A full "time ./pm_pc8 --quick" goes from 8:14 to 6:27.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 78227101e27471b81af69b54e2de203678243338
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Nov 21 17:32:42 2013 -0200

    tests/pm_pc8: try harder to reach PC8+ residencies
    
    If we want to actually reach PC8+ states, we need to properly
    configure all the devices on the system to allow this. This function
    will try to setup the things we know we need, but won't scream in case
    anything fails: we don't know which devices are present on your
    machine, so we can't really expect anything, just try to help with the
    more common problems.
    
    Another reason for this commit is that I got tired of having to
    readjust the runtime PM policies every time I reboot my machine.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit e9363973b1fd973f562c101a58354e05ea2b48e4
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Nov 21 15:09:58 2013 -0200

    tests/pm_pc8: rename some subtests
    
    Due to copy/paste error, we had 3 subtests called gem-execbuf-stress.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 6de398888e718800bae0f8cceef0998fbcb0a8d3
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Wed Nov 20 16:58:17 2013 +0200

    tests/gem_reset_stats: check non root access to reset_stats
    
    Getting global reset count needs to be tested with root and
    non root access.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2dd312cbb80be1d8c8a199248095db85eb85155d
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Wed Nov 20 16:58:16 2013 +0200

    tests/gem_reset_stats: stop rings after injecting hang
    
    To make driver report a simulated hang in dmesg.
    
    Suggested-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0afe006eace7042e41689215ef27c82ac39cfb51
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Wed Nov 20 16:58:15 2013 +0200

    tests/gem_reset_stats: add support for BDW+
    
    For BDW+, there BATCH_BUFFER_START is 3 * 32bits in length and
    length needs to be encoded into the opcode.
    
    Suggested-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4fd0458be217841203bb18ed36bda4211bf0cfdf
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Nov 20 16:07:30 2013 +0100

    tests/gem_reset_stats: More macros!
    
    Instead of freaking out about negating the skip condition and punting
    I could have remembered that I've solved this already ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3c55a7df578610b0a5af6c14a6222c8aacc4a523
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Nov 20 10:58:55 2013 +0100

    tools/reg_dumper: Add FW_BLC regs
    
    Debugging watermark issues on gen2/3 without them is hard ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ff193614b29308373ff3a54266159e3e194455a2
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Nov 17 17:29:10 2013 +0100

    tests/gem_reset_stats: Use macros a bit more
    
    Just demonstration really.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 36786e4a04c988184d3c04984f8e4bf7276b0bb1
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Nov 15 07:03:33 2013 +0000

    gitignore: Ignore gem_reset_stats
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit b5bfdbb1adfc18a9259da727a8872bef3811ca21
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Nov 15 00:10:52 2013 +0100

    tests: More bdw fallout
    
    This time misplaced parens.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit df5e880beaffe2ab214eba8cdf27d9459dd99ead
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Nov 14 23:15:37 2013 +0100

    tests: More bdw fallout

commit f7abef6618ab5b8c9a0358f9b765f3445f9f6be4
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Nov 14 14:53:15 2013 -0200

    tests/pm_pc8: add --quick option
    
    Not meant to be used on the QA cycles, but by developers who just want
    to quickly check things while doing development. Reduces the total
    time from 27 minutes to 6 minutes on my machine.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 482654674674cff4cfde4e3b68a4ff5ac125db08
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Nov 14 13:59:49 2013 -0200

    tests/pm_pc8: add some more stress tests
    
    I was suspecting some problems just happen if we have a bigger wait
    than the current ones we have, so add a new WAIT_EXTRA flag just to
    see if the problems really happen. Also, add support for the wait
    flags on the gem stress tests, and use them.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 4fa9dde799793001e16bb99c499b6ff25c5e7250
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Nov 14 13:50:06 2013 -0200

    tests/pm_pc8: remove compare_registers subtest
    
    It's not executed by default, and it's completely relying on Haswell
    registers and on internal knowledge of how the Kernel is supposed to
    work. Since we plan to test generic runtime PM on all supported
    platforms, maintaining this test so it works on all those platforms
    will be a pain. We already have some ideas on how to verify registers
    that must stay at specific values from inside the Kernel, so let's
    kill this test and wait until the proper Kernel code gets merged.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit a8610a4776e9bee9bf3fc275febaf78e3ec38c98
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Nov 14 13:40:52 2013 -0200

    tests/pm_pc8: rename some variables
    
    Since we're not only testing PC8 anymore, we're resting "PM", rename
    some variables from something_pc8 to something_suspend, just to make
    it not-so-confusing.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 19c8d5f4ff887c55cb79b0417912ca137cf1b2e5
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Nov 14 13:35:43 2013 -0200

    tests/pm_pc8: fix debugfs-forcewake-user for PC8-only cases
    
    We don't wake up from forcewake when we only have PC8, but not runtime
    PM, so make the test pass.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 63e4dafb3252c5ee658572181b2d7a06a3a66969
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Nov 12 17:04:50 2013 -0200

    tests/pm_pc8: check for PC8 status, not residency in most cases
    
    If you really want to reach the PC8+ states and consequently get PC8+
    residency, you need to properly configure all the devices on your
    machine to allow PC8+, not just graphics. The current code for PC8
    checks for PC8+ residency everywhere, so if you have a machine that's
    not properly configured you'll fail every test. OTOH, even if your
    machine can't reach the PC8+ states, it will still try to enable and
    disable PC8, so we can try to test the feature even if we're never
    really reaching the PC8+ states. Also, if your machine does allow PC8+
    residencies, but some other driver/program decides to keep the machine
    busy while you're running the test suite, you'll also get failures
    which you shouldn't be getting.
    
    Based on the arguments above, I'm changing most of the subtests to
    only check for the PC8 status reported by sysfs (enabled/disabled),
    not check real PC8+ residency. I also added two tests that should
    check for PC8+ residency, so we will stil be able to diagnose badly
    configured machines.
    
    As a bonus, we won't sleep for full 5 seconds every time we expect PC8
    to be disabled: we'll just read i915_pc8_status, which quickly gives
    the result we're expecting. Considering how many modeset stress
    subtests we have in the program, we'll save a *lot* of time with this
    change.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit a4e96a95ca6468a7ece9fff1c8e1949691439ed4
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Nov 12 13:24:38 2013 -0200

    tests/pm_pc8: add support for runtime PM
    
    We try to detect if we have runtime PM or if we just have PC8. In case
    there's runtime PM, the functions that wait will wait for the runtime
    PM status reported by the sysfs file instead of waiting for PC8
    residencies to move.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit e39f2dbf98a637fffcc0af98ff54ee296738b0ad
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Nov 14 15:50:07 2013 +0100

    tests/gem_cs_prefetch: Fix bdw damage
    
    v2: Fix more.
    
    Cc: Ben Widawsky <ben@bwidawsk.net>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2d1119dfc0b0e0187f8ee89e144a391f7ccfedd5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Nov 11 23:04:11 2013 +0100

    lib: adjust oom_score
    
    This way the igt test will always be killed first (hopefully),
    preventing mayhem when one of the memory thrashing tests treatens to
    take down the entire system.
    
    To avoid any burden on test writers we adjust the oom score on
    drm_open, any of the fork helpers and subtest init. That should cover
    everything.
    
    v2: Fix it up.
    
    Cc: Ben Widawsky <ben@bwidawsk.net>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4697cf4286f3ac3cc80744c3eac2c0579c215d6c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Nov 14 11:08:13 2013 +0100

    NEWS: Make testing requirements official
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 217bd8d55e723d8bd6911d6c2ec8a9c42bdc8272
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Nov 14 09:47:47 2013 +0000

    tests/pm_pc8: Fix invalid pointer-to-integer casting
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=71592
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c37e9cf0c4bb7bae69693fa5d5d57cf30f8db87e
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Wed Nov 13 18:23:06 2013 -0800

    gem_cs_prefetch: more gen8 integration fallout
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 9ef6769366222bc1c272336378d802737a5e9026
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Wed Nov 13 13:28:17 2013 -0800

    gem_evict_*: Fix batch lengths, broken on gen8 integration
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 1ff7427578eaf4fe472eb5424343e53ed283450e
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Tue Nov 12 19:58:16 2013 +0200

    tests: add gem_reset_stats
    
    v2: check the ioctl pad and flag parameters
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e046c31f45e5901e7301fc9bfa2eb8d08b133883
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Nov 12 12:18:33 2013 +0100

    NEWS: Android.mk updates!

commit 76c78c0aae0e31f11ed0fc860e64d437a687529d
Author: Oscar Mateo <oscar.mateo@intel.com>
Date:   Tue Nov 12 11:50:45 2013 +0000

    build: New Android makefiles
    
    These form the basis of the new Android build system.
    
    v2: As suggested by Daniel Vetter, modify compilation flags to
    not error on return-type and not warn on sign-compare.
    
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 25be105d7f0d9f657ce2adf2b4e659882fabb0eb
Author: Oscar Mateo <oscar.mateo@intel.com>
Date:   Tue Nov 12 11:50:44 2013 +0000

    lib/igt_display: workaround a name conflict in Android
    
    PLANE_A/PLANE_B are used by libdrm's i915_drm.h in Android.
    
    v2: Changes suggested by Daniel Vetter and Damien Lespiau:
    - Pimp up comment with a FIXME.
    - Reword commit message.
    
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 235ff9cf34f37d7eb778d72acd298b0cd8c01ab5
Author: Oscar Mateo <oscar.mateo@intel.com>
Date:   Tue Nov 12 11:50:43 2013 +0000

    lib/drmtest: Get the correct basename() under Android
    
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5032e7bbdd342ac111ab2c57bf82b3dd4d26f208
Author: Oscar Mateo <oscar.mateo@intel.com>
Date:   Tue Nov 12 11:50:42 2013 +0000

    build: Fix assorted compilation warnings
    
    As these files are compiled for every test, the warnings cluttered
    the Android build completely.
    
    v2: As suggested by Daniel Vetter, drop some of the fixes and fix
    the compilation flags instead.
    
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit dce0d99a91b4be26c4cd07e7030615fdc46bf2c7
Author: Oscar Mateo <oscar.mateo@intel.com>
Date:   Tue Nov 12 11:50:41 2013 +0000

    tests/gem_vmap_blits: Finish extracting gem_read
    
    It seems something escaped this commit:
    
    commit bd5cf9a07d17ce91dfaa3aa12d3f2c93815f0489
    Author: Daniel Vetter <daniel.vetter@ffwll.ch>
    Date:   Tue Jan 10 15:37:53 2012 +0100
    
        lib/drmtest: extract gem_read
    
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7076ea1bd6ec56cd7c85541a5d2b1bcdeaee85db
Author: Oscar Mateo <oscar.mateo@intel.com>
Date:   Tue Nov 12 11:50:40 2013 +0000

    tests/drm_get_client_auth: In Android, use gettid() instead of syscall(SYS_gettid)
    
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1cd6913608a02f1b38ee44a084875efb9a360e4b
Author: Oscar Mateo <oscar.mateo@intel.com>
Date:   Tue Nov 12 11:50:39 2013 +0000

    rendercopy: Remove rendercopy.c
    
    Move scratch_buf_write_to_png() to its only user, gem_render_copy.c.
    This makes the cairo dependencies easier to handle from the Android
    perspective, but if there is a good reason why this file exists I can
    try to handle it differently.
    
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 37f26d17b1add333bacefe12fe7c7c1514b18e82
Author: Oscar Mateo <oscar.mateo@intel.com>
Date:   Tue Nov 12 11:50:38 2013 +0000

    lib: Move kms stuff from drmtest.c over to igt_kms.c
    
    This makes cairo dependencies easier to handle. Otherwise, we
    would have to litter drmtest all over with "#ifndef ANDROID"
    
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>
    [danvet: Add missing _GNU_SOURCE to igt_kms.c and missing include to
    intel_sprite_on.c]
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4c7d5a52a7f4d79061e6cbb4627df3c194958fff
Author: Oscar Mateo <oscar.mateo@intel.com>
Date:   Tue Nov 12 11:50:37 2013 +0000

    build: Move logic to tests/Makefile.am and away from Makefile.sources
    
    Makefile.sources is just a listing with all the sources, and the logic
    to use these sources goes into either Makefile.am (automake) or
    Android.mk (make).
    
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d80c6bdedba451adff843295367ebcd3d5e3b0c7
Author: Oscar Mateo <oscar.mateo@intel.com>
Date:   Tue Nov 12 11:50:36 2013 +0000

    build: Fix missing "\" in tests/Makefile.sources
    
    Noticed by Damien Lespiau.
    
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ea11d103e0617e33bce6f11328521d15b13422b0
Author: Oscar Mateo <oscar.mateo@intel.com>
Date:   Tue Nov 12 11:50:35 2013 +0000

    build: list all test/tool/lib source files in their own Makefile.sources
    
    In this way, all source files are listed in Makefile.sources and included
    from Makefile.am, thus enabling the reuse from Android makefiles.
    
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c50dd7c149a64b683977d14bc59262f70dda15fa
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Nov 11 22:38:36 2013 +0000

    gitignore: Ignore the newly introduced pm_psr
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 97e48cd619c4b201613ade0110f4db840a02007d
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Mon Nov 11 13:21:58 2013 -0800

    gem_storedw_batches_loop: Fix for real this time
    
    Last patch to fix the breakage when adding gen8 had bugs in the reloc
    offset, and size field.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 4cc506f5eae66b812b7ad6e171524ff1d4f6feb4
Author: Oscar Mateo <oscar.mateo@intel.com>
Date:   Mon Nov 11 15:36:55 2013 +0000

    tests/drv_suspend: Replace "&> /dev/null" with "> /dev/null 2>&1"
    
    Some shells do not understand "&>". For instance, my Ubuntu 12.04
    machine has /bin/sh pointing to dash, which makes a mess out of
    "&>" (to the point that the helper processes cannot be killed).
    
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit b76a411c86512bc13cc501e71e6a212e828ed142
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Mon Nov 11 09:44:13 2013 -0800

    gem_linear_blits: Fix blit command length
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 0d902cad5f95ec88c3925919215ef674ad38b398
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Nov 8 19:33:08 2013 -0200

    tests/pm_pc8: reorganize main function
    
    Split the tests into categories. There are too many tests, it's
    getting harder to locate the ones we need.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit c527a29325bb914ea994ba8d9b38668ac8a39798
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Nov 8 19:19:35 2013 -0200

    tests/pm_pc8: add some GEM tests
    
    These are more complete tests than the previous test_batch() one. We
    test CPU/GTT mmaps, pread/pwrite and batch buffers.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 79670c54eb0345464ffc3b56a27a35bbaa40b539
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Nov 8 19:03:24 2013 -0200

    tests/pm_pc8: remove "batch" and "stress-test" subtests
    
    They use a bad BLT command and don't check its result. The next patch
    will add proper GEM tests that contain commands that work and code
    that checks if the command is really working.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 3775eae05165922585b5f5a1f34452d2ecbdac89
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Nov 8 18:29:57 2013 -0200

    tests/pm_pc8: add debugfs/sysfs tests
    
    They don't really exercise any particular special code path for PC8,
    but the runtime D3 code will touch these code paths, so we'll need the
    tests.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 0fbb8346466d1a5cf692dc7a20687fee2b92cd57
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Nov 8 17:09:43 2013 -0200

    tests/pm_pc8: add modeset-lpsp-stress
    
    It's the only one we were missing form the possible combinations.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 1bcae02e5c1486bfeeea674275fcd5c34bde3414
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Nov 8 17:07:59 2013 -0200

    tests/pm_pc8: extract i2c_subtest_check_environment
    
    Just to make it more organized and consistent with the other tests.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 2fd0eb53aa33662f44d6373c4562ba7cd4523400
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Nov 8 17:05:00 2013 -0200

    tests/pm_pc8: return void on test_i2c
    
    And do the assertion in the code line that actually verifies the
    condition we need. Makes it easier to debug failed tests.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 514efb507d5bb1cd8774b25f4419c948b575a36b
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Nov 8 17:00:40 2013 -0200

    tests/pm_pc8: move teardown_environment next to setup_environment
    
    So I can add/remove/verify code more easily.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit ffc43fcbc0bcd4f7b15afa204723876e258e4bc4
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Thu Nov 7 23:03:04 2013 -0800

    gem_cpu_reloc: Fixed botched BLIT conversion
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 2c0fc4a2e43e4b7f1a5aacca37943f5259da4094
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Thu Nov 7 23:05:01 2013 -0800

    gem_evict_alignment: Skip on GEN8 for now
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 7c41331364ea2ea7a5c7c76c0b66bbc590eade60
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Thu Nov 7 22:59:25 2013 -0800

    gem_evict_everything: Fix broken blit generalization
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 1d9512f6ce136edc23b78cb1352ec2a54152a42b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Nov 8 07:37:57 2013 +0100

    Revert "tests/gem_ctx_bad_exec: Check the errno, too"
    
    This reverts commit 4a6a59f314f61e1e4156bb13a65efabee31a76fc.

commit 26d237cdc28d66674fbc72ea725b24c30d08e80d
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Thu Nov 7 21:00:55 2013 -0800

    gem_storedw_batches_loop: Update for gen8
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 5dbc2630363d1111fd8081d0e3bcb1084cfba7f4
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Nov 7 13:54:01 2013 +0100

    tests/gem_overflow_reloc: Rework subtest enumeration
    
    Subtest names must be stable across all platforms for easier tracking.
    Hence move the gen8+ check into the subtests, using igt_require. This
    will auto-skip the tests on platforms where a given test doesn't apply.
    
    Also move the assignment of the relocation_type var outside of the
    fixture block. Fixtures aren't run when enumerating subtests (so that
    subtests can be enumerated on any platform, even without an intel gpu).
    
    So gcc has indeed been right with it's "potentially uninitialized" var
    warning after all ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4cf1d089ebc83ca21abbc9714bcebecf8a759714
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Nov 7 13:43:43 2013 +0100

    tests/gem_reloc_overflow: Polish after Rafael's patch
    
    - use void* for generic pointer.
    - Fix const usage.
    - Shut up gcc about uninitizialized var.
    - Be paranoid about the moved tests and make double-sure that the
      batch would indeed work safe for the condition being tested.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c537c23efc8173d6526236b6b311ac44c10a14af
Author: Rafael Barbalho <rafael.barbalho@intel.com>
Date:   Wed Nov 6 18:12:12 2013 +0000

    tests/gem_reloc_overflow: Add gen8+ specifc tests
    
    Broadwell introduces 64-bit relocation addresses which add extra
    corner cases. The test was refactored slightly with some tests that
    were in the source offset tests were moved to the more generic reloc
    test area. The source offset tests are now gen aware and called twice to
    test both cpu & gtt relocation paths. In addition 2 new gen8+ test
    were added to the test:
    
    * Relocation straddling page a page
    * Insufficient space for a relocation at the end of the buffer.
    
    Signed-off-by: Rafael Barbalho <rafael.barbalho@intel.com>
    
    Conflicts:
            tests/gem_reloc_overflow.c
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5fab0b8aa7352525f72e0594f05c09272bfc1a79
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Nov 6 18:55:20 2013 +0100

    NEWS: Remove spurious -
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 65cdba94bc49c7016adfc011198aafc6194c4717
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Wed Nov 6 09:49:32 2013 -0800

    NEWS: Restore the 1.4 release info
    
    I suck...
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit a88cf4cbf1272e84b1a76b95da3e7a6eeb86065d
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Wed Nov 6 09:48:17 2013 -0800

    NEWS: Broadwell will be in 1.6, not 1.5
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 02ee89006842e62cf0e29f1830ab304c224def63
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Wed Nov 6 09:36:27 2013 -0800

    NEWS: Broadwell
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 1c5e1d230b26e8eb5017ccf2b409ee43821c58fb
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri May 31 15:31:33 2013 +0100

    list-workarounds/bdw: Add Broadwell to the list of valid platorms
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit d56697233699844db9262a9a056b62b24b69dd39
Author: Mengdong Lin <mengdong.lin@intel.com>
Date:   Sun Aug 25 23:07:22 2013 -0400

    quick_dump/bdw: support Broadwell in device auto-detection
    
    This patch exposes is_broadwell() to python, to be used by device
    auto-detection.
    
    Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit ee4318931fdf968f98f47dd5d6a019b497037d16
Author: Mengdong Lin <mengdong.lin@intel.com>
Date:   Thu Aug 15 23:58:21 2013 -0400

    quick_dump/bdw: dump audio debug registers for Haswell and Broadwell
    
    A new file "audio_debug_haswell_plus.txt" is created to define audio
    debug registers for Haswell and its successors like Broadwell.
    
    Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>
    Reviewed-by: Xingchao Wang <xingchao.wang@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit 0facfb2eb057c425fce21539d5cd25c3fe05eed8
Author: Mengdong Lin <mengdong.lin@intel.com>
Date:   Thu Aug 15 23:58:05 2013 -0400

    quick_dump/bdw: dump audio configuration registers for Haswell and Broadwell
    
    A new file "audio_config_haswell_plus.txt" is created to define audio
    configuration registers for Haswell and its successors like Broadwell.
    
    Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>
    Reviewed-by: Xingchao Wang <xingchao.wang@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit 4f1410d978ad4b184b61bfa0559cfd9c35f1aa0f
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Mon Feb 18 16:00:55 2013 -0800

    quick_dump/bdw: Just basic stuff for now
    
    Just the interrupt registers for now.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit e35126d30ce6deda2b472498882195e37ecde81f
Author: Mengdong Lin <mengdong.lin@intel.com>
Date:   Tue Aug 13 00:22:33 2013 -0400

    intel_audio_dump/bdw: dump audio M CTS readback register
    
    This debug register provides test feedback of the audio M values (DP)
    or CTS values (HDMI)
    
    Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>
    Reviewed-by: Xingchao Wang <xingchao.wang@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit 97e5cf6006077d2ea1b58b5d7993756e9ec1c8b4
Author: Mengdong Lin <mengdong.lin@intel.com>
Date:   Tue Aug 13 00:22:24 2013 -0400

    intel_audio_dump/bdw: dump audio DP and DIP FIFO debug status
    
    Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>
    Reviewed-by: Xingchao Wang <xingchao.wang@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit f075c3c0688c8f2d38bf49691110934e1c2d2032
Author: Mengdong Lin <mengdong.lin@intel.com>
Date:   Tue Aug 13 00:22:14 2013 -0400

    intel_audio_dump/bdw: dump audio chicken bit register
    
    This patch dumps this debug register and parse the data for Broadwell.
    
    Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>
    Reviewed-by: Xingchao Wang <xingchao.wang@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit 8535720b4c9e595316bd5cf172c680ed15c709f4
Author: Mengdong Lin <mengdong.lin@intel.com>
Date:   Tue Aug 13 00:21:57 2013 -0400

    intel_audio_dump/bdw: dump debug registers for audio immediate commands
    
    This patch dumps debug registers to check audio immediate command, response
    and status.
    
    The audio driver will fall back into immediate command mode if normal
    communication between controller and codec is dead.
    
    Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>
    Reviewed-by: Xingchao Wang <xingchao.wang@intel.com>
    [Ben: Small printf changes to remove compiler warning]
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 69cc00b072198264a8a6e7b1e870fe0cbad34ce6
Author: Mengdong Lin <mengdong.lin@intel.com>
Date:   Wed Jul 17 13:29:17 2013 -0400

    intel_audio_dump/bdw: add support for Broadwell
    
    This patch renames Haswell audio dump function and reuses it for Broadwell.
    
    Since Haswell, audio registers are moved from the south display engine to the
    north display engine. And the audio register layout is same for Haswell and its
    successors like Broadwell.
    
    Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit c82872b0193c38994d09f2b78fca03264d52e614
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Feb 27 14:51:48 2013 +0000

    rendercopy/bdw: Add AUB annotations for states
    
    This will hopefully help debugging things.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit 91e589724694c23db9669b987a9411b7ae152d0d
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Feb 27 14:51:34 2013 +0000

    rendercopy/bdw: Fix the original implementation
    
    For posterity, I've squashed these commits against Damien's request.
    
    rendercopy/gen8: Fix the include guards
    
    rendercopy/gen8: Update the 3DSTATE_MULTISAMPLE opcode
    
    The opcode has changed in BDW.
    
    rendercopy/gen8: Add the VF_TOPOLOGY state
    
    The primitive type has moved out of the 3DPRIMITIVE to its own state,
    VF_TOPOLOGY.
    
    rendercopy/gen8: Fixup 3STATE_PS
    
    Update the state to the latest BSpec, in particular the thread count was
    using a wrong shift and we were missing kernel2 offset.
    
    rendercopy/gen8: Update 3DSTATE_BASE_ADDRESS
    
    This state has seen its fields moved around a bit, follow the BSpec.
    
    rendercopy/gen8: Allocate 64 VUEs
    
    The simulator screams at us if we try to allocate less than that.
    
    rendercopy/gen8: Surface states have to be 64 bytes a aligned
    
    rendercopy/gen8: Vertical/horizontal align 2 does not exist any more
    
    So set them to 4. This should not matter with rendercopy (which is not
    using compressed textures), but it makes the simulator moan.
    
    rendercopy/gen8: Make sure the vertex buffer is 8 bytes aligned
    
    rendercopy/gen8: Adjust 3DSTATE_VERTEX_BUFFERS for gen8
    
    The address of the buffer is now on 48 bits. Also the size was computed
    as offset + size where the field is really the size of the buffer
    itself, not the end address.
    
    rendercopy/gen8: Update the SF/SBE states for gen8
    
    gen8 has a few changes around those states and a new ones RASTER and
    SBE_SWIZ.
    
    rendercopy/gen8: Add the PS_EXTRA and PS_BLEND states
    
    rendercopy/gen8: Fix building with DEBUG_RENDERCOPY defined
    
    The forward declaration was missing the final ';'. Let's move the whole
    function at the top instead.
    
    rendercopy/gen8: Update the PS and CONSTANT_PS states
    
    rendercopy/gen8: Fix the red channel selection
    
    Make it output red.
    
    rendercopy/gen8: Update the write -1 shader
    
    With the latest assembler changes from Haihao.
    
    rendercopy/gen8: Remove blit.g8a
    
    There is no diff between this file and blig.g7a. Remove it.
    
    rendercopy/gen8: Fix the surface relocation offset
    
    The surface base address is now at dwords 8/9 so the relocation has to
    mirror the change.
    
    rendercopy/gen8: Add the VF_INSTANCING state
    
    Should work without, but doesn't hurt to add it.
    
    rendercopy/gen8: Set the Attribule enable field in PS_EXTRA
    
    When the SF is set up to output some attributes, the pixel shader also
    have to be told there's attributes to care about.
    
    rendercopy/gen8: Set the force bits to read URB offset/length
    
    If we want to override the URB offset/length in the SBE state itself, we
    need to set the force bits on (new in gen8)
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Acked-by: Kenneth Graunke <kenneth@whitecape.org>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 3f0714a8607fb9b735ef8b16e0e1d1b308381a04
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Feb 27 14:51:33 2013 +0000

    rendercopy/bdw: Add gen8_render.h to the file list
    
    So it gets distributed with make dist.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit 3edfff16cde0033fbec3c2deb390212acff15d6d
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Wed Feb 27 14:51:32 2013 +0000

    rendercopy/bdw: Initial gen8 rendercopy
    
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit 66783e4c4f8b417e2f493e668cc4cac4ebda51a3
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Tue Apr 9 09:59:16 2013 +0800

    assembler/bdw: Add the DATA_PORT_CACHE1 shared function for Gen8+
    
    This is required to send some messages to data port in GPU shader.
    For example: media_block_write message.
    
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Reviewed-by: Kenneth Graunke <kenneth@whitecape.org>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 88e5f1fdf847a0ce284b8a01ff2cf3fb36e2b07c
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Tue Apr 9 09:59:15 2013 +0800

    assembler/bdw: Add the support of align1 register-indirect addressing mode on Gen8
    
    Otherwise it can't compile the following GPU shader that uses the
    register-indirect addressing mode.
      >add.sat (16) r[a0.5,0]<1>:uw     r[a0.5,0]<16;16,1>:uw  0x0080:uw
      >add.sat (16) r[a0.5,32]<1>:uw    r[a0.5,32]<16;16,1>:uw 0x0080:uw
    
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 60c9b41e11bf4a3ea4935bd30f5c169ca24de06d
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Fri Feb 22 11:14:13 2013 +0800

    assembler/bdw: SEND instruction
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 3d8d094efec8cd6efbcead9c2fd54067e1a83223
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Fri Aug 16 15:24:25 2013 -0700

    assembler/bdw: Small cleanup
    
    This was originally part of:
    
    commit 62298329350b965e4bbfc558e5a4b1b3646742ea
    Author: Xiang, Haihao <haihao.xiang@intel.com>
    Date:   Wed Aug 14 14:21:16 2013 -0700
    
        assembler: error for the wrong syntax of SEND instruction on GEN6+
    
    I merged that patch separately, but this tiny hunk was leftover. In
    order to not muck in changing too much history, I am leaving this as a
    discrete patch, but with the changed commit message
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit bf05bd55310a1cde8efb835d4352c9f7c4fbcb60
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Fri Feb 22 11:14:11 2013 +0800

    assembler/bdw: Check & Refinement Engine message
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit b6a33bdcce9dd3a9c55d9077b380f0d5ec6d0da3
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Fri Feb 22 11:14:10 2013 +0800

    assembler/bdw: Video Motion Estimation(VME) message
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit bf003ea63434e6acc91b7c0feec6aa2084983a16
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Fri Feb 22 11:14:09 2013 +0800

    assembler/bdw: Thread Spawn message
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 01c9654a65460eb6058b9060894a6e0e08ac2c80
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Fri Feb 22 11:14:08 2013 +0800

    assembler/bdw: Data port message
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 9d0287c252cb634db6edef990192cf77d2e120e6
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Fri Feb 22 11:14:07 2013 +0800

    assembler/bdw: Set thread switch for multiple branch instructions
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 216163b44d2285705d1af1db405be94d69a27fef
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Fri Feb 22 11:14:06 2013 +0800

    assembler/bdw: Set jip/uip offsets used by flow control instructions
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 2df4d3115af706c9e01b2d7ddb7b957239bfdc85
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Fri Feb 22 11:14:05 2013 +0800

    assembler/bdw: Disable mask control for advanced mode
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 220f165008469c943959cd9ac4958432e4d24d64
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Fri Feb 22 11:14:04 2013 +0800

    assembler/bdw: Set math function
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 9cf8e1b79c9430171f3e627b298bf5e0f4f65c82
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Feb 5 11:34:10 2013 +0000

    assembler/bdw: Use gen8_set_exec_size() to set the execution size
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit f9e74fb49464b64ff9321e04e60dba40a7bc34b5
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jan 31 18:25:45 2013 +0000

    assembler/bdw: Preliminary gen8 send & msgtarget support
    
    Still some work needed there, but enough for rendercopy.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit bc3bf098a98333aa00290663d7aec2e08270fc58
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jan 31 15:31:27 2013 +0000

    assembler/bdw: Add the start of a gen8 disassembler
    
    Directly taken from Mesa.
    
    v2 (Ben): Updated copyright
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 42d8d57c8c57232f6da4c47a03a5d9599976fa98
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jan 31 01:55:48 2013 +0000

    assembler/bdw: Make the validation functions take a brw_program_instruction
    
    This allows to use the same functions to validate operands on gen8 for
    now.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit af4d37de38f2ea0304b9618fbe8d85733663a6c8
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jan 31 02:16:08 2013 +0000

    assembler/bdw: Support some basic gen8 intructions
    
    We should now support alu2 intructions with direct register addressing.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit c3b36592af100672c9b52bdb141e38b7501a658b
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jan 30 17:19:57 2013 +0000

    assembler/bdw: Add gen8_instruction from mesa
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit f57f55e4daf2ef9c60242f22134f0f4e06117ace
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Wed Oct 9 15:51:34 2013 -0700

    tests/bdw: Port storedw_loop_vebox to gen8
    
    I chose not to implement this in the same way as Zhao Yakui because I
    was lazy.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 50a52f3ada8c52c584c23d107bf96fa34a47b46e
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Tue Apr 9 09:29:19 2013 +0800

    tests/bdw: Port storedw_loop_blt to gen8
    
    The code is from the storedw_loop_render.
    
    v2 (by Ben): Flush on the correct ring
    
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 6a2d5059ff2ee3a6a999465b40a89e0c43d7fc12
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Tue Apr 9 09:29:18 2013 +0800

    tests/bdw: Port storedw_loop_bsd to gen8
    
    The code is from the storedw_loop_render.
    
    v2 (by Ben): Flush on the correct Ring
    
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 636f726b8030e2aec831193de25032d817267452
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Feb 14 15:32:33 2013 +0000

    tests/bdw: Port storedw_loop_render to bdw
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Reviewed-by: Jesse Barnes <jbarnes@virtuousgeek.org>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 3aad2ac83c76e8e05ac91d8b7dab465556ef9575
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Tue Oct 8 19:48:35 2013 -0700

    tests/bdw: pwrite_pread
    
    support gen8 style blits
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit d3480229341b78952dc1558dd8992d0f12f6998b
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Wed Oct 9 08:41:52 2013 -0700

    tests/bdw: gem_linear_blits
    
    support gen8 style blits
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit adc5a41f2b26c9c86b4e31d3fa90d95bceece8cf
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Wed Oct 9 08:41:52 2013 -0700

    tests/bdw: gem_pin
    
    support gen8 style blits
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit eb89ce7a7e3c54961025f19093ef79fd677a94b6
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Wed Oct 9 08:41:52 2013 -0700

    tests/bdw: gem_exec_blt
    
    support gen8 style blits
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 91f9e19fcd8df9cd23f54b92db83ecfffcaf47bf
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Wed Oct 9 08:41:52 2013 -0700

    tests/bdw: gem_evict_*
    
    support gen8 style blits
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 6fa529ecd6055db55bc83a56cc83025b3f7dcfd3
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Tue Oct 8 18:15:21 2013 -0700

    tests/bdw: gem_cpu_reloc
    
    support gen8 style blits
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 3e2937bd99a2c01fb303f68c7384fc8addd337ba
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Tue Oct 8 17:38:43 2013 -0700

    tests/bdw: gem_exec_faulting_reloc
    
    support gen8 style blits
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit f4dfa37e8578419b94a7c84fbcea7d4b70aa68b9
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Tue Oct 8 15:02:07 2013 -0700

    bdw: Update obvious missing blit support
    
    This provides a macro that allows us to update all the arbitrary blit
    commands we have stuck throughout the code. It assumes we don't actually
    use 64b relocs (which is currently true). This also allows us to easily find
    all the areas we need to update later when we really use the upper dword.
    
    This block was done mostly with a sed job, and represents the easier
    in test blit implementations.
    
    v2 by Oscar: s/OUT_BATCH/BEGIN_BATCH in BLIT_COPY_BATCH_START
    
    CC: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>

commit 26f09a91897f6ad66b8fb8e0e5afb4c95954fbd2
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Feb 14 15:32:32 2013 +0000

    bdw: Add gen8 specific instdone bits
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Reviewed-by: Jesse Barnes <jbarnes@virtuousgeek.org>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 295137046a353ce43a0eff6b665eb1c63dc6145c
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Feb 14 15:32:31 2013 +0000

    bdw: Add gen8 to intel_gen()
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Reviewed-by: Jesse Barnes <jbarnes@virtuousgeek.org>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 068c21b56b710e20215e2c2e515ac072b6affb9c
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Feb 14 15:32:30 2013 +0000

    bdw: Add gen8 to the IS_9XX() macro
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Reviewed-by: Jesse Barnes <jbarnes@virtuousgeek.org>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit a8221a53ecd295747c00f41b1cd6dbd15eec6b93
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Mon Dec 3 11:36:46 2012 -0800

    pciid/bdw: Add Broadwell PCI ids
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit f20ac4c8a10995d47a0bd853b3436e8427b58bff
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Tue Dec 4 08:38:46 2012 -0800

    chipset: IS_I9XX macro
    
    This isnt useful in IGT, but it will allow us to keep the merge process
    with libdrm simpler.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 41b5fbfd60286fe8052a4b8d5eb5e315118282bb
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Wed Nov 6 13:06:11 2013 -0200

    bump version to 1.5 and add the release date
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>

commit ad648d9debf4c2a751b6d240cfed9da8391913af
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Tue Oct 1 15:12:37 2013 -0300

    tests: pm_psr
    
    Check on debugfs if PSR is supported by panel and matching all conditions in
    hardware. In this case PSR must be enabled and performance counting increasing
    
    v2: check if performance counter is really increasing.
    v3: respect new naming convention
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>

commit 27f1a7dd4bf67cd0fc892e9de3254a65f2c48110
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Nov 6 15:06:15 2013 +0100

    NEWS: drop_caches improvements
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d9381c8a6629a82cb27bfcc4fc29861810fe35f1
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Tue Nov 5 07:44:20 2013 -0800

    quick_dump/vlv: add DPIO_CTL to the dump
    
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit aa252d0e009b8c94ff875a69a4ca3640d1a5c1c9
Author: Oscar Mateo <oscar.mateo@intel.com>
Date:   Tue Nov 5 14:15:19 2013 +0000

    lib/drmtest: Retire requests via drop caches after gem_quiescent_gpu
    
    This helps make sure that the GPU is really quiescent by getting
    rid of any residual stuff.
    
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4a6a59f314f61e1e4156bb13a65efabee31a76fc
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Nov 5 11:56:50 2013 +0100

    tests/gem_ctx_bad_exec: Check the errno, too
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 466da453aee6bc6218b5f7ebf22223c269c176b7
Author: Oscar Mateo <oscar.mateo@intel.com>
Date:   Tue Nov 5 10:57:31 2013 +0000

    gem_flink_race: Assure no pending requests before object counting
    
    Same thing that was done for prime_self_import.
    
    v2: Move igt_drop_caches_set() call inside get_object_count() to make
    it clearer why we want this.
    
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ece21fa86502352a251d313dc22b325ac57f2ee4
Author: Oscar Mateo <oscar.mateo@intel.com>
Date:   Tue Nov 5 10:56:24 2013 +0000

    prime_self_import: Assure no pending requests before object counting
    
    We don't want a previously used object to be freed in the middle of a
    before/after object counting operation (or we would get a "-1 objects
    leaked" message). We have seen this happening, e.g., when a context
    from a previous run dies, but its backing object is alive waiting for
    a retire_work to kick in.
    
    v2: Use igt_debugfs facilities for drop cache.
    v3: Move igt_drop_caches_set() call inside get_object_count() to make
    it clearer why we want this.
    
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>
    Cc: Ben Widawsky <ben@bwidawsk.net>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit eeaf013214698c62a99ff9a83764f1369acd40b0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Nov 3 11:28:50 2013 +0100

    NEWS: Roll in updates.

commit 682b674a673da911c4fa0526596877a28d358471
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Nov 2 12:42:21 2013 +0100

    tests: establish core_ prefix
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 51dc087864c385ebd469c2764b60b40363fbe022
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Nov 2 12:35:44 2013 +0100

    tests: Use kms_ prefix a bit more
    
    I was a bit on the fence about the basic pipe CRC test since that
    doesn't really test kms, but debug infrastructure in debugfs.
    
    Otoh running this one for a full kms testrun is always good, to make
    sure that all the other (real) CRC based tests work sanely.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5738f1952d8b62bb2dea643ae8cfa3c308a45797
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Nov 2 12:27:24 2013 +0100

    tests: establish pm_ prefix
    
    Imo power management, power consumption and performance are tightly
    enough coupled that we can throw them all into one bin.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c32032111aa701061acb7c3247b6cf7696272501
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Nov 2 12:22:37 2013 +0100

    tests: estbalish drv_ prefix
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d983f9934513740f72bd6f9e3ad1007e60435aec
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Nov 2 12:17:49 2013 +0100

    tests: Start to document naming conventions
    
    Just a start and we need more work here. Some follow-up patches will
    clear up some of the historical confusion.
    
    While at it rename the pc8 "basic" test to "rte".
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 66c46ecc80ab16a90ed3dd845fa68a58323622af
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Nov 2 12:54:35 2013 +0100

    Update .gitignore a bit
    
    - Ignore build-aux/
    - Cleanup ignores for assembler/

commit af9d1b5cdb4cc506a7f171a49d1103998b5a2f9e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Nov 4 18:11:29 2013 +0100

    lib: drop return value from igt_drop_caches
    
    No one actually cares, everyone expects it to just work.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5f0ab94c3fca1437f10812e88136f82c3396a99e
Author: Oscar Mateo <oscar.mateo@intel.com>
Date:   Mon Nov 4 16:30:47 2013 +0000

    lib: Add igt_drop_caches_set()
    
    This is basically a "drop cache" interface to the igt_debugfs
    facilities. Also, update existing users.
    
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>
    Cc: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a97402e89ac492e2cbdd4b194638a7c0e898a4a3
Author: Oscar Mateo <oscar.mateo@intel.com>
Date:   Mon Nov 4 16:30:46 2013 +0000

    tests: Fix "-thrashing" and "-thrash-inactive" distinction
    
    A typo in the relocation tests made both sub-tests perform the
    same action: drop *all* caches.
    
    Signed-off-by: Oscar Mateo <oscar.mateo@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 163d85d5f0c4e8dfecb93c3a01c7f90da744aa79
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Nov 1 22:18:20 2013 +0100

    tests: igt_no_subtest
    
    Yet another check for the library.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6d73fdbfd2d8944702459f7412790aab32677c48
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Nov 1 18:31:59 2013 +0100

    tests: Add a Makefile comment about the expected failures in igt_ tests
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8f718b1cd80b13d9044956a5b19668faf4320a52
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Oct 31 17:05:28 2013 +0100

    tests: Add a test template
    
    Requested by Paulo.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 071e9ca1ca4424ba35edec0246918efdd0528d76
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Oct 31 16:23:26 2013 +0100

    lib: add igt_main macro
    
    In the past new testcases with subtest often forgot to add the call to
    igt_exit at the end of their main() function. That is now caught with
    a bit more obnoxious asserts, but it's still a nuissance.
    
    This little igt_main macro takes care of that (and also of calling the
    subtest machinery initialization code correctly).
    
    If no one objects I'll roll this out for all the simple cases (i.e.
    those tests that don't have additional argv parsing on top of the
    subtest machinery).
    
    v2: Roll it out across the board.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 223a61e12e119d96484ed05c563d1781fd613a4e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Oct 31 17:16:33 2013 +0100

    lib: make igt_install_exit_handler never fail
    
    Most callers didn't bother checking, so just move the asserts into
    the function itself.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1f0cf2df85ca3f9d900b21db9c8744a99e8f60a0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Oct 31 17:02:41 2013 +0100

    lib: make igt_set_vt_graphics_mode never fail
    
    All tests agree that this is a letal failure, so no point
    to pass it back to callers.
    
    Also add some igt_require calls for the drm_fd where I've
    noticed that it's missing.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0369fe19b8b8e19e0815361b5187eba81cb2d71a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Oct 31 16:09:46 2013 +0100

    lib: consolidate pipe crc exit handler
    
    No need to sprinkle this all over:
    - exit handlers will only be registered once
    - they're always called when exiting, so no need to explictly call
      them.
    
    This allows us to hide all the pipe crc cleanup in the library.
    
    Cc: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 43def94f3213634c2c798049cb17efc14801a9ed
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Oct 31 16:06:40 2013 +0100

    tests/kms_cursor_crc: rework to auto-skip connectors
    
    Cc: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8bb5730d28122fe5c142815f1ad32c351bf36cfe
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Oct 31 15:37:05 2013 +0100

    tests/debugfs_pipe_crc: set mode before creating CRC helper
    
    Otherwise the automagic skipping for DP ports on gmch platforms
    won't work.
    
    v2: We also need to just skip that connector, not the entire subtest.
    
    kms_cursor_crc still needs to be updated.
    
    Cc: Damien Lespiau <damien.lespiau@intel.com>
    Cc: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 842007154da76dc2684077a4080c875bb3068f32
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Oct 31 14:02:44 2013 +0100

    tests: use "auto" pipe CRC source
    
    Makes stuff work on DP ports on gmch platforms automatically.
    
    Cc: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0b51de8dd02dc2502fa0614c3a29959a066584cc
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Nov 1 18:29:33 2013 +0100

    lib: add more self-tests around the igt_exit checks.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e14596a6d074c5e79343633bf3c21a2f2961269d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Nov 1 18:21:08 2013 +0100

    lib: fix igt_exit assert when only listing subtests.
    
    Ooops. Reported by Paulo. Also add a new testcase for make check to
    make sure this actually works.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9e21c255e74128a16ef5c2dd4b1903d1d2c417eb
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Nov 1 16:25:10 2013 +0000

    lib: Don't forget to close the pipe ctl fd in igt_pipe_crc_reset()
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit b1945f8c46c1305dd882241711471dbea90f0c2b
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Nov 1 15:47:42 2013 +0000

    gitignore: Ignore recently introduced tools and tests
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit bd0aa100ca438fa68cf07dc55ec6dbfe7391ba6c
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Oct 21 11:45:41 2013 -0200

    module_reload: remove snd_hda_intel
    
    The audio driver uses the power well provided by our driver, so on
    Haswell we can't "rmmod i915" if we don't "rmmod snd_hda_intel" first.
    
    The problem with removing snd_hda_intel is that we also need to kill
    its users. On the specific machine I tested, the only user seem to be
    alsactl, but on other machines this may change. IMHO we should leave
    the "kill user space" step to whoever is running the script, but
    Daniel asked me to put it here so we have a better chance of Just
    Working on QA's machines.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=70336
    Requested-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 3c6a7e780b08cf7cf9e7700a2a882014f947a795
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Sep 19 18:14:54 2013 +0300

    Add VGA register read/write tools
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 164b540936b6cc6d67151793efdc6261975cadfc
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Thu Oct 31 14:16:41 2013 -0700

    debugfs_pipe_crc: skip on simulation
    
    As with other display tests, they're not working (and in this case,
    cause hangs).
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 2addb2744f2373cd327a8633330bf27fd11ce621
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Oct 29 14:02:43 2013 -0200

    tests/pc8: remove some printfs
    
    They pollute the output, which makes it harder to see which tests
    failed or succeeded.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit b6645ee2e27beb2d8e69402611938c288ab35a47
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Oct 29 11:14:50 2013 -0200

    tests/pc8: clarify modeset_subtest arguments
    
    My tiny little brain can't properly process 3 unnamed boolean
    arguments.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit abb334061763652eec274831cda87dab9f8f1d15
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Oct 29 11:00:45 2013 -0200

    tests/pc8: add modeset -stress-no-wait tests
    
    Used to trigger a racing condition between mode setting and
    enabling/disabling PC8. The modeset-lpsp-stress-no-wait test should
    fail on Kernels without the fix I just wrote today.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 7a5275f8a5a5768da038c87efd344c65302dfc93
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Oct 28 19:11:31 2013 -0200

    tests/pc8: add modeset-lpsp and modeset-non-lpsp
    
    The goal of these tests is to exercise the combination of power well
    enabling/disabling and PC8 enabling/disabling. The modeset-non-lpsp
    test exposes a silent bug on the current code that can just be
    detected with the Runtime D3 patches. The Kernel patch that fixes the
    bug will add a WARN to unmute it on the PC8-only case.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 87cf5571fc206f6d87195d574b2ec2092e0c2b1f
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Tue Oct 29 20:01:43 2013 -0700

    gem_suspend: Skip on simulation
    
    Simulation has proven flaky across both reset, and s3/4
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 5382aca1afb33614270c536835e3da61b4e2d123
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Tue Oct 29 20:01:14 2013 -0700

    gem_close_race: Fix linker flags
    
    Seems the -lpthread was missed in
    commit 8f771f3facae133bb72216fa05c74bc817920b6d
    Author: Chris Wilson <chris@chris-wilson.co.uk>
    Date:   Tue Oct 29 14:21:29 2013 +0000
    
        gem_close_race: Also test random closing of active fd
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 8f771f3facae133bb72216fa05c74bc817920b6d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 29 14:21:29 2013 +0000

    gem_close_race: Also test random closing of active fd
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5d24a67c1b885084e0f0d51631ed0c5227bcb112
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 29 11:29:00 2013 +0100

    lib/drmtest: Scream harder when igt_exit isn't called for subtest tests
    
    We really need this since otherwise the magic return value handling
    for running testcases with piglit (or on QA's validation
    infrastructure) doesn't work properly.
    
    We need to be careful though to only install this check on success.
    
    See also the previous commits to sprinkle igt_exit() calls over all
    the tests that missed it.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 780807099a482fdcbaea40af7117127b6d92beae
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 29 11:15:43 2013 +0100

    tests: Use igt_exit for tests with subtest
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ccb1b5888dd18a8227a4e09a5674abca15931c87
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 29 09:25:44 2013 +0000

    gem_close_race: Bump the workload
    
    Emit more work per client and many more clients in order to increase the
    chance of racing i915_gem_release() and i915_gem_retire_requests()

commit 51783fc7f9aacd20f13bd7a12c5eb9194176ab14
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 29 08:38:30 2013 +0000

    gem_close_race: Tidy up call to execbuffer
    
    Pass the right pointer to the execlist would be a good start.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7b8784dccf303c4fd9c6a1c2e3f9fae7d00fde2f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 29 07:47:33 2013 +0100

    tests/kms_cursor_crc: Use igt_exit
    
    Otherwise the exit codes are all bogus.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 020600b77dfc179d99bb3d088927dcdf6d432cfe
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Oct 24 15:27:12 2013 +0100

    tests: Convert the ctx test to use render nodes when possible
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit d71ecdbf5de0bb95551c6a5def4d42e85b4d6616
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Oct 24 15:21:59 2013 +0100

    tests/gem_render_copy: Use render nodes
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 69c200b0bb39bb585f46fa5c779c97166779cd93
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Oct 24 15:19:32 2013 +0100

    lib: Add a drm_open_any_render() that will try to use render nodes
    
    I was fedup with having to run my tests as root and not being able to
    use my usual setup for tests that only exercise the GT part of the GPU.
    
    Render nodes to the rescue!
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 8329acb752721ad93dab70624b136f1befd4be3f
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Oct 24 15:04:26 2013 +0100

    lib: Close non intel fds in drm_get_card()
    
    When going through card%u devices, close the ones that we were able to
    open but weren't intel devices.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 949ce5b8a1054fcc1c375ee4b801c291483e2005
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Oct 24 14:08:17 2013 +0100

    lib: Remove stale comment
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 90ecf062d10a3ed1bb08cb887aea78b385072584
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Oct 28 09:10:46 2013 +0000

    tests: Add gem_close_race
    
    The intention is to exercise #70784. Yet the first challenge is make the
    test suite happy.

commit 37c02cfa5c4ff2fa6dd833efdcf880416139d096
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Oct 22 15:03:48 2013 +0100

    gem_render_linear_blits: Remove aub dump support
    
    It's much easier to follow the new gem_render_copy test and acquire a
    aub dump from it.
    
    Suggested-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 7ad0cf585b4f4c0391646c0eaea6e7e8e2e88cca
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Oct 22 14:57:57 2013 +0100

    tests/gem_render_copy: Add aub dump support
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 145722187c30a60456df046981087f84f3c0b601
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Oct 22 14:26:38 2013 +0100

    tests/gem_render_copy: Only dump pngs when the -d option is given
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 9cd092fac149eb8cfe16e3652f1d535fb0698329
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Oct 22 14:20:10 2013 +0100

    tests/gem_render_copy: Add a simple render copy test
    
    The goal is here to both: demonstrate a simple usage of render copy with
    the possibility to write pngs to visualize what it's doing and to
    provide a test bed to port the render copy function to new
    architectures.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit c3707ab387500b534224dd563297a7bbb26aeb83
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Oct 22 14:18:26 2013 +0100

    lib: Add a function to dump a scratch buf into a png
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 13ebe3c01410c2dc0d90a4a1c33cbf143c51056c
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Tue Oct 22 12:35:59 2013 -0200

    build: include intel_l3_parity.h to its _SOURCES to fix make distcheck
    
    and make sure intel_l3_parity.h will be included in tarball.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>

commit 50c2653381ad0ff5390932df1385aeb20b0d03bc
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Tue Oct 22 11:28:56 2013 -0200

    build: Fix small typo that was breaking make distcheck
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>

commit fa05c0bcedd909bf8b85c02ca0f533921e8256b4
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Oct 16 23:07:34 2013 +0300

    kms_flip: Add test for -ENOENT
    
    Make sure we get -ENOENT when we pass a non-existing fb_id to
    the page flip and setcrtc ioctls.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 08c27e3e3899f5063ac3eef44a4dbb6201568b47
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Oct 18 17:44:42 2013 +0300

    kms_cursor_crc: Add a cursor test using CRCs
    
    Use the display CRC support to validate cursor plane functionality.
    The test will position the cursor plane either fully onscreen,
    partially onscreen, or fully offscreen, using either a fully opaque
    or fully transparent surface. In each case it then reads the PF CRC
    and compares it with the CRC value obtained when the cursor plane
    was disabled.
    
    v2: Loop over all connectors and crtcs
        Use igt_wait_for_vblank
        Test more corner cases
        Add some progress indication ala. kms_flip
        Make it work for pf and pipe sources
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 0786d5cc8f258c7f403a22d8234ebb81837baa70
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Oct 21 18:45:03 2013 +0300

    lib: Check pipe source validity in igt_pipe_crc_new()
    
    Have igt_pipe_crc_new() check whether the selected source is actually
    supported.
    
    v2: Make debugfs_pipe_crc.c not crash
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 987bcd9a5b51db312588163d7f9a21654eb799e4
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Oct 21 19:37:33 2013 +0300

    lib: Allow pipe_crc_free(NULL)
    
    Prevent pipe_crc_free() from segfaulting on NULL ptr.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit 471ec64de83b21316cd7f4d86a9337f4d017a907
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Oct 18 21:43:14 2013 +0300

    lib/drmtest: Add kmstest_paint_color_alpha()
    
    kmstest_paint_color_alpha() just like kmstest_paint_color() except you
    also get to specify the alpha channel.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>

commit e98a06d593ba879a5292451812be773b4157fe21
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Oct 21 13:19:57 2013 -0200

    intel_reg_dumper: fix "enable" at hsw_debug_lp_wm
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit b7ccea08e6e704d0e6c0e72b3c44d4fa6e97fa76
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Oct 21 15:55:52 2013 +0100

    gitignore: Ignore intel_opregion_decode
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 6d3c917e8988979e1328103c5f030371a854e5b1
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Oct 8 21:18:14 2013 +0300

    intel_opregion_decode: decipher bclm table
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>
    Reviewed-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 76be74975a88fe5ed12744d7735caef7588c69fb
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Oct 8 21:18:13 2013 +0300

    intel_opregion_decode: new tool for decoding graphics opregion
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>
    Reviewed-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit a360e3993b9a6800432d7e1b4591d2dd6bf2ddb8
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Oct 8 21:15:28 2013 +0300

    intel_bios_reader: dump all sections, including unknown ones
    
    We still need to dump some of the known sections explicitly due to
    dependencies on information extracted, such as LFP data pointers and
    panel_type.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>
    Reviewed-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 419d053fd628b66fe0d838642ced6e9980f6282b
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Oct 8 21:15:29 2013 +0300

    intel_bios_reader: dump all edp device info structs
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>
    Reviewed-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit a4180df32a74c8aaa7a58e1cf60d240905e01852
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Oct 8 21:15:27 2013 +0300

    intel_bios_reader: prepare for dumping all sections
    
    Dump sections through a table based on the section id.
    
    Hex dump the section. This works also for unknown sections.
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>
    Reviewed-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 8596a4b8869bb17a4eed31815b2b63ef973c71c7
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Oct 8 21:15:26 2013 +0300

    intel_bios_reader: add size temp variable as a shorthand for finfo.st_size
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>
    Reviewed-by: Rodrigo Vivi <rodrigo.vivi@intel.com>

commit 58ac17d821cb3fa6300ca58d7f387c41a81d449c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Oct 21 09:31:18 2013 +0100

    intel_error_decode: Fix X/Y fence for gen2/3

commit 4acaf0004d43dfb51ba60d7990cef22a54b56727
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Oct 20 20:37:21 2013 +0200

    tests/kms_flip: More leeway for dummy load tests
    
    At least on my old atom i945 they take forever. Also, metric tons of
    pipe B underruns while running rcs-flip-vs-panning. No idea why that
    happens.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3d2d73ed450983c427a839b10527bd4659fbb708
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Oct 20 19:24:08 2013 +0200

    kmstest: don't pollute stderr for impossible output configs
    
    Otherwise on machines where the only output available is restricted to
    one pipe we'll have tons of "warn" results for no gain in the piglit
    runner. All tests that use the kmstest helpers already check the
    return value and do something sensible (like skip the tests if there's
    really no config available).
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 45cd89ab3d18dc2c869951db4134c1e5dde45c1b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Oct 20 16:11:49 2013 +0200

    tests/kms_flip: Unconfuse the framenumber step checking
    
    We run flips and vblank waits in parallel, which means the step
    for each is the maximum. If we'd switch to an interleaved scheme
    (to be able to check the correlation) we'd need to add them instead.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8e11f8778adff693f3a0246fe0e87be4e3ddb83f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Oct 20 16:10:32 2013 +0200

    tests/kms_flip: no absolute vblank wait on the first frame
    
    We don't have a reference value for the vblank counter yet, so
    will end up waiting for a long time for the vblank counter to
    wrap around again.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e313dee22b8edf1429ce861e5974b09bb2ab1b68
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Oct 19 16:21:18 2013 +0200

    tets/kms_flip: disable correlation check
    
    It's broken since it doesn't take the order the events arrived into
    account and so will fall over for longer seq_step values in the vblank
    event: Since the flip completes right away, but the vblank later on
    they won't have the same timestamp.
    
    For now just give up, we could resurrect this by strictly alternating
    between a flip and a vblank wait.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f698984bae5e907eedfa335b463ab717a45ecc2a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Oct 18 18:43:30 2013 +0200

    tests/debugfs_pipe_crc: new subtest to check CRC frame numbers
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 09e9f0b216dd7ee06b857ce5fd5cc9cb5ca491dc
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Feb 27 14:51:29 2013 +0000

    rendercopy: Add a way to dump an .aub file with the rendercopy bos
    
    v2 (by Ben): Remove libdrm dependency since intel-gpu-tools now requires
    a higher version anyway. Remove associated #ifdef ENABLE_AUB_DUMP
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit 5038b7e4c243b4e9d07db34a33c70adbec044370
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Oct 18 17:53:05 2013 +0200

    lib: fix the assert in igt_stop_helper
    
    So much for developing different patches on different machines and
    then not retesting after rebasing. Reported by Ben on irc.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 768e32a3ab5e45cc52558fb544d392729e02f1ae
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Oct 18 14:29:20 2013 +0100

    lib: Don't wait for a vblank when enabling the CRCs
    
    This was a previous attempt to solve the first CRC being bogus. We know
    wait for it and discard it at the end of the function.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 5e3047ce522ed57dd6d06bd7512d792bcf601855
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Oct 18 12:27:21 2013 +0100

    tests/debugfs_pipe_crc: Test the read CRCs are not null
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 43f5384c083adb2ae99fb138099130bf450ebd01
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Oct 17 14:18:35 2013 +0200

    tests/debugfs_pipe_crc: test all connectors
    
    Diff looks a bit ugly, but it's just due to the added indentation.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 070904bf59abb3ce8ff1d3125cdfae606a5472ed
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Oct 17 14:10:43 2013 +0200

    tests/debugfs_pipe_crc: test all pipes
    
    And skip them if there's no suitable connector.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e6ad75c1c4763f649f19c367b041ce7d13dcc789
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Oct 17 14:09:52 2013 +0200

    tests/debugfs_pipe_crc: fix fb leak
    
    Also remove the unused connector_t->mode.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 173a4cf1da300af4dc3c7c0f2ea085d19e1ce90b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Oct 16 22:49:24 2013 +0200

    tests/debugfs_pipe_crc: fall back to PIPE source
    
    With PLANE1 and PIPE CRC sources the test will work on all currently
    shipping (and planed fwiw) platforms.
    
    Also add all the other new sources for non-ivb/hsw chips.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 548323c87d2f11384023ae3b064d6eb793d23115
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Oct 16 19:52:00 2013 +0200

    lib/drmtest: Check that helper processes have died correctly
    
    If the test gets stopped sometimes a helper process falls over.
    We need to report this. Since we currently don't track helper
    process to precisely we can't shut up the 2nd test failure messge.
    This shouldn't happen anyway.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1cefd198da32d02ba7ae737866569dd56112158c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Oct 17 10:48:29 2013 +0200

    tests/ZZ_missed_irq: Fixup SOURCE_PATH handling
    
    Copy the trick from ZZ_hangman of just cd'ing into the old working
    directory in a subshell.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=70561
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a12d4a713544ff1ff89ca176d7e94e16944adb56
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Wed Oct 16 22:01:34 2013 -0700

    gem_ctx_bad_exec: skip vebox when appropriate
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit befabe241a0c01dacc230b22a488d06df76bba5e
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Oct 8 21:19:06 2013 +0300

    README: list some of the dependencies
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit 0412f32670642f88bf6de6afce9179eefe608f13
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Oct 16 14:12:49 2013 +0200

    tests/debugfs_pipe_crc: correctly skip on unsupported platforms
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4ba97ddf96136d463e5b584fe997d6de698c0a74
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Oct 9 11:47:43 2013 +0100

    debugfs_pipe_crc: Let's check CRCs!
    
    Let's add a new test that sets a mode, wait for a few vblanks (3) and
    then make sure we read 3 identical CRCs.
    
    Some subtests check for various parsing errors.
    
    In the process, improve the debugfs helpers to deal with CRCs.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit f673775fe8a7d9faeaa80f4af9677fecf16e4b17
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Oct 11 18:31:20 2013 +0100

    lib: Add igt_wait_for_vblank() helper
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit d4e7ddf15d69fdb17d25446edcd6c73a684b759b
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Oct 9 23:53:15 2013 +0100

    lib: Make igt_debugfs_open() take the mode as argument
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 952d4b0a9c835d1d2e4e2c1b8727d225c805c8c6
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Oct 9 17:54:11 2013 +0100

    lib: Add a igt_display.h with a few enums and defines from the kernel
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 252dca1c7b41410e7ff4ab61590a1433a8747e1f
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Oct 9 17:42:52 2013 +0100

    lib: Add kmstest_paint_color()
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 5a97ea91e11a4d2a2cfd46f18e0a69c2f0f279af
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Oct 9 13:42:13 2013 +0100

    lib: Add a igt_assert_cmpint()
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit ffa2107abc46bb891ee2e0f2f73944626b9c67a9
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Oct 9 11:45:31 2013 +0100

    lib: Add igt_debugfs_fopen()
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 51b63e334c5a4271b845d2eba0486c2b4f2bbda0
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Oct 8 23:39:33 2013 +0100

    lib: Add a small helper to open debugfs files
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 8fed3837c758c13c3d7a767765df2caf792cdd7a
Author: Matt Turner <mattst88@gmail.com>
Date:   Fri Oct 11 17:34:13 2013 -0700

    Depend on libdrm_intel >= 2.4.47.
    
    Reviewed-by: Ben Widawsky <ben@bwidawsk.net>

commit cd460f1a2c5c23bacfb6849923f5d4596ebc3fc4
Author: Matt Turner <mattst88@gmail.com>
Date:   Thu Oct 10 20:54:25 2013 -0700

    configure: Don't bail if libdrm_nouveau isn't available.
    
    We were seriously *requiring* libdrm_nouveau unless explicitly disabled?
    
    Acked-by: Ben Widawsky <ben@bwidawsk.net>
    Reviewed-by: Chad Versace <chad.versace@linux.intel.com>

commit d3d371fdf6aab3433ffe4bdf1d7512245aa26335
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Oct 14 19:10:56 2013 +0200

    tests/pc8: Readd verbose error message
    
    I deemed them a bit redundant (assuming that developers are the only
    ones that look at them anyway). But Paulo requested that I readd them
    for the education of QA.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a5d40a9bf27c2a41a981cb6fa168b1e68bfc0b3c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Oct 11 20:53:40 2013 +0200

    tests/kms_flip: fix igt_assert
    
    I've blown the conversion in
    
    commit 37e5b318c5dac290611099e2eec21df1e49fa71f
    Author: Daniel Vetter <daniel.vetter@ffwll.ch>
    Date:   Fri Oct 4 18:42:26 2013 +0200
    
        tests/kms_flip: use igt_assert more
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=70332
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 98a2b5b01f915c05ef50364494d8092668b94d8c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Oct 11 20:22:19 2013 +0200

    tests/kms_flip: Skip if the kernel doesn't let y-tiled bo slip through
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9f3794f5fd6baf613594422b64d4eb050f27b78e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Oct 11 19:58:43 2013 +0200

    tests/kms_flip: exit handler needs a fixture
    
    Since it can fail.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=70332
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ce5becbb616637753e2c7e441c5e019f3864b3f7
Author: Thomas Wood <thomas.wood@intel.com>
Date:   Thu Oct 10 12:23:19 2013 +0100

    testdisplay: Allow getopt to print error messages
    
    By not assigning opterr, getopt will print its own error message that
    includes information about whether an option is unknown or just requires
    an additional argument.
    
    Signed-off-by: Thomas Wood <thomas.wood@intel.com>

commit ffdece38e2b6aec64b0d96e83cd2324c035b1867
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Oct 10 14:20:43 2013 +0200

    tests/gem_suspend: test debugfs/sysfs reads while s/r
    
    Just a very quick hack cobbled together with /bin/sh and exec. We
    can't use system since that does stupid things with singals ... Still
    we need to whack the child process pretty hard to get rid of it.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8a9b275b96f1ea5637d21e4568647dcb7fed98f2
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Oct 10 11:22:09 2013 +0200

    tests/module_reload: fail if the module didn't unload
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=70336
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f014878722f7d9371e54e936de668d8a3b8115f1
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Wed Oct 9 09:07:55 2013 -0700

    gem_pin: Use iterator for blit batch setup
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit a7934e26ae206c6558ff3b34af8728ca7ef04fb5
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Wed Oct 9 08:55:24 2013 -0700

    gem_exec_blt: Use iterator for blit batch setup
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 637162d0f7dee79c08c49d717c295be0b0d4696e
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Wed Oct 9 08:37:48 2013 -0700

    gem_evict_*: Use iterator for blit batch
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit aa6fbd18d4f52b2bc9e6bf9c16b9bcd585a1ae6b
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Wed Oct 9 09:07:55 2013 -0700

    gem_linear_blits: Use iterator for blit batch setup
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 4de3b1765e6f76f4e0f40434f5278f0edac0c61e
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Tue Oct 8 17:36:21 2013 -0700

    gem_exec_faulting_reloc: use iterator for batchbuffer
    
    This will help keep the code clean for new platforms which might have
    differently sized relocations.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 6f8c30d8edf8ee0c57689704e32b949b003bfb02
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Oct 9 21:20:40 2013 +0200

    tests: add kms_addfb
    
    Just a bunch of testcase to check that all the addfb sanity checks
    work as they should.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 590f6101402b51bca54f69c002380bda967484ea
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Oct 9 20:50:50 2013 +0200

    lib/drmtest: extract rawer __gem_set_tiling
    
    For tests that expect failures. Also apply the existing gem_set_tiling
    helper a bit wider.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 40599b077972e1a721fdfcc93455e60b5b564a13
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Tue Oct 8 19:47:53 2013 -0700

    pwrite_pread: Get devid only once
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit a2925b0989463a1d225a3b870a3a0e06fa74ad97
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Tue Oct 8 19:45:30 2013 -0700

    pwrite_pread: Extract batch building
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 41ae28e498afed2685feaa95ab8bf4ffdd687b62
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Tue Oct 8 19:41:49 2013 -0700

    pwrite_pread: use execbuf.batch_len for size
    
    This will make an upcoming change easier.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 96f665cabb3038905a8a9839dae025f5156ae80e
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Tue Oct 8 20:32:12 2013 -0700

    gem_tiled_blits: Squash bo leak on simulation
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit f75dec0b415c8c319b9aae32cfdbac6144f3e770
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Tue Oct 8 18:30:13 2013 -0700

    gem_tiled_blits: Squash memory leak on simulation
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 304c458d542a3eee928c0004432aea8f20ca42fb
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Oct 7 22:55:14 2013 +0200

    tests/kms_flip: Skip if no clone configuration could be found
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bc888c2b42ab42d628d9c11181a5ba09df66fdcc
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Sat Oct 5 16:21:11 2013 -0700

    configure.ac: require dri2proto for overlay
    
    With the introduction of
    
    commit f9a50de3dcc501e930de6c60983a4feb57121e7e
    Author: Chris Wilson <chris@chris-wilson.co.uk>
    Date:   Sat Aug 17 11:12:07 2013 +0100
    
        Introduce intel-gpu-overlay
    
    dri2proto became a dependency (and there is no way to disable overlay
    explicitly. The actual version chosen was arbitrarily stolen from mesa.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit ae599546fadb3b8ebc3114f8ab5b58cffc467952
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Oct 4 19:55:56 2013 +0200

    tests/pc8: Fail harder
    
    If the test enviroment isn't properly set up we should fail the
    testcase, since otherwise there's no way to make sure a feature
    actually works.
    
    To cut down on bug triaging time extract the basic test (which was
    previously used to skip all subtests) into a "basic" subtest.
    
    Also fail the test hard if the msr interface isn't available. And
    switch all other check in setup_enviroment to igt_require.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=69838
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3dc91f32424191f28d7512014b2871e22b5a05b9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Oct 4 19:49:36 2013 +0200

    tests/pc8+: Only skip i2c subtest if i2c /dev interface is unavailable
    
    Through the magic of igt_skip we only need to fail this subtest, not
    the entire thing.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 37e5b318c5dac290611099e2eec21df1e49fa71f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Oct 4 18:42:26 2013 +0200

    tests/kms_flip: use igt_assert more
    
    I've left the time delta checks as-is since those are tricky math and
    my mind is feeble.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 54b5f7251ac8f28338ea59f110f680c3ac8b6c74
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Oct 4 18:11:37 2013 +0200

    tests/kms_flip: check flip count in both directions
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 47d0a6fa6954a2742a50b988461f48597f960b24
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Oct 4 11:10:48 2013 +0200

    NEWS: Mention gen7 perf counters release
    
    This is too great to be omitted!
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b53f22cee7323df6984f2d34464b51264a92ef2a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 23 12:32:43 2013 +0100

    tests: Simulate missed breadcrumb irqs
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 11d5859b28727e1dac9d5b15b3027938a7023067
Author: Kenneth Graunke <kenneth@whitecape.org>
Date:   Tue Apr 2 22:54:08 2013 -0700

    intel_perf_counters: Add support for Gen7 platforms.
    
    We finally received permission to release this; the counters should be
    properly documented in the Haswell PRMs.
    
    Signed-off-by: Kenneth Graunke <kenneth@whitecape.org>

commit 16b61932bb1b54a21b67b6c209ba405f5a36f174
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Oct 3 22:45:53 2013 +0200

    tests/kms_flip: use igt_assert in the dpms helpers
    
    No need to route the error code around really.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0b19cb5dc2afe55084b946b053c527b9f44a011f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Oct 3 18:30:56 2013 +0200

    tests/kms_flip: Check the dpms confusion
    
    Some kernels inadvertedly forwarded dpms changes to crtcs connected to
    shared encoders even though that specific output wasn't enabled.
    Hilarity ensued.
    
    Note that we only have shared encoders on hsw (DP+HDMI) and with sdvo
    cards (multi-function encoders).
    
    v2: Do a full OFF->ON->OFF transition to make sure something actually
    happens.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a8bf10c9cf5000083b102549a335239bd01d4f2f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 1 22:20:38 2013 +0200

    NEWS: testdisplay now with 3d support!

commit 1f0addb689a5707bc3e5a5e36d28fea2745ea352
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Sep 30 21:38:09 2013 +0200

    tests/kms_flip: scale test runtime
    
    On machines with many outputs and many crtcs it takes too long.
    So scale the runtime by the number of output combinations we're trying
    to light up.
    
    Compensate the test runtime a bit by doubling most subtests' duration.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3f89d5403ef85c1f101c0f1026cf9b800bbaaea9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Sep 30 21:35:47 2013 +0200

    tests/kms_flip: fail harder
    
    At least for pipe A/B we should always fail the test if we can't light
    up the preferred mode - the kernel should filter out impossible modes
    and for our hw pipe A/B are the least constrained.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6de613f8e5b76435150a74a38f5863f93195b473
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Sep 30 18:03:33 2013 +0100

    testdisplay: Print the stereo mode being tested
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit e836b60d3751475e768a339f29d231509ac1596c
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Sep 30 17:42:33 2013 +0100

    testdisplay: Make -o and -3 work together
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 8393bb41a1717691674809361908050974d71fbf
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Sep 30 17:41:56 2013 +0100

    testdisplay: Remove mode resetting now that we don't adjust the timings
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit c128b731dceff48200a9e6e84436a5e726dc4706
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Sep 30 17:02:21 2013 +0100

    testdisplay: Respect specified_disp_id in the stereo loop
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 28cf66de94962081e7de833166f274807f333f39
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Sep 30 16:56:29 2013 +0100

    testdisplay: Remove printing out the eyes geometry
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 21a89a9f073a892424428631503c7bbb69c5187f
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Sep 26 18:34:06 2013 +0100

    lib: Adjust dump_modes() to the new stereo encoding
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit a7d1937cd777e23bb6f234156e6164aafe151fbe
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Sep 26 17:56:01 2013 +0100

    testdisplay: Use DRM_MODE_FLAG_3D_MASK
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 578c1cefc9c0b80927b69584ef730acd3a1eb2f0
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Sep 17 18:59:52 2013 +0100

    testdisplay: Remove the timing adjustements now that the kernel does it
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit d89f4a2c1a773c0dc33cc7d94d475798fc0fee41
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Sep 16 17:52:41 2013 +0100

    intel_infoframe: Display the VIC in decimal
    
    It's not customary to display the VIC in hexadecimal and lead me to
    scratch my head for a couple of seconds. Print it in decimal instead.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 9a8fda7a4aaba11d191ebcd93c2b1ef648703148
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Sep 10 13:33:26 2012 +0100

    testdisplay: Test the stereo 3D modes
    
    Now that modes have flags to describe which 3d formats the sink
    supports, it's time to test them.
    
    The new test cycles through the supported 3D formats and paint 3D
    stereoscopic images taken from publicly available samples:
      http://www.quantumdata.com/apps/3D/sample_BMP.asp
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 951b37e2d0d69ef7c013bf3ee7a57f7d6bd15119
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Sep 6 11:44:41 2013 +0100

    testdisplay: Provide a full path when opening pngs
    
    This way one doesn't have to be in tests/ for testsdisplay to be able to
    open pass.png.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 5d996349137e368c7ad8a3b2ce708c77c006a2db
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Sep 4 14:21:55 2013 +0100

    testdisplay: Free the array of connectors
    
    That's an array we allocated earlier in this function. Let's be symetric
    and free it once done.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 66477a230fba36a349783020b77ed4a030f204f5
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Sep 5 16:49:11 2013 +0100

    testdisplay: Untangle dump_info() from the main testing loop
    
    -i is just supposed to show some information about the DRM resources.
    Right now it works in a quite convoluted way. Untangle this to call
    dump_info() when -i is given, exit the program and be done with it.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit b9db1a6a96581645e222b6d43bd0cd795c6c7501
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Sep 4 12:31:18 2013 +0100

    testdisplay: Fix CRTS typo
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit eecd0061eb5bf45a3db515fa1cedb1184f98ca44
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Sep 3 19:46:19 2013 +0100

    testdisplay: Properly handle the life cycle of framebuffers
    
    When cycling through the modes, let's make sure to free the previous
    framebuffers. This is the perfect occasion to use kmstest_remove_fb().
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 5a1d84300ba31bec08c05db7d1c602c80e932021
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Sep 4 12:12:37 2013 +0100

    testdisplay: Map the fb inside paint_color_key()
    
    So the code for this is self-contained. This goes along the way of
    reducing the number of global variables in testdisplay.
    
    Take the opportunity to unmap the fb after use as well.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 0396273972076909f92429503232cff1be38e640
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Sep 3 14:57:31 2013 +0100

    testdisplay: Move the code sanitizing depth into main()
    
    It'll be shared by the set_mode() and set_3d_mode() functions.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 79f4cfedbf8f4249291c0915d040d79af97d1389
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Sep 6 18:22:53 2013 +0100

    lib: Add a helper to write a png from a struct kmstest_fb
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit dac45f5f067136496a76bf755a3df0224a2c3ea4
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Sep 6 17:26:32 2013 +0100

    lib: Split create_image_surface() out of create_cairo_ctx()
    
    So we can use it in the next commit.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit bde7060e3c30eba807295c6831e10d7e4365a33b
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Aug 23 16:46:45 2013 +0100

    lib: Add a helper to paint a PNG using cairo
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 30e0710ca374eb937806ad79e20f53a222cab54a
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Sep 12 14:21:29 2012 +0100

    lib: Dump information about the supported 3D stereo formats
    
    When dumping the details of a mode, let's add the 3D formats the mode
    supports.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 9edaf7fa7364e03115edd1bc3a1e99a282fce9ce
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Sep 6 15:17:48 2013 +0100

    testdisplay: Add left/right images of a lovely scene
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 05493f736d41dbaa2f6f8b8c1c235d30d2370800
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Sep 6 15:20:35 2013 +0100

    testdisplay: Distribute pass.png

commit 76dfa9195a489aa8de954f888895278bdccec3b7
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Sep 30 16:04:38 2013 +0200

    tests/gem_evict_everything: tune down forked subtests
    
    On new machines with gobloads of memory and cpu cores, but slow swap
    on spinning rust we need to limit the runtime a bit for sanity.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f3c54d0cb4744af9d58b5be45f574b625bbc8231
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 25 14:36:59 2013 +0200

    tests: use igt_assert/igt_require more
    
    With the new _f variants we can replace almost all of them.
    
    Also remove a ton of checks for argc != 1, they're a bit useless ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 88ad6d7be8ab5741b7019a535952145c96577c9c
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Mon Sep 23 13:46:06 2013 -0700

    intel_l3_parity: Make compilation possible without udev
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 6020b951dff9584b9cfdb6819bdb1f6b0293db70
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Sep 23 16:05:21 2013 -0300

    tests/pc8: fix supports_pc8_plus_residencies
    
    Bug caused by bad copy+paste+replace.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 4d3e10d2161200e1c6ccf400775716b9899f3c13
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Sep 22 19:00:59 2013 +0100

    overlay: Some very raw usage information
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 145c0d1a2697316da5de8441e4cc1847dbf3a28b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Sep 22 13:15:43 2013 +0200

    NEWS: Start with release notes for 1.5
    
    Also extend the underlying for 1.4 to the full lenght ;-)
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 799aeb6d00881fc8f19b80ddf70f8b2b4c532f28
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Tue Sep 10 14:21:23 2013 -0700

    intel_l3_parity: Support a daemonic mode
    
    v2: Add a comment explaining the dangers of directly accessing the DFT
    register (Daniel)
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit bfa7a5906d53a016b43eaa5592d91c1fb955daf7
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Tue Sep 10 10:40:54 2013 -0700

    intel_l3_parity: Support error injection
    
    Haswell added the ability to inject errors which is extremely useful for
    testing. Add two arguments to the tool to inject, and uninject.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 5f95ea780bba6027767b3f3411ce41717317e879
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Sat Sep 7 20:38:18 2013 -0700

    intel_l3_parity: Actually support multiple slices
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 8ddcfd6882a9afd17daf5399f78f74bfc6ef3d7a
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Sat Sep 7 20:10:27 2013 -0700

    intel_l3_parity: slice support
    
    Haswell GT3 adds a new slice which is kept distinct from the old
    register interface. Plumb it into the code, though it's only 1 slice
    still.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 48d1b362c52803f490080be0ee26b43ae5f7dc27
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Sun Sep 8 16:50:23 2013 -0700

    intel_l3_parity: Hardware info argument
    
    Add a new command line argument to the tool which will spit out various
    parameters for the giving hardware. As a result of this, some new
    defines are added to help with the various info.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit a9cd76b36e112389c61ccc315df185a2eaf17c01
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Fri Sep 6 21:10:50 2013 -0700

    intel_l3_parity: Use getopt for the l3 parity tool
    
    Add new command line arguments in addition to supporting the old
    features. This patch only introduces one feature, the -e argument to
    enable a specific row/bank/subbank. Previously you could only enable
    all. Otherwise, it has what you expect (we prefer -r -b -s for
    specifying the row/bank/subbank).
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit e740bdf5bd1339b58912eb359902ca68529b438d
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Fri Sep 6 11:40:03 2013 -0700

    intel_l3_parity: Assert all GEN7+ support
    
    v2: Don't assert for Valleyview (Bryan)
    Rework code to be a bit more readable.
    
    CC: "Bell, Bryan J" <bryan.j.bell@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 318c0b22d7756d2ae33328935c2f15cd790f6b01
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Tue Sep 10 15:34:54 2013 -0700

    intel_l3_parity: Fix indentation
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 64cfe4eefe9b91ad648df216ba385d9a1e67dd78
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Sep 19 19:56:03 2013 +0200

    lib/drmtest: Improve printf-like igt_skip_on/require
    
    Ben Widawsky suggested to use vasprintf, which perfectly fits the bill.
    
    Also fix the logic conversion bug in tests/gem_storedw_batches_loop that
    crept in again :(
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e5cdd62624342180a16630b4f6b1d604f6e6e581
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Sep 19 16:37:07 2013 +0200

    lib/drmtest: igt_assert|require with format strings
    
    v2: Add a comment about the pitfalls around va_list handling.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b3525129535c6e8e3588f63960e2296d598f6e9a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Sep 19 15:51:33 2013 +0200

    tests/gem_stored_batches_loop: use igt_assert more
    
    Terser code ftw!
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 867b1a51a6310d63f34acc8ffe602355694da7ee
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Sep 19 11:01:14 2013 +0200

    tests/gem_reloc_overflow: New subtest for overflowing buffer_count
    
    Luckily everything seems to be fine.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bf6f166035bdd85042c2d6dee0e0b088e122ae81
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Sep 19 10:20:46 2013 +0200

    tests/gem_reloc_overflow: Extract reloc_tests
    
    I'll be adding more stuff soon ;-)
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0a587e24b77707099a21d6ad00cbfd19a4661b8b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 18 18:28:18 2013 +0200

    tests/gem_storedw_batches_loop: Add testcase to check secure dispatch
    
    v2: Use the mrb_exec function since otherwise we can't pass flags.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 195f04c3008c079c8edb762a8907903c264da83c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Sep 16 22:45:14 2013 +0200

    tests/gem_persistent_relocs: Tune down the test a bit
    
    Takes too long.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 31139f6b8fc2d5f0c1623de1cbaf24f8a3d5473d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Sep 12 16:18:10 2013 +0200

    tests/gem_fenced_exec_thrash: Add interruptible and busy-load subtests
    
    Usual progression for gem tests up the nasty-scale.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d1b9bc0dc17dbc49d707abf861d31020fbcb5ff6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Sep 12 16:17:33 2013 +0200

    lib/drmtest: check that igt_exit is called for subtest tests
    
    I get this wrong for almost every conversion to subtests ...
    
    v2: Don't install the check when just listing subtest names.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7b3634364a1f5cf1797a55a1d0d042ec8d9f510c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Sep 12 14:38:13 2013 +0200

    tests/gem_fenced_exec_thrash: New subtests that uses all fences
    
    igt runs under the assumption that nothing else (besides maybe fbcon)
    is using the gpu. So we should be able to use all fences.
    
    Keep the conservative testcase around though in case someone has a
    broken setup.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 14e12b80085db3ab9d9035ce962b5679fe862570
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Sep 12 14:21:56 2013 +0200

    tests/*: scrap get_num_fences
    
    Just use gem_available_fences directly.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit deba86806670e28bfd8110ef5b6e05ab818b1935
Author: Mengdong Lin <mengdong.lin@intel.com>
Date:   Mon Sep 9 15:38:40 2013 -0400

    intel_audio_dump/hsw: rename some audio configuration registers for Haswell
    
    For Haswell, some audio configuration registers have changed their name and
    some bit definitions.
    
    This patch applies the changes, and uses subfunctions to parse registers for
    code reuse.
    
    Here is the name change list:
    Audio configuration: AUD_CONFIG_x to AUD_TCx_CONFIG
    Audio Misc Control: AUD_MISC_CTRL_x to AUD_Cn_MISC_CTRL
    Audio M & CTS programming enable: AUD_CTS_ENABLE_x to AUD_TCx_M_CTS_ENABLE
    Audio EDID data block: AUD_HDMIW_HDMIEDID_x to AUD_TCx_EDID_DATA
    Audio Widget Data Island Packet: AUD_HDMIW_INFOFR_x to AUD_TCx_AUD_INFOFR
    Audio Pipe and Converter Configs: AUD_PORT_EN_HD_CFG to AUD_PIPE_CONV_CFG
    Audio Digital Converter: AUD_OUT_DIG_CNVT_x to AUD_Cn_DIG_CNVT
    Audio Stream Descriptor Format: AUD_OUT_STR_DESC_x to AUD_Cn_STR_DESC
    Audio Connect List Entry & Length:  AUD_PINW_CONNLNG_LIST_x to
                                            AUD_TCx_PIN_PIPE_CONN_ENTRY_LNGTH
    Audio Connection Select Control: AUD_PINW_CONNLNG_SEL to AUD_PIPE_CONN_SEL_CTRL
    Audio DIP & ELD Control State: AUD_DIP_ELD_CTRL_ST_x to AUD_TCx_DIP_ELD_CTRL_ST
    Audio HDMI FIFO status: AUD_HDMIW_STATUS to AUD_HDMI_FIFO_STATUS
    
    NOTE:
    For Tx, x = A/B/C, meaning Transcoder A/B/C.
    For Cn, n = 1/2/3, meaning audio converter 1/2/3.
    
    Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>
    Reviewed-by: Haihao Xiang <haihao.xiang@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit 3c7dc5cf32ad50cf3d8b691c921064a419917fc8
Author: Mengdong Lin <mengdong.lin@intel.com>
Date:   Mon Sep 9 15:38:32 2013 -0400

    intel_audio_dump/hsw: align code with tab
    
    This patch makes the file to follow kernel coding style:
    - replace leading spaces with tabs for alignment
    - fix some minor format issues
    
    But the max length of a line is set to 120 characters for readability
    on high resolution displays.
    
    Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>
    Reviewed-by: Haihao Xiang <haihao.xiang@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit cac586586ddcf9fa1679c35236cd0674237f3d37
Author: Mengdong Lin <mengdong.lin@intel.com>
Date:   Mon Sep 9 15:38:20 2013 -0400

    intel_audio_dump/hsw: remove misuse of PCH transcoder configuration register
    
    The PCH transcoder config register (PCH_TRANS_CONF, 0xf0008) is not the
    correct config register for transcoder A, B or C. This register is in
    PCH and for CRT display, nothing to do with display audio.
    
    So This patch removes misuse of it as config register for transcoder A/B/C.
    
    Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>
    Reviewed-by: Haihao Xiang <haihao.xiang@intel.com>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit be28ba071baf33afa1852ed0fd9b4efee699cdbd
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Mon Sep 16 16:37:08 2013 -0300

    bump version to 1.4 and add the release date
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>

commit a33d5576232bf7caf14c848828d632c3da886ee1
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Fri Sep 13 16:54:56 2013 -0300

    NEWS: Fix dates of previous releases
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>

commit 564a1dd99355ee0c626e43e4d547730c93b640c6
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Mon Sep 16 15:34:27 2013 -0300

    overlay: fix link error due to missing -lrt
    
    CC: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>

commit a031a1bf93b828585e7147f06145fc5030814547
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Sep 13 16:43:22 2013 +0200

    lib/drmtest: ducttape over fork race
    
    Whatever the reason (and I've thought there isn't one) if we fork and
    kill right away the child seems to not reliably die. We can work
    around this little race by forcing the default SIGQUIT handler. This
    should break anything since we reset our atexit handling anyway, so if
    the helper needs any atexit handling the special signal helpers will
    be reinstated.
    
    Note that inserting sufficient amounts of printf between the fork and
    kill makes this unnecessary.
    
    While add it also add the retry loop for the waitpid call, in case
    there's another guy constantly interrupting us.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9298dfabd9658315df34616b1e9a10b3579a92bd
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Sep 13 16:38:59 2013 +0200

    lib: add test for igt_fork_signal_helper
    
    If we're really fast we've trying to stop the signal helper again
    we somehow race somewhere and it'll never happen. So add a testcase for
    this. Since I expect more to come for testsuite tests add a separate
    make target for them. Run tests with
    
    $ make check
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 32f9c497957cf165a359d8b2c11f4d18dd5f743a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 13 16:28:15 2013 +0100

    NEWS: smelling fixes

commit 35ee50769e5ae24189ae353c2f719191dcf049ce
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Sep 13 17:02:07 2013 +0200

    initial release notes for the next release
    
    Please amend/improve.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 030c9c0f917155555bd09ff268c5defda6e94982
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Sep 13 17:01:38 2013 +0200

    reconstruct NEWS file for the releases thus far
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 25dfea28a574988fa60278396433b65014ada809
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Sep 13 16:00:05 2013 +0100

    overlay: Fix stale mention to x11-position.c
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 3fda0b6714ae503e365ae6f130ae7b4074881b70
Author: Eero Tamminen <eero.t.tamminen@intel.com>
Date:   Fri Sep 13 15:32:43 2013 +0100

    man: Fixes typo in intel_lid.man
    
    Signed-off-by: Eero Tamminen <eero.t.tamminen@intel.com>
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 932716dd918a25ee49a4c8a9931a9a65dfd60486
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Sep 12 14:00:09 2013 +0200

    lib/drmtest: skip suspend tests in simulation
    
    The simulator doesn't like this nor really support it :(
    
    v2: We've tried to a more gentle resume testing using the pm_test
    infrastructure, but that alos failed. So add a FIXME comment that we
    need to improve things a bit here.
    
    Cc: Ben Widawsky <benjamin.widawsky@intel.com>
    Cc: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Cc: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 506ef293abfc83a79ae1e58193ee88bce5c667ce
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Sep 12 12:56:20 2013 +0200

    lib/drmtest: drop unused oldsig variabel
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 212de08d0fd679069886d673fb719582f597503c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 11 15:46:43 2013 +0200

    lib/drmtest: Restore default sighandlers
    
    Forked tests ended up restoring the sighandlers already inherited
    from the parent, resulting in endless signal loops through our
    atexit handler.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 661f252f7e3ccb8fe936f2582d234408b8bb4764
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 11 15:05:20 2013 +0200

    lib/drmtest: don't frob signals in __igt_fork_helper
    
    We shut up the exit handlers already by clearing the array.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9fb316a6db16cd8cddba719d7acbdf068f9238ee
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 11 14:29:00 2013 +0200

    lib/drmtest: clean up children in an exit handler
    
    Also be a bit more careful with killing them in general.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1978aecf1d22f21265d64099e70565d6e5e384cc
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 11 14:03:47 2013 +0200

    tests/gem_persisten_relocs: Update like gem_reloc_vs_pug
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5dc424f70d34add563ed86875d6167ab16a7a764
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 11 13:59:18 2013 +0200

    tests/gem_reloc_vs_gpu: some fixes
    
    - Clear the igt_helper_process struct to avoid hitting asserts.
    - Fix up the logic for enumerating forked processes.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bbc820302b49d3cdd0f05f2c2be3af63718e0fc1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 11 12:11:54 2013 +0200

    lib/drmtest: handle SIGBUS in the exit handlers
    
    Our kernel likes to occasionally kill process with a SIGBUS when this
    shouldn't ever happen. Hence also handle this signal in the exit
    handler infrastructure.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 14dd7cb8aa86d51b093c8cffa40df420c342c89a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 11 11:51:40 2013 +0200

    lib/drmtest: Reject igt_fork from within igt_fork earlier
    
    We reject it in igt_waitchildren already, but earlier is better.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5f790db084ca32de79a097c29cb4fa41dcc4cb43
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 11 11:09:08 2013 +0200

    lib/drmtest: Fix igt_stop_signal_helper for subtest listing
    
    We need to bail out early for otherwise we'll hit the
    !signal_helper->running assert.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b3a61c802872b4219699616f64dfcb572971afdd
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 11 10:47:07 2013 +0200

    lib/drmtest: skip when prefault control isn't available
    
    Instead of crashing with an igt_assert. Fixes the only crashing test
    when running igt on non-intel systems.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2b218f69d7e2892ed1a2a2b3bc9663c35acee288
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 11 10:40:25 2013 +0200

    lib/drmtest: Use ARRAY_SIZE
    
    Less fragile ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 57e67461812eb3a1c123e590b0cf08b885417732
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 10 17:41:49 2013 +0200

    lib/drmtest: double-check that we clean up helper processes
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e73c1a07f3e573a2c46be73c139b0757dc8c4add
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 10 15:44:37 2013 +0200

    lib/drmtest: consolidate the helper process killing in one exit handler
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7c25e8cff15587712ce92f16b61b154080744fe4
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 10 15:29:17 2013 +0200

    tests/gem_reloc_vs_gpu: use igt_fork_helper
    
    Now we do a waitpid instead of a simple wait which could eat
    the "wrong" child ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit edd723457c5b3488a26167087f8b3b3045944804
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 10 15:46:08 2013 +0200

    lib/drmtest: create helpers for forking helper threads
    
    The upshot is that we can share the logic to make sure the helpers
    are all properly stoved again in a 2nd step.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2096649053cf720258d66095af0c54453727e841
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Sep 8 14:03:20 2013 +0200

    lib/drmtest: fixup for the prefault rework
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit fbd64de6be923e339675667525fcd1a294d9b172
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Sep 8 14:03:03 2013 +0200

    lib/drmtest: Avoid calling exit handlers multiple times
    
    - reset the count when forking
    - don't add the same handler multiple times
    - don't restore the exit signal handlers in the forked helper
      process
    - reset the exit handler count once called to make sure we don't call
      it multiple times when dying
    - don't wait for the signal helper if it's gone already
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b3dadedd2e899a8e3dd916aa8b0df6481e724d5a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 4 15:25:03 2013 +0200

    tests/gem_reloc_overflow: Add more checks
    
    For reloc offsets and batch start/len. Doesn't quite fit into the test
    subject at hand here, but meh.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 44d4a3defbbee770de3a1c07d479ad8f50fb2b8f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 4 14:43:06 2013 +0200

    tests/gem_reloc_overflow: convert to subtests
    
    More will come!
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3c46789c8d74c0a1c7c071949dceec0b4ac8d8b4
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 4 14:27:17 2013 +0200

    tests/gem_exec_bad_domains: enable conflicting write domains test
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4f496bafea81f24a3ae81179df7abaff648f0654
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed Sep 4 17:02:19 2013 +0300

    lib: fix the fix for gen5 workaround emmision
    
    Fix the regression introduced in
    
    commit bfbe813f8fb587017c4e1d73c51395c2837eb395
    Author: Daniel Vetter <daniel.vetter@ffwll.ch>
    Date:   Tue May 29 22:14:06 2012 +0200
    
        lib: fix gen5 workaround emission
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit caf4608809012766c1db62865b39829cbe2c0c1d
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed Sep 4 17:06:00 2013 +0300

    lib/intel_batchbuffer: remove code w/o effect
    
    Introduced when refactoring the patch in
    
    commit c1ee0bb53269ded7b79966d081518d689639bac7
    Author: Imre Deak <imre.deak@intel.com>
    Date:   Mon Jul 29 16:43:31 2013 +0300
    
        intel_batchbuffer: add support for non-32bit blt copies
    
    No functional change.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 52221651ab2bd2994a9e1d97f717ade432430c91
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 4 14:08:10 2013 +0200

    tests/gem_pipe_control_store_loop: Add subtest for reused buffers
    
    This exercises the slightly faulty kernel w/a that Eric fixed in
    
    commit e844b990b1df9242bb91b7d490552f3198946838
    Author: Eric Anholt <eric@anholt.net>
    Date:   Tue Jul 31 15:35:01 2012 -0700
    
        drm/i915: Don't forget to apply SNB PIPE_CONTROL GTT workaround.
    
        If a buffer that was the target of a PIPE_CONTROL from userland was a
        reused one that hadn't been evicted which had not previously had this
        workaround applied, then the early return for a correct
        presumed_offset in this function meant we would not bind it into the
        GTT and the write would land somewhere else.
    
        Fixes reproducible failures with GL_EXT_timer_query usage in apitrace,
        and I also expect it to fix the intermittent OQ issues on snb that
        danvet's been working on.
    
        Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=48019
        Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=52932
        Signed-off-by: Eric Anholt <eric@anholt.net>
        Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
        Reviewed-by: Carl Worth <cworth@cworth.org>
        Tested-by: Carl Worth <cworth@cworth.org>
        Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0550092c9a6440536c6070cdc447ed83f3062896
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 4 13:25:28 2013 +0200

    tests: add missing igt_exit() calls
    
    Forgotten while converting to subtests, then copy&pasted.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5113df7891e7ca323bd74449b7d649d5bd0b80a9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 4 13:19:42 2013 +0200

    lib/drmtest: add igt_skip_on macro
    
    I've fumbled the logic inversion when converting to igt_require way
    too often, so lets add something for dummies like me ;-)
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1f9d201be404fc277680d416d11f0d2d0d97f2cb
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 4 10:36:28 2013 +0200

    tests: Update .gitignore
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 87c690f9e27237d62d0f7b397aa6b284d1acab62
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 3 15:30:02 2013 +0200

    tests: add gem_persisten_relocs
    
    This reproduces the 3.7 relocation regression ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 612252f3f9aaa67848f3f74b8a7237eb1fa72159
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Sun Sep 1 12:34:36 2013 -0700

    intel_gtt: Raw PTE dumper mode
    
    ./tools/intel_gtt -d | head
    GTT offset |                 PTEs
    --------------------------------------------------------
      0x000000 | 0xe4005015 0xe2854015 0xe283e015 0xe283f015
      0x004000 | 0xe28ba015 0xe28bb015 0xe28b6015 0xe28b7015
      0x008000 | 0xe2828015 0xe2829015 0xe282a015 0xe282b015
      0x00c000 | 0xe2928015 0xe2929015 0xe292a015 0xe292b015
      0x010000 | 0xe2918015 0xe2919015 0xe291a015 0xe291b015
      0x014000 | 0xe291c015 0xe291d015 0xe291e015 0xe291f015
      0x018000 | 0xe2920015 0xe2921015 0xe2922015 0xe2923015
      0x01c000 | 0xe2924015 0xe2925015 0xe2926015 0xe2927015
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit c6f9bdc66f9ed82c82c1e77bb8bbadc250648c6e
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Sun Sep 1 12:17:23 2013 -0700

    intel_gtt: Properly support gen6+ GTT PTEs
    
    This finishes the objective in the last patch which was to actually deal
    with physical addresses, and not the PTEs.
    
    GEN6+ Provided support for physical addresses above 4GB. I'm not
    actually sure what Ironlake supported, and don't feel like firing up the
    timemachine.
    
    v2: Add support for gen4, gen5, and haswell.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 8adfb5886dd1128fc8c8c70c79fffbc62b0a7975
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Sun Sep 1 11:49:12 2013 -0700

    intel_gtt: Use function to get the physical address
    
    The GTT PTEs that the tool is trying to compare is really about
    addresses, and not the PTE itself. To accomplish this, make which
    calculates the physical address we actually want.
    
    This commit itself doesn't change any functionality; just the wording in
    the code.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit a3276e9713a7014bfcd84f29fea4dceb5670f488
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Sun Sep 1 11:47:57 2013 -0700

    gem_vmap_blits: Demote warning to note
    
    The warning that vmap isn't supported is useful, but it shouldn't get in
    the way of developers (or distros) being able to use -Werror.
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit c42f344b781fef9e8839d439dfa63d7aa76d65ca
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Sun Sep 1 11:47:11 2013 -0700

    intel_reg_dumper: Silence GCC for uninitialized clock
    
    GCC 4.8.1 seems to think clock may be uninitialized.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 7db283f930b2e03f019bb23689d2c12daff8104c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 3 17:49:02 2013 +0200

    tests/gem_reloc_vs_gpu: add thrashing tests
    
    Using the i915_gem_drop_caches debugfs interface to thrash without
    really thrashing.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2c7166eb7a60a87477be762d45aaafafb15aceff
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 3 11:57:56 2013 +0200

    tests/gem_reloc_vs_gpu: add forked versions
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f4b93781be0032b4d99097d71b305638c8eb03e2
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 3 12:22:09 2013 +0200

    lib/drmtest: use igt_require/assert in the prefault helpers

commit e45b7d9474da7b771f941d4729a435b49ef8529d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 3 10:59:13 2013 +0200

    tests/gem_reloc_vs_gpu: Add faulting reloc tests
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 225a91bc54050d05450e3481d0fcab24d56f94fc
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 3 10:38:29 2013 +0200

    lib/drmtest: include sys/mman.h from drmtest.h
    
    We need it for mmapping to get at PROT_READ|WRITE anyway.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9cc16e8afd0269d6f94107b2044240e45334e64d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 3 10:37:14 2013 +0200

    lib/drmtest: extract gem_execbuf helper
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bd59d60275e8d7cce2ae4370cf8f8304abdc52fc
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 3 08:57:42 2013 +0200

    tests/gem_reloc_vs_gpu: add interruptible version
    
    Exercise a bug where we've failed to propagate the error code
    correctly.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 472c9dac034479fe5c740a33022fbb19e4dbe381
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Sep 2 13:50:56 2013 +0100

    kms_flip: Fix use of fb_width for PAN subtests
    
    We need to be careful to remember that fb-width is not always the same
    as hdisplay, since for panning we allocate a larger framebuffer. So fix
    up the printfs to use hdisplay/vsisplay since that should be uniform
    across the array.
    
    Regression from
    commit 919d68901187fa797a9b648fcf87c838fae22fa3
    Author: Chris Wilson <chris@chris-wilson.co.uk>
    Date:   Thu Aug 29 15:33:53 2013 +0100
    
        kms_flips: Operate on an array of crtc
    
    Buzilla: https://bugs.freedesktop.org/show_bug.cgi?id=68832
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6f118bf96a4d7236f8324dd53cf0c85390605bb0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Sep 2 08:08:29 2013 +0200

    lib/drmtest: Improve output when igt_waitchildren fails
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8eaa0982d02e13d7d8d1e1a4601bbeb8adb531ae
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Sep 2 08:04:19 2013 +0200

    test/gem_concurrent_blt: remove hack for testing igt_fork
    
    Oops, this shouldn't have been committed ...
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=68830
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 859159a2725dde4175ec75062fbdeba1d1e1c82e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Sep 2 07:51:24 2013 +0200

    tests/gem_tiled_swapping: fix igt_require conversion
    
    I seem to be incompetent at logic ...
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=68831
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f73724c3628b61c41642837a709ac8427d699b99
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Aug 30 08:15:32 2013 +0200

    tests/gem_mmap_gtt: fix access checks
    
    Reading manpages advisable ;-)
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 694bd81ed6a90e31af311da114e206a3b3d3bc1a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Aug 30 08:13:05 2013 +0200

    tests/gem_mmap_gtt: clarify access check checks a bit
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a0aa8f1a2c927090d8e505565bcab035d605b711
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Aug 29 21:44:48 2013 +0200

    lib/drmtest: Print info when children died due to signals
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8f5d54162086d9832bcd574af155e86a1a4d743f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Aug 29 21:44:28 2013 +0200

    tests/gem_evict_everything: add swapping and forked subtests
    
    Much better at hitting the list corruption here on my machines
    than what we have thus far.
    
    Note that somehow I just can't reproduce the bug any more. No idea
    why. But I guess it's time to simply push this pile out.
    
    v2: Limit threads and rounds to something reasonable.
    
    v3: Use igt_permute_array to avoid EINVAL due to duplicated bo.
    
    v4:
    - Add a variant of the forked tests with multiple drm fds.
    - Tune the swapped forked tests a bit to complete in a reasonable
      amount of time.
    
    v5: Add some memory pressure from the cpu by using cpu mmaps (which
    directly hit shmem, so bypass gem completely).
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5fe116e913192d092d3d73872484a2136217d6f1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Aug 29 15:15:56 2013 +0200

    tests/gem_evict_*: Fix leak in copy
    
    This turned out to be the reason one one of my tests was hitting
    the list corruption bug - we need a good deal more memory pressure.
    So I'll now add a new testcase for that.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit fa06b0bce3f45321f88f769d090af6c3a56eab9a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Aug 29 14:01:34 2013 +0200

    tests/gem_tiled_swapping: Use igt_require
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cd1f220847c34610ab9e07c3cf1c5a7e77284eb8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Aug 29 10:06:51 2013 +0200

    lib/drmtest: extract igt_fork from gem_concurrent_blt
    
    Making sure that we correctly collect the exit codes from all children
    is a bit a hassle. So add another magic igt codeblock for easy forking
    and joining.
    
    Note that children are (currently at least) not allowed to call igt_skip.
    Add an assert to enforce this.
    
    v2:
    - Properly propagate the exit code.
    - Fix the segfault.
    - Add a child int and num_children paramter to the magic codeblock as
      suggested by Chris Wilson.
    - Don't dump noise into stdout when a child thread fails, the parent
      will do that for us already.
    
    v3: Now with some docs.
    
    v4: Fixup igt_waitchildren to properly reset state so it can be used
    again.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 90a25055e3ec7d9779663bec9cbae93187671bfd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 29 18:03:07 2013 +0100

    kms_flip: Remove debugging leftovers
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a60f9300181496e5539f6914c9074e6d1aed0fe3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 29 17:55:13 2013 +0100

    kms_flip: Set everything to zero to disable a CRTC
    
    Just setting fb=0 is not enough as the kernel thinks userspace is
    insane.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 93550043ca80caf7f754ae89825b1f618430b29d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 29 17:21:59 2013 +0100

    kms_flip: Use the first mode if we find no matching modes for the crtc pair
    
    We will check that we can set the mode on both crtcs before use, so
    hopefully this will work...
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 865b7821e37dbca4cc0c2ff6f91236c09e91b26b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 29 16:43:18 2013 +0100

    kms_flip: Hook up primary events for page-flips
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1f2b3e99f9349dbc34750d506312b6eb353c14a4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 29 16:00:51 2013 +0100

    kms_flip: Run on pairs of connected outputs.
    
    The goal is to flip the same framebuffer on a pair of CRTCs (clone mode)
    and check that (a) the flip works in all combinations of workloads, and
    (b) that we can hit the desired refresh rate under the simplest, most
    ideal of conditions.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 919d68901187fa797a9b648fcf87c838fae22fa3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 29 15:33:53 2013 +0100

    kms_flips: Operate on an array of crtc
    
    This should be no functional change as we operate on an array of
    crtc[1]. Later we shall test clone mode across a number of crtc.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d0ed91210795e75847b3a3da6b48b1179ff53ede
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 29 15:11:47 2013 +0100

    kms_flip: Exercise flip-vs-render
    
    For machine with split BCS/RCS rings, we also need to test whether we
    correctly wait upon outstanding render work before flipping and changing
    modes. This should also serve to exercise the ring selection code for
    flips.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 59f134450d25ba5a3cdf2dbf945e3fb06322874b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 29 13:33:21 2013 +0100

    overlay: Increase idle timeout to 30s
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2b961d9573ae227b65db7f7c39e312969644af84
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 29 13:31:24 2013 +0100

    overlay: Hide idle processes
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2f297ed2b773a5c96fa256d3b976b9cd4d04cc80
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 29 13:19:29 2013 +0100

    overlay: Autohide Flip counter after a period of inactivity
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 474ce5396e3dc5a3f057da84cb70a642c0ac90d6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 29 12:01:38 2013 +0100

    overlay: Monitor per-ring context switch rate
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 75ef36713a75bc46faf5b92a4442869ef6999c3a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Aug 28 12:40:20 2013 +0100

    overlay: Make it easier to renice
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9bebbbc49b2f828adea3cffb58907fb493813803
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Aug 28 12:37:14 2013 +0100

    overlay: Generate unique name for snapshots
    
    Since we no longer increment the counter every frame, we need to use a
    timestamp instead.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a18023f67864841fbeee6c93e9c504768e652281
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 27 23:51:32 2013 +0100

    overlay: Add number of running processes to CPU display
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 11567e318e6a05936bab135e6ed90726583ab031
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 27 17:51:11 2013 +0100

    overlay: Include the core count in the cpu info line
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c6b26c5a406225868f05672949bcc4997c94c3ab
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 27 17:40:45 2013 +0100

    overlay: Scale the CPU busy value by the numer of active cores
    
    Having 100% always mean one processor fully utilised is much easier to
    understand (than having to remember how many cores are on each machine
    and scale appropriately).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 177208b0d4cf64a3e2f18909a47afc5bd646a651
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 27 17:35:51 2013 +0100

    overlay: Tidy presentation of ring busy values
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b1d2a78a5db34e835a323364328263f5f4c605ce
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 27 15:42:48 2013 +0100

    overlay: Restore the correct default font size
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 65d2481900c619846eddadb85086edbc578d6c17
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 27 15:19:58 2013 +0100

    overlay: read rc6 status from perf
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ddcd1b2ee5645475725a8e2f78917fa3e7d57c1b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 27 14:25:38 2013 +0100

    overlay: Add support for multi-monitor positioning
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 87b66f4cf034c2e058f69d848763bb4bdc45bfbf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 27 13:32:26 2013 +0100

    overlay: Set the text color in case we do not have RC6
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 396fa1b3f52936f5b491e54aff658b272231b22f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 27 12:54:37 2013 +0100

    overlay: improve alignment of some labels
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d58aed18ee77b5e8afa7c9eda389786db6ab1818
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 27 12:24:18 2013 +0100

    overlay: Read interrupts from perf
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 14614060b8028f9ab4809f0b0e110a23980ecd14
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 27 12:24:18 2013 +0100

    overlay: Read frequency from perf
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1c3fd70357a57f823846010f59ba75f19e5d4af9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 27 11:20:43 2013 +0100

    overlay: Read power from perf_events
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6ec1d2c0ae631a3c0af445d4baa53561228be9a5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Aug 26 23:32:07 2013 +0100

    overlay: Align the process names in the memory table
    
    And use a shade of gray to distinguish from the total instead.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 02c0d20fa87aaad4b791407e4eb3eaf4d6079de6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 26 21:16:37 2013 +0200

    lib/drmtest: restore in_fixture assert
    
    I didn't really want to revert those, too ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ad0f081f2b569a2392d0df1fe7bb140b57d91a46
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 26 20:41:00 2013 +0200

    Revert "tests/gem_concurrent_blit: Fix segmentation fault"
    
    This reverts commit 912a7d855600aadb937517ec5bab26bfd9b8953d.
    
    Now fixed for real!
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8869e1e6281139f2c12a9a774becd6c1f892274f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 26 20:52:14 2013 +0200

    lib/drmtest: don't complete fixtures with a longjmp
    
    Longjmp creates havoc with stack variables of the current stackframe.
    And since fixtures should be used to set up such variables creating
    havoc isn't a great idea. With this I can revert a bunch of
    bogus patches I've done to paper over this by moving stack variables
    to be global.
    
    The same issue is actually a feature for subtest blocks since subtests
    should be independant anyway.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cf93ba45b00e302c755e1ea5fb860ee5f5379e24
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 26 19:43:59 2013 +0200

    tests/gem_mmap_gtt: Add testcase for the vma access manager
    
    Currently fails since the patches aren't merged yet.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c2c0efc21acac67a909b5047f9b100853a975ec7
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 26 10:26:00 2013 +0200

    tests/gem_mmap: Convert to subtests
    
    I wanted to write a testcase for gtt mmap access restriction checking
    and only noticed after conversion to subtests that this here is for
    cpu mmaps ;-)
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 86f60ee593e3fb6808150d63088e508cf7068a75
Author: Imre Deak <imre.deak@intel.com>
Date:   Mon Aug 26 17:15:46 2013 +0300

    tests/kms_setmode: don't save/restore vt graphics for dry-run
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 40cc4b8d103f4406bb51334c1338b0ae774eed17
Author: Imre Deak <imre.deak@intel.com>
Date:   Mon Aug 26 17:02:49 2013 +0300

    lib/drmtest: fix handling of -h --help argument parsing
    
    So far we handled -h or --help arguments properly only if the test
    called igt_subtest_init_parse_opts(). Fix this for igt_subtest_init()
    callers too. Make sure we still don't exit for any other
    unknown options, which the caller may parse with a second getopt scan.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 04a4fae32e252666aa12729d232acbc20a0ea8ce
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Aug 26 14:45:26 2013 +0100

    overlay: Trim the padding slightly
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 908df374a9b469a8d8accdc504564a1bd79eeab5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Aug 26 14:11:27 2013 +0100

    overlay: Count number of semaphores used by each process
    
    This required me to contract the per-process information considerably,
    hopefully readability is not sacrificed too much.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1e65d5ac2f1c3b80444fd3c12e7bfcaf033a117f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Aug 25 23:37:58 2013 +0100

    overlay: Allow simple positioning and resizing
    
    Using window.size=<width>x<height> or window.size=<scale>% in
    the config file, or --size=<scale>% or --size=<width>x<height>
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c9f0173764c5266ebd29a3d57ea8a379440346b4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Aug 25 20:13:31 2013 +0100

    overlay: Monitor interrupts
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 39f9812315546b8b5044d8372c7e9c3055151882
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Aug 25 15:17:39 2013 +0100

    overlay: Detach from terminal
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d929102591b25c1e9bf95ee58d95f86869e268fd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Aug 25 13:15:55 2013 +0100

    overlay: Add a raw kms output
    
    For when you don't have any display server, use brute force.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 20a25f5eafd37c2864e04c3065f6355e1306c6a6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Aug 24 12:59:31 2013 +0100

    overlay: Draw the cpu busy line on top of the waits
    
    By drawing it behind the waits, it is obscured by the translucent waits.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a932c73ab7b0e768ceb723ec280847e55c5cf495
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Aug 24 12:37:59 2013 +0100

    overlay: simplify types for object counts for 32/64bit porting
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 68c63ddd36bc8e5379bf9573c24894246f5d0aa7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Aug 24 10:00:36 2013 +0100

    overlay: Expose sampling period/frequency as a user parameter
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 09d9089ead9ceec19888251807db4ccd8017c9ff
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Aug 23 22:32:29 2013 +0200

    tests/gem_evict_*: Add interruptible modes
    
    Also I've stumbled over igt_fixture again. Somehow gcc loves to wreak
    havoc with stack variables set up in igt_fixtures ... Duct-tape in the
    form of moving fd out to global scope applied.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1b6480114e368bcbda394e09b698268b356c1f8f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 23 16:02:42 2013 +0100

    overlay: Fix power reading from debugfs
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b22e90bc8b9c7fe27556558c31f00e35e689a12e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 23 15:59:06 2013 +0100

    overlay: Distinguish the root debugfs path and our dri node
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9574cb1a3de0dfe45c59420e2cb9a74fc23baecc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 23 15:51:21 2013 +0100

    overlay: Search for right debugfs path
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit fd88db77cccf5d8d9be133dfcb3cdc3ff3f219f3
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Aug 23 09:30:47 2013 +0200

    tests/sysfs_rps: Fix igt_require conversion
    
    Another fumble caught by QA.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=68461
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ea80196d9f9380bb7ede871553db2b329a6a2713
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 22 22:50:05 2013 +0100

    overlay: Replace debug ticker with hostname
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 163b6a52a4dd44c48c40a609aa8b8b1ffc46881e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 22 20:42:58 2013 +0100

    overlay: Close DRI2 device after authentication failure
    
    So that we don't leave a master fd open when operating remotely.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 92a2f8010b5b786c52d676e87209e8332fd370a0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 22 19:20:01 2013 +0100

    overlay: Double buffer the x11 window
    
    For pleasant remote transport.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b6ee8ccffe58a9d604ac0d593b4c6147d62f2898
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 22 19:19:03 2013 +0100

    overlay: Make the config parser more lenient
    
    Allow a dot-notation outside of the [ini] style to make commandline
    parameters easier to add.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c62cf67a6fe4ffcef0bcbdccd6607428b78e676b
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Aug 22 11:53:09 2013 -0300

    tests/pc8: don't work around the eDP I2C bug
    
    On the current Kernels, i2c operations on disabled eDP panels don't
    work because we don't enable the panel before doing the i2c
    transactions. Whenever we try these transactions we print an error
    message on dmesg and fail. The current test suite was trying to work
    around this problem: we count how many eDP outputs we have and add
    them to the final result.
    
    Daniel asked me to not work around the bug, so now the i2c test will
    fail until we actually fix the Kernel bug (or stop using eDP panels).
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 9d29670dee6cabd93785c6c80016bbeca3a80328
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Aug 22 11:50:05 2013 -0300

    tests/pc8: fix function return value
    
    Looks like I forgot to push this chunk... The test was passing in
    cases where you only have eDP monitors due to the fact that we
    consider i2c won't work on eDP monitors.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 7c52a3cf5243b42b632fd73789d1b484e81b9b0c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 22 15:07:48 2013 +0100

    overlay: Rudiments of config files and option parsing
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 184786988e5d78ae230139d76691b9ce7f97dca6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 22 10:59:58 2013 +0000

    overlay: Fill the blank charts with error messages
    
    Instead of showing nothing, show a "space left intentionally blank"
    message.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b20a6b827924bfaf0bf92a1eae818385f90dfbea
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 22 01:30:02 2013 +0100

    overlay: Remove busy estimation
    
    Too inaccurate to be useful.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4572067c88276c6f72e33e6b204527f8a7ba4481
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Wed Aug 21 15:13:13 2013 -0300

    tests: ddx_intel_after_fbdev loads intel ddx after fbdev was loaded.
    
    v2: Don't add to kernel tests.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5e66c8c23925090bc230557704a23aaadbd5ad9a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Aug 21 13:49:45 2013 +0100

    overlay: Fix underflow for clamping initial values
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8b9f919b6346eac65be25e4f2e7c8f1b3168eb0a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Aug 21 13:44:44 2013 +0100

    overlay: i915 pmu doesn't require a specific frequency
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit db35f8c6adfd3880910469beb5a55b0763e55fa4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Aug 21 13:36:29 2013 +0100

    overlay: Put a faint outline around each chart
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e34fab5d2bad0ea9b6bb7e1eb45310640ccaf096
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Aug 21 11:06:51 2013 +0100

    overlay: Fade the graphs behind the text
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e104037fff7c1274e1b36f6f458caf6fd868c6db
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Aug 21 09:24:59 2013 +0100

    tests: Add gem_evict_alignment
    
    Clone gem_evict_everything and use it to exercise the misalignment
    paths.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e075e7b43ce54573df296bed3477e1d32d357176
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 21 10:22:13 2013 +0200

    lib/drmtest: fix logic fumble in gem_context_create
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=68363
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3e7dddc1d1deff674c64b42d26aa1d31b47e495e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Aug 21 09:16:25 2013 +0100

    overlay: Fix old mmio gpu busyness probing
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a7b742092700b68d049597d1f25574cac41bb63a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 20 23:19:45 2013 +0100

    overlay: Fix sampling of i915 perf event
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0b78c1632c88d2995baa0cdf40e120e628ea8a27
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 20 21:58:22 2013 +0100

    overlay: Fix display of rc6 states
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b98bade56e28cdac0ad5d1b9adfe384410555c15
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 20 21:39:27 2013 +0100

    overlay: Add copyright statements
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2e482a34870c4ab37ad3ae066e3f1b9b8e6b6688
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 20 19:11:44 2013 +0100

    overlay: Use the new i915 PMU to query GPU busyness
    
    And so avoid having to hold forcewake indefinitely.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5cb8c77d69ffda7fed784cd194844b4efecedf52
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 20 19:24:33 2013 +0100

    overlay: Take a snapshot on SIGUSR1
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 57e573ecc1c53b3aafe6ac4784069d79bd73107d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 20 22:03:30 2013 +0200

    tests/pc8: Update to latest igt infrastructure
    
    - Use igt_require for magic SKIP results while still printing results
      for all subtests.
    
    - Wrap setup/teardown code outside of subtests with igt_fixture. This
      will ensure that the so wrapped code isn't run when an
      igt_require/igt_assert failed (and we're essentially just printing
      the SKIP/FAIL result for all subtests) or when just enumerating
      subtests.
    
    - Use igt_exit. Otherwise SKIP/FAIL results of subtests won't be propagated
      correctly.
    
    - igt_subtest checks should be run unconditionally to make sure we
      always enumerate the same set of subtests. A bit on the line here
      since this is a subtest hidden behind a runtime flag.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c158128de5541f67543ea7fcb2404bc06e5d8fa3
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Aug 19 13:20:02 2013 -0300

    tests: add pc8
    
    This test chekcs our code that enables Package C8+. The environment
    requirements for this test are quite complicated:
      - The machine needs to be properly configured to reach PC8+ when
        possible, which means all the power management policies and device
        drivers must be properly configured.
      - You need at least one output connected.
      - You need the /dev/cpu/0/msr file available.
      - You need the /dev/i2c-* files available.
    
    v2: - Many many changes due to the latest review comments and rebase.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a7aaf85ac0708973bd1e34bb9b4a1443ea00cd89
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Aug 20 18:56:54 2013 +0100

    gitignore: Add a couple of recent binaries to .gitignore files
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 84beb3a2a64dbe0e4bad952ea63625ed216bc224
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Aug 20 18:55:16 2013 +0100

    quick_dump: Use AM_V_GEN when generating the bindings
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 993815ae3be4ddce2a10106c32e939a99b352a29
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Aug 20 18:52:53 2013 +0100

    overlay: Include gpu-perf.h for distribution
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 01283245ab15453ffcb36fdf0d4c5d1805a0ce3b
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Aug 20 18:25:52 2013 +0100

    assembler: Disable the declare test
    
    It's not hitting a valid assertion that it tries to write an instruction
    without a defined execution size (because the "default" exec_size never
    end up being set).
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit ca043f3a8ffa4d9d69a6833264717b59d0b2aa6a
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Aug 20 18:22:45 2013 +0100

    assembler: Disable tests that where already failing in the gen4asm repo
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit f8b25a3612dd0a4df593bd73e3d944addcbbd0e4
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Aug 20 18:12:49 2013 +0100

    assembler: Ignore make check output
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 751f8a73781b84d15088ee010dad10ef3a337efd
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Aug 20 18:02:37 2013 +0100

    assembler: Fix the path of intel-gen4asm
    
    With the move to intel-gpu-tools, we need to update that as well.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 63720a4f86105c9988334ee4bbc7b9252331994a
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Aug 20 17:58:48 2013 +0100

    assembler: Revert "Fix missing environment variables problem in test/run-test.sh"
    
    Same as:
    
      commit 497814f2f2828efdc5bdd787ebc490d5083f61b8
      Author: Damien Lespiau <damien.lespiau@intel.com>
      Date:   Tue Aug 20 14:52:05 2013 +0100
    
          assembler: Revert "Automatically run all test cases."
    
    make check will define srcdir and buildir variables for us.
    
    This reverts commit 1c009349bc894bd195b5522540536898b0bee574.

commit 497814f2f2828efdc5bdd787ebc490d5083f61b8
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Aug 20 14:52:05 2013 +0100

    assembler: Revert "Automatically run all test cases."
    
    The tests where supposed to be run through make check, not running the
    "run-test.sh" standalone. So revert that patch to have make check work
    as intended.
    
    This reverts commit 6983eebf47f37def8f2315d5af1800b81644f240.

commit 5959b8bb41fd852f44c4b81276fc451d896c2f05
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Aug 20 14:25:52 2013 +0100

    assembler: Tune the error message for invalid send on gen6+
    
    And be a bit more descriptive.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 5b791671adc798486bb85213984e8e11094d19e3
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Aug 20 14:20:06 2013 +0100

    intel_infoframes: Be future-proof about showing 3D_Ext_Data
    
    As Ville noted, future 3D_Struct must also send 3D_Ext_Data in the
    vendor infoframe.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit b5acc1061aad3c73a32b5ecc20fcb71067c938b8
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Aug 20 14:18:58 2013 +0100

    build: Fix the overlay build summary at the end of configure
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 2a37b1d78e8afedcd796dbb0b91d1bee6822d133
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 20 12:45:55 2013 +0100

    lib: Make igt_assert() abort under gdb
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 398be7d573fc20c42c737fdac3e3e979835c47fa
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 20 12:40:56 2013 +0100

    gem_evict_everything: Fix the error code checking after drmIoctl
    
    drmIoctl doesn't return the errno, so look it up after an error.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c615b5828974bd5f182b5ee35c5ed3393b3fe2b5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 20 11:53:22 2013 +0100

    tests: Add gem_evict_everything
    
    Exercise the eviction logic. This is just a naive test to ensure that we
    can evict old buffers to accommodate new batches, and in the process
    trigger the evict everything logic.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c6482b781462a291495b9a3b8befa26d49a5ebd0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 20 11:09:11 2013 +0100

    overlay: Sample power every second
    
    Found the bug, but still only read the msr once every second - mainly as
    an exercise in handling different sample rates.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c888507b68c665e15d02defae9d341245c87b1c2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 20 11:08:13 2013 +0100

    overlay: use rc6_enable to drop useless information
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cf62d52eb414db54c7dd8c78e3052fbad30f94fb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 20 10:58:02 2013 +0100

    overlay: Fix counting fail
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5c81cda0ff092a13c6a1eb24149e7bf98e7242fa
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 20 10:04:23 2013 +0100

    overlay: Add graph for GPU power consumption
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit baa5be07d6652bcd86353d25188505cb0199450a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 20 09:27:34 2013 +0100

    overlay: Add rc6 residency
    
    Not much point at the moment since we use forcewake to continuously
    probe the GPU busyness. But that will eventually change to a more
    power-efficient in-kernel.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 912a7d855600aadb937517ec5bab26bfd9b8953d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 20 06:39:43 2013 +0200

    tests/gem_concurrent_blit: Fix segmentation fault
    
    Apparently the simple changes introduced in
    
    commit 78865847f9fae7e590960f9836f2ec8b611a190e
    Author:     Daniel Vetter <daniel.vetter@ffwll.ch>
    AuthorDate: Mon Aug 19 07:23:49 2013 +0200
    Commit:     Daniel Vetter <daniel.vetter@ffwll.ch>
    CommitDate: Mon Aug 19 08:09:25 2013 +0200
    
        lib/drmtest: skip fixtures after an igt_skip
    
    pushed the stack space requirement for run_modes over some magic limit
    (I guess where the strack grow logic starts to fail, but I didn't
    check). Fix this by moving the data into .bss.
    
    Also add some asserts to check that fixtures aren't abused while at
    it (i.e. the useful parts of my debug printf/assert craze).
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=68299
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 00282ed4589491732e921b66166ffa72e3ae11f3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Aug 19 23:29:08 2013 +0100

    overlay: Wrap the colour index around the rgba array
    
    And stop assigning colours beyond the end of the array. Still needs a
    better method for colour assignment, big list of good colours & ida?
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f71d7aeb774ea8d603519d0d1fdef69ba83f2b68
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Aug 19 22:26:01 2013 +0100

    overlay: Add missing include "debugfs.h"
    
    Later versions of gcc are apparently stricter.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 55b8c33ca50ce82393f99fb4412aaaed17f010fb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Aug 19 18:15:04 2013 +0100

    overlay: Auatomatically mount debugfs
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 34198b801ebca69fba654c8d1e011acea45b778c
Author: Mengdong Lin <mengdong.lin@intel.com>
Date:   Sun Aug 18 20:36:03 2013 -0400

    quick_dump/bdw: use hex() to convert devid to hex string in error message
    
    This patch is to avoid the error on device auto-detection failure
    "TypeError: Can't convert 'int' object to str implicitly".
    
    Reviewed-by: Ben Widawsky <ben@bwidawsk.net>
    Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>

commit b70d4c9e6824d648c34ffbd9993aa3e0dd482ac8
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed Jul 31 11:59:38 2013 +0300

    tests: add kms_setmode
    
    Iterate through all valid/invalid crtc/connector combinations. At the
    moment only clone configurations are tested as the single output cases
    are tested already by testdisplay. Also from combinations where all
    connectors are on the same crtc (clone-single-crtc) only those are
    tested that are invalid, as I haven't found any machine that supports
    these (have to be GT2 with dvo and vga output).
    
    For configurations with one crtc per connector the FBs are per-crtc atm.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 5cabaae4dd8f3b4f78468b669d9177d593b4472d
Author: Imre Deak <imre.deak@intel.com>
Date:   Sat Aug 3 02:10:11 2013 +0300

    lib: add subtest extra command line option handling
    
    At the moment any command line option handling done by tests will
    interfere with the option handling of the subtest interface. To fix this
    add a new version of the subtest_init function accepting optional short
    and long command line options. Merge these together with the subtest
    interface's own long options and handle both together in the same
    getopt_long call.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit e55b89f1c375df20415e0ebe164001b168fb2bde
Author: Imre Deak <imre.deak@intel.com>
Date:   Fri Aug 2 17:13:37 2013 +0300

    lib: handle SIGSEGV similarly to other error signals
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 9cbbce148f4a10aa7acf899d0f3cd47b98111cde
Author: Imre Deak <imre.deak@intel.com>
Date:   Fri Aug 2 17:13:21 2013 +0300

    lib: shorten DP/eDP connector names
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 9a9f13167a655613abfca4a7bc567727e33cfabd
Author: Imre Deak <imre.deak@intel.com>
Date:   Thu Aug 1 15:08:19 2013 +0300

    lib: export kmstest_get_connector_default_mode
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 8dbd1fb9d4ecdd686dac13fb64f7af02480ea849
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 19 11:09:25 2013 +0200

    lib/drmtest: igt_skip when drm_get_card fails
    
    Also add printf support to igt_skip to make sure there's always a
    reason why we fail a testcase.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9ad062d0b30f307cd5045ba03eeb7d2fa90487b0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 19 10:55:28 2013 +0200

    lib/drmtest: extract gem_create_context
    
    libdrm requirements are now up to it.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 23eee394893541fa531543e8fb4b12610599817c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 19 10:47:53 2013 +0200

    tests: roll out igt_require some more
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5951ffb6a042037b74f7123d599b6a4f907ecff0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 19 10:34:34 2013 +0200

    lib/drmtest: rip out drm_open_any_master
    
    It's unused. Also most of our tests failed to ask for the right type
    of drm fd anyway. So it's imo better to just let them fall over when
    they don't get master but want it, like they already do today.
    
    This also allows us to garbage-collect the master parameter to
    drm_get_card and associated code.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4ba1f2e104310263a112846b19acfa04c8f95fe4
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 19 07:57:03 2013 +0200

    lib/drmtest: Properly skip if no intel gfx supported
    
    drm/* kernel test nirvana!
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 47a32a3aec22f3252a5f551d7b52bb3c2886d0a7
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 19 07:28:42 2013 +0200

    lib/drmtest: make igt_fail work outside of subtests
    
    With the abortable fixtures we can now correctly fail all subsequent
    sutbests if we hit upon an igt_assert outside of a subtest.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 78865847f9fae7e590960f9836f2ec8b611a190e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 19 07:23:49 2013 +0200

    lib/drmtest: skip fixtures after an igt_skip
    
    This way we can just enclose all igt_skip/igt_require calls into
    fixtures even when we have subtests, and still output correct SKIP
    message for all of them. Wohoo, magic!
    
    The only thing which doesn't work yet is enumerating failed subtests,
    but I think that should work out on top of this.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3df8300e23a6a610f738722872743b0670298f99
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Aug 19 08:20:15 2013 +0100

    overlay: Tweak label locations to include baseline offset.
    
    Still approximately, too lazy to query the metrics.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 34e4780c8e9c429a835c8be9c512cfe239241298
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Aug 18 21:10:26 2013 +0100

    overlay: Add a X11 window backend
    
    Useful for remote hosts.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1c1a2798063df03633dc7dfbd215a37b71dbecd6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Aug 18 19:20:24 2013 +0100

    overlay: Tweak a couple of the fill colours to be slightly less horrid
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1391ae08eb007205ad79d4201c3bf499239f8697
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Aug 18 19:16:29 2013 +0100

    overlay: Don't smooth gpu freq
    
    This is supposed to be discrete jumps, so use straight lines to emphasis
    this nature.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 90ef68859c3e5edf2a6cd6b274f0443b936c9e0d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Aug 18 19:58:28 2013 +0200

    test/gem_dummy_reloc_loop: fix igt_require conversion
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=68170
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5d41b13824d85c2e773cca5c4639882ea394e866
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Aug 18 18:54:04 2013 +0100

    overlay: Remove the double ':' from object comm names
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6a38200b87b7b44d781470d4cbd6578182938aa8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Aug 18 18:45:14 2013 +0100

    overlay: Use a more compact 2x2 layout for the graphs
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 74032f4b4559fee909aec97b16617c40a81bc642
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Aug 18 18:40:03 2013 +0100

    overlay: Rearrange GUI state
    
    Planning a new layout...
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7d950fa6f26e823a741f8c2db95ce4dd96c8d432
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Aug 18 18:27:47 2013 +0100

    overlay: Print min/max GPU frequencies.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3f5129471fdcc81ae4291bfa717e497d223e35a1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Aug 18 18:24:43 2013 +0100

    overlay: Convert gem objects to megabytes
    
    Less confusing, I hope.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e1ed5606c6dd9d320b97582a9575e2b86a17e844
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Aug 18 18:17:05 2013 +0100

    overlay: Parse gem objects
    
    Condense the information and begin graphing it. Remaining todo for
    memory is to measure bind/evict flux, and perhaps clflush.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit de2c97b27fa176deec12a6277448397fcc246e47
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Aug 18 16:42:25 2013 +0100

    overlay: Add GPU frequency
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6a64ee938b90a2d27342aa42ba1d2d90da40dc7b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Aug 18 15:56:22 2013 +0100

    overlay: Include CPU usage in the overview chart
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 98572f0446e62eb889f28efe39fc1501e96093c1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Aug 18 11:15:08 2013 +0100

    overlay: Count flips per plane
    
    Stop the misleading double-accounting of flips when we have multiple
    displays active.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b79a28355ded0118f6e53f745684d67c8201bf30
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Aug 17 23:50:21 2013 +0100

    overlay: Improve the horizontal fit of the charts
    
    Notably fix the fill boundary to not extend past the right hand side of
    the chart.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f185f46114620ff8938abc965f89ecb4d295b4f4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Aug 17 23:07:01 2013 +0100

    overlay: Correct layout of ring/seqno in raw sample
    
    For seqno completion, the events are too coarse i.e. one event may
    signal the completion of a few seqno. We will need to sort the events to
    properly compute the busy times.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 67f533f836487093a27e176d64de206772088345
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Aug 17 22:33:35 2013 +0100

    overlay: Accumulate busy times
    
    Still a little too course as we add multiple overlapping seqnos and
    waits.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6233cac9c9f264961c62bb1330d8f48b3b6922b5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Aug 17 22:22:21 2013 +0100

    overlay: Couple wait begin/end events together to fix accounting
    
    Since the events may be processed out of order (due to per-cpu
    ringbuffers) we need to be careful to associated wait pairs in order to
    compute the correct elapsed time.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e1d8d774f331ba4e515cad4e5efa91ddc18efad6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Aug 17 22:07:49 2013 +0100

    overlay: Perf output redirection must be done after mmap()
    
    Effectively you choose to redirect the output of an event instead of
    mmapping it directly - but the target must already be mmapped.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit eed59eac47bae095513a5b1b6286fdd556d8a760
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Aug 17 21:14:10 2013 +0100

    overlay: Show per-process wait times
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cc9de398cf5232e547e9131d72782732a552fc56
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Aug 17 20:32:58 2013 +0100

    overlay: Graph per-process requests over time
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cbbd55af154f88fdd2c58c0398408f242124b005
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Aug 17 20:04:11 2013 +0100

    overlay: Track requests per-process
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit be9937b65cbc7ba06f972b68db2a80c2100c4141
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Aug 17 18:48:28 2013 +0100

    overlay: Drop unused mmap/comm events
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8cdb5bc5e838665bd8aafde3667a55152196e7f4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Aug 17 18:24:39 2013 +0100

    overlay: Constify perf ringbuffer
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3e430a8b01ae13bac878863663bd3e2efd995c6d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Aug 17 18:09:40 2013 +0100

    overlay: Fix wraparound handling of perf ringbuffer
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cc45a9a3dbbaa51a480c56bea53c1803dbd1859f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Aug 17 17:38:37 2013 +0100

    overlay: Primitive integration with perf
    
    We can now record when a pageflip occurs by listening for the flip
    tracepoint. Merely proof of principle at this point.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 06c0cc0bb42d0a3f1c72e0c0d85d15107a392069
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Aug 17 12:32:17 2013 +0100

    overlay: Show GPU waits
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f9a50de3dcc501e930de6c60983a4feb57121e7e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Aug 17 11:12:07 2013 +0100

    Introduce intel-gpu-overlay
    
    A realtime display of GPU activity. Note, this is just at the point of
    minimum usability...
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7df9caeea1606b4f0272de35f0d7f70eedd5ec30
Author: Ben Widawsky <benjamin.widawsky@intel.com>
Date:   Fri Aug 16 14:54:36 2013 -0700

    quick_dump: add is_haswell()
    
    This was missed beforehand.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 0d320fdcedf9e5fd512597477e9f4913a3c7af33
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 16 12:07:56 2013 +0100

    gem_concurrent_blit: Purge the child bufmgr's cache
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=68169

commit 6332994c269ae5613845a40cd798ffa2f1b86395
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 16 12:15:00 2013 +0100

    drmtest: Squelch the rude interrupter
    
    Stop printing the debugging information of how many times we emitted a
    signal.

commit 1b17cb9d04809f9528279abc44ad74f5559df3b5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 16 11:23:22 2013 +0100

    gem_concurrent_blit: Fix the leak from the children.
    
    As the children use the parent's fd, the kernel only has a single filp
    for everyone. Therefore we cannot rely on the process termination
    reaping the buffers we allocate for the children.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=68169

commit 1ca607b458b63762846fc95c104b4686eb4eccb3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Aug 16 09:44:13 2013 +0100

    gem_concurrent_blit: Share total num_buffers between all children
    
    Apparently not all machines have more than 4GiB of RAM available.
    Spoilsports.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=68169

commit 62298329350b965e4bbfc558e5a4b1b3646742ea
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Wed Aug 14 14:21:16 2013 -0700

    assembler: error for the wrong syntax of SEND instruction on GEN6+
    
       predicate SEND execsize dst sendleadreg payload directsrcoperand instoptions
       predicate SEND execsize dst sendleadreg payload imm32reg instoptions
       predicate SEND execsize dst sendleadreg payload sndopr imm32reg instoptions
       predicate SEND execsize dst sendleadreg payload exp directsrcoperand instoptions
    
    The above four syntaxes are only used on legacy platforms which support implied move
    from payload to dst.
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 9d5e4fac207a9278ec26717576dff0e5d3766c57
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Aug 15 16:46:58 2013 +0100

    gem_ctx_basic: Fix misc warnings
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 92aca3b19e7201ed6e8f74b18207209d9312f8d2
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Aug 15 16:40:47 2013 +0100

    intel_infoframes: Dump 3D_Ext_Data when using Side-by-side (half)
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit bc1cf77534fa11fbdc5bb95313fe5728c6411235
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Aug 10 21:25:16 2013 +0100

    intel_infoframes: Add support for decoding HDMI VICs
    
    The HDMI vendor infoframe can contain a HDMI VIC (as of HDMI 1.4, only
    used for 4k formats).
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Reviewed-by: Simon Farnsworth <simon.farnsworth@onelan.co.uk>

commit e58891d0aef37391ccd09091871db35516427884
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Aug 15 14:00:23 2013 +0200

    tests/prime: test dma-buf llseek support
    
    This exercises a proposed patch from Christopher James Halse Rogers.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 79abed393f7c92255a1263c5ef3694befbea6812
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Aug 15 11:55:32 2013 +0200

    lib/drmtest: Use igt_assert in the do_ioctl/do_or_die helpers
    
    abort results in "crash" test results in the piglit runner, igt gives
    us neater output.
    
    The downside is that we can now only use these in igt tests, but
    that's already the case (and given their placement in drmtest.h their
    intended use-case, too).
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 610630622b4f5f9570f6faf136a0273535728536
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Aug 15 13:47:15 2013 +0200

    tests/gem_ctx_basic: Use igt_require
    
    ... instead of threading the 77 return value through threads. Even
    better would be to check for requirements in the single-threaded setup
    part of the test, since now it's done by multiple threads in parallel
    and will result in interleaved and multiplied output on stdout.
    Whatever.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 176011eea776566ca73f98c48b0476db7f8b1e4d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Aug 15 10:55:22 2013 +0100

    Add intel_framebuffer_dump
    
    A simple utility to capture the currently active framebuffers and record
    them as a png.

commit f2198896087b160bdc13eb8cf9b2dd54e79d52da
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 14 22:13:38 2013 +0200

    lib/drmtest: fix subtest output when skipping all tests
    
    (null) isn't too nice ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ec834c995f96a9e2feb3a36cca5887c16c87dfc1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 14 22:24:43 2013 +0200

    tests/prime_nv_api: fixup conversion goof-up
    
    Oops.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit eab7a322edc0a5b0553ff5f4c170096a98f8464f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 14 22:15:04 2013 +0200

    tests/primve_nv_test: use igt_assert for checking
    
    ... and drop the int return argument of the tests.
    
    Also:
    - make nv_write_i915_cpu_mmap_read functional again by dropping the
      goto.
    - add checks to i915_import_pread_pwrite
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 696c8f6434c7ec8db64f88125d4a7b31afd130bf
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 14 18:30:03 2013 +0200

    lib/drmtest: documentation for igt_fixture
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 15c19229f404bcd04f90517925614d5716258057
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 14 18:03:09 2013 +0200

    lib/drmtest: add igt_subtest_name and use it in kms_flip
    
    Useful when the testname is constructed with igt_subtest_f.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b3880d3a969656b78fe246e5ca4dd5a4a2c70ef5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 14 18:02:46 2013 +0200

    tests: roll out igt_fixture
    
    Also sprinkle igt_assert and igt_require over the setup code to clean
    up code while at it. To avoid gcc getting upset about unitialized
    variables just move them out of main as global data (where they always
    get initialized to 0) - gcc can't see through our igt_fixture and
    igt_subtest maze properly.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c3dd8a8c85b3e1a4329282cbe82fd7f387cd2643
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 14 17:11:49 2013 +0200

    tests/gem_ctx_bad_exec: add subtest for vebox
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2dbd998429dc1c449abfa153060aba5a97b7c8aa
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 14 15:48:54 2013 +0200

    tests: Introduce igt_fixture
    
    Just a tiny wrapper to protect global test setup/teardown code when
    just listing subtests. Rolling this out over all tests with subtests
    should allow us to generate the testlist with piglit as an
    unpriviledged user on a non-intel system.
    
    The aim here is to make our QA team happy who currently suffers from
    this. Even more so for the prime tests since you need a system with
    intel _and_ nouveau gpus to just be able to list tests.
    
    Exemplary conversion with gem_concurrent_blt.c
    
    Fixture is the same name other test suites like googletest use for
    setup/teardown code used by multiple tests.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f8c0dfe399d7b5351a16d111285e85f54a5725ff
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 14 16:51:26 2013 +0200

    lib/drmtest: sprinkle documentation over igt_skip|fail|success|exit
    
    And make the behaviour of igt_exit() a bit saner.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a1ca8ef5b1f44845bb2d0eada0123eb35b7e0b21
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 14 16:02:24 2013 +0200

    tests: use igt_exit() consistently with subtests
    
    This is mostly important to get the SKIP reporting right, but I've
    found a few stragglers that wanted to get converted over to the igt
    result reporting completely.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ec283d6a52f49963b7f4d5d6582142f7f2025ded
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 14 15:18:37 2013 +0200

    tests/gem_concurrent_blt: extract run wrappers
    
    Functional programming ftw!
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9a4957a1b3cdc31019c90fedc44c3ac7449344fc
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 14 15:10:52 2013 +0200

    tests/gem_concurrent_blt: use the test helpers in the forked tests
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5a598c9b2ec22c3161d2d48e6f05a132ce8d333b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 14 15:08:05 2013 +0200

    tests/gem_concurrent_blt: refactor basic run modes a bit
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 43779e37b50d3bb256706b0e7bbd23df79bc9912
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 14 14:50:50 2013 +0200

    tests: merge gem_*_concurrent_blt together
    
    Too much copy&pasting isn't good.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f542b0970a1e4104fb0af0f60079271ac1cf02b1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 14 13:48:10 2013 +0200

    lib/drmtest: Don't spoil stdout when listing tests
    
    Oops.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6234658063b4080778c34228a444e96eb901279f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 14 13:47:47 2013 +0200

    tests: add igt_subtest_f for snprintf'ing testnames
    
    Useful when stitching together combinatorial testnames.
    
    v2:
    - ## rules are just fun. We need 2 indirections to actually get
      __LINE__ to properly expand.
    - Kill stray ; which botched the logic.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1532af19d9bf962412bb150393aa10d13fae91d6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 14 12:13:28 2013 +0200

    tests/gem_dummy_reloc_loop: use igt_skip
    
    For tests with subtest we should use igt_skip to ensure that subtests
    are always properly enumerated.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c2d6773b253b7ab15fe8818730aef2f9f7e4a23d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 14 12:07:44 2013 +0200

    tests/gem_write_read_ring_switch: use igt_exit and friends
    
    And consolidate the gem_require_ring check a bit.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 99431a4f06bcaaa8944d1ed8fed118cd2b97078b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Aug 14 11:03:34 2013 +0100

    gem_(cpu|prw)_concurrent_blit: Add contending processes
    
    Blindly fixed conflicts:
            tests/gem_cpu_concurrent_blit.c
            tests/gem_prw_concurrent_blit.c

commit 4f8c9a2c386154a5be94e117b4371ab0ef8b55a8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Aug 14 08:17:22 2013 +0100

    gem_write_read_ring_switch: Copy the missing igt_require
    
    An oversight in the mass conversion to the new framework as the test was
    called from two locations.
    
    Ideally, the checks could be moved back to the caller and the framework
    still work. This is just the patch of least resistence.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=68091

commit 6a746c82ab890cc7bcd6a0cdce78e6d69875f2bf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 13 23:51:09 2013 +0100

    gem_exec_lut_handle: Use linear regression analysis
    
    Simultaneously make the results more robust and compact by performing a
    linear regression to compute the amount of time required to perform the
    exec array walk and the relocations.

commit 629f48fa0e3d928a8d1999b4d547ad0ff9e2fd6b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 13 23:05:51 2013 +0200

    lib/drmtest: Don't run the rude interruptor when just listing subtests
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 878ac4c3ab3315e767801b53cabecebda583672f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 13 20:07:32 2013 +0200

    configure: require libdrm 2.4.45
    
    We've started to use the VEBOX defines.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8f5387eb99b640771812d28a0b949aca729bf296
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 13 13:20:58 2013 +0200

    tests: introduce igt_require
    
    Since igt_skip has funny control flow we can abuse it and make it work
    like a special kind of assert which automatically skips tests if a
    requirement fails.
    
    Note that in places where we have a less strict test which should
    always succeed (e.g. ioctl works or isn't available) the igt_assert
    should be place before the igt_require with the more strict
    requirements. Otherwise we'll skip a test instead of properly failing
    it.
    
    Convert a few users of igt_skip over to igt_require to showcase its
    use.
    
    v2: s/gem_check_/gem_require_/ so that we consistently use "require"
    to indicate magic check that can call igt_skip. Imo hiding the
    igt_require for feature checks is ok, but for more traditional assert
    like use cases an explicit igt_require might be better.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5e25fcc285240353ab15bd4c3a0d0e02d970f45b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 13 12:56:06 2013 +0200

    tests: use igt_fail instead of exit(param != 0)
    
    Mostly a sed job with too manual fixups:
    - one case of using _exit instead of exit
    - and one case which under some conditions use 77, so convert that
      check to an igt_skip.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b30d95f33ca9c7c2cd3ef9e3e23ea965ee784a8a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 13 12:51:35 2013 +0200

    tests: s/exit(77)/igt_skip()/
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c9d037828130a97f5952164fba06007b056dfb4b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 13 12:50:39 2013 +0200

    tests: s/exit(EXIT_SUCCESS)/igt_success()/
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a4cb8954b2d8f103b613aaa9860d9f25e8e2954d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 13 12:49:46 2013 +0200

    tests: s/exit(EXIT_FAILURE)/igt_fail(1)/
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 907377da0e9c2d878f45201230b8d3900310cb0b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 13 12:45:14 2013 +0200

    tests/gem_readwrite: convert to subtests
    
    A bit lazy since the read/write tests are all smashed together. But
    since we have really evil partial write/read tests for coherency
    checking that doesn't matter that much really.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ef9e64577d2b3ddc94827433a763d5445d8b23b8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 13 12:41:20 2013 +0200

    tests/gem_ctx_bad_exec: convert to subtests
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 83440953e50d1c46217ce9bdcd74aa9a4671913d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 13 12:35:58 2013 +0200

    tests: s/assert/igt_assert
    
    Just a wholesale rollout for now, we can refine later on.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2371c79bbd69f46c2849298fb7f216a5b9a21aa8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 13 11:56:24 2013 +0200

    lib/drmtest: roll out igt_assert
    
    I've left the asserts as-is where they check for tests that use the
    infrastructure in drmtest.c incorrectly. That way piglit's
    differentiation between a failed testcase and a crashing testcase
    should be more useful.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 646a6fefbc2f11df9d25811c317d1f05aa21da45
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 13 11:52:01 2013 +0200

    lib/drmtest: add igt_assert as a replacement for assert
    
    The aim is that we keep on running subtests even when a not-too-lethal
    assert failed in a subtest. To make that useful also print per-subtest
    test results from igt_skip|fail|success functions.
    
    If required we can always go googletest-nuts with different types of
    asserts later on, but I think for now we're good with what we have
    here.
    
    v2: Also print out proper SKIP message when skipping all subsequent
    tests since a global (i.e. outside of a subtest) init step failed and
    resulted in an igt_skip call.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c67ebf413a45dd225049b14562fd76d2bbc444e2
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 13 11:40:57 2013 +0200

    lib/drmtest: fixup igt_fail for the list-only case
    
    Oops.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bd161f8c042f710020137444a47cdeaea1bfd8f6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Aug 8 09:32:05 2013 +0200

    tests: add drm_get_client_auth
    
    To check we don't break the magic authentication check libva does.
    
    Ugh.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a7433ec9eebfb0e5a40189943764c0cf1555dab3
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 12 14:02:03 2013 +0200

    tests: scrap old automake based kernel test runner
    
    Upstream broke our dynamic creation of the testlist, and I think
    adding stupid .tests suffixes everywhere just to appease upstream
    autohell tools isn't that great. So scrap it, we can use piglit
    instead.
    
    References: https://lists.gnu.org/archive/html/help-debbugs/2013-06/msg00000.html
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6877877558870c9c245e7fedcbd1d66ed2206d83
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 12 12:26:35 2013 +0200

    tests: s/return igt_retval();/igt_exit();/
    
    Requested-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1caaf0a6b6e00e3ab85a10d7e9e36907d4c1d577
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 12 12:17:35 2013 +0200

    s/drmtest_/igt_/
    
    Requested-by: Chris Wilson <chris@chris-wilson.co.uk>
    Acked-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 814b135541813a6ee623eda895119acdea7f7a2f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 12 12:15:16 2013 +0200

    s/drmtest_subtest_block/drmtest_subtest/
    
    The _block postfix meant to convey that a C statement/block must
    follow can be misread as the verb to block. So drop it.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 16024841a12f71d52aea12603d9fb1cb63124fb6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 12 11:57:32 2013 +0200

    lib/drmtest: __ prefix for drmtest_run_subtest
    
    Now that callers must setup the longjmp target (we can't do that in
    run_subtest itself since that callframe won't survive) tests shouldn't
    call this function directly any more.
    
    Make this clear by adding a __ prefix.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d65d19d4f4ad98af42c628f3a81d273ce6ac4e5a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 12 10:46:55 2013 +0200

    lib/intel_mmio: Remove unused label
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7847ea2965e548f7f68c6d7a88499bdb255a697f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 12 11:03:29 2013 +0200

    tests: use drmtest_skip to check for rings
    
    To simplify things add a set of gem_check_<ring> functions which take
    care of this. Since I've opted for static inlines drmtest.h grew a few
    more header includes which was a neat opportunity to dump a few redundant
    #defines.
    
    This kills all the skipped_all hand-rolled logic we have.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7553ad6e10f76aa703359a10e08138e14501d54d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 12 10:43:59 2013 +0200

    tests: use drmtest_skip() in caching ioctl helpers
    
    This way we can rip out all the skip handling from the test control flow,
    and additionally (by using drmtest_retval()) even get correct exit codes.
    
    The only tricky part is that when we only want ot skip parts of a test
    (like for gem_pread and gem_pwrite) we need to split out those parts as
    subtests. But no addition of control-flow is required, the set/longjmp
    magic in the helpers all makes it happen.
    
    Also we make extensive use of the behaviour of drmtest_skip to skip
    all subsequent subtests if it is called outside of a subtest. This allows
    us to re-flatten the control flow a lot.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a4038d3853b98707a803f5d1fb5c9ebe32f0b84b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 12 10:39:33 2013 +0200

    lib/drmtest: make signal process cleanup more robust
    
    If we skip a test and and fail somewhere the parent might die before the
    child. So add some cleanup to handle this case. Also make sure that the
    parent indeed waits for the child to die.
    
    This is required to make the latest version of the piglit runner happy,
    it tends to wait for all zombies to disappear.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 740065f0f9cd8f5add5520e6b3db6b02befee0a9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 12 09:49:25 2013 +0200

    tests/gem_caching: convert to use drmtest retval infrastructure
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ba0d2acf0ed9faf8025c54857db661d37c3a1339
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 12 09:31:55 2013 +0200

    lib/drmtest: skip/fail handling
    
    Exitcode handling in igt testcases has too ugly facets in combination
    with subtests:
    
    - When individual subtest needed to be skipped for different reasons
      we need to painstakingly thread this information through the test to
      make sure that we still succeed if just one testcase worked (for
      running it with the simple automake test runner in igt). But it also
      needs to correctly report the skip exit value if only this one
      skipped testcase has been run (e.g. when run with piglit or in QA's
      test infrastructure).
    
    - We'd prefer to easily skip (and also fail) subtests without
      hampering other subtests. Again threading the return value of each
      subtest through the code is cumbersome.
    
    To simplify test case writing use longjmps to be able to get out of
    subcases easily. But since longjmps are funny things thug it all away
    into the newly added drmtest_subtest_block macro.
    
    Note that if drmtest_skip is called outside of a subtest, but in a
    testcase with subtests all subsequent subtests will be automatically
    skipped.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9f6365e4eacc7aa07fc3f9524500d1e217b61bb5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 12 09:04:24 2013 +0200

    lib/drmtest: Add drmtest_subtest_block macro
    
    Doesn't do more than an if (drmtest_run_test(name)) right now, but
    as soon as we get a bit of infrastructure to handle test failures and
    skipping, this will get more interesting.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 40ea6f4ea89dbf5a326677ea9482cc48743d2543
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 12 08:41:05 2013 +0200

    tests: s/cacheing/caching
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7b254f193933eda7c9761a7f10ac49049103b259
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Aug 12 08:39:26 2013 +0100

    gem_pwrite: Print the cache name not the number
    
    Bugzilla: https://bugzilla.freedesktop.org/show_bug.cgi?id=68003

commit 467796acc80ced3440740d267c2e2a4f246d4b8a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Aug 10 15:49:33 2013 +0100

    Expand gem_set_cacheing testing to handle the proposed DISPLAY domain

commit dbbf2e9b24d1488402269a803a230f341791d39a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Aug 7 23:41:54 2013 +0100

    intel_error_decode: First try /sys/drm/card0/error for the error-state
    
    As the sysfs is almost always mounted and readable, we have a higher
    success rate checking for our error state there than in debugfs.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a285f03f56050b9a9cb02f232078b63b4a181ed2
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 7 14:54:00 2013 +0200

    tests/prime_self_import: fix comment

commit 00280fa82acbca4cf2fac6ac27efb56d86bfcbe1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 7 18:36:31 2013 +0200

    tests/prime_self_import: Fixup previuos test
    
    ... not a great display of my prowess here.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8e11ab41923d0d45740c0530a8158edd354cf510
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 7 18:12:20 2013 +0200

    tests/prime_self_import: Add a flink/dma-buf self-import test
    
    This checks that we really always fill the dma-buf export cache. Which
    sometimes we don't.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e7c4fde8c1827783e8cd1ff17945c710f44b8723
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 7 12:01:35 2013 +0200

    tests: update .gitignore
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 57622965e57a9d9dfb491434169bce1ea3aa94fe
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 7 11:59:05 2013 +0200

    tests/gem_pwrite_pread: subtest annotation
    
    This testcase mixes correctnes tests with performance tests, so it's
    good to track the different correctness test separate for QA.
    
    Together with pread_after_blt the pwrite->blt tests here exercise the
    full cache coherency lifecycle of both snooped and uncached objects.
    
    /me is happy
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3dba47e8962ec6ebf7e8825531bd46ab54a84ec6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 6 22:27:37 2013 +0200

    tests: add gem_prw_concurrent_blt
    
    New testcase to check that pwrite/pread correctly synchronize with
    oustanding rendering. Just to catch regressions when we change
    something.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4901b5ff0e882b0b4e80d0adcbbf0c0f2a524560
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Jul 25 21:09:43 2013 +0200

    tests/prime_self_import: Add racing handle2fd testcase
    
    Similar to how we test flink races. Note that on unfixed kernels this
    oopses, and with my current set of patches it still leaks like mad.
    
    v2: Only close the prime fd if we've successfully created it.
    
    v3: Add a reimport test to check whether we don't race when reaping
    the obj->dma_buf link.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9ff5161354f2f8023e08eb87ebc173c01c2f607a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Jul 25 22:10:51 2013 +0200

    tests/gem_flink_race: Kill duplicate drm_open_any
    
    Leak test that leaks ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d9bc78767329bd183f3644b8d97c45fb2c2bd6e1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 6 18:03:18 2013 +0100

    gem_pwrite_pread: Use mmap to bypass pwrite/pread for comparison
    
    Just to help sanity test alternate paths.

commit e4a7c2fe6d2e2ddc052f264168e4835bebb1e81e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 6 16:14:59 2013 +0100

    gem_pwrite_pread: Measure how long it takes to upload/copy/download
    
    Further trying to determine the effects of setting snooping.

commit ab6ac672437fb403cea984b992ccab8336daf7ca
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 6 15:48:08 2013 +0100

    lib: Reset sig_stat after stopping the rude interrupter

commit 5d635f95f2cd7e97a925bae707bf35c8315603ad
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 6 15:18:30 2013 +0100

    gem_pread: Symmetric measurement to gem_pwrite

commit aad68d1a86a515c96e7af02c7d048680b5e83071
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 6 15:12:55 2013 +0100

    gem_pwrite: Time pwrites to both uncached/snooped memory

commit a661c098b0156a7cba4f29af0d6f223ca72560ba
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 6 15:09:50 2013 +0100

    gem_partial_pwrite_pread: Exercise different cacheing of the staging bo

commit 24eade08ab49bc2e1e16260472c34365e1e26d50
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Aug 6 15:03:40 2013 +0100

    gem_pread_after_blit: Exercise reading back through different cache levels

commit 3052fe2c91f927cce7f6b9340357ea14fed24c9a
Author: Imre Deak <imre.deak@intel.com>
Date:   Mon Jul 29 17:21:21 2013 +0300

    kms_render: fix gpu-blit for non-32bit bpps
    
    intel_copy_bo assumes a 32bpp bo, whereas we passed it bos with
    arbitrary bpp values. This resulted in thrashing GPU memory following the
    destination bo.
    
    Fix this by using a blit helper that can handle other bpps too.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 24de8bac80e61b9b8dbfd2b3b834f15a13e506e3
Author: Imre Deak <imre.deak@intel.com>
Date:   Mon Jul 29 17:19:58 2013 +0300

    lib: export drm_format_to_bpp
    
    Needed by the next patch.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit c1ee0bb53269ded7b79966d081518d689639bac7
Author: Imre Deak <imre.deak@intel.com>
Date:   Mon Jul 29 16:43:31 2013 +0300

    intel_batchbuffer: add support for non-32bit blt copies
    
    Needed by an upcoming patch fixing kms_render's blits for fbs that have
    other than 32bpp formats.
    
    Based on the corresponding SNA function.
    
    v2:
    - fix random ordering of src, dst parameters (Chris)
    - pass pitch in bytes rather than pixels (Chris)
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit a85548910cbb5f9f9c90b99a178e3b5bc1034730
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Sat Jul 27 15:30:41 2013 -0700

    lib/intel_mmio: Fix the fixed fix (register access)
    
    When I moved code around here:
    commit 57bc7631e161a7bdcf7f68e1a46049dcb49c2256
    Author: Ben Widawsky <ben@bwidawsk.net>
    Date:   Thu May 23 11:09:55 2013 -0700
    
        lib/intel_mmio: Fix the fix
    
    I accidently dropped the intel_gen() for the PCI id.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=67289
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit e3e4db93db8b41d8683361931a9da60169575561
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Jul 25 21:51:27 2013 +0200

    tests/sysfs_edid_timing: use real bash
    
    The lib/drm_lib.sh load path trick doesn't work otherwise. Tsk.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit db225aa38dae079c8fb5a95e9fd6ddc5975be466
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 24 17:04:35 2013 +0200

    tests/gem_flink_race: correct thread count
    
    They all race against each another, no worker-slave relationship
    like in the other subtest.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bc62a64b8a28a65e6d2586defc29032ca44ab592
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 24 17:01:11 2013 +0200

    tests/gem_flink_race: fix up scanf format
    
    Oops, failed to git add.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 24bbca9237cbb6bd5e85db839dc517db65e693e8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 24 09:46:57 2013 +0200

    tests/gem_flink_race: actually make it somewhat useful
    
    - Enable subtest support.
    
    - Add a check for the same flink name in the racing threads, which is
      an issue one of my recent patches actually fixes.
    
    - Add the test I've actually wanted to write which races an flink
      against gem close (with no open in between). That one does indeed
      leak.
    
    - Readd the leak check, but note that this needs a fixed kernel.
      Otherwise the leak counter will be utter garbage.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit dfe942edec1a713568a19e15ce75e1ed01b9fb08
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 24 09:31:40 2013 +0200

    Revert "tests/gem_flink_race: count leaked objects"
    
    This reverts commit bd927662fcfb1443c5982fb04cc694f78e1c8d53.
    
    It's bogus.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit aaeaca77208ef792dcb3fbf97c63e2c0303d7e5e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 24 08:01:35 2013 +0200

    tests/gem_flink_race: check for expected flink failure code
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bd927662fcfb1443c5982fb04cc694f78e1c8d53
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 24 07:37:45 2013 +0200

    tests/gem_flink_race: count leaked objects
    
    And fail the test if the leak count is bigger than 0.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9736fc09e26e6d6a68e85189062d49532a5d95bb
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 24 06:55:10 2013 +0200

    tests/gem_flink_race: kill debug printf
    
    Oops.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7b5440a09aa7257045c15643ae4b1bea79f90552
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jul 23 23:14:57 2013 +0200

    tests: add gem_flink_race
    
    This exercises a race in the flink name descruction of the current drm
    gem core. When racing a gem close with a gem open the open can sneak
    in and cause the kernel to leak the flink name and its reference.
    
    This results in leaked gem objects that won't get reaped even at drm
    file close time. On my 2 core/4 threads snb machine this leaks on the
    order of 1k objects per second.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8e46c382e359c7a3d465bb1505e7f8b63a7a5952
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jul 23 22:43:30 2013 +0200

    lib/drmtest: add gem_flink and gem_open
    
    Requires us to rename a few things in the gem_flink test to avoid
    variable shadowing.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5fcb528cb3b9523226486ac9df40850285a75f14
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jul 23 21:07:16 2013 +0200

    tests: sort tests in Makefile.am and .gitignore
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 10834f86102e7dae242a0cbda463a2d7543401dd
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jul 22 09:24:43 2013 +0200

    tests/gem_suspend: exercise fence restore code
    
    This exercise the bug fixed in
    
    commit 94a335dba34ff47cad3d6d0c29b452d43a1be3c8
    Author: Daniel Vetter <daniel.vetter@ffwll.ch>
    Date:   Wed Jul 17 14:51:28 2013 +0200
    
        drm/i915: correctly restore fences with objects attached
    
    For fun I've also added a subtest for the inverse transition.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5bc0324e86ac6cf7c67fea929f0f1f48ca9711f9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jul 19 19:08:43 2013 +0200

    lib/drmtest: document interface groups with one-liners
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 89d96a12d61cade801f07e0d78028a613b841978
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Jul 11 09:59:46 2013 -0700

    tests: Basic tools tester
    
    Requested-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit f801b928826f3a23979bf6e2747611895b1ea9c2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jul 20 10:20:52 2013 +0100

    test/gem_pread_after_blit: Make the test a little more stressful
    
    Extend the simply functionality by repeating it under the rude
    interrupter and chain together a couple of steps in new test cases.
    
    As a compromise for adding more tests, incorporate the piglit subtest
    framework.

commit 7d9dbd1fed62a9c22a616110db105ec7cf76c871
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jul 19 17:01:55 2013 +0100

    tests: Source drm_lib.sh instead of having its own INTEL_SIMULATION test
    
    One code path to maintain is always better.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit a7c56938c84eb25d8cf95caa125c7bf09e72dc1c
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jul 19 17:08:57 2013 +0100

    tests: Allow a shell test to declare it doesn't need to be DRM master
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit aefc5c63e4c60cba18c3941cafed926e23d114cf
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jul 19 15:42:20 2013 +0100

    lib: Allow users of env_set() to specify a default value
    
    So when the environment value isn't set, one can specify the default
    value to return.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 94444aea6eb731dbf4146ec431fa0d4376da8e2f
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jul 19 16:08:11 2013 +0100

    build: Pimp up the configure summary
    
    This helps people compiling i-g-t figuring out what can be optional.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 2797596432b1e19e7a79ee5dab2e2e9946f2c529
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jul 19 16:07:18 2013 +0100

    build: Fix automake 1.13 warnings
    
    warning: deprecated feature: target 'sr' overrides 'sr$(EXEEXT)'
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit bbce319b2912760f8b4118c250bf2dd6bf4bdc3d
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jul 19 16:03:49 2013 +0100

    build: Fix unbalanced quoting in the python dumper AC_ARG_ENABLE()
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 54ec3cbdd5ae7f535896c377789c2397a1594c9d
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jul 19 16:03:29 2013 +0100

    build: Fix a small typo in configure.ac
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 289024b3280c4814da747c3709ae9e220da2a179
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jul 19 18:24:59 2013 +0200

    lib/drmtest: fix const mismatch warning
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit fc5c6930144dfb33039a0e7359db6268fd70cbd3
Author: Xiong Zhang <xiong.y.zhang@intel.com>
Date:   Fri Jul 19 18:42:52 2013 +0800

    tests: add reloc, pread, pwrite slow path subtest
    
    the reloc, pread, pwrite slow path will be prevented by prefault,
    these subtests will disable prefault first, then do reloc, pread,
    pwrite, finally enable prefault.
    
    Signed-off-by: Xiong Zhang <xiong.y.zhang@intel.com>

commit 7ea2983b119a13f535a9a01fbfd28a05eb3014f2
Author: Xiong Zhang <xiong.y.zhang@intel.com>
Date:   Fri Jul 19 18:42:51 2013 +0800

    lib/drmtest: add drmtest_disable/enable_prefault() function
    
    V2: add exit handler to enable prefault (Daniel)
    
    Signed-off-by: Xiong Zhang <xiong.y.zhang@intel.com>

commit 161e610765b0b590a93c5a69468bc75f726c3f1b
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jul 18 12:23:49 2013 +0100

    tests: Add some tiled tests to the runs on simulation
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 00ab9a1313997f6292f064989b2c295d3fb2903b
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jul 18 11:53:55 2013 +0100

    tests: Instrument gem_seqno_wrap to run in simulation
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 204df6679814d67d0d932f9e60382f660dca915c
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jul 18 11:36:56 2013 +0100

    tests: Instrument gem_lut_handle for simulation
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit d1e862324b747a0ab5d985eaa6830076817231c5
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Mar 25 20:06:20 2013 +0000

    tests: Instrument tests run in simulation to run quickly
    
    We tweak the tests marked as runnable in simulation to run more quickly,
    more often then not at the expense of stress testing (which is of an
    arguable interest for the initial bring up in simulation). Hopefully the
    values chosen still test something, which is not always straightforward.
    
    It does run quickly, the number on an IVB machines are:
    
    $ time sudo IGT_SIMULATION=0 ./piglit-run.py tests/igt.tests foo
    [...]
    real    2m0.141s
    user    0m16.365s
    sys     1m33.382s
    
    Vs.
    
    $ time sudo IGT_SIMULATION=1 ./piglit-run.py tests/igt.tests foo
    [...]
    real    0m0.448s
    user    0m0.226s
    sys     0m0.183s
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 5fa15f79d00ba4f51f35cb83cf2e82a9460b60b2
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Apr 29 18:40:39 2013 +0100

    tests: Black list tests we don't want to run on simulation
    
    Let's start by a small set of tests, to eventually consider running
    more.
    
    The current list should then be:
    
    gem_mmap
    gem_pread_after_blit
    gem_ring_sync_loop
    gem_ctx_basic
    gem_pipe_control_store_loop
    gem_storedw_loop_render
    gem_storedw_loop_blt
    gem_storedw_loop_bsd
    gem_render_linear_blits
    gem_tiled_blits
    gem_cpu_reloc
    
    gem_exec_nop
    gem_mmap_gtt
    
    v2 add (Daniel Vetter)
    gem_exec_bad_domains
    gem_exec_faulting_reloc
    gem_flink
    gem_reg_read
    gem_reloc_overflow
    gem_tiling_max_stride
    prime_*
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit cf4efd15977d5849fbe091e7992bf94e80129c19
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jul 18 14:49:46 2013 +0100

    lib: Remove old dead code intel_batchbuffer_emit_mi_flush()
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 4b3476559436ca26d54b30dd90fc999adc304728
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Apr 29 16:04:52 2013 +0100

    lib: Introduce drmtest_skip_on_simulation()
    
    This will allow us to explicitely blacklist tests we don't want to run
    on simulation.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit c25e892ec339660a5a0c3e0f995a2ce3cbe92135
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Mar 25 17:25:14 2013 +0000

    lib: Rename IGT_QUICK to INTEL_SIMULATION
    
    It's more accurate this way as the quick mode is really useful for in
    the simulation environment.
    
    v2: Use the INTEL_ prefix to have a chance to share the same environment
        variable as piglit OpenGL tests
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 0193b69e1480707cd66b532a1d9c31bedb03748b
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jul 17 16:25:29 2013 +0100

    build: Depend on cairo 1.12.0 for CAIRO_FORMAT_RGB30
    
    We've somewhat recently added RGB30 support to testdisplay, but we need
    cairo 1.12.0 for that. Barf early.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit edee952e6af1903d710ee3e2e0b90c03b072f3e3
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Fri Jul 12 17:02:04 2013 +0300

    tools/inter_error_decode: decode for ctl and acthd
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 05cc515f3a9782fdf7e1553df61437db51625ea0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jul 15 11:55:09 2013 +0200

    tests/prime_nv_api: check multiple foreign imports with flink
    
    We want prime to only ever create one native gem object for each
    dma-buf it sees. This can e.g. happen if multiple processes import the
    same foreign dma-buf, e.g. the application imports a yuv frame from
    v4l to encode it into a video stream and the compositor imports it
    into his fd again to display it with an overlay.
    
    Hence add a bunch of tests which check all the various orders in which
    this could happen. Currently they all fail.
    
    Checking flink names is the easiest (and afaik only) way to check
    whether we're indeed dealing with the same object.
    
    This checks both ways, i.e. exporting from i915 and from nouveau, each
    with two variants of the test: One reuses the prime fd, the other
    closes it and creates a new one.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d64a9458b26794cb85314a145581376cf128bc08
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jul 15 11:12:31 2013 +0200

    test/prime_nv_test: use gem drmtest functions for pread/pwrite
    
    Different argument order, otherwise the same.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bc1a85e813268160816761f021cf989eb049934c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jul 15 11:09:57 2013 +0200

    test/prime_nv_test: nicer test names
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4a9d50db1ba6e2733020ca35c0e5c43ae3bce4da
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jul 15 11:04:20 2013 +0200

    test/prime_nv_api: more descriptive subtest names
    
    Preprocessor magic ftw!
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1a3c7e349389bbb28bbf98b4738ab32c3cacd756
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jul 15 10:59:55 2013 +0200

    tests/prime_nv_api: Drop bogus check from import-twice
    
    It's purely accidental that importing that same bo to different
    drm nouveau fds yields the same handle.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c28b898cd48f389f5f830ae1fdbeeccbcef5a5af
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jul 15 10:51:10 2013 +0200

    tests/prime_nv_api: convert to subtest infrastructure
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b37d89318de5b5e771ad065bb7b55102f6800391
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 12 10:05:34 2013 +0100

    tests/gem_write_ring_switch: Skip on pre-SNB
    
    The test requires MI commands only introduced with SNB, and so causes
    GPU death on gm45 and ilk.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=66838

commit 7dbc43f27af6731c8b8d92c1bdcc046466c27ab3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 12 09:54:55 2013 +0100

    tests/gem_write_read_ring_switch: Repeat under rude interrupter
    
    Another waiter that will then be subject to being interrupted, so retest
    the ring switches with the rude interrupter.

commit 9ee41661de50e5e6a602c2ff8ff919b9b34bb370
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 10 15:35:13 2013 +0200

    tools/quickdump: gitignore generated files
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 727440c48a6d247591d9cfc3af53e6f2e2b1b7f9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 10 15:34:56 2013 +0200

    tests: actually add gem_write_read_ring_switch
    
    Duh ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 21c0ab30a144a2d236221be86a8947c5ce19101c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 10 10:35:10 2013 +0200

    test: add gem_write_read_ring_switch
    
    This is meant to exercise the bug fixed in
    
    https://patchwork.kernel.org/patch/2825192/
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 037847a102ba5eb35977fe21b3b02efd546185ed
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jul 9 23:04:20 2013 +0200

    tools/intel_reg_dumper: fix up END register
    
    I'm full of fail ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d3221334d29f31d140b7bb64ba955701e59a1bf2
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jul 9 10:46:09 2013 +0200

    tools/intel_reg_dumper: add gen6+ fences
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 79b3029fe8c5c9d8d4428b639f458305887ceac3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jul 4 01:11:05 2013 +0100

    gem_(tiled|linear)_blits: s/interrutible/interruptible/
    
    Spelling fix in "interruptible" subtest name.

commit db94faede57be86e4f4dbefaf2c1ea24f44acae1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Jul 4 01:50:55 2013 +0200

    tests/kms_flip: don't run blocking relateve vblank waits with interrupts
    
    They simply take forever with the current kernel implementation. And
    since everyone switched over to the event based interface I don't see
    much incentive to try to fix that.
    
    So just disable them.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a7e7d08513a46eb721e708e7c9f0520edf265085
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Jul 3 14:42:48 2013 -0300

    intel_reg_dumper: enable the power well
    
    The intel_reg_dumper tool reads a lot of display registers. If we
    don't turn on the power well, dmesg will get flooded with tons of
    messages about unclaimed registers. So here we enable the "Debug"
    power well register and then restore its state later. It's impossible
    to guarantee that other things won't mess with the debug register
    between our put and get calls, but at least we're trying our best to
    keep things working fine, and it's the debug register anyway.
    
    As far as I know, nothing else uses the Debug register for anything,
    so we should be safe for now.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit a1ca6f9ca5286b1f5ffa60eb590667871d655a09
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Jul 3 14:13:34 2013 -0300

    lib: fix WM_DBG register address
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit c013bb02e653f53e9033fe3d95e8204587e499a8
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue May 7 12:53:52 2013 -0300

    intel_reg_dumper: add hsw_debug_lp_wm
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit c6cec844f95e3fbd4b140586c2453916328b7aa4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jul 3 10:02:27 2013 +0100

    Make the failure message for drm_open_any() more specific
    
    Do not suggest retrying as root if we already are.

commit 9eb7d8950c199b9f4d93f3434aac9aa51c69d242
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jul 3 09:58:28 2013 +0100

    Avoid corrupting the exitcode with a failure to open a quiescent fd
    
    In the atexit handler, we attempt to quiesce the GPU. This involves
    opening a fd - which will fail if the test is not being run as root and
    will obliterate the test status and pollute the output.

commit 9360df4ab33697b6a64ed8ec05d84564c784d607
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jul 3 08:47:34 2013 +0200

    tests/gem_linear|tiled_blits: convert to subtests
    
    Finer granularity for nightly runs and regression reporting is always
    nice.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bc388b54d4325669bfffef314c6f18349c239a1c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jul 3 08:10:28 2013 +0100

    drm_lib.sh: Be more precise in detecting the i915 /sys path
    
    We need to be careful in case other devices grow an error file in the
    future. The first step here is just to check the minor that corresponds
    with the debugfs path found for the device

commit e50ae9596c544c3cca0f32c5eba94c655a1ebcd2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jul 3 08:00:13 2013 +0100

    tests/hangman: Be lenient towards a non-existent sysfs error state
    
    As /sys/class/drm/cardX/error is a new interface for 3.11, we need to be
    quiet when it does not exist or else we upset the automated tests.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=66533

commit ae452e327aa8dab739ca521e924a9ac9fcc506cf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jul 2 11:24:57 2013 +0100

    tests/gem_(linear|tiled)_blits: Repeat whilst being interrupted
    
    Since these two tests exercise a working set larger than aperture, they
    require stalls which are prone to being interrupted - so interrupt them
    and check that everything still works.

commit faf2a0223cb8655e7ac826592b50ad4e08ec04ee
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jul 2 09:13:57 2013 +0200

    tests/drm_lib.sh: Don't die if the sysfs path can't be found
    
    That just means that the sysfs error file isn't there.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3f93e1bc74850ded734e8667674d83711a26c19c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jul 2 09:09:56 2013 +0200

    test/drm_lib.sh: Updated sysfs error filename
    
    I've forgotten to bikeshed that part ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 857b464b34d8deb4f1676a40b1c75da357614df7
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Fri Jun 28 14:35:41 2013 +0300

    tests/ZZ_hangman: Test both error_state interfaces
    
    Test both debugfs and sysfs error_state interfaces.
    
    v2: sysfs error_state not mandatory
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    [danvet: Update sysfs file name.]
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6fd652ac1db1b572af6cc4a040ca357707503f5b
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Thu Jun 27 16:54:43 2013 +0300

    tests: add i915_sfs_path
    
    To access 'error_state' through sysfs.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3743a0b994a4e6035d9370ec658b70e0a8528c4a
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Thu Jun 27 16:54:42 2013 +0300

    tests: rename debugfs base path to be more specific
    
    In preparation to have sysfs entries used in scripts
    rename to more specific name.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4541cbeba4fdd71c7e0a14d0803fa4f7ef345696
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 1 12:24:55 2013 +0100

    tests/kms_flip: Repeat all of the tests whilst being rudely interrupted
    
    Once upon a time, our modesetting code used to fail if it was
    interrupted. So lets make sure that never happens whilst flipping.

commit b84b9e230c40d8ebfe834f2965c868a88016cffb
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Jun 26 20:57:34 2013 +0300

    quick_dump: Add VLV DPIO registers
    
    Add the names of all VLV DPIO registers.
    
    v2: Use the third element to signal DPIO registers, and split
        the code changes to a separate patch
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit e87c2536f6e19dfd77fc2ede2a5a63e2675ff077
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Jun 26 20:57:33 2013 +0300

    quick_dump: Document the register definition format
    
    Add a small comment about what the elements in the register
    tuple mean.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit de92969a402da1ae070ca76efd8721138f46f376
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Jun 26 20:57:32 2013 +0300

    quick_dump: Add automagic DPIO register support
    
    Repurpose the (currently unused) third element in the register
    definition tuple to indicate the type of the register. 'DPIO'
    is the only special register type for now.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 26af13f84fe2e1244b91760870d3763f978d3c30
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Jun 29 18:31:45 2013 +0200

    lib/drmtest: set default sighandler for QUIT in the signal process
    
    Otherwise the thing doesn't reliably die when run from the piglit
    framework somehow.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 64ff612b81c29de3f808a55f2010e99924a10191
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Jun 29 17:50:49 2013 +0200

    tests/gem_cpu_concurrent_blit: stop signal helper again
    
    Not doing so totally upsets the piglit igt runner since we leave
    a bunch of zombies behind.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 13932d67de1ab11f768782138ea88a00fc2ff4a5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jun 29 17:17:52 2013 +0100

    tests/gem_cpu_concurrent_blit: Restore lost intel_copy_bo()
    
    Accidentally replaced the intel_copy_bo() with the set_bo() in the
    "overwrite-source" in 4fd34977aff60f58cd955eb9c2d568d5fb824611 when
    clearly I wanted to simply add the calls to set_bo() first.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b1f23fe1d475ee99f77a96e29f5a8d54d4d2c6fc
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jun 29 17:09:21 2013 +0100

    tests/gem_cpu_concurrent_blit: Undo debugging hack
    
    Accidentally left in the hack to run the
    "overwrite-source-interruptible" for only one loop, used whilst testing.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4fd34977aff60f58cd955eb9c2d568d5fb824611
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jun 29 17:05:24 2013 +0100

    test/gem_(cpu|gtt)_concurrent_blit: Move the set_bo() from create to the test
    
    Hiding the initial set_bo() required for the "overwrite-source" tests
    lead to a nice bit of hilarity as I missed repeating the initialisation
    for the multiple loops of the interruptible version of
    "overwrite-source".
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4c6f2d4e0c10fe3aa6ee8fffee1541f03cd9fa48
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jun 29 16:45:46 2013 +0100

    tests/gem_(cpu|gtt)_concurrent_blit: Restore the old tests and add the new interruptible as new tests
    
    Daniel preferred to keep the old tests intact lest we accidentally break
    them, and to add the new interruptible tests as new subtests.
    
    In the process also make sure the GPU is idle before starting each loop.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 95426dc206eee75a7092bc6f00a53572892ba0e5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jun 29 16:15:38 2013 +0100

    tests/gem_(cpu|gtt)_concurrent_blit: Enable signals
    
    In order to exercise the bug behind:
    
    commit 22fd5ca947b58901927d100d2b1aa0f1672b3435
    Author: Chris Wilson <chris@chris-wilson.co.uk>
    Date:   Fri Jun 28 16:54:08 2013 +0100
    
        drm/i915: Only clear write-domains after a successful wait-seqno
    
    we need to check for concurrent access with the potential to be
    interrupted by a signal. The framework for doing so is already in place,
    so just enable it and repeat the tests for longer to give better chance
    of being interrupted at just the wrong moment.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ebfd01908f787876040a679fc7895828b23d268d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jun 27 19:58:57 2013 +0100

    tests/gem_lut_handle: Quit when we hit ENOSPC
    
    I'd been working under the falsehood that we would always generate an
    error for an invalid reloc->target_handle before reserving any object.
    However, only the execlist is checked up front for validity before
    reservation so ENOSPC is a genuine error condition raised by the test.
    Fix it so that we stop reporting that limit as a test failure.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=65391

commit 60e3930987134ff855cb24dd1021eb5225b18857
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jun 24 13:53:44 2013 +0100

    tests/gem_lut_handle: Simplify creation of broken handles
    
    Limit the broken handles to UINT32_MAX-4096 so that we can be sure that
    they do not alias with a valid handle.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=65391
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6de9736394242f207a43e828a8236e4f63c16e03
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jun 24 12:03:54 2013 +0100

    tests/kms_flip: Suppress failure from setting mode
    
    We may fail to set a mode if it fails some hidden constraints, such as
    bandwidth on the third pipe. This is expected, so skip testing such
    modes.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=66111
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit fc6621f5f96f64a3d5ec7b36c64c8d110e99217d
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Sun Jun 23 16:12:51 2013 -0700

    m4/ax_python_devel: Update to upstream
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit d2048819b9db8781c65399f28696f375448a03e6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jun 21 16:52:53 2013 +0100

    kms_render: Skip unsupported display configurations
    
    Certain modes may not be supported by certain combinations of pipes.
    This is impossible to determine upfront, and we await an atomic
    modesetting query operation. In the meantime, if we fail to set a mode,
    just skip that test.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=66000

commit e56754965fad7c53130cecd26a91b841e22a8ab9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 19 14:19:07 2013 +0100

    gem_lut_handle: Print some more information upon failure
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=65391

commit 5bb0897f73b2e42a32338432ae198289f6f8b91c
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Jun 4 15:42:15 2013 +0300

    quick_dump: vlv mipi dsi register support
    
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 67a4ea0ee1ebd3959fe9de9a2849671b97983d9d
Author: Imre Deak <imre.deak@intel.com>
Date:   Fri Jun 7 21:29:02 2013 +0300

    lib: fix drm_fourcc.h include path
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 9d8fc1957c8cccb6875264334cd67bb24c6e7c54
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jun 7 11:44:40 2013 +0100

    gem_lut_handle: Avoid using a valid handle when testing BROKEN

commit 17523ef7bfae5a98f061e13916f25f64eacfb835
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jun 6 16:52:09 2013 +0100

    list-workarounds: Some workarounds start with WA, not Wa
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 528b1f381c4e67c2e63e23b5597070fffe8033d6
Author: Imre Deak <imre.deak@intel.com>
Date:   Thu May 30 22:59:59 2013 +0300

    tests: add kms_render
    
    Add a test going through all connectors/crtcs/modes/formats painting to
    a front FB with CPU or painting to a back FB with CPU and blitting it
    to the front FB.
    
    Only formats understood by cairo are supported for now.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Reviewed-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>

commit f68d964c57c9229cad7321463e40f14b3974ec5d
Author: Imre Deak <imre.deak@intel.com>
Date:   Fri May 24 17:26:54 2013 +0300

    lib: refactor kmstest_create_fb
    
    Factor out parts that will be used by an upcoming patch adding
    kmstest_create_fb2.
    
    Also call the fb paint functions directly, there is not much
    point in passing a function pointer for that.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Reviewed-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>

commit bfb0cdd668e6ecea56125586f5ddf1cf62cc0383
Author: Imre Deak <imre.deak@intel.com>
Date:   Fri May 31 00:21:43 2013 +0300

    lib: add kmstest_get_connector_config
    
    This is used by multiple test cases, so make it shared.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Reviewed-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>

commit 334baf05ca4f90a49a86893a702f4cd1270a8dbb
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed Jun 5 22:11:11 2013 +0300

    lib: use kmstest_cairo_printf_line in paint_marker
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Reviewed-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>

commit 542a40c485361909a40830ffd2421082a0e85c89
Author: Imre Deak <imre.deak@intel.com>
Date:   Thu May 30 15:03:48 2013 +0300

    lib: add kmstest_cairo_printf_line
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Reviewed-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>
    [v3: fix mode printing in paint_output_info() botched by debugging leftover :/ ]

commit 3a2aed1f30ea0e4373fa93eab8cb33cd8dd98670
Author: Imre Deak <imre.deak@intel.com>
Date:   Thu May 30 22:53:53 2013 +0300

    lib: move connector_type_str and co to drmtest
    
    These are used by multiple test cases, so make them shared.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Reviewed-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>

commit 18bf2e6b343512cf829e8ff8eebd0958bbb59b51
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Mon May 13 17:54:12 2013 -0300

    intel_chipset: Adding more reserved PCI IDs for Haswell.
    
    At DDX commit Chris mentioned the tendency we have of finding out more
    PCI IDs only when users report. So Let's add all new reserved Haswell IDs.
    
    Bugzilla: http://bugs.freedesktop.org/show_bug.cgi?id=63701
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>
    Acked-by: Kenneth Graunke <kenneth@whitecape.org>

commit 0476c646fa44f017e47030afca0525bccf16a3ae
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Mon May 13 17:54:11 2013 -0300

    intel_chipset: Fix Haswell GT3 names.
    
    When publishing first HSW ids we weren't allowed to use "GT3" codname.
    But this is the correct codname and Mesa is using it already.
    So to avoid people getting confused why in Mesa it is called GT3 and here
    it is called GT2_PLUS let's fix this name in a standard and correct way.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>
    Reviewed-by: Kenneth Graunke <kenneth@whitecape.org>

commit f1e9e300fa82181182e2e92ccce078682829a3a2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 5 11:10:04 2013 +0100

    gem_lut_handle: Make the error checking explicit for LUT handling
    
    What this test is interested in is the handling of the LUT for very
    large arrays, irrespective of whether such batch are actually
    executable. So adjust the pass/fail checks to be explicit in the error
    they are looking for, so that we do not conflate memory/aperture
    pressure as a failure in the LUT API.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=65391
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2e1c11546a4aa69c1e774aaa653bb9d84552e133
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu May 30 08:37:48 2013 +0100

    gem_reg_read: Only check errno after a definite error
    
    As upon success, errno is invalid and may give spurious false results.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=65157
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1cb4f90946289457c3b92773f2ce96b0b03e4a22
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue May 28 17:35:32 2013 +0300

    tests/lib: make sure the GPU is idle at test start and exit
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=64270
    
    v2:
    - Make sure also that the GPU is idle at start and error exit of any
      test using drm_open_any(). (Daniel)
    v3:
    - actually call gem_quiescent_gpu() at exit
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a3b47dbe69deebcaf353876feaefa105136dad05
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue May 28 17:22:57 2013 +0300

    lib: make sure all rings are idle in gpu_quiescent_gpu()
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 55876338fa2bc37f632a8ca970b3573541cacc38
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu May 23 11:16:52 2013 -0700

    quick_dump: fix text file
    
    I accidentally pushed
    commit a08d62257dbdc8f4d3f5e655e0ba7bd192af37ff
    Author: Ben Widawsky <ben@bwidawsk.net>
    Date:   Thu May 23 11:03:25 2013 -0700
    
        quick_dump: Add CCID
    
    before I was ready, in order to get the mmio fix in. This fixes a parse
    error in quick_dump.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 57bc7631e161a7bdcf7f68e1a46049dcb49c2256
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu May 23 11:09:55 2013 -0700

    lib/intel_mmio: Fix the fix
    
    commit 16e44f5499e1754dfb10fc62b22675f5aa6ac781
    Author: Daniel Vetter <daniel.vetter@ffwll.ch>
    Date:   Wed Apr 3 00:22:41 2013 +0200
    
        lib: fixup register access on gen2/3
    
    THis fix was incorrect for a few reasons:
    1. It didn't reflect the state in mmio_data.safe
    2. It skipped forcewake on gen6+ which is both incorrect and
    unnecessary (for gen<6).
    3. It had 2 goto done, the second of which was impossible to hit.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit a08d62257dbdc8f4d3f5e655e0ba7bd192af37ff
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu May 23 11:03:25 2013 -0700

    quick_dump: Add CCID
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 81ba005381f06283e072a5a5cffd429c83651c53
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu May 23 12:11:26 2013 +0100

    list-workarounds: Don't prepend kernel_path to the driver directory
    
    We are changing the cwd, so we just need the relative patch from the
    root for the kernel git repo. This allows the script to work from
    anywhere.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 1109c5acfd58d6f5d7c4b0f1d9961fdc3bfc7732
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Wed May 22 16:15:04 2013 -0700

    quick_dump: Add basic haswell support
    
    Mostly using the IVB registers + a few I grabbed from i915_reg.h
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 099a92ea28d3bceffaebf7d65ae5a9219038ae0e
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Wed May 22 15:54:53 2013 -0700

    quick_dump: Add more ring registers
    
    START + CTL (and reorder them in the file)
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 160feafa2dc3616a0731f600919056ba62581bf6
Author: Matt Turner <mattst88@gmail.com>
Date:   Mon Apr 29 10:58:26 2013 -0700

    assembler: Add support for the SENDC instruction.
    
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>

commit 7fcd94b286dc7ef3dac362f97ce8f6de49b71735
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed May 22 17:40:48 2013 +0300

    kms_flip: add subtests for the DPMS OFF->modeset->flip sequence
    
    Add a double buffer and a single buffer version of the above sequence,
    to check if the modeset does a DPMS ON.
    
    Tested on IVB, with and without the relevant kernel fix, got the
    expected results.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 404f353394ab2e5b8ca55c519ba706ca7d33250c
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed May 22 17:40:47 2013 +0300

    kms_flip: do a DPMS ON when exiting with error
    
    Currently when exiting with error, we'll get stuck in a DPMS OFF state
    if the error happens while we have DPMS OFF set in the test sequence.
    This happens even though we switch back to text mode at exit. This might
    be a bug in itself to be fixed later, but in any case we want a working
    console, so do an explicit DPMS ON.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bce7d8a06133f1d92ca99acae23ff498552ad327
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed May 22 17:40:46 2013 +0300

    lib: export the exit handler interface
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4dec89aef746a60a98a1b93823e79b51a5a8a3c6
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed May 22 17:40:45 2013 +0300

    lib: fix exit handler when multiple handlers are registered
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0e8931925d725317d34bfbe0ba48b52b67ec7859
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Fri May 10 15:25:49 2013 -0700

    list-workarounds: Convert to python3
    
    The rest of the tool suite that uses python already uses python3.
    The tool configure requires python >= 3 (which is confusing because of
    the no backward compat problem).
    
    The world is slowly moving to python3.
    
    Converted with 2to3.
    
    Reviewed-by: Damien Lespiau <damien.lespiau@intel.com>
    Reviewed-by: Kenneth Graunke <kenneth@whitecape.org>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 397dcb745ec517eb116694575ac159242bc179bd
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri May 10 14:37:10 2013 +0100

    list-workarounds: Don't add an already present platform
    
    Currently if we come across several sites that say that a specific
    workaround is implemented for a platform, we just add the platform
    several times to the list. eg.
    
    WaFbcDisableDpfcClockGating: ivb, hsw, ivb, hsw
    
    This patch prevent that by only adding the plaform if it's not already
    there.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit eab0823e0e58c4a4ca09410a1aa22689b0de85d8
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri May 10 13:41:32 2013 +0100

    ddi_compute_wrpll: Do not use a double constant
    
    Otherwise the expression will be promoted to a floating point
    multiplication
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 3b793606421fda9ae6d58dfc253eba24edd944a3
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu May 2 16:38:30 2013 +0100

    ddi_compute_wrpll: Factor out a common expression
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 4897ac41da1bc14e4cc34c2914722a78dc977b5a
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu May 2 16:33:56 2013 +0100

    ddi_compute_wrpll: Rework the logic around r2 and n2 a bit
    
    Let's not use the 2K variants of the frequencies it does not help
    in anything here and the explanations are hopefuly more understandable
    this way.
    
    On top of that, I noticed that we can just compute the desired min/max
    boundaries for r2 and n2, so use that instead of the two tests to
    discard out of range values.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit bb1dfd5613256e516c86521cac806b4dd227b750
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu May 2 15:21:51 2013 +0100

    ddi_compute_wrpll: Fix the reference for 222525Khz and 296703Khz
    
    Assume that the budget for those frequencies were tuned after the
    reference table was created.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit a59b0cd01d84ba4df03b4442e2b336c3c073a549
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu May 2 15:11:49 2013 +0100

    ddi_compute_wrpll: Fix the reference table for 37762500Hz
    
    The 5 was lost when stored in KHz.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 8cf09e5ed4860d5d351588414bac0765e22b9b3f
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu May 2 14:51:41 2013 +0100

    ddi_compute_wrpll: Code the reference frequencies in Hz
    
    Because the reference frequencies were stored in KHz, we've lost
    precision for 37762500Hz and the test is failing. Let's express the
    reference frequencies in Hz then.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 0be2723c3045d04f6970add4214713af697e73df
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Apr 30 17:42:15 2013 +0100

    tools: Add a standalone tool to test the computation of r,n,p for WRPLLs
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 3d9beff623f26de2847f38650c2dbfdff5bf93a7
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu May 9 17:17:04 2013 +0200

    tests: fix script testlist
    
    Oops. This has been broken since:
    
    commit d798ab9c2a092a08e14c6f2dfb1777376ba407a8
    Author: Daniel Vetter <daniel.vetter@ffwll.ch>
    Date:   Tue Dec 18 22:55:58 2012 +0100
    
        tests: add testcase to check igt runtime enviroment

commit 01b408e43a50415c8d979c52c1b732785c1327ea
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed May 8 19:06:44 2013 +0300

    testdisplay: set VT graphics mode
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0009a4af3d76ada8df86ec012736792d0543fb08
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed May 8 19:06:43 2013 +0300

    kms_flip: set VT graphics mode
    
    This is one reason for some of the sporadic kms_flip failures.
    One such is https://bugs.freedesktop.org/show_bug.cgi?id=59834.
    
    v2:
    - use unsigned long for KDSETMODE/KDGETMODE
    - fix passing the parameter to KDGETMODE as it should be by value
    - actually testing that it works..
    
    v3:
    - don't do an explicit DPMS_ON, only switch to graphics mode.
    
    v4:
    - use the newly added drmtest_set_vt_graphics_mode(), which will also
      take care of restoring the original mode. (Daniel)
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cf26435be80232a30de918f6b231ffb7e3b30ee4
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed May 8 19:06:42 2013 +0300

    lib: add helper to set VT graphics mode
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d2f7a66fee4fa5e3b011866c0dcb30d77f20d4e5
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed May 8 19:06:41 2013 +0300

    kms_flip: suppress uninitialized var warning
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cc6c254ae91bf633ac0ff5851ba2593ded13ec45
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Apr 29 19:05:27 2013 +0100

    reg_dumper: Shut a warning down
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 6587f66ff3fcddca443e4ed9da7f58c54d2401a5
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Apr 29 18:57:47 2013 +0100

    lib: Add the declaration of intel_register_access_needs_fakewake()
    
    Otherwise gcc complains that the function hasn't been declared.

commit ec3e7a66f0511a7089d87b63d09d3371a52e3156
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Apr 29 15:51:59 2013 +0100

    Update .gitignore files with the new tests and tools
    
    Also sort them.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit f5f6036bbea88e652ace24ad8e81173877bffa70
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Apr 29 14:53:07 2013 +0100

    lib: Remove the execution bit of intel_chipset.h

commit 6a82b68e3689e5a5d67fa39aaa0dcf97cb632107
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Mar 26 15:14:56 2013 +0000

    build: Make grep silent when running make test
    
    -q will prevent grep from writing to stdout and print "root" when make
    test is running as root.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 7e9fd56873aba26a196c18d233d8ea40a9f0eac3
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Mar 25 17:15:50 2013 +0000

    README: Reword a few sentences
    
    To be a bit more correct (they were understandable though).
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit b9765af636510fe0896c8e1648a4cd003cd91ca1
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri May 3 16:08:25 2013 +0100

    scripts: Add a script to list implemented workarounds
    
    We document the implemented workarounds with
    
      workaround_name:platforms
    
    with platforms being a comma separated list of 3-letters platform names.
    
    This scripts gather those tags and output a summary of implemented work
    arounds. Example usages:
    
    $ ./scripts/list-workarounds ~/gfx/sources/linux-2.6/
    WaApplyL3ControlAndL3ChickenMode: hsw, ivb, vlv
    WaCatErrorRejectionIssue: hsw, ivb, vlv
    WaDisable4x2SubspanOptimization: hsw, ivb
    WaDisableBackToBackFlipFix: ivb, vlv
    WaDisableDopClockGating: vlv
    ....
    
    $ ./scripts/list-workarounds ~/gfx/sources/linux-2.6/ -p ivb
    WaApplyL3ControlAndL3ChickenMode
    WaCatErrorRejectionIssue
    WaDisable4x2SubspanOptimization
    WaDisableBackToBackFlipFix
    WaDisableEarlyCull
    ...
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit a417ef7cc8ebe01a3198849db8cf9e6896c54a0b
Author: Zhong Li <zhong.li@intel.com>
Date:   Fri May 3 15:55:34 2013 +0800

    i-g-t: gem_dummy_reloc_loop.c: add vebox test case
    
    Aside from adding VEBOX support, this test allows allows the "mixed"
    test case variant to work on platforms that have 2 rings which was
    previously not the case. To the best of my memory, this might therefore
    impact G45, and Ironlake.
    
    Signed-off-by: Zhong Li <zhong.li@intel.com>
    [Ben: added commit message, remove num_rings = 1, s/LOCACL/LOCAL]
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 8ddf84d1295925a831f4e37a33308aa7cb3c0e94
Author: Zhong Li <zhong.li@intel.com>
Date:   Fri May 3 15:54:48 2013 +0800

    i-g-t: check kernel enable rings or not
    
    1. add functions check kernel enable a ring or not.
    2. add function gem_get_num_rings() to check how many rings kernel has
    enable.
    3. gem_ring_sync_loop.c will call gem_get_num_rings() directly instead
    of original static fucntion get_number_rings().
    
    Signed-off-by: Zhong Li <zhong.li@intel.com>
    [Ben: Wrapped commit message + whitespace fixes]
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 53d251ac23d8a3f5c4d0144794788a1423a5fa14
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu May 2 08:10:15 2013 +0200

    tests/prime_udl: don't put dirt into stderr when skipping
    
    It upset's QA's test runner.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bafbbf1cc8663fa192c57152f2c13a81e68f9089
Author: Zhong Li <zhong.li@intel.com>
Date:   Tue Apr 23 15:06:45 2013 +0800

    gem_exec_nop.c: add vebox test case
    
    v2 (Ben):
    Fixed whitespace,
    s/HAS_BLT_RING/gem_has_vebox/
    s/I915_EXEC_VEBOX/LOCAL_I915_EXEC_VEBOX
    
    Signed-off-by: Zhong Li <zhong.li@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 21e7e342c14a69d62a24a9bce89b66c3ef0fd208
Author: Zhong Li <zhong.li@intel.com>
Date:   Tue Apr 23 15:06:44 2013 +0800

    gem_cs_tlb.c: add vebox test case
    
    v2 (Ben):
    Fixed whitespace,
    s/HAS_BLT_RING/gem_has_vebox/
    s/I915_EXEC_VEBOX/LOCAL_I915_EXEC_VEBOX
    
    Signed-off-by: Zhong Li <zhong.li@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit b6fa628db0459c4a6b5946527570879a0c551898
Author: Zhong Li <zhong.li@intel.com>
Date:   Tue Apr 23 15:06:48 2013 +0800

    gem_ring_sync_loop.c: fix an operator error
    
    Signed-off-by: Zhong Li <zhong.li@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 8be812b86c1a6d03822bf788c05f38abb531cc0d
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Fri Apr 26 14:26:48 2013 -0700

    intel_mmio: Add intel_register_access_needs_fakewake
    
    I screwed this up in my recent patch:
    commit c7b6ec50007e2e524a208572c34faf1380eeab1b
    Author: Ben Widawsky <ben@bwidawsk.net>
    Date:   Wed Apr 24 19:05:18 2013 -0700
    
        clean warnings: Silence unused (or private) functions
    
    I've clarified the functions now, and added the proper call from the
    python script.
    
    Time to get a regression tester for our tools?
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 2facc1368d5af8417e240f68153cecdfb5dc731a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 26 08:30:04 2013 +0100

    Check for vebox support before testing
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=63941

commit cae610a2e5ab137229c666f435b7bcb4a67a423e
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Thu Apr 25 15:18:19 2013 -0700

    fix breakage from newly used functions vs rebase

commit d6917cf72d823cc478f4ad8c21386e65ab503328
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Thu Apr 25 14:43:03 2013 -0700

    add punit and nc read/write tools for vlv
    
    Good for testing/debugging.

commit c7b6ec50007e2e524a208572c34faf1380eeab1b
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Wed Apr 24 19:05:18 2013 -0700

    clean warnings: Silence unused (or private) functions
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit cf73a1f241542dadb49ae2c6d491c725218a68e8
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Wed Apr 24 18:50:01 2013 -0700

    gem_storedw_loop_vebox: Modernize test to look like blitter
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 96baf59f3edd64117f8e90926b4af0b50cd89e21
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Tue Apr 23 15:06:43 2013 +0800

    tests: storedw on VEBOX
    
    v2 (Ben): Define LOCAL_I915_EXEC_VEBOX
    Small copyright fixes
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>
    Signed-off-by: Zhong Li <zhong.li@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit f187990bbf4396c7ae1796030377301bdd493852
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Tue Apr 23 15:06:42 2013 +0800

    gem_ring_sync_loop: test the new ring
    
    The code is surround by a #ifdef...#endif to avoid to break compiling against
    the current libdrm release
    
    v2 (Ben): Use VEBOX get param. Thankfully Daniel let us carve this out
    way back when.
    Spacing cleanups
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>
    Signed-off-by: Zhong Li <zhong.li@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 0a413cd8a935744c1abf3c4ee3d95698dd68ca93
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Tue Apr 23 15:06:41 2013 +0800

    gem_ring_sync_loop: check the rings supported by the kernel
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>
    Signed-off-by: Zhong Li <zhong.li@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit afeb43190e705c91565d92f93afc33aaca4a7bd3
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Mon Apr 22 11:36:03 2013 -0700

    intel_error_decode: HEAD stuff
    
    Show the decoded HEAD value, as well as print the calculated head offset
    per ringbuffer.
    
    This will be superceded in the next commit, but that patch is way more
    complicated than this one (read: error prone), so I want this here.
    
    Example:
    ringbuffer (blitter ring) at 0x00044000; HEAD points to: 0x00044950
    
    v2: Actually make it work for all rings.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 155aa1e1fa18b2d6665cb48b073af73bc86850e6
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Mon Apr 22 11:07:35 2013 -0700

    intel_error_decode: Whitespacing fix
    
    The rest of igt has moved to kernel coding style. People had already
    been not conforming with the existing formatting in error decode, so we
    may as well fix it.
    
    This addresses two primary issues, tabbing (remove spaces), and space
    after function in function call. I may have missed some of the latter
    since that was done by hand.
    
    I have upcoming work in this file, and it was annoying me.
    
    v2: Fix case alignment (Chris)
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 70afbead463fd0b5c9af29ebd7a169d316364c29
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed Apr 17 23:18:02 2013 +0300

    tests/prime_self_import: add subtest to export/import a second gem buffer
    
    Also add a subtest for the fd=handle_to_fd(), fd2=dup(fd), close(fd)
    case (idea from Kristian Høgsberg).
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    
    v2:
    - add a new subtest instead of modifying the original test (Daniel)
    - add a new subtest for testing dup (Kristian)
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6f0d8b011e412d9dfb03c87d58d9b30440058ca5
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Tue Apr 16 23:09:25 2013 -0700

    quick_dump: Add dpio read
    
    The sample usage is in reg_access.dpio_read(). We should add some
    semantics to the text files to detect DPIO registers, and do the right
    thing.
    
    Cc: Jesse Barnes <jbarnes@virtuousgeek.org>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>
    Reviewed-by: Jesse Barnes <jbarnes@virtuousgeek.org>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a59b0ee5d403630152fd720cd9dde2846424bd8a
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Feb 21 22:05:36 2013 -0800

    reg_access: Forcewake as necessary
    
    Don't try to be smart. Just poke all forcewake bits if it seems we need
    it.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 67ed990604254af6a2cb3aa4d128dabb7714f3e2
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Feb 21 22:05:35 2013 -0800

    quick_dump: add register write
    
    Since there is no command line support, just do a pure integer version
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit f60dd5153500514baba060857e115e6c0d3e1617
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Feb 21 22:05:34 2013 -0800

    intel_mmio: a query for forcewake requirement
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 8904d29416e784f7ba0fb74455505fc251dd894f
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Feb 21 22:05:33 2013 -0800

    intel_mmio: Allow mmio without debugfs
    
    With the introduction of the forcewake dance:
    
    commit cac8f8b52621f246a7cff412f340a7db28cb1b99
    Author: Ben Widawsky <ben@bwidawsk.net>
    Date:   Thu Jul 28 13:40:19 2011 -0700
    
        forcewake: Add mmio code to do proper forcewake stuff for gen6
    
    We lost the ability to do register access when either debugfs isn't
    mounted, or when the driver isn't loaded. The latter can be beneficial
    in debugging situations.
    
    This patch will allow the driver to still do mmio (leaving forcewake
    management up to the callers) provided that the i915 driver appears to
    not be loaded (according to sysfs)
    
    Requested by Jesse.
    
    Cc: Jesse Barnes <jbarnes@virtuousgeek.org>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit ec107b019435ab49e8454664368bf1187f3d0273
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Feb 21 22:05:32 2013 -0800

    quick_dump: say something when reg init fails
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 0b7da0afb10b3ebfd8615d7b3e50bde013aa2b0a
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Tue Apr 16 13:16:31 2013 -0700

    fixup VLV reg offsets, add a few more

commit 25339595a764c0b50516b7db60fd117128a6c8bc
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Tue Apr 16 13:14:58 2013 -0700

    add VLV punit & north cluster read tools

commit 2fe3f76c255b08f4b462fc64be12d5e4ac7b37cd
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Thu Apr 11 20:43:40 2013 +0300

    tests/gem_fenced_exec_thrash: Test with > max fences
    
    Make sure the kernel returns EDEADLK when the number of fences is
    exceeded for gen2-3. For gen4+ the test makes sure the kernel ignores
    the EXEC_OBJECT_NEEDS_FENCE flag.
    
    Note that I changed the code not to round the num_fences to an even
    number. Not sure why that was there, and if there's a reason for it,
    we need to add it back.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a7ca33b673ee90b0a93ffdb18449256798f67786
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Thu Apr 11 16:11:28 2013 +0300

    tests/gem_seqno_wrap: verify debugfs write with readback
    
    Make sure that debugfs entry works as expected by reading
    back the sequence number that was written.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 918e763e2dd474a58c43c145c10e7f3aa4ec9a39
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Apr 9 17:45:37 2013 +0300

    tests/gem_tiling_max_stride: Add a test for max fence stride
    
    gem_tiling_max_stride writes a data pattern to an X-tiled buffer using
    the maximum supported stride, reads the data back as linear, and
    verifies that the data didn't get scrambled on the way.
    
    The test also checks that some invalid stride values are rejected
    properly.
    
    v2: Check invalid strides
    v3: Check invalid stride with Y-tiling
        Include a few more invalid stride values
        Fix gen3 X-tile size
    v4: A few more invalid strides :)
        Drop the useless memset()
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Reviewed-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1d1f68316f420d8e174d3f16655f6be1549cd74c
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Apr 9 15:25:38 2013 +0300

    tests: Use gem_available_fences()
    
    lib/drmtest.c provides gem_available_fences(). Use it where
    appropriate.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e37eb35e194de8fe1f244df085b8b8d2c530ce20
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Apr 9 15:25:37 2013 +0300

    tests/gem_fenced_exec_thrash: Increase MAX_FENCES to 32
    
    IVB+ supports 32 fence registers, bump the maximum in the test.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b0c63a781dd597288c3a240b10996f4b313cbbd4
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Apr 4 14:33:59 2013 -0300

    intel_reg_dumper: improve the dumping of backlight registers
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit d6dd0bcb1c99cc7be5819851565128f5dc6651f0
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Mon Apr 8 10:50:57 2013 -0700

    m4: Updates to ax_python_devel.m4
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 0a8bfbf7476d845b2136b6e7f9360cd3fbe6d426
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Apr 8 09:19:05 2013 +0200

    tests/gem_fence_trash: make threaded tests more through-rough
    
    With this at least the y-tiled test reliably fails on my machines, but
    x-tiled still passes on some. More ideas to tune this highly welcome.
    
    v2: Fill cpu caches with data for each newly allocated bo. This seems
    to do the trick on my snb here _really_ reliably. So apparently the
    backsnoop for llc gtt writes is the crucial ingredient here to make
    the test fail.
    
    While at it, also stop leaking mmap space.
    
    v3: Fixup commit message.
    
    Cc: Mika Kuoppala <mika.kuoppala@linux.intel.com>
    Cc: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cb3a44fa2691e0a642b150373b5fd9d0f554a7ce
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Apr 8 00:31:06 2013 +0200

    lib/drmtest: tune down signal handler stats
    
    Avoids tests with a spurious WARN result in piglit.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1677c2129113adfd7cda766548b09e0bfec10b3e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Apr 6 18:29:37 2013 +0200

    tests/kms_flip: don't leak gpu hang state
    
    We need to clear out the error_state. While at it also make sure that
    the hang was indeed detected.
    
    Whoever writes the next test to race against gpu hangs should probably
    extract these two functions into the drmtest library. Which just one
    user that's not really worth it right now.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c97a45ff098ba1e9772b5d1ebeedf52ec2b64652
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Apr 4 11:36:27 2013 +0200

    tests/prime_udl: skip harder
    
    I fail.

commit d16dd3a0f896d7d7060427a4547d19472a0ea492
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Apr 4 11:06:37 2013 +0200

    tests/prime_udl: proper return values
    
    ... especially skip properly if there's no udl device.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 16e44f5499e1754dfb10fc62b22675f5aa6ac781
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Apr 3 00:22:41 2013 +0200

    lib: fixup register access on gen2/3
    
    This wreaked havoc with intel_reg_dumper since it's been broken in
    
    commit c6fe31bc473a7ae44bc42bad7da5faca3c924821
    Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
    Date:   Thu Jun 21 14:31:34 2012 -0300
    
        intel_reg_dumper: use intel_register_access_init/fini
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 74f6e413d3cba0e95d1233c71e119ff50cd406d2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 27 11:32:47 2013 +0000

    gem_fence_thrash: Fix array allocation size for LP64 systems

commit 43a086269795c5b41bdab0dc2c456be0de97e762
Author: Kenneth Graunke <kenneth@whitecape.org>
Date:   Tue Mar 26 22:06:39 2013 -0700

    intel_perf_counters: Add support for Sandybridge.
    
    While the Sandybridge PRM doesn't have any documentation on the GPU's
    performance counters, a lot of information can be gleaned from the older
    Ironlake PRM.  Oddly, none of the information documented there actually
    appears to apply to Ironlake.  However, it apparently works just great
    on Sandybridge.
    
    Since this information has all been publicly available on the internet
    for around three years, we can use it.
    
    Signed-off-by: Kenneth Graunke <kenneth@whitecape.org>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0811556747ce861730d8eb310860080b8840e202
Author: Kenneth Graunke <kenneth@whitecape.org>
Date:   Tue Mar 26 22:06:38 2013 -0700

    intel_perf_counters: Abstract out Ironlake-specific code.
    
    We want to support this tool on more platforms.  This lays the
    groundwork for making that possible.
    
    Signed-off-by: Kenneth Graunke <kenneth@whitecape.org>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 85667f4f7d698ba994af32a65b1393d54b8d8784
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Mar 26 22:06:37 2013 -0700

    intel_perf_counters: a little tool for dumping performance counters.
    
    This reads the GPU's performance counters via MI_REPORT_PERF_COUNT and
    prints them in a top-style interface.  While it can be useful in and of
    itself, it also documents the performance counters and lets us verify
    that they're working.
    
    Currently, it only supports Ironlake.
    
    v2 [Ken]: Rebase on master and fix compilation failures; make it abort
    on non-Ironlake platforms to avoid GPU hangs; rename from 'chaps' to
    intel_perf_counters since that acronym isn't used any longer; write the
    above commit message.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9535fed171386713dba1147fb9e76f7310a6bc3f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 27 12:26:46 2013 +0100

    tests/Makefile.am: gem_fence_trash has grown subtests
    
    Need to move it to the right make target now!
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ee79b8fccd64218fb8218d1c281ff34db1724e87
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Wed Mar 27 12:48:07 2013 +0200

    tests: add write-verify test to gem_fence_thrash
    
    Add write-verify test to gem_fence_thrash. Test will create
    multiple threads per fence then verify the write into fenced region.
    
    v2: non-threaded, non-tiled tests added. suggested by Chris Wilson.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7253eb4e4f875777104e24454b2216d17655cae1
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Mar 22 14:28:24 2013 -0300

    intel_reg_dumper: debug SDEISR on Haswell
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 1043b22bb02ddb37e3abbcc2108c6ebe03eeb9f0
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Mar 1 17:32:34 2013 -0300

    lib: fix HAS_PCH_SPLIT check
    
    So HAS_PCH_SPLIT on't be true on VLV.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 051e327247dbfeb4671fd5ece48e64aa52b7b835
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Mar 1 17:12:29 2013 -0300

    intel_reg_dumper: dump HSW watermark registers
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit eb88ce64b7266b0593904b84c8fcaac5c59d0260
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Mar 1 16:55:22 2013 -0300

    intel_reg_dumper: decode some useful Haswell registers
    
    I've checked the value of these registers many many many times during
    development.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 5c0ce0f2a9d7957b45bac3cfbab6a003a024cb9c
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Mar 1 15:46:25 2013 -0300

    intel_reg_dumper: make Haswell dump useful
    
    It was previously printing ironlake_debug_regs and haswell_debug_regs.
    Since ironlake_debug_regs contains a lot of registers that don't exist
    on Haswell, running intel_reg_dumper on Haswell caused "unclaimed
    register" messages. Now I've copied the existing registers from
    ironlake_debug_regs to haswell_debug_regs, so we won't print the
    registers that don't exist anymore.
    
    Also removed DP_TP_STATUS_A since it doesn't exist.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 2fadf695ff54f282d88ced849d260de8cd201b15
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Mar 1 13:53:40 2013 -0300

    intel_reg_dumper: recognize LPT
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit 29abdb96dca554858b86e6fe3c1e69ea4aecc521
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Mar 1 13:30:46 2013 -0300

    lib: detect PCH_LPT and PCH_NONE
    
    So we don't assign PCH_IBX to anything that's not PCH_CPT nor PCH_LPT.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit c3bfd738c71b2821fcdc5c769c088578d84dc0a1
Author: Kees Cook <keescook@chromium.org>
Date:   Fri Mar 15 11:09:07 2013 -0700

    tests: add gem_reloc_overflow to check wrapping
    
    This adds a test to make sure that the execbuffer validation routine is
    checking for invalid addresses, single entry overflow, and multi-entry
    wrapping overflow.
    
    Signed-off-by: Kees Cook <keescook@chromium.org>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7da0af8855c1ecf075dc6019d9b711d969219722
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Mar 4 15:34:07 2013 +0200

    kms_flip: Don't access freed data
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 069e35e0fc3785faa562adcfd2dd7bbed4cb1dea
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Mar 4 15:34:06 2013 +0200

    kms_flip: Add flip-vs-bad-tiling test
    
    flip-vs-bad-tiling tests that page flipping to a Y-tiled buffer returns
    an error correctly, rather than triggering kernel BUG for instance.
    
    Create a third fb for this purpose. After the fb has been created,
    change its tiling mode to Y. When performing a flip, target this
    Y-tiled fb and make sure we get the expected error value.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7ab8e53b5d44812d796e2e964dd084fe6692491c
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Feb 15 17:10:47 2013 +0200

    kms_flip: Add a flip-vs-panning-vs-hang test
    
    The flip-vs-panning-vs-hang is just like the regular flip-vs-panning
    test, except it also hangs the GPU. This will test whether panning
    works after a pending page flip has been cancelled by a GPU reset,
    and also whether page flip events get delivered correctly.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1f5957c64ea5c28d785e60e36adaf2a507665b02
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Fri Feb 15 17:10:46 2013 +0200

    kms_flip: Split the "no events" logic into a separate flag
    
    Do not use the TEST_HANG flag to determine whether page flip events are
    used. Add a new TEST_NOEVENT flag that can be used to disable the use
    of events instead.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c6c6f0f5937da94c0efb70bbd56d72bba1dc0f96
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Mar 21 16:19:36 2013 +0000

    lib: Add a comment about why we only parse long options for subtests
    
    For thet next one wondering about that.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 764b9e503e83d7ad9d7f7dae61ab24763b7cac9c
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Mar 4 15:59:00 2013 +0000

    build: Fix typo if the test setting enable_debugger
    
    Of course, a 'x' need to be inserted there.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 45919917697572214106d0f996d9ef5b33901600
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Feb 4 13:57:48 2013 +0000

    assembler: Mark format() as PRINTFLIKE in the disassembler
    
    So when making changes in code using that function, we get warnings
    about mismatches between the format string and arguments.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 92262e1ff8c1b2d68b910adcadafe24761469d10
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Feb 4 12:23:57 2013 +0000

    assembler: Fix the decoding of the destination horizontal stride
    
    dest_horizontal_stride needs go through the horiz_stride[] indirection
    to pick up the rigth stride when its value is 11b (4 elements).
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit d9afa5bfeac435dcfded66908b49fd342a007312
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Feb 4 12:12:29 2013 +0000

    assembler: Group the header inclusions together
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit f0365d40b4e83d13c1865d48e571271737a58c65
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Feb 4 12:02:18 2013 +0000

    assembler: Don't use GL types
    
    sed -i -e 's/GLuint/unsigned/g' -e 's/GLint/int/g' \
           -e 's/GLfloat/float/g' -e 's/GLubyte/uint8_t/g' \
           -e 's/GLshort/int16_t/g' assembler/*.[ch]
    
    Drop the GL types here, they don't bring anything to the table. For
    instance, GLuint has no guarantee to be 32 bits, so it does not make too
    much sense to use it in structure describing hardware tables and
    opcodes.
    
    Of course, some bikeshedding can be applied to use uin32_t instead, I
    figured that some of the GLuint are used without size constraints, so
    a sed with uint32_t did not seem the right thing to do. On top of that
    initial sed, one bothered enough could change the structures with size
    constraints to actually use uint32_t.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 2d8b92a24b2d6aebe2ced1f014b6c3129f86b91c
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Feb 1 14:54:46 2013 +0000

    assembler: Remove trailing white space
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 2f502bcaaa06419b8a8cfb328d2fbd8dc982f771
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Feb 1 14:09:41 2013 +0000

    assembler: Use defines for width
    
    Instead of just using hardcoded numbers or resorting to ffs().
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 2de8b40c4820a1159aa46ba683ab0849ada3efa5
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Feb 1 13:59:32 2013 +0000

    assembler: Merge declared_register's type into the reg structure
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 45d87d7f0bf8e1be1fedd386b97a70b6b9505e5f
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Feb 1 13:29:48 2013 +0000

    assembler: Finish importing brw_eu_*c from mesa
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit fa2b679cc926add04c22c1e5ffb32bf9d9bd8584
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jan 31 18:22:49 2013 +0000

    assembler: Use set_instruction_src1() in send
    
    No reason not to!
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 28ff66a13c9dcc7aeb7bcff8d173495ee53deef9
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jan 31 14:28:00 2013 +0000

    assembler: Put struct opcode_desc back in brw_context.h
    
    I originally moved struct opcode_desc from brw_context.h to brw_eu.h on
    the mesa side, but that was before the realization we needed struct
    brw_context if we wanted to not touch the code too much.
    
    So put it back there now that the mesa patch has been dropped.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit e75faa3e43360995354683987c42e02b5ca16b19
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jan 31 14:25:42 2013 +0000

    assembler: Don't pollute the library files with gen4asm.h
    
    gen4asm.h is assembler specific while we want the library files to be
    somewhat of a proper library.
    
    This means that we have to redefine the GL* typedefs for brw_structs.h,
    not using any of thet GL typedef will be for a future commit.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 26da375471edfa02b5558e6a29470dc2adcdcfa6
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jan 31 01:28:15 2013 +0000

    assembler: Use brw_*() functions for 3-src instructions
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 67f3f949bfaf0eefda22fb03f0eed827053c4247
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jan 31 01:27:36 2013 +0000

    assembler: Add support for D and UD in 3-src instructions
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit a2a6583518682442865b683a1e48ec83c46ed100
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jan 31 00:53:46 2013 +0000

    assembler: Expose setters for 3src operands
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 49861a03b6b3c9316ca329dba231623e64930816
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jan 31 00:26:51 2013 +0000

    assembler: Introduce set_instruction_saturate()
    
    Also simplify the logic that was setting the saturate bit in the math
    instruction.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit b21c2e60e9d9c3a2a8482d77a7f7e29f997d7dda
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jan 31 00:18:47 2013 +0000

    assembler: Introduce set_intruction_pred_cond()
    
    This allow us to factor out the test that checks if, when using both
    predicates and conditional modifiers, we are using the same flag
    register.
    
    Also get rid of of a FIXME that we are now dealing with (the warning
    mentioned above).
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 5d526c8317fb6f0fc7741ff558cbb9dcd0fdfc6e
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jan 30 23:39:09 2013 +0000

    assembler: Introduce set_instruction_opcode()
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 6bf3aa84e0c608ae4c628c6215694d70245da53e
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jan 30 23:25:19 2013 +0000

    assembler: Isolate all the options in their own structure
    
    Like with the predicate fields before, there's no need to use the full
    instruction to collect the list of options. This allows us to decouple
    the list of options from a specific instruction encoding.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit bca2ff2a0229c6ddf29221fee71b45a12e941640
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jan 30 23:00:26 2013 +0000

    assembler: Unify adding options to the header
    
    Right now we have duplicated code for when the option is the last in the
    list or not. Put that code in a common function.
    
    Interestingly it appears that both sides haven't been kept in sync and
    that EOT and ACCWRCTRL had limitations on where they had to be in the
    option list. It's fixed now!
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit dfe6adacc923336fa1e98b781ff67abaada29b95
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jan 30 22:32:07 2013 +0000

    assembler: Gather all predicate data in its own structure
    
    Rather than user a full instruction for that. Also use
    set_instruction_predicate() for a case that coud not be done like that
    before the refactoring (because everyone now uses the same instruction
    structure).
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 9b78f74f23aee082fe6e2e5686b6325b1f942288
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jan 30 17:09:17 2013 +0000

    assembler: Move struct relocation out of relocatable instructions
    
    Now that all instructions (relocatable or not) are struct
    brw_program_instructions, this means we can move the relocation specific
    information out the "relocatable instruction" structure. This will allow
    us to share the relocation information between different types of
    instructions.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit f6e9052e8d62606c3a89c2e6f138a66a003854ae
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jan 30 17:04:13 2013 +0000

    assembler: Unify all instructions to be brw_program_instructions
    
    Time to finally unify all instructions on the same structure.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit d008064b3ef6a85181a61e97f51a9b4c9319ddc8
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jan 30 12:31:45 2013 +0000

    assembler: Renamed the instruction field to insn
    
    This will be less typing for the refactoring to come (which is use
    struct brw_program_instruction in gram.y for the type of all the
    instructions).
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 888b2dcae60cb2db0eb95adddfd894f58dc6dc89
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jan 28 15:29:26 2013 +0000

    assembler: Use brw_set_src1()
    
    Everything is now aligned to be able to use brw_set_src1() in the
    opcode generation, so use it.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit d3a2a678d51ca23ca72aa2e066642ccce5abc0ff
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jan 28 15:27:59 2013 +0000

    assembler: Implement register-indirect addressing mode in brw_set_src1()
    
    The assembler allows people to do that and that's something available
    since Crestline.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 8eb30d9493690471ad04953b609dfe7da35352d7
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sun Jan 27 11:23:38 2013 +0000

    assembler: Fix ')' placement in condition
    
    A small typo in the condition.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 1d53e1813e2519c966a527efc20a1b5795f25b60
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sun Jan 27 11:05:50 2013 +0000

    assembler: Cleanup visibility of a few global variables/functions
    
    Not everything has to be exported out the compilation unit. Do a small
    cleanup pass.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 6d3d36953549afed7ebc9afe5e26f133173d835d
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sun Jan 27 10:41:23 2013 +0000

    assembler: Port the warning and error reporting to warn()/error()
    
    This way we ensure to have a single place where these are handled. The
    immediate benefit is that now line numbers are always printed out, which
    is quite handy.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit e7cca1a3cafb2f33b4ae94afb9a11dd01085b23d
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sun Jan 27 02:06:22 2013 +0000

    assembler: Use brw_set_src0()
    
    Unfortunately, it's all a walk in the park. Both, internal code in the
    assembler and external shaders (libva) generate registers that trigger
    assertions in brw_eu_emit.c's brw_validate().
    
    To fix all that I took the option to be able to emit warning with the -W
    flag but still make the assembler generate the same opcodes.
    
    We can fix all this, but it requires validation, something that I cannot
    do right now.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 1eb622a8477e1e850bbd7d6a1ff500a3b4eb4181
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sun Jan 27 01:32:52 2013 +0000

    assembler: Add the input filename to the error/warning messages
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 95b12082d272699ade246f625d4fa231c3ae5204
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jan 26 23:55:01 2013 +0000

    assembler: Add a check for when ExecSize and width are 1
    
    Another check (that we hit if we try to use brw_set_src0()). Again,
    protect it with the -W option.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit d70e9f824f6f837614bbc2714c5ccc5f77d2c539
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jan 26 23:09:42 2013 +0000

    assembler: Add a check for when width is 1 and hstride is not 0
    
    The list of region restrictions in bspec do say that we can't have:
         width == 1 && hstrize != 0
    
    We do have plenty of assembly code that don't respect that behaviour. So
    let's hide the warning under a -W flag (for now) while we fix things.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit e9172aa22538216cd434c700d78915ec06142238
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jan 26 22:44:45 2013 +0000

    assembler: Add error() and warn() shorthands and use them in set_src[01]
    
    Now that we have locations, we can write error() and warn() functions
    giving more information about where it's going wrong.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit d94e8a6cf0952e0a905699a47a50e57181fb414f
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jan 26 19:51:28 2013 +0000

    assembler: Add location support
    
    Let's generate location information about the tokens we are parsing.
    This can be used to give accurate location when reporting errors and
    warnings.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 574a249142f0b3140bda599326e581bb36b328da
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jan 26 18:26:03 2013 +0000

    assembler: Don't warn if identical declared registers are redefined
    
    There's no real need to warn when the same register is declared twice.
    Currently the libva driver does do that and this warning makes other
    errors really hide in a sea of warnings.
    
    Redefining a register with different parameters is a real error though,
    so we should not allow that and error out in that case.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 9c72beb70123050db74281bb5f9e5250bb800491
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jan 25 15:48:58 2013 +0000

    assembler: Store immediate values in reg.dw1.ud
    
    Another step in pushing the parsing in struct brw_reg.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 103edccd9b1a660d82eb40cffd2d6f5b17d5f752
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jan 25 15:13:30 2013 +0000

    assembler: Fix comparisons between reg.type and Architecture registers
    
    Of course the assertion is there to make sure GRF and MRF have a reg.nr
    < 128. To exclude ARF registers, reg.file has be checked, not reg.type
    (channel type). Most likely a typo never caught.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 6e83eb66b1a8c32b7ecfa212c831b46ef3da996f
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jan 25 15:12:12 2013 +0000

    assembler: ExecSize can be as big as 32 channels
    
    See the IVB PRM, vol4 part3 5.2.3.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit c0592b2882c5bc6f08983d054e51f28f9c8ebdf9
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jan 24 18:32:20 2013 +0000

    assembler: Factor out the source register validation
    
    The goal is to use brw_set_src[01](), so let's start by validating the
    register we have before generating the opcode.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 9fcc1bdcad1a993d4681673d96443991d0c3bac4
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jan 24 16:16:35 2013 +0000

    assembler: Use brw_set_dest() to encode the destination
    
    A few notes:
    
    I needed to introduce a brw context and compile structs. These are only
    used to get which generation we are compiling code for, but eventually
    we can use more of the infrastructure.
    
    brw_set_dest() uses the destination register width to program the
    instruction execution size.
    
    The assembler can either take subnr in bytes or in number of elements,
    so we need a resolve step when setting a brw_reg.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 5e0da9f854fea552cbc73f07a2e86a370f35aa92
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Thu Jan 24 12:21:13 2013 +0000

    assembler: Factor out the destination register validation
    
    The goal is to use brw_set_dest(), so let's start by validating the
    register we have before generating the opcode.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 9d5a87a096a71a7c689437fdd25f2c8eb260625c
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jan 23 22:29:23 2013 +0000

    assembler: Use brw_reg in the source operand
    
    Last refactoring step in transition to struct brw_reg.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit c13613ea2df3a021263dc9c0514f940658024eb3
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jan 23 21:46:21 2013 +0000

    assembler: Get rid of src operand's swizzle_set
    
    swizzle_set can be derived from the value of swizzle itself, no need for
    that field.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit a82722b60f9d4508a1ba41bff53a4d7cb3b49437
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jan 23 21:35:10 2013 +0000

    assembler: Consolidate the swizzling configuration on 8 bits
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 0375073f0529f894d89d3de2f67799ce9312fc16
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jan 23 20:33:00 2013 +0000

    assembler: Replace struct dst_operand by struct brw_reg
    
    One more step on the road to replacing all register-like structures by
    struct brw_reg.
    
    Two things in this commit are worth noting:
    
    * As we are using more and more brw_reg, a lot of the field-by-field
      assignments can be replaced by 1 assignment which results is a
      reduction of code
    
    * As the destination horizontal stride is now stored on 2 bits in
      brw_reg, it's not possible to defer the handling of DEFAULT_DSTREGION
      (aka (int)-1) when setting the destination operand. It has to be done
      when parsing the region and resolve_dst_region() is a helper for that
      task.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 801b4eb1b3ea52f81587a30f3cdcff8affe9ab72
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jan 23 16:20:05 2013 +0000

    assembler: Unify the direct and indirect register type
    
    They are all struct brw_reg registers now.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 36f8f65aa06bfbd3785bb43bc9c646b6769b1be2
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jan 23 16:17:28 2013 +0000

    assembler: Replace struct indirect_reg by struct brw_reg
    
    More code simplification can be layered on top of that (by using some
    brw_* helpers to create registers), that'd be for another commit.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit b33b8810e084a32adeae0c2da64484e3e1d2361c
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jan 23 16:06:49 2013 +0000

    assembler: Replace struct direct_reg by struct brw_reg
    
    More code simplification can be layered on top of that (by using some
    brw_* helpers to create registers), that'd be for another commit.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit cce4fc2c36b18c349f0fe63f14f15ec6dd880fc0
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jan 23 15:13:55 2013 +0000

    assembler: Make struct declared_register use struct brw_reg
    
    It's time to start converting the emission code in gram.y to use libbrw
    infrastructure. Let's start with using brw_reg for declared register.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 6b5680475761e22ec0fb46bc518b5e4e61e0c863
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jan 21 22:17:54 2013 +0000

    assembler: Don't expose functions only used in main.c
    
    and make then static.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit c74c80c9a5d2d84c55ba373d2d56ada635467ee6
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jan 21 22:12:10 2013 +0000

    assembler: Make sure nobody adds a field back to struct brw_instruction
    
    Adding something there will break the library, so we might as check for
    it.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 79c62f1134b2200fc49c43178d846ecba8e37a7b
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jan 21 21:41:36 2013 +0000

    assembler: Don't change the size of opcodes!
    
    Until now, the assembler had relocation-related fields added to struct
    brw_instruction. This changes the size of the structure and break code
    assuming the opcode structure is really 16 bytes, for instance the
    emission code in brw_eu_emit.c.
    
    With this commit, we build on the infrastructure that slowly emerged in
    the few previous commits to add a relocatable instruction with the
    needed fields.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit a45a47183a98e07f7a44330cd68bf65fec8d6dea
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jan 21 19:28:41 2013 +0000

    assembler: Make explicit that labels are part of the instructions list
    
    The output of the parsing is a list of struct brw_program_instruction.
    These instructions can be either GEN instructions aka struct
    brw_instruction or labels. To make this more explicit we now have a type
    to test to determine which instruction we are dealing with.
    
    This will also allow to to pull the relocation bits into struct
    brw_program_instruction instead of having them in the structure
    representing the opcodes.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 73d58edab9fca04d9b00f9e1a9095bbbb00f25a4
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jan 21 17:07:28 2013 +0000

    assembler: Refactor the code adding instructions and labels
    
    Factoring out the code from the grammar will allow us to switch to
    using brw_compile in a cleaner way.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 5e5861183df1326f74f66886c3f580d43d470d60
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jan 21 15:10:01 2013 +0000

    assembler: Make print_instruction() take an instruction
    
    No need to use a brw_program_instruction there as a brw_instruction is
    what you really dump anyway, espcially when the plan is to use
    brw_compile from Mesa sooner rather than later.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit c716e2bdb43023cffb652582aeb21c9af228931e
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jan 21 14:45:46 2013 +0000

    assembler: Simplify get_subreg_address()
    
    This function can only be called to resolve subreg_nr in direct mode
    (there is an other function for the indirect case) and it makes no sense
    to call it with an immediate operand.
    
    Express those facts with asserts and simplify the logic.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 8322802acba537777d8877fc7e74115df3a9bdef
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jan 21 14:04:59 2013 +0000

    assembler: Use subreg_nr to store the address register subreg
    
    Another step towards using struct brw_reg for source and destination
    operands.
    
    Instead of having a separate field to store the sub register number of
    the address register in indirect access mode, we can reuse the subreg_nr
    field that was only used for direct access so far.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 02019d4d554623f151f8c800a0812a8fee237ee6
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sun Jan 20 21:52:05 2013 +0000

    assembler: Remove the writemask_set field of struct dest_operand
    
    writemask_set gets in the way of switching to using struct brw_reg and
    it's possible to derive it from the writemask value.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit db6f5e08ba358d9d7af8ca43ae61f19486e7dfa5
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sun Jan 20 21:11:29 2013 +0000

    assembler: Use BRW_WRITEMASK_XYZW instead of the 0xf constant
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 042e9353e98610dd403a37c1f012148c11f5d23a
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jan 19 23:27:46 2013 +0000

    assembler: Import brw_eu_emit.c
    
    Finally importing the meaty brw_eu_emit.c code that emit instructions.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 7902f2c08ce1cbe591f3ce43621d42d42a44bdf9
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jan 19 23:25:22 2013 +0000

    assembler: Don't use -Wpointer-arith
    
    Mesa's code uses the GNU C extension that allows additions and
    soustractions on void* (+/- 1).
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 241c5a1322e96871ca1c296266b89b25200d366b
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jan 19 23:04:07 2013 +0000

    assembler: Import brw_eu.c
    
    Another step the road of importing Mesa's emission code.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 112075f8c217ba01c23d5f9562205ea08864a3f1
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jan 19 22:52:21 2013 +0000

    assembler: Import brw_eu_compact.c
    
    To be able to import brw_eu.c and brw_eu_emit.c later on. This could be
    used to get the assembler generate compact instructions at some point.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit a66cd60f2d5a748e0893fc0f31fbc9bdeb0bb758
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jan 19 22:50:57 2013 +0000

    assembler: Protect gen4asm.h from multiple inclusions
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 8b10ceb61b2e33085eceab7d907dd4466a704c22
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jan 19 17:24:56 2013 +0000

    assembler: Make an libbrw library
    
    With the brw_* files imported from mesa.
    
    There are still a few things in that library that needs gen4asm.h, for
    instance the GLuint and GLint types. The hope is that eventually libbrw
    can be split out in its own directory and shared.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 609a8453fb907041db52e8e029bc33f6bd49d907
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jan 19 17:05:48 2013 +0000

    assembler: Introduce struct brw_context
    
    A lot of the mesa code use struct brw_context to get the GPU generation
    and various information. Let's stub this structure and initialize it
    ourselves to be able to resuse mesa's code untouched.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 3ee5808d63be8c9604849b491d64e692315e8470
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jan 19 11:51:08 2013 +0000

    assembler: Remove white space from brw_eu.h
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 14146b403736b481cf4dc9b815372076fa3ba4e5
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jan 19 11:49:11 2013 +0000

    assembler: Import ralloc from Mesa
    
    This also add a new brw_compat.h that should help maintaining the
    diff between mesa's version and our as small as possible.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 4ca1a04b859ed039a41d46891a3019d953ab1dc2
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jan 19 00:30:18 2013 +0000

    assembler: Update the disassembler code
    
    From Mesa. This imports a bit more the of brw_eu* infrastructure (which
    is going towards the right direction!) from mesa and the update is quite
    a significant improvement over what we had.
    
    I also verified that the changes that were done on the assembler old
    version of brw_disasm.c were already supported by the Mesa version, and
    indeed they were.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 66fdc85d5bdab9d38d3d5fe255ec6481829ae2d9
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jan 18 13:21:32 2013 +0000

    assembler: Remove trailing white space from brw_defines.h
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 153aee37d75e0d3624c67b119d4c8fd377c72c19
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jan 18 13:14:23 2013 +0000

    assembler: Import brw_defines.h from Mesa
    
    Almost identical files now, the diff is:
    
    -#include "intel_chipset.h"
    +#define EX_DESC_SFID_MASK 0xF
    +#define EX_DESC_EOT_MASK  0x20
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 4431869bef02d96692dabfa26923b4a5b97e3481
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jan 18 11:52:01 2013 +0000

    assembler: Rename BRW_ACCWRCTRL_ACCWRCTRL
    
    To a more self-describing define. This hopefully will help its inclusion
    into Mesa.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 5e7e3f43a5965d5757952f3798769111a2a21bc7
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Jan 18 11:04:37 2013 +0000

    assembler: Adopt enum brw_message_target from mesa
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 64e84284e3740f6348501e8513161dd80f895f0c
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jan 16 15:11:05 2013 +0000

    assembler: Remove trailing white spaces from brw_structs.h
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit c35e0677fe1afee4f9975ffdcd3d772f37ae1ae7
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jan 16 14:56:40 2013 +0000

    assembler: Adopt brw_structs.h from mesa
    
    Finally merge both brw_structs.h from mesa. One detail has risen in that
    last commit, the msg_control field of data port message descriptors.
    
    Mesa's msg_control field is sometimes split with messages-specific
    fields where the assembler (at least for recent generations) exposes the
    full msg_control value in the send instruction.
    
    As libva's shaders encodes the full msg_control value in its send
    instructions, I've chosen to not take the split msg_control from mesa.
    It's absolutely possible to have a patch fixing that divergence at some
    later point.
    
    I've also kept a hack introduced with ironlake to not have to rewrite
    shaders (that encode msg_control in the text, remember), and thus
    creates a another difference with Mesa.
    
    -        GLuint msg_control:3;
    -        GLuint msg_type:3;
    +        GLuint msg_control:4;
    +        GLuint msg_type:2;
    
    Once again, I've made sure that re-generating libva's shaders don't show
    any difference.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit f2059b7cc75deaeabb8ef2104a1fe7a595a94de0
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jan 16 01:50:47 2013 +0000

    assembler: Rename bits3.id and bits3.fd
    
    As always, to sync with mesa.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit c7dac8495328f9b56895d3be410eea933079d8bd
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jan 16 01:44:41 2013 +0000

    assembler: Rename branch_2_offset to break_cont
    
    Once again, import the equivalent struct from mesa.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit cb425d6d203c9e36d20aaf4c975aecb3ca10b598
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jan 16 01:19:29 2013 +0000

    assembler: Rename branch to branch_gen6
    
    The purpose of this commit is to synchronize opcode definitions across
    the gen4asm assembler and mesa.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 0fde3ddccc4f2f1dcf9f81c2038ce18ef1a62a29
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jan 15 20:34:50 2013 +0000

    assembler: Rename gen5 DP pixel_scoreboard_clear to last_render_target
    
    The purpose of this commit is to synchronize opcode definitions across
    the gen4asm assembler and mesa.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit fe0bd3776e522c6a30060562cf57c6fc75196461
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jan 15 20:24:51 2013 +0000

    assembler: Remove struct dp_write_gen6 and struct use gen6_dp
    
    We ended up with 2 structures that where exactly the same, so just use
    one, which happens to be the one Mesa has.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 8fa561d4bbaec0ba0a4c9ccf2abe9131b893729a
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jan 15 18:47:05 2013 +0000

    assembler: Rename dp_gen7 to gen7_dp and sync it with Mesa's
    
    The purpose of this commit is to synchronize opcode definitions across
    the gen4asm assembler and mesa.
    
    I had to drop how mesa splits msg_control as the current assembly
    language gives access the the whole msg_control field.
    
    Recompiling the xorg and the intel driver of libva shaders doesn't show
    any difference in the assembly created.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 1f1ad5974655a241bcf202bcd79a3e2d236bcc1c
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jan 15 17:35:24 2013 +0000

    assembler: Rename dp_gen6 to gen6_dp and sync with Mesa's
    
    The purpose of this commit is to synchronize opcode definitions across
    the gen4asm assembler and mesa.
    
    I had to drop how mesa splits msg_control as the current assembly
    language gives access the the whole msg_control field.
    
    Recompiling the xorg and the intel driver of libva shaders doesn't show
    any difference in the assembly created.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 668e0dff7da8a604e626c1c5fefe65a3a8f2be19
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jan 15 16:40:06 2013 +0000

    assembler: Rename dp_read_gen6 to gen6_dp_sampler_const_cache
    
    The purpose of this commit is to synchronize opcode definitions across
    the gen4asm assembler and mesa.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 31259c5edc51d16afcfd453f7abaf81601a62a15
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jan 15 14:05:23 2013 +0000

    assembler: Rename three_src_gen6 to da3src
    
    Mesa's brw_structs.h has named/renamed this field to da3src. Sync with
    them.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit e71f1d2ad46af09a61b0fd03f4b00514de5091e5
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jan 14 19:13:19 2013 +0000

    assembler: Sync brw_instruction's header with mesa's
    
    Two changes there, a field has been renamed and one bit of padding is
    now used for compressed instructions.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 5d526899392caa9ec6fd954d1668a3a5355836c7
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jan 22 08:35:15 2013 +0000

    build: Add the debugger compilation status to the summary
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 5435708a50beb0368ed6694695ac89f9a8d49c07
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jan 21 23:02:36 2013 +0000

    build: Only build the assembler if flex and bison are found
    
    And start displaying a nice summary of what we are going to compile.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 9d3707a78f8adb5851ff65dbc4254d628556b03b
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Sat Jan 19 11:54:05 2013 +0000

    build: Don't use AM_MAINTAINER_MODE
    
    This does not bring us anything these days, not using the macro at all
    is the same thing as having it always on.
    
    See this discussion:
    https://www.redhat.com/archives/virt-tools-list/2010-October/msg00049.html
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit e5d07538b2d59034010e9c0f3ff1395faee6d4e3
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Jan 15 13:52:57 2013 +0000

    gitignore: Ignore TAGS files
    
    TAGS files are generated with "make tags" to quickly jump through the
    code. Ignore those by-products of automake/ctags.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit af7e11de69690e465e30632e546771ee3c3bdce7
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jan 14 23:25:14 2013 +0000

    build: Add CAIRO_FLAGS to the debugger compilation
    
    The library in lib/ exposes <cairo.h> in its main header and thus users
    must be able to include it.

commit 191c85976d7f924de781ac4d9ad8a73b034493bf
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Jan 14 23:21:21 2013 +0000

    build: Integrate the merged gen assembler in the build system
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit e466360df9ca2d43754e825eb496d8dd23c9ccf0
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Wed Oct 31 16:10:20 2012 +0800

    bump version to 1.3
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 5d727898489f6fb37a263abfa8aa0fcd6aafdcae
Author: Homer Hsing <homer.xing@intel.com>
Date:   Tue Oct 23 09:21:15 2012 +0800

    Fix typo. "donesn't" -> "doesn't"

commit 93f2a4fc93b70d37a207589800f66ab8be81bd6e
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Mon Oct 22 16:13:51 2012 -0400

    Add the CRE enginee for HSW+
    
    This is also for media encoding like VME, which can do
    the operation of check & refinement.
    
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>

commit 495c4e14e7417610bf75ca397450b4b8447e29a3
Author: Gwenole Beauchesne <gwenole.beauchesne@intel.com>
Date:   Mon Oct 22 16:13:51 2012 -0400

    Fix JMPI encoding for Haswell.
    
    It uses the byte-aligned jump instead of 64-bit units.
    
    Signed-off-by: Gwenole Beauchesne <gwenole.beauchesne@intel.com>
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>

commit 8aa952873cbf3449815e75318c4807e43e74004e
Author: Gwenole Beauchesne <gwenole.beauchesne@intel.com>
Date:   Mon Oct 22 16:13:51 2012 -0400

    Add initial support for Haswell.
    
    Signed-off-by: Gwenole Beauchesne <gwenole.beauchesne@intel.com>
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>

commit 0c32e25c96355c4edfa589fc5dad3993da82a90e
Author: Gwenole Beauchesne <gwenole.beauchesne@intel.com>
Date:   Mon Oct 22 16:13:51 2012 -0400

    Allow Gen version decimals.
    
    This is preparatory work for Haswell (Gen 7.5).
    
    Signed-off-by: Gwenole Beauchesne <gwenole.beauchesne@intel.com>

commit a5e5d94ce37356a6b5d2bf389456849f2f3c79ef
Author: Gwenole Beauchesne <gwenole.beauchesne@intel.com>
Date:   Mon Oct 22 16:13:51 2012 -0400

    Bump gen_level to multiple of tens.
    
    Add new helper macros to check versions:
    - IS_GENp() meant to match Gen X and above
    - IS_GENx() meant to match Gen X exactly.
    
    Patch mechanically generated. No stale "gen_level" usage.
    
    Signed-off-by: Gwenole Beauchesne <gwenole.beauchesne@intel.com>
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>

commit ee321884221942e3dbe91d46d293e0115620fbfc
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Oct 19 11:18:23 2012 +0800

    Fix Gen7 JMPI compilation
    
    Gen7 JMPI Restrictions in bspec:
    The JIP data type must be Signed DWord

commit e221b0aa78ccd0f75f64dc3fab66c06fa9fb1828
Author: Homer Hsing <homer.xing@intel.com>
Date:   Thu Oct 18 12:37:31 2012 +0800

    Fix sub-register number of an address register encoding
    
    The AddrSubRegNum field in the instruction binary code should be:
      code    value(advanced_flag==0)   value(advanced_flag==1)
      a0.0             0                         0
      a0.1        invalid input                  1
      a0.2             1                         2
      a0.3        invalid input                  3
      a0.4             2                         4
      a0.5        invalid input                  5
      a0.6             3                         6
      a0.7        invalid input                  7
      a0.8             4                  invalid input
      a0.10            5                  invalid input
      a0.12            6                  invalid input
      a0.14            7                  invalid input

commit 599d7d244afa4cf70de02d7b6799449fe8cbe57b
Author: Homer Hsing <homer.xing@intel.com>
Date:   Tue Oct 16 14:14:25 2012 +0800

    Fix symbol register subreg number calculation rule symbol_reg_p
    
    When in normal mode, subreg_nr should not be divided by type_size.
    This patch fixes such bug.

commit 460fdc041b0d510f96b5d4cd0decd5e1c42d7fa8
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 28 14:10:00 2012 +0800

    Show warning when compiling the grammar parser

commit e8cb195c6d9bb9072896e15416f4207ccffdd919
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 28 14:05:51 2012 +0800

    Support Gen6 WHILE instruction

commit 2ad18c1c97a14edd9733b1d7319a1c50a170be92
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 28 14:02:25 2012 +0800

    Make sure Gen6 IF works

commit c56d78611641cfa7eff5b046054b051206a97dc6
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 28 13:46:21 2012 +0800

    Make sure Gen6 ENDIF work

commit 397e1ccccbd00fcf2ec763f9d6f8c82db8d395ee
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 28 13:43:44 2012 +0800

    Fix JIP position for Gen6 JMPI

commit c91bd8c76ffb3a5098791a7d9c8b45a789f77cc2
Author: Homer Hsing <homer.xing@intel.com>
Date:   Thu Sep 27 16:20:39 2012 +0800

    Fix Gen6 ELSE instructions code logic according to bspec.

commit ce55552470d8135070d4ceb2c21585f77de68210
Author: Homer Hsing <homer.xing@intel.com>
Date:   Thu Sep 27 15:44:15 2012 +0800

    Make sure BREAK/CONT/HALT work on Gen6.

commit 3de439e2f5e98b2afc909bd02b27403755d475ae
Author: Homer Hsing <homer.xing@intel.com>
Date:   Thu Sep 27 15:39:28 2012 +0800

    Support Gen6 RET instruction.

commit 7529682d0a7878160dfb5ef91da886acba27d22d
Author: Homer Hsing <homer.xing@intel.com>
Date:   Thu Sep 27 15:31:56 2012 +0800

    Support Gen6 CALL instruction.

commit b899aba57f0e1b8a01b3f74b26a8c575a69ab6ae
Author: Homer Hsing <homer.xing@intel.com>
Date:   Thu Sep 27 14:56:30 2012 +0800

    Replace variable init code in WAIT by src_null_reg

commit 7e2461b6fc357476adebad19095f5cfdb4038b31
Author: Homer Hsing <homer.xing@intel.com>
Date:   Thu Sep 27 14:48:14 2012 +0800

    Let ip_dst and ip_src become local const variable, so as to reduce replicated code.

commit 45ab3cf5a1fd810c380d7d973a5b034f8f3aa78c
Author: Homer Hsing <homer.xing@intel.com>
Date:   Thu Sep 27 14:20:32 2012 +0800

    Support Gen6 three-source-operand instructions.
    
    Add bits1.three_src.gen6.dest_reg_file according to Gen6 spec

commit 72a3c194db2682cb00ea882933f17940a5dfde7e
Author: Homer Hsing <homer.xing@intel.com>
Date:   Thu Sep 27 13:51:33 2012 +0800

    Compile ELSE and WHILE in Gen5 as same way as in Gen4

commit f55ed65bb28bd8bce416a9dfd32dfc0028cb61bf
Author: Homer Hsing <homer.xing@intel.com>
Date:   Mon Sep 24 16:39:36 2012 +0800

    Fix reloc_target_offset computing logic

commit 4bf84ec1461a5346a84259ade14ae0da2c4ac898
Author: Homer Hsing <homer.xing@intel.com>
Date:   Mon Sep 24 10:12:26 2012 +0800

    Fully support Gen7 branching instructions
    
    Also fix integer argument parsing rule for JMPI, IF and WHILE
    Fix shift/reduce conflicts in relativelocation

commit 88dfdf34df88949e61efefacde1be14c36e9966e
Author: Homer Hsing <homer.xing@intel.com>
Date:   Mon Sep 24 10:06:35 2012 +0800

    Supporting multi-branch instructios BRD & BRC
    
    brd: redirect channels to branches
    brc: let channels converging together
    
    also rewrite code converting label to offset

commit 5d589dbe132f32718ea144f932fbe3cd37017957
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 21 12:35:35 2012 +0800

    Use right-recursing in parser rule inst_option_list
    
    This recursing cost less memory. It is recommended by Bison.

commit a7b1c09d18fc25069ddc39ef6c6aa00ab67537ad
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 21 12:33:13 2012 +0800

    Support subroutine instructions, CALL & RET

commit c0ebde27866d6638bc6326ab4996081874a04ae0
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 21 10:14:31 2012 +0800

    Merge replicative code in gram.y

commit b0b540f02a67ca8d7d1e6748586a51e5bd755503
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 21 10:06:20 2012 +0800

    Reduce replicative code in gram.y by reloc_target field in src_operand
    
    Bspec says JIP and UIP should be the source operands. It is better if
    src_operand has a field "reloc_target" according to bspec.
    The replicative code in JMPI and branchloop rules can be merged into one.

commit 1f9a4d71e8b87ab08209cd42b6651b4e0c04a433
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 21 09:51:55 2012 +0800

    Restrict type of relativelocation2 to int
    
    Original rule set it to EXP | NUMBER, then YYERROR if it is NUMBER.
    This patch set it directly to EXP, restricting its type to int.

commit ccd17211909ce0a1c64904e70774a770feb8b8a4
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 21 09:37:06 2012 +0800

    Rewrite label matching code. Collect labels in a linked list.
    
    Label matching is faster because of searching only in a small list,
    rather than searching a label in all instructions.

commit 751838e809003529cbb3753e4e332e5a191905d6
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 21 08:39:57 2012 +0800

    Add second_reloc_target in the data structure.
    
    Since Gen6+, some branching instructions have two relocation targets.

commit d6f02c181f9c25b60575bfe54d70fd5f58c6e5b4
Author: Homer Hsing <homer.xing@intel.com>
Date:   Thu Sep 20 14:06:06 2012 +0800

    Add test case for ".declare" overriding feature.
    
    Later same name .declare pragma will override previously defined
    one. This patch add a test case for that feature.

commit 2ab4c0d9b8b15e770ef6a6af4f60a2f5bf007c2b
Author: Homer Hsing <homer.xing@intel.com>
Date:   Thu Sep 20 14:04:20 2012 +0800

    Fix memory leaking in the parser
    
    STRING has been malloc'ed by strdup in src/lex.l but forgotten to
    be freed in src/gram.y.

commit 741008e0503df0a0626d27da99a30aac0c880c29
Author: Homer Hsing <homer.xing@intel.com>
Date:   Thu Sep 20 13:09:15 2012 +0800

    Fix field length of JIP for one-offset-branch in Gen6
    
    Such JIP has 25 bits length in Gen6.

commit 6983eebf47f37def8f2315d5af1800b81644f240
Author: Homer Hsing <homer.xing@intel.com>
Date:   Wed Sep 19 09:34:58 2012 +0800

    Automatically run all test cases.
    
    In the past test/run-test.sh run only one test case per call.
    This patch let it automatically run all test cases.

commit 1c009349bc894bd195b5522540536898b0bee574
Author: Homer Hsing <homer.xing@intel.com>
Date:   Tue Sep 18 16:44:45 2012 +0800

    Fix missing environment variables problem in test/run-test.sh
    
    Currently test/run-test.sh cannot get the value of ${srcdir} and
    ${top_builddir}. Thus we cannot run any test case. This patch uses
    $0 to get the absolute path of run-test.sh. Now test cases work.

commit 868cbf7dc56d96dce1463cd9288730ece7ee9e9b
Author: Homer Hsing <homer.xing@intel.com>
Date:   Tue Sep 18 16:32:39 2012 +0800

    Add a generic hash table algorithm. Reuse for declared_reg_table and label_table in the future.
    
    Rewrite find_register() and insert_register(). The hash table code
    has been extracted. We may use those code for label table in the future.

commit 131f61f2ef2ecac4f0e4cb207a58449f36abfa36
Author: Homer Hsing <homer.xing@intel.com>
Date:   Tue Sep 18 16:28:27 2012 +0800

    Add a test case for ".declare" pragma

commit c3bcc7dbeb520fcca387dac510f47d4847cc32b8
Author: Homer Hsing <homer.xing@intel.com>
Date:   Tue Sep 18 13:57:20 2012 +0800

    Rename brw_instruction.bits3.if_else to branch
    
    Because that field will be used for all branch instructions

commit bebe8179e1b97ac8111756de1cf27f54eebee150
Author: Homer Hsing <homer.xing@intel.com>
Date:   Tue Sep 18 13:47:22 2012 +0800

    According to BSPEC, put PLN & BFI1 to binaryop, put SUBB to binaryaccop
    
    bspec: BFI1 should not access accumulator. PLN should not use accumulator
    as source.
    future work in gram.y: show warning if acc is used as dest for
    ADDC/SUBB/CMP/CMPN/SHL/BFI1.

commit 74383f4db4c348be1fd3c227653493c8eb5dab67
Author: Homer Hsing <homer.xing@intel.com>
Date:   Tue Sep 18 13:25:53 2012 +0800

    Explain the difference between binaryinstruction and binaryaccinstruction
    
    Developers may add new instructions in wrong place in the future
    if they don't know the difference between binaryinstruction and
    binaryaccinstruction.

commit 375d1fd7b2858accb91c277b8606eaa98837ce75
Author: Homer Hsing <homer.xing@intel.com>
Date:   Tue Sep 18 13:12:50 2012 +0800

    Renaming according to BSPEC: jump_count -> JIP; pop_count -> UIP.
    
    Since bspec SNB+, jump_count and pop_count is renamed to JIP and uIP.

commit 6171c61e0c13d563d5aaad85c74940ceaaf6afa9
Author: Homer Hsing <homer.xing@intel.com>
Date:   Mon Sep 17 16:11:49 2012 +0800

    Use bits3.if_else.jump_count instead of bits3.ud for readability

commit 5defbd37b6d0c18801298edaa2eba3e9e09cd24d
Author: Homer Hsing <homer.xing@intel.com>
Date:   Mon Sep 17 16:01:16 2012 +0800

    Pad NOP instructions instead of the ILLEGAL instruction for entry
    
    If a label is an entry, the assembler will pad empty instruction
    before the label until offset % 4 == 0. In the past, the ILLEGAL
    instructions are padded. It may raise exceptions. We use the NOP
    instructions instead.

commit e6d61ac20284b0de9b4dc81cb9ba27109b477cd1
Author: Homer Hsing <homer.xing@intel.com>
Date:   Mon Sep 17 13:34:38 2012 +0800

    Merge same if branches in declare_pragma section in gram.y

commit c19f8338d726fd9d4fcec7596118228f515f8dc1
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 14 15:27:19 2012 +0800

    Reduce memory cost in entry_table
    
    Original code double entry table space if there is no space. It may
    waste 50% memory of the entry table. Now we use a link list to store
    entry items.

commit f02a1ed42758c38ab97d5a58a4dd821b8daaf0eb
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 14 13:40:08 2012 +0800

    Make the entry point padding code logic looks nicer

commit 73ab2f6a680035414c9f97fd691b476ace722d6b
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 14 10:50:09 2012 +0800

    Fix a typo in src/main.c: "in unit of type" -> "in unit of byte"

commit 7186723f81f42b56be44709c4aa6f178553ce2dc
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 14 10:06:39 2012 +0800

    Reduce hash value collision probability in src/main.c
    
    Original code use "hash_value = *name++", which may produce
    hash value collision for word permutations like "abc", "bac" and "cba".

commit 940522588af6ac1881765edfdbc23637f67db45b
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 14 10:02:53 2012 +0800

    Move program_defaults init statement into variable declaration
    
    In original code, the init value for "program_defaults.register_type"
    is put inside main(), which may be hard to maintain.

commit 77dcc41cfdb2156e5953eeb5a50a2b8fab94ab8c
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 14 09:42:30 2012 +0800

    Better comment text. Change "c like" to "C style" in main.c

commit 81859af1106362deb3f410a93fe906dae7c6864d
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 14 09:34:58 2012 +0800

    Replace bzero by memset.
    
    bzero has been removed from POSIX.1-2008. Should use memset instead.

commit b1ef3bc209f2b4beece1bc84a7a01df3e80b653a
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 14 09:02:01 2012 +0800

    Supporting integer subtraction with borrow
    
    subb: subtract unsigned integer src1 from src0. store the result
    in dst and store the borrow (0 or 1) as a 32-bit value in acc.

commit 9e711a4f2ccf3d2008d25dc613b5f9e8c6639193
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 14 08:56:36 2012 +0800

    Supporting find first bit instructions
    
    fbh: Find the first significant bit searching from the high bits
    in src0 and store the result in dst.
    
    fbl: Find the first 1 bit searching from the low bits in src0
    and store the result in dst.

commit b094cd8648bcbcdb6015ae6373f01555e7408d2b
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 14 08:50:18 2012 +0800

    Supporting half precision to single precision float convertion
    
    The f16to32 instruction converts the half precision float
    in src0 to single precision float and storing in dst.
    
    The f32to16 instruction converts the single precision float
    in src0 to half precision float and storing in the lower word
    of each channel in dst.

commit 4285d9c2ce80f5e5306f544ec47e1485b925e83c
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 14 08:41:16 2012 +0800

    Supporting count bit set instruction
    
    The cbit instruction counts component-wise the total bits set
    in src0 and stores the resulting counts in dst.

commit d4f48a7271cf94073194112fb763685043e723dd
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 14 08:32:12 2012 +0800

    Supporting instruction "reverse bits"
    
    The bfrev instruction component-wise reverses all the bits in src0
    and stores the results in dst.

commit 4d6337dfaf6b91957d839f65695e15e4fe1a7856
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 14 08:27:41 2012 +0800

    Supporting instruction Bit Field Insert 1
    
    The bfi1 instruction component-wise generates mask with control
    from src0 and src1 and stores the results in dst.

commit 5777bfa91fdbb0f89d6948570a5ba946ef1d7b34
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 14 08:24:54 2012 +0800

    Delete an extra space character in brw_defines.h
    
    Now the column is aligned and the code is nicer.

commit c3f1e0a732c4cbdca32544fefb887496f7b3f0c4
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 14 08:20:13 2012 +0800

    Supporting addc instruction
    
    The addc instruction performs component-wise addition of
    src0 and src1 and stores the results in dst;
    it also stores the carry into acc.

commit 8ca55688ea01a688677996570fb1f6626469d99d
Author: Homer Hsing <homer.xing@intel.com>
Date:   Thu Sep 13 11:05:50 2012 +0800

    Supporting bit field extract and bit field insert 2
    
    Supporting two new operators, bfe and bfi2
    bfe: Component-wise extracts a bit field from src2 using the bit field width from src0 and the bit field offset from src1.
    bfi2: component-wise performs the bitfield insert operation on src1 and src2 based on the mask in src0.

commit 210510cebbac669ce86cf557c6b5d37d757ac7be
Author: Homer Hsing <homer.xing@intel.com>
Date:   Wed Sep 12 13:04:49 2012 +0800

    Supporting LRP: dest = src0 * src1 + (1-src0) * src2

commit a034bcbd04b5cd67b94e8521f5c17738645a13fd
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 7 14:38:13 2012 +0800

    Support trinary source instruction "multiply add".
    
    MAD (Multiply ADd) computes dst <- src1*src2 + src0.
    
    Tried best to follow previous variable naming habit.
    
    Also renamed "triinstruction" -> "trinaryinstruction" in grammar parser
    for better readability.

commit 0d3f8495ea90515c3852c43fb38a345d5ac9c3da
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 7 09:53:17 2012 +0800

    add data structure in src/brw_structs.h for supporting three-source-operator instruncions

commit 75f1d80982e7cf16e5ca98f8cc295896fdcd339e
Author: Homer Hsing <homer.xing@intel.com>
Date:   Fri Sep 7 09:20:50 2012 +0800

    Comment magic words "da1", "da16", "ia1", and "ia16"

commit aab7cd5cc59c9af88bb5f1b7f73ab6f67ebdce93
Author: Homer Hsing <homer.xing@intel.com>
Date:   Thu Sep 6 16:12:08 2012 +0800

    close File yyin before calling yylex_destroy
    
    This patch makes sure file handler yyin is closed.
    yylex_destroy() calls yy_init_globals(), which reset yyin to 0.
    Therefore if we do not close yyin before yylex_destroy(), yyin
    will not be closed anymore.

commit 31401afe78e2a1a08fa89448ed2e4fa12760c64d
Author: Homer Hsing <homer.xing@intel.com>
Date:   Thu Sep 6 15:55:54 2012 +0800

    Call yylex_destroy() to free memory after yyparse()

commit 302ca73198bf9d7d2ae136201529d647ce26c1e2
Author: Homer Hsing <homer.xing@intel.com>
Date:   Thu Sep 6 15:33:41 2012 +0800

    Close input file handler yyin after yyparse

commit f282ea689b551999afb4331f8f345507704d309d
Author: Homer Hsing <homer.xing@intel.com>
Date:   Thu Sep 6 10:31:22 2012 +0800

    Fix a typo ... lable -> label

commit ea1fcf0b447d9677859bc3d9692d29434b7fb5be
Author: Lu Guanqun <guanqun.lu@intel.com>
Date:   Wed Aug 22 09:09:36 2012 +0800

    fix the label checking logics
    
    Signed-off-by: Lu Guanqun <guanqun.lu@intel.com>

commit 4d75db550ee938067213dc60be9bf5116f4361e2
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Tue Jul 17 16:16:11 2012 +0800

    Waring if both predication and conditional modifier are enabled but use different flag registers
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 3ffbe96c1eb35da7fbaa22d48b26d3ec56b0e31d
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Tue Jul 17 15:05:31 2012 +0800

    Add support for flag register f1 on Ivy bridge
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 2f772dd67b353ecd9de7c6c7cbd7e94025b34428
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Tue Jul 17 14:18:54 2012 +0800

    s/flag_reg_nr/flag_subreg_nr for an instruction
    s/flagreg/flag_subreg_nr for a condition
    
    They are flag subregister number indeed
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 968d2d7ef644704a09089ed6fd87a2e41195e304
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Tue Jul 17 14:01:54 2012 +0800

    Remove flag_reg_nr from the DW3 of an instruction
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit f3f6ba24e6e576a315d14eaeb31a563e5f40459b
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Tue Jul 17 13:46:59 2012 +0800

    Change the rule for flag register
    
    The shift/reduce conflict mentioned in the comment has been fixed, so
    flagreg can return the reg number in the lvalue now. In addition, it will
    be easy to add support for flag register f1 on Ivy bridge
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 128053f120fba33394c5f05fbbe75eb9029d3792
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Fri Jun 29 16:47:10 2012 +0800

    Accept symbol register as the leading register of the request
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit fc2995b59aae45b85880f6b281f68f862fae5b0d
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Sun Jun 24 15:03:28 2012 -0700

    disasm: decode SENDC like SEND
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 35c217b98618e2f2a4b25c1cccb348671f54fa61
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Sun Jun 24 15:01:57 2012 -0700

    disasm: add gen6 style send decoding
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 22505dc0511e18f42bd97ff3ffd7503095071b97
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Sun Jun 24 14:43:45 2012 -0700

    disasm: add sendc
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 26c36abdf64dc64afff9cefa561ff4c1fb86f5d6
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Sat Jun 23 19:36:48 2012 -0700

    disasm: add pln instruction
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 0b5f7fa0490be0e6f755d244b8e5d121c045c6d0
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Thu Aug 11 15:35:14 2011 +0800

    A new syntax of SEND intruction on Ivybridge
    
    [(<pred>)] send (<exec_size>) reg greg imm6 reg32a
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit d6bc0e4ea30c576944838f0fed289d982d09fb9b
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Tue Jun 21 11:12:13 2011 +0800

    bump version to 1.2
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 86f8ca6af925b8d8985ba667e6fe634f0579b353
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Tue May 31 13:36:03 2011 +0800

    Support VME on Ivybridge
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 27050395d21955cf91f70a10da7abb726fa0bf70
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Fri Jun 10 16:04:30 2011 +0800

    Support DP for sampler/render/constant/data cache
    
    Since Sandybridge, DP supports cache select for read/write. Some write messages such as
    OWord Block Write don't support render cache any more on Ivybridge. So introduce a
    generic data_port messsage for Sandybridge+.
    
        data_port(
            cache_type,   /* sampler, render, constant or data(on Ivybridge+) cache */
            message_type, /* read or write type */
            message_control,
            binding_table_index,
            write_commit_or_category, /* write commit on Sandybridge, category on Ivybridge+ */
            header_present)
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit e97f0bca5fab4ddff3199470294d82d60fcc0b62
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Mon May 30 16:30:48 2011 +0800

    sampler/render/constant cache unit since Sandybridge
    
    since Sandybrdige, there isn't a single function unit for data port read/write.
    Instead sampler/render/constant cache unit is introduced, data port read/write
    can be specified in a SEND instruction with different cache unit. To keep compatibility,
    currently data port read always uses sampler cache unit however data port write
    uses render cache unit
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 6a3a9e7148723fcf7339e0878b5c89b1bb95b2b5
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Mon May 30 16:00:12 2011 +0800

    fix an error in commit cf76278
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 46ffdd5df74c8e502ea0bf3636927d6b257aafda
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Wed May 25 14:29:14 2011 +0800

    SEND uses GRFs instead of MRFs on Ivybridge
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 67d4ed665d4f9e1267e2ff61b5a3005687b42b38
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Mon May 23 13:45:04 2011 +0800

    Add support for sample (00000) on Ivybridge
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit c8d6bf353eb46ac109baeba3bd053e31a6a7835f
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Mon May 23 13:32:32 2011 +0800

    Add support for data port read/write on Ivybridge
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 6fa6b45dafec7109b69e13a5d72e447bc8c31189
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Mon May 23 12:43:25 2011 +0800

    Add -g 7 for Ivybridge
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 37d68103a83e27159ec2ddbca4675ff60215b784
Author: Feng, Boqun <boqun.feng@intel.com>
Date:   Tue Apr 19 08:43:22 2011 +0800

    Send instruction on PRE-ILK
    
    [(<pred>)] send (<exec_size>) <pdst> <cdst> <src0> <desc>

commit 52399867bfac2b8a7659acc291de45700fecd00c
Author: Zhou Chang <chang.zhou@intel.com>
Date:   Thu Apr 14 11:51:29 2011 +0800

    Add VME support in SEND

commit 83a5c38e12a7c8d1f342abf330c8c6bad1a376b3
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Wed Mar 23 22:08:39 2011 -0700

    intel-gen4asm: add byte array style disasm
    
    I previously added a byte array style output for intel-gen4asm, but
    there was no way to disassemble here. Well here that is.

commit cbfab5f415a56517d4a8e3faed5e9936743ab476
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Mar 17 18:57:59 2011 -0700

    intel-gen4asm: have a C-like binary output
    
    Have the assembler support a byte array output. This is useful for
    writing blobs which can directly be linked code that wishes to upload to
    the EU.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit e7f4dc6e39fbf35a2474048c11fbc6b086e59837
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Tue Mar 1 16:43:02 2011 +0800

    fix the parameters of register region
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 85da7b9e8a4737afd4b2ae6684374d1d43fc4ba8
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Thu Feb 17 13:24:11 2011 +0800

    send instruction on GEN6
    
    [(<pred>)] send (<exec_size>) reg mreg imm6 imm32
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 852216d6e35fafedd9d315e26c8761d5bcf83943
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Wed Feb 16 15:26:24 2011 +0800

    fix notification count register
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 27b4303a30cab372597c1a78f3c0b686451a8f53
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Mon Dec 13 16:07:16 2010 +0800

    Support instructions which strictly follow the documents.
    
    Previously some instructions parsed by this assembler don't follow the
    documents.
    
    Signed-off-by: Chen, Yangyang <yangyang.chen@intel.com>
    Signed-off-by: Han, Haofu     <haofu.han@intel.com>
    Signed-off-by: Zou Nan hai <nanhai.zou@intel.com>
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 66649d7b4efc87063b0bb7677bd708b61973b2ac
Author: Chen, Yangyang <yangyang.chen@intel.com>
Date:   Mon Dec 13 15:36:02 2010 +0800

    1. fix DOT
    2. rule for instrseq
    
    Signed-off-by: Chen, Yangyang <yangyang.chen@intel.com>
    Signed-off-by: Han, Haofu     <haofu.han@intel.com>

commit bf06f07d5bee7ed4e3e52ebc984e56f6a40fbad1
Author: Chen, Yangyang <yangyang.chen@intel.com>
Date:   Mon Dec 13 15:30:48 2010 +0800

    fix CHANNEL select
    
    Signed-off-by: Chen, Yangyang <yangyang.chen@intel.com>
    Signed-off-by: Han, Haofu     <haofu.han@intel.com>

commit 14c0bd0fb3d0816d85db938337d16adda5686b5f
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Mon Nov 1 16:16:25 2010 +0800

    Support for headerless write
    
    Add a new parameter to write
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit d0ae3297086e671fa41f7d565c29f6ecc8d77077
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Thu Oct 21 14:37:18 2010 +0800

    bump version to 1.1
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 5405532ffc1926f0616581a330db32d07335b960
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Wed Oct 27 09:42:56 2010 +0800

    add support for math instruction on Sandybridge
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit f1f5208e1e36fe89660f600388613aa5cb3c61b0
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Tue Oct 19 13:26:24 2010 +0800

    add support for plane instruction (pln)
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit dcdde5347eb95343d493f2e098ed41d930866b37
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Thu Oct 21 14:33:35 2010 +0800

    Send on Sandybridge uses a message register as operand src0
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit c2382cab55ea44a45ff7836647dfec43588c0b73
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Sat Oct 9 13:57:48 2010 +0800

    no compression flag on Sandybridge
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 718cd6cb4260847c1fa5b3e6d40bd8cecf12f3f7
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Sat Oct 9 12:52:08 2010 +0800

    print error message when using math function on Sandybridge.
    
    Sandybridge doesn't have math funtion, instead it supports a set of math
    instructions. The support for math instructions will be added later.
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 9d2be258386aeefdfe86aef52ecd0c5fcdde5d26
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Sat Oct 9 12:46:15 2010 +0800

    sampler, urb write, null and gateway on Sandybridge are same as Ironlake.
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit a8458d5d5e097c03536c47ea455257cf67f21c95
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Sat Oct 9 11:09:47 2010 +0800

    add support for data port read on Sandybridge
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 61784dbc9739bc6dcd935311cc8aa2e1a6d02e73
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Fri Oct 8 16:48:15 2010 +0800

    add support for data port write on Sandybridge.
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 4f777e73f1b9fb0d70378d30aa4bda3fb60ee128
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Fri Oct 8 15:07:51 2010 +0800

    fix send instruction on Sandybridge
    
    Send doesn't have implied move on Sandybridge, the SFID moves to bits[24,27] which
    is used as the destination of the implied move on Prev GEN6.
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 55d81c4ce7ee5ec79fcaacf2c22d42580b49cf82
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Fri Oct 8 13:53:22 2010 +0800

    add AccWrCtrl flag on Sandybridge
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 5bcf1f5a0360bbfb3c135ccac1d0e67e558a71c0
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Fri Oct 8 13:10:15 2010 +0800

    always set destination horiz stride for Align16 to 1 on Sandybridge.
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 95d0ce48f667783d9b50d514c1ba928a64463743
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Fri Oct 8 12:53:38 2010 +0800

    fix jump count for Sandybridge.
    
    It is same as Ironlake.
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit eb92c228cdf17d92b4d616bc33366aaf5144c3e1
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Fri Oct 8 12:52:34 2010 +0800

    add -g 6 for Sandybridge
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit db8aedc745faea10b10f96b2dca9e29543192e68
Author: Zou Nan hai <nanhai.zou@intel.com>
Date:   Wed Apr 21 11:02:21 2010 +0800

    use left recursion instead of right recursion to avoid memory exhausted issue when compiling large source files

commit dea75a6935109e8fc3e667705375ae7f4f5b01ba
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Dec 22 17:06:47 2009 -0800

    Fix setup of immediate types for gen4 disasm.
    
    Caught by clang.

commit a6f1455019d719d554d3a07820ed767957b442fd
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Aug 4 16:27:28 2009 -0700

    disasm: Print out ELSE and ENDIF src1 arguments like IF does.

commit 459c95b20c845be7d7bdeeb2353909b405f69b54
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Aug 4 15:02:12 2009 -0700

    whitespace cleanup from Mesa import.

commit c6f2da4e82123a98f5a2d7fc462089363ea37f0c
Author: Zou Nan hai <nanhai.zou@intel.com>
Date:   Wed Oct 28 10:14:19 2009 +0800

    1. type syntax :ud :uw etc
    2. empty instruction option
    3. remove a conflict

commit 5608d2765dfa22afc4d6ec843e9e8f1a40ceef4a
Author: Zou Nan hai <nanhai.zou@intel.com>
Date:   Tue Oct 20 14:51:04 2009 +0800

     support simple expression

commit 8521146207abaefb8fbb0ba9850496902ff5557d
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Thu Jul 23 10:43:27 2009 +0800

    add intel-gen4asm.pc.in
    
    bump version to 1.0

commit 60cf6e09dd006692414f7d83e7e9dcdfcb79c5fc
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Thu Jul 23 10:33:55 2009 +0800

    the offset of JMPI is in unit of 64bits on GEN5.
    
    This fix is only applied for JMPI label. It is up to you
    to use a right offset for JMPI imm32|reg in your program.

commit 5261b8475e25f66043df4b389e7ef13d4ccf797d
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Thu Jul 23 10:32:51 2009 +0800

    change read message format on GEN5
    
    to re-use a lot of shaders for GEN5.

commit 549b751afb30723c776747419d9abfc98319a6b2
Author: Xiang Haihao <haihao.xiang@intel.com>
Date:   Tue Jun 30 10:02:33 2009 +0800

    Add support for GEN5
    
    Add a new option [-g n], n=4(GEN4),5(GEN5). If don't use -g,
    the default value is 4(GEN4)

commit be9bcee15f82c9ba4557639ec77b8a00b303c884
Author: Zou Nanhai <nanhai.zou@intel.com>
Date:   Tue Dec 9 18:38:54 2008 -0800

    Add support for labeled and conditional branches
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5a2ec836e1b05d246f6312e32a6d76b612fecef9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 18 20:07:45 2008 -0700

    Support more addressing modes in disasm

commit d866fff116d52c90aaa699b78ebd6d9526517aa4
Author: Eric Anholt <eric@anholt.net>
Date:   Wed Jun 18 15:09:30 2008 -0700

    Fix compiler warning from missing include.

commit 807f8768e9a55fc4be4ef7f66211b1c9a53bde1d
Author: Zou Nan hai <nanhai.zou@intel.com>
Date:   Wed Jun 18 15:05:19 2008 -0700

    Add support for dp_read message.

commit 26afe90126eefb2bed16dc9a7ac45aeb09cfb4f9
Author: Zou Nan hai <nanhai.zou@intel.com>
Date:   Wed Jun 18 15:04:11 2008 -0700

    Add thread_spawner message target support.

commit 2033aea3dd429b94f5272a83ad1d46d95ecbff04
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 23 23:10:40 2008 -0700

    Add conditional support to assembler. Add align16 dest support to disasm.
    
    This is working towards round-tripping mesa programs. Still need indirect
    register addressing and align16 source support.

commit d8057c9bcdf65ffdcd180f017106bd73d9f17c88
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 23 19:28:23 2008 -0700

    Add math and urb units, deal with nop

commit ae85b10cf03ea1bdb920cb70af186830775f3b1f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 23 12:52:58 2008 -0700

    Add disassembler (intel-gen4disasm).
    
    Decodes most simple instructions. Still needs work on branching and send.

commit 082fbe8738988effb46749db905ddc3b2b3287d9
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 11 11:04:42 2008 -0700

    Support #line directives

commit b81aca4948b18e65252f2629c5fdd446e8e6e818
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 30 00:58:40 2008 -0700

    Ensure that parse errors cause non-zero exit.
    
    Also, avoid creating output file when a parse error occurs

commit 2d4d401d709953520cec0c40d38781caa913f6f8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 30 00:58:28 2008 -0700

    Add packed vector immediate values

commit 3fd6e2fc7ba168ade75a98fc291ea8566188f8d9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 30 00:57:40 2008 -0700

    Add GCC warnings

commit 6e4b04a807c67c6c4a652994e836206964749af9
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Sep 1 16:19:04 2006 -0700

    Add accidentally forgotten rnde test.

commit 713db8b220009c9fd10be0ce259bfa02bca7bdb0
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Sep 1 16:18:06 2006 -0700

    More renaming of gen4asm -> intel-gen4asm, plus README update.

commit 09bf91ea75e7910dbf80c173bb47310f4638b37b
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Sep 1 15:54:54 2006 -0700

    Update .gitignore for gen4asm -> intel-gen4asm

commit a1170c5e64b8fd9b7a3b3f2b88a8fafc364c3292
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Sep 1 15:40:57 2006 -0700

    Rename package and binary to intel-gen4asm.

commit a6d95cc0ce10718b92175977b4c36a2a4746b14c
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Sep 1 15:38:37 2006 -0700

    Use 0 instead of INITIAL, as the chosen lex on my debian doesn't supply it.

commit 09d8be4117105ce1759ff8023a19067cc87659cf
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Sep 1 15:37:00 2006 -0700

    Use inttypes.h to get at uint32_t instead of sys/types.h.

commit 6be3ba41573acfe7ba25c69138bd37c8329604ce
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Sep 1 13:57:02 2006 -0700

    Update the TODO with more tasks and a bit more description.

commit 4ee9c3d869742334672a1c622e2589ebeb8991cd
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Sep 1 13:37:51 2006 -0700

    Add break, cont, and halt instructions.

commit 9201e4e2a0eb2311daf5333f198631a497e06313
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Sep 1 13:37:07 2006 -0700

    Add tests for break, cont, and halt instructions.

commit f45ac8b2cca414224427069ae7edc28d5e8e4278
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Sep 1 12:29:23 2006 -0700

    Fix the exitcode type for ENDIF to be D instead of UD.
    
    Fixes the endif test.

commit 7c3ba4d49dc0f3e0629d3d2018591acebc0d954a
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Sep 1 12:25:22 2006 -0700

    Add a test for ENDIF, revealing issues.

commit 960ca001cadb2824ecbb93a2dffacf198e61cece
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Sep 1 12:11:55 2006 -0700

    Fix initialization of null reg for ELSE, and set the pop count right.
    
    This fixes the ELSE test.

commit a8eb735270722182a4a9152604d40b9be5733853
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Sep 1 12:11:24 2006 -0700

    Add a test for the ELSE instruction, revealing issues.

commit 1f58efa747e8cfedc3f4277bc0409ac3c348f6df
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Sep 1 11:56:12 2006 -0700

    Add support for the WAIT instruction.

commit 055be60abf1dc4d3b9a77a75fe83b8256caaa52b
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Sep 1 11:55:22 2006 -0700

    Add a test for wait instruction (not yet implemented).

commit d1b879192816aeccd6e49d872856f0e6e98bb1e7
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Aug 31 16:19:08 2006 -0700

    Lex integers as unsigned long instead of signed int, fixing the immediate test.

commit d72f5c9828c76b0bd7d643b37e0215ebcba4759a
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Aug 31 16:16:06 2006 -0700

    Add a failing test for maximum ranges of UD/D immediates.

commit 330903ad8189707069d8dff597ccf00706f35e94
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Aug 31 15:59:14 2006 -0700

    Parse negative integers for imm32s, and don't exceed the IP count width field.
    
    This fixes the while test.

commit d538dfc4625aaadb3e6de07528d24abd0c1fa8df
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Aug 31 15:57:35 2006 -0700

    Fix the width of the IP count field expected by the while test.

commit 892d6e7ed0b785c7e4fef754f5915e89d0282a20
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Aug 31 15:53:53 2006 -0700

    Fix copy'n'paste-o in lexing of the WHILE instruction.

commit 56cdee41afae4e4f4cef67866dc590fcd3bdc138
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Aug 31 15:28:10 2006 -0700

    Initialize the structure used for setting up the ip src/dst in branches/jumps.
    
    This fixes jmpi, if, and iff.  The while test still fails to compile.

commit 8828725dc9e5e20e22ef5968620e5b6ebde715a9
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Aug 31 15:27:30 2006 -0700

    Add tests for jmpi, if, iff, and while, revealing issues.

commit cc865f1bc0c92f5469abdced839fcb923c081f67
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Aug 31 15:14:23 2006 -0700

    Explain why rnde-intsrc is expected to fail.

commit 78cb82a1e2e0169237b836a60b5e7573066168e4
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Aug 31 15:08:52 2006 -0700

    Add some masks in comments that will help with writing tests.

commit b6fe4bbe2e4bbefcca39a33fb337eb60956d3672
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Aug 31 14:46:58 2006 -0700

    Add configure.lineno to ignores.

commit 863cd6a5b757740fdfb0598dbfdc4ee9df4be050
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Aug 31 14:46:28 2006 -0700

    Add more unary operation tests.

commit e3cc73bec41038a63a4f0a09c562a627c1ea98b9
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Aug 31 14:25:33 2006 -0700

    Start adding a test suite.

commit 356ce76d447a8a8707e399703002988f711bd0f3
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Aug 31 10:27:48 2006 -0700

    Add a rule for the ELSE instruction.
    
    Untested.

commit 1e907c7aed7c11f9b29ca8ee4d6e7916d81a5277
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Aug 31 10:21:15 2006 -0700

    Add rules for branch and jump instructions.
    
    Untested.

commit d77712994d7a6dd183e0274c2afb5f246b06c0d1
Author: Eric Anholt <eric@anholt.net>
Date:   Wed Aug 30 11:40:05 2006 -0700

    Add DO and ENDIF instructions.

commit 74c81af3ddd0af8488983acedf860fe44868ceb2
Author: Eric Anholt <eric@anholt.net>
Date:   Wed Aug 30 11:10:45 2006 -0700

    Fix a compiler warning by defining struct {in,}direct_reg at the top level.

commit cc05ba1d9ec0559c766175c06c4d3fc024cea957
Author: Eric Anholt <eric@anholt.net>
Date:   Wed Aug 30 11:09:52 2006 -0700

    Fix gram.h creation, fixing dependencies and distcheck.

commit c8939edc2822d09717ebfb37df77e2a9daef93d0
Author: Eric Anholt <eric@anholt.net>
Date:   Wed Aug 30 10:50:56 2006 -0700

    Fix issues in the grammar that caused errors in bison.

commit 9b40c3724a032b24837fdc689ba1e0ca6097350d
Author: Eric Anholt <eric@anholt.net>
Date:   Wed Aug 30 10:38:44 2006 -0700

    Add autotools build system, and rearrange directory layout.

commit 5fbc3990626328d18eeea4fbec2632b54d08772e
Author: Eric Anholt <eric@anholt.net>
Date:   Wed Aug 30 10:22:56 2006 -0700

    Add input/output file command line arguments.

commit 2d298742bfabc799251920c01b3b1db255b13145
Author: Eric Anholt <eric@anholt.net>
Date:   Wed Aug 30 09:57:20 2006 -0700

    Add support for register-indirect addressing in source operands.

commit 3bcf6b29cdef3cde36a55a5dde6d451a8d8e2f4b
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Aug 29 18:31:34 2006 -0700

    Add support for register-indirect access in destination registers.
    
    This is untested.  Also, a few bits for source operand register-indirect access
    sneak in with this commit.

commit 2dac0a19a438d27b03e901cc70ef0a9a27039154
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Aug 29 15:29:31 2006 -0700

    Add support for destination writemasks.
    
    This involved changing dest operands to have their own structure like src
    operands, as the destination writemask (which is align16-only) shares space
    with register numbers in align1 mode.

commit de1a889fe3554df47a6a751855ebae0cd1517e2f
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Aug 29 09:30:32 2006 -0700

    Avoid shift/reduce conflict in predicate by making flagreg and subreg 1 token.
    
    Thanks to keithp for pointing out where the conflict was.

commit 0ed5d93cc2f7aa74a10674c8ea0c9a0125a8521f
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Aug 28 23:05:51 2006 -0700

    Add support for predicate control.
    
    This is untested on programs using predicate control, and also causes a
    shift/reduce conflict.

commit 6a88ada7e8b1ea241c037137d7f88ab22a0e1812
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Aug 28 22:11:18 2006 -0700

    Add support for swizzle control on source operands.
    
    This required restructuring to store source operands in a new structure rather
    than being stored in instructions, as swizzle is align16-only and shares
    storage with other fields for align1 mode.
    
    These changes were not tested on real programs using swizzle.

commit 2a0f135784ebdf24917da1a8fd1f4a1c08a358eb
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Aug 25 17:44:55 2006 -0700

    Add acc[01] as src operands.

commit edc82a045c536a4b62750cd2c2f25e4b881877d6
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Aug 25 17:42:05 2006 -0700

    Comment cleanup and add missing semicolons after rules.

commit 908f37d92d3d847aaf46ce825ef7e6568445ad33
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Aug 25 17:33:02 2006 -0700

    Add support for more instruction options.

commit 6db54d7465656dee9f6e929672b86521cfc9b3bb
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Aug 25 16:54:01 2006 -0700

    Typo fix in comment.

commit 1d7d04228e8263de5c42042f3ceaab7afacf9238
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Aug 25 16:52:09 2006 -0700

    Rename direct_gen_reg struct to direct_reg now that it fills more roles.

commit 5297b2a7e89805e7e8d4f057578000ceda4139d0
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Aug 25 16:50:17 2006 -0700

    Support src ARF operands in another place, and spell it arch instead of acc.

commit 2c7876583e723dc3ede8e1023b8215d98d99c608
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Aug 25 13:53:48 2006 -0700

    Add support for more registers as source operands.

commit 883408eab8dc0d36d36acbccc4bb4cde432607ec
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Aug 25 13:38:03 2006 -0700

    Add rules for more registers, and use some for destinations.

commit 2cca382cd23c6d18d498f55692088ee1112deb8c
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Aug 25 11:10:00 2006 -0700

    Rename the resulting binary to gen4asm instead of lextest.

commit c81a6084de62479783443f57ce6c7431146d86f9
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Aug 25 11:08:03 2006 -0700

    Add a negation that the initial disasm missed.

commit f914c6ace23dbfb0edc2988dddd655a61529771f
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Aug 25 11:05:10 2006 -0700

    Add many more opcodes.

commit 569990bf6b6f1d95ffa88981d0afe8b16626e4be
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Aug 25 09:46:18 2006 -0700

    Lex the register number with the register name.
    
    This avoids the need for a start condition to prevent for example g1.8<0,1,0>UW
    being lexed as GENREG NUMBER LANGLE etc. rather than
    GENREG INTEGER DOT INTEGER LANGLE etc.

commit 3d36079ae3f9cab993b7bbec68f6fa2fbfb60136
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Aug 25 09:36:28 2006 -0700

    Add syntax for extended math send functions, and adjust packed_yuv_sf for it.

commit e865196a9d28d0097e76d606f727939c11bf6147
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Aug 24 16:37:04 2006 -0700

    Add a syntax for urb write messages.

commit 5232981c8898489d5ce69be5a3fd6ffd32432ca8
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Aug 24 15:43:50 2006 -0700

    Add some more generated files to ignore.

commit bf0b5ddbe780178fd6b31ac7fc38e61e8c8fa61d
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Aug 24 15:43:20 2006 -0700

    Add packed yuv sf kernel from 2d driver.

commit 43313946e773568b59830601daa826039fcfc908
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Aug 24 15:26:10 2006 -0700

    Add syntax for translating the DP write send message.

commit 16324215b26170b5add01028d2bc924c79d6b393
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Aug 24 14:47:21 2006 -0700

    Fix respecting of instruction options (misunderstood default action behavior).

commit 56c4ccfc193ad3b57a0d1731570a1fc81a664ce3
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Aug 24 14:35:10 2006 -0700

    Fix up sampler send message translation and give it a near-usable syntax.

commit e609d6ba93bf71be3c7d6543a8a9c7af4747dedc
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Aug 24 12:36:56 2006 -0700

    Zero out the initial header instoptions.

commit 2093218bcdfc3ff687422335f1faec5ed5e47eee
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Aug 24 12:36:21 2006 -0700

    There's no reason to provide typing or region on the null register.

commit 56b50b68032d181ae9f2bc75e8c606d2238266e7
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Aug 24 10:51:48 2006 -0700

    bzero instructions before filling in the bits we care about.
    
    This avoids some set bits in padding fields.

commit 7c330fbf3aeb6ea488da87c1a399bf20bce37c93
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Aug 22 15:21:44 2006 -0700

    Fill in type of null register to match Mesa.

commit ac32bb09ebdfc7fd675aab30c7663edde7e37102
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Aug 22 15:21:28 2006 -0700

    This code was supposed to be null instead of acc0 (brw_disasm.c gave "a0").

commit a34d1e0d8ce889ea93833c5b02128e93f3c69290
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Aug 22 14:52:14 2006 -0700

    Fix translation of message registers.

commit 90aea5198313fe5b548f31badc714a63aa0dffce
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Aug 22 14:46:39 2006 -0700

    Fix translation of saturate value, and wire conditionalmod to 0 for now.

commit b9e6224587f13846eab5ccf6db5054d129169529
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Aug 22 14:43:03 2006 -0700

    Remove generated source from repo.

commit dc96c56d9e9da633795fe512067efcc444bcbe2d
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Aug 22 14:42:45 2006 -0700

    Add support for negate and abs to source operands.

commit 0d929b430b301859d775c05f4687db1665a1f6f9
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Aug 22 13:33:41 2006 -0700

    Fix imm32 translation.

commit 0edcb2561d5ccde869b6f3b67479de37a62ceeb6
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Aug 22 13:15:38 2006 -0700

    Fix dest_horiz_stride translation, and destination type.

commit b798c7c9daa298acc64cd8fd9ca53b8f3922561d
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Aug 22 13:15:00 2006 -0700

    And add a comma.  This was supposed to be a minor change.

commit fc022c1bc23588515dbb91f21764cd34138bb79a
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Aug 22 13:14:09 2006 -0700

    Remove generated file.

commit d4c82e8278a901c9c329906f0e43512ac6669f5d
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Aug 22 13:08:26 2006 -0700

    Fix horizontal stride translation.

commit f2f18561e524a202163cf73a00b11f5a4647ce9d
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Aug 22 12:46:37 2006 -0700

    C warnings cleanup.

commit 1c62350848470e9cfe357bb59119742f50542be0
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Aug 22 12:44:28 2006 -0700

    Add Wall.

commit a58d896dfea42bdd9e5da05a1263bcd2b4e55e6d
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Aug 22 12:42:25 2006 -0700

    actually print out last uint32_t of instruction.

commit 19f1c1cec4ad712c6e3e4a257d624dec2da4bb97
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Aug 22 12:41:09 2006 -0700

    Start correcting the translation.

commit 6c98c8d578ab5feb65a9f6827a7e1bad11468575
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Aug 22 11:54:19 2006 -0700

    Get the wm program to parse.

commit 22a1063cc014437bee07bdaff2c38c2e843d12d2
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Aug 22 10:15:33 2006 -0700

    Initial gen4asm code.

commit 7ee278f17613d07ee18070f83aca9f050a526a72
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Feb 20 14:40:07 2013 +0000

    build: Guard the inclusions of config.h with HAVE_CONFIG_H
    
    autoconf can be configured to not generate a config.h but to give the
    defines with command line arguments instead. In this case, there's no
    config.h to include.
    
    To work in both cases autoconf adds a HAVE_CONFIG_H define on the command
    line to signal there's a config.h to include.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit aa2bd8a6921b751d2f8a5caa0001e386f139fecc
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Feb 19 00:39:04 2013 +0000

    lib: Allow to override the device id at run time
    
    Using the same environment variable as libdrm so one doesn't have to
    remember two different things. This is helpful to run a test under a
    fake identity, to, say, dump an aub file.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 75f52a6e3b334e817d5adb2e5fb0b00a4de36b8f
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Feb 18 23:49:48 2013 +0000

    lib: Factor out a function to check if an environment variable is set
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit 6c04309579805e595749e7918c7901d63a36f581
Author: Kenneth Graunke <kenneth@whitecape.org>
Date:   Fri Mar 1 15:36:20 2013 -0800

    intel_chipset: Fix Haswell CRW PCI IDs.
    
    The second digit was off by one, which meant we accidentally treated
    GT(n) as GT(n-1).  This also meant no support for GT1 at all.
    
    Signed-off-by: Kenneth Graunke <kenneth@whitecape.org>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2155b16af2a382055b4059ce21786b77305d8910
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Feb 21 18:31:20 2013 -0800

    quick_dump: prettier printing
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit cf17d10828a42bacce9932d1d19f4d64d14a9479
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Tue Feb 19 09:53:43 2013 -0800

    fix arch build: update ax_python_devel.m4
    
    I complained about the broken m4 script, and it got fixed. I love the
    internet.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 84b525cf46c2d835f81f778a6e732cf69aa20bea
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Feb 18 21:41:10 2013 +0200

    intel_chipset: Add multiple inclusion guards into intel_chipset.h
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d7b06f50d2856c6d78b704e835b7af57a8d70060
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Mon Feb 18 21:41:09 2013 +0200

    intel_chipset: Use parens around macro arguments
    
    Protect the macro argument evaluations with parens.
    
    This is already touching most lines, so while at it, fix up all white
    space to uniform style throughout the file.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6526d8c6fcc10f1b100c570f1d924154cd43b2e9
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Feb 12 14:24:40 2013 +0000

    tests: Forbid to run the blit tests with count of 1
    
    Invoking say,
    
      sudo ./tests/gem_render_linear_blits 1
    
    does not make a lot of sense as we're creating a single bo. The test
    does not yell at you and passes, even if the rendercopy function does
    not do anything. This makes it quite harmful when trying to debug
    rendercopy without realizing that count is the number of allocated bos
    and must be >= 2.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 50c45f9586843bb3b83d9bed5d9738145ba05866
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Feb 13 16:29:02 2013 +0000

    tests: Add a quick variant to the gem_storedw_* tests
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bb33d08845db2cf368240e737090ca3938b5ba64
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Feb 13 16:29:01 2013 +0000

    lib: Add a way to specify values for "quick" runs
    
    In some environments, we don't really want to loop 100000 times or
    allocate 152352621 buffers because it makes the tests too long to run.
    
    This adds a way to specify "quick" values to reduce the time taken by
    certain tests.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6157d242a572c21970e98d36e0837d106f6b2d0e
Author: Yi Sun <yi.sun@intel.com>
Date:   Tue Feb 12 23:11:35 2013 +0800

    tests/testdisplay.c: Remove the variable only_one_mode.
    
    That variable is useless, instead the variables specified_mode_num and specified_disp_id can cover all the situation.
    For parameter -o, all three instances should work:
    
    ./testdisplay -o 21,4 only test the 4th mode on the connector with id 21.
    ./testdisplay -o 21   test all the mode lines on the connector wiht id 21.
    ./testdisplay -o ,4   the -o is ignored, just like -a.
    
    Signed-off-by: Yi Sun <yi.sun@intel.com>

commit 05795daebf3b4d37b89422a2fca0236ee6a26b73
Author: Matt Turner <mattst88@gmail.com>
Date:   Fri Feb 8 19:36:54 2013 +0000

    quick_dump: Makefile.am best practices and fix distcheck
    
    A few changes
      - Put CPPFLAGS in AM_CPPFLAGS instead of a per-target CFLAGS var;
      - Use _LIBS/_CFLAGS from pkg-config instead of hard-coded values;
      - List non-generated scripts in dist_bin_SCRIPTS;
      - Add chipset.py to the run that implicitly generates it, which fixes
        distcheck.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit c73eab9f4043ee2c9be00250190a2833bf307aee
Author: Matt Turner <mattst88@gmail.com>
Date:   Fri Feb 8 19:36:53 2013 +0000

    configure.ac: fix autogen.sh
    
    Put -I m4 in ACLOCAL_AMFLAGS so ./autogen.sh just works
    
    [ben: commit message modified by]
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 6b77e04560060c24b45a17059e135cd185871381
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Feb 7 18:58:17 2013 -0800

    quick_dump: chdir us to where the text files are
    
    This is useful if you run out of the quick_dump directory.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit d8d114bca34239d046fb7ccb16b2efefff5fa41b
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Feb 7 08:35:57 2013 -0800

    README: Add quick_dump info
    
    Reviewed-by: Paul Menzel <paulepanter@users.sourceforge.net>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 1cce7eb21b0d78bf8a8848ad1698309f683b9d9d
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Feb 7 08:28:14 2013 -0800

    quick_dump: Give dumper an AM_CONDITIONAL
    
    It may sometimes be undesirable to build or install the quick dumper.
    This was requested by Damien.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 1f2e037e8fabaa30264c1ad8c3dc0e4fc5e13769
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Sat Feb 2 11:31:46 2013 -0800

    quick_dump: Use the register access library
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit beb5de858d38ec3c4d27da749fcecf460e6bd59d
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Fri Feb 1 20:13:25 2013 -0800

    quick_dump: Connect libpciaccess and other utils
    
    Make a register access library with sample to do register reads
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 6437eed930c089a5b8b860daac03cfe537b285a9
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Fri Feb 1 14:54:31 2013 -0800

    quick_dump: SWIG chipset interface
    
    This isn't strictly necessary it would have been easy enough to simply
    convert intel_chipset.h but this should be nice prep work for directly
    doing MMIO. It also serves as a nice review point.
    
    It's demonstrated with an autodetect function in the script. That
    autodetect has a hardcoded path that shouldn't be there, but it will go
    away in the next patch when we can properly link in libpciaccess.
    
    Thanks to Matt for helping whip the automake stuff into shape.
    
    v2: Switch to $(top_srcdir)
    
    Reviewed-by: Matt Turner <mattst88@gmail.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 508b5ce9a5e39a0fa78b2cf0e3706a53cb066bc6
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Fri Feb 1 14:53:19 2013 -0800

    configure.ac: Add swig dependency
    
    As far as I can tell (and recommended to me by Matt) taking these m4
    extension macros from http://www.gnu.org/software/autoconf-archive/
    doesn't require the project distribute GPL. I am a bit confused from
    reading the license. I'd really hope someone can comment.
    
    The only other solution would be to roll my on m4 macros, or figure out
    a way to check that this autoconf-archive package is included from the
    configure.ac.
    
    Reviewed-by: Matt Turner <mattst88@gmail.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit ebc918601ed3239f61d7d5c4d28e8c768422652a
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Jan 31 11:09:15 2013 -0800

    quick_dump: vlv support
    
    This patch includes a patch from Jesse which removed a bunch of VLV
    registers which were useless in my original RFC.
    
    Cc: Jesse Barnes <jbarnes@virtuousgeek.org>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit b96821cb392639319a69dde8008f94b014ad7d3e
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Jan 31 11:08:36 2013 -0800

    quick_dump: gen7 support
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 45cc039e315ca0eb4e673c480dcad371096b58ea
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Jan 31 11:08:06 2013 -0800

    quick_dump: gen6 support
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit ac1634e23cdedf0e9467e607220437c96f010a0a
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Wed Sep 19 22:08:46 2012 -0700

    quick_dump: A dump utility different than reg_dumper
    
    This is the base tool for quick dump. At it's heart, quick dump is
    simply a basic text parsing thingie which plugs into intel-gpu-tools to
    do something similar to intel_reg_dumper.
    
    The format for the register definition files is very open, so it's just
    something simple for now.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 66ec9bd4e7abc7e65edf6518b034ec55b3b7d682
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Feb 7 08:29:24 2013 -0800

    configure.ac: Move prime stuff to where it belongs
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 3a752a3d9a7aa2c9d8c710c7c889e9cd09384aed
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Feb 7 10:30:03 2013 -0800

    configure: slightly more standard --disable-tests
    
    Cc: Julien Cristau <jcristau@debian.org>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 7c170724003f42cd4ceea9f6c805292bbe2e81b2
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Tue Feb 5 16:17:54 2013 -0200

    Build: Add --disable-tests configure flag to avoid tests build
    
    Tests are still being built by default. However this request
    came from OSVs in order to allow them to include i-g-t in their
    distributions by default avoiding adding more and more dependencies
    since we are improving and adding more and more tests.
    
    v2: wait for Ben's spacing fixes and adjusted for new space rules.
    
    Signed-off-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>
    Acked-by: Paul Menzel <paulepanter@users.sourceforge.net>
    Reviewed-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c75b8c60b52cd75f756e59fcfd4ce971e9189509
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Jan 31 13:06:17 2013 -0800

    configure.ac: Add vim magic modeline
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 90f0b3dcf361cfed86f3222028f7a8d525159e66
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Jan 31 13:04:18 2013 -0800

    configure.ac: Fix spacing
    
    Almost all based on vim's config file type. It got it wrong in a few
    places which were fixed by hand.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit b8e5965e8fb1820f5709a4762e04af5b183b0a2c
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Tue Feb 5 12:26:49 2013 +0200

    tests/gem_ctx_exec: properly test destroy_ctx ioctl
    
    Call context destroy with proper ioctl number and
    add test to verify that we can't post batchbuffers
    with destroyed context.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f5c3e5811e2d29ee0c00dc4fc49ab776f247203f
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Mon Feb 4 17:47:53 2013 -0800

    intel_gtt: Fix PTE offsets
    
    Vincent sent me a patch which I think didn't go far enough.
    
    Honestly, I don't even know what this tool does.
    
    Reported-by: Cheah, Vincent Beng Keat <vincent.beng.keat.cheah@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit f9c8e365e972bf7ec6dd690096acaa21372e9826
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Feb 4 21:41:13 2013 +0000

    intel_error_decode: Don't barf on a malformed PCI ID line
    
    Whoops, someone added UTS_RELEASE with no newline before PCI ID which
    upsets our naive parser.

commit 34c66d073919424438356befbee7bc45609fb340
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Sat Feb 2 11:24:39 2013 +0100

    add more VLV PCI IDs
    
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit 8c4bb7022b0b8327c3b41eeb34a14c415cca0d80
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Jan 30 14:52:24 2013 +0200

    kms_flip: Add flip-vs-modeset-vs-hang test
    
    The flip-vs-modeset-vs-hang test will:
    1. simulate a GPU hang
    2. exec a nop batch
    3. schedule a page flip
    4. perform a modeset operation
    
    With the current buggy kernel driver, the modeset operation will
    hang indefinitely waiting for the flip to complete. Since the
    rings are stopped, that will never happen. The current GPU reset
    code doesn't play well with page flips either, so a GPU reset
    won't fix things.
    
    Once the kernel driver is fixed, the eventual GPU reset will
    save the day.
    
    The nop batch buffer is required only because the kernel can't
    currently detect GPU hangs, unless there is at least one user
    submitted request pending.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e1d1beb47849875b65b4f970251e58d5918d6187
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Wed Jan 30 14:52:23 2013 +0200

    kms_flip: Make flip events optional
    
    Pass an argument to do_page_flip() telling it whether to request flip
    events.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit fb7bc2e8d1dcc626778f4e8f3346a2ecbdfe4b04
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 17 15:07:50 2013 +0000

    tests/gem_lut_handle: Limit testing LUT interface to recent kernels
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d5517a1301f066465c3b2941542fb8aec66aa5e3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 17 15:05:20 2013 +0000

    tests/gem_lut_handle: Expand negative testing
    
    Pass in lots of execs and relocs trying to trick the kernel into making
    a mistake.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 230d77f1d0069a48d83b9829573712935d49fbd5
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Nov 14 12:15:01 2012 +0000

    tests: Benchmark new API for using a LUT with the execbuffer
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ec2eac6d7b3e11a37e8ba96bc0453ca1d91ba715
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Nov 14 12:15:01 2012 +0000

    tests: Exercise new API for using a LUT with the execbuffer
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cdd352df95b8dfd6a6bab7014be2a15526643721
Author: Yi Sun <yi.sun@intel.com>
Date:   Sun Jan 13 10:10:24 2013 +0800

    tests/testdisplay.c: Fix the issue which don't display anything until '-o' given.
    
    Signed-off-by: Yi Sun <yi.sun@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c612481a196f642ae6a3a67631d7a312e506e1b4
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Tue Jan 8 13:16:06 2013 +0200

    tests/gem_seqno_wrap: skip if debugfs entry is not there
    
    Return error code 77 to skip test if debugfs entry is not
    available.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=59116
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2d0a8e8545351e70112a6df2ce86932a5a2046d0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jan 7 11:43:38 2013 +0000

    tests: Add basic testing of gem_pin
    
    Including exercising races versus interrupts.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cda8bee056c71acd01b2a70258f99d43ba826198
Author: Thomas Jarosch <thomas.jarosch@intra2net.com>
Date:   Tue Dec 25 18:06:57 2012 +0100

    Fix out of bounds memory access
    
    cppcheck reported:
    [tools/intel_infoframes.c:836]: (error) Width 31 given in format string
    (no. 1) is larger than destination buffer 'option[16]',
    use %15s to prevent overflowing it.
    
    Signed-off-by: Thomas Jarosch <thomas.jarosch@intra2net.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 05bfbf422723fbb6c6e085e9b7f1bdb41afab7c8
Author: Yi Sun <yi.sun@intel.com>
Date:   Wed Dec 26 17:12:39 2012 +0800

    tests/testdisplay: Specify the display.
    
    It can specify the display by the connector id which list as the first column of ./testdisplay -i.
    E.g. command "./testdiplay -o 1,4" means setting number 4 mode line on the display with connector id 1.
    
    v2. Specify the display by id which can be got from option '-i'
    
    Signed-off-by: Yi Sun <yi.sun@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 33f09f6954d0b5213f26f987c39ab63182d55369
Author: Mika Kuoppala <mika.kuoppala@intel.com>
Date:   Fri Dec 21 14:06:02 2012 +0200

    tests/gem_seqno_wrap: adapt to new next_seqno debugfs interface
    
    - adapt to use debugfs interface that can set seqno to arbitrary value
    - fix dynamic buffer allocation
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5825cf807ea29772d2dff6135be9c15c61d04155
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Dec 20 23:30:10 2012 +0100

    tests/prime_nv_pcopy: guard output for subtest listing

commit 71ba0038dbd8574a959f0e742e7dcac843426805
Author: Dave Airlie <airlied@redhat.com>
Date:   Tue Aug 14 14:16:04 2012 +1000

    intel/udl tests;
    
    basic test to share a BO, add as a udl framebuffer, and call the dirty
    ioctl on it so we cause the vmapping to happen
    
    [danvet: Snatched up from Dave's prime branch, ocd name and bikeshed
    whitespace a bit.]

commit d798ab9c2a092a08e14c6f2dfb1777376ba407a8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Dec 18 22:55:58 2012 +0100

    tests: add testcase to check igt runtime enviroment
    
    Now that we've abandonded the autohell testrunner, need to port this
    over. Easiest is to just add another testcase ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f0546374a001bbf8a4e05548a5320d05f3cc2d02
Author: Ville Syrjälä <ville.syrjala@linux.intel.com>
Date:   Tue Dec 18 16:51:27 2012 +0200

    kms_flip: Add -lrt back
    
    kms_flip doesn't build due to missing -lrt.
    
    The build was broken due to a typo in this commit:
    
    commit acdf7171264a5139caabb78127c9eef5080c0682
    Author: Daniel Vetter <daniel.vetter@ffwll.ch>
    Date:   Sat Dec 15 00:48:47 2012 +0100
    
        tests: s/flip_test/kms_flip
    
        OCD wins!
    
        Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    
    For some reason libudev.pc brings in -lrt as well, which probably
    caused the typo to go unnoticed.
    
    Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cef68158dd39fa36f7273a603e2a571b98527d67
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Dec 18 10:25:15 2012 +0100

    tests/kms_flip: don't die on stdin input
    
    Seems to be a leftover from fliptest ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0af2b184ad0d876936091e58028cca56de30b850
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Dec 15 01:06:11 2012 +0100

    lib: extract kmstest_get_pipe_from_crtc_id

commit 573d59dd148d9fedceb8aaeeb88b76cfc5564c40
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Dec 15 01:05:33 2012 +0100

    tests/gem_flink: enable flink lifetime subtest
    
    Somehow fumbled this.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit acdf7171264a5139caabb78127c9eef5080c0682
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Dec 15 00:48:47 2012 +0100

    tests: s/flip_test/kms_flip
    
    OCD wins!
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f56384c2c0264989acae7b8c7efb5030a6c94caf
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Dec 15 00:41:01 2012 +0100

    tests/flip_test: add flip vs. rmfb testcase
    
    To check that the kernel doesn't fall over when tearing down a life
    fb. Confirmed that it exercises the right codepath with printk.
    
    Also fix an issue Imre introduced in
    
    commit fe7fea0be3b5f418b76dc7834e73b31827484429
    Author: Imre Deak <imre.deak@intel.com>
    Date:   Tue Oct 16 04:09:43 2012 +0300
    
        flip_test: add event sequence number tracking
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit df41e1a6bbe75f047e83bb543e0b0564ed10862b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Dec 13 21:30:43 2012 +0100

    flip_test: recreate fb
    
    ... to test the latency of rmfb, getfb and addfb. Since if those still
    can cause spikes, we have a problem.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8ed0112f88a8738d3e813428e5045333a6e07fbf
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Dec 13 21:10:58 2012 +0100

    tests/flip_test: split out timestamp checks into subtest
    
    This way we can still test basic pageflips on kernels with broken
    locking while still failing when the timestamps/framecounts are wrong.
    
    Also disable the delay check on analog tv, timings on those ports are
    truely screwed-up
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f185699a4ba904569db286cdb3386512a2540af2
Author: Alan Coopersmith <alan.coopersmith@oracle.com>
Date:   Sun Dec 16 10:38:54 2012 -0800

    tests/gem_seqno_wrap.c: include <signal.h> for definition of kill()
    
    Fixes build failure on Solaris:
    gem_seqno_wrap.c: In function ‘run_cmd’:
    gem_seqno_wrap.c:328:3: error: implicit declaration of function ‘kill’ [-Werror=implicit-function-declaration]
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c2e05af3538830f0fd1f0e750a99b2e10b84e991
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Dec 15 15:38:31 2012 +0100

    tests/prime_nv_pcopy: convert to subtests
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cc4eeb990f0378f2e3166c4d03699d4873747c38
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Dec 15 15:30:19 2012 +0100

    tests/prime_nv_tests: convert to subtests
    
    And properly fail the failing ones - bloody hate it when the tests lie
    to me ...

commit c0a74d8d505b00ff823ce2ad47b0fc2f7d0cebb7
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Thu Dec 13 14:11:24 2012 -0200

    tools: intel_gpu_abrt bug report template.
    
    checking if file has been generated and output a template for a good bug report

commit 3ab148331a37ace6eb73d17bd3803602eabd7c17
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Thu Dec 13 14:11:23 2012 -0200

    tools: intel_gpu_abrt checking for root access
    
    needed by other igt tools that are collecting more usefull information.

commit 616a4de567f574e42233b10d3546a3e1b5394e66
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Thu Dec 13 14:11:22 2012 -0200

    tools: intel_gpu_abrt collecting more useful info

commit 7150a04124ae151c3e917bbad03442cebaeaecd6
Author: Rodrigo Vivi <rodrigo.vivi@gmail.com>
Date:   Thu Dec 13 14:11:21 2012 -0200

    tools: intel_gpu_abrt "get" function
    
    A function to make it easy to collect any file or directory needed later.

commit a2452d68a062e3fda2ac1c3bc92b8fd083a0cf68
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Thu Dec 13 12:43:35 2012 +0200

    tests/gem_seqno_wrap: dont sync when crossing half of seqno space
    
    For seqno comparison to work they have to be less than UINT32_MAX/2
    apart. So when crossing the half way of seqno space, be careful not
    to sync anything as this causes gpu hangs. Do real test with
    syncing only when we are about to wrap.
    
    v2: Don't spam if no rendercopy was found, only warn once

commit 7ab837b21473a9e7bf5565a8fa862349d37bc597
Author: Imre Deak <imre.deak@gmail.com>
Date:   Fri Dec 7 20:30:28 2012 +0200

    flip_test: fix link error due to missing -lrt
    
    Needed by clock_gettime(). This isn't a problem if libudev is used,
    as that pulles librt with it.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e0ce231bf3d0ca14a2c10423f0d0affca999b447
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Dec 12 14:33:17 2012 +0000

    tests/gem_*_tiled_blits: Use the vma limiter to present address space exhaustion
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=58113
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit de9621b4f5972fc6f137b241a1b904d7cac9742b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Dec 12 13:58:04 2012 +0000

    tests/gem_tiled_pread_pwrite: Allow the kernel to reap the GTT address space
    
    Otherwise we can not run this test on 32-bit systems.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit b1ee03c540af86708a8dd1674032712cba7aa1f1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Dec 12 13:56:09 2012 +0000

    tests/gem_tiled_swapping: Don't needless crash on 32-bit systems
    
    Only 32-bit of mmap address space, but with PAE we may be trying to
    allocate more than 4 GiB of memory.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4cd21795d2ba882a4197769e516b021a5a4c806d
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Tue Sep 11 19:01:46 2012 +0200

    tests/prime_nv_pcopy.c: fail if nouveau_pushbuf_kick fails rather than spinning

commit 30842637820b15916198cca45065826115864473
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Dec 7 23:34:23 2012 +0100

    tests: disable gem_exec_bad_domains/conflicting-write-domain
    
    Kernel checks have been eased in
    
    commit c1f093e09c4ceb583b04d11e767bb3201812e4d2
    Author: Chris Wilson <chris@chris-wilson.co.uk>
    Date:   Mon Dec 3 11:49:07 2012 +0000
    
        drm/i915: Remove check for conflicting relocation write-domains

commit c0dbf04b0536aeff95dd56aa7847b3483d95e61f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 6 20:36:24 2012 +0000

    tests: Add a basic test for tiled render copies
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1945e2a7f18dc2e4c46010ab8b7774679fc217d3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 6 17:18:52 2012 +0000

    Implement a working gen7 rendercopy
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=57825
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3ad92902e1ed51894ddece2ae2a698ff55ac8adf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 6 19:32:14 2012 +0000

    tests: Add basic test for render blits
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 50fdf32e46bcfd01e83b813d6a1fd0dc5b686692
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 6 12:16:12 2012 +0000

    pci: Search for the first Intel GPU, rather than assume a fixed slot
    
    Everywhere else we search for a match based on an Intel display
    device, so if the quick check of the fixed slot fails, fallback to
    walking the PCI bus looking for a match.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 51f08301ab5702db673fd4c2543ead7251641939
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Dec 5 19:29:11 2012 +0100

    tests/gem_exec_nop: implemented correct SKIP reporting
    
    I think I need a testsuite for test writing.

commit 53e184b228b9bda43df75aa4ff919bc23f5caa09
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Dec 5 10:09:08 2012 +0100

    tests/gem_dummy_reloc_loop: some updates
    
    - convert to subtests
    - shut up stderr output for successful runs
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ad5919617cbccd2f7a2c8311c8ebe83e6d0acd52
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Dec 5 04:16:38 2012 +0100

    tests: fixup gem_exec_nop subtests
    
    Note to self: No more pushing after 12 o'clock midnight. Not a good
    idea, too embarassing.

commit d9d9578f3bd25734e8dc85b620c9c9073161d7fb
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Dec 4 17:13:05 2012 +0100

    tests: run no-op batches on all rings
    
    For Ben ...

commit 796fd58a17aa93e3e1a62549afde5984a10ebdee
Author: Mika Kuoppala <mika.kuoppala@linux.intel.com>
Date:   Tue Dec 4 19:43:13 2012 +0200

    tests: add gem_seqno_wrap
    
    This test uses debugfs entry to set next_seqno close
    to a wrapping point and then creates a load with dependant
    buffer objects or with specified command to induce the wrap.
    
    v2: Use new get_rendercpy_func as suggested by Daniel Vetter.
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d0f3a0d77a7792a38d7571b011bb6cf5ad604b4a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Dec 4 10:42:15 2012 +0100

    README: piglit requires results-file for testruns
    
    Noticed by Mika.

commit 175fc656ebc17e5cb01d87215268af7628d700ae
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Dec 4 10:37:55 2012 +0100

    tests/Makefile.am: Add a comment about the subtest infrastructure

commit df545c19689463a0f6f70fa4cc3f3dd3a1eabcdb
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Dec 4 10:34:46 2012 +0100

    README: add quick howto for using piglit as testrunner

commit 6daae8bcb6b4a930c9677f87fa24675581b69072
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Dec 1 13:07:45 2012 +0100

    tests/gem_flink: check flink lifetime rules
    
    flink names may not be destroyed while there's still a userspace
    handle around. Test this by
    - exporting an flink name from fd2
    - open a gem bo from that name in fd
    - close fd2, then open a new drm file (so that the original handle
      disappears)
    - check whether the same flink name still works

commit d8df90dc6bce77842c781aa0907147cecce4b5f6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Dec 1 00:51:53 2012 +0100

    tests/gem_exec_bad_domains: add more bad domains
    
    - mulitple write domains
    - conflicting write domains
    - not-yet-defined gpu domains
    
    Also convert to subtests while at it.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit da6473184ccd35d203a1de435b7b500f5c222662
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Dec 1 00:52:24 2012 +0100

    tools/intel_reg_dumper: add some cpt/ppt debug regs
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0d7139af5813f227f120bf13152c35dd08774e6b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Nov 29 15:01:09 2012 +0100

    tests/gem_stress: prevent segfault in getopt parsing
    
    Needs a terminal element in the long option array.

commit 64f669f7a94d459437a4dd47142ef2bb9870c5e6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Nov 29 14:59:57 2012 +0100

    lib: extract get_render_copyfunc
    
    Otherwise we won't update all the tests if we add new render
    copyfuncs.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d79414f64a599e5ec35f5e865a5e24858602d186
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Nov 29 11:27:32 2012 +0100

    tests: disable gem_non_secure_batch
    
    Seems to cause hangs on some of my old gen2/3 machines, but not all of
    them.

commit df11a6f31d98eb56568a3fc234e6e6294c72e4ab
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Nov 28 13:25:12 2012 +0100

    tests/gem_tiled_partial_pwrite_pread: convert to subtest infrastructure

commit b0066d3659ce0814fba396626436e6bc7b369580
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Nov 28 13:22:39 2012 +0100

    tests/gem_tiled_partial_pwrite_pread: refactor subtests into functions

commit 129d2013377f93da78e24c6616b61acac235dc0a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Nov 28 13:10:26 2012 +0100

    tests/gem_set_tiling_vs_blt: convert to subtest infrastructure

commit ca2851f827d5f60283dc8c202006a2f5095c738b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Nov 28 13:08:20 2012 +0100

    tests/gem_ringfill: convert to subtest infrastructure

commit 046b149b18d485ee0dbe3419944f5b9db47389fb
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Nov 28 13:08:07 2012 +0100

    tests/gem_partial_pwrite_pread: convert to subtest infrastructure

commit 1a55ca753e3250baec32aa87cdea18b746141325
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Nov 28 12:47:26 2012 +0100

    tests/gem_partial_pwrite_pread: refactor subtests into functions
    
    This was a too big mess.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit af228d4edc44fc539e6a28ac68ce7a880d036f99
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Nov 28 12:40:23 2012 +0100

    tests/gem_mmap_gtt: convert to subtest infrastructure

commit 7160c534f8283eb6fa1796406fcec70132b6b82a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Nov 28 12:38:00 2012 +0100

    tests: re-enable gem_hangcheck_forcewak
    
    Was accidentally disable in ab3f4bdafe60dede32a48674ef9920df090bf3a7
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a2778575d5f469e67a3d2dbd5293cfe79cbe8b6e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Nov 28 12:35:03 2012 +0100

    tests/gem_gtt_concurrent_blit: convert to subtest infrastructure
    
    Same treatment as for gem_cpu_concurrent_blit.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2a9e128b18df8e3683b165378d884ce24147f04d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Nov 28 12:17:40 2012 +0100

    tests/gem_flink: convert to subtest infrastructure

commit 9d65d484f65c841c878fa946e905f9297df62dac
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Nov 28 12:09:58 2012 +0100

    tests/gem_cs_tlb: convert to subtests
    
    Again required a bit of shuffling to avoid expensive setup and some
    logic to properly handling 'skip' when only running a subtest.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4f6ab180a11128627385db722d06db60fa6023ff
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Nov 28 12:00:33 2012 +0100

    tests/gem_cpu_concurrent_blt: convert to subtest infrastructure
    
    Small changes to avoid expensive setup just to print out the subtest
    list, and setting up the source buffers such that "early-read" works
    without having run "overwrite-soure" right beforehand.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 792a05a0a1c7b901093c3542ec96b5d7a9a9f253
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Nov 28 11:41:33 2012 +0100

    tests/gem_cacheing: convert to subtest infrastructure

commit 3cca0d8c6d33837e1e5a3f1bd1210cb37bb94a18
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Nov 28 11:16:44 2012 +0100

    tests/gem_basic: convert to subtest infrastructure

commit c3d5c1292bac53ac14d8661d8ac76c5a79752016
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Nov 27 20:33:15 2012 +0100

    tests/flip_test: use subtest infrastructure
    
    To make the testnames easier to handle in scripts, replace all
    spaces with dashes.
    
    The important part is to not print anything to stdout when enumerating
    subtests, so protect the timestamp test with the right check.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9fc7e1386aade4cf0cd0e27354f47cde48253fb6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Nov 27 20:03:25 2012 +0100

    lib/drmtest: subtest infrastructure
    
    To make these helpers as least invasive as possible simply initialize
    the options with a getopt parser and let the control flow be steered
    with a simple helper which gets the subtest name as an argument.
    
    The only tricky part for using it is that the subtest check helper
    doubles up as the conduit to enumerate tests (and in that mode
    prevents any test from being run). It is therefore important that
    nothing gets printed to stdout outside of these checks.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 021909e10d1bf9192c6245802b0df4866681b3f0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Nov 27 20:04:15 2012 +0100

    tests: dont polute stderr if the test succeeds/skips
    
    Results in spurious 'warn' results in piglit. Also don't print
    progress indicators when not outputting to a terminal.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4fae0c65c5c1fdf5403a31104890a279fd7b544f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Nov 27 16:38:43 2012 +0100

    tests: remove ZZ_check_dmesg from runner
    
    This is getting in the way of piglit integration. If we want this
    functionality again, we should integrate it into the IGT piglit runner
    as an option.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c79c56cf8c994e5a2e679008576b1d1329f4e687
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Nov 28 11:08:31 2012 +0100

    tests: infrastructure for piglit runner
    
    Piglit needs a way to grab the latest list of tests to run, so add new
    make targets to dump those. Note that for future extendability we'll
    dump 2 different lists, one for single-testcase tests and one for
    testcases with enumerable subcases. Some support code for the later
    will follow in subsequent patches.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b11887741cdcf28d962aa7957b2f8fd30b081e6b
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Tue Nov 27 19:14:05 2012 +0000

    testdisplay: Use the fb stride when painting the color key
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=55901
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e5315f9dad8eb1f24ce23d2a0b636a5ee3f4900a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Nov 25 13:55:55 2012 +0100

    tests: add gem_non_secure_batch

commit 314953117fde1b96aa9c310bd5ad1d53842fddd2
Author: Imre Deak <imre.deak@intel.com>
Date:   Thu Nov 22 16:46:36 2012 +0200

    flip_test: switch to using monotonic timestamps (v2)
    
    Since monotonic timestamps are now the preferred time format, change
    timestamps checks to compare against monotonic instead of real time.
    Also add two tests for DRM's compatibility mode where it returns real
    timestamps.
    
    v2: drop the tests for the compatibilty mode (Daniel)
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b7067d6c10d44c73d35828c6a39056ed7862fb40
Author: Imre Deak <imre.deak@intel.com>
Date:   Thu Nov 22 15:25:05 2012 +0200

    flip_test: use monotonic time to measure the test duration
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8a2593bd3c1f56f03a925d86c3865479505ddb66
Author: Imre Deak <imre.deak@intel.com>
Date:   Thu Nov 22 15:25:04 2012 +0200

    flip_test: skip check for last_received_ts for the first event
    
    The old way worked too, but just skipping the test for the first event
    is more logical/simpler thing to do.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b28caa0ac0fc7ae187100d0a79173ab11bb52128
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Oct 23 12:07:52 2012 +0300

    flip_test: add wf-vblank test for expired sequence
    
    In v2:
    - Wait for the seq that just completed (current_seq) not last_seq - 1.
    - Do an equality check for ts and seq instead of >=. The previous
      issue didn't let us do this before.
    - Simplify the condition when we do an "expired sequence" check by
      only using the last flip event as a reference.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c7dd1dcdd9b04cf8aae12c59091497d71fe54a15
Author: Imre Deak <imre.deak@intel.com>
Date:   Mon Oct 22 20:40:07 2012 +0300

    flip_test: add comment about the race between flip vs. vblank events
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7f32adc6c5364308f402f981ebde7f3689849471
Author: Imre Deak <imre.deak@intel.com>
Date:   Mon Oct 22 20:40:06 2012 +0300

    flip_test: check if the vblank and flip states correlate
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 429dc016360946c4b126bf453187a2cb5d7dd003
Author: Imre Deak <imre.deak@intel.com>
Date:   Mon Oct 22 20:40:05 2012 +0300

    flip_test: fixup zero timestamp for premature vblanks
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5fc312e9f1e19dfdbb1427d344489aa09002dcdd
Author: Imre Deak <imre.deak@intel.com>
Date:   Mon Oct 22 20:40:04 2012 +0300

    flip_test: increase duration for vbl+flip tests with ts check
    
    We need a big enough duration, so the hotplug event's affect doesn't
    distort our final frame count too much.
    
    Without this these tests will exit with a "dropped frames" error.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 554237f35109b64d1ecd5a309190c4f654f49dab
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Oct 18 22:37:20 2012 +0200

    tests/gem_cs_tlb: make it more robust
    
    ... using a fine roll of duct-tape. Dunno what exactly leaks out from
    the previous testcase, but the bo gets moved about a bit and makes the
    self-check of the test fail.

commit ea50871f15d02b2f0f57d9c430dc2c34398f2655
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Oct 17 11:09:13 2012 +0200

    flip_test: check whether wait_vblank fails when it should

commit 3b1fbbf41208a7af3d8332179c66d1e90af1ed60
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Oct 17 00:35:43 2012 +0200

    flip_test: drop vblank vs. pan
    
    pageflip vs. pan is interesting since we wait for outstanding flips
    before updating the fb base address. For vblank absolutely nothing
    interesting happens.

commit 7125a338ec6b42fa31090508063bef2432d94ec2
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Oct 17 00:34:43 2012 +0200

    flip_test: tune test-durations a bit
    
    15 seconds for timestamp checkers (to at least hit the dreaded hotplug
    once), 5 seconds for fast tests that check every vblank something, 30
    for slow test (dpms/modeset cycles).

commit 6473c537d8710a775991f2535dbcaedd49f68213
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Oct 16 05:43:19 2012 +0300

    flip_test: add wait-for-vblank tests
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    [danvet: add {} for multi-line but single-statement if block.]
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ae62874cf16a759b753f8b9dbfa8eb999d1e1859
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Oct 16 04:11:43 2012 +0300

    flip_test: add check to see if any event has occured
    
    At the moment select() would time out in case we don't get any event.
    When we add vblank events in a later patch, it's possible that we
    receive one type of events but not the other type. In this case select()
    doesn't time out and we need another way to detect this.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit fe7fea0be3b5f418b76dc7834e73b31827484429
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Oct 16 04:09:43 2012 +0300

    flip_test: add event sequence number tracking
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 887a2597fab15281db7352460b52161d9e7ed3c8
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Oct 16 01:47:15 2012 +0300

    flip_test: add logic to track pending events
    
    When we add the vblank tests later, it can happen that one type of event
    is pending while we are servicing another. Prepare for that by
    maintaining a pending/completed event mask.
    
    No functional change.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit a7d9a57c4767b63deb241278e9d7eafdd0023e8e
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Oct 16 01:47:15 2012 +0300

    flip_test: make page flip tests conditional
    
    Since later we want to add vblank tests where we don't want to flip,
    make the flips and corresponding state checks conditional.
    
    No functional change.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit eecae8dfef452194bd183a86cfb7d31f8d93dcba
Author: Imre Deak <imre.deak@intel.com>
Date:   Mon Oct 15 21:18:40 2012 +0300

    flip_test: unify the name of the current test in status messages
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 6c2b53d8948a0660e6a95b4d7350a0d15bf78ceb
Author: Imre Deak <imre.deak@intel.com>
Date:   Mon Oct 15 21:15:18 2012 +0300

    flip_test: store the pipe id in the test context obj
    
    For DRM_IOCTL_WAIT_VBLANK we'll have to pass the pipe id - as opposed to
    the crtc id required by the rest of the IOCTLs we use.
    
    Thanks for Chris Wilson for pointing this out.
    
    No functional change.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 641261f4fec9a4519f55a08c2df6913f65c4e9b4
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Oct 16 16:18:08 2012 +0300

    flip_test: don't skip checks for sequence #1
    
    So far we skipped some tests for seq#0 and #1, since at that point we
    were missing the 'last' state against which we could compare the current
    state. Since in the previous patches we fixed the ordering in the test
    loop and moved the increment of count to the update state phase, we have
    a proper 'last' state for seq#1, so enable the tests already at that
    point.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit ee8f485e55f86ae850a233fabad9c0c200d81550
Author: Imre Deak <imre.deak@intel.com>
Date:   Mon Oct 15 20:37:01 2012 +0300

    flip_test: factor out the event state
    
    Factor out the status vars that are specific to the flip events into a
    separate structure. This will allow us tracking the vblank events with
    the same code.
    
    We move the increment of the flip event counter to the end of the test
    loop, but this shouldn't affect anything. This is the only functional
    change.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 5fa695529c82d5f1b5c77c83e2b46194e503987b
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Oct 16 02:41:02 2012 +0300

    flip_test: swap the order of check state/run test step
    
    At the moment we first check the state then run the test step in our
    test loop. Swapping the order makes the starting state of each iteration
    better defined, allowing an easier extension of these steps in the
    future.
    
    Since now it's guaranteed that we exit the event loop with no pending
    flips, we can also get rid of the final flushing of events.
    
    We don't want the first initializing flip to affect the test loop other
    than setting an initial FB, so before starting the test loop wait for it
    to complete by calling wait_for_events() and leave the flip event
    counter at zero.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 960a3895a0b2a73d2c2c29910d705070940cc376
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Oct 16 02:37:15 2012 +0300

    flip_test: split the flip handler into logical parts
    
    The handler consits of handle_event/run_test/check_state/update_state
    logical steps, split the function accordingly. This is needed by the
    following patches that need to do part of these steps for both flip and
    vblank events.
    
    No functional change.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 9e43ecdf2113f61a28a71f67a2c464d40c732d59
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Oct 16 02:26:35 2012 +0300

    flip_test: store current flip/received timestamps in the context obj
    
    This is needed by the next patch that splits the flip handler function
    into logical parts. Make the timestamps accesible to these parts.
    
    No functional change.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 161e525fd8d3a1617818c5acdee4b3be6d0a1bf0
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Oct 16 05:50:22 2012 +0300

    flip_test: factor out the final state check
    
    Needed by an upcoming patch where we want to make a final state check
    for both the flip and vblank events.
    
    No functional change.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit c96d18a994798ca2caccda4eeb4773966b4a87da
Author: Imre Deak <imre.deak@intel.com>
Date:   Fri Oct 12 13:31:25 2012 +0300

    flip_test: factor out the event loop/wait for event logic
    
    Needed by an upcoming patch where we want to wait for an event without
    starting a new round of test run.
    
    No functional change.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 0699dc725925d36f49b833735c21f19f7cf498aa
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed Oct 10 14:47:51 2012 +0300

    flip_test: move output panning inside the flip_handler
    
    Move the panning to a more logical place where the rest of the test
    steps are performed. As Daniel Vetter pointed it out, the proper place
    is _after_ the flip command is sent, so that fb_set_base correctly waits
    for any outstanding flip. So move the function between the flip and the
    dpms/modeset off calls.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit 3731fee849e3b02cc565812656b540cc46297227
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed Oct 10 12:01:28 2012 +0300

    flip_test: store fb width, height in test context object
    
    We will need these in event handlers, so store them where the handlers
    have access to them.
    
    No functional change.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>

commit f9f6bff80d9d3b7e508751c344fcd3bd059d7b68
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Oct 16 17:34:41 2012 +0300

    flip_test: factor out drmModePageFlip
    
    For better readability and to prepare for the upcoming patch marking
    pending flip events with a flag.
    
    No functional change.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 43f6f873eb8c8e98194b5ba50675fd3a1e6b656a
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Oct 16 17:34:39 2012 +0300

    test_flip: fix checking for delayed event reception
    
    The intent for the time limit seems to be 2ms, but the current condition
    will result in a 1s limit and makes the check against tv_usec redundant.
    Fix the condition to check for a 2ms limit.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 95a967faa2558a32a13390de71361af051926c75
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Oct 16 17:34:38 2012 +0300

    flip_test: check drmHandleEvents()' return value
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    [danvet: s/assert/do_or_die]
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f1b1729a8a81d05e4c45d0c20f1a5843c4bb8b6d
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Oct 16 17:34:37 2012 +0300

    flip_test: reset the state for each test run
    
    Each test run needs a clean state.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 472e8a70c227807cf77db13d460e695d82b300ae
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Oct 16 17:34:36 2012 +0300

    flip_test: free FBs after each test run
    
    Though the FBs will be freed implicitly at process exit, with the
    growing number of test cases it's probably better not to let them
    accumulate and free them as soon as we can.
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 21393431f191d3c51b98f5acd507418b126f6cf7
Author: Imre Deak <imre.deak@intel.com>
Date:   Tue Oct 16 17:34:35 2012 +0300

    drmtest: add function to remove an DRM FB
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit dc3ac00f033245155c765f308fe76088f9f5bfc0
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Mon Oct 15 10:05:56 2012 -0700

    sysfs_rps: Add negative test case for bad values
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 50d46750d90b30a06d15583abe693550955ebd50
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Oct 12 10:45:52 2012 +0200

    lib/mmio: gen2 has a bigger register window, too
    
    It's split up into two parts, with the gtt pte range in between.
    Without this I couldn't read the ADPA register ...

commit 31dfc98a301b1071bfe483e5588cef2352dbcf13
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed Oct 10 16:04:45 2012 +0300

    fix warn in testdisplay: ignoring return value of 'chdir'
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0bf5fd894c386cbb6a2419056e43d400c4dec73b
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed Oct 10 16:04:44 2012 +0300

    fix warn in prime_nv_*: ignoring return value of ‘fgets’
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bcfc0f1e4b15dac830c1f7d61b2cca3c74b3ba69
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed Oct 10 16:04:43 2012 +0300

    fix warn in gem_reg_read: 'read' shadows a global declaration
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3a622b9784289615078f331df4571550aeaa7578
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed Oct 10 16:04:42 2012 +0300

    fix warn in sysfs_{rc6, rps}*: ignoring return value of 'fscanf'
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b614b4d648bc3534996601b4d17609439135e98a
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed Oct 10 16:04:41 2012 +0300

    fix warn in gem_readwrite: 'read/write' shadows a global declaration
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9de58cf6c1c1fd47ad56504cfa7cbff5cc75b885
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed Oct 10 16:04:40 2012 +0300

    fix warn in intel_reg_snapshot: ignoring return value of 'write'
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5efd3d3d227365421acb4c7b350cae9c34923b2e
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed Oct 10 16:04:39 2012 +0300

    fix warn in intel_error_decode: ignoring return value of 'asprintf'
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6456e75f0d91f35eb2e8c2b71629e2813b0aa72d
Author: Imre Deak <imre.deak@intel.com>
Date:   Wed Oct 10 16:04:38 2012 +0300

    fix warn: 'div' shadows a global declaration
    
    Signed-off-by: Imre Deak <imre.deak@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1a83c0990af469a0559002d4c2e9f99333edc996
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 9 22:47:59 2012 +0200

    tests/gem_exec_big: fixups
    
    - don't emit a self-modifying batch, the kernel doesn't like those
    - also change the buffer size, to exercise all corner-cases of the
      sg_table stuff

commit fa6b0208ab161f7021cfde09fa74ab02907073e6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 9 19:43:28 2012 +0200

    tests/gem_exec_big: add a reloc at the end of the big batch
    
    Since that's the other place where the broken get_page blows up.
    
    Actually it seems to only blow up on specific pages ...

commit 1431938c5c00786130a6870277a376009c34579f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 9 19:29:02 2012 +0200

    tests: add big batchbuffer test
    
    ... and use it in the hangman to stress the error_state capture a bit more.
    
    Uncovered a bug in the obj->pages ->obj->sg_list rework.

commit 5f94468f520ba790215a352a3f824b9580e268a7
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 9 19:27:41 2012 +0200

    lib: remove auto-quiescenting of the gpu
    
    In retrospective, this is an ugly idea. Any tests that needs this
    can call it themselves.

commit b8e384a4d5b9910f655dc532636978d0c0e24054
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 9 17:50:40 2012 +0200

    lib: make drmtest_progress more robust

commit e5722bac9cfd5a643141117d1899bcd6aa7c3731
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 9 17:32:00 2012 +0200

    tests: update .gitignore
    
    I've thought I've fixed this, but looks like I've failed to commit.

commit c9795c6dfe1fc383dcbbd587ba633974dd4d0f67
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 9 17:30:59 2012 +0200

    tests: add gem_cs_tlb
    
    Should test tlb coherency, but somehow it fails to hit the bug I want
    it to hit ... needs more work.

commit a7787baccc187ef10ed497ad9d8dd940df70c6e7
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 9 15:51:13 2012 +0200

    tests/gem_cs_prefetch: clarify what it tests
    
    I've forgotten ;-)

commit dc5d76e2bf95eadf299edfdfc51eee085f5c67d3
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Oct 4 21:40:54 2012 +0200

    tests/flip_test: check -EBUSY and -EINVAL behaviour
    
    We want -EBUSY for a pending flip and -EINVAL if the pipe is off
    (either dpms off or completely off). With the small exception that
    someone thought it would be funny to return -EBUSY when the crtc is
    fully off.

commit 1422c22e8909b189bb7cc67ee1ee403c5bd81d08
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Oct 4 13:22:16 2012 +0200

    tests/*storedw*: add subcases with more outstanding batches
    
    Just in case this is better at hitting seqno signalling races ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 826326bc7c464c7297687a82d03da83922555ca1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Oct 3 23:16:18 2012 +0200

    flip_test: fix timestamp order
    
    When grabbing the timestamp after a flip, it has a decent chance to
    actually be after the flip. Surprising.

commit 630dd4087d50f6db3b9d4e9fc42ca159b6d39446
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Oct 3 18:57:40 2012 +0200

    tests/gem_caching: only disable on vintage i965g/gm
    
    Hooray for confusing macros!
    
    Acked-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2d431fd6b6430261334f50a9dbba5bd473ded449
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Oct 3 13:44:30 2012 +0200

    tests: add drm_threaded_access_tiled
    
    This catches parallel access to bo->virtual causing sigbus
    
    Signed-off-by: Mika Kuoppala <mika.kuoppala@intel.com>
    [danvet: applied some bikeshed
    - changed prefix from drm_ to gem_, it's a kernel gem test
    - added autohell magic to link with pthreads
    - .gitignore entry
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9965299cf35496d10f8348a1539822a9f83940a8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 2 21:29:57 2012 +0200

    flip_test: add an explicit flag for timing checks
    
    We'll need this for the wait_vblank test cases.

commit aaa460951d9d54f27dc2a7d775ed5cf439b9768f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 2 21:40:46 2012 +0100

    gem_cpu_reloc: Do another pass explicitly moving to the CPU write domain
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 99a0824669374144d2c644c3a5d9bb7cf65ef716
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 2 21:04:36 2012 +0100

    gem_cpu_reloc: Use the mappable aperture size!
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 217511012a80461d465df33f7760c1f5f77c270e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 2 21:02:22 2012 +0100

    gem_cpu_reloc: And run the test in reverse to check with already bound batches
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8b2c19da0bf5d6f9c7b78f8cd6f5000bf49862cd
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 2 20:50:17 2012 +0100

    gem_cpu_reloc: Fix for running on SNB+
    
    I work with these everyday and I still made a basic mistake.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 43737163d3d5a798b63497003027ba6d5aba847c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 2 19:42:11 2012 +0200

    flip_test: increase runtime of the plain flip to 15s
    
    This ensures that we'll hit the stupid hpd poll handler in every run.
    
    Also don't yell around about jitter for tv outputs ...

commit 400535e82f6f6a3e5f9098fef009cdbd7c727a41
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 2 19:33:30 2012 +0200

    tests/flip_test: measure inter-frame ts jitter
    
    Yell if it's wrong.
    
    For some odd reason this blows up on my snb. And always on the same
    o->count frame on the 2nd crtc ... And we have to thank the hpd poll
    helper for that. Comment explaining this added, also made the error
    non-fatal.

commit 87f7dccab69631562fac20aa3fcc2b5762f48f24
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 2 17:38:04 2012 +0200

    flip_test: race against modesets, too
    
    Even slower than dpms switching ;-)

commit ef45b4403677ccf6207a3d80528c45f8d3a3f171
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 2 19:22:37 2012 +0100

    gem_wait_render_timeout: Fix SKIP return code
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3b9a76d2fa40b43ed3231d3c5382ea05317b9bde
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 2 17:27:16 2012 +0100

    tests: Add gem_cpu_reloc
    
    Attempt to stress test performing relocations whilst the batch is in the
    CPU domain.
    
    A freshly allocated buffer starts in the CPU domain, and the pwrite
    should also be performed whilst in the CPU domain and so we should
    execute the relocations within the CPU domain. If for any reason one of
    those steps should land it in the GTT domain, we take the secondary
    precaution of filling the mappable portion of the GATT.
    
    In order to detect whether a relocation fails, we first fill a target
    buffer with a sequence of invalid commands that would cause the GPU to
    immediate hang, and then attempt to overwrite them with a legal, if
    short, batchbuffer using a BLT. Then we come to execute the bo, if the
    relocation fail and we either copy across all zeros or garbage, then the
    GPU will hang.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d619a672df97f34cfbbebe89ed8cbe15827182a1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 2 17:22:09 2012 +0200

    tests/flip_test: also test pannning with dummy load
    
    Needs a bit more relaxed select timeout to work (which is not
    required when testing dummy_load vs. dpms, since the dpms forces the
    sync, not the select timeout).

commit 66fe119afd1cec2fdd47cec77523b4af2526df47
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 2 17:17:40 2012 +0200

    tests/flip_test: test interaction with panning
    
    Since panning with set_crtc is synchronous, we need to stall for any
    outstanding pageflips. This new testcase exercise that code. Unfortunately
    we still need eyes to check whether we don't loose the offset :(

commit 3441ad29bf82057db814d60f35c146f24c5896b9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 2 17:01:06 2012 +0200

    tests/flip_test: robustifications
    
    - don't yell around about dropped frames on tv connectors (and explain
      why in a comment)
    - wait a bit when using a test config that checks for dropped frames before
      starting. Also allow for 1% of fudge, this makes it reliably work
    - make the dummy load more variable, took too long on older machines.

commit cdad308a4bbc96bd7feb7ab57eb4f261c08dd1dd
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 2 16:09:00 2012 +0200

    tests/flip_test: don't complain about timestamps in the future
    
    those can happen due to the scanline vblank timestamp adjuster ...

commit 4c7fc65cb63374a42ec9a41f4d5067d50e053aac
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 2 15:59:58 2012 +0200

    tests/flip_test: actually try to check what I want to check
    
    /me sucks

commit 6b034a6fd69c9e5bfac682a4c98208433079501c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 2 15:42:34 2012 +0200

    tests/flip_test: check whether timestamp isn't in the past
    
    This is mostly useful for when we add support for other clock sources,
    e.g. clock_monotic, to check whether the kernel picked the right
    clock.

commit 73af035c598047147957a081b26bfb156e01a530
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 2 15:37:24 2012 +0200

    tests/flip_test: check whether the pageflip event took too long
    
    We're suspecting that something is fishy with the event deliver/vblank
    timestamp handling on gmch platforms. Unfortunately, this isn't it.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f509d40fa95886266a6e78aa4aa1b2764769eba1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 2 12:59:16 2012 +0100

    flip_test: count the number of flips and check we don't drop any
    
    In the basic case of just flipping between two buffers with no
    additional work, we should neve drop a frame.

commit 93ea0182c4632ac69dcefd05a20b7ebabb2d7e18
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 2 11:50:20 2012 +0200

    tests/flip_test: re-enable disabled testcases
    
    oops

commit 4701dacbc5903303bdd3c35488f449eb2f425074
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 2 10:33:13 2012 +0200

    tests/flip_test: new testcase with a busy load before the flip
    
    I've hoped that this would be good enough to hang pch platforms, but
    it looks like those just complete the flip immediately on disabled pipes.

commit 3d4ebe9be3dc4e4375ac10e84b6355144d043851
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 2 10:32:25 2012 +0200

    fixup .gitignore for newly add sysfs_rps test

commit df7edaab90517cc8d5ed0f72a8a96dbdd04f0ed7
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 2 10:32:10 2012 +0200

    lib: helper to convert gem_hanlde to drm_intel_bo

commit 9d1a3587acc75f39a1a070f92dd80f79504bf60c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Oct 1 11:34:10 2012 +0200

    drmtest: use do_or_die

commit a65087a26e0f7a567a3d09887869d821bb5a7840
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Sep 28 13:03:02 2012 +0100

    tests/flip_test: Revamp to demonstrate race with modeset/dpms and pageflips
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4650505d7e48dce84baeeb7754409b3956e80ad8
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Sep 26 18:17:53 2012 +0100

    intel_infoframes: Dump HDMI vendor infoframes
    
    Those infoframes are programmed when using stereo 3D modes.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Reviewed-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 53895acbe26c2cdb1ff536035231889f97a3500c
Author: Yi Sun <yi.sun@intel.com>
Date:   Tue Sep 25 17:13:17 2012 +0800

    Add option -o <number>, which can test only one specified mode.
    
    Each mode line has a number just like '[i]'. So we can only test the specified mode with giving the number of mode to '-o' parameter.
    
    Signed-off-by: Yi Sun <yi.sun@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d00f72a01bb66d63713a0628fc47b82321a92d4c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Sep 18 14:04:58 2012 +0100

    tests/module_reload: Silence warnings when unloaded shared modules
    
    So long as we spit out critical errors during i915 reload, or detect any
    oops the test will do its job.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=55040

commit 0cedccc8445943cc43ecbaf9af28807e2556d129
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Fri Sep 7 18:12:07 2012 -0700

    sysfs rps test added
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 397cd4acd1c7789482eadb5cf24e667a9684d1fa
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 13 15:05:34 2012 +0100

    gem_gtt_speed: Add a test that caches the mmapping across iterations
    
    Repeat the memset streaming performance test on the same mapping so that
    we can factor out the overhead of establishing the GTT/CPU mmaps.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f256ada3b689c4ecedfd2a2978a01ab01f266aaa
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 13 14:55:53 2012 +0100

    gem_gtt_speed: Use a memset() to test streaming performance
    
    This make the reasonable assumption that the libc code for memset() can
    saturate the memory bandwidth -- at any rate it should do better than
    the copy.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit efd68f9d64caf7b359df2d7512f89d61c4b6e3ae
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Wed Sep 12 17:48:21 2012 -0700

    intel_sprite_on: plane needs 16.16 width and height
    
    This only ever worked because we used to have a bug in our driver which
    was fixed months ago by:
    
    commit b4db1e35ac59c144965f517bc575a0d75b60b03f
    Author: Jesse Barnes <jbarnes@virtuousgeek.org>
    Date:   Tue Mar 20 10:59:09 2012 -0700
    
        drm/i915: treat src w & h as fixed point in sprite handling code
    
    Reported-by: Armin Reese <armin.c.reese@intel.com>
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 93e5b4477ffe12f70013da027ecdc086520e027a
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Wed Sep 12 17:27:08 2012 -0700

    intel_sprite_on: coding style fixes
    
    It was driving me nuts...
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 5b5a7a806f69dd6208822e3a35f3fb5a38d615b1
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Sat Sep 8 13:40:04 2012 -0700

    intel_sprite_on: Idententation + Copyright fix
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 209ab470f248e1720ac0aff1be175fb992c827a1
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Fri Sep 7 11:42:20 2012 +0100

    tools: Update gitignore with intel_dpio_{read, write}
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c8b93b8b7738f74e710bcbe8a7015ee3eaad3aa1
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Sep 3 16:16:29 2012 +0100

    intel_reg_dumper: Add more information when dumping single registers
    
    Now that we can dump registers giving a partial name, adding more
    information about the dumped registers seems useful.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 62a026eac5de8ed2acfe26161c718eb51fc537f0
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Sep 3 16:16:28 2012 +0100

    intel_reg_dumper: Allow partial register names on the command line
    
    Let people give just a part of the register name. Handy when not
    remembering the exact name or if the register is defined with a
    different name than the one in the spec being looked at.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 763d22cbf83721982e43818cc07a0df999790afb
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Sep 3 16:16:27 2012 +0100

    intel_reg_dumper: Also decode registers given by address
    
    One can now give an address instead of a register name to decode a
    single register.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2fd80079c0943a16b9b55bedc7926c47922e368e
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Mon Sep 3 16:16:26 2012 +0100

    intel_reg_dumper: Add a single register decode mode
    
    From time to time, one would like to decode a register value that have
    been captured at a certain point in time (and say printed out with a
    printk). intel_reg_dumper has all the knowledge to do that and this
    patch adds a way to ask it to decode a value.
    
    Example usage:
    
    $ ./tools/intel_reg_dumper PCH_PP_CONTROL 0xabcd0002
           PCH_PP_CONTROL: 0xabcd0002 (blacklight disabled, power...
    
    v2: friendlier invocation (Chris Wilson)
    v3: remove unecessary casts and use strcasecmp (Jani Nikula)
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bc62567b77cd3a790e2e8e2d7fd81ce950bfbe3f
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Aug 30 14:17:01 2012 -0700

    clang: Fix static analysis warnings from clang
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 54ed938d393970584a9b2a8b0783b0c0901255db
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Aug 30 14:03:54 2012 -0700

    clang: Fix warnings found through clang.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit ac23daaa51c88eba3e120afeaff9e491a2d61168
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 16 16:41:16 2012 +0100

    tests/gem_cacheing: Exercise snoop coherency
    
    This is based on tests/gem_partial_pwrite_pread which aims to detect
    incoherency between CPU reads and writes to a bo whilst using it as a
    source and target for GPU writes.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 51baabb562caf1e1009bad5cae7efef126590117
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jul 16 16:39:57 2012 +0100

    Add bare-metal interface to adjust cacheing (i.e. snoop status) of a bo
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit dd5f40f50c02e8ef68ac9bbee3e94302e7baeed3
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Aug 27 09:37:01 2012 +0200

    bump to 1.3 release

commit 7a02aa4cbfe4c63bb9435cf9cab487bd1df10185
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Aug 26 21:22:15 2012 +0100

    mmio: Limit the uc- mapping to only map the registers
    
    In the future, we may like to enable wc mapping of at least the GATT,
    and so causing a conflict if we attempt to map the entire bar as uc-
    here. Obviously we need a better fallback plan, but for the moment only
    attempt to map the portion of the pci space that we use for register
    access.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a4783f9485f78c80e7cc1eb041634b4b8a3aa4b9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Aug 26 21:22:14 2012 +0100

    intel_gtt: Harden against changes to kernel mappings of the GTT
    
    Rather than use the common mmio segment which will be in future
    restricted to just the registers and so exclude the GTT portion on all
    architectures, explicitly mmap the GTT ourselves. Repeat this mmapping
    with a couple of flags until we matching the existing kernel mapping.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3d148e164d498d81cc3990c85b65afee8bcca3b8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Aug 25 00:01:27 2012 +0200

    s/NO_PID/NOP_ID
    
    Alan typo'ed it, I've failed to notice :(

commit 1b5fd314fd474827373f6f48fa11fcb60687f5a2
Author: Alan Coopersmith <alan.coopersmith@oracle.com>
Date:   Fri Aug 24 14:02:04 2012 -0700

    Add --disable-nouveau option for platforms without nouveau support
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4cdfa8e9b7177a12d7d693207be52a6c999236ef
Author: Alan Coopersmith <alan.coopersmith@oracle.com>
Date:   Fri Aug 24 14:02:03 2012 -0700

    flip_test: add cast to pacify Solaris Studio compiler
    
    Fixes build error:
    "flip_test.c", line 180: improper pointer/integer combination: op "="
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6b3e6f28d2ba738fd2677b6c3e4f7ec03d9a463a
Author: Alan Coopersmith <alan.coopersmith@oracle.com>
Date:   Fri Aug 24 14:02:02 2012 -0700

    Rename NOPID to NO_PID to avoid conflict with Solaris NOPID
    
    Solaris <sys/types.h> already has #define NOPID (pid_t)(-1)
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 99fdba921ed88381ab721b15299e637366042465
Author: Alan Coopersmith <alan.coopersmith@oracle.com>
Date:   Fri Aug 24 14:02:01 2012 -0700

    Fall back to CLOCK_MONOTONIC on systems without CLOCK_MONOTONIC_RAW
    
    Solaris has not yet adopted this Linux extension
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e40146878e4cf74a96fd0c42342065f7cd85fa97
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Aug 24 23:18:48 2012 +0200

    Revert "tests: disable nouveau if unavailable"
    
    This reverts commit dd8325323bfcca1f742e864ca7d87101a0d59936.
    
    I like the patch from Alan Coopersmith with an explicit disable
    option better.

commit dd8325323bfcca1f742e864ca7d87101a0d59936
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Fri Aug 24 22:55:20 2012 +0200

    tests: disable nouveau if unavailable

commit 425940be1d894459cead9aaf211a74338480aaa3
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Fri Aug 24 22:50:21 2012 +0200

    tests/prime_nv_test: add missing call for test8

commit c5b7ebc1cc4ecb4db8e691ba0d935826c6da2ebf
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Fri Aug 24 22:49:40 2012 +0200

    tests/prime_nv_pcopy: kill debug code that's not upstream

commit 94ec3f926c2a8e0706a93b20892aa1a25a504e99
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Aug 24 15:45:09 2012 +0200

    tests/prime_nv: don't enable buffer reuse
    
    We share these suckers, hence the fd-local libdrn instance does not
    have full control over the lifecycle of the object. Prevents the tests
    from blowing up with
    
    [drm:i915_gem_mmap_gtt] *ERROR* Attempting to mmap a purgeable buffer
    
    and similar things.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d4005511443e385b54b11754681f7bf44b6d9796
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Aug 23 11:37:09 2012 -0700

    Converted a display debug script for use by designers
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit ea944a9faf137e95b146ce8a1fb15d7e4cb8ae41
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Aug 23 11:32:57 2012 -0700

    intel_reg_read: use strtol instead of atoi
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit baf026d692c25969c3a30fcd50394c83f3f20815
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Aug 23 11:29:43 2012 -0700

    intel_reg_read: support -c option to read multiple dwords
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 4fc76adf313f2792b7438f9372321ce3ea66c6c2
Author: Vijay Purushothaman <vijay.a.purushothaman@intel.com>
Date:   Fri Aug 17 18:06:52 2012 +0530

    tools: Added intel_dpio_read and intel_dpio_write
    
    In Valleyview the DPLL and lane control registers are accessible only
    through side band fabric called DPIO. Added two tools to read and write
    registers residing in this space.
    
    v2: Moved the core read/write functions to lib/intel_dpio.c based on
    Ben's feedback
    
    Signed-off-by: Vijay Purushothaman <vijay.a.purushothaman@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 082826de6c66ff76c444434cd56aaf6df80027b3
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Aug 15 10:26:08 2012 +0200

    tests: add gem_gtt_cpu_tlb
    
    This catches tlb invalidation issues on my snb mobile gt2+

commit c407722048cee255be0e02ccf27d010ad3c7a6f6
Author: Wang Xingchao <xingchao.wang@intel.com>
Date:   Wed Aug 15 16:13:38 2012 +0800

    intel_audio_dump: add Haswell audio dump support
    
    Add Haswell audio registers definition and dump support.
    
    Signed-off-by: Wang Xingchao <xingchao.wang@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f9a2481e717fcd8c8bd363f9084743ce885aa1d4
Author: Wang Xingchao <xingchao.wang@intel.com>
Date:   Wed Aug 15 16:13:37 2012 +0800

    intel_audio_dump: fix wrong port definition
    
    there're three Ports B/C/D used for selection by each transcoder A/B/C.
    
    Signed-off-by: Wang Xingchao <xingchao.wang@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1f523bd8d10c0b67fc8a026633bcaa416ea03d9c
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Tue Aug 14 18:51:19 2012 +0200

    Fixup previous commit
    
    ENODEV not being defined and return code wrong

commit 3dda35744561e61cd6a63a75eb77bc4d67643f27
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Tue Aug 14 18:50:29 2012 +0200

    And add another corner case skip

commit 0f65ee9576dcfe3f9b82dcda47fd8744874c4ccb
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Tue Aug 14 18:48:48 2012 +0200

    fix crash with insufficient permissions

commit fc54f2eaa8f55ceb4955d31ef6d8b36645c6910f
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Tue Aug 14 18:25:50 2012 +0200

    satisfy danvet's OC
    
    and add skip codes, but mostly satisfy danvet's OCD

commit 4520025b7320cad238333793f36aadd466adb7ba
Author: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date:   Mon Aug 13 15:57:57 2012 +0200

    Add intel <-> nouveau prime tests

commit 0efa6c7b2725f67d742f194a0c88291b7b3edffa
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 7 18:16:34 2012 +0200

    tools/reg_dumper: really dump pipe C regs
    
    Not just a copy of pipe B. Meh.
    
    Also kill a few redudant #define for pipe B - they match pipe A.

commit 9fcaffda887a8ea20135e48368b44037a4750c63
Author: Yi Sun <yi.sun@intel.com>
Date:   Wed Aug 8 14:35:20 2012 +0800

    Update the image file pass.png with higher correction level
    
    Signed-off-by: Yi Sun <yi.sun@intel.com>

commit f669e8c12ebaae6f3638593d564358e5ab43d24c
Author: Yi Sun <yi.sun@intel.com>
Date:   Wed Aug 8 14:32:04 2012 +0800

    tests/testdisplay.c Remove an uncomfortable error output
    
    Signed-off-by: Yi Sun <yi.sun@intel.com>

commit 5ba39da67e4bc2a17e2e3d8e8a06386ebc5a5ae8
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Mon Aug 6 15:05:28 2012 -0300

    lib: add more Haswell PCI IDs
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Reviewed-by: Rodrigo Vivi <rodrigo.vivi@gmail.com>

commit f56a289aa86e591243c07b17d9bdf22e5e82de8a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Aug 7 14:50:54 2012 +0200

    tools/reg_dumper: dump pipe C regs
    
    Also reorder the pipe B regs a bit to be consisten with pipe A.

commit 81f16261f4d5d2cb1217569cc6580c0326b9eae2
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Aug 5 21:40:56 2012 +0200

    tests/gem_reg_read: actually wait a bit between reading TIMESTAMP reg
    
    QA could only hit this on ilk because the timer increase quite a bit
    slower on that platform than on gen6+ (80ns vs 320ns, iirc).
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=52937

commit 41fe811feb5c79c760f5d2e9fe5d1671f6d71ff8
Author: Yi Sun <yi.sun@intel.com>
Date:   Thu Jul 26 14:23:36 2012 +0800

    tests/testdisplay.c: Add a option '-r'.
    
    With the option '-r', the testdisplay could paint a 2-D bar code(QR
    bar code) on the screen. The word "pass" is hiden in the bar code
    image.  Further more, with this option, testdisplay will wait until a
    system signal 'SIGUSR1' coming after each mode setting. This function
    is for another program to control testdisplay.
    
    danvet: Fix up the missing static.
    
    Signed-off-by: Yi Sun <yi.sun@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3b0f80308a033633be6b903fa2a55128dfd99339
Author: Damien Lespiau <damien.lespiau@intel.com>
Date:   Wed Jul 25 16:04:32 2012 +0100

    build: Make autoreconf honour ACLOCAL_FLAGS
    
    When running autoreconf, it's possible to give flags to the underlying
    aclocal by declaring a ACLOCAL_AMFLAGS variable in the top level
    Makefile.am.
    
    Putting ${ACLOCAL_FLAGS} there allows the user to set an environment
    variable up before running autogen.sh and pull in the right directories
    to look for m4 macros, say an up-to-date version of the xorg-util macros.
    
    Signed-off-by: Damien Lespiau <damien.lespiau@intel.com>

commit efa5e355ac371d749cf505b952b900d05f25474c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue May 22 19:55:21 2012 +0200

    test/flip_test: don't fail if we can't find a crtc
    
    some connectors are forced to certain crcs ...

commit c832aa1714a47516e6b9402709d66720c464393f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jul 23 11:25:47 2012 +0200

    tests: fixup prime test paranoia

commit 5d9e22366b37b725358d22dbee47e094f7157974
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jul 23 10:06:25 2012 +0200

    tests/prime: more paranoia
    
    - check the old contents first in check_bo
    - drop all GEM handles for the re-import test

commit 796f6193c9697e0ae57970a8c48cc9bb3a69877d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jul 23 09:51:12 2012 +0200

    tests: add missing stuff to .gitignore
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6bc22e3dfd2cf143c2a9abcb72738a1674ce2fc5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jul 23 09:49:06 2012 +0200

    tests: add basic re-importing prime test
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit fb748aad4cc8b178801f286e947b251d29764da5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jul 23 06:41:10 2012 +0200

    tests: s/drm_reg_read/gem_reg_read
    
    gem_ is the prefix for low-level kernel tests, drm_ tests
    libdrm_intel specific stuff.

commit 434be47f12c390659bf0dabd8ebea8ea37f8f26a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Jul 21 17:36:36 2012 +0200

    shut up the compiler a bit
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4c9abd5aa460572899c4890fcc833d57ee025073
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Sun Jul 22 16:30:04 2012 -0700

    reg_read: use good offset, and errno
    
    The test was bonghits.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 58cfeabb90a9bef742df53e2602966a2166e37b9
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Wed Jul 18 11:47:42 2012 -0700

    reg_read: skip older kernels
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 4fe786953962d9603d15ea82c97ea5f6e57ba8be
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Wed Jul 11 17:06:01 2012 -0700

    reg_read: basic register read ioctl test
    
    This will need to get modified when the ioctl expands, and so is only
    here for reference/to make Daniel happy.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit d9fb72e26698562367df53909ade0d34520f88f0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jul 13 10:35:11 2012 +0200

    tests: improve concurrent blit tests
    
    By adding another testcase that follows up with a gpu read. This
    checks whether the kernel properly tracks the pending write and
    doesn't lose it (or sync up to the wrong seqno).
    
    For some odd reason only the cpu mmap variant blows up, the gtt one
    works here. I need to look into that some more.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit fbd6d0495969ffab5902e3e8e39dc4687806ae0c
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Tue Jul 3 11:04:05 2012 -0700

    gem_ctx_basic: fixes
    
    I must have checked in the wrong version the first time.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit e843c55370e85c147b9e4ca9b26cf0902a1b322c
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Tue Jul 3 10:40:32 2012 -0700

    ctx_basic: we stopped using rendercopy
    
    so get rid of the remants. perhaps we'll use it again someday.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit cbb3c685b59aeb41a6ce94bc47f0bf255c87df60
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Sat Jun 30 19:26:59 2012 -0700

    rendercopy_gen7: add support for haswell
    
    Only compile tested.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit afcffe783a12472e60d4cd0f2ebdc89e2f5b2def
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Jun 14 11:04:01 2012 -0700

    context_basic: the most stressful context test to date.
    
    this context test requiring libdrm updates
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit a635a5ac3bb72b8ac13f020b610b71d97499a1fb
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Sun Jan 15 14:52:33 2012 -0800

    context: libdrm wrappers
    
    This wraps libdrm functionality to exec with contexts. This patch
    shouldn't be applied until libdrm for contexts is updated.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit c157e9485e6a96fa359f8236f43475bc2095e1e2
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Fri Jun 29 11:23:34 2012 -0700

    intel: update libdrm requirement
    
    We want context APIs in order to use our super context test.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit beb1bb8fd26b1b1c55242c3b2a3004a346d64b80
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Jun 28 22:43:47 2012 -0700

    gem_stress: use the gen7 rendercopy
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 2234f87a0852f321a6f85e8fcd6fbb6866f9c944
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Jun 28 22:42:58 2012 -0700

    lib: add a gen7 rendercopy
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit ab0460eaac85fdd66328ccba511519397cea0ddb
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Wed Jun 27 11:13:23 2012 -0700

    ctx_bad_destroy: danvet changed to ENOENT
    
    In all fairness if the test worked, he would have found this earlier
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 278e53b5c42f4bf1dcabf82aab2f211e6994ed06
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Wed Jun 27 11:13:06 2012 -0700

    ctx_bad_destroy - ioctl is 2e, not 23
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 1136f61298979912e7edfa94a56437f7c9c5499b
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Wed Jun 27 11:07:09 2012 -0700

    ctx_bad_destroy: a little more description is nice
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 76b53ef68d39063c4b0203aa8db2b32dcce1e3b4
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jun 26 19:47:30 2012 +0200

    tests/gem_wait_rendering_timeout: needs more fudge
    
    Due to the way we calculate the workload by doubling it each time we
    might end up with almost twice as much as we want. Hence increase our
    fudge by 1.5 to account for that.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=50666

commit c6fe31bc473a7ae44bc42bad7da5faca3c924821
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Thu Jun 21 14:31:34 2012 -0300

    intel_reg_dumper: use intel_register_access_init/fini
    
    We need to hold forcewake lock in order to be able to read GT registers.
    Otherwise, when the GPU is in RC6 mode, we'll read all zeros.
    
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit f7e356d9cd7795de055a9f3c13bb33f5c9bea01f
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Jun 14 10:00:57 2012 -0700

    context tests not requiring libdrm
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 5a28ef8580a83375fc663b84873c4e18207ed3fb
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Sun Mar 18 18:42:44 2012 -0700

    context: update for new execbuf2 element
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit b28a399dcd8d28b6b9bde4baa105f9e78e520122
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Wed Jun 13 15:34:40 2012 -0300

    intel_reg_dumper: dump more PM registers
    
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit 34240176c15968e9f25e154d7a1111bb7b0af8af
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Mon Jun 11 12:08:32 2012 -0700

    add VLV PCI ID
    
    This allows the tests to run on the prototype boards.

commit b015a25e897d8b2d79d5938d10e35803ce4dfa2c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jun 8 19:35:19 2012 +0200

    tests/debgufs_emon_crash: make it quiet

commit 9739401fb5806d576f0bc895239e67d86352d417
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Jun 7 16:37:02 2012 +0200

    intel_reg_dumper: dump pre-pch-split blc regs

commit 77586dcdf7240aebf29d3d70313dce9d79108147
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jun 4 17:29:20 2012 +0100

    test/gem_gtt_speed: Add a baseline test for the performance of a CPU mmap
    
    When looking at the pwrite/pread/wc performance, it is useful to judge
    that against the performance of an ordinary CPU mmap.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b558877f6e25663ece1242f1e658cf1630d7d7fe
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu May 31 15:45:17 2012 +0200

    test/sysfs_l3_parity: skip test if the sysfs interface doesn't exist

commit 4cf1b02e96b276fcd707d26c9533ab4bfad54739
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu May 31 15:45:17 2012 +0200

    test/sysfs_l3_parity: fixup logic
    
    It didn't fail properly.

commit 55fdd7f1bb4cd5044dbbb4822180a91a9a4c0dd2
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu May 31 13:49:32 2012 +0200

    cleanups after l3_parity merge
    
    - call it sysfs_l3_parity for more consistency
    - add .gitignore for intel_l3_parity

commit dac1a2cedae1118cfa4ae5a4667cd715487cfcf2
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Fri May 25 16:56:27 2012 -0700

    tests/dpf: simple dpf test
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 8f7ea34751886ca754e6246a9d400de18c6a972f
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Fri May 25 16:56:26 2012 -0700

    tools/dpf: Tool to read and write l3 remap registers.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit a35dcac0ff7310bc431c14419874e9653d0d2725
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed May 30 20:16:24 2012 +0200

    tests/gem_wait_rendering_timeout: check polling behaviour
    
    ... with timeout=0. We have special code in the kernel to optimize
    that one.

commit b8e00110a0556fb7edde5dcb3ed0ff3d728c5552
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue May 29 22:23:14 2012 +0200

    lib/gem_wait_rendering_timeout: sprinkle busy_ioctl checks
    
    While we have that testcase, let's cross-check the busy ioctl.

commit bfbe813f8fb587017c4e1d73c51395c2837eb395
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue May 29 22:14:06 2012 +0200

    lib: fix gen5 workaround emission
    
    Using BEGIN_BATCH can lead to a nice inf recursion through require_space
    -> flush_batch -> BEGIN_BATCH.
    
    Also fix things up to always require BATCH_RESERVED. We need 2 dwords
    for the gen5 workaround and 2 dwords for MI_BB_END.

commit 04dfa492d195e063a07053815ff541b4351b0097
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue May 29 16:52:23 2012 +0200

    tests/gem_wait_rendering_timeout: test the timeout case
    
    When I've first tried this it somehow failed, but I can't reproduce
    this any more. I guess I've hunted a ghost.

commit b711bfe54f74c6a4337f978e6bef4c47a2f2ea9e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue May 29 16:49:41 2012 +0200

    tests/gem_wait_rendering_timeout: fix up the autotuner
    
    duuh

commit 95877ab9ce137e52128b34acab343273b46404dd
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue May 29 16:35:35 2012 +0200

    tests/gem_wait_rendering_timout: adjust .gitignore

commit 2952feb23f303e0c7afe5ce9c92002abecd7a75f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue May 29 16:35:11 2012 +0200

    tests/get_wait_rendering_timeout: fixup the auto-tuner
    
    - start at 1 iterations
    - actually adjust the number of iterations like the comment claims

commit cf979c20636814389adcf969c5858a915a97571f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue May 29 16:34:32 2012 +0200

    tests/gem_wait_rendering_timeout: some fixes for the blt function
    
    - widht/height are in pixel, and the cmd uses 32bit, so we need to
      adjust this.
    - we write to the buffer, set the right reloc domain.

commit 25bf5574a2252311bf5c0c691e728e8ffd47161e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue May 29 16:23:41 2012 +0200

    tests/gem_wait_rendering_timeout: properly skip test
    
    also assign the timeout value unconditionally, we want to know it even
    when we've timeout out.

commit f14a045137ea804625439fc7ac3144e46a12d3ae
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue May 29 16:14:31 2012 +0200

    tests/gem_wait_rendering_timeout: make it compile
    
    ... we need to do this libdrm depency dance. Or just copy&paste it.

commit 9cfcb75b79829230dc9dde1247a82ffe8b0b9702
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Fri May 11 13:54:12 2012 -0700

    tests/wait render timeout test
    
    Assures that signals interrupting the wait works properly. Because of
    the scheduling around signals, interrupted waits will *seem* faster as
    the GPU continues to work while all the CPU scheduling stuff happens.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit c26b5ee72f3a2ac3ddef309e181daab9e5128ae9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri May 25 11:29:28 2012 +0200

    tests: fixup type in module_reload
    
    Oops, I've frobbed this to test the check but committed the wrong
    version.

commit 3985d9b976f4daabb9adea38735d9c9b77da7fac
Author: root <daniel.vetter@ffwll.ch>
Date:   Fri May 25 11:26:53 2012 +0200

    tests: add some help to module_reload
    
    ... so that it's easier to get the kernel configuration right.

commit a628d564709aec0dda98ae71c24bff7cfe9268c0
Author: root <daniel.vetter@ffwll.ch>
Date:   Fri May 25 11:02:09 2012 +0200

    tests: add module reload testcase
    
    We've broken this way too often in the past.

commit 2448a75ff6127a03404e659a5e1046236eef41d4
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed May 23 11:37:04 2012 +0200

    tests/hangman: fix when run with absolute path
    
    QA's test rig does that.

commit 96c2fc82ba0be6c0e1ae8f675ccc97714aa08e11
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue May 22 19:54:22 2012 +0200

    test/flip_test: fail harder
    
    We want testcase to return non-zero if they fail ...

commit 17787f30c6f05edb40da1a1fc0074bee2e09e779
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue May 22 16:15:15 2012 +0200

    lib: extract kmstest_dump_mode

commit b7aa6756ce770f44280e1369dd7fbf9761f3cdb7
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue May 22 16:01:32 2012 +0200

    test/flip_test: use kmstest_create_fb
    
    And bring back some frame indication that actually works.

commit 662d73219976ca820f878f63b5222e22e17c6328
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue May 22 14:37:19 2012 +0200

    lib: extract kmstest_create_fb
    
    We should get more kms tests soon, and not needing to copy-paste a
    nice test pattern should be useful.
    
    That establishes a firm depency of i-g-t on cairo over everything, but
    I don't care so much about that.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0732cc59abc06151b8756a6890f13885cde7403b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue May 22 12:01:36 2012 +0200

    tests: use drm_open_any more
    
    And fix it up to not leak open fds, which kills all the master only
    stuff.

commit a5e6897d10962e4bdfa657ce704bc111a4a4c663
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue May 22 10:57:17 2012 +0200

    tests/flip_test: rip out usage
    
    Totally useless if the only option is "-h"

commit 1fedd1db41bfe1815654a726480e430591db344d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue May 22 10:53:38 2012 +0200

    tests: add flip_test to .gitignore

commit 9e620146f704549c7203632f63571d22a9551de3
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue May 22 10:51:29 2012 +0200

    tests/flip_test: rip out funny pictures
    
    The path isn't properly autodetected and it yells stupid stuff into
    stderr. Which causes spurious failures.
    
    And really, these are automated tests. If you need to look at the output,
    something is wrong.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 984e44f88bad9b39bd5bb9c449f6bfb0580660ae
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Apr 27 16:14:34 2012 -0300

    intel_infoframes: options -p and -P require an argument
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>

commit e6b264cce7799d822bc8a1b0e493cf5dee112f85
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Wed May 16 10:14:55 2012 -0300

    intel_gpu_top: allow to work on Gen7
    
    Somehow nobody noticed this before, but we were missing blt and bsd6
    initialization on Gen7.
    
    Reported-by: Philippe Lecluse <philippe.lecluse@intel.com>
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit 544e35785198045d76d8f11ee414c7f1661ffc77
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu May 10 20:25:33 2012 +0200

    tests/gtt_speed: try to outwit gcc
    
    It optimized away the read loops ;-)
    
    Also fix up the size to not be 1/4th of the one we want for tiled
    buffer tests.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 78c38dcddb79052a964081c470bb2641fb3daf95
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 9 14:06:28 2012 +0100

    tests/gem_tiled_pread_pwrite fix progname for pretty print progress
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 412e7b341f40a2d21067c7059a64e500945d6433
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 9 13:50:53 2012 +0100

    intel_error_decode: Be more lax for whitespace around parsing PCI-ID
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3986d9faf343639dc9ceec23e880a99f4fcea365
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Tue May 8 15:55:05 2012 -0300

    tools: add Haswell registers into intel_reg_dumper
    
    For now, only print their content for diffing, but also add the necessary
    bits that can be used for more verbose output in the fugure.
    
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e70b7de8cea142a7aa2b4c08cdbd7484d7b39e14
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Mon May 7 12:57:05 2012 -0700

    tests/flip_test: test on each CRTC for each detected output
    
    This allows us to test on 3 pipe configs for example.

commit 362599ac1042eeca52ebbfca646a975a989ff38f
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Mon May 7 12:36:28 2012 -0700

    tests: add simple flip test
    
    Add a simple flip test to test flipping on a single output with the
    preferred mode.
    
    TODO: test each crtc for 3s and print pass/fail results

commit c6f42f4cca10cb644c7f91d1fd3e625dba505eb0
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Sat Apr 28 20:10:09 2012 -0700

    intel_infoframe: fix assertion off by 1
    
    this makes my compiler very unhappy
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 43fda53199afba7788549d4d290bb0874459fa2d
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Sat Apr 28 20:07:40 2012 -0700

    chipset: accidentally left the old IS_GEN7 macro
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 97198ccbe1546e0249c3a7885d778e46cb538877
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Apr 27 14:08:34 2012 +0200

    test/ZZ_hangman: adjust to new error_state reset semantics
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9898083fa2841a73227515cbe2659c99f353db95
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Apr 24 18:10:25 2012 -0300

    intel_infoframes: add support for Gen 4
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0611af4a33e443767ce2bdadac08f6f0680dbb9e
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Tue Apr 24 18:10:24 2012 -0300

    intel_infoframes: AVI InfoFrame version should be 2
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4d053f97db7759c51c2299b401e166b09efad87e
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Wed Apr 25 13:33:17 2012 -0700

    chipset updates
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit bb40c7e8df2183449e6e252556b9c176d516caeb
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Apr 25 13:21:38 2012 +0200

    test: fix up hangman script and enable by default
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cf72da57dcc1baeaaff71250a82b40ab324b7590
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Apr 22 12:35:23 2012 +0200

    tests: add gem_unfence_active_buffers
    
    Unfortunately this requires slab poisoning to catch anything :(
    
    Also add a new helper to drmtest to get the available fence count.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 19a28d06ad6555ae36797f64e3705d373822faf7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 19 14:11:51 2012 +0100

    lib: Fix render copy on gen2

commit 7e9676143cd5c7e44b310fa3bce8da5d1cdf21e8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Apr 19 12:34:16 2012 +0200

    tests/gem_ringfill: add progress indicator
    
    This thing takes ages on older chips.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 127d76d51c00fa1693053d126f8045b1efa7f07a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Apr 17 22:38:44 2012 +0200

    tests: re-enable commented-out testcase
    
    Meh, I suck.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 16bc61993915ab39136407d82e3468d8840b6a28
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Apr 17 22:02:33 2012 +0200

    tests: add gem_set_tiling_vs_pwrite
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2f4bc72da76afac4dc708a0c70ca9e32522b1f83
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Apr 17 18:01:48 2012 +0200

    tests/gem_set_tiling_vs_gtt: update copyright header
    
    Meh, I've forgotten these.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ff6abb313d975850c0f333f308d6c09e636cd907
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Apr 17 17:25:24 2012 +0200

    tests: add gem_set_tiling_vs_gtt
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 48ec7f9edd7a1bfe01a158a2a3ba85667f29030f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Apr 17 13:25:04 2012 +0200

    tests/gem_set_tiling_vs_blt: fix on gen4+
    
    Oops, the new checks need correctly tiled blts to work.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b38188ad97571f9145407e9bf3bd6a32a51ce87d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Apr 15 23:59:12 2012 +0200

    tests: rename gem_tiled_after_untiled_blt into gem_set_tiling_vs_blt
    
    ... it checks much more now.
    
    Also update the comments a bit in the testcase.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 887e4a58b9b697e7c8545123008a350864311c2c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Apr 15 23:40:20 2012 +0200

    tests: pimp tiled_after_untiled_blt
    
    Now with more tiling transition tests. Changes:
    - refactoring to reuse the tiling transition functions.
    - add a tiled->untiled transition
    - add a tiled->tiled transition with different stride
    - add a check at the end to ensure that the tiling has indeed changed
      on the test_bo
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit fd585207961f9916e1603852a703d6c656604656
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Apr 13 10:27:01 2012 -0300

    Add tools/intel_infoframes
    
    This is a command-line tool that allows us to display and modify the
    InfoFrames we send.
    
    v2: use argv instead of stdin
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit de9d98bb6e8736907458a28921aee5fcc507ca6d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Apr 12 23:12:24 2012 +0200

    tests: skip rc6_residency test if not supported
    
    Fixes spurious failures.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5ce86f88a0a9b24564a6349a70de5797b814b108
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 12 15:47:00 2012 +0100

    Use mmap64() for performing the GTT mapping
    
    Although the address space for GTT mappings may only be 32-bits, we need
    to use the explicit 64-bit mmap interface so that on a 32-bit platform
    the offset we pass is not truncated to 31-bits.
    
    Fixes gem_mmap_offset_exhaustion on 32-bit platforms.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8f6ebd4ac03f7c3c751d4d6bb4096d0285e34517
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Apr 11 15:28:26 2012 +0200

    tests: add gem_gtt_concurrent_blit
    
    Same test as Chris Wilson's gem_cpu_concurrent_blit, but for
    gtt mmaps.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 0448eefeb2f6971f9f74fb83972fa327d3255415
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Apr 11 15:02:32 2012 +0200

    tests: add sysfs_rc6_residency to .gitignore

commit ee014dbb8d98ada16a4829ff9878af6d4a06dcad
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Apr 11 14:55:30 2012 +0200

    tests/sysfs_rc6_residency: add some sleep before testing
    
    That way I can run i-g-t on my ivb without spurious failures.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f841f4028ca37c3e4b49240b7f999dd07709724c
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Sat Mar 24 19:04:10 2012 -0700

    tests: rc6 residency test
    
    This is meant to test the sysfs entry for showing rc6 residency in
    milliseconds. Remember, sysfs is a permanent interface.
    
    v2: use new get_card interface to try "all" devices
    check rc6p and rc6pp in addition to rc6
    
    v3: rename rc6_residency.c to sysfs_rc6_residency.c
    print better error messages
    skip test if rc6 isn't enabled
    
    v4: update to new sysfs names
    
    Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>

commit 2585bea428801c5542bc62d75d0d5c1ee71ff739
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Sun Mar 25 16:04:07 2012 -0700

    drm/i915: extract card getting
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 8af53e0b7e2f99ead129822f3761c618f775f7e2
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Sat Mar 24 19:03:38 2012 -0700

    build: make sure we have asprintf
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit b78243fc61bd46624931f149d00e4a78242e9c92
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Apr 10 19:41:43 2012 +0100

    test/gem_cpu_concurrent_blit: Limit memory usage to half aperture
    
    So that we don't cause needless thrashing on older devices and spoil the
    test.

commit da026d8bfef1a76a60ae4a46a738ce153e9fe0b7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Apr 10 18:21:33 2012 +0100

    test: Exercise concurrent GPU read/write with CPU domain access
    
    Designed to exercise this patch to i915.ko:
    
    diff --git a/drivers/gpu/drm/i915/i915_gem.c b/drivers/gpu/drm/i915/i915_gem.c
    index fbf1118..57ae1f2 100644
    --- a/drivers/gpu/drm/i915/i915_gem.c
    +++ b/drivers/gpu/drm/i915/i915_gem.c
    @@ -3181,9 +3181,11 @@ i915_gem_object_set_to_cpu_domain(struct drm_i915_gem_obj
            if (ret)
                    return ret;
    
    -       ret = i915_gem_object_wait_rendering(obj);
    -       if (ret)
    -               return ret;
    +       if (write || obj->pending_gpu_write) {
    +               ret = i915_gem_object_wait_rendering(obj);
    +               if (ret)
    +                       return ret;
    +       }
    
            i915_gem_object_flush_gtt_write_domain(obj);
    
    By exercising the conditions whereby should either of the checks be missed
    an error is detected.

commit 7601fafbcffe1c6da5351682bd6febe5fa248f16
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Apr 10 16:23:18 2012 +0200

    tests: explicit use bash
    
    We use bashisms, which debian's default sh dash doesn't like.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit af275bd52197cb41e6beb83dc496a50666b48814
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Tue Apr 3 23:02:59 2012 -0700

    tests: add wedging tests
    
    Used to check that i915_error_state works. Unfortunately this
    kills the gpu because wedging is permanent.
    
    Base on a patch by Ben Widawsky.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bb86947638b7471c4e3da5dd32b756b0c7d504ae
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Apr 4 11:07:44 2012 +0200

    tests: fixup drm_lib.sh sourcing
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e63f1870b47073852c82f02e29b57dbb66b72d0d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Apr 4 10:56:50 2012 +0200

    tests: use / as path separator instead of _
    
    Oops. Originally by me, noticed while reviewing Ben Widawsky's patch.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 888df75a0cc3e6eea485ae3189afde2d86486750
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Tue Apr 3 23:02:58 2012 -0700

    tests: use common code for scripts
    
    This removes cut and pasted code and uses a more central source.
    
    Signed-off-by: Ben Widawsky <benjamin.widawsky@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b7bd1837ccc980666f5502fbd428d3a4be3cd26f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 29 12:45:59 2012 +0100

    Make the assertions guarding syscalls (drmIoctl in particular) verbose
    
    Currently all we see is gem_read: ret == 0 failed, where it would help
    to see the errno and/or the ret.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9dbce0991f4eb353ab892c88299bbebf2cb1a285
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 24 19:30:29 2012 +0100

    tests: use gem_create and gem_close more
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ff93f351512a194dd3d32e643c7987b5fe2347a5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 24 19:22:21 2012 +0100

    tests/gem_fence_thrash: make some good use of drmtest helpers
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 11fa35850306172b0e2285a919172c02671dd815
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 24 19:17:43 2012 +0100

    tests/gem_exec_faulting_reloc: kill superflous mmap_bo
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c34e48119939fa30809a58a9991ae18539824892
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 23 19:28:08 2012 +0100

    tests: add gem_tiled_after_untiled_blt
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit afbdc7af8d9324ae065c47d6122bb020c579fd0a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Mar 22 13:47:57 2012 +0100

    tests: adapt storedw tests to ppgtt
    
    MI_MEM_VIRTUAL actually means use global gtt now, not setting the bit
    means use ppgtt. On previous gens, not setting the bits ment 'use
    physical memory'. So what, the usual confusion.
    
    Note that for some odd reasong this is broken on gen6, but only on the
    bsd ring. Unexpected.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9e531888ed0c3e34303a67e324ea4ab29057c62b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Mar 22 12:27:43 2012 +0100

    tests: don't just bail out when there's not enough RAM
    
    ... but actually run the test with reduced memory requirements,
    as the messages claims. Additional print it to stdout, stderr
    seems to imply FAIL in our QA's testing rig.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 16c4f52782e0df88f818dadd4586ea99ccf992d5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Mar 20 14:24:14 2012 +0100

    tests: add gem_mmap_offset_exhaustion
    
    This also adds a gem_madvise helper to lib/drmtest.c
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c4ae3bc41204c83a89369af91217daa33fff9675
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Mar 20 14:25:56 2012 +0100

    update .gitingore

commit f4908880f3b91caab1fffbbd17c3e0bc432f71d1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Mar 20 14:03:18 2012 +0100

    intel_sprite_on: kill overtly verbose and totally content-free comments
    
    /me just hates fluff
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 42b20d4ab97363f18c7c05cf69fe9b06ddead27f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Mar 20 14:00:55 2012 +0100

    intel_sprite_on: remove copy&pasted gem functions
    
    Can we just please stop this?
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3928569eede8ca5f2e9ee1fa4e7fb9989956b2a9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 19 14:25:13 2012 +0000

    intel_gpu_top: Trust the register access is safe
    
    Fixes intel_gpu_top on gen3 which otherwise refuses to do mmio.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit bf6c480d6ddc157713f839af314ea4892bf8f867
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 19 14:24:22 2012 +0000

    decode: Use the correct start mask for gen3 fence registers
    
    A cut'n'paste error from gen2 apparently.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d364c280892af29956ad7032b0d242b7d24d7846
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 14 10:59:51 2012 +0000

    configure: Add AC_SYS_LARGEFILE for mmap64 support on 64-bit
    
    Without enabling largefile support the prototype for mmap64() is broken
    on Linux/x86_64 with the result being a 32-bit integer sign-extended
    to fill a 64-bit pointer. Hilarity ensues.

commit be7ca950d7d4d18744a76abab091eb032835fb82
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Tue Feb 28 17:40:32 2012 -0300

    intel_reg_read: add a flag to simplify bit decoding
    
    This allows to specify '-d' parameter which will decode individual bits in
    each register being read.
    
    The register bits are printed horizontally for space reasons. This
    requires more than 80x25 terminal to see them all. An alternative solution
    would be to print them vertically, but this will become much more
    difficult to read when printing multiple registers at the same time.
    
    v2: fix spacing to get us a bit closer to the code nirvana.
    
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit 8d4545642835cb66f84739b9384f31920feacdba
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Tue Feb 28 17:33:54 2012 -0300

    intel_reg_read: support reading multiple registers
    
    The registers must be passed on the command line and will be read
    sequentially, one at a time.
    
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit b7464e4032a181fc743fe531c6ea271c099b9a74
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Tue Feb 28 17:20:35 2012 -0300

    intel_reg_read: add support for getopt
    
    This will allow us to pass more options to it in the future.
    
    v2: fix whitespacing issues and improve scary warning text as suggested by
    Paul Menzel.
    
    Reviewed-by: Paul Menzel <paulepanter@users.sourceforge.net>
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit 628ad0c91bad85f48a34ae7cefd53e686f99a3a8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Feb 29 20:22:45 2012 +0100

    tests: some more tuning on the tiled partial pwrite/pread test
    
    ... 8 pages is just not enough to somewhat reliably get one page that
    needs bit17 swizzling.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit dac239e2b694f5f187ae0af9aeb339e3b57a51a1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Feb 29 17:36:04 2012 +0100

    tests/gem_tiled_partial_pread/write: fixes
    
    Astonishing how dense I sometimes am ...
    - increase the bo size so that we don't have any round-up to next tile
      size areas (which the 2d blit go over, but the 1d pread/pwrite calls
      will notice).
    - correctly set tiling bits when copying back to a linear buffer.
    - read back through a tiled bo to avoid messing with swizzling.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f1d32d541dc8328a0f55224915906f23b58062a0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Feb 29 15:57:30 2012 +0100

    tests: add tiled partial pwrite/pread test
    
    And indeed, this blows up.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a50550f22341aa4ee17110ecc68953829ba0153e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Feb 28 09:31:17 2012 +0000

    lib: Downgrade error for unknown 'swap' not 'ram'
    
    Oops, my mistake for copying a compile fix from another machine...
    
    If we can't detect how much RAM we have, 0 is not a suitable default, so
    keep the error for the time being and only downgrade the error for
    unknown swap.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2035119201b4c63fe84d3883ae1b1c058bcc862c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Feb 28 09:29:11 2012 +0000

    lib: Downgrade error for failing to determine swap interface to a warning
    
    If we can't detect how much swap is available, presume none.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1e74007b4c7c05f0b157b16acc2b9605002fe2ba
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Mon Feb 27 12:50:50 2012 -0800

    testdisplay: remove unnecessary passing of width, height, stride, depth
    
    These are globals, no need to shadow them everywhere.

commit ea4163395e95951bd73b14316a0b28eac0475aaa
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Mon Feb 27 12:46:11 2012 -0800

    testdisplay: remove plane test support
    
    This is better done in intel_sprite_on and was broken anyway.

commit 488daaa40bdf45f4cdcc9f516148dc1fd3b6a0bd
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Feb 22 10:58:39 2012 +0100

    demos/intel_sprite_on: build warning fixes
    
    ... from Armin Reese.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ace4a6e0e99841aec7199fe00795ddb35dfb24d1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Feb 22 10:50:52 2012 +0100

    tests/gem_ringfill: shut up the compiler
    
    Double-include ftl and local variable shadowing. While fixing the
    later I've noticed that we mix up width and height in the blt copy
    function.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit fa6c2757feb18b17120310fe315ed32594ff326c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Feb 20 22:53:26 2012 +0000

    tests/gem_ringfill: Exercise all rings
    
    On SandyBridge, the BLT commands were split from the RENDER commands as
    well as the BSD split inherited from Ironlake. So we need to make sure
    we do exercise each ring, and in order to do so we also need to make
    sure each batch takes longer to execute than it takes for us to
    submit it.
    
    v2: Exercise each ring sequentially.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5cf555868214ac6d55d8102d3198813aadc37853
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Feb 20 10:04:02 2012 -0800

    gem_ringfill: Make this actually test that all the batches executed.
    
    I was looking into some strange behavior in Mesa that looks like
    batches maybe being skipped, but this test didn't catch it.

commit 732547793f22c873e3bc68c9c164937cb2ec2da9
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Feb 20 10:04:01 2012 -0800

    intel_reg_dumper: Add dumping of GPU turbo regs.
    
    I was interested in finding why my IVB system is not getting GPU turbo
    after suspend/resume.  The piece that looks weird to me is that
    INTERRUPT_THRESHOLD is sitting at 0, whereas pre-suspend it's
    0x12000000.

commit 6624325f13e48e13f3c6d95f374437b151afbe12
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Feb 20 10:04:00 2012 -0800

    reg_dumper: Refactor duplicated reg-dumping code.

commit 3e0bd266d29c74fb4e5d19d24e8c9853c0da90eb
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Feb 20 10:03:58 2012 -0800

    instdone: Fix fallthroughs to invalid instdone bits on newer hardware.

commit 4fc909fd4881eec38d46be5db9e023e07d53c33c
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Feb 20 10:03:59 2012 -0800

    instdone: Add support for one of the IVB instdone regs.
    
    [danvet: added GAM and GAFM bits.]

commit 8bedcae848332e9dd3425765682a7f71eb1339f0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Feb 16 12:26:23 2012 +0100

    tests/intel_reg_dumper: s/pipe/disp_pipe/ to shut off the compiler
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3b65f179f2acbf8f2c4372f1cea14069b0d3375c
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Feb 15 16:04:28 2012 -0200

    Add intel_panel_fitter tool
    
    The tool allows you to change the panel fitter settings, so you can
    change the size of the screen being displayed on your monitor without
    changing the real pixel size of your desktop. The biggest use case for
    this tool is to work around overscan done by TVs and some monitors in
    interlaced mode.
    
    v2: reviews by Ben, Chris and Rodrigo
     - don't install
     - use intel_register_access_init
     - check for maximum X and Y values
     - add a disclaimer saying this is not the real solution
     - print less when pf is disabled and option '-l' is used
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ecad594e0254648a3bf2d995569afd18dbb75ec2
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Feb 15 16:04:00 2012 -0200

    reg_dumper: change and fix behavior when using dump files
    
    Before this patch, handling dump files was wrong:
    - when HAS_PCH_SPLIT was specified, intel_reg_dumper segfaulted inside
      intel_check_pch()
    - the "devid" variable was used but not set
    - there was no way to specify the device id of the machine used to
      generate the dump file
    
    This patch fixes this behavior with the following changes:
    - the HAS_PCH_SPLIT variable is gone
    - there is now a '-d' argument that can be used to specify the device id
      used to interpret the results
    - when a dump file is used but the '-d' argument is not provided, an
      Ironlake machine is assumed
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ad87b06fd6a5af4836562c1d318ca06a918d5466
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Feb 15 16:03:09 2012 -0200

    reg_dumper: add interlaced information to TRANSCONF
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3310db08d874d696241b84aceb9380e8e17d6e9e
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Wed Feb 15 16:02:27 2012 -0200

    reg_dumper: add interlaced and rotation information to PIPECONF
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 27d1cef2d32cf1ef6904e672152364240d634ef8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Feb 15 17:50:57 2012 +0100

    tests: fixup storedw tests
    
    We need to use _INSTRUCTION as the reloc domain because otherwise the
    ppgtt pipe_control w/a for snb won't kick in and the test fails.
    
    The storedw tests for blt and bsd are still disabled because the
    corresponding patch to flag ppgtt support isn't merged upstream yet.
    Without ppgtt these hang my snb here.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1d16f7934df06d4b4feee083096575ef0c4f2340
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Feb 15 17:43:38 2012 +0100

    test/gem_tiled_pread_pwrite: add progress indicator
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 24c8d2f112853a41cd9d5077c86e41ed62663a09
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Feb 12 12:14:27 2012 +0100

    remove old .c files
    
    Oopps, I've forgotten about this in
    
    commit 9b32894937af27f9ba95ea572ac857d376fe9034
    Author: Daniel Vetter <daniel.vetter@ffwll.ch>
    Date:   Sat Feb 11 16:52:26 2012 +0100
    
        prepend 'intel_' to installed programms
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e1ddd1c8e0ec947906b528315cdc7b9f64ae3d9b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Feb 11 16:54:58 2012 +0100

    lib/drmtest: fixup copy&paste printf format issue
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9b32894937af27f9ba95ea572ac857d376fe9034
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Feb 11 16:52:26 2012 +0100

    prepend 'intel_' to installed programms
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6cfd16648d8d229c4ab474e4beff1cc131287238
Author: Kenneth Graunke <kenneth@whitecape.org>
Date:   Fri Feb 10 22:19:16 2012 -0800

    Remove pointless Android ifdefs for sys/fcntl.h.
    
    On my system, sys/fcntl.h contains exactly one line:
    
       #include <fcntl.h>
    
    So there's really no need to #ifdef it.  Also, intel_mmio.c already
    included <fcntl.h>; there's no need to include it twice.
    
    Signed-off-by: Kenneth Graunke <kenneth@whitecape.org>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b39a74ba4ef36889465b03c93d3d4940b21af465
Author: Sateesh Kavuri <sateesh.kavuri@intel.com>
Date:   Mon Feb 6 15:37:04 2012 +0530

    Added support for Android
    
     Added the Android.mk file as per Android make system. Also had to modify
     the headers with the proper location for fcntl.h as per the Android
     bionic headers location
    
    Signed-off-by: Sateesh Kavuri <sateesh.kavuri@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2065ca15fb5a5a5c4079f6c0cb6361a4052e4fdb
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Feb 9 22:39:50 2012 +0100

    Release 1.2

commit 06bfa3d3870521a595beb280f5f91c07422f189e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Feb 9 22:32:54 2012 +0100

    lib/rendercopy: fixup make distcheck
    
    And complete the gem_stress->rendercopy rename that I've forgotten
    about.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 042f40eda776aec56c4d39d4e47033117a85415e
Author: Alan Coopersmith <alan.coopersmith@oracle.com>
Date:   Wed Feb 8 17:04:45 2012 -0800

    Fix program name in intel_bios_dumper.man SYNOPSIS
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>

commit 90a6f75dd284e4527e6583a519da5b634f8b469d
Author: Kenneth Graunke <kenneth@whitecape.org>
Date:   Wed Feb 8 12:05:05 2012 -0800

    Update generation checks to provide basic support for Ivybridge.
    
    There may be some updates required, but assuming Ivybridge is similar to
    Sandybridge is a decent start; previously it fell through to the Gen2/3
    case and nothing worked.
    
    Signed-off-by: Kenneth Graunke <kenneth@whitecape.org>
    Reviewed-by: Ben Widawsky <ben@bwidawsk.net>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6fe3884bc97b7c9ad5cdcbc9144cb7319341eb75
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Feb 8 16:46:57 2012 +0100

    add sprite demo from Armin Reese
    
    Also fixed up the copyright header a bit. No comments on the coding
    styled used ;-)
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e61b917134527500c08900f5f71d996a9cbc5735
Author: Alan Coopersmith <alan.coopersmith@oracle.com>
Date:   Sat Feb 4 09:05:08 2012 -0800

    Move free(cmd) to after last use of cmd in intel_gpu_top
    
    Error: Use after free (CWE 416)
       Use after free of pointer 'cmd' in call to fprintf
            at line 496 of tools/intel_gpu_top.c in function 'main'.
              Previously freed at line 491 with free.
    [ This bug was found by the Parfait 0.4.2 bug checking tool.
      For more information see http://labs.oracle.com/projects/parfait/ ]
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3d46ca8c4d43adfd9827b4b21648a4fddd03c254
Author: Yi Sun <yi.sun@intel.com>
Date:   Fri Feb 3 22:45:39 2012 +0800

    tests/testdisplay.c: rewite function dump_connectors and dump_crtcs.
    
    Replace the globe variable drm_fd with local variable passed from parameter.
    
    Signed-off-by: Yi Sun <yi.sun@intel.com>
    [danvet: fixup whitespace]
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4cceae74e3f18b78db5049edb0fc3d6d89b66275
Author: Yi Sun <yi.sun@intel.com>
Date:   Fri Feb 3 19:23:55 2012 +0800

    tests/testdisplay.c: Fix the black screen issue while force mode.
    
    Replace the 8 globe force mode variables with a struct drmModeInfo variable.
    Next step, we could reduce the number of globe veriables, to be convenient to call the functions.
    
    Signed-off-by: Yi Sun <yi.sun@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 36a40a5423247651bb51d8ad9bfdd0528cd79634
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jan 31 13:52:59 2012 +0100

    gem_partial_pwrite_pread: add progress indicator
    
    Without optimized pread/pwrite this test takes forever.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 611e0cb333b9c0c55985b5d40d7c0c76e15b343b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Jan 27 18:50:21 2012 +0100

    intel_reg_dumper: add TRANS_VSYNCSHIFT
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6b6b13906a22d7d1f0205a6a44b6c760b4c3fe97
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Wed Jan 25 21:05:15 2012 -0800

    intel_reg_write: use register access init/fini
    
    This will do the proper forcewake stuff.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 6e3066c9c3c4443cf63e0efbb3d9d0906d58b5b4
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Wed Jan 25 21:05:15 2012 -0800

    intel_reg_read: use register access init/fini
    
    This will do the proper forcewake stuff.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 4c20525b7f50fa0c0bb5579d49f7bc4907698da0
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Wed Jan 25 21:04:16 2012 -0800

    mmio: refactor reg init/fini
    
    Rearrange register access init and fini so that we properly accomodate
    platforms without forcewake.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 802bd74c5f9526faccfdf168b06c0c2c44237840
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Sun Jan 15 13:41:42 2012 -0800

    i-g-t: silence -Winline
    
    In this case, the code already has a comment about the problem. We don't
    need to flood the build with this less than useful message.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 1ffe6b0ee8decc02edb48ab197a869e1d7783a2b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jan 25 10:11:49 2012 +0000

    intel_bios_reader: Sanitize input to ensure all data blocks are within bounds
    
    Running intel_bios_reader upon itself causes the reader to crash and
    burn. It obviously finds a VBT signature inside the binary, but then
    does not rigorously check that all data blocks are valid before
    dereferencing them.
    
    Reported-by: Emanuel Bronshtein
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=45205
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 93a65895bb775932b02a3de692a1262ef7fafdbc
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jan 24 23:18:21 2012 +0100

    drmtest: add progress indicator
    
    Some test that trash the aperture necessarily need to take forever, so
    add a little progress indicator to keep worried minds at peace.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7492f97cde0a0b86b307637858c1d5efbadd2d06
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jan 24 18:05:11 2012 +0100

    tests: add gem_cs_prefetch
    
    Tested-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ca10c7231da5fe00be52c6d5be2d053637c07467
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jan 24 21:41:17 2012 +0100

    intel_error_decode: fixup glibc free warning
    
    Usually some random stack garbage doesn't equal some other
    random stack garbage, leading to the filename != path check
    succeeding.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit fbae13899013491fa78499ba27641c2fadef1fb0
Author: Alan Coopersmith <alan.coopersmith@oracle.com>
Date:   Mon Jan 23 20:13:49 2012 -0800

    Add Solaris implementation of intel_get_total_swap_mb()
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5c4e041dc8bea5cc32e37ab8fce09ac7f4ede135
Author: Alan Coopersmith <alan.coopersmith@oracle.com>
Date:   Mon Jan 23 20:13:48 2012 -0800

    Make benchmarks also link against libpciaccess
    
    Fixes Solaris build error on build of intel_upload_blit_large:
    
    Undefined                       first referenced
     symbol                             in file
    pci_device_probe                    ../lib/.libs/libintel_tools.a(intel_pci.o)  (symbol belongs to implicit dependency libpciaccess.so.0)
    pci_system_init                     ../lib/.libs/libintel_tools.a(intel_pci.o)  (symbol belongs to implicit dependency libpciaccess.so.0)
    pci_device_find_by_slot             ../lib/.libs/libintel_tools.a(intel_pci.o)  (symbol belongs to implicit dependency libpciaccess.so.0)
    ld: fatal: symbol referencing errors. No output written to intel_upload_blit_large
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit fa461203e6df7318d49d183366769e392e6decf0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jan 24 11:28:25 2012 +0100

    testdisplay: make udev optional
    
    Hopefully this makes Solaris happy.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7f7cafe7293570d56607b101cac7db617741713d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jan 24 10:50:05 2012 +0100

    testdisplay: extract hotplug code
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 137f4d467e93eb1a91487f7be8b7a6e62e2bce2d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jan 24 09:37:51 2012 +0100

    lib: forcewake is gen6+
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8d4d8b00ed92287cee81448ad886d8e9a4602f7b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jan 23 17:18:53 2012 +0100

    tests/gem_tiled_swapping: be more conservative with the swap requirements
    
    Blew up and angered the OOM killer on one of my machines.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 98129fa2ff2c095d13cb0f60499c2de129d36d6c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Jan 22 21:58:27 2012 +0100

    tests: add gem_tiled_swapping
    
    Also add a drmtest_exchange_int helper, might come handy at other
    places.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit fbfe374b280be9542f7ddb59c41c6096f4d773fa
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Jan 22 20:09:54 2012 +0100

    lib: extract drmtest_permute_array
    
    Lots of tests need to create havoc to LRUs in the kernel or otherwise
    need to shuffle things around a bit. So make a small array permutation
    function available.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1a9fa8fd12c78236b1eb4a83062cd8f732c7abb3
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Jan 22 19:24:48 2012 +0100

    lib: add intel_get_total_swap_mb
    
    Test that try to exercise the swap paths need to check whether swap is
    available, otherwise they'll just oom.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7132d0f977d226969b47edafbed74a6de04465f9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Jan 22 19:14:25 2012 +0100

    Revert "tests/gem_tiled_pread_pwrite: actually try to use more than total ram"
    
    This test is actually not really designed to test swap.
    
    This reverts commit 6d755c39d38e9f0e5a991933cc82e015d1ccd272.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6d755c39d38e9f0e5a991933cc82e015d1ccd272
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Jan 22 18:04:24 2012 +0100

    tests/gem_tiled_pread_pwrite: actually try to use more than total ram
    
    Luckily there's usually enough other stuff around to waste the last
    few mb ...
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e64abe581a34bf12d3a91c13970100a16f709783
Author: Wu Fengguang <fengguang.wu@intel.com>
Date:   Tue Jan 17 07:19:24 2012 +0800

    intel_audio_dump: show more AUD_CONFIG bits
    
    Signed-off-by: Wu Fengguang <fengguang.wu@intel.com>
    Reviewed-by: Eugeni Dodonov <eugeni.dodonov@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3beea0bd0c3ead3cb87ca6fc0b17b887d187d002
Author: Wu Fengguang <fengguang.wu@intel.com>
Date:   Tue Jan 17 07:18:08 2012 +0800

    intel_audio_dump: fix missing Audio DIP tabs
    
    This makes the SNB/IVY Audio DIP values aligned with others.
    
    Signed-off-by: Wu Fengguang <fengguang.wu@intel.com>
    Reviewed-by: Eugeni Dodonov <eugeni.dodonov@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 08ccec1ec77a92ec1aa766c8571a0a7a2e6541f8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Jan 19 13:01:03 2012 +0100

    tests: make testdisplay non-optional
    
    Not testing modesetting should not be an option.
    
    Also this hopefully prevents testdisplay build-breakage from lingering
    on for days like it has in the past.
    
    And we want to eventually test the gem/kms cross-section, i.e.
    pageflips.
    
    Acked-by: Chris Wilson <chris@chris-wilson.co.uk>
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f07e4d1885fbf54a4faa1f91a92fa9499e11b011
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jan 18 21:23:56 2012 +0100

    lib: extract rendercopy functions from gem_stress
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1357427fd0287b1027608c96d400daa6c4c97ddc
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jan 18 17:53:12 2012 +0100

    gem_stress: s/gem_stress.h/rendercopy.h

commit f7c2dab5bd1284982343a31d315864906392f016
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jan 18 17:51:48 2012 +0100

    gem_stress: move keep_gpu_busy stuff out of render copy functions
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b9fe673f498003b2d235f63485ed832070f84a8c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jan 18 17:47:33 2012 +0100

    gem_stress: move option struct out of header
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9f20ecc3b3e80b2893646817926f2e090abf757a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jan 18 17:46:00 2012 +0100

    gem_stress: add width/height arg to rendercpy functions
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 699d30950f1d91cd017364765c14fdc4cb63cd14
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jan 18 01:03:20 2012 +0100

    gem_stress: move a few things out of gem_stress.h
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f1de285e7e5e1825f09510b2e6264139ea92f921
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jan 18 00:55:49 2012 +0100

    gem_stress: pass batch as arg to render_copy functions
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 72f74ce35512aebebf7f9a35e54cd7746ab30017
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jan 18 00:36:37 2012 +0100

    gem_stress: remove logical_tile_no arg from render_copy functions
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 205510badf00f82c0dc069ca15c5016a6fe18a60
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jan 18 00:34:15 2012 +0100

    gem_stress: add buf->size
    
    Removes a dependency on gem_stress internals from the rendercpy
    functions.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d75d69d0a9e5e77dcea469b47401cd7d25f155a3
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Jan 15 18:32:11 2012 +0100

    lib/drmtest: extract mappable aperture trasher infrastructure
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7b14b093d45232cd2fd3a96322353eb35083c9eb
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Jan 15 17:40:41 2012 +0100

    lib/drmtest: add gem_mappable_aperture_size
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7f944349efb98ae2ab777dc745c3d12acd03d82f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Jan 15 17:14:56 2012 +0100

    lib/drmtest: extract gem_aperture_size
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d749921e48366c3b562fa315e7ed6cf4ce063a1c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Jan 15 16:40:32 2012 +0100

    tests: update .gitignore

commit a50eb34398b7a8ac5580d21a5f867c4697fee7ea
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Jan 15 16:39:49 2012 +0100

    tests: add ZZ_hangman
    
    Not yet enabled by default because the kernel can't recover from this
    on chips where we don't have a gpu reset implemented.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit eb6459161394d763b116e55eaef22b6b0b6a09a8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Jan 14 17:05:39 2012 +0100

    tests: add ZZ_check_dmesg
    
    This way the testsuit automatically fails if we hit a DRM_ERROR
    or a WARN/BUG somewhere.
    
    ... i.e. this is the Jesse Barnes catcher ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 91a01e034858dacd41f0a847ba90996db87c44be
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Tue Jan 10 20:30:23 2012 -0500

    tools: use correct src and build location
    
    Headers are found under top_srcdir/
    Headers are CPP flags, not C Flags
    libintel_tools.la is located in top_builddir.
    Use dist_bin_SCRIPTS so it is included in tarball
    Line-up the line continuation characters
    
    Acked-by: Ben Widawsky <ben@bwidawsk.net>
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>

commit 812ca58f8a0d71433781b3ae38ead65e10e51cce
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Thu Jan 5 18:56:28 2012 -0500

    scripts: use PYTHON primary directive for python scripts
    
    Should it become installlable in the future, it will get compiled
    at installation time by Automake. Because it is "source", they get
    included in the tarball.
    
    Acked-by: Ben Widawsky <ben@bwidawsk.net>
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>

commit 65b7c72335572fec7f1fd78de840148c91b1fde2
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Thu Jan 5 18:44:49 2012 -0500

    lib: fix include directives, alphabetize sources
    
    Headers are found under top_srcdir/...
    Headers are CPP flags, not C Flags
    
    Acked-by: Ben Widawsky <ben@bwidawsk.net>
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>

commit 3ceb75828ccf813005a7eb4c3924c9ca56c01aa1
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Thu Jan 5 17:02:30 2012 -0500

    Benchmark: use correct src and build location
    
    Headers are found under top_srcdir/...
    Haeders are CPP flags, not C Flags
    AM_CPPFLAGS, AM_CFLAGS and LDAAD apply to all targets.
    libintel_tools.la is located in top_builddir.
    
    Acked-by: Ben Widawsky <ben@bwidawsk.net>
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>

commit 4768adf7d77706fb6c2967695e0afa7d7c7dbb75
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Tue Jan 10 17:25:24 2012 -0500

    Debugger: convert existing makefiles to Automake.
    
    A common xorg idiom is used. The dependencies are auto-detected.
    If they are present, the debugger is build.
    If any are missing, the debugger is silently skipped.
    If --enable-shader-debugger is specified, the configuration
    will abort if any of the dependencies is missing.
    No user actions is needed, no env variable to set (as it should be)
    
    This will fix a number of problems:
    build cannot start due Makefile missing in tarball.
    build fails as GEN4ASM variable not available in Makefile.
    distcheck is also disturbed.
    
    In the process other minor problems were fixed:
    helper target is missing dependencies on evict.h.
    too may arguments given to pre_cpp.py but they were ignored.
    fills /tmp with temporary files.
    
    Acked-by: Ben Widawsky <ben@bwidawsk.net>
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>

commit 9f8766030463bc0c75506d990831b853f19d7725
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jan 11 17:19:53 2012 +0100

    lib/drmtest: add gpu quiescent helper
    
    Some tests are higly timing dependent and others carelessly leave
    active buffers behind. So add a helper to quiescent the gpu and call
    it unconditionally when opening an fd in a vain attempt to make all
    this race-condition hitting more scientifically sound.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7a54bfa772d6823a20152c15fe18726e9222a4e9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jan 11 16:56:50 2012 +0100

    tests: add drm_vma_limiter_cached to check libdrm cache mmap pruning
    
    Suggested by Chris Wilson.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cbaa8a389e47695e6612eb0f76faaf7d0979fee3
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jan 11 15:33:00 2012 +0100

    lib/drmtest: extract helpers for signal interruptions
    
    Also add some hackish stat to check it works.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 36d25cc7440ef9d37d16ea95ee0d51e5e6e2c5e2
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Jan 11 14:59:47 2012 +0100

    tests: add drm_vma_limiter variants that only check gtt/cpu mmaps
    
    Suggested by Chris Wilson.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 553021d9740019d602ef327632a120cf0c9fc15a
Author: root <daniel.vetter@ffwll.ch>
Date:   Wed Jan 11 14:37:42 2012 +0100

    tests: add drm_vma_limiter
    
    v2: Also check whether a 2nd mmap on the same bo still works.
    Suggested by Chris Wilson.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e287fe1958f73d35dd833d927662a5a1c64bcdbd
Author: root <daniel.vetter@ffwll.ch>
Date:   Tue Jan 10 22:34:52 2012 +0100

    tests/gem_fenced_exec_trash: use drmtest helpers more
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 527cad1618b458a2ff04b1d63ea1ffe926774815
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jan 10 18:41:46 2012 +0100

    lib/drmtest: extract gem_mmap
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7a6042e87ef3dee2df06b1666fb8af6889ac35b8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jan 10 18:29:30 2012 +0100

    lib/drmtest: extract gem_create
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 73d1b88129cdcf6fa250b6fb8e198fdfc2d70e04
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jan 10 18:20:39 2012 +0100

    testdisplay: rename global fd variable to drm_fd
    
    Shuts up compiler warnings about shadowing in functions.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit db7462e1f5e3fd6bfeeeeb18e76231638d7f8c07
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jan 10 18:15:05 2012 +0100

    testdisplay: fixup smaller compiler warnings
    
    const char * issues and redudant getopt stuff
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 08cd2f220ee84e51917cc76c19998b12b6d50407
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jan 10 16:10:48 2012 +0100

    tests: use the gem_write wrapper some more
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 673e6b220a34fb7600cbf272bc46a4ac1ca08905
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jan 10 16:05:34 2012 +0100

    lib/drmtest: extract gem_set_domain and gem_sync
    
    gem_sync just does a gtt sync by using set_domain(GTT, GTT).
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a7a80c2c2f7ac15ae50d75dc2fcaf59834b47e0c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jan 10 15:50:20 2012 +0100

    tests: fixup new warnings
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bd5cf9a07d17ce91dfaa3aa12d3f2c93815f0489
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jan 10 15:37:53 2012 +0100

    lib/drmtest: extract gem_read
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 319638ba6d38c25be0f6dadbab3f5855083234a1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jan 10 15:31:11 2012 +0100

    lib/drmtest: extract gem_write
    
    Astonishing how many different function signatures are possible for
    something that simple.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5dd17d3f4bddb075f3fb6fbcd1b6c271f7b746a7
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jan 10 15:07:19 2012 +0100

    lib/drmtest: extract gem_close
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit aa67b22e426f26f8a8d7fe35221fe2a6ceb5d3db
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jan 10 14:59:58 2012 +0100

    lib/drmtest: extract gem_set_tiling
    
    Way too much copy-pasting going on here.
    
    Also fix a compiler warnings in gem_stress while fixup things up.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1be3fd7eeed3adf1fba56edc37110d346b03b88b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jan 9 23:42:19 2012 +0100

    lib: fixup new compiler warnings
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bd811d2d39f49087310be508e2ea6278e817d6f1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jan 9 23:37:36 2012 +0100

    tools/intel_stepping: fixup new warnings
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit faf3dd11357dc3aebbf025785f572b51117ea068
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jan 9 23:35:21 2012 +0100

    tools/intel_gtt: fixup new warnings
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5774fadf7d99ade1a18177eb04bf10377fcfef8b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jan 9 23:34:38 2012 +0100

    tools/intel_reg_dumper: fixup new warnings
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d50e6368abfb657a838d212955b7445b44aba168
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jan 9 23:24:12 2012 +0100

    remove tools/intel_decode
    
    Everyone's using the libdrm decoder now.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 904bcab7ba884605e2e99264482c6c5383025b19
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jan 9 23:22:21 2012 +0100

    tools/intel_gpu_top: fixup new warnings
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2ca6c6b4fdd09b99b2456923926cc8d85316f301
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jan 9 23:19:32 2012 +0100

    tools/intel_dump_decode: use libdrm decoder
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 24a33db7f0177e3c0d7cc4686a69ae6e30e09c3b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jan 9 23:11:58 2012 +0100

    tools/intel_bios_reader: fixup new warnings
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 74b70baf14e42ee435a4e317c20a41d3fb0f0d93
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jan 9 23:10:44 2012 +0100

    tools/intel_bios_dumper: fixup new warnings
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 03ab1328a765d725677809179779ff673ca41296
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jan 9 23:09:37 2012 +0100

    tools/intel_audio_dump: fixup new warnings
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 391e6aa89ad21fa161632b41ff8e1f48352d0287
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jan 9 23:06:41 2012 +0100

    tools/intel_error_decode: fixup new warnings
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7ee9f16e5166a4b0dddb76ad5166410c388f603e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jan 9 23:38:17 2012 +0100

    tools/intel_error_decode: convert over to libdrm decoder
    
    Note that a per-ring error decode state would make more sense - this
    way we could better decode the ring head and tail. But our current
    head tracking is already lame (we need the kernel to also dump the
    ringbuffer head/tail first, not just acthd), so I didn't bother.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 555cfd4597bc04cb3fa67304408f7fa1be910647
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Mon Jan 9 14:33:39 2012 -0800

    testdisplay: update to new colorkey ioctl

commit 504c4fa94f109338ef90a7e07b21bfafa67b8d4e
Author: Alan Coopersmith <alan.coopersmith@oracle.com>
Date:   Fri Jan 6 15:45:29 2012 -0800

    Fix pthread compiler flags to work on Solaris and with Studio compiler
    
    AC_USE_SYSTEM_EXTENSIONS is used to let autoconf take care of setting
    the right system defintions for POSIX threads & similar extensions to
    the base POSIX API.   Since it will also #define _GNU_SOURCE 1, remove
    the extra setting to avoid compiler warnings about redefined macros.
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4e3c85f153276fc297570364b71ddbdd37aeaf5a
Author: Alan Coopersmith <alan.coopersmith@oracle.com>
Date:   Fri Jan 6 14:37:20 2012 -0800

    include <fcntl.h> in lib/intel_mmio.c for open() prototype on Solaris
    
    <fcntl.h> is the POSIX standard specified header for open(), so should
    be available on all platforms.
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c461006bac8a3ff1196a83449bd1676778e8844f
Author: Alan Coopersmith <alan.coopersmith@oracle.com>
Date:   Fri Jan 6 14:37:19 2012 -0800

    List out array values instead of using gcc range extension
    
    Required to compile with Solaris Studio cc compiler.
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 00751594dbdce9f1855ebe4105677a494fd7e36b
Author: Alan Coopersmith <alan.coopersmith@oracle.com>
Date:   Fri Jan 6 15:45:28 2012 -0800

    Use sched_yield instead of pthread_yield
    
    Despite the name implying it's a standard part of the POSIX threads API,
    pthread_yield is actually non-standard and less portable than sched_yield.
    For instance, Solaris only has sched_yield, and not pthread_yield.
    Since even the Linux man page suggests using sched_yield, just call that.
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f73dddc767b38988f6905ef56e95acad9fa4e8ca
Author: Alan Coopersmith <alan.coopersmith@oracle.com>
Date:   Fri Jan 6 14:37:17 2012 -0800

    Solaris defines struct winsize in termios.h
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9ebb860e3981db78ee31859dc77f1fce3ccc3183
Author: Alan Coopersmith <alan.coopersmith@oracle.com>
Date:   Fri Jan 6 14:37:16 2012 -0800

    Provide Solaris implementation of intel_get_total_ram_mb
    
    Signed-off-by: Alan Coopersmith <alan.coopersmith@oracle.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 65db78f687e757ca40ac42e9c26ddc769bd4cfcc
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Tue Jan 3 21:13:39 2012 -0500

    config: restore the libtool minimum version to 1.5
    
    Very few systems still use this old version, but it would be
    inconvenient to build a video driver with libtool 1.5 and have
    to build the gpu tools on another system having libtool 2.2.
    
    The toolchain version requirements are documented here:
    http://www.x.org/wiki/ModularDevelopersGuide#GNU_Build_System
    
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d63a1f6c73f2fbfd4af1d3bab3eb0e4f68483115
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Tue Jan 3 21:12:25 2012 -0500

    config: the minimum version for autoconf is 2.60
    
    A version later than 2.60 can be used, but no new features from such
    a later version can be used in configure.ac.
    
    The toolchain version requirements are documented here:
    http://www.x.org/wiki/ModularDevelopersGuide#GNU_Build_System
    
    Minimum version for Automake is 1.10 but we have not written it
    in any xorg module so far and there has been no issues.
    
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a03ef7abb508223bce65366d2ef9193521513d00
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Tue Jan 3 21:12:24 2012 -0500

    config: set-up xorg automatic rebuilding rules
    
    The current code is a noop. Use the same configuration as all
    the other xorg modules. This will change in the future but it is less
    confusing when all modules behave the same way.
    Note that these rules apply to building from a tarball only.
    
    Restore autogen.sh to be identical in all xorg modules.
    
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 665b86664ab5b4a8a076682d9c879f7a9fbeb756
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Tue Jan 3 21:12:23 2012 -0500

    config: use project wide xorg warnings variable
    
    Use CWARNFLAGS as in all of xorg. There seems to be no reason why this
    module should be different. The warnings were updated recently
    for those who install the latest util-macros.
    
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1722b781286bbb7d98a90fa789d56219fd907ce7
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Tue Jan 3 21:12:22 2012 -0500

    config: remove duplicate AC_PROG_CC and AC_PROG__CC_99
    
    The compiler was configured three times.
    It is done once by XORG_DEFAULT_OPTIONS in util-macros.
    
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4435791013a7172a06a17e5656a5e6007f5a2d89
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Tue Jan 3 21:12:21 2012 -0500

    config: remove unrequired AM_PROG_CC_C_O
    
    Required when using per-target flags or subdir-objects with C sources.
    
    http://www.gnu.org/software/automake/manual/automake.html
    
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 27e1294cf8ef11455cb54527b8a269717ea12395
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Tue Jan 3 21:12:20 2012 -0500

    Add mandatory ChangeLog and INSTALL files
    
    These are generated from a macro in the util-macros package
    
    Refer to the wiki for more details.
    http://www.x.org/wiki/NewModuleGuidelines.
    
    Acked-by: Cyril Brulebois <kibi@debian.org>
    Reviewed-by: Ben Widawsky <ben@bwidawsk.net>
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4384c68f2ed7dac944b1cf57ac4acda606fafffe
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Tue Jan 3 21:12:19 2012 -0500

    Man pages still showing version 1.0 in the 1.1 release
    
    The patch coverts the man subdir to the standard xorg man page makefile.
    The version number is automatically updated when a new release is made.
    The man page section number is no longer hard coded either.
    
    The package util-macros at version 1.8 or greater is required.
    
    Acked-by: Cyril Brulebois <kibi@debian.org>
    Reviewed-by: Ben Widawsky <ben@bwidawsk.net>
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6540ed2112dc589e13eb4bf4460df1c95a1b38a5
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Tue Jan 3 21:12:18 2012 -0500

    Use standard .gitignore file and layout
    
    Reusing xorg code saves maintenance in the long term.
    
    Now that m4/.gitignore is removed, the -I m4 ${ACLOCAL_FLAGS}
    must be removed to avoid build breakage as m4 is generated and not
    part of the git source.
    
    Acked-by: Cyril Brulebois <kibi@debian.org>
    Reviewed-by: Ben Widawsky <ben@bwidawsk.net>
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 41ae07aba28dcec0b98245be90d9d5925c13c5c7
Author: Gaetan Nadon <memsize@videotron.ca>
Date:   Tue Jan 3 21:12:17 2012 -0500

    Add mandatory COPYING file.
    
    This module is hosted as an X.Org app and is published as such.
    This file is a summary of the copyright statements in the source code.
    
    http://www.x.org/wiki/NewModuleGuidelines
    
    Acked-by: Cyril Brulebois <kibi@debian.org>
    Reviewed-by: Ben Widawsky <ben@bwidawsk.net>
    Signed-off-by: Gaetan Nadon <memsize@videotron.ca>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 47a5bc505cb972cc94f1fbd9882d4e5c2e72ac43
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Mon Dec 19 16:25:53 2011 -0200

    tools/intel_reg_dumper: retrieve rc6 residency values
    
    This allows to check if rc6 works, and how long have we been in each
    state.
    
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit 1649ab350f60b664a51fc4a7fd9c225bb72eb0a8
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Tue Oct 25 14:40:12 2011 -0200

    tools/intel_reg_dumper: Add support for debug register
    
    Right now, we only check for hardware DRRS support. But much more can be
    done with it. Some day.
    
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit f3f84bb3502cd1188dbc60cd975564eb3c3d4670
Author: Wu Fengguang <fengguang.wu@intel.com>
Date:   Sat Nov 12 11:12:55 2011 +0800

    intel_audio_dump: show Gamut Metadata DIP
    
    Signed-off-by: Wu Fengguang <fengguang.wu@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 821e07d00d8d43472a808e240b0a7f1b9adc0ba9
Author: Wu Fengguang <fengguang.wu@intel.com>
Date:   Sat Nov 12 11:12:54 2011 +0800

    intel_audio_dump: show interrupt enable bit
    
    Signed-off-by: Wu Fengguang <fengguang.wu@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ee94958d131cb71488f60fad48d7793a9dfd78e7
Author: Wu Fengguang <fengguang.wu@intel.com>
Date:   Sat Nov 12 11:12:53 2011 +0800

    intel_audio_dump: show HDMI encoding
    
    Signed-off-by: Wu Fengguang <fengguang.wu@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e321f1315bddf94748e412cc1741cf1908420b6f
Author: Wu Fengguang <fengguang.wu@intel.com>
Date:   Sat Nov 12 11:12:52 2011 +0800

    intel_audio_dump: show VIDEO_DIP_CTL_* for CPT
    
    Signed-off-by: Wu Fengguang <fengguang.wu@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c0635c3f5c10459478665eb54814726def22fb5d
Author: Wu Fengguang <fengguang.wu@intel.com>
Date:   Sat Nov 12 11:12:51 2011 +0800

    intel_audio_dump: show ironlake ELD_access_address
    
    Signed-off-by: Wu Fengguang <fengguang.wu@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f32aecb2963f94f8ea033ad2e7a5e8d30a92484b
Author: Wu Fengguang <fengguang.wu@intel.com>
Date:   Sat Nov 12 11:12:50 2011 +0800

    intel_audio_dump: show ELD contents for G45
    
    Signed-off-by: Wu Fengguang <fengguang.wu@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6fcb5cdcbc385d94290271e0122ee4163ce38ec6
Author: Wu Fengguang <fengguang.wu@intel.com>
Date:   Sat Nov 12 11:12:49 2011 +0800

    intel_audio_dump: show detected chipset name
    
    Signed-off-by: Wu Fengguang <fengguang.wu@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b5ca6b4410ac9ac00cad85dc53ef9761c6031f15
Author: Wu Fengguang <fengguang.wu@intel.com>
Date:   Sat Nov 12 11:12:48 2011 +0800

    intel_audio_dump: show DP control registers for Ironlake
    
    Signed-off-by: Wu Fengguang <fengguang.wu@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 12861a95680ad35646713a38b617036a2bc3bbc8
Author: Wu Fengguang <fengguang.wu@intel.com>
Date:   Sat Nov 12 11:12:47 2011 +0800

    intel_audio_dump: explain Bits_per_Sample
    
    Signed-off-by: Wu Fengguang <fengguang.wu@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cf4c12f103bbcc4b3f3b39fc8fe944f3c411b4fb
Author: Wu Fengguang <fengguang.wu@intel.com>
Date:   Sat Nov 12 11:12:46 2011 +0800

    intel_audio_dump: fix DP port width for CPT
    
    Signed-off-by: Wu Fengguang <fengguang.wu@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 97d203140c748490a5371a4695247f21ae328ac5
Author: Wu Fengguang <fengguang.wu@intel.com>
Date:   Sat Nov 12 11:12:45 2011 +0800

    intel_audio_dump: fix DP control registers for CPT
    
    Signed-off-by: Wu Fengguang <fengguang.wu@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 63e3c37838aefb7e8a715eda29e1ca635fa21c63
Author: Wu Fengguang <fengguang.wu@intel.com>
Date:   Sat Nov 12 11:12:44 2011 +0800

    intel_audio_dump: fix Ironlake detection
    
    The original test mistakenly calls dump_cpt() for Ironlake,
    due to HAS_PCH_SPLIT := IS_GEN5 || IS_GEN6 || IS_GEN7.
    
    Signed-off-by: Wu Fengguang <fengguang.wu@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 305443cf0ae5cc7566aceb6dc37aa3f51f51c9fb
Author: Wu Fengguang <fengguang.wu@intel.com>
Date:   Sat Nov 12 11:12:43 2011 +0800

    intel_audio_dump: fix Digital_Port_D_Detected copy&paste error
    
    Signed-off-by: Wu Fengguang <fengguang.wu@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d6bdaf01f9e9db47e0f5bb37d65e017b0c01502d
Author: Wu Fengguang <fengguang.wu@intel.com>
Date:   Sat Nov 12 11:12:42 2011 +0800

    intel_audio_dump: fix ironlake Stream_ID indents
    
    Signed-off-by: Wu Fengguang <fengguang.wu@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5032f68a77b67d020cd462c22e390dc35d70447b
Author: Wu Fengguang <fengguang.wu@intel.com>
Date:   Sat Nov 12 11:12:41 2011 +0800

    intel_audio_dump: report effective channel count
    
    The raw channel count is not user friendly and may be misleading.
    
    Signed-off-by: Wu Fengguang <fengguang.wu@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1c6a7cade7881d6ee1ff4e240331b10112389ce8
Author: Wu Fengguang <fengguang.wu@intel.com>
Date:   Sat Nov 12 11:12:40 2011 +0800

    intel_audio_dump: cleanup hex output
    
    - no need to show the 1-bit AUD_OUT_DIG_CNVT_* as hex value
    - show the Connection_select_Control_* bits as hex values
    
    Signed-off-by: Wu Fengguang <fengguang.wu@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d6e38ffb6fbca1d13f21dae0b0b1eef2325583cd
Author: Wu Fengguang <fengguang.wu@intel.com>
Date:   Sat Nov 12 11:12:39 2011 +0800

    intel_audio_dump: cleanup ACP DIP name for ironlake and CPT
    
    Signed-off-by: Wu Fengguang <fengguang.wu@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ea3815cd03a4613d915f410aaa5c2079e989467c
Author: Wu Fengguang <fengguang.wu@intel.com>
Date:   Sat Nov 12 11:12:38 2011 +0800

    intel_audio_dump: cleanup hyphen character
    
    Convert "­" (Hex 00ad) to "-" (Hex 2d), the former leads to ugly outputs
    in some situations.
    
    Signed-off-by: Wu Fengguang <fengguang.wu@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5a3fccbb577dd8d6a0699cd58e9f39532792b866
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Dec 24 01:23:59 2011 +0100

    Release 1.1

commit 74d6545ffadf0a7f321138ae4ccd0def8f28e0d2
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Dec 18 00:24:45 2011 +0100

    testdisplay: shut up compiler
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2de19c477af4f10370f1272e6578cec0d1b486bc
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Dec 18 00:21:39 2011 +0100

    testdisplay: move drm_fourcc.h include under the #ifdef protection
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1f41a30070d62e007bfda9f8ddadc24877a3324c
Author: Yi Sun <yi.sun@intel.com>
Date:   Thu Dec 1 18:57:16 2011 +0800

    tests/testdisplay.c: make the 3th pipe finish all the mode setting.
    
    If test all modes rather than preferred mode, remove framebuffer and
    set CRTC to zero after each connector mode setting.
    
    Signed-off-by: Sun Yi <yi.sun@intel.com>
    Reviewed-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit 06460049f69b2769c31c51520ae07af394a0a33b
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Dec 15 13:54:30 2011 -0800

    intel-decode: fix flush dword post sync parse
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 7ecdb152ca30db67f23a8f31bc7e4b84ec72a4d1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Dec 14 17:43:37 2011 +0000

    tests/gem_double_irq_loop: silence the compiler
    
    gem_double_irq_loop.c: In function ‘dummy_reloc_loop’:
    gem_double_irq_loop.c:62:9: warning: unused variable ‘j’ [-Wunused-variable]

commit f381a8b9f08a6d0c843e7b9f7997020d6b0d1e1a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Dec 14 17:41:34 2011 +0000

    tests/gem_exec_blt: silence the compiler by failing on error
    
    gem_exec_blt.c: In function ‘gem_exec’:
    gem_exec_blt.c:174:6: warning: variable ‘ret’ set but not used [-Wunused-but-set-variable]
    
    Propagate the failure and exit(1).

commit 2a292188e764c18b76698e1698ecaf62699b2f04
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Dec 14 17:41:34 2011 +0000

    tests/gem_exec_nop: silence the compiler by failing on error
    
    gem_exec_nop.c: In function ‘exec’:
    gem_exec_nop.c:101:6: warning: variable ‘ret’ set but not used [-Wunused-but-set-variable]
    
    Propagate the failure and exit(1).

commit ceb9f7d934e7efaaf0b061c3a0c5cb4b21efa156
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Dec 14 17:39:42 2011 +0000

    tests/gem_stress: silence the compiler by using '%zu' for size_t
    
    gem_stress.c: In function ‘main’:
    gem_stress.c:980:3: warning: format ‘%lu’ expects argument of type ‘long unsigned int’, but argument 4 has type ‘unsigned int’ [-Wformat]

commit d4bb328b78b767b98c8a60ee2c1bd0d2cc894d67
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Dec 14 17:37:53 2011 +0000

    tests/gem_largeobject: silence the compiler
    
    gem_largeobject.c: In function ‘test_large_object’:
    gem_largeobject.c:95:20: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]

commit b4fb480c802c41dbb8061344a540752156113489
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Wed Dec 14 08:14:45 2011 -0800

    testdisplay: don't test planes if i915 color key ioctl is not available

commit 7ac492aec2c749895c863675ad5f48177daf9648
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Dec 12 20:19:03 2011 +0000

    scripts/who: Add the process id to the output
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 61ff1309cabaa1fc879ed0c3179696ad64a79da3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Dec 12 17:44:58 2011 +0000

    scripts: Add a trivial script to show which programs are using the GPU
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 10e36edabe42e52f7862f66147d4433e8947ebc2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Dec 10 12:49:10 2011 +0000

    decode: Fix interpretation of i915 8bit formats
    
    2/3 are reserved with the correct values for A8/I8 being 4/5
    respectively.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5a9d82c6d5ad6d4e9b48a74dd4a5226babee81aa
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Wed Dec 7 08:22:41 2011 -0800

    testdisplay: update for final plane & fb ABI
    
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit ff409c537f541cbaa20f0b0f8faa03ece0d8014f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Dec 6 16:57:53 2011 +0100

    tests/gem_partial_pwrite_pread: don't trash gtt unnecessarily
    
    On chips that don't have a unmappable gtt part it's utterly pointless.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5a851b139266063fc4e172e6ce781ebc1c75c9d9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Dec 4 21:42:31 2011 +0100

    tests: add gem_partial_pwrite_pread
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 09cba27fdc5fbcc82471b4d7ba41944e5a4865d4
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Dec 4 13:57:56 2011 +0100

    tests/gem_reloc_vs_gpu: fixup this mess
    
    - fixup pitch mess noticed by Chris Wilson.
    - we need to diable bo reuse otherwise the kernel won't do the relocs
      (we might get an already gtt-bound batch from the dummy load).
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b9629f2d8d21a47c383c718e41910cc61c7947a6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Dec 4 13:49:24 2011 +0100

    tests/gem_reloc_vs_gpu: emit special batch on blt ring on gen6+
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 28e3f9c6064f2c9859e547b17abe1138a62e97ae
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Dec 4 13:02:35 2011 +0100

    tests/gem_reloc_vs_gpu: switch to COLOR_BLT instead of PIPE_CONTROL
    
    Less fancy command that works everywhere. Suggested by Chris Wilons.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1c9cce9c45b9d8980eb6944dc8c36925e91f5228
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Dec 3 19:57:36 2011 +0100

    tests/gem_tiled_pread_pwrite: kill set-but-unsed warning
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ad6be1f0c913c5b9b5bb93d1c56390ac2b0c62ea
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Dec 4 12:08:59 2011 +0100

    tests: add gem_reloc_vs_gpu
    
    Tests whether the kernel properly waits for the gpu before
    applying a reloc.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 224d4d22f069782c3a83a06ec97bbc58932db3d8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Dec 2 20:40:03 2011 +0100

    Revert some accidental things
    
    ... somehow slipped in.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f5854c89022991f76d813249104566d14e73801b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Dec 2 20:36:06 2011 +0100

    tests: add gem_exec_faulting_reloc
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ab3f4bdafe60dede32a48674ef9920df090bf3a7
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Dec 2 18:41:34 2011 +0100

    tests: add gem_exec_bad_domains
    
    To check whether the kernel properly rejects non-gpu domains in
    relocs.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 783f16e328f331f92ef37b986b0f845c4ae23d98
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Dec 2 10:55:56 2011 +0100

    tests: add gem_tiled_pread_pwrite
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit eafdf50044f53e4b5eef222f6374c9ddba21e9da
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Nov 1 14:33:53 2011 +0100

    improve README
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2e88c4ce34c0403df2301863efae4bf0a8699acb
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Nov 30 12:36:29 2011 +0100

    tests/gem_gtt_speed: Add modes that force that to the gtt domain
    
    No sane userspace doesn't upload data to the gpu without actually
    using it there ...
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4591d4ba7fe224289faa2b3b37052106d476a04f
Author: Paul Berry <stereotype441@gmail.com>
Date:   Wed Nov 30 09:47:56 2011 -0800

    Add missing executables to .gitignore.

commit 7af82bb0e5af670add67996ff8d6e890b9622a0c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Nov 27 02:39:14 2011 +0100

    tests: implement snb+ XY_SETUP_CLIP_BLT workaround
    
    Better safe than sorry.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 66b88b615cb5b1f483eb86d4623a5df0bbb2c1bf
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Nov 27 01:55:42 2011 +0100

    tests/sysfs_edit_reader: posixify
    
    Debian's default sh complains ...
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8c7f8bcccbbb8cdd75aaa2f5084f7667f4279ea8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Nov 27 01:37:59 2011 +0100

    tests: properly terminate tests when values mismatch
    
    Not much use running them in the test rig otherwise.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2f56e9617703466aaac79c8763974cea6b233933
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Fri Nov 11 11:17:59 2011 -0200

    tests/gem_hang: fix copy-paste problem
    
    I suspect that we should do different things for different pipes..
    
    Spotted by Thomas Jarosh on #intel-gfx freenode.
    
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit faf413d87556b9b76686ef9bf1e797e86e4b5129
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Thu Nov 10 11:27:27 2011 -0200

    tests: add a test for checking edid reading delays
    
    With base on EDID timing testing, when we take more than 1s to run
    xrandr command, something is wrong.. So add this test for testing the time
    we take to read the status of all the connectors from sysfs. It should do
    us an average picture of how long we'd take to run xrandr (roughtly 2x
    that value).
    
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit 48186febf17490820dc089172c58526664255417
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Thu Nov 10 11:12:10 2011 -0200

    tests: add test for kernel segmentation fault
    
    As asked by Daniel Vetter, this is a tech which checks if we can cause
    division by zero in kernel by reading the i915_emon_status debugfs
    entry repeatably.
    
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit 31a4b13132d8d3c1c8e2d16205b9785f4e6bb48d
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Tue Nov 8 15:47:03 2011 -0200

    intel_gpu_top: use debugfs interface for forcewake
    
    Using debugfs facilities for forcewake-related stuff.
    
    Acked-by: Ben Widawsky <ben@bwidawsk.net>
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit f4ba3f529eace14bc3f4c3bf9fb2a0112d3632d5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Nov 8 12:36:24 2011 +0100

    tests: disable pipe_control on i965g
    
    That hw is broken.
    
    Reported-by: Dave Airlie <airlied@gmail.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 402948624cb9a18da2a5bdf9c1905b9eb9fd22ee
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Nov 4 17:10:06 2011 +0000

    Call Arrandale gen5 not gen4.

commit 4c7c94ad98ac94a1f8fffbf2ffd79fc3bfcef647
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Nov 4 13:26:13 2011 +0000

    testdisplay: Round tiled allocations up to pot stride and fence size
    
    Be simple and use the strictest requirements from gen2/3 with old
    kernels so that this simply works everywhere.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=42585

commit 9c29be40bcb139ba57927fde954f66dcc4f0e6c8
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Wed Nov 2 12:57:40 2011 -0700

    testdisplay: find planes for each pipe
    
    Fixes a bug where we were masking against the wrong value.

commit 3afb7b22d6388d13e7af293baa98cad6c3226aec
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Wed Nov 2 12:57:20 2011 -0700

    testdisplay: update to new addfb2 definition

commit 6f7e6c91009000ad4614609a4b2ebd0bf69ec751
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Nov 1 17:20:01 2011 +0100

    cargo-cult the build system into shape
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 593cb1874a7929909773ec5d95e4b1911ff27918
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Nov 1 17:04:44 2011 +0100

    always require libdrm
    
    ... and also add the missing files to lib/Makefile.am
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 37c64007345d4cf949746dd64b150162053de7cf
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Nov 1 12:10:35 2011 +0100

    tests/gem_tiled_pread: fixup detiler for gen2
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6b4f5c7ad84cac32151e9acd0c1692b74cf33fb2
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Nov 1 11:52:53 2011 +0100

    tests/gem_largeobject: accomodate for puny apertures
    
    ... like on my i855gm.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7c8d41f4d959ee5f09c76272589f4e9b7872af52
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Mon Oct 31 17:19:54 2011 -0700

    i-g-t/debugger - make the debugger work with distcheck
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 15830ea54be914b1f4005154b2dcba52fa6b6120
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Mon Oct 31 13:36:50 2011 -0700

    i-g-t/debugger: Only allow the shader debugger if the user has specified a gen4asm
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit 32910231514d938be269c3b087f0d444709b0466
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Oct 31 23:19:08 2011 +0100

    tests: mark gem_bad_address as HANG
    
    Kills my little i855gm.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit efd3a5d0b595b0e7f3a8a66fc61ecd67f4af8699
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Oct 31 17:40:37 2011 +0100

    tests/debugfs_reader: fight bashism
    
    debian's dash doesn't like this.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cc85c4efb719f31812947616dad3c6e00af5a001
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Oct 31 16:08:02 2011 +0100

    tests: actually add the drm client check script
    
    Ooops.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d4cc95b4578d2010cf6fecb6bb833c8dd83651b5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Oct 31 16:04:34 2011 +0100

    tests: check for other drm clients
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 899496ba414067c72bbfb2dcdbf835977338db26
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Oct 30 23:20:12 2011 +0100

    tests/gem_bad_length: disable broken batchbuffer
    
    Submitting random crap hangs the gpu. Suprise!
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 20ff3839e448ba383b73a227889445a35d197cdc
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Oct 30 22:27:19 2011 +0100

    tests: don't run kernel check from make check
    
    Add a new target test for that.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 931aa17754bad046f9a1d870894468527cb10c17
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Oct 30 22:04:39 2011 +0100

    tools: script to gather bug report data
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 91b3c7f3338370538feeb080c79a1f506823dee5
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Oct 30 21:24:12 2011 +0100

    make distcheck fixes
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f361664df024e7d30ef94221304207991c2ebb6c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Oct 30 20:51:03 2011 +0100

    tests: add test to read all debugfs files
    
    Catches a bunch of forcewake warnings on snb+
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5b8bbc950d411ea30ebe14e6d001f1eb3204f8b1
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Oct 30 20:45:42 2011 +0100

    testdisplay: compile fix for !DRM_PLANES
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5ef806bb5d4767eeeb6ec926b8af7044c98d47a0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Oct 28 17:39:14 2011 +0200

    tests: add gem_unref_active_buffers
    
    The crucial trick to reproduce the bug is that we need to have
    a decent pile of active bos to retire. Because we unref the bo
    after having it moved off the active list, our recursion depth
    in fdo bug #42180 is limited by the number of active objects that
    can retire at the same time.
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=42180
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1f4c37a6e91c74553afe3e67ac5e4703c85e6dbc
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Fri Oct 28 05:25:53 2011 +0200

    testdisplay: allow overlay plane to be moved & scaled at runtime
    
    For additional testing.
    
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit 2b484c16dd477bfe35e41a52f6a47ae8f9ae28d0
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Fri Oct 28 08:53:48 2011 -0700

    intel_reg_dumper: handle 3 pipe configs when dumping HDMI config
    
    Could be on pipe A, B, or C.
    
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit 234b5c40b13f3fd211bff07a046aee00611e1a4f
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Thu Oct 27 17:47:58 2011 -0700

    testdisplay: add stub disable_planes() function
    
    To fix the compile with non-plane libdrms.
    
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit 28d1be3f9bca0ef5fb87d5c8c45d71f7e94a4e2c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 25 12:24:17 2011 +0200

    tools/decode: decode XY_SCANLINES_BLT

commit c2657e865f5c87a8ac64f75a560b6c0f01fe1a0d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 25 12:15:27 2011 +0200

    tools/decode: decode XY_SETUP_* cmds
    
    And extract decode code for br00 and br01.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 24e60385febe8ce603a233c617cdcc5b3d3ea9ba
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Mon Oct 24 17:15:34 2011 +0200

    testdisplay: add sprite scaling and location support
    
    Allow testdisplay to locate the sprite on the screen and potentially
    scale it using different crtc width/height vs the source width/height
    (determined by the resolution on the target pipe).
    
    Also fix exit, making sure we properly disable all the planes.
    
    Signed-off-by: Jesse Barnes <jbarnes@virtuougseek.org>

commit d510953ef38de7017c87688b3f4f5a7924097488
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Oct 21 19:06:08 2011 +0200

    tools/intel_error_decode: decode gen4+ fences
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 982d14e34b978b318ba0d92dd25d5b791375d0f3
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Oct 21 10:09:14 2011 +0200

    tools/decode: properly decode gen6+ PIPE_CONTROL flags
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e0b264573074debc0b97b3d13f60de4c2c21186b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 18 14:05:54 2011 +0100

    top: Avoid FPE by removing meaningless metric

commit d2c95d118310374e5d0958b2cd85bc77479b307a
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Sep 23 14:47:44 2011 -0700

    intel_reg_checker: New tool to accumulate checks for HW workarounds.
    
    The goal of this tool is to be usable as a test for whether something
    (suspend/resume, GPU reset, bugs, whatever) may have lost various
    required hardware setup specified in the docs.
    
    Reviewed-By: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit 5801e6b9118c5209f2e44e581776e1b078164f46
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 18 16:30:56 2011 +0200

    intel/decode: print out chipset gen
    
    ... instead of i965+ for almost everything that Intel is still selling.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 92b1f2c96eaf51a793a267fa66fa0cc0b960de11
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 18 15:54:31 2011 +0200

    tools/decode: don't move around the display register section
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6ed89f47ecefb334be6fd8a80d8e6f26ddc059f6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 18 15:49:41 2011 +0200

    tools/decode: don't forget to print the name of the last ring
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e98f308994711b3bc22d70c782bdf800eb253a0f
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Mon Oct 17 17:48:18 2011 -0200

    Allow intel_dump_decode to read data from stdin.
    
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit f312f89f4ae65ee969ec30657724b1fd5a1ebd44
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Oct 17 19:41:42 2011 +0200

    tools/intel_dump_decode: make devid parsing more useful
    
    We use hex for these!
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 73c2104070fc0e2cd8230075a75eed3a214bba06
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Oct 11 13:14:02 2011 +0200

    tools/decode: retain the ring name
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1c6511f7fb9b0117d2a1f4ebe489e5a0221c6d7b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Oct 16 21:13:34 2011 +0200

    tests: add gem_hangcheck_forcewake
    
    Provokes the forcewake warning when the hangcheck runs and no
    one waits for the gpu (and hence holds the dev->struct_mutex).
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2e9e27ce6b7b7cb2db39590265d08bd19386855d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Oct 15 13:46:19 2011 +0200

    tests/gem_fence_trash: some retuning
    
    We actually want to test lru behaviour, so do a bit of work with
    the fence before yielding to the next thread (we use twice as many
    fences as there are, so yielding always is pretty bad, no matter how
    clever our fence stealing).
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b75451838a0b4315fa9494691c1615bce178d424
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Oct 15 13:09:36 2011 +0200

    tests/gem_*_blits: reduce buffer count to not trash swap
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 62c542fd4e7f47d5216785e9a13054ce56973f28
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Fri Oct 14 15:26:13 2011 -0300

    Allow to output statistics to stdout.
    
    This allows intel_gpu_top to run both in statistics-collecting mode
    (collecting the per-ring statistics in gnuplot-friendly format) and
    ncurses top-like mode at the same time.
    
    It also allows to output the statistics directly to stdout, by using "-o
    -", so the results can be parsed directly via a popen() parsing.
    
    If you are using intel_gpu_top as previously (without any command-line
    arguments), it should change nothing for you. If you were using its
    logging facilities (e.g., the '-o file'), note that the logging will keep
    running, but the detailed top-like interface will be on the screen at the
    same time.
    
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit eaaddc794bade33e0d7b0c94406102c9814c2c05
Author: Adam Jackson <ajax@redhat.com>
Date:   Tue Oct 11 18:25:26 2011 -0400

    bios_reader: Allow forcing the device ID with DEVICE=0xNNNN
    
    As a pleasant side effect you can now feed it an opregion dump and it'll
    decode without crashing.
    
    Signed-off-by: Adam Jackson <ajax@redhat.com>

commit 1708580217ed403f0abd086f15baddf98cb0fb5a
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Tue Oct 11 11:37:25 2011 -0700

    intel_reg_dumper: use none instead of NULL if no port is assigned to TRANS_DP
    
    Makes the output a little more readable.

commit 503cfa2707bca2c06895f51d50fa38218ff16aa7
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Mon Oct 10 11:24:42 2011 -0700

    Treat PPT like CPT as we do in the kernel
    
    Set the pch type to CPT if we detect a PPT as well.

commit af6a25c187a0f1a340fad71bb1a019e087e2b1ae
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 28 10:05:56 2011 +0200

    tests: disable storedw tests on !render
    
    According to docs, this should work with ppgtt and just convert to
    noops otherwise. In reality, it hangs the machine.
    
    So just disable these for the moment.
    
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a2dfbbf3e70767bc4c67c18c9c14ab4f9646155e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 28 10:02:57 2011 +0200

    tools/decode: add missing shift to MI_SEM_MBOX decoder
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 17ceccedbf8c09368b72ecc4afe12f0d1e63837e
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Fri Sep 16 18:06:27 2011 -0300

    testdisplay: return 0 when successful
    
    We use the "ret" variable to check function return values, and these
    values are not necessarily 0 on the successful cases, so we need to
    reset "ret" after we finish using it.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a167425b39c01a729ed3b2ef5a1d17e83edb720f
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Sep 15 15:18:40 2011 -0300

    getstats: remove useless assertion
    
    getstats.c:48:2: warning: comparison of unsigned expression >= 0 is
    always true
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ca2800f1d4d352304dccd33e9ab5c0e27e89a05a
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Sep 15 15:17:46 2011 -0300

    drm_open_any: explain why we are abort()ing
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    [danvet: pimped error msg]
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3ba12bbb2faf6cfd87eea96edf761f16ef8c4ab1
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Sep 15 15:16:33 2011 -0300

    testdisplay: remove wrong return statement
    
    It seems that the kernel patches required by the TEST_PLANES feature are
    still not upstream, so I didn't test this patch.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7ead7ba3e6bcfa59203d63ac3cc66432853e02de
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Sep 15 15:14:18 2011 -0300

    testdisplay: don't enter the main loop if dump_info or test_all_modes
    
    If calls inside update_display fail, the function returns and we don't
    quit the program if dump_info or test_all_modes. So we enter the main
    loop and keep waiting for user input, even on cases where we are not
    supposed to require user input. To fix this, we move the check to
    outside the update_display function.  As a side effect, we also do
    cleanup instead of just exit(0) and we return 1 in case update_display
    failed.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9fe1148c4b20cb80c86c64a81c4594d152d20be7
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Sep 15 15:13:41 2011 -0300

    testdisplay: test all modes if no option is provided
    
    Previously, when called without any arguments, the application required
    user input to finish.  However, testdisplay is ran by "make check", and
    it is not a good idea to run a program that requires user input in "make
    check". So we change the default behavior to something that doesn't
    require user input. You can still access the previous behavior using the
    "-m" argument.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e450cf6d8aefc99bf9300092d50bae0d927490a1
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Sep 15 15:12:48 2011 -0300

    Add missing files to .gitignore
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 19fef544ebcd7358633db56027f893cacca7ef88
Author: Paulo Zanoni <paulo.r.zanoni@intel.com>
Date:   Thu Sep 15 15:10:52 2011 -0300

    testdisplay: fix compiler warnings
    
    testdisplay.c:117:1: warning: comparison between signed and unsigned
    integer expressions
    testdisplay.c:125:1: warning: comparison between signed and unsigned
    integer expressions
    testdisplay.c:145:1: warning: comparison between signed and unsigned
    integer expressions
    testdisplay.c:1060:16: warning: comparison between signed and unsigned
    integer expressions
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 733a1d9f3441eec77c272648d0df7eea010b8f44
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Sep 15 18:47:21 2011 +0200

    tests/gem_mmap_gtt: also test gtt pwrite paths
    
    This needs a properly pre-faulted dst bo.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ba2255a7e41cade707af36d3de0a59fbb41245e9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 14 14:58:55 2011 +0200

    tests: build all tests by default
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d6ac159ba18756a63d22bf84be72e433d9ec04d2
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 14 14:48:45 2011 +0200

    tests: separate testcases in gem_bad_length
    
    Creating a zero-length bo should fail, so check that. Still run
    the minimal batchbuffer, but without the zero-length reloc.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2c380c2eac0562a5e8ebc1ed8aeca2192f60e885
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 14 11:06:03 2011 +0200

    tests: disable gem_bad_blit
    
    Hangs gen3 and simply writes garbage into the unmappable part of
    gtt on gen4+, which might cause issues later on.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bbe635f0dc67e40fde1efb221b7e550952ad8a84
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 13 20:57:04 2011 +0200

    tests/gem_bad_length: dont throw garbage at the gpu
    
    It doesn't like it. Really.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a5abe177468f3c1c93f869a7c33712c63b023f65
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Tue Sep 13 08:54:33 2011 -0700

    intel: we don't do distcheck for the debugger

commit f91e2c2b7e5e7fd79ba4be3051914e4453d292d8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 13 17:20:12 2011 +0200

    intel_gpu_dump: really kill it
    
    This is getting a bit hilarious ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c7a98ae2515e39a54c35bf3da978fec7f4b1235c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 13 12:05:58 2011 +0200

    intel_gpu_dump: also kill manpage
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8d9792ce23087ac4cbee17fb93f9a75030abc7c6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 13 11:43:06 2011 +0200

    tools: remove intel_gpu_dump
    
    Superseded by the kernel's i915_error_state dumping facility.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e855dc222368f76b80b6685dcaa731b00ee1a0d6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 13 11:41:42 2011 +0200

    tools: beef up intel_dump_decode
    
    - now also handles ascii dumps like i915_ringbuffer_data
    - getoptified
    - totally lazy binary detector
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 19d69955d2827ccf56c65d97a921e5c70f125ca0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 13 11:05:13 2011 +0200

    tests: exit(77) to properly mark tests as SKIP
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 21ec8c78b3b8860b59e772416b5858ed6b41554f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Sep 12 20:56:13 2011 +0200

    tests: mark gen3-only tests as such
    
    ... instead of hanging the gpu.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit b8245e18fe6a80e55aa0ece17d6b3a0cf3b1182c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Sep 12 20:45:06 2011 +0200

    tests: add basic test for missed irqs
    
    Didn't catch any known bug, but can't hurt.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit fbf8950f6e04e5e000f1f099d75536d8e4fe0cad
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 7 09:31:00 2011 +0200

    tests: check pipe_control coherency
    
    v2: proper support for gen6+
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bf9f149a6d24355dd5959d3ad750678c4e1cd4b6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Sep 12 20:33:58 2011 +0200

    tools: add intel_gen
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 61b9806f4e7b92031491f2c4b3454c1f3afe418c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Sep 9 20:44:27 2011 +0200

    tests: basic ring<->cpu and ring<->ring tests
    
    Using a dummy reloc that doesn't matter to trick the kernel into
    synchroizing the rings.
    
    v2: properly apply MI_NOOP workaround to MI_FLUSH_DW and
    switch to MI_COND_BATCH_BUFFER_END as a dummy command on the
    render ring to avoid PIPE_CONTROL errata.
    
    v3: somebody clever decided that in C, you cound from 1,
    i.e. I915_EXEC_RENDER == 1. It works now ...
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 32f49c7c0d91318c1993e381855ecf4bb02abc80
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Sep 8 10:50:37 2011 +0200

    tests: split up gem_storedw_loop into ring specific variations
    
    Also start to shortly explain testcases with an easily-greppable
    header like this:
    
    /*
     * Testcase:
     *
     * [Possible further explanation.]
     *
     */
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d1aae145a7d76775f9903f8dbba9a0d2bd8118bd
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 7 10:18:06 2011 +0200

    tests/gem_storedw: disable on pre-gen6
    
    Doesn't work.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d42b7f9189680de4f137cae248ddb67f2310a26f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Sep 7 09:20:36 2011 +0200

    lib/batch: hackish interface to run batches on specific rings
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 49cd753a77ab8ed9194f0e3ac2b5eadc803ef165
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 6 21:16:21 2011 +0200

    test/gem_storedw_*: tune some more
    
    MI_*/PIPE_CONTROL writes need to be in DOMAIN_INSTRUCTION, because
    that is what mesa uses and I plan to use this to work around a
    gen6 ppgtt issue.
    
    Also testing with intentionally b0rked GFX_MODE on my snb shows that
    we need to increase the loop counter a bit to reliably hit the tlb
    invalidation problem. Test still completes within a few seconds.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2a0b3488a0f3a715d2d654858ba0a638d71366c7
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Sep 9 17:22:28 2011 +0200

    tools: decode some more MI_ ops
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 206e129af067b7a898515d8c26acc319e5c5f445
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Sep 9 10:10:07 2011 +0200

    tools: decode MI_SEMAPHORE_MBOX
    
    Juggle the length check up to avoid duplication.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 079f8390309d9dc59197f04cafbcbda6c711c346
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Sep 6 20:54:16 2011 +0200

    tools/intel_gpu_dump: add hackish --devid parsing
    
    For bugreports and whatnotelse.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2a7778d4e3f4730572e4f22c39c85787daa73469
Author: Paulo Zanoni <przanoni@gmail.com>
Date:   Wed Aug 24 14:57:31 2011 -0300

    gem_vmap_blits: fix compilation if I915_PARAM_HAS_VMAP is not defined
    
    Previously, "make check" failed because the main() function was not
    defined.
    
    Signed-off-by: Paulo Zanoni <paulo.r.zanoni@intel.com>
    Tested-By: Eugeni Dodonov <eugeni.dodonov@intel.com>
    Signed-Off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 15cb28218786ae80101ad0f6cc5a21c1ad9e8d3e
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Mon Sep 5 20:04:17 2011 -0300

    intel_gpu_top: access hardware before running profiling command
    
    Without this patch, intel_gpu_top will try to get access to the hardware
    after running the profiling command in the background. In case such access
    fails, the main process quits, but the background one will continue
    running.
    
    So let's move this test up, so it is done before we fork.
    
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit 8ad08546e5d6189d2c778b6175e97b486332d37e
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Mon Sep 5 19:59:40 2011 -0300

    intel_gpu_tools: describe -e option in usage screen
    
    This patch adds a short description of '-e' option to the usage screen.
    
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit b9d7c3a087f0973bd98af02955082b9140d90c11
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Mon Sep 5 19:50:52 2011 -0300

    intel_gpu_top: adopt to kernel coding style
    
    This patch fixes adopts the code to the kernel coding_style.

commit a483c97d910d18b0626591f770d212ca97e2f7a1
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Mon Sep 5 19:41:24 2011 -0300

    intel_gpu_top: support profiling user-specified commands
    
    This patch adds support for running intel_gpu_top to profile specific
    commands. The required command will be carried out in separate process,
    and main intel_gpu_top will leave when the child process will exit.
    
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit c2983f24e34936fd9e0d513922af70485d579e61
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Mon Sep 5 19:39:58 2011 -0300

    intel_gpu_top: support non-interactive mode
    
    This patch adds support for non-interactive mode, invoked by running with
    '-o output' switch. In this case, no interactive output is being
    performed, but the execution statistics are being saved into the output
    file.
    
    The output file is generated in both human and gnuplot-readable format.
    
    Unlike interactive mode, where non-supported pipes and non-active
    registers are skipped, the content of such pipes and registers is recorded
    into the log file to simplify parsing and standardize the list of columns.
    
    Also, unlike interactive mode, the registers are not sorted according to
    the usage - this way, their variation over time can be analysed offline.
    
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit 83047e9a5e7563bb7dd7085de5f27b55d3c2f16e
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Mon Sep 5 19:35:44 2011 -0300

    This patch initializes the last_stats[] for registers prior to starting
    the monitoring itself. This way, the first measure will already contain
    the difference from the previous value instead of non-initialized value.
    
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit f11f8d9aac77051a071b215910832b020d959858
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Mon Sep 5 19:33:40 2011 -0300

    Revert "intel_gpu_top: initialize monitoring statistics at startup"
    
    This reverts commit 431fe7803d37f344275fdaceb57c1fbaeee8541c.
    
    Will be replaced with more fine-grained commits.

commit 431fe7803d37f344275fdaceb57c1fbaeee8541c
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Mon Sep 5 16:33:04 2011 -0300

    intel_gpu_top: initialize monitoring statistics at startup
    
    This patch initializes the last_stats[] for registers prior to starting
    the monitoring itself. This way, the first measure will already contain
    the difference from the previous value instead of non-initialized value.
    
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit 4b0a15e45d1823888cfed9a76e54036658ab8e61
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Mon Sep 5 16:29:39 2011 -0300

    intel_gpu_tool: initial support for non-screen output
    
    This patch adds initial support for non-stdio output, to be used for
    non-interactive monitoring.
    
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit 09e4b0cd26e800c203c1de071b83d879a09bb0dc
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Mon Sep 5 16:23:11 2011 -0300

    intel_gpu_top: suport command line parameters and variable samples per
    second
    
    This patch adds support for getopt, and adds two default parameters to it:
    -h to show usage notes; and -s to allow user to define number of samples
    to acquire per second.
    
    Manpage documentation is also adjusted accordingly.
    
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit 6194c75c8f438d13f6535d70009658851929f39e
Author: Eugeni Dodonov <eugeni.dodonov@intel.com>
Date:   Mon Sep 5 15:31:17 2011 -0300

    intel_gpu_top: account for time spent in syscalls
    
    This allows intel_gpu_top to properly account for time spent inside system
    calls. Effectively, with previous implementation, intel_gpu_top could
    spent longer than 1s between consecutive measures. This attempts to
    minimize the extra time spent while polling for data.
    
    Signed-off-by: Eugeni Dodonov <eugeni.dodonov@intel.com>

commit 922214f9869220373c3768cfcbd0e243e6ac07b6
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Fri Aug 12 12:51:34 2011 -0700

    tests: add store dword tests
    
    Add a couple of simple store dword tests to test memory coherence.
    
    gem_storedw_loop simply executes a batch that continually stores an
    incremented value to a target buffer object, checking the results after
    each batch completes.
    
    gem_storedw_batches_loop does the same thing, but creates a new command
    batch buffer for each iteration, which can exercise the buffer creation
    code.  This test is based on one from Andrzej Kacprowski from Intel.
    
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit 6857a1af816e18981515b942faaba65e85c40cc5
Author: Hai Lan <hai.lan@intel.com>
Date:   Fri Aug 5 00:47:25 2011 -0400

    testdisplay: for tiled mode test, the height should be aligned
    
    Signed-off-by: Hai Lan <hai.lan@intel.com>

commit e40c9c7faf7303201b8fbe8ff1ed1b17533d3c50
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Aug 1 10:39:51 2011 -0700

    Add missing copyright info to intel_decode.c

commit 3b10b7bd5a8ce60aef06df5e61f0a0c30fb0fa10
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Jul 28 14:58:24 2011 -0700

    tools: readme addition for shader debugging

commit d0a7e0ab5a19b2f04f2692ec0e8874056c9b2d32
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Jul 28 15:07:28 2011 -0700

    tools/range handing: forgot the register map file :(

commit 62873796c4a96554cc139e9aa49e25ce19cd65cd
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Fri Jun 24 11:42:03 2011 -0700

    intel-gpu-tools/debugging: shader debugger
    
    high level summary of the files:
      * debug_rdata - get current state from debug registers. Helpful
        when developing the debugger, and could serve some purpose in the
        future.
      * eudb - the debugger itself
      * eviction_macro - generate the proper macro to flush the EU render
        cache until I get control flow working
      * pre_cpp - an evaluating c preprocesser like thing, to be used before
        cpp
      * sr - the system routine, exception handler which runs on the EU
      * test - a very basic test system routine
      * debug.h

commit e39b13d7e4174ec50fd41d74fe8d3375c8ef2850
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Sun Jul 17 12:43:12 2011 -0700

    intel-gpu-tools/debugging: add important debug regs
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>

commit c82c1d68469ae99b40fa260a1b4c4debb9130515
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Tue Jun 14 11:00:30 2011 -0700

    intel-gpu-tools/forcewaked: sample forcewake app
    
    This app is required for debug features which seem to (undocumented)
    reset themselves if/when the GT goes to sleep.
    
    It is also useful for those doing general debugging or profiling from
    userspace when they do not wish to have the GT sleep.
    
    v2: made forcewaked more daemon-like
    
    Cc: Chris Wilson <chris@chris-wilson.co.uk>

commit abd7038e5a814bb29398d6ea259815b293c62a2b
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Jul 28 13:42:45 2011 -0700

    intel-gpu-tools/range handling: register range handling
    
    Hooks to allow safe accesses from userspace. Can revert to old behavior
    by using unsafe access.

commit cac8f8b52621f246a7cff412f340a7db28cb1b99
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Thu Jul 28 13:40:19 2011 -0700

    forcewake: Add mmio code to do proper forcewake stuff for gen6

commit 294927c601bf1af05d718e0b1ca092f9c8c8e19e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jul 20 20:40:13 2011 +0100

    Add intel_backlight
    
    A trivial tool to adjust the backlight registers (gen5+ only atm).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 30ffcc34ea6bae238671c042d718ae7f05853022
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jul 20 20:39:56 2011 +0100

    intel_decode: Handle a few gen7 blocks

commit 74670c7bb9968a99d75a97c3677b15110281c94d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Jul 17 23:33:27 2011 +0200

    gem_stress: ducttaping mandatory
    
    In other news: We've been missing a unmapping_mapping_range somewhere
    in the kernel. But lazy me never came around to digging up the real
    cause.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6cc92bcbc5301e79a9afa8f3dcbc73ec770be034
Author: Hai Lan <hai.lan@intel.com>
Date:   Tue May 31 17:13:30 2011 -0400

    testdisplay: Test the first mode if there is no preferred mode.
    
    For a TV device, there  might be no preferred mode. In this case,
    we can test the first mode.
    
    Signed-off-by: Hai Lan <hai.lan@intel.com>

commit 25b25b907d8d6dc309c23fde136c35d4daee2643
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 8 15:01:39 2011 +0100

    tests/gem_vmap_blits: Fix typo
    
    Why, oh why, do these only become obvious after pushing upstream?
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4c0176e49700401a568d592865d6f53649075ca7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 8 14:55:36 2011 +0100

    intel_reg_dumper: Slightly tidy the reporting of pipe configs
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a0a0b6ab34f4413cc911d6e9b60e831f72a1e11a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jul 8 14:54:32 2011 +0100

    Add a test case for coherency of vmaps
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 75f7e81fbc65cd67500f0795228f6e03619e3a49
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 25 14:49:40 2011 +0100

    gem_stress: Assert we have no pending ops when using the CPU
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f40d54e132f84efa28b29723f90537e4731c6c92
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 25 14:40:38 2011 +0100

    gem_gtt_speed: Add option for variable buffer size

commit 4227da8c3cc6417c9d9600bddac938759f01ae03
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jul 2 08:59:32 2011 +0100

    gem_stress: Add an option to test handling of signals
    
    As signals cause the syscalls to be interrupted, we often need to clean
    up partial state before returning to userspace. Often a source of
    unamusing bugs, so encourage gem_stress to provoke them.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8908055da6a484058caa92c3c2ba3221cb9ce9d9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jun 23 14:04:35 2011 +0100

    tests: Add an exercise for zero-length buffers
    
    Triggers an OOPS with dmar enabled currently.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9de433a471a0bf829a8143658e6b8d07fa896454
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Jun 20 13:53:12 2011 +0100

    tests: Add a simple exercise of GTT mmaps
    
    Test copying between 2 mappings and reading/writing from and to.
    
    References: https://bugs.freedesktop.org/show_bug.cgi?id=38115
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 336f85dafb6b11f24353544e12d4ddd7f1c10a73
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jun 13 22:02:52 2011 +0200

    gem_stress: some stats about incoherencies
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 10079566805f5d48edb09f7a9ed3fdea0ecee004
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jun 13 20:14:53 2011 +0200

    gem_stress: option to disable render copyfunc check
    
    Too noisy - which is an another way of saying too broken :(
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 5b253cee37b610a14d4d48a8bdde0df5a932be88
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jun 13 20:09:38 2011 +0200

    gem_stress: option for tile_size
    
    I want to know how large these corruptions can get!
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit c0f34338e7bb3be473ff3afe70e17afbaa3a7958
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jun 13 13:18:35 2011 +0200

    gem_stress: option to set tiles per buffer
    
    gem_stress -p1 is much more evil than gem_stress -c1, it also manages
    to tear appart untiled workloads!
    
    Now duct-taping over it still works (--apply-duct-tape) ... hm.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6daa883fa3cf08363912fd46bce49177a3fa7c82
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jun 13 00:22:01 2011 +0200

    gem_stress: option to continue despite failures
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9649dd7ef0bc55a027219347734b2bb13fe0fc71
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Jun 7 22:30:03 2011 +0200

    gem_stress: option to override the number of rounds to complete
    
    gem_stress -c 1
    
    ... sometimes takes a while to hit a problem.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit e0532d4eb0192f62d2fed29a67b830f122f356c2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Jun 8 12:13:46 2011 +0100

    scripts: Add throttle.py
    
    Parses a trace.dat and works out how long each throttle was and how many
    batches retired within that period (and their average duration).
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e235f932883316953a9b7a5bcc76ea3b775c3695
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Tue Jun 7 13:32:37 2011 -0700

    testdisplay: automatically enable TEST_PLANES if possible
    
    Just look for the ADDFB2 ioctl and enable the new code if it exists.

commit 8969b839b544e73a9242adb025562b1dc9ec5916
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Tue Jun 7 13:28:19 2011 -0700

    testdisplay: fix error output if test pattern draw fails

commit b707feb9d51bb3a2e7eb5f172afeae2ef13381e1
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Tue Jun 7 13:27:35 2011 -0700

    testdisplay: add tiled buffer test support
    
    Useful for testing tiled vs linear framebuffers.

commit 7230c0142115b2ed6460e1b95cef97c0954b56c5
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Tue Jun 7 13:17:46 2011 -0700

    testdisplay: add overlay plane test option
    
    Enumerate available extra planes and try to use one on each CRTC we enable.

commit 3ddc799fbf04e1c7c482c0879aa506c3c7a12c04
Author: Lan, Hai <hai.lan@intel.com>
Date:   Mon Jun 6 19:16:26 2011 -0700

    testdisplay: fix possible_crtcs check so LVDS works
    
    When using testdisplay on GM965 and Pineview with LVDS, it will fail to
    set a mode because the first unused crtc can't be used for LVDS.  So
    check the possible_crtcs to make sure the crtc can be used.
    
    Signed-off-by: Hai Lan <hai.lan@intel.com>

commit 1095a825c0acaecf51f97741eacf14acd9bf901e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jun 6 20:16:35 2011 +0200

    gem_stress: avoid division by 0
    
    Without this height would be 16 with the minimal buffer size.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit fde66f9bf4de6240422e64b24dd1a74577cd6128
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jun 6 20:15:44 2011 +0200

    gem_stress: disable fence storm when only using untiled buffers
    
    This explains why gem_stress -u worked beforehand - the rendercpy
    was not actually used!
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 7250328bb8b3d524cd39dee3fd48b6e17e3af24e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Jun 6 18:59:54 2011 +0200

    gem_stress: round max_dimension down to the next pot
    
    Creates funny rounding problems otherwise.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 3d66d913d9165f59e39952a41b41461b2329c9c1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jun 5 21:53:49 2011 +0100

    gem_stress: trim buffer sizes to fit into 3D pipeline
    
    Remember the 3D pipeline is much more restricted than the BLT engine,
    and we were feeding it buffers much larger than either the
    render engine or the sampler could manager.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2933547eb0d22cb70c783a78ab3d7b4dcc5972ce
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jun 5 21:35:34 2011 +0100

    gem_stress: cpu maps force tiling to be disabled, so fix the printf
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit bfa23b47a57a89eb8adcde32ffe2849f0d2aac2e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jun 5 21:34:07 2011 +0100

    gem_stress: Add extra passes to intial render copyfunc verification
    
    ...and allow for cpu maps!

commit e7119c2e3bf73bd1029a668d167c16a0949fef70
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jun 5 19:10:14 2011 +0100

    test/gen3_mixed_blits: Remember that the BLT engine cannot handle Y-tiling
    
    ...even through a fence that can.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6f6cd8191392a9b6c5805524cbe3fd62937f76bb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jun 5 18:05:28 2011 +0100

    test/gen3_mixed_blits: Alternately use fence regs for the render copies
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 853d729598fddce3f1814cd7fc5e1020147b3f34
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jun 5 17:45:28 2011 +0100

    test/gen3_mixed_blits: Acutally use fences for BLT
    
    Gah, in my excitement of reproducing the failure reported by
    gem_stress, I missed using fenced relocs for the BLT.
    
    Fortunately, it doesn't affect the presence of the error.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit aadfcdfd4edbaa7f9912a6ec42215ddb6726c74a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jun 5 18:13:18 2011 +0100

    decode: Fix segmentation fault
    
    The decode for A8 is incomplete and died with a segfault. First hide the
    segfault, latter fix the pretty printing.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f5e63b12a5881d112f8c757838167e05e1c13b88
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jun 5 17:23:09 2011 +0100

    test: Add more gen3 render blitters
    
    ... and we have a winner: gen3_mixed_blits reproduces the issue Daniel
    Vetter originally found. It seems clear that we have some incoherence
    between the RENDER and BLT units on gen3 that no amount of MI_FLUSH can
    hide. Hmmm....
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 20b69039e816ed44ef30048c81a76def7028f0ba
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jun 5 11:20:34 2011 +0100

    test: Exercise gen3 render copies
    
    gem_stress is unhappy with tiled render copies on gen3. This is a simple
    little test to ensure that a set of pure copies with a working set
    larger than the aperture are handled correctly.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3ca054c2259483f27ffaabd786215ea82a66f78f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jun 4 21:41:11 2011 +0100

    tests: Add a fenced execbuffer thrash test
    
    Exercise a nasty corner-case in the reservation logic for the fence
    accounting.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 91f609741d7497c4bcc113e74028f9c4948d8b48
Author: Sun Yi <yi.sun@intel.com>
Date:   Mon May 30 18:20:30 2011 -0700

    testdisplay: print pixel clock in mode debug output
    
    Print the pixel clock of each mode.

commit 9b325c8a864efce172bdfaf82e251284f115e263
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 25 13:42:29 2011 +0100

    Update gitignore
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4e1f2f5957d47458c39b7b32fcdacf2b5411d6b1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed May 25 13:41:28 2011 +0100

    gem_stress: '-b' option to disable BLT copyfunc
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 719ffef7c39386c453614bc71e1af97904d3671b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun May 22 10:34:12 2011 +0100

    gem_stress: Add render copyfunc for SandyBridge
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d73cdde45afc41fb7b36829eda1af763af682ada
Author: Eric Anholt <eric@anholt.net>
Date:   Fri May 6 12:15:50 2011 -0700

    Add Ivybridge support to intel_gpu_dump and the BLT tests.

commit a825173a5f2154b0491f7b5554c10ab7146b4592
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Thu May 12 17:49:07 2011 -0700

    testdisplay: add 30bpp support (#ifdef'd out until the next cairo release)

commit a09dd09e00561739a10c83eb25ee9443f8bf79f6
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Tue May 10 17:21:12 2011 -0700

    Add Ivybridge device IDs
    
    Makes the reg dumper work better.

commit 12de60a5e8db990c173b21857fe68ff74daa5679
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Wed May 4 14:55:32 2011 -0700

    testdisplay: don't read hotplug events from buffer before libudev
    
    Otherwise we'll just block rather than trying to update the display.
    
    Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>

commit b11d67a33baca467bebd53bf605bdeeee1f31e26
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Apr 27 22:13:29 2011 +0200

    gem_stress: option to use cpu mappings
    
    This things just won't die (libva!!!), so add an option to test them.
    
    _Not_ meant to test snoopable mappings.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 9bfda1a809b6606e06bb96158cc103e12428e9c2
Author: Hai Lan <hai.lan@intel.com>
Date:   Tue Apr 26 11:03:39 2011 +0800

    Fix a bug of testing preferred mode
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c56cd106f969d223b17e7d9a6113e63d6befd9bc
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Tue Apr 19 11:50:16 2011 -0700

    testdisplay: add non-24 bit depth support
    
    Testing 16bpp is useful, and 30bpp will be added once cairo supports it.

commit 0d3043f5f3cb7265e297a4e8386c7c0b2ec97d2d
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Mon Apr 18 16:48:27 2011 -0700

    testdisplay: paint color gradients
    
    Helps identify dithering problems.

commit a67091b220bd50ea4c1a6aaecbac816bbf331fcf
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Apr 12 22:26:42 2011 +0200

    gem_stress: option to only use x-tiling
    
    This seems to be another trick to massively improve correctness
    of the render blit. At least on my i945.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f70a717482823e69637b4d91e216ae5756f07e0d
Author: Ben Widawsky <ben@bwidawsk.net>
Date:   Mon Apr 11 08:47:11 2011 -0700

    Add C99 requirement to autoconf.
    
    snprintf is part of the C99 standard and is used in many places in the
    tools.
    
    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>

commit afa940c39844f565d396b51deb6fd6e564751e49
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Apr 9 20:15:10 2011 +0200

    Disable gem tests when libdrm is not available
    
    Quickly checked on ppc by Cyril Brulebois.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1c9ede3acbf62eab60e6f949a759e9e2e2e1014b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Apr 5 21:14:54 2011 +0200

    intel_decode: drop unused code
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 841c551f12a522b8fdfbe2233ed1b8baa2f1c146
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Apr 5 08:52:52 2011 +0100

    decode: Correct a couple of mistakes in gen3 IMMEDIATE_STATE_1
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e68652cad6ec46b8dacbf5360f20dd03afab3ec9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Apr 4 22:10:21 2011 +0200

    gem_stress: option to disable tiling
    
    Of all the things I've tried, this seems to be the only thing
    to fix tile corruptions reliably on gen2&gen3 (safe for outright
    disabling the render copy).
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 272c8988079ce867f92bdf5df85f27ca46d15f27
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Apr 4 21:24:58 2011 +0200

    gem_stress: clean up fence_storm
    
    That little snippet creapt in and magically made render copy work -
    by essentially disabling it.
    
    Restore order, everything incoherent again.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit aeb0b6f33c56766cf269e798742cb793ee4dcd5e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Apr 3 13:10:07 2011 +0200

    gem_stress: extract emit_blt
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 4fcfc9f1020aad07060569be3fcedf446ff2d58f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Mar 31 23:30:17 2011 +0200

    gem_stress: gen2 render copy
    
    Sometimes acts up like gen3 on my i855gm. Sometimes works flawless.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit a6751bac8dd05e2f04960d40b670d35d3b63704e
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Mar 31 23:29:25 2011 +0200

    gem_stress: split out gen3 render copy
    
    Header conflicts with other headers for different generations.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1baab2e43a40fe33606668c0be19ab772e25cc7a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Wed Mar 30 21:46:04 2011 +0200

    gem_stress: option to disable render copy
    
    It seems to be randomly broken, every boot in a slightly different
    way on my i945gme. Works quite well on my Q35. So add an option to
    disable it till this is resolved.
    
    Well, more testing seems to suggest that I've been hunting ghosts.
    Or maybe not and it works now simply because it's a different day.
    Anyway, leave this in for future testing.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cd640cca6c0eb5936eaf48e43ebc5b3bf7278f6d
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 27 21:33:29 2011 +0200

    gem_stress: render copy on gen3
    
    Headers copied over from xf86-video-intel, code built after the Xrender
    support.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8ab88c9af062512dee6dc2c43d400a71b165c284
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 27 16:17:54 2011 +0200

    lib: execbuffer2 support
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2374af20feaaeac849b9a506aeb1e8e9028e5ff7
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Mar 28 21:42:26 2011 +0200

    gem_stress: fix set_tiling
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 6a860b75075e68eac786e1b4b8ec76b2dfbedb1a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Mar 29 19:23:35 2011 +0200

    gem_stress: ad-hoc tile tracing
    
    Signed-off-by: root <daniel.vetter@ffwll.ch>

commit 130daf9cd072dd3cdb380a2578ff830cc022bd1b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 27 15:37:26 2011 +0200

    gem_stress: optin to set num_buffers
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 294c78f4ab3fea90cf8a09ec08095b200103b6e3
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 27 15:25:12 2011 +0200

    gem_stress: variable gpu busy load
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 22fe098bf5468931278e68c42280a583c3f714f2
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 27 14:26:43 2011 +0200

    gem_stress: getoptification
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 874163d5c8433012bcfd00e990c289fa6d2a64ce
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 27 14:02:49 2011 +0200

    gem_stress: dump complete failed tile
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ad515f817a7e669ec1b7596c88a97349094728e8
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 25 22:09:28 2011 +0100

    Move gen5 blitter work-around to lib
    
    Suggested by Chris Wilson to prevent utterly strange gpu hangs.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit bfa6f5d94ffccfe00a6232e5adaf61d60c7cdde2
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 25 21:54:02 2011 +0100

    gem_stress: limit gtt_size to 256
    
    gem_stress maps all buffers, so more only results in trashing (which
    should be handled with an option).
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 2aac22358feb217435bb4b77ae824db823435db0
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 25 21:53:07 2011 +0100

    gem_stress: implement gen5 blitter work-around
    
    ddx and mesa assume that this is issued after every blit command.
    Breaking that invariant results in a dying gpu.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cfba9dd371bdf8031bf2bd77817a7a7976319e61
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 25 20:42:57 2011 +0100

    gem_stress: fix blitter_copy on gen4+
    
    Utter fail at copy&pasting.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit d641f0fd42c2f59459641f039a8da7d3b2adbae8
Author: Forest Bond <forest@alittletooquiet.net>
Date:   Tue Mar 22 10:31:43 2011 -0400

    intel_bios_dumper: handle rom_size == 0
    
    Some versions of libpciaccess on Linux set rom_size to 0 for VGA
    devices.  While this behavior may change, intel_bios_dumper should
    handle this situation to be compatible with current versions of the
    library.
    
    This fixes segmentation faults on affected systems.
    
    Signed-off-by: Forest Bond <forest.bond@rapidrollout.com>
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3f10ff85bd2bb65e49e52ec4f025dc977985b4b6
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Mar 21 22:13:18 2011 +0100

    gem_stress: submit batch if there's only one fence left
    
    ... for a copy might use up to two fences!
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 652d9eb983c25caf4bac09aabafbf90aa9daddbf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Mar 21 07:58:51 2011 +0000

    stress: Distinguish between busy_bo and scratch_bo creation sizes
    
    The busy bo has a fixed size (1024x256, 32bpp) whereas the scratch bo
    may need to vary their size to exercise different features of fence
    allocation.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 80aae9b4244d02873e9f6221de70a4d9cbbc2504
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 20 21:12:20 2011 +0100

    gem_stress: pwrite/pread support
    
    And a few other things:
    - inline checking when copying tiles with the cpu, fails _much_ faster.
    - bo size seems to have a tremendous effect, put on the TODO.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 08cf53703e79ec48e826af06fd6a5d5be847cb7c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sat Mar 19 21:34:55 2011 +0100

    Add gem stress test
    
    Not where I want it to be, yet. And not as good as I've hoped in detecting
    broken kernels.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 02014cee2aff72592107046328448a32374b18d3
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Mar 14 13:03:48 2011 +0100

    Decode map state on gen2
    
    At least the important stuff.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit cf5db1161a559798d789ae2aba2c9b8c101c7bdc
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Mar 14 11:20:17 2011 +0100

    Decode gen2/gen3 fences in the error_state
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit afe492549d782fc58201268d119092e069d31a83
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 6 00:12:03 2011 +0100

    Decode 3DSTATE_CLEAR_PARAMETERS
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit ad27fac946ca67d88bf12b40d6455c30daf1584b
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Sun Mar 6 00:11:50 2011 +0100

    Small cleanups for immediate state S5
    
    And a tiny fix.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 84c32bd85cc9c6b066e3af53a0998104391f56cf
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Mar 5 09:01:01 2011 +0000

    test: Mark gem_bad_batch as a known hang
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 03c1e334b8cb06a9f548ec2e43baa79731c1c798
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 4 16:41:07 2011 +0100

    Fully decode sampler state
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit f14877f2ded521f90d47aa9682f60d648eebeea9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 4 15:58:00 2011 +0100

    Fully decode map state
    
    A few odd things were missing.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 673d5bcea01bfcbf62a014bd13cc026bac3c6a8c
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 4 14:31:04 2011 +0100

    Decode 3DSTATE_LOAD_INDIRECT
    
    The remaining stuff + cleanups.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 75c403e9236cc03bc9c14ee7bf4f3d2ca8e4a93a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Mar 4 12:50:48 2011 +0100

    Decode 3DSTATE_LOAD_INDIRECT S0-S4
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1e8713fdaa38ee384d916831e8bd5354ff664f46
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Mar 3 21:29:27 2011 +0100

    Decode scissor state
    
    Not absolutely paranoid, who cares.
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 01ac8b90993eb28668d791e0b88df8bd5e93ee78
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Mar 3 21:23:13 2011 +0100

    Decode 3DSTATE_DRAWING_RECTANGLE
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 05309ebfe43d54ae231676cabbee9a285ef6375a
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Thu Mar 3 21:20:26 2011 +0100

    Decode MS3 tex format
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 1f35267948ef98c5685a02633784a5ca13e49718
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 2 16:06:00 2011 +0000

    decode: Fix pretty printing of 3DSTATE_URB allocation size
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1c05f89cebb0d1fa5e0676bf88cc1cf0bdb4421c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Mar 2 14:48:20 2011 +0000

    decode: fix gen6 PS binding table update bit
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit eb777071d75e4bb50964d32e4c354021116ed9e9
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Tue Mar 1 00:01:34 2011 +0100

    Decode MS3 tex format
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 8348e69561f7300ef9eb4a154f0185f9da4fa651
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Mon Feb 28 22:51:47 2011 +0100

    Decode depth buffer format
    
    Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

commit 14bed666f4f88ac2597ab5322a21e1846db21339
Author: Ben Widawsky <bwidawsk@gmail.com>
Date:   Tue Feb 22 09:25:29 2011 -0800

    Add MI_SUSPEND_FLUSH instruction decode
    
    Signed-off-by: Ben Widawsky <bwidawsk@gmail.com>
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 41570d9bf583d35687bab88ac88620af41404836
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Feb 14 15:56:14 2011 +0000

    Remove confusing use of IS_9XX
    
    ... and test for what we mean instead.
    
    Reported-by: Diego Celix <dcelix@gmail.com>
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit dac602b7b3678c82dd7bc41f258e6518efb8d6cd
Author: Hai Lan <hai.lan@intel.com>
Date:   Fri Feb 11 23:25:36 2011 -0500

    correct a mistyping for testdisplay
    
    For testing all mode, the sleep time should be sleep_between_modes
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 28032382bce40392a98dd5ec71443a6f2bee7f27
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 11 10:56:41 2011 +0000

    testdisplay: Remove deprecated GIO functions
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5534cb1c7566916a6bc39badf1eb4624399d542e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 11 10:48:04 2011 +0000

    testdisplay: Clarify
    
    Move the loop operations around for test_all_modes so that it is clearly
    split up into the desired phases.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 62d516813afd36146df63746e7b83e86d2588c70
Author: Hai Lan <hai.lan@intel.com>
Date:   Fri Feb 11 11:14:15 2011 -0500

    Add a test case into intel-gpu-tools for intel display driver validation.
    
    We have not a unified tool to check Intel display driver and we plan to use
    intel-gpu-tools/testdisplay to check Intel display driver even though some
    function tests can be found in libdrm/test. 3 new features are added:test
    all supported modes, force mode and dump mode info(dump mode info is based on
    libdrm/tests/modetest).
    
    [ickle: attack the whitespacing!]
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d75f2632c11b4f694447c464690e52c37c7c0573
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 10 11:20:20 2011 +0000

    intel_stepping: Include clocks in summary
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 592b1a51ffa8944da1673e844bfccd0c40cf0a20
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 10 11:00:49 2011 +0000

    tools/intel_bios_reader: use correct printf format for size_t
    
    intel_bios_reader.c: In function ‘dump_backlight_info’:
    intel_bios_reader.c:192:22: warning: format ‘%lu’ expects argument of type ‘long unsigned int’, but argument 2 has type ‘unsigned int’ [-Wformat]
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 73dd92f85b6321a863dac2a1d22600ad03b3b5d9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 10 10:59:54 2011 +0000

    tools/intel_disable_clock_gating: Remove unused variable
    
    intel_disable_clock_gating.c: In function ‘main’:
    intel_disable_clock_gating.c:38:11: warning: unused variable ‘temp’ [-Wunused-variable]
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 56167d8bfd7dcd6959e3f0465b09833f2906baec
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 10 10:56:27 2011 +0000

    tools: Do not install intel_gpu_dump
    
    It has been supersede by intel_error_decode for the user-facing role of
    obtaining debug info after a crash.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c407041ebbe0ad1944dc713ec342fd9b57efb8b2
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 10 10:54:39 2011 +0000

    tools/intel_gpu_dump: Replace asprintf with snprintf
    
    The maximum filename is limited so we can simply use a large buffer
    rather than fail to check the error return from asprintf.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2c9b293927b5f6bd48c71e2657ca5d7a524a59f8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 10 10:50:48 2011 +0000

    tests/intel_reg_dumper: Replace asprintf with snprintf
    
    Stops the compiler warning about not checking the potential error return
    from asprintf, which was a false positive anyway.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d4127e0e68315b668a4d9aea62ec43e03ccb86e7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Feb 9 10:24:39 2011 +0000

    tests: Move potential machine killers away from distcheck
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a5bbd5ea7122fef2c66980805c110e4f095406cb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Feb 9 10:21:27 2011 +0000

    tests/gem_exec_blt: Compile fix

commit 68b64f1b399e712a3b96b91568dc2b6d7e9b35d9
Author: Javier Jardón <jjardon@gnome.org>
Date:   Tue Feb 8 22:33:12 2011 +0000

    build: Update autotools configuration
    
    Replace deprecated macros and use the new libtool syntax
    Also use silent-rules to make the build option less verbose.

commit 293dd478d713eee5cedfa04749c97d1aa850df3c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Feb 8 12:04:17 2011 +0000

    configure: Bump the libdrm dependency
    
    Whoops, should have done this ages ago for I915_EXEC_BLT
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c91951de0e7b412fa02facf349c8912348cb1aa4
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Feb 6 10:18:53 2011 +0000

    gem_linear_blits,gem_tiled_blits: Add optional count
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0995b563341c9e34f4b6314c67d4671a516fb1b0
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Feb 1 13:35:16 2011 +0000

    Fix basic blt test for SNB
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0e50b972de4ea7e883b6cea608311fbd84b2961b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Feb 6 10:12:42 2011 +0000

    Fix typo excluding Ironlake from IS_INTEL
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 74895a2344a3839c5c8f9b41438e226b9d72efc1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Feb 5 10:09:38 2011 +0000

    gem_tiled_blits: Minor enhancements
    
    Include a simple series of blits that exhaust the aperture but have the
    maximum grace time between reuse.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 91b1c62a9c1e625d6c84cab354ed66d08239faa9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Feb 5 10:09:38 2011 +0000

    gem_linear_blits: Minor enhancements
    
    Include a simple series of blits that exhaust the aperture but have the
    maximum grace time between reuse.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f343805d169a99f7daa12df88bdf3da7e7085482
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Feb 2 10:32:52 2011 +0000

    Simplify gem_linear_blits
    
    By doing everything manually we can indeed exercise the full GTT.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9fd7e35c39a2fd82b95376c8a8a8424bc79f2d23
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Feb 1 19:22:32 2011 +0000

    Simple test to ensure that working sets larger than memory, just work.
    
    Based on gem_tiled_blit, but without the complication of the tiling.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 68a95f0e389096e7e4d87cd87dbb09edaca9909b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jan 25 16:34:08 2011 +0000

    error decode: Search for first i915_error_state
    
    Handy for multi-GPU systems where the IGFX may not be first.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3c5c8ba71c4c32dcac1cf0493210d21fc9b33c8a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Feb 1 13:35:36 2011 +0000

    Search for the first Intel dri device.
    
    This is vital in a multi-GPU system so that we only test the Intel card
    and not the discrete GPUs.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c1e9795050b1e4b76c7f9acd3cc5071f0ecb06ed
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Feb 1 11:12:40 2011 +0000

    tests/gem_tiled_fence_blits: Ensure the bo count is odd
    
    In order to avoid a self-copy, the number of bo must not be even.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 371f87f2d825900484e34a8ec78272b9e62cbc02
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Feb 1 10:53:57 2011 +0000

    Exercise the whole aperture with tiled blits
    
    After full-gtt, gem_tiled_blits doesn't allocate enough to force
    eviction. So query the total aperture and accommodate.
    
    Also introduce a similar test that utilizes fences rather than
    use the BLT to perform the tiling and detiling.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5fc09c82d40113a7ebf67b7dbc374c181d9fafe3
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 21 00:43:11 2011 +0000

    Time blt vs pwrite
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 07d59b308d1d71c350e99ac2a889e5d0110a69d8
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 20 22:10:10 2011 +0000

    Add a simple test to execute n nop batches
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit ed385ea331b1d7d284c6e2e0165f01d1af1f4513
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 23 12:44:51 2010 +0000

    Add a GTT timing test
    
    Using for basic benchmarking and diagnosing some mysterious slowdowns.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 281285ec702bceecaffbdcbc5c1a3cc4591e500c
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Jan 29 16:12:38 2011 +0000

    bios: Parse SDVO panel DTDs
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit afaf5ef27cafad5a0fc0ad2fb870e1a7ea8743a1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jan 9 14:01:47 2011 +0000

    gpu-top: Correct computation of ring size
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 98eb5a5e240fbdf8067c2bee48afe749feeca12f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Jan 9 13:26:50 2011 +0000

    error: Parse ring name before gtt_offset
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d9ec63b1a0c41c96af676cd9d642bf622be1788f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 7 19:59:00 2011 +0000

    intel_gpu_top: Include BLT ring
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5503ac9e1907ed905a29986d0db8beb468273827
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Jan 7 19:42:29 2011 +0000

    intel_gpu_top: Wake the GT power well to read gen6 ring registers
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4f20844247e72811c2f3655e24cb45dc920340d6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 23 19:44:14 2010 +0000

    error decode: print out class of chipset in the error report
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f19a1942c2a3da4b65dff029ecfd9d20a132765d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 23 12:44:51 2010 +0000

    Add a GTT timing test
    
    Using for diagnosing some mysterious slowdowns. Should include a variant
    for basic benchmarking...
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 322563027cabbdbd21c1ecee4cec4b89b3028ce6
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Tue Dec 21 12:06:00 2010 -0800

    tools/bios_reader: try to dump more child device data
    
    Some of our device class defines were incorrect, and we were missing
    several recent ones, so fix those up and dump more child device data if
    we have it.

commit 5406c633a006eb76a81b73d27cc3be1754b0718f
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Tue Dec 21 09:38:23 2010 -0800

    tests: add display testing program
    
    Just a simple program to light up all detected outputs at their native
    mode and respond to hotplug events.

commit 253acc34af6fb9976a8d54991560dec5920af20b
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Dec 16 16:42:52 2010 -0800

    intel_disable_clock_gating: New tool for turning off clock gating on ILK.
    
    This is something I sometimes want to do in testing, to see if a
    mystery bug (say, 29172) is due to broken clock gating.  Sadly, in
    this case it isn't.  Note that it isn't supported on non-ILK chipsets
    yet.

commit 19b412b37cd3474200a2c6fe0cdb11af0c0f98cb
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Nov 16 09:25:56 2010 +0800

    intel_gpu_top: Print stats regs on Ironlake as well.

commit 292ae4538a922f93eec1958b6073e83baab4e1c7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 10 15:31:59 2010 +0000

    error-decode: stdin is 0 not 1
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 94de0b46b5b2c80dc34a145ec47a34b13a1f7937
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Dec 4 14:12:19 2010 +0000

    decode: Add a couple of BLT MI.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 1e4cf7dbbe4fcc86c551567975f121589c721f97
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sat Dec 4 11:41:30 2010 +0000

    gpu-dump: Include BLT and BSD ringbuffers
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 157207ada5d92ce47c03f64f953ee3955de164e1
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Dec 3 00:41:43 2010 +0000

    decode: Add some missing protection against short buffers for gen6 instr
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3dafead3f25cf2118637d131a9da1d06da4cae02
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Dec 2 23:05:16 2010 +0000

    dump-decode: allow specification of devid, i.e. gen
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a3a78632bd1ae873b3946d22271d4002daccc34b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Dec 1 21:51:59 2010 +0000

    error-decode: Operate as a pipe and accept input from stdin
    
    Useful for feeding in compressed files from bugzilla:
    
    $ bzcat /tmp/i915_error_state.bz | intel_error_decode | less
    
    Next step would be to use gzfopen or bzfopen to automagically handle
    compressed files...
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit aa0a346deb208386e3f39253efd0693621841535
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Nov 29 16:06:46 2010 +0000

    decode: Improve parsing of i915 fixed-length indexed primitives
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit d4d769a4329f3f22842f8270fca46047bd4892ce
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Oct 26 10:59:18 2010 +0100

    Prepare for split BLT ring on Sandybridge.
    
    Depends on libdrm 057fab3382c02af54126ce395c43d4e6dce9439a
    
    Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=31123
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8934395d9d3b5910a52785d69a8da4516c4d82a6
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 22 11:33:08 2010 +0100

    Decode PGTBL_ER for i965
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 8a4fc850a820cb555dfe7c1a6ddd068cb0039308
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Oct 1 22:22:28 2010 +0100

    intel_gpu_top: Sample BSD rings as well as render
    
    Show how busy the GPU is when decoding video as well as rendering.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4eef00a8fbb0602914e7bf903c78fecb4b888ef1
Author: Zhenyu Wang <zhenyuw@linux.intel.com>
Date:   Wed Sep 29 09:47:46 2010 +0800

    decode: fix PS sample state change bit on sandybridge
    
    Signed-off-by: Zhenyu Wang <zhenyuw@linux.intel.com>

commit dbc547dbb525827a53543267bd38451c475e7c54
Author: Zhenyu Wang <zhenyuw@linux.intel.com>
Date:   Mon Sep 27 13:34:52 2010 +0800

    intel_decode: decode 3d commands for sandybridge
    
    Signed-off-by: Zhenyu Wang <zhenyuw@linux.intel.com>

commit b95893820fd0b8e0af3d5c80110884acdb934666
Author: Zhenyu Wang <zhenyuw@linux.intel.com>
Date:   Mon Sep 27 13:24:52 2010 +0800

    Add all sandybridge device ids
    
    Signed-off-by: Zhenyu Wang <zhenyuw@linux.intel.com>

commit 7ab19ae6feb06fa8140a16333fc7670936af80ac
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Mon Sep 20 14:37:07 2010 -0700

    intel_reg_dumper: eDP port is on the CPU, not PCH
    
    Made me think there was another register until I checked the offset.

commit 4f12d8acbaa3a253d8b21d04bbfe17ed9ede6158
Author: Adam Jackson <ajax@redhat.com>
Date:   Wed Sep 8 14:39:12 2010 -0400

    bios_reader: Fix to work on non-Intel machines
    
    Actually, fix to work on _any_ machine where the ROM file doesn't match
    the GPU.  Just extract the device ID from the ROM itself rather than
    look at the running system.
    
    Signed-off-by: Adam Jackson <ajax@redhat.com>

commit c09fa38c01e44581db37703bb6b8cf1b60b2d09f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Sep 5 12:05:52 2010 +0100

    reg dumper: Dump ILK panel fitting control debug registers
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a462fa6e29bf64fd64d94274775f33b9918f5cbb
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Sep 5 10:53:12 2010 +0100

    reg dumper: Fix ilk panel fitter filter shift
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c935c6021449fa442c51858e3d9cd79e1cec62ab
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Aug 25 11:56:59 2010 +0100

    tests: Fix fallout from s/EBADF/ENOENT/ in 2.6.36
    
    After bf79cb914dbfe848add8bb76cbb8ff89110d29ff, drm uses ENOENT to
    report unknown handles buffer objects, update the tests accordingly.
    
    Fixes:
    
      Bug 29794 - some intel_gpu_tools cases fail
      https://bugs.freedesktop.org/show_bug.cgi?id=29794
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 14618620cc057293bce77f9a137a5f7df083beed
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Aug 25 11:55:25 2010 +0100

    decode: Handle errors during parsing.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit db91f220da8806a505e848ab35db7659b155fe1f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Aug 25 11:54:54 2010 +0100

    reg dumper: Add panel backlight detailed information
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 74c8c8d6121cda1d91df29d471e58f6b68275a1c
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Jul 19 08:27:32 2010 -0700

    intel_gpu_top: Fix the "limit printing to terminal height" again.

commit 9e4ba53014f214750d8bba01f92bf3febf2ffb0d
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Jul 9 13:26:57 2010 -0700

    intel_decode: Fix decode for gen6's moved VERTEX_ELEMENTS valid bit.

commit aa4772c3c1c09f775e34e15533789094922f2e40
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jul 15 19:31:21 2010 +0100

    dump decode: Add a non-installed program for decoding binary batchbuffer dumps.
    
    Rather than add yet another decoder into the drivers, I rather just emit
    a binary blob and use the decoder being developed here.
    
    As it is a pure debugging feature, lets not package it.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 2d1ad95423953c60fdc5b336d5dd1298ce2114c7
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jul 15 19:18:39 2010 +0100

    error: Decode i915 PGTBL errors
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cf255e382d147fe3ca450f0dcec3525190e7dcbc
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Jul 8 12:13:08 2010 -0700

    intel_decode: Fix whitespace for importing to Mesa.

commit b1e839d02652fcc5b19ee20d7feeb7e908df1c29
Author: Jesse Barnes <jbarnes@jbarnes-acer.localdomain>
Date:   Wed Jun 30 02:02:49 2010 -0700

    intel_reg_dumper: add some 945 MI reg dumping

commit be6e1a53fc0fadedf24839e11d0bd2e0faca5126
Author: Adam Jackson <ajax@redhat.com>
Date:   Wed Jun 30 11:18:00 2010 -0400

    Use longer string padding in intel_reg_dumper on ironlake
    
    DIGITAL_PORT_HOTPLUG_CNTRL is 26 chars.  Bump out to 30.
    
    Signed-off-by: Adam Jackson <ajax@redhat.com>

commit 439adf7a0af2613e13bf1b29b02ab084b39f072c
Author: Adam Jackson <ajax@redhat.com>
Date:   Wed May 5 11:46:27 2010 -0400

    fix reg_dumper on systems without intel gpus

commit 040fbc6ea3fd59024a41e85af273b0194901f27a
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jun 15 13:05:48 2010 +0100

    intel_reg_dump: Off-by-one in calculation of i965 fence pitch
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 581205db44b834e8f056749819502fd833c1af10
Author: Zhenyu Wang <zhenyuw@linux.intel.com>
Date:   Thu Jun 3 10:31:04 2010 +0800

    bios_reader: Fix SSC frequency parse for Ironlake/Sandybridge
    
    Signed-off-by: Zhenyu Wang <zhenyuw@linux.intel.com>

commit 020abdb7cc52163a0f2dacd1b296b36ce1a31911
Author: Wu Fengguang <fengguang.wu@intel.com>
Date:   Mon Apr 19 13:13:06 2010 +0800

    intel_audio_dump: add support for IbexPeak and CougarPoint
    
    Signed-off-by: Wu Fengguang <fengguang.wu@intel.com>
    Signed-off-by: Eric Anholt <eric@anholt.net>

commit a52cbcbf5657a13e456af419c45a87b89bf56ca3
Author: Adam Jackson <ajax@redhat.com>
Date:   Thu Apr 22 15:37:49 2010 -0400

    bios reader: Decode device type from child device table
    
    Signed-off-by: Adam Jackson <ajax@redhat.com>

commit a5b1e98edb2f8f7f7f6449afaad8a1385cad3d4d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Apr 16 22:23:44 2010 +0100

    decode; Parse 3DSTATE_BUFFER_INFO
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 5b9678e822b770825a4b17919a953009ac7abb02
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 15 09:53:00 2010 +0100

    decode: Also override S2 for 3DPRIM_CLEAR_RECT
    
    3DPRIM_CLEAR_RECT implicitly uses only VERTEX_XY and no texture coords.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit c8f5ac542c91f2533db72abe30546df8fb8aee0f
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 15 09:48:00 2010 +0100

    decode: Use a valid S4 mask [VERTEX_XY] for 3DPRIM_CLEAR_RECT
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 50b8272d0b28c1fde9e3ab07fcf011d14f41fb66
Author: Zhenyu Wang <zhenyuw@linux.intel.com>
Date:   Thu Apr 15 23:22:06 2010 +0800

    update PCH HDMI debug info
    
    Signed-off-by: Zhenyu Wang <zhenyuw@linux.intel.com>

commit eae80edbb3e6959d3acda963ee32db4f4a200533
Author: Zhenyu Wang <zhenyuw@linux.intel.com>
Date:   Thu Apr 15 01:25:50 2010 +0800

    reg dump update for SNB/CPT
    
    Signed-off-by: Zhenyu Wang <zhenyuw@linux.intel.com>

commit 2b40fc83d130d2850761aa1409e0716ace6dfe0b
Author: Zhenyu Wang <zhenyuw@linux.intel.com>
Date:   Thu Apr 15 22:57:02 2010 +0800

    Add PCH chipset type check for Cougarpoint
    
    Signed-off-by: Zhenyu Wang <zhenyuw@linux.intel.com>

commit c3832aefbf9a4120f12283e3cb3e18d7daa04070
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 5 00:26:35 2010 +0100

    decode: There are 4 unpreserved registers on i915, not 3.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 4278dc6e645c4b70b4029294e552aae5f57340ba
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 14 22:30:58 2010 +0100

    decode: CLEAR_RECT uses a fixed VERTEX_XY format.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 3d883c3d2576a460dd56dcb04b22d98022f3057b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Wed Apr 14 22:25:57 2010 +0100

    decode: CLEAR_PARAMETERS has a fixed length bias of 5.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 58eb041970a6bd3732aaeb61cf427d0db088a663
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 8 12:00:00 2010 +0100

    gitignore: Add missing intel_reg_snapshot

commit 95374225e865da3a30153f73e8bb536700d15459
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Apr 8 11:56:57 2010 +0100

    Enable compilation on non-Intel, non-DRM systems.
    
    A few of the tools can be performed post-mortem from a different system,
    so it is useful to be able to compile those tools on those foreign
    systems. Obviously, any program to interact with the PCI device or talk
    to GEM will fail on a non-Intel system.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit cd64e193299be4b9733a5e804cedd99e2072830f
Author: Adam Jackson <ajax@redhat.com>
Date:   Wed Mar 31 17:25:23 2010 -0400

    intel_reg_dumper: Add support for reading register dumps from files
    
    Also add intel_reg_snapshot for creating such snapshots, and relevant
    documentation.
    
    Signed-off-by: Adam Jackson <ajax@redhat.com>

commit 2187ec2112750bb898416358ac5463eebbf30049
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Apr 5 00:26:35 2010 +0100

    decode: There are 4 unpreserved registers on i915, not 3.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7682c42809078ad32552a2dae663510580158b28
Author: Eric Anholt <eric@anholt.net>
Date:   Wed Mar 24 12:01:00 2010 -0700

    Fix INSTDONE1 bits on g4x, and use those on Ironlake too.

commit b0ddd0688cccd41a4661a00bfd897a63f9a11279
Author: Eric Anholt <eric@anholt.net>
Date:   Wed Mar 24 11:40:07 2010 -0700

    Add Ironlake INSTDONE bits.

commit 7c9d69de5722fe492c3e06ec94d1c26013df2861
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Mar 8 22:51:40 2010 -0800

    intel_reg_dumper: Fix the i915 fence reg decode to not be pure lies.

commit 4279006ff24376c47ed3efff95ed2239b0928954
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Sun Mar 21 19:33:45 2010 +0000

    decode: Parse i915 MAP_STATE texture sizes and tiling
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit bfc2b5306fac21bda5fc09dbf031716fd53a0f78
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 4 21:56:04 2010 +0000

    intel_error_decode: Pretty print i830 PGTBL_ER
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit f93dae8176d83791521eae23ab3c028cc7c93eee
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Mar 4 09:14:56 2010 +0000

    decode: Fix length mask for LOAD_REGISTER_IMM.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit bcaea4da8997ce09d580df351ae7919832882fc5
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Feb 25 12:48:00 2010 -0800

    intel_gpu_top: Print stats lines even when there's no done bit on the line.

commit 9271e2256d7e86989587b001715fccc30400180e
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Feb 25 12:18:11 2010 -0800

    intel_gpu_top: Print the vertex/primitive statistics on gen4+.
    
    This requires that the window be much wider.  I'm not sure how we
    really want to lay out this interface usably, but so far giant windows
    are working well enough for me.

commit c33f64ff955134aef2fc10cee4d48c6da4858549
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 25 18:52:15 2010 +0000

    man: Add manpage for intel_error_decode
    
    A rudimentary manpage based on intel_gpu_dump for the simple tool
    for the post-processing of i915_error_state, intel_error_decode.

commit 0e4e700c51fbed8f333f2642edadf1b46bf51cc5
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Feb 23 17:04:29 2010 -0800

    Fix a typo in intel_gtt(1).

commit 17b8abdb6b9401768c9b1821ac33220d3b7eea5e
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Feb 23 17:00:54 2010 -0800

    Add manpages for a bunch of recently-added tools.

commit cb6bd9f73a6ff926cb4863c1fd3ad37a00f9c0b3
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Feb 1 10:47:19 2010 -0800

    Add decode for more Sandybridge packets.

commit 291a576d72d234c42f5d9655ee0698f20eec8bd8
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Jan 15 14:28:16 2010 -0800

    Add support for Sandybridge INSTDONE regs.

commit 67736dbc9435ab95ab4092d73a5b057039d14d30
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Jan 15 14:28:02 2010 -0800

    Add support for Sandybridge mobile chipset.

commit 0fe5e9c1342a3baf9c15616febc74d203b43b2d4
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Jan 15 14:27:41 2010 -0800

    intel_gpu_dump: More SNB packets.

commit 334f76d22de1098fb209c08c8ae45b8d71c4ed6a
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Jan 15 14:26:43 2010 -0800

    intel_gpu_dump: Use the spec's names for the INSTDONE regs printed out.

commit 35233864413ff74e26a29b7807ec7413cde6e7cc
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Dec 17 14:21:28 2009 -0800

    Add Sandybridge decode for CMD_VIEWPORT_STATE_POINTERS

commit 0a497420cd170e0eb1109dd03dab04232d7e9ce2
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Dec 15 12:38:23 2009 -0800

    Add Sandybridge STATE_BASE_ADDRESS decode.

commit 24ea25de39cc2f4e9e2052f90f4e93ad98d98c19
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Nov 3 16:15:25 2009 -0800

    intel_gpu_dump: Add support for sandybridge DEPTH_BUFFER and BINDING_TABLEs.

commit 613d1c48968bf5b6130d01a3408a70fc2d1307ee
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Oct 22 15:52:02 2009 -0700

    Add some initial definitions for Sandybridge.

commit c94174d106b0b7c97643309ec85d763b0429ef11
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Feb 25 11:05:16 2010 +0000

    decode: Parse MI_BATCH_BUFFER for i8xx
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 0583c22cdfb71cb43153cf7c17aa775ae660f96c
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Feb 19 12:23:16 2010 -0500

    Add intel_bios_dumper from the 2D driver.  Last of the tools, finally!

commit 22fd4c370c2a04702fd5fabd6bbd16988b4a8225
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Feb 19 12:12:04 2010 -0500

    Move the intel_lid tool from the 2D driver to here.

commit 9eb4de10a1ff3df3a455efb63a51ea9d5480d72d
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Fri Feb 12 13:28:40 2010 +0000

    Add intel_error_decode.
    
    A simple variant of intel_gpu_dump that explicitly handles parsing of
    i915_error_state.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit a5846bff27ccd4f148c883177c9516c3f06da4b0
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Feb 1 15:02:24 2010 -0800

    intel_gtt: Add intel_gtt from the 2D driver.
    
    We've used it several times in bringing up the AGP driver, so it seems
    useful to have aronud.

commit 65f1f881b7a4a547c6ebdb75f8bddc99636210b9
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Jan 28 22:52:50 2010 +0000

    intel_gpu_dump: Parse ringbuffer info from i915_error_state
    
    Distinguish an inline ringbuffer [-- ringbuffer] dump, from batch
    buffers [-- gtt_offset] and separate it in the decoded output.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 6c1125d95804dafc72f16deafd345d7523d9dd24
Author: Zhenyu Wang <zhenyuw@linux.intel.com>
Date:   Thu Jan 21 09:39:29 2010 +0800

    Remove extra aclocal flag after replace dolt and shave
    
    Signed-off-by: Zhenyu Wang <zhenyuw@linux.intel.com>

commit 7daa481bb7cdb06630a42fe45c2a59d677cf8af1
Author: Zhao Yakui <yakui.zhao@intel.com>
Date:   Tue Jan 5 14:13:43 2010 +0000

    reg_dump: Dump display port register on Ironlake
    
    Dump the display port register on Ironlake.
    
    Signed-off-by: Zhao Yakui <yakui.zhao@intel.com>
    Signed-off-by: Eric Anholt <eric@anholt.net>

commit 97ffee66ae240fdebe8142f4f43687b1772a9350
Author: Zhenyu Wang <zhenyuw@linux.intel.com>
Date:   Tue Jan 12 14:04:43 2010 +0800

    Pull bios_reader program from Xorg driver
    
    Signed-off-by: Zhenyu Wang <zhenyuw@linux.intel.com>

commit 087d74b33544b07ec4413cd6622b2eb9b0dbfa73
Author: Zhenyu Wang <zhenyuw@linux.intel.com>
Date:   Wed Jan 6 13:43:54 2010 +0800

    gitignore intel_audio_dump and intel_reg_read
    
    Signed-off-by: Zhenyu Wang <zhenyuw@linux.intel.com>

commit 4cc8b0543a9afc3209ff02f5739f7a38ff484dd8
Author: Zhenyu Wang <zhenyuw@linux.intel.com>
Date:   Wed Jan 6 13:39:05 2010 +0800

    Add 'intel_reg_read' tool
    
    This is a handy tool to just check state of one register, which might
    not bother to be included in intel_reg_dumper tool. And also take in Ben's
    original full range register dump with '-f' option.
    
    Signed-off-by: Zhenyu Wang <zhenyuw@linux.intel.com>

commit 5afb8ff68b87c4ae00b2ac2c3124515c1c71272b
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jan 5 12:33:17 2010 +0000

    gpu_dump: Parse INSTDONE if seen inside a file.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit e30f06fbb927a7348630d5c2ad64982068475b58
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jan 5 12:32:32 2010 +0000

    reg: Include INSTPM in dump.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 55950195da6ab0cb6d931dae2733628a97286bde
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Jan 5 12:31:12 2010 +0000

    decode/i965: Show byte lengths for buffers.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 7f63b95c06ee49afcc6547128f8d582b91694d40
Author: Shuang He <shuang.he@intel.com>
Date:   Mon Dec 14 14:10:02 2009 +0800

    intel_gpu_top: Fix broken clock reporting.
    
    Signed-off-by: Eric Anholt <eric@anholt.net>

commit 4e6400c4bbba2a35c7dc5396c69ca4444682b07f
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Nov 2 11:20:23 2009 -0800

    Replace dolt and shave with using current autotools.

commit b4b8aafc61f48be9c1bfef7cf2c055201aeb4711
Author: Kenneth Graunke <kenneth@whitecape.org>
Date:   Tue Dec 8 22:38:18 2009 -0800

    Limit printing to terminal height in intel_gpu_top.
    
    When using intel_gpu_top in a small terminal, the most important
    information (ring idle/busy units) scrolls off the top of the screen.
    This patch limits the number of lines printed to the terminal height
    so that the most idle units (at the bottom) are truncated instead.
    
    Signed-off-by: Kenneth Graunke <kenneth@whitecape.org>

commit 94a180c0c95d70983ca15ada1de5d8624a68211e
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Mon Nov 30 15:20:29 2009 +0000

    decode: Split decoder and reuse outside of intel_gpu_dump
    
    Introduce a second decoder that simpler operates on a file so that it
    can be run on dumped batchbuffers independent of the gpu.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 9e9c9f24f5d5520ab6a2451aab7dc81d2abc8cdf
Author: Wu Fengguang <fengguang.wu@intel.com>
Date:   Fri Nov 6 11:06:22 2009 +0800

    Add: tools/intel_audio_dump
    
    Signed-off-by: Zhenyu Wang <zhenyu.z.wang@intel.com>
    Signed-off-by: Wu Fengguang <fengguang.wu@intel.com>

commit b4ddf71a4ae45e24fc0947194048b56e45c18456
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Oct 8 06:48:02 2009 +0100

    Add: tools/intel_gpu_time
    
    A simple variant on time crossed with intel_gpu_top to estimate the
    amount of GPU activity during a program's execution time.
    
    The resource usage (sys+user, i.e. CPU %) is for the child, but the
    GPU measure is global. Hmm.
    
    Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

commit 40bff5071c8e5bce785f9c56b7d98f12fc3ae2c2
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Oct 6 17:25:10 2009 -0700

    Add intel_gpu_dump from the 2D driver.

commit d48fc144cab31b0a776992b2a8eba30b101a21f4
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Sep 21 15:00:56 2009 -0700

    Bump to 1.0.2 for release.

commit 15ba3a5fc6556ce408723e4a9f05b1830316115b
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Sep 17 15:05:24 2009 -0700

    Print unmatched opcode value for all 3D UNKNOWN messages
    
    This just simplifies one step for fixing up an incompletely-parsed
    dump.

commit bbebf6b1c90b5c777e1a155818e3194e1c3889bc
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Thu Sep 3 09:50:00 2009 +0800

    Add support for new chips
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit b20efcf585af65b1cff8b76b8bac5af9252d9391
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Thu Sep 3 09:35:50 2009 +0800

    CS FENCE in URB_FENCE is 11-bits wide
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 84a877511f2a85274ef0f22ea01249b1440e95c5
Author: Xiang, Haihao <haihao.xiang@intel.com>
Date:   Thu Sep 3 09:33:36 2009 +0800

    Fix the length of CONSTANT_BUFFER
    
    Signed-off-by: Xiang, Haihao <haihao.xiang@intel.com>

commit 61237b98bb02479bfa9eefe5e6bf62a3ce9468f7
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Jul 20 11:46:11 2009 -0700

    intel_gpu_dump: Don't pretend we understand vertex formats on 8xx.

commit b66d2feb6981c41fae9eea003e7e55ff531d1317
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Jul 20 11:44:56 2009 -0700

    intel_gpu_dump: Parse LOAD_STATE_IMMEDIATE_2 for 830.

commit 7bc13bc00c028162dbf402a8ebda6203c50c3179
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Jul 20 09:14:43 2009 -0700

    intel_gpu_dump: Add IPEIR and PGTBL_ER to output.

commit 56bdcd1d6b434cd37bfc47d295abaf37f0093c84
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Jul 20 09:07:16 2009 -0700

    Add INSTDONE bits for 830-865.

commit 1cbfe0ea6aea4a1bef6528cb72308c9571636c62
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Jul 16 14:15:47 2009 -0700

    intel_gpu_dump: Fix decode for LOAD_STATE_IMMEDIATE_1 with S8 set.

commit d9e28e63e5a11f0707516b2eff648b1c2c99598a
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Jul 13 10:03:17 2009 -0700

    Add a manpage for intel_reg_write

commit d83a417c0158b5385835d520c1ed46fd6e5fd683
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Thu Sep 3 10:58:59 2009 +0100

    dump: Minor typo

commit 8f3f862b961c5b28ccdb42faff7b279aafcec652
Author: Chris Wilson <chris@chris-wilson.co.uk>
Date:   Tue Sep 1 10:09:55 2009 +0100

    Add gem_fence_thrash test
    
    This is a test case that overcommits fence registers between threads, which
    are copying from one fenced bo to another. In earlier versions of the driver
    this would cause excessive spinning as the first inactive (i.e. not in use
    by the GPU) would be used to service the next page. After all the fence
    registers had been allocated, in effect only the very first fence would then
    be used for all subsequent faults.

commit 4839ee97875d07a27c28f39021178d2cf4b5d4b8
Author: Ben Gamari <bgamari.foss@gmail.com>
Date:   Wed Jul 1 16:52:20 2009 -0400

    Add CS_USB_STATE decoding

commit 147f07b5c2248f57c75961b80e717bd83fcaa44b
Author: Ben Gamari <bgamari.foss@gmail.com>
Date:   Wed Jul 1 16:52:19 2009 -0400

    Add CONSTANT_BUFFER decoding

commit 357e43a4f1e1e4561fa1ced59c47e1b489b21b2b
Author: Ben Gamari <bgamari.foss@gmail.com>
Date:   Wed Jul 1 16:52:18 2009 -0400

    Fix gs_fence output in URB_FENCE output

commit e302d0fe89596ff5a12ae6b098ec5094154f9a4e
Author: Ben Gamari <bgamari.foss@gmail.com>
Date:   Wed Jul 1 16:52:17 2009 -0400

    add realloc bits to URB_FENCE decoding

commit 3fda98b4db5d0308cd6cbb984871ea52aca6cc5c
Author: Carl Worth <cworth@cworth.org>
Date:   Fri May 8 16:04:24 2009 -0700

    Fix error message for case of kernel prior to 2.6.30
    
    The error message was falsely claiming that a debugfs directory
    didn't exist, when it was supposed to report that the ringbuffer
    file did not exist within that directory.

commit 324428ca82ce96e2e64b724682833baf16ee6616
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Jun 30 18:05:57 2009 -0700

    .gitignore: catch up to intel_reg_write addition

commit eb239afeb7c04ffec6570959b050edda7131dcf2
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Jun 30 17:52:43 2009 -0700

    intel_gpu_dump: Add instdone register values and decoding.

commit 3904b7c6a266538eaf749c90445970601239e0a2
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Jun 30 17:13:27 2009 -0700

    intel_gpu_top: Move instdone bit definitions to lib to share with _dump.

commit 21b6f2600d2eda8e9c10ab9b123ebe79431779f7
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Jun 23 19:35:19 2009 -0700

    intel_gpu_dump: Use the correct IPEHR on pre-965.

commit eafbad3707fcbe36cc37c4acd62b8612e82757ae
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Jun 23 18:43:59 2009 -0700

    intel_gpu_dump: Add details on URB_FENCE.

commit bf3b1a3da95a1190ad09a0007be6c4c45d76627b
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Jun 23 18:16:42 2009 -0700

    Oops, fix up printed hw offset since the HEAD pointer fixup

commit a18af8ed43b092408196948b1ec3d7f9a8d7065c
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Jun 23 17:10:44 2009 -0700

    Add more 965 INSTDONE bits.
    
    This shows off the units that are stuck busy in the ut2004 hang.

commit da2c7f35c7b3059e09b4ffe680975fac0d6eb7c0
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Jun 23 16:22:41 2009 -0700

    Correctly flag the acthd when it points within a packet.

commit 12ceecf971e416fbd8be921ea187f68238878c0c
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Jun 23 16:21:34 2009 -0700

    Add the acthd to the GPU dump.

commit c25532cc613c9daf87e97d04aec2ad708bec9b3b
Author: Ben Gamari <bgamari.foss@gmail.com>
Date:   Wed Jun 10 23:13:40 2009 -0400

    Add register writing tool
    
    Signed-off-by: Eric Anholt <eric@anholt.net>

commit bbafc3d0bf851f0f1a2de6cdc7f2923a2387e775
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Thu Jun 18 18:07:47 2009 -0700

    Four new tests for error handling
    
    Add four new tests for error the error handling cases:
      - gem_bad_address - store to a bad address, should generate a protection or
        page table error
      - gem_bad_batch - try to execute a bad batch, should generate a protection,
        invalid instruction or page table error
      - gem_bad_blit - blit to an invalid location, should generated a protection
        or page table error
      - gem_hang - hang the GPU on an event that will never happen, test hang
        detection & recovery code

commit 49c564ec2fa47f62d097c7dee42730ae43445f8b
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Jun 9 11:30:25 2009 -0700

    Make the precentage bars fit in 80 columns.
    
    Signed-off-by: Eric Anholt <eric@anholt.net>

commit 8c7be935443934297763af03f0b4b7fcd4999dde
Author: Robert Bragg <robert@linux.intel.com>
Date:   Fri Apr 17 19:01:04 2009 +0100

    A pedantic addition of a format string to a printf call
    
    The printf used to clear the screen didn't have a format string, this
    adds one to avoid a compiler warning.
    
    Signed-off-by: Eric Anholt <eric@anholt.net>

commit 700e45a5225dbf06ada48c269d725458ceb347a6
Author: Robert Bragg <robert@linux.intel.com>
Date:   Fri Apr 17 18:52:23 2009 +0100

    Adds unicode bars for quickly visualizing the busy percentages
    
    It can be a bit easier to digest the percentages with bar graphs than by
    scanning continually changing numbers.
    
    Signed-off-by: Eric Anholt <eric@anholt.net>

commit 2f0c0aa8ae0649e8b05d74fed9115a4a62aa7e7f
Author: Robert Bragg <robert@linux.intel.com>
Date:   Fri Apr 17 16:25:52 2009 +0100

    Increases the sample frequency from 100/sec to 10,000/sec
    
    For a typical vsync locked application running at 60fps, sampling at just
    under twice a frame doesn't seem to give very stable lists of relevent hardware
    units because there are a number of units involved that may not be sampled one
    second to the next.
    
    This bumps the sample rate to 10,000 instead which is ~ 170 samples per
    frame so we tend to hit all the units involved.
    
    It also changes the report threshold to a sample count >= 1, so you don't
    see as many units with a percentage of 0.
    
    Signed-off-by: Eric Anholt <eric@anholt.net>

commit 2a50faae7e9d674dac60b51101aa8bf653a0b7a3
Author: Robert Bragg <robert@linux.intel.com>
Date:   Sun Jun 7 23:26:18 2009 +0100

    Revert "intel_gpu_top:print a visual clue on how big a certain use is"
    
    This reverts commit 5e13b98da1e7e31cffba84fd257002357d5f2682.
    
    We can print prettier graphs using unicode
    
    Signed-off-by: Eric Anholt <eric@anholt.net>

commit 114763f4190260e326cf4e82806fc07c7022d934
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Jun 4 14:38:17 2009 +0000

    intel_gpu_top: Print GPU clock information, which seems interesting.

commit 5e13b98da1e7e31cffba84fd257002357d5f2682
Author: Arjan van de Ven <arjan@infradead.org>
Date:   Tue Apr 28 12:05:43 2009 +0100

    intel_gpu_top:print a visual clue on how big a certain use is
    
    humans are pretty bad at reading percentages quicky; this patch adds a
    histogram capability to make it more visually clear as to which lines are
    big ticket items

commit 0521bca629a1d350fd5807516cfa0f3d0fc215de
Author: Eric Anholt <eric@anholt.net>
Date:   Tue May 19 16:48:40 2009 -0700

    Bump version to 1.0.1 for release.

commit 3365c8563a3e0ac0d86d01f956301a23a7d8dc92
Author: Eric Anholt <eric@anholt.net>
Date:   Tue May 19 16:32:39 2009 -0700

    intel_gpu_dump: Stop decoding batchbuffers after MI_BATCH_BUFFER_END.

commit 652d5518d6901f4ebe0f696b8d7e18b8edfc76ec
Author: Eric Anholt <eric@anholt.net>
Date:   Tue May 19 16:26:35 2009 -0700

    Add decode of gen4 PIPE_CONTROL

commit b7d70fc1fdb8b1b29ce62a6d75c2aca2b5314b7e
Author: Eric Anholt <eric@anholt.net>
Date:   Tue May 19 16:12:43 2009 -0700

    Add decode of dest buffer variables (destination format)
    
    (cherry-pick from Mesa commit 0af7e9170fd7c0d906652378b9f78fe2ba9725ad)

commit e71c6283022d91e3884374fa145b936cba330a66
Author: Eric Anholt <eric@anholt.net>
Date:   Tue May 19 16:09:08 2009 -0700

    Add manpages for all installed binaries.

commit 49cba961a2914df0d308ef22d257c9c60ecd02f7
Author: Eric Anholt <eric@anholt.net>
Date:   Tue May 19 15:53:55 2009 -0700

    Add gem_largeobject to ignore.

commit 433e1c85a0a512d2d58775bf10ddadeb43fe7ed8
Author: Jesse Barnes <jbarnes@virtuousgeek.org>
Date:   Thu May 14 14:39:48 2009 -0700

    tests: add large object test
    
    The large object test simply tries to allocate a 128M object, pin it, then
    pwrite the whole thing.  This should make obvious any leaks on close or
    page pointer allocation failures.

commit c9de42933223e53f326a46cffc98d24d540dc694
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Apr 27 09:45:22 2009 -0700

    Fix distcheck

commit 49ccc2bfc21f89fdd1dd823969ad5ddd82b2e67e
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Apr 27 09:41:41 2009 -0700

    .gitignore libtool junk

commit 7583e811a57d72b47ec721fcc91b2f7ad0b6a770
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Apr 27 09:39:05 2009 -0700

    intel_gpu_top: Add ring information.

commit 302d15f2e7cd77bf2bfef5a142688cdf07fc59fc
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Apr 27 09:35:40 2009 -0700

    Add a test to try to fill the ring.
    
    Did this while trying to debug the Ubuntu DRI1+compiz issue.  Didn't succeed
    in filling the ring.

commit 28a1d6436e5067221b03c820c1b6fee2ef21d496
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 13 14:35:11 2009 -0700

    intel_gpu_dump: Use asprintf instead of a static-sized array
    
    Not that we're really concerned about buffer-overrun attacks
    against this utility, but still, good habits and clean code
    are always preferred.

commit 5b8c19445cdd736d679e12be196cd4db0aac0cb1
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 13 14:33:09 2009 -0700

    intel_gpu_dump: Give a nicer message for missing batchbuffer-dumping code
    
    This is the case where debugfs is mounted, the dri/0 directory
    exists but there's no i915_ringbuffer_info file. Point the user
    toward upgrading the driver.

commit 0a820610ee733f348f9331c677f74cc88bc46486
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 13 14:06:00 2009 -0700

    intel_gpu_dump: Mention filename in error message
    
    This helps for when the user makes a typo trying to pass a file
    or directory name to intel_gpu_dump.

commit 660a20f611adb0a176cecce1b2abfe9ec5accd05
Author: Carl Worth <cworth@cworth.org>
Date:   Mon Apr 13 14:02:04 2009 -0700

    Add example command for mounting debugfs
    
    This is a nice opportunity to teach the user something, (and help our
    users to actually succeed in creating useful bug reports for us).

commit 48888093b2da0b7809d465d111e9c0cc92bb6c5e
Author: Eric Anholt <eric@anholt.net>
Date:   Sun Apr 12 18:03:25 2009 -0700

    intel_gpu_dump: Add no-arguments automatic mode, and clean up comments.

commit 5b40c86c9a714936938d19cc095f038ee904c94c
Author: Eric Anholt <eric@anholt.net>
Date:   Sun Apr 12 17:49:31 2009 -0700

    intel_gpu_dump: Dump ring, batch, and head/tail info when given the directory.

commit d69042dde69ca4a04f5e949130026447b8890cfc
Author: Eric Anholt <eric@anholt.net>
Date:   Sun Apr 12 17:04:31 2009 -0700

    intel_gpu_dump: Decode the GTT offset of batchbuffers.

commit 593a47f00e3c9cb3f748daae7d3fe04427c7e0c2
Author: Eric Anholt <eric@anholt.net>
Date:   Sun Apr 12 15:57:07 2009 -0700

    intel_gpu_dump: Get the devid so we can decode correctly on gen4.

commit b51588b9bd8a1a18a77d354b1c9fe4c841dff0f3
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Apr 7 19:07:18 2009 -0700

    Fix warning about assert in intel_batchbuffer.h

commit 548a6a7fa2037415cade339252ed29a7f89ff9f7
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Apr 7 16:21:16 2009 -0700

    Add a test for reading tiled objects with pread.

commit cd9ba0a3b6c5e11fcd2cb82914cb9d491309de89
Author: Eric Anholt <eric@anholt.net>
Date:   Tue Apr 7 16:18:11 2009 -0700

    Add a test for pread after blitting to an object.
    
    This caught a bug with get_user_pages usage in the kernel, which would
    result in zeroes being read out of the object when faulting in a new page.

commit 00c7571fce14135fa6bbe387ab4e7ce205d53c08
Author: Carl Worth <cworth@cworth.org>
Date:   Tue Apr 7 16:22:46 2009 -0700

    Add very preliminary intel_gpu_dump program
    
    Right now it requires a filename on the command line, (such as
    /debug/dri/0/i915_batchbuffers). We plan to make it smarter in
    the future by going out and collecting all the data it needs.

commit 90ca63163d250e2d50d01aa06f9fc158c0fb6ced
Author: Carl Worth <cworth@cworth.org>
Date:   Thu Apr 2 11:53:38 2009 -0700

    Add Eric's batchbuffer-decode code
    
    This comes from the 3D driver within mesa, with identically named files.
    In its new life here it will become a standalone program.

commit 3b301df9ecf652d1d26fbcc5083cdfd70c800a8b
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Apr 3 14:23:06 2009 -0700

    Add a regression test for tiled object blitting.

commit cb5a35fe8ebe959291082a15395a619b40c562a7
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Mar 30 19:17:12 2009 -0700

    Add a couple of other intel_upload_blit_large variants for comparison.

commit 7889abd2631b418d4bb9fb90a758f23f37d2f098
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Mar 30 19:09:00 2009 -0700

    intel_upload_blit_*: Fix reporting and generate junk instead of using random.
    
    Turns out that random completely overwhelmed the cost of the driver stuff
    in _large.c.  I definitely want to generate data, but still be able to see
    the driver's responsibility.

commit 614b165c60d695da424c1f42ecca53d95a32ca94
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Mar 30 19:08:43 2009 -0700

    Add intel_chipset.h to fix dist.

commit ce4782dc9d387929babf2c96d795286c91b753fe
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Mar 27 16:11:50 2009 -0700

    Move i810_reg.h to lib/intel_reg.h and get it disted.

commit 0581738c7a02d45518d60924bd8cafa5446d4019
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Mar 27 16:04:25 2009 -0700

    tests/: warning fixes

commit 1eabfa9a142a314adeaba7a691e9cf85e026f79c
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Mar 27 16:03:12 2009 -0700

    rename project

commit 676a1097234bdb4661c65565c3d568fb8cfc0e94
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Mar 27 16:03:02 2009 -0700

    readme fixups

commit 3ba49a9295370cbcbb3139674556ea723c1a6b6c
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Mar 27 13:13:47 2009 -0700

    intel_gpu_top: Add more 965 bits.

commit fbbf124f8d01365078328910cf9375e08767a57e
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Mar 27 12:25:09 2009 -0700

    Port intel_idle from 2D driver as intel_gpu_top with a better interface.

commit 872713057a7bf02afaab89832d85c0401b4bb510
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Mar 27 11:07:33 2009 -0700

    intel_stepping: Add G45 and GM45.

commit 29777a542b8db659cf539af72b17fe17a44c2aae
Author: Eric Anholt <eric@anholt.net>
Date:   Fri Mar 27 10:59:09 2009 -0700

    Add intel_stepping from the 2D driver.

commit 895a415909188e7bddb8571fe5db69cf91ee1383
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Mar 26 18:47:42 2009 -0700

    Add the tests we want from libdrm.

commit ec172167d6992b2f9b59f79b57b7a346b75317ba
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Mar 26 18:45:01 2009 -0700

    Fix project name/version for distfiles.

commit 6abc9b13f0b87f9af82d9b46ad84d74648b46a97
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Mar 26 18:44:13 2009 -0700

    Add notes about running things as root.

commit 8c64183a461a422b0443f84622af48858d5fe6ed
Author: Eric Anholt <eric@anholt.net>
Date:   Thu Mar 26 17:15:11 2009 -0700

    Initial import of intel-graphics-tools with some microbenchmarks.
